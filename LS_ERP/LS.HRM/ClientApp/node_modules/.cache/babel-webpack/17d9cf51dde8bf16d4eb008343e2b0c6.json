{"ast":null,"code":"import { ParentOptMgtComponent } from '../../../sharedcomponent/parentoptmgt.component';\nimport { DBOperation } from '../../../services/utility.constants';\nimport { CreateUpdateProposalCostingsComponent } from '../../project-budget-costing/create-update-proposal-costings/create-update-proposal-costings.component';\nimport { ConfirmDialogWindowComponent } from '../../confirm-dialog-window/confirm-dialog-window.component';\nimport { CreateUpdateContractFormComponent } from './create-update-contract-form/create-update-contract-form.component';\nimport { CreateUpdateContractFormTemplateComponent } from '../../contract-form-templates/create-update-contract-form-template/create-update-contract-form-template.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../opr-services.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../../../services/api.service\";\nimport * as i6 from \"@angular/material/dialog\";\nimport * as i7 from \"../../../api-authorization/AuthorizeService\";\nimport * as i8 from \"../../../services/utility.service\";\nimport * as i9 from \"@ngx-translate/core\";\nimport * as i10 from \"../../../services/notification.service\";\nimport * as i11 from \"../../../sharedcomponent/ValidationService\";\nimport * as i12 from \"@angular/common\";\n\nfunction ContractFormComponent_span_1_span_1_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const template_r11 = ctx.$implicit;\n    const ctx_r10 = i0.ɵɵnextContext(3);\n    i0.ɵɵpropertyInterpolate(\"value\", template_r11.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", !ctx_r10.isArabic ? template_r11.text : template_r11.textTwo, \"\");\n  }\n}\n\nfunction ContractFormComponent_span_1_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelementStart(1, \"select\", 3);\n    i0.ɵɵlistener(\"change\", function ContractFormComponent_span_1_span_1_Template_select_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.OnTemplateSelection($event);\n    });\n    i0.ɵɵelementStart(2, \"option\", 4);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ContractFormComponent_span_1_span_1_option_6_Template, 2, 2, \"option\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(4, 3, \"Select\"), \" \", i0.ɵɵpipeBind1(5, 5, \"SelectTemplate\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.templatesSelectionList);\n  }\n}\n\nfunction ContractFormComponent_span_1_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ContractFormComponent_span_1_span_4_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return ctx_r14.createContractTemplate();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" \\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"Create_Template\"));\n  }\n}\n\nfunction ContractFormComponent_span_1_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ContractFormComponent_span_1_span_5_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return ctx_r16.editContractTemplate();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" \\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"Edit_Template\"));\n  }\n}\n\nfunction ContractFormComponent_span_1_span_6_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ContractFormComponent_span_1_span_6_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext(3);\n      return ctx_r20.saveContractForm();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"Save_Addendum\"));\n  }\n}\n\nfunction ContractFormComponent_span_1_span_6_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ContractFormComponent_span_1_span_6_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return ctx_r22.saveContractForm();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"Save_Contract\"));\n  }\n}\n\nfunction ContractFormComponent_span_1_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtemplate(1, ContractFormComponent_span_1_span_6_button_1_Template, 3, 3, \"button\", 1);\n    i0.ɵɵtext(2, \" \\u00A0 \");\n    i0.ɵɵtemplate(3, ContractFormComponent_span_1_span_6_button_3_Template, 3, 3, \"button\", 1);\n    i0.ɵɵtext(4, \" \\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.project == null ? null : ctx_r6.project.isAdendum);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r6.project == null ? null : ctx_r6.project.isAdendum));\n  }\n}\n\nfunction ContractFormComponent_span_1_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ContractFormComponent_span_1_span_7_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return ctx_r24.editContractForm();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" \\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"Edit_Contract\"));\n  }\n}\n\nfunction ContractFormComponent_span_1_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ContractFormComponent_span_1_span_8_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return ctx_r26.approveContract();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" \\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"Approve_Contract\"));\n  }\n}\n\nfunction ContractFormComponent_span_1_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ContractFormComponent_span_1_span_9_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext(2);\n      return ctx_r28.editProposalCosting();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" \\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"Edit_Proposal_Costing\"));\n  }\n}\n\nfunction ContractFormComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtemplate(1, ContractFormComponent_span_1_span_1_Template, 7, 7, \"span\", 0);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, ContractFormComponent_span_1_span_4_Template, 5, 3, \"span\", 0);\n    i0.ɵɵtemplate(5, ContractFormComponent_span_1_span_5_Template, 5, 3, \"span\", 0);\n    i0.ɵɵtemplate(6, ContractFormComponent_span_1_span_6_Template, 5, 2, \"span\", 0);\n    i0.ɵɵtemplate(7, ContractFormComponent_span_1_span_7_Template, 5, 3, \"span\", 0);\n    i0.ɵɵtemplate(8, ContractFormComponent_span_1_span_8_Template, 5, 3, \"span\", 0);\n    i0.ɵɵtemplate(9, ContractFormComponent_span_1_span_9_Template, 5, 3, \"span\", 0);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.templatesSelectionList.length != 0 && (ctx_r0.contractFormData == null ? null : ctx_r0.contractFormData.contractFormHead == null ? null : ctx_r0.contractFormData.contractFormHead.id) == 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.templatesSelectionList.length == 0 || (ctx_r0.contractFormData == null ? null : ctx_r0.contractFormData.contractFormHead == null ? null : ctx_r0.contractFormData.contractFormHead.id) == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.templateData != null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r0.contractFormData == null ? null : ctx_r0.contractFormData.contractFormHead == null ? null : ctx_r0.contractFormData.contractFormHead.id) == 0 && ctx_r0.templateData != null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r0.contractFormData == null ? null : ctx_r0.contractFormData.contractFormHead == null ? null : ctx_r0.contractFormData.contractFormHead.id) > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r0.contractFormData == null ? null : ctx_r0.contractFormData.contractFormHead == null ? null : ctx_r0.contractFormData.contractFormHead.id) > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r0.contractFormData == null ? null : ctx_r0.contractFormData.contractFormHead == null ? null : ctx_r0.contractFormData.contractFormHead.id) > 0 || ctx_r0.templateData != null);\n  }\n}\n\nfunction ContractFormComponent_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ContractFormComponent_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return ctx_r30.printInvoice();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"Print\"));\n  }\n}\n\nfunction ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_ng_container_1_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 25);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 26);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 24);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 24);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const propCost_r42 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", propCost_r42.qty, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", propCost_r42.itemEng, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(7, 4, propCost_r42.price, \"3.2-5\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(10, 7, propCost_r42.total, \"3.2-5\"), \" \");\n  }\n}\n\nfunction ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵelementStart(2, \"td\", 21);\n    i0.ɵɵelementStart(3, \"table\", 11);\n    i0.ɵɵelementStart(4, \"tr\");\n    i0.ɵɵelementStart(5, \"td\", 22);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 22);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 22);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"td\", 22);\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_ng_container_1_tr_17_Template, 11, 10, \"tr\", 20);\n    i0.ɵɵelementStart(18, \"tr\");\n    i0.ɵɵelementStart(19, \"td\", 23);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\", 24);\n    i0.ɵɵtext(22);\n    i0.ɵɵpipe(23, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r37 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 7, \"Qty\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(10, 9, \"Position\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(13, 11, \"Unit_Rate\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(16, 13, \"Total\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r37.proposalCosting);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", \"Grand_Total\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(23, 15, ctx_r37.grandTotal, \"3.2-5\"), \" \");\n  }\n}\n\nfunction ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_tr_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 27);\n    i0.ɵɵelementStart(2, \"b\");\n    i0.ɵɵelementStart(3, \"u\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 27);\n    i0.ɵɵelementStart(6, \"b\");\n    i0.ɵɵelementStart(7, \"u\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const clause_r35 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(clause_r35.clauseTitleEng);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", clause_r35.clauseTitleArb, \"\");\n  }\n}\n\nfunction ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_tr_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 28);\n    i0.ɵɵelementStart(2, \"b\");\n    i0.ɵɵelementStart(3, \"u\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 29);\n    i0.ɵɵelementStart(6, \"b\");\n    i0.ɵɵelementStart(7, \"u\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const clause_r35 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", clause_r35.clauseSubTitleEng, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(clause_r35.clauseSubTitleArb);\n  }\n}\n\nfunction ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_tr_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 30);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const clause_r35 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", clause_r35.clauseDescriptionEng, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", clause_r35.clauseDescriptionArb, \" \");\n  }\n}\n\nfunction ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_ng_container_1_Template, 24, 18, \"ng-container\", 0);\n    i0.ɵɵtemplate(2, ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_tr_2_Template, 9, 2, \"tr\", 0);\n    i0.ɵɵtemplate(3, ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_tr_3_Template, 9, 2, \"tr\", 0);\n    i0.ɵɵtemplate(4, ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_tr_4_Template, 5, 2, \"tr\", 0);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const clause_r35 = ctx.$implicit;\n    const i_r36 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r36 == 2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", clause_r35.clauseTitleEng != null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", clause_r35.clauseSubTitleEng != null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", clause_r35.clauseDescriptionEng != null);\n  }\n}\n\nfunction ContractFormComponent_div_10_div_1_ng_container_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ContractFormComponent_div_10_div_1_ng_container_60_ng_container_1_Template, 5, 4, \"ng-container\", 20);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r33 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r33.contractFormData.contractClauses);\n  }\n}\n\nfunction ContractFormComponent_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelementStart(1, \"div\", 10);\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵelementStart(3, \"table\", 11);\n    i0.ɵɵelementStart(4, \"tr\");\n    i0.ɵɵelementStart(5, \"td\", 12);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 13);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"tr\");\n    i0.ɵɵelementStart(10, \"td\", 14);\n    i0.ɵɵelementStart(11, \"b\");\n    i0.ɵɵelementStart(12, \"u\");\n    i0.ɵɵtext(13, \"Contract of providing Security Guarding Services\");\n    i0.ɵɵelement(14, \"br\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\", 14);\n    i0.ɵɵelementStart(17, \"b\");\n    i0.ɵɵelementStart(18, \"u\");\n    i0.ɵɵtext(19, \" \\u0639\\u0642\\u062F \\u062A\\u0642\\u062F\\u064A\\u0645 \\u062E\\u062F\\u0645\\u0627\\u062A \\u062D\\u0631\\u0627\\u0633\\u0627\\u062A \\u0623\\u0645\\u0646\\u064A\\u0629\");\n    i0.ɵɵelement(20, \"br\");\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"tr\");\n    i0.ɵɵelementStart(23, \"td\", 15);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"td\", 15);\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"tr\");\n    i0.ɵɵelementStart(28, \"td\", 16);\n    i0.ɵɵelementStart(29, \"u\");\n    i0.ɵɵtext(30, \" (Referred to it from here on as first party)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"td\", 17);\n    i0.ɵɵelementStart(32, \"u\");\n    i0.ɵɵtext(33, \"(\\u0648\\u064A\\u0634\\u0627\\u0631 \\u0625\\u0644\\u064A\\u0647\\u0627 \\u0641\\u064A\\u0645\\u0627 \\u0628\\u0639\\u062F \\u0628\\u0627\\u0644\\u0637\\u0631\\u0641 \\u0627\\u0644\\u0623\\u0648\\u0644)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"tr\");\n    i0.ɵɵelementStart(35, \"td\", 15);\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"td\", 15);\n    i0.ɵɵtext(38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"tr\");\n    i0.ɵɵelementStart(40, \"td\", 16);\n    i0.ɵɵelementStart(41, \"u\");\n    i0.ɵɵtext(42, \" (Referred to it from here on as Second party)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"td\", 17);\n    i0.ɵɵelementStart(44, \"u\");\n    i0.ɵɵtext(45, \"( \\u0648 \\u064A\\u0634\\u0627\\u0631 \\u0625\\u0644\\u064A\\u0647\\u0627 \\u0641\\u064A\\u0645\\u0627 \\u0628\\u0639\\u062F \\u0628\\u0627\\u0644\\u0637\\u0631\\u0641 \\u0627\\u0644\\u062B\\u0627\\u0646\\u064A)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(46, \"tr\");\n    i0.ɵɵelementStart(47, \"td\", 14);\n    i0.ɵɵelementStart(48, \"b\");\n    i0.ɵɵelementStart(49, \"u\");\n    i0.ɵɵtext(50, \" Preamble\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(51, \"td\", 14);\n    i0.ɵɵelementStart(52, \"b\");\n    i0.ɵɵelementStart(53, \"u\");\n    i0.ɵɵtext(54, \"\\u0627\\u0644\\u0628\\u0646\\u062F \\u0627\\u0644\\u062A\\u0645\\u0647\\u064A\\u062F\\u064A\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(55, \"tr\");\n    i0.ɵɵelementStart(56, \"td\", 15);\n    i0.ɵɵtext(57);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(58, \"td\", 15);\n    i0.ɵɵtext(59);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(60, ContractFormComponent_div_10_div_1_ng_container_60_Template, 2, 1, \"ng-container\", 0);\n    i0.ɵɵelementStart(61, \"tr\");\n    i0.ɵɵelementStart(62, \"td\", 16);\n    i0.ɵɵelementStart(63, \"b\");\n    i0.ɵɵtext(64, \" First party:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(65, \"td\", 17);\n    i0.ɵɵelementStart(66, \"b\");\n    i0.ɵɵtext(67, \" :\\u0627\\u0644\\u0637\\u0631\\u0641 \\u0627\\u0644\\u0623\\u0648\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(68, \"tr\");\n    i0.ɵɵelementStart(69, \"td\", 18);\n    i0.ɵɵtext(70);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(71, \"td\", 19);\n    i0.ɵɵtext(72);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(73, \"br\");\n    i0.ɵɵelementStart(74, \"tr\");\n    i0.ɵɵelementStart(75, \"td\", 16);\n    i0.ɵɵelementStart(76, \"b\");\n    i0.ɵɵtext(77, \" Second party:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(78, \"td\", 17);\n    i0.ɵɵelementStart(79, \"b\");\n    i0.ɵɵtext(80, \" :\\u0627\\u0644\\u0637\\u0631\\u0641 \\u0627\\u0644\\u062B\\u0627\\u0646\\u064A\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(81, \"tr\");\n    i0.ɵɵelementStart(82, \"td\", 18);\n    i0.ɵɵtext(83);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(84, \"td\", 19);\n    i0.ɵɵtext(85);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r32 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" (Reference No.\", ctx_r32.referenceNumber, \") \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" (\", ctx_r32.referenceNumber, \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0645\\u0631\\u062C\\u0639) \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"(\", ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.titleOfServiceEng, \")\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"(\", ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.titleOfServiceArb, \")\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.TranslateTaggedDataEng(ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.companyDetailsEng), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.TranslateTaggedDataArb(ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.companyDetailsArb), \" \");\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.TranslateTaggedDataEng(ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.customerDetailsEng), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.TranslateTaggedDataArb(ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.customerDetailsArb), \" \");\n    i0.ɵɵadvance(19);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.preambleEng, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.preambleArb, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractClauses.length) > 0);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.firstPartyEng, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.firstPartyArb, \" \");\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.secondPartyEng, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.contractFormData == null ? null : ctx_r32.contractFormData.contractFormHead == null ? null : ctx_r32.contractFormData.contractFormHead.secondPartyArb, \" \");\n  }\n}\n\nfunction ContractFormComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ContractFormComponent_div_10_div_1_Template, 86, 15, \"div\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r2.contractFormData == null ? null : ctx_r2.contractFormData.contractClauses.length) != 0 && ctx_r2.contractFormData != null);\n  }\n}\n\nexport let ContractFormComponent = /*#__PURE__*/(() => {\n  class ContractFormComponent extends ParentOptMgtComponent {\n    constructor(oprService, fb, http, router, apiService, dialog, authService, utilService, translate, notifyService, validationService, dialogRef) {\n      super(authService);\n      this.oprService = oprService;\n      this.fb = fb;\n      this.http = http;\n      this.router = router;\n      this.apiService = apiService;\n      this.dialog = dialog;\n      this.authService = authService;\n      this.utilService = utilService;\n      this.translate = translate;\n      this.notifyService = notifyService;\n      this.validationService = validationService;\n      this.dialogRef = dialogRef;\n      this.referenceNumber = \"000/0000\";\n      this.resourceSubCostingList = [];\n      this.resourceCostingList = [];\n      this.grandTotal = 0;\n      this.totalForResourceUnit = -1;\n      this.resourceSelectList = [];\n      this.resourceExpenceHeadSelectList = [];\n      this.resourceCode = '';\n      this.activeResourceIndex = -1;\n      this.siteCodeSelectList = [];\n      this.type = \"\"; //ForProject,ForAddingSite,ForAddingResource,ForRemoveResource\n\n      this.templatesSelectionList = [];\n      this.isArabic = false;\n      this.date = new Date();\n    }\n\n    ngOnInit() {\n      this.loadData();\n    }\n\n    loadData() {\n      this.templateData = null;\n      this.isArabic = this.utilService.isArabic();\n      this.loadCustomerData();\n      this.loadProjectData();\n      this.loadSkillSetsList();\n      this.loadOperationsExpenseHeads();\n      this.loadMaterialEquipments();\n      this.loadLogisticsVehicles();\n      this.loadContractForm();\n      this.loadProposalCostingData();\n      this.loadContractTemplates();\n    }\n\n    loadContractForm() {\n      var _a, _b; // let siteCode = this.project?.siteCode == null ? \"-NA-\" : this.project?.siteCode;\n\n\n      let Input = {\n        projectCode: this.project.projectCode,\n        siteCode: this.project.siteCode,\n        customerCode: this.project.customerCode,\n        isAdendum: (_b = (_a = this.project) === null || _a === void 0 ? void 0 : _a.isAdendum) !== null && _b !== void 0 ? _b : false\n      }; // this.apiService.getall(`ContractForm/getContractForm/${this.project.customerCode}/${this.project.projectCode}/${siteCode}`).subscribe(res => {\n\n      this.apiService.post('ContractForm/getContractForm', Input).subscribe(res => {\n        if (res != null) {\n          this.contractFormData = res;\n        }\n      });\n    }\n\n    loadContractTemplates() {\n      this.apiService.getall(`ContractFormTemplates/getSelectionContractFormTemplates/${this.type}`).subscribe(res => {\n        if (res != null) {\n          this.templatesSelectionList = res;\n        }\n      });\n    }\n\n    OnTemplateSelection(event) {\n      if (event.target.value != '') {\n        let Id = Number(event.target.value);\n        this.apiService.get('ContractFormTemplates/getContractFormTemplateById', Id).subscribe(res => {\n          if (res != null) {\n            //res.coveringLetter = res.coveringLetter.replace(/<<customer>>/gi, this.customerData.custName);\n            this.templateData = res;\n\n            for (let i = 0; i < res.clauses.length; i++) {\n              res.clauses[i].id = 0;\n            }\n\n            this.contractFormData.contractClauses = res.clauses;\n            let contractFormId = this.contractFormData.contractFormHead.id;\n            this.contractFormData.contractFormHead = res.templateHead;\n            this.contractFormData.contractFormHead.id = contractFormId;\n          }\n        });\n      } else {\n        this.templateData = null;\n      }\n    }\n\n    submit() {}\n\n    loadProjectData() {\n      this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(res => {\n        if (res != null) {\n          this.projectData = res;\n        }\n      });\n    }\n\n    loadCustomerData() {\n      this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(res => {\n        if (res != null) {\n          this.customerData = res;\n          console.log(res);\n          this.apiService.getall(`Company/getCompanyByCityCode/${res.custCityCode1}`).subscribe(res2 => {\n            if (res2 != null) {\n              this.companyData = res2;\n              console.log(res2);\n            }\n          });\n          this.getCity(res.custCityCode1);\n        }\n      });\n    }\n\n    loadInitialData() {\n      var _a;\n\n      if (!((_a = this.project) === null || _a === void 0 ? void 0 : _a.isAdendum)) {\n        this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(res => {\n          if (res != null) {\n            this.projectBudgetEstimation = res;\n            this.findTotalCosts();\n          } else {\n            this.projectBudgetEstimation.siteWisePBCListForProject = [];\n            this.projectBudgetEstimation.grandTotalCostForProject = -1;\n          }\n        });\n      } else {\n        this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(res => {\n          if (res != null) {\n            this.projectBudgetEstimation = res;\n            this.findTotalCosts();\n          } else {\n            this.projectBudgetEstimation.siteWisePBCListForProject = [];\n            this.projectBudgetEstimation.grandTotalCostForProject = -1;\n          }\n        });\n      }\n    }\n\n    loadProposalCostingData() {\n      var _a;\n\n      let Input = {\n        customerCode: this.project.customerCode,\n        siteCode: this.project.siteCode,\n        projectCode: this.project.projectCode,\n        isAdendum: (_a = this.project) === null || _a === void 0 ? void 0 : _a.isAdendum\n      }; // this.apiService.getall(`proposalCosting/getProposalCosting/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(res => {\n\n      this.apiService.post('proposalCosting/getProposalCosting', Input).subscribe(res => {\n        this.proposalCosting = res;\n\n        for (let i = 0; i < res.length; i++) {\n          this.grandTotal += res[i].price * res[i].qty;\n        }\n\n        this.getReferenceNumber();\n      });\n    }\n\n    getCity(cityCode) {\n      this.apiService.getall(`City/getStateCountrybyCityCode/${cityCode}`).subscribe(res => {\n        this.city = res;\n        console.log(res);\n      });\n    }\n\n    printComponent() {\n      let printable = \"printableArea\";\n      const printContent = document.getElementById(printable);\n      const WindowPrt = window.open('', '', 'left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0');\n      setTimeout(() => {\n        WindowPrt.document.write(printContent.innerHTML);\n        WindowPrt.document.close();\n        WindowPrt.focus();\n        WindowPrt.print();\n        WindowPrt.close();\n      }, 50);\n    }\n\n    findTotalCosts() {\n      this.projectBudgetEstimation.grandTotalCostForProject = 0;\n      this.projectBudgetEstimation.siteWisePBCListForProject.forEach(pbe => {\n        pbe.totFcForSite = 0;\n        pbe.totLcForSite = 0;\n        pbe.totMcForSite = 0;\n        pbe.totRcForSite = 0;\n        pbe.grandTotalCostForSite = 0;\n\n        if (pbe.prcListForSite.length != 0) {\n          pbe.prcListForSite.forEach(prc => {\n            prc.totResourceCost = 0;\n\n            if (prc.resourceSubCostingList.length != 0) {\n              prc.costPerUnit = prc.margin;\n              prc.resourceSubCostingList.forEach(prsc => {\n                prc.costPerUnit = prc.costPerUnit + prsc.amount;\n              });\n              prc.totResourceCost = prc.costPerUnit * prc.quantity;\n            }\n\n            pbe.totRcForSite = pbe.totRcForSite + prc.totResourceCost;\n          });\n        }\n\n        if (pbe.plcListForSite.length != 0) {\n          pbe.plcListForSite.forEach(plc => {\n            plc.totLogisticsCost = 0;\n\n            if (plc.logisticsSubCostingList.length != 0) {\n              plc.costPerUnit = plc.margin;\n              plc.logisticsSubCostingList.forEach(plsc => {\n                plc.costPerUnit = plc.costPerUnit + plsc.amount;\n              });\n              plc.totLogisticsCost = plc.costPerUnit * plc.qty;\n            }\n\n            pbe.totLcForSite = pbe.totLcForSite + plc.totLogisticsCost;\n          });\n        }\n\n        if (pbe.pmcListForSite.length != 0) {\n          pbe.pmcListForSite.forEach(pmc => {\n            pmc.totMaterialEquipmentCost = 0;\n\n            if (pmc.materialEquipmentSubCostingList.length != 0) {\n              pmc.costPerUnit = 0;\n              pmc.materialEquipmentSubCostingList.forEach(pmsc => {\n                pmc.costPerUnit = pmc.costPerUnit + pmsc.amount;\n              });\n              pmc.totMaterialEquipmentCost = pmc.costPerUnit * pmc.quantity;\n            }\n\n            pbe.totMcForSite = pbe.totMcForSite + pmc.totMaterialEquipmentCost;\n          });\n        }\n\n        if (pbe.pfcListForSite.length != 0) {\n          pbe.pfcListForSite.forEach(pfc => {\n            pbe.totFcForSite = pbe.totFcForSite + pfc.costPerUnit;\n          });\n        }\n\n        pbe.grandTotalCostForSite = pbe.grandTotalCostForSite + pbe.totFcForSite + pbe.totLcForSite + pbe.totMcForSite + pbe.totRcForSite;\n        this.projectBudgetEstimation.grandTotalCostForProject = this.projectBudgetEstimation.grandTotalCostForProject + pbe.grandTotalCostForSite;\n      });\n    }\n\n    openDialogManage3(contractFormHeaderId, dbops, modalTitle, modalBtnTitle, component) {\n      let dialogRef = this.oprService.fullWindow(this.dialog, component);\n      dialogRef.componentInstance.dbops = dbops;\n      dialogRef.componentInstance.modalTitle = modalTitle;\n      dialogRef.componentInstance.modalBtnTitle = modalBtnTitle;\n      dialogRef.componentInstance.id = contractFormHeaderId;\n      dialogRef.componentInstance.project = this.project;\n      dialogRef.componentInstance.contractFormData = this.contractFormData;\n      dialogRef.afterClosed().subscribe(res => {\n        if (res && res === true) this.loadData();\n      });\n    }\n\n    openDialogManage2(inpuData, dbops, modalTitle, modalBtnTitle) {\n      let dialogRef = this.utilService.openCrudDialog(this.dialog, CreateUpdateProposalCostingsComponent);\n      dialogRef.componentInstance.dbops = dbops;\n      dialogRef.componentInstance.modalTitle = modalTitle;\n      dialogRef.componentInstance.modalBtnTitle = modalBtnTitle;\n      dialogRef.componentInstance.inputData = inpuData;\n      dialogRef.afterClosed().subscribe(res => {\n        if (res && res === true) this.loadData();\n      });\n    }\n\n    loadSkillSetsList() {\n      this.apiService.getall('Skillset/getAllSkillsetList').subscribe(res => {\n        this.skillsetList = res;\n      });\n    }\n\n    getSkillset(code) {\n      let ss = this.skillsetList.find(e => e.skillSetCode == code);\n      return ss;\n    }\n\n    loadOperationsExpenseHeads() {\n      this.apiService.getall('OperationExpenseHead/getSelectOperationExpenseHeadList').subscribe(res => {\n        this.opeartionsExpenseHeadsList = res;\n      });\n    }\n\n    getopeartionsExpenseHead(code) {\n      let eh = this.opeartionsExpenseHeadsList.find(e => e.value == code);\n      return eh;\n    }\n\n    loadMaterialEquipments() {\n      this.apiService.getall('Materialequipment/getSelectMaterialequipmentList').subscribe(res => {\n        this.materialEquipmentList = res;\n      });\n    }\n\n    getMaterialEquipments(code) {\n      let me = this.materialEquipmentList.find(e => e.value == code);\n      return me;\n    }\n\n    loadLogisticsVehicles() {\n      this.apiService.getall('Logisticsandvehicle/getSelectLogisticsandvehicleList').subscribe(res => {\n        this.logisticsVehicleList = res;\n      });\n    }\n\n    getLogisticsVehicle(code) {\n      let me = this.logisticsVehicleList.find(e => e.value == code);\n      return me;\n    }\n\n    printInvoice() {\n      this.openPrint();\n    }\n\n    openPrint() {\n      const printContent = document.getElementById(\"printcontainer\");\n      const WindowPrt = window.open('', '', 'left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0');\n      setTimeout(() => {\n        WindowPrt.document.write(printContent.innerHTML);\n        WindowPrt.document.close();\n        WindowPrt.focus();\n        WindowPrt.print();\n        WindowPrt.close();\n      }, 50);\n    }\n\n    closeModel() {\n      this.dialogRef.close(true);\n    }\n\n    createContractTemplate() {\n      let dialogRef = this.utilService.openCrudDialog(this.dialog, CreateUpdateContractFormTemplateComponent);\n      dialogRef.componentInstance.modalTitle = \"Create Template\";\n      dialogRef.componentInstance.modalBtnTitle = \"Add\";\n      dialogRef.componentInstance.contractTemplateData = this.contractFormData;\n      dialogRef.componentInstance.id = 0;\n      dialogRef.componentInstance.type = this.type;\n      dialogRef.afterClosed().subscribe(res => {\n        if (res && res === true) this.loadData();\n      });\n    }\n\n    editContractTemplate() {\n      let dialogRef = this.utilService.openCrudDialog(this.dialog, CreateUpdateContractFormTemplateComponent);\n      dialogRef.componentInstance.modalTitle = \"Update Template\";\n      dialogRef.componentInstance.modalBtnTitle = \"Update\";\n      dialogRef.componentInstance.contractTemplateData = this.templateData;\n      dialogRef.componentInstance.id = this.templateData.templateId;\n      dialogRef.componentInstance.type = this.type;\n      dialogRef.afterClosed().subscribe(res => {\n        if (res && res === true) this.loadData();\n      });\n    }\n\n    editProposalCosting() {\n      let inpuData = {\n        projectCode: this.project.projectCode,\n        customerCode: this.project.customerCode,\n        siteCode: this.project.siteCode == null ? \"\" : this.project.siteCode,\n        proposalCosting: this.proposalCosting\n      };\n      this.openDialogManage2(inpuData, DBOperation.create, 'Edit_Proposal_Costing', 'Edit');\n    }\n\n    getReferenceNumber() {\n      var _a, _b, _c;\n\n      if (((_a = this.proposalCosting) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n        this.referenceNumber = this.project.projectCode + \"/\" + (((_b = this.project) === null || _b === void 0 ? void 0 : _b.isAdendum) ? this.project.siteCode + \"/\" : \"\") + ((_c = this.proposalCosting[0]) === null || _c === void 0 ? void 0 : _c.projectBudgetEstimationId.toString());\n\n        if (this.proposalCosting[0].id == 0) {\n          this.editProposalCosting();\n        }\n      }\n    }\n\n    openConfirmationDialog(dbops, modalTitle, Component, operation) {\n      let dialogRef = this.oprService.confirmationDialog(this.dialog, Component);\n      dialogRef.componentInstance.dbops = dbops;\n      dialogRef.componentInstance.modalTitle = modalTitle;\n      dialogRef.afterClosed().subscribe(res => {\n        var _a, _b;\n\n        this.contractFormData.contractFormHead.projectCode = this.project.projectCode;\n        this.contractFormData.contractFormHead.customerCode = this.project.customerCode;\n        this.contractFormData.contractFormHead.siteCode = ((_a = this.project) === null || _a === void 0 ? void 0 : _a.isAdendum) ? this.project.siteCode : null;\n        this.contractFormData.contractFormHead.isAdendum = (_b = this.project) === null || _b === void 0 ? void 0 : _b.isAdendum;\n\n        if (res && res == true || res.res) {\n          if (operation == \"SaveContractForm\") {\n            this.apiService.post('contractForm', this.contractFormData).subscribe(res2 => {\n              if (res2) {\n                this.utilService.OkMessage();\n                this.loadData(); //   this.dialogRef.close(true);\n              }\n            }, error => {\n              console.error(error);\n              this.utilService.ShowApiErrorMessage(error);\n            });\n          } else if (operation == \"ApproveContractForm\") {\n            let input = {\n              projectCode: this.project.projectCode,\n              siteCode: this.project.isAdendum ? this.project.siteCode : null,\n              customerCode: this.project.customerCode,\n              contractFormHeadId: this.contractFormData.contractFormHead.id\n            };\n            this.apiService.post('projectContracts/approveContractForm', input).subscribe(res2 => {\n              this.utilService.OkMessage();\n              this.loadData();\n            }, error => {\n              console.error(error);\n              this.utilService.ShowApiErrorMessage(error);\n            });\n          }\n        }\n      });\n    }\n\n    saveContractForm() {\n      if (this.contractFormData != null) {\n        this.openConfirmationDialog(DBOperation.create, 'Are_You_Sure?', ConfirmDialogWindowComponent, \"SaveContractForm\");\n      } else {\n        this.notifyService.showError(this.translate.instant(\"No Contract Data Found\"));\n      }\n    }\n\n    editContractForm() {\n      if (this.contractFormData != null) {\n        this.openDialogManage3(this.contractFormData.contractFormHead.id, DBOperation.create, 'Update_Contract_Form', \"Update\", CreateUpdateContractFormComponent);\n      } else {\n        this.notifyService.showError(this.translate.instant(\"No Contract Data Found\"));\n      }\n    }\n\n    approveContract() {\n      if (this.contractFormData != null) {\n        this.openConfirmationDialog(DBOperation.create, 'Are_You_Sure?', ConfirmDialogWindowComponent, \"ApproveContractForm\");\n      } else {\n        this.notifyService.showError(this.translate.instant(\"No Contract Data Found\"));\n      }\n    }\n\n    TranslateTaggedDataEng(str) {\n      var _a, _b, _c, _d, _e, _f, _g, _h;\n\n      let customerData = \"Second: \" + ((_a = this.customerData) === null || _a === void 0 ? void 0 : _a.custName) + \" \" + \"Commercial Register \" + this.referenceNumber + \",\" + \" Whose address -\" + this.customerData.custAddress1 + \",\" + ((_b = this.city) === null || _b === void 0 ? void 0 : _b.cityName) + \",\" + \" Kingdom of Saudi Arabia, Phone: \" + ((_c = this.customerData) === null || _c === void 0 ? void 0 : _c.custPhone1) + \", email:\" + this.customerData.custEmail1 + \" represented in signing this contract by \" + ((_d = this.customerData) === null || _d === void 0 ? void 0 : _d.custSalesRep) + \".\";\n      let res1 = str.replace(/<<customer>>/gi, customerData);\n      let CompanyData = \"Thanks God alone and then: On \" + this.referenceNumber + \" - Corresponding to \" + this.translate.instant(this.date.toLocaleDateString()) + \" A.D. Agreement in city of \" + ((_e = this.city) === null || _e === void 0 ? void 0 : _e.cityName) + \" between both: First: \" + ((_f = this.companyData) === null || _f === void 0 ? void 0 : _f.companyName) + \", address: \" + ((_g = this.companyData) === null || _g === void 0 ? void 0 : _g.companyAddress) + \", Kingdom of Saudi Arabia, Phone: \" + ((_h = this.companyData) === null || _h === void 0 ? void 0 : _h.phone) + \"  represented in signing this contract by Mohammed Abdullah Al Mansaky as being COO STS Group.\";\n      let res2 = res1.replace(/<<company>>/gi, CompanyData);\n      return res2;\n    }\n\n    TranslateTaggedDataArb(str) {\n      var _a, _b, _c, _d, _e, _f, _g;\n\n      let customerData = \"ثانيا: - شركة \" + this.customerData.custArbName + \" \" + \"سجل تجاري \" + this.referenceNumber + \",\" + \"عنوانها\" + this.customerData.custAddress1 + \",\" + ((_a = this.city) === null || _a === void 0 ? void 0 : _a.cityNameAr) + \",\" + \" المملكة العربية السعودية ، الهاتف  \" + ((_b = this.customerData) === null || _b === void 0 ? void 0 : _b.custPhone1) + \", ايميل\" + this.customerData.custEmail1 + \" ويمثلها في التوقيع على هذا العقد الأستاذ \" + ((_c = this.customerData) === null || _c === void 0 ? void 0 : _c.custSalesRep) + \".\";\n      let res1 = str.replace(/<<customer>>/gi, customerData);\n      let CompanyData = \"اهـ الموافق لحمد لله وحده وبعد: - في يوم\" + this.referenceNumber + \"م تم الاتفاق\" + this.translate.instant(this.date.toLocaleDateString()) + \" A.D. اتفاقية في مدينة \" + ((_d = this.city) === null || _d === void 0 ? void 0 : _d.cityName) + \"بين الاثنين: أولا:\" + ((_e = this.companyData) === null || _e === void 0 ? void 0 : _e.companyName) + \", عنوان: \" + ((_f = this.companyData) === null || _f === void 0 ? void 0 : _f.companyAddress) + \", المملكة العربية السعودية، هاتف: \" + ((_g = this.companyData) === null || _g === void 0 ? void 0 : _g.phone) + \"  ممثلة في توقيع هذا العقد من قبل Mohammed Abdullah Al Mansaky كما يجري  COO STS Group.\";\n      let res2 = res1.replace(/<<company>>/gi, CompanyData);\n      return res2;\n    }\n\n  }\n\n  ContractFormComponent.ɵfac = function ContractFormComponent_Factory(t) {\n    return new (t || ContractFormComponent)(i0.ɵɵdirectiveInject(i1.OprServicesService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.ApiService), i0.ɵɵdirectiveInject(i6.MatDialog), i0.ɵɵdirectiveInject(i7.AuthorizeService), i0.ɵɵdirectiveInject(i8.UtilityService), i0.ɵɵdirectiveInject(i9.TranslateService), i0.ɵɵdirectiveInject(i10.NotificationService), i0.ɵɵdirectiveInject(i11.ValidationService), i0.ɵɵdirectiveInject(i6.MatDialogRef));\n  };\n\n  ContractFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ContractFormComponent,\n    selectors: [[\"app-contract-form\"]],\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 11,\n    vars: 3,\n    consts: [[4, \"ngIf\"], [3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"aria-hidden\", \"true\", 1, \"\", 3, \"click\"], [1, \"custom-select\", \"mr-sm-2\", 3, \"change\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [3, \"click\"], [\"class\", \"container-fluid invoice-container print-container\", \"style\", \" width:850px; padding-top:5px;\", \"id\", \"printcontainer\", 4, \"ngIf\"], [\"id\", \"printcontainer\", 1, \"container-fluid\", \"invoice-container\", \"print-container\", 2, \"width\", \"850px\", \"padding-top\", \"5px\"], [\"id\", \"ProposalPage1\", 2, \"page-break-after\", \"always\"], [\"border\", \"0\", \"cellpadding\", \"0\", \"cellspacing\", \"0\", 2, \"width\", \"100%\"], [2, \"width\", \"50%\", \"font-style\", \"italic\", \"font-size\", \"0.775rem !important\", \"color\", \"#000000\", \"font-family\", \"'Poppins', sans-serif\", \"font-weight\", \"500\"], [2, \"width\", \"50%\", \"font-style\", \"italic\", \"text-align\", \"right\", \"font-size\", \"0.775rem !important\", \"color\", \"#000000\", \"font-family\", \"'Poppins', sans-serif\", \"font-weight\", \"500\"], [2, \"width\", \"50%\", \"text-align\", \"center\", \"padding\", \"10px\"], [2, \"width\", \"50%\", \"text-align\", \"justify\", \"padding\", \"10px\", \"vertical-align\", \"top\"], [2, \"width\", \"50%\", \"text-align\", \"left\", \"padding\", \"10px\"], [2, \"width\", \"50%\", \"text-align\", \"right\", \"padding\", \"10px\"], [2, \"width\", \"50%\", \"text-align\", \"left\", \"padding\", \"10px\", \"white-space\", \"pre-wrap\", \"vertical-align\", \"top\"], [2, \"width\", \"50%\", \"text-align\", \"right\", \"padding\", \"10px\", \"white-space\", \"pre-wrap\", \"vertical-align\", \"top\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"2\"], [2, \"border\", \"1px solid #878787\", \"padding\", \"5px\", \"text-align\", \"center\", \"font-size\", \"0.875rem !important\", \"color\", \"#000000\", \"font-family\", \"'Poppins', sans-serif\", \"font-weight\", \"600\"], [\"colspan\", \"3\", 2, \"border\", \"1px solid #878787\", \"padding\", \"5px\", \"text-align\", \"right\", \"font-size\", \"0.875rem !important\", \"color\", \"#000000\", \"font-family\", \"'Poppins', sans-serif\", \"font-weight\", \"600\"], [2, \"border\", \"1px solid #878787\", \"padding\", \"5px\", \"text-align\", \"right\", \"font-size\", \"0.775rem !important\", \"color\", \"#000000\", \"font-family\", \"'Poppins', sans-serif\", \"font-weight\", \"500\"], [2, \"border\", \"1px solid #878787\", \"padding\", \"5px\", \"text-align\", \"center\", \"font-size\", \"0.775rem !important\", \"color\", \"#000000\", \"font-family\", \"'Poppins', sans-serif\", \"font-weight\", \"500\"], [2, \"border\", \"1px solid #878787\", \"padding\", \"5px\", \"text-align\", \"left\", \"font-size\", \"0.775rem !important\", \"color\", \"#000000\", \"font-family\", \"'Poppins', sans-serif\", \"font-weight\", \"500\"], [2, \"width\", \"50%\", \"text-align\", \"center\", \"padding\", \"10px\", \"vertical-align\", \"top\"], [2, \"width\", \"50%\", \"text-align\", \"left\", \"padding\", \"10px\", \"vertical-align\", \"top\"], [2, \"width\", \"50%\", \"text-align\", \"right\", \"padding\", \"10px\", \"vertical-align\", \"top\"], [2, \"width\", \"50%\", \"text-align\", \"justify\", \"padding\", \"10px\", \"white-space\", \"pre-wrap\", \"vertical-align\", \"top\"]],\n    template: function ContractFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\");\n        i0.ɵɵtemplate(1, ContractFormComponent_span_1_Template, 10, 7, \"span\", 0);\n        i0.ɵɵelementStart(2, \"span\");\n        i0.ɵɵtemplate(3, ContractFormComponent_button_3_Template, 3, 3, \"button\", 1);\n        i0.ɵɵtext(4, \"\\u00A0 \");\n        i0.ɵɵelementStart(5, \"button\", 2);\n        i0.ɵɵlistener(\"click\", function ContractFormComponent_Template_button_click_5_listener() {\n          return ctx.closeModel();\n        });\n        i0.ɵɵtext(6, \" Close\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"br\");\n        i0.ɵɵelement(8, \"br\");\n        i0.ɵɵelement(9, \"br\");\n        i0.ɵɵtemplate(10, ContractFormComponent_div_10_Template, 2, 1, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !(ctx.contractFormData == null ? null : ctx.contractFormData.contractFormHead == null ? null : ctx.contractFormData.contractFormHead.isApproved));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", (ctx.contractFormData == null ? null : ctx.contractFormData.contractFormHead == null ? null : ctx.contractFormData.contractFormHead.id) > 0 || ctx.templateData != null);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", (ctx.contractFormData == null ? null : ctx.contractFormData.contractFormHead == null ? null : ctx.contractFormData.contractFormHead.id) > 0 || ctx.templateData != null);\n      }\n    },\n    directives: [i12.NgIf, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i12.NgForOf],\n    pipes: [i9.TranslatePipe, i12.DecimalPipe],\n    encapsulation: 2\n  });\n  return ContractFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}