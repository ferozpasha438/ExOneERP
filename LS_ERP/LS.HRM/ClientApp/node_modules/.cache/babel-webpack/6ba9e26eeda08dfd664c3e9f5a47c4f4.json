{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { debounceTime, distinctUntilChanged, map, startWith, switchMap } from 'rxjs/operators';\nimport { ParentOptMgtComponent } from '../../../sharedcomponent/parentoptmgt.component';\nimport { delay } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../services/api.service\";\nimport * as i5 from \"../../../api-authorization/AuthorizeService\";\nimport * as i6 from \"../../../services/utility.service\";\nimport * as i7 from \"@ngx-translate/core\";\nimport * as i8 from \"../../../services/notification.service\";\nimport * as i9 from \"../../../sharedcomponent/ValidationService\";\nimport * as i10 from \"@angular/material/dialog\";\nimport * as i11 from \"@angular/common\";\nimport * as i12 from \"../../../sharedcomponent/ValidationMessagesComponent\";\nimport * as i13 from \"../../../sharedcomponent/autoloader.component\";\nimport * as i14 from \"@angular/material/autocomplete\";\nimport * as i15 from \"@angular/material/core\";\n\nfunction MappingEmpToResourceForProjectSiteComponent_div_39_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const site_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"value\", site_r4.siteCode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", site_r4.siteCode, \"(\", !ctx_r3.isArab ? site_r4.siteName : site_r4.siteArbName, \")\");\n  }\n}\n\nfunction MappingEmpToResourceForProjectSiteComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelementStart(1, \"div\", 11);\n    i0.ɵɵelementStart(2, \"div\", 12);\n    i0.ɵɵelementStart(3, \"label\", 23);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"select\", 24);\n    i0.ɵɵlistener(\"change\", function MappingEmpToResourceForProjectSiteComponent_div_39_Template_select_change_6_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onSelectSiteCode($event);\n    });\n    i0.ɵɵelementStart(7, \"option\", 25);\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"translate\");\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, MappingEmpToResourceForProjectSiteComponent_div_39_option_11_Template, 2, 3, \"option\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"validation-message\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 5, \"Site_Code\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(9, 7, \"Select\"), \" \", i0.ɵɵpipeBind1(10, 9, \"Site_Code\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.siteCodeList);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"control\", ctx_r0.form.controls.siteCode);\n  }\n}\n\nfunction MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ft_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ft_r8.employeeNumber, \"\");\n  }\n}\n\nfunction MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_mat_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r15 = ctx.$implicit;\n    const ctx_r14 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"value\", option_r15);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", option_r15.text, \"-\", !ctx_r14.isArab ? option_r15.textTwo : option_r15.textAr, \" \");\n  }\n}\n\nfunction MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 36);\n    i0.ɵɵelement(1, \"auto-loader\", 37);\n    i0.ɵɵelement(2, \"input\", 38);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementStart(5, \"mat-autocomplete\", 39, 40);\n    i0.ɵɵlistener(\"optionSelected\", function MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_Template_mat_autocomplete_optionSelected_5_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext(3);\n      return ctx_r16.autoSelectionEmployeeNumber($event);\n    });\n    i0.ɵɵtemplate(7, MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_mat_option_7_Template, 2, 3, \"mat-option\", 26);\n    i0.ɵɵpipe(8, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"validation-message\", 27);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r13 = i0.ɵɵreference(6);\n\n    const ctx_r11 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"isLoading\", ctx_r11.isDataLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate2(\"placeholder\", \"\", i0.ɵɵpipeBind1(3, 7, \"Enter\"), \" \", i0.ɵɵpipeBind1(4, 9, \"Employee\"), \"\");\n    i0.ɵɵproperty(\"formControl\", ctx_r11.empCodeControl)(\"matAutocomplete\", _r13);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(8, 11, ctx_r11.filteredEmployeeNumbers));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r11.empCodeControl);\n  }\n}\n\nfunction MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_7_Template, 2, 1, \"td\", 33);\n    i0.ɵɵtemplate(8, MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_Template, 10, 13, \"td\", 34);\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵelementStart(12, \"i\", 35);\n    i0.ɵɵlistener(\"click\", function MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_Template_i_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const f_r9 = restoredCtx.index;\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return ctx_r18.editMap(f_r9);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ft_r8 = ctx.$implicit;\n    const f_r9 = ctx.index;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", f_r9 + 1, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ft_r8.skillSet, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", !ctx_r7.isArab ? ft_r8.skillSetNameEng : ft_r8.skillSetNameArb, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.editRow != f_r9);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.editRow == f_r9);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", !ctx_r7.isArab ? ft_r8.empName : ft_r8.empNameAr, \"\");\n  }\n}\n\nfunction MappingEmpToResourceForProjectSiteComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵelementStart(1, \"table\", 30);\n    i0.ɵɵelementStart(2, \"tr\");\n    i0.ɵɵelementStart(3, \"th\", 31);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"translate\");\n    i0.ɵɵpipe(12, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"translate\");\n    i0.ɵɵpipe(19, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"th\");\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(23, MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_Template, 13, 6, \"tr\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 9, \"S.No\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(8, 11, \"SkillSet\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(11, 13, \"SkillSet\"), \" \", i0.ɵɵpipeBind1(12, 15, \"Name\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(15, 17, \"Employee_Code\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(18, 19, \"Employee\"), \" \", i0.ɵɵpipeBind1(19, 21, \"Name\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(22, 23, \"Edit\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.empToResMapData);\n  }\n}\n\nfunction MappingEmpToResourceForProjectSiteComponent_input_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 41);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n\n  if (rf & 2) {\n    i0.ɵɵpropertyInterpolate(\"value\", i0.ɵɵpipeBind1(1, 1, \"Save\"));\n  }\n}\n\nexport class MappingEmpToResourceForProjectSiteComponent extends ParentOptMgtComponent {\n  constructor(fb, http, router, apiService, authService, utilService, translate, notifyService, validationService, dialogRef) {\n    super(authService);\n    this.fb = fb;\n    this.http = http;\n    this.router = router;\n    this.apiService = apiService;\n    this.authService = authService;\n    this.utilService = utilService;\n    this.translate = translate;\n    this.notifyService = notifyService;\n    this.validationService = validationService;\n    this.dialogRef = dialogRef;\n    this.skillsetData = [];\n    this.empToResMapData = [];\n    this.skillsetsListForSite = [];\n    this.monthsDataList = [];\n    this.shiftsForSite = [];\n    this.siteCodeList = [];\n    this.editRow = -1;\n    this.empCodeControl = new FormControl('');\n    this.employeeList = [];\n    this.employeesForProjectSite = [];\n    this.employeeNumber = '';\n    this.isDataLoading = false;\n    this.isArab = false;\n    this.filteredEmployeeNumbers = this.empCodeControl.valueChanges.pipe( // startWith(this.employeeNumber),\n    startWith(''), debounceTime(utilService.autoDelay()), distinctUntilChanged(), switchMap(val => {\n      if (val.trim() !== '') this.isDataLoading = true;\n      return this.filterEmployeeNumbers(val || '');\n    }));\n  }\n\n  ngOnInit() {\n    this.isArab = this.utilService.isArabic();\n    this.setForm();\n    var count = 0;\n    this.interval = setInterval(() => {\n      count++;\n\n      if (count == 1) {\n        this.calculateDates();\n      } else if (count == 2) {\n        this.loadEmployees();\n      } else if (count == 3) {\n        this.getSitesList();\n      } else if (count == 4) {\n        this.getSkillsetsForSite(this.project.siteCode);\n      }\n    }, count > 4 ? 0 : 1000);\n  }\n\n  closeModel() {\n    this.dialogRef.close();\n  }\n\n  setForm() {\n    var _a, _b;\n\n    this.form = this.fb.group({\n      'projectCode': [this.project.projectCode],\n      'customerCode': [this.project.customerCode],\n      'siteCode': [((_a = this.project) === null || _a === void 0 ? void 0 : _a.siteCode) != null ? this.project.siteCode : '', Validators.required],\n      'startDate': [this.project.startDate.toString().substring(0, 10)],\n      'endDate': [this.project.endDate.toString().substring(0, 10)],\n      'noOfDays': [this.noOfDays] // 'empNumber': [''],\n\n    });\n\n    if (((_b = this.project) === null || _b === void 0 ? void 0 : _b.siteCode) != null) {\n      this.form.controls['siteCode'].disable({\n        onlySelf: true\n      });\n      this.loadEmployeesForProjectSite(this.project.siteCode);\n      this.getSkillsetsForSite(this.project.siteCode);\n      this.loadEmpToResourceMap(this.project.siteCode);\n    }\n  }\n\n  getSitesList() {\n    this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(res => {\n      this.siteCodeList = res;\n    });\n  }\n\n  loadEmployees() {\n    this.apiService.getall('Employee/getSelectEmployeeList').subscribe(result => {\n      this.employeeList = result;\n    }, error => this.utilService.ShowApiErrorMessage(error));\n  }\n\n  loadEmployeesForProjectSite(siteCode) {\n    this.apiService.getall(`EmployeesToProjectSite/getEmployeesOfProjectSite/${this.project.projectCode}/${siteCode}`).subscribe(result => {\n      this.employeesForProjectSite = result;\n      if (this.employeesForProjectSite.length == 0) this.notifyService.showError(this.translate.instant(\"Employees_Not_Assigned_To_Site\"));else this.loadEmpToResourceMap(siteCode);\n    }, error => this.utilService.ShowApiErrorMessage(error));\n  }\n\n  calculateDates() {\n    this.monthsDataList = [];\n    let startDate = new Date(this.project.startDate);\n    let endDate = new Date(this.project.endDate);\n    this.noOfDays = (endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24) + 1;\n\n    for (let y = startDate.getFullYear(); y <= endDate.getFullYear(); y++) {\n      let sm = y == startDate.getFullYear() ? startDate.getMonth() : 1;\n      let em = y == endDate.getFullYear() ? endDate.getMonth() : 12;\n\n      for (let m = sm; m <= em; m++) {\n        let sd = m == sm && y == startDate.getFullYear() ? startDate.getDate() : 1;\n        let ed = m == em && y == endDate.getFullYear() ? endDate.getDate() : new Date(y, m + 1, 0).getDate();\n        let noOfDays = (new Date(y, m, ed).getTime() - new Date(y, m, sd).getTime()) / (1000 * 60 * 60 * 24) + 1;\n        let monthData = {\n          sd: sd,\n          ed: ed,\n          mStartDate: new Date(y, m, sd).toDateString(),\n          mEndDate: new Date(y, m, ed).toDateString(),\n          mNoOfDays: noOfDays\n        };\n        this.monthsDataList.push(monthData);\n      }\n    }\n  }\n\n  loadskillsetData() {\n    this.skillsetData = [];\n    this.empToResMapData = [];\n\n    for (let ss = 0; ss < this.skillsetsListForSite.length; ss++) {\n      let row = {\n        skillSet: this.skillsetsListForSite[ss].skillSetCode,\n        skillSetNameEng: this.skillsetsListForSite[ss].nameInEnglish,\n        skillSetNameArb: this.skillsetsListForSite[ss].nameInArabic,\n        quantity: this.skillsetsListForSite[ss].quantity\n      };\n      this.skillsetData.push(row);\n    }\n  }\n\n  loadEmpToResourceMap(siteCode) {\n    this.isDataLoading = true;\n    this.apiService.getall(`EmployeesToResorceMap/getEmployeesToResourcesMapForProjectSite/${this.project.projectCode}/${siteCode}`).subscribe(res => {\n      var _a, _b, _c, _d, _e, _f, _g;\n\n      this.empToResMapData = res;\n      console.log(res);\n      this.isDataLoading = false;\n      console.log(this.skillsetsListForSite);\n\n      for (var i = 0; i < this.empToResMapData.length; i++) {\n        let map = this.empToResMapData[i]; //map.empNumber = this.employeeList.find((y: any) => y.textTwo == map.employeeID).value;\n\n        map.empNumber = (_a = this.employeeList.find(y => (y === null || y === void 0 ? void 0 : y.value) == (map === null || map === void 0 ? void 0 : map.employeeNumber))) === null || _a === void 0 ? void 0 : _a.value;\n        map.empName = (_b = this.employeeList.find(y => (y === null || y === void 0 ? void 0 : y.value) == (map === null || map === void 0 ? void 0 : map.employeeNumber))) === null || _b === void 0 ? void 0 : _b.text;\n        map.empNameAr = (_c = this.employeeList.find(y => (y === null || y === void 0 ? void 0 : y.value) == (map === null || map === void 0 ? void 0 : map.employeeNumber))) === null || _c === void 0 ? void 0 : _c.textAr;\n        map.skillSetNameEng = (_d = this.skillsetsListForSite.find(x => x.skillSetCode == (map === null || map === void 0 ? void 0 : map.skillSet))) === null || _d === void 0 ? void 0 : _d.nameInEnglish;\n        map.skillSetNameArb = (_e = this.skillsetsListForSite.find(x => x.skillSetCode == (map === null || map === void 0 ? void 0 : map.skillSet))) === null || _e === void 0 ? void 0 : _e.nameInArabic;\n      }\n\n      if (this.empToResMapData.length == 0) {\n        for (let ss = 0; ss < this.skillsetsListForSite.length; ss++) {\n          for (let i = 1; i <= this.skillsetsListForSite[ss].quantity; i++) {\n            let row = {\n              projectCode: this.project.projectCode,\n              siteCode: this.form.controls['siteCode'].value,\n              skillSet: this.skillsetsListForSite[ss].skillSetCode,\n              skillSetNameEng: (_f = this.skillsetsListForSite[ss]) === null || _f === void 0 ? void 0 : _f.nameInEnglish,\n              skillSetNameArb: (_g = this.skillsetsListForSite[ss]) === null || _g === void 0 ? void 0 : _g.nameInArabic,\n              employeeNumber: \"\",\n              employeeID: 0,\n              mapId: 0\n            };\n            this.empToResMapData.push(row);\n          }\n        }\n      }\n    }, error => {\n      this.isDataLoading = false;\n    });\n  }\n\n  getJvalue(i) {\n    return i % this.skillsetsListForSite.length;\n  }\n\n  getSkillsetsForSite(siteCode) {\n    this.isDataLoading = true;\n    if (siteCode != '') this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${siteCode}`).subscribe(res => {\n      this.skillsetsListForSite = res; //this.getShiftsForSite(siteCode);\n\n      this.loadEmployeesForProjectSite(siteCode);\n      this.isDataLoading = false;\n    }, error => {\n      this.isDataLoading = false;\n    });else {\n      this.isDataLoading = false;\n      this.shiftsForSite = [];\n      this.skillsetsListForSite = []; //this.loadskillsetData();\n      //this.loadEmpToResourceMap();\n    }\n  }\n\n  getShiftsForSite(siteCode) {\n    this.isDataLoading = true;\n    this.apiService.getall(`ShiftMaster/getShiftsToSiteBySiteCode/${siteCode}`).subscribe(res => {\n      this.shiftsForSite = res;\n      this.isDataLoading = false; //this.loadskillsetData();\n      //  this.loadEmpToResourceMap();\n    });\n  }\n\n  onSelectSiteCode(event) {\n    this.loadEmployeesForProjectSite(event.target.value);\n    delay(1000);\n    this.getSkillsetsForSite(event.target.value); // this.loadEmpToResourceMap(event.target.value);\n  }\n\n  filterEmployeeNumbers(val) {\n    return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.project.projectCode}/${this.form.controls['siteCode'].value}/?search=${val}`).pipe(map(response => {\n      const res = response;\n      this.isDataLoading = false;\n      return res;\n    }));\n  }\n\n  editMap(row) {\n    if (this.editRow == -1) {\n      this.editRow = row;\n      this.empCodeControl.setValue(this.empToResMapData[this.editRow].employeeNumber);\n    } else this.editRow = -1; //this.employeeNumber = this.empToResMapData[this.editRow].employeeNumber;\n\n  }\n\n  autoSelectionEmployeeNumber(event) {\n    //if (this.empToResMapData.findIndex(e => e.employeeID == event.option.value.value) < 0) {\n    if (this.empToResMapData.findIndex(e => e.employeeNumber == event.option.value.text) < 0) {\n      this.empToResMapData[this.editRow].employeeID = event.option.value.value;\n      this.empToResMapData[this.editRow].employeeNumber = event.option.value.text;\n      this.empToResMapData[this.editRow].empName = event.option.value.textTwo;\n      this.empToResMapData[this.editRow].empNameAr = event.option.value.textAr;\n    }\n\n    this.editRow = -1;\n  }\n\n  submit() {\n    if (this.empToResMapData.length != 0 && !this.isDataLoading) {\n      //let postDataList: Array<any> = [];\n      //this.empToResMapData.forEach((e: any) => {\n      //  let item: any = {\n      //    mapId: e.mapId,\n      //    projectCode: e.projectCode,\n      //    siteCode: e.siteCode,\n      //    skillSet: e.skillSet,\n      //    employeeID: Number(e.employeeID),\n      //    employeeNumber: e.empNumber\n      //  }\n      //  postDataList.push(item);\n      //});\n      this.isDataLoading = true;\n      this.apiService.post('EmployeesToResorceMap/mapEmployeesToResources', this.empToResMapData).subscribe(res => {\n        this.utilService.OkMessage();\n        this.isDataLoading = false;\n        this.dialogRef.close(true);\n      }, error => {\n        console.log(error);\n        console.error(error);\n        this.utilService.ShowApiErrorMessage(error);\n        this.isDataLoading = false;\n      });\n    } else if (this.isDataLoading) {\n      this.notifyService.showInfo(\"Please Wait...\");\n    } else {\n      this.notifyService.showWarning(\"No_mapping_Data_Founds\");\n    }\n  }\n\n  canSave() {\n    return this.empToResMapData.findIndex(e => e.employeeNumber == \"\") < 0;\n  }\n\n}\n\nMappingEmpToResourceForProjectSiteComponent.ɵfac = function MappingEmpToResourceForProjectSiteComponent_Factory(t) {\n  return new (t || MappingEmpToResourceForProjectSiteComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ApiService), i0.ɵɵdirectiveInject(i5.AuthorizeService), i0.ɵɵdirectiveInject(i6.UtilityService), i0.ɵɵdirectiveInject(i7.TranslateService), i0.ɵɵdirectiveInject(i8.NotificationService), i0.ɵɵdirectiveInject(i9.ValidationService), i0.ɵɵdirectiveInject(i10.MatDialogRef));\n};\n\nMappingEmpToResourceForProjectSiteComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MappingEmpToResourceForProjectSiteComponent,\n  selectors: [[\"app-mapping-emp-to-resource-for-project-site\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 48,\n  vars: 22,\n  consts: [[\"novalidate\", \"\", 1, \"mt-4\", 3, \"formGroup\", \"ngSubmit\"], [1, \"modal-body\"], [1, \"modal-title\"], [\"type\", \"button\", \"aria-hidden\", \"true\", 1, \"close\", 3, \"click\"], [1, \"outer\"], [1, \"row\", \"rowm0\"], [1, \"col-md-12\", \"col-lg-12\"], [\"hidden\", \"\", 1, \"row\"], [1, \"row\", \"mt-3\"], [1, \"p-3\", 2, \"border\", \"1px solid #f4f4f4\"], [1, \"row\", \"mt-2\"], [1, \"col-md-3\", \"col-lg-3\"], [1, \"form-group\"], [\"type\", \"text\", \"formControlName\", \"customerCode\", \"readonly\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"projectCode\", \"readonly\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"startDate\", \"readonly\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"endDate\", \"readonly\", \"\", 1, \"form-control\"], [\"class\", \"row  mt-2\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"modal-footer\"], [1, \"col-md-12\", \"col-lg-12\", \"text-center\"], [\"type\", \"button\", 1, \"btn\", \"waves-effect\", \"waves-light\", \"btn-rounded\", \"btn-secondary\", \"btn-midblock\", 3, \"value\", \"click\"], [\"type\", \"submit\", \"class\", \"btn waves-effect waves-light btn-rounded btn-primary btn-midblock\", 3, \"value\", 4, \"ngIf\"], [1, \"mr-sm-2\"], [\"formControlName\", \"siteCode\", 1, \"custom-select\", \"mr-sm-2\", 3, \"change\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"control\"], [3, \"value\"], [1, \"table-responsive\"], [\"id\", \"zero_config1\", 1, \"table\", \"table-bordered\", \"no-wrap\"], [2, \"width\", \"3%\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"width\", \"100%\", 4, \"ngIf\"], [1, \"icon-note\", 3, \"click\"], [\"width\", \"100%\"], [3, \"isLoading\"], [\"type\", \"text\", \"matInput\", \"\", 1, \"form-control\", 2, \"width\", \"inherit\", 3, \"placeholder\", \"formControl\", \"matAutocomplete\"], [3, \"optionSelected\"], [\"auto_emp\", \"matAutocomplete\"], [\"type\", \"submit\", 1, \"btn\", \"waves-effect\", \"waves-light\", \"btn-rounded\", \"btn-primary\", \"btn-midblock\", 3, \"value\"]],\n  template: function MappingEmpToResourceForProjectSiteComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function MappingEmpToResourceForProjectSiteComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"h3\", 2);\n      i0.ɵɵtext(3);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function MappingEmpToResourceForProjectSiteComponent_Template_button_click_5_listener() {\n        return ctx.closeModel();\n      });\n      i0.ɵɵtext(6, \" \\u00D7\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 4);\n      i0.ɵɵelementStart(8, \"div\", 5);\n      i0.ɵɵelementStart(9, \"div\", 6);\n      i0.ɵɵelement(10, \"div\", 7);\n      i0.ɵɵelementStart(11, \"div\", 8);\n      i0.ɵɵelementStart(12, \"div\", 6);\n      i0.ɵɵelementStart(13, \"div\", 9);\n      i0.ɵɵelementStart(14, \"div\", 10);\n      i0.ɵɵelementStart(15, \"div\", 11);\n      i0.ɵɵelementStart(16, \"div\", 12);\n      i0.ɵɵelementStart(17, \"label\");\n      i0.ɵɵtext(18);\n      i0.ɵɵpipe(19, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"input\", 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"div\", 11);\n      i0.ɵɵelementStart(22, \"div\", 12);\n      i0.ɵɵelementStart(23, \"label\");\n      i0.ɵɵtext(24);\n      i0.ɵɵpipe(25, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(26, \"input\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 11);\n      i0.ɵɵelementStart(28, \"div\", 12);\n      i0.ɵɵelementStart(29, \"label\");\n      i0.ɵɵtext(30);\n      i0.ɵɵpipe(31, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(32, \"input\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"div\", 11);\n      i0.ɵɵelementStart(34, \"div\", 12);\n      i0.ɵɵelementStart(35, \"label\");\n      i0.ɵɵtext(36);\n      i0.ɵɵpipe(37, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(38, \"input\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(39, MappingEmpToResourceForProjectSiteComponent_div_39_Template, 13, 11, \"div\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(40, MappingEmpToResourceForProjectSiteComponent_div_40_Template, 24, 25, \"div\", 18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"div\", 19);\n      i0.ɵɵelementStart(42, \"div\", 8);\n      i0.ɵɵelementStart(43, \"div\", 20);\n      i0.ɵɵelementStart(44, \"input\", 21);\n      i0.ɵɵlistener(\"click\", function MappingEmpToResourceForProjectSiteComponent_Template_input_click_44_listener() {\n        return ctx.closeModel();\n      });\n      i0.ɵɵpipe(45, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(46, \" \\u00A0 \");\n      i0.ɵɵtemplate(47, MappingEmpToResourceForProjectSiteComponent_input_47_Template, 2, 3, \"input\", 22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 10, ctx.modalTitle));\n      i0.ɵɵadvance(15);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(19, 12, \"Customer_Code\"));\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(25, 14, \"Project_Code\"));\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(31, 16, \"Project_Start_Date\"));\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(37, 18, \"Project_End_Date\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.siteCodeList.length > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.empToResMapData.length > 0);\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate(\"value\", i0.ɵɵpipeBind1(45, 20, \"Cancel\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.canSave() && ctx.empToResMapData.length != 0);\n    }\n  },\n  directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i11.NgIf, i1.SelectControlValueAccessor, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i11.NgForOf, i12.ValidationMessagesComponent, i13.AutoLoaderComponent, i14.MatAutocompleteTrigger, i1.FormControlDirective, i14.MatAutocomplete, i15.MatOption],\n  pipes: [i7.TranslatePipe, i11.AsyncPipe],\n  encapsulation: 2\n});","map":{"version":3,"sources":["E:/LS_Projects/ExOneERP/LS_ERP/LS.HRM/ClientApp/src/app/Operationalmgt/project/mapping-emp-to-resource-for-project-site/mapping-emp-to-resource-for-project-site.component.ts"],"names":["FormControl","Validators","debounceTime","distinctUntilChanged","map","startWith","switchMap","ParentOptMgtComponent","delay","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","i10","i11","i12","i13","i14","i15","MappingEmpToResourceForProjectSiteComponent_div_39_option_11_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","site_r4","$implicit","ctx_r3","ɵɵnextContext","ɵɵpropertyInterpolate","siteCode","ɵɵadvance","ɵɵtextInterpolate2","isArab","siteName","siteArbName","MappingEmpToResourceForProjectSiteComponent_div_39_Template","_r6","ɵɵgetCurrentView","ɵɵpipe","ɵɵlistener","MappingEmpToResourceForProjectSiteComponent_div_39_Template_select_change_6_listener","$event","ɵɵrestoreView","ctx_r5","onSelectSiteCode","ɵɵtemplate","ɵɵelement","ctx_r0","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵproperty","siteCodeList","form","controls","MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_7_Template","ft_r8","ɵɵtextInterpolate1","employeeNumber","MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_mat_option_7_Template","option_r15","ctx_r14","text","textTwo","textAr","MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_Template","_r17","MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_Template_mat_autocomplete_optionSelected_5_listener","ctx_r16","autoSelectionEmployeeNumber","_r13","ɵɵreference","ctx_r11","isDataLoading","ɵɵpropertyInterpolate2","empCodeControl","filteredEmployeeNumbers","MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_Template","_r19","MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_Template_i_click_12_listener","restoredCtx","f_r9","index","ctx_r18","editMap","ctx_r7","skillSet","skillSetNameEng","skillSetNameArb","editRow","empName","empNameAr","MappingEmpToResourceForProjectSiteComponent_div_40_Template","ctx_r1","empToResMapData","MappingEmpToResourceForProjectSiteComponent_input_47_Template","MappingEmpToResourceForProjectSiteComponent","constructor","fb","http","router","apiService","authService","utilService","translate","notifyService","validationService","dialogRef","skillsetData","skillsetsListForSite","monthsDataList","shiftsForSite","employeeList","employeesForProjectSite","valueChanges","pipe","autoDelay","val","trim","filterEmployeeNumbers","ngOnInit","isArabic","setForm","count","interval","setInterval","calculateDates","loadEmployees","getSitesList","getSkillsetsForSite","project","closeModel","close","_a","_b","group","projectCode","customerCode","required","startDate","toString","substring","endDate","noOfDays","disable","onlySelf","loadEmployeesForProjectSite","loadEmpToResourceMap","getall","subscribe","res","result","error","ShowApiErrorMessage","length","showError","instant","Date","getTime","y","getFullYear","sm","getMonth","em","m","sd","getDate","ed","monthData","mStartDate","toDateString","mEndDate","mNoOfDays","push","loadskillsetData","ss","row","skillSetCode","nameInEnglish","nameInArabic","quantity","_c","_d","_e","_f","_g","console","log","i","empNumber","find","value","x","employeeID","mapId","getJvalue","getShiftsForSite","event","target","response","setValue","findIndex","e","option","submit","post","OkMessage","showInfo","showWarning","canSave","ɵfac","MappingEmpToResourceForProjectSiteComponent_Factory","t","ɵɵdirectiveInject","FormBuilder","HttpClient","Router","ApiService","AuthorizeService","UtilityService","TranslateService","NotificationService","ValidationService","MatDialogRef","ɵcmp","ɵɵdefineComponent","type","selectors","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","MappingEmpToResourceForProjectSiteComponent_Template","MappingEmpToResourceForProjectSiteComponent_Template_form_ngSubmit_0_listener","MappingEmpToResourceForProjectSiteComponent_Template_button_click_5_listener","MappingEmpToResourceForProjectSiteComponent_Template_input_click_44_listener","modalTitle","directives","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlName","NgIf","SelectControlValueAccessor","NgSelectOption","ɵNgSelectMultipleOption","NgForOf","ValidationMessagesComponent","AutoLoaderComponent","MatAutocompleteTrigger","FormControlDirective","MatAutocomplete","MatOption","pipes","TranslatePipe","AsyncPipe","encapsulation"],"mappings":"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","sourcesContent":["import { FormControl, Validators } from '@angular/forms';\r\nimport { debounceTime, distinctUntilChanged, map, startWith, switchMap } from 'rxjs/operators';\r\nimport { ParentOptMgtComponent } from '../../../sharedcomponent/parentoptmgt.component';\r\nimport { delay } from \"rxjs/operators\";\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/forms\";\r\nimport * as i2 from \"@angular/common/http\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"../../../services/api.service\";\r\nimport * as i5 from \"../../../api-authorization/AuthorizeService\";\r\nimport * as i6 from \"../../../services/utility.service\";\r\nimport * as i7 from \"@ngx-translate/core\";\r\nimport * as i8 from \"../../../services/notification.service\";\r\nimport * as i9 from \"../../../sharedcomponent/ValidationService\";\r\nimport * as i10 from \"@angular/material/dialog\";\r\nimport * as i11 from \"@angular/common\";\r\nimport * as i12 from \"../../../sharedcomponent/ValidationMessagesComponent\";\r\nimport * as i13 from \"../../../sharedcomponent/autoloader.component\";\r\nimport * as i14 from \"@angular/material/autocomplete\";\r\nimport * as i15 from \"@angular/material/core\";\r\nfunction MappingEmpToResourceForProjectSiteComponent_div_39_option_11_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"option\", 28);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const site_r4 = ctx.$implicit;\r\n    const ctx_r3 = i0.ɵɵnextContext(2);\r\n    i0.ɵɵpropertyInterpolate(\"value\", site_r4.siteCode);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate2(\"\", site_r4.siteCode, \"(\", !ctx_r3.isArab ? site_r4.siteName : site_r4.siteArbName, \")\");\r\n} }\r\nfunction MappingEmpToResourceForProjectSiteComponent_div_39_Template(rf, ctx) { if (rf & 1) {\r\n    const _r6 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 10);\r\n    i0.ɵɵelementStart(1, \"div\", 11);\r\n    i0.ɵɵelementStart(2, \"div\", 12);\r\n    i0.ɵɵelementStart(3, \"label\", 23);\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵpipe(5, \"translate\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(6, \"select\", 24);\r\n    i0.ɵɵlistener(\"change\", function MappingEmpToResourceForProjectSiteComponent_div_39_Template_select_change_6_listener($event) { i0.ɵɵrestoreView(_r6); const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.onSelectSiteCode($event); });\r\n    i0.ɵɵelementStart(7, \"option\", 25);\r\n    i0.ɵɵtext(8);\r\n    i0.ɵɵpipe(9, \"translate\");\r\n    i0.ɵɵpipe(10, \"translate\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtemplate(11, MappingEmpToResourceForProjectSiteComponent_div_39_option_11_Template, 2, 3, \"option\", 26);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(12, \"validation-message\", 27);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(4);\r\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 5, \"Site_Code\"));\r\n    i0.ɵɵadvance(4);\r\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(9, 7, \"Select\"), \" \", i0.ɵɵpipeBind1(10, 9, \"Site_Code\"), \" \");\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.siteCodeList);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"control\", ctx_r0.form.controls.siteCode);\r\n} }\r\nfunction MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_7_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"td\");\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ft_r8 = i0.ɵɵnextContext().$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", ft_r8.employeeNumber, \"\");\r\n} }\r\nfunction MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_mat_option_7_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"mat-option\", 28);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const option_r15 = ctx.$implicit;\r\n    const ctx_r14 = i0.ɵɵnextContext(4);\r\n    i0.ɵɵproperty(\"value\", option_r15);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate2(\" \", option_r15.text, \"-\", !ctx_r14.isArab ? option_r15.textTwo : option_r15.textAr, \" \");\r\n} }\r\nfunction MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_Template(rf, ctx) { if (rf & 1) {\r\n    const _r17 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"td\", 36);\r\n    i0.ɵɵelement(1, \"auto-loader\", 37);\r\n    i0.ɵɵelement(2, \"input\", 38);\r\n    i0.ɵɵpipe(3, \"translate\");\r\n    i0.ɵɵpipe(4, \"translate\");\r\n    i0.ɵɵelementStart(5, \"mat-autocomplete\", 39, 40);\r\n    i0.ɵɵlistener(\"optionSelected\", function MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_Template_mat_autocomplete_optionSelected_5_listener($event) { i0.ɵɵrestoreView(_r17); const ctx_r16 = i0.ɵɵnextContext(3); return ctx_r16.autoSelectionEmployeeNumber($event); });\r\n    i0.ɵɵtemplate(7, MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_mat_option_7_Template, 2, 3, \"mat-option\", 26);\r\n    i0.ɵɵpipe(8, \"async\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(9, \"validation-message\", 27);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const _r13 = i0.ɵɵreference(6);\r\n    const ctx_r11 = i0.ɵɵnextContext(3);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"isLoading\", ctx_r11.isDataLoading);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵpropertyInterpolate2(\"placeholder\", \"\", i0.ɵɵpipeBind1(3, 7, \"Enter\"), \" \", i0.ɵɵpipeBind1(4, 9, \"Employee\"), \"\");\r\n    i0.ɵɵproperty(\"formControl\", ctx_r11.empCodeControl)(\"matAutocomplete\", _r13);\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(8, 11, ctx_r11.filteredEmployeeNumbers));\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"control\", ctx_r11.empCodeControl);\r\n} }\r\nfunction MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_Template(rf, ctx) { if (rf & 1) {\r\n    const _r19 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"tr\");\r\n    i0.ɵɵelementStart(1, \"td\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(3, \"td\");\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(5, \"td\");\r\n    i0.ɵɵtext(6);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtemplate(7, MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_7_Template, 2, 1, \"td\", 33);\r\n    i0.ɵɵtemplate(8, MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_td_8_Template, 10, 13, \"td\", 34);\r\n    i0.ɵɵelementStart(9, \"td\");\r\n    i0.ɵɵtext(10);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(11, \"td\");\r\n    i0.ɵɵelementStart(12, \"i\", 35);\r\n    i0.ɵɵlistener(\"click\", function MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_Template_i_click_12_listener() { const restoredCtx = i0.ɵɵrestoreView(_r19); const f_r9 = restoredCtx.index; const ctx_r18 = i0.ɵɵnextContext(2); return ctx_r18.editMap(f_r9); });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ft_r8 = ctx.$implicit;\r\n    const f_r9 = ctx.index;\r\n    const ctx_r7 = i0.ɵɵnextContext(2);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", f_r9 + 1, \"\");\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", ft_r8.skillSet, \"\");\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", !ctx_r7.isArab ? ft_r8.skillSetNameEng : ft_r8.skillSetNameArb, \"\");\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.editRow != f_r9);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.editRow == f_r9);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", !ctx_r7.isArab ? ft_r8.empName : ft_r8.empNameAr, \"\");\r\n} }\r\nfunction MappingEmpToResourceForProjectSiteComponent_div_40_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 29);\r\n    i0.ɵɵelementStart(1, \"table\", 30);\r\n    i0.ɵɵelementStart(2, \"tr\");\r\n    i0.ɵɵelementStart(3, \"th\", 31);\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵpipe(5, \"translate\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(6, \"th\");\r\n    i0.ɵɵtext(7);\r\n    i0.ɵɵpipe(8, \"translate\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(9, \"th\");\r\n    i0.ɵɵtext(10);\r\n    i0.ɵɵpipe(11, \"translate\");\r\n    i0.ɵɵpipe(12, \"translate\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(13, \"th\");\r\n    i0.ɵɵtext(14);\r\n    i0.ɵɵpipe(15, \"translate\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(16, \"th\");\r\n    i0.ɵɵtext(17);\r\n    i0.ɵɵpipe(18, \"translate\");\r\n    i0.ɵɵpipe(19, \"translate\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(20, \"th\");\r\n    i0.ɵɵtext(21);\r\n    i0.ɵɵpipe(22, \"translate\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtemplate(23, MappingEmpToResourceForProjectSiteComponent_div_40_tr_23_Template, 13, 6, \"tr\", 32);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(4);\r\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 9, \"S.No\"), \" \");\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(8, 11, \"SkillSet\"), \" \");\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(11, 13, \"SkillSet\"), \" \", i0.ɵɵpipeBind1(12, 15, \"Name\"), \" \");\r\n    i0.ɵɵadvance(4);\r\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(15, 17, \"Employee_Code\"), \" \");\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(18, 19, \"Employee\"), \" \", i0.ɵɵpipeBind1(19, 21, \"Name\"), \" \");\r\n    i0.ɵɵadvance(4);\r\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(22, 23, \"Edit\"), \" \");\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.empToResMapData);\r\n} }\r\nfunction MappingEmpToResourceForProjectSiteComponent_input_47_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"input\", 41);\r\n    i0.ɵɵpipe(1, \"translate\");\r\n} if (rf & 2) {\r\n    i0.ɵɵpropertyInterpolate(\"value\", i0.ɵɵpipeBind1(1, 1, \"Save\"));\r\n} }\r\nexport class MappingEmpToResourceForProjectSiteComponent extends ParentOptMgtComponent {\r\n    constructor(fb, http, router, apiService, authService, utilService, translate, notifyService, validationService, dialogRef) {\r\n        super(authService);\r\n        this.fb = fb;\r\n        this.http = http;\r\n        this.router = router;\r\n        this.apiService = apiService;\r\n        this.authService = authService;\r\n        this.utilService = utilService;\r\n        this.translate = translate;\r\n        this.notifyService = notifyService;\r\n        this.validationService = validationService;\r\n        this.dialogRef = dialogRef;\r\n        this.skillsetData = [];\r\n        this.empToResMapData = [];\r\n        this.skillsetsListForSite = [];\r\n        this.monthsDataList = [];\r\n        this.shiftsForSite = [];\r\n        this.siteCodeList = [];\r\n        this.editRow = -1;\r\n        this.empCodeControl = new FormControl('');\r\n        this.employeeList = [];\r\n        this.employeesForProjectSite = [];\r\n        this.employeeNumber = '';\r\n        this.isDataLoading = false;\r\n        this.isArab = false;\r\n        this.filteredEmployeeNumbers = this.empCodeControl.valueChanges.pipe(\r\n        // startWith(this.employeeNumber),\r\n        startWith(''), debounceTime(utilService.autoDelay()), distinctUntilChanged(), switchMap((val) => {\r\n            if (val.trim() !== '')\r\n                this.isDataLoading = true;\r\n            return this.filterEmployeeNumbers(val || '');\r\n        }));\r\n    }\r\n    ngOnInit() {\r\n        this.isArab = this.utilService.isArabic();\r\n        this.setForm();\r\n        var count = 0;\r\n        this.interval = setInterval(() => {\r\n            count++;\r\n            if (count == 1) {\r\n                this.calculateDates();\r\n            }\r\n            else if (count == 2) {\r\n                this.loadEmployees();\r\n            }\r\n            else if (count == 3) {\r\n                this.getSitesList();\r\n            }\r\n            else if (count == 4) {\r\n                this.getSkillsetsForSite(this.project.siteCode);\r\n            }\r\n        }, count > 4 ? 0 : 1000);\r\n    }\r\n    closeModel() {\r\n        this.dialogRef.close();\r\n    }\r\n    setForm() {\r\n        var _a, _b;\r\n        this.form = this.fb.group({\r\n            'projectCode': [this.project.projectCode],\r\n            'customerCode': [this.project.customerCode],\r\n            'siteCode': [((_a = this.project) === null || _a === void 0 ? void 0 : _a.siteCode) != null ? this.project.siteCode : '', Validators.required],\r\n            'startDate': [this.project.startDate.toString().substring(0, 10)],\r\n            'endDate': [this.project.endDate.toString().substring(0, 10)],\r\n            'noOfDays': [this.noOfDays],\r\n            // 'empNumber': [''],\r\n        });\r\n        if (((_b = this.project) === null || _b === void 0 ? void 0 : _b.siteCode) != null) {\r\n            this.form.controls['siteCode'].disable({ onlySelf: true });\r\n            this.loadEmployeesForProjectSite(this.project.siteCode);\r\n            this.getSkillsetsForSite(this.project.siteCode);\r\n            this.loadEmpToResourceMap(this.project.siteCode);\r\n        }\r\n    }\r\n    getSitesList() {\r\n        this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(res => {\r\n            this.siteCodeList = res;\r\n        });\r\n    }\r\n    loadEmployees() {\r\n        this.apiService.getall('Employee/getSelectEmployeeList').subscribe(result => {\r\n            this.employeeList = result;\r\n        }, error => this.utilService.ShowApiErrorMessage(error));\r\n    }\r\n    loadEmployeesForProjectSite(siteCode) {\r\n        this.apiService.getall(`EmployeesToProjectSite/getEmployeesOfProjectSite/${this.project.projectCode}/${siteCode}`).subscribe(result => {\r\n            this.employeesForProjectSite = result;\r\n            if (this.employeesForProjectSite.length == 0)\r\n                this.notifyService.showError(this.translate.instant(\"Employees_Not_Assigned_To_Site\"));\r\n            else\r\n                this.loadEmpToResourceMap(siteCode);\r\n        }, error => this.utilService.ShowApiErrorMessage(error));\r\n    }\r\n    calculateDates() {\r\n        this.monthsDataList = [];\r\n        let startDate = new Date(this.project.startDate);\r\n        let endDate = new Date(this.project.endDate);\r\n        this.noOfDays = (endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24) + 1;\r\n        for (let y = startDate.getFullYear(); y <= endDate.getFullYear(); y++) {\r\n            let sm = y == startDate.getFullYear() ? startDate.getMonth() : 1;\r\n            let em = y == endDate.getFullYear() ? endDate.getMonth() : 12;\r\n            for (let m = sm; m <= em; m++) {\r\n                let sd = (m == sm && y == startDate.getFullYear()) ? startDate.getDate() : 1;\r\n                let ed = (m == em && y == endDate.getFullYear()) ? endDate.getDate() : new Date(y, m + 1, 0).getDate();\r\n                let noOfDays = (new Date(y, m, ed).getTime() - new Date(y, m, sd).getTime()) / (1000 * 60 * 60 * 24) + 1;\r\n                let monthData = {\r\n                    sd: sd,\r\n                    ed: ed,\r\n                    mStartDate: new Date(y, m, sd).toDateString(),\r\n                    mEndDate: new Date(y, m, ed).toDateString(),\r\n                    mNoOfDays: noOfDays\r\n                };\r\n                this.monthsDataList.push(monthData);\r\n            }\r\n        }\r\n    }\r\n    loadskillsetData() {\r\n        this.skillsetData = [];\r\n        this.empToResMapData = [];\r\n        for (let ss = 0; ss < this.skillsetsListForSite.length; ss++) {\r\n            let row = {\r\n                skillSet: this.skillsetsListForSite[ss].skillSetCode,\r\n                skillSetNameEng: this.skillsetsListForSite[ss].nameInEnglish,\r\n                skillSetNameArb: this.skillsetsListForSite[ss].nameInArabic,\r\n                quantity: this.skillsetsListForSite[ss].quantity,\r\n            };\r\n            this.skillsetData.push(row);\r\n        }\r\n    }\r\n    loadEmpToResourceMap(siteCode) {\r\n        this.isDataLoading = true;\r\n        this.apiService.getall(`EmployeesToResorceMap/getEmployeesToResourcesMapForProjectSite/${this.project.projectCode}/${siteCode}`).subscribe(res => {\r\n            var _a, _b, _c, _d, _e, _f, _g;\r\n            this.empToResMapData = res;\r\n            console.log(res);\r\n            this.isDataLoading = false;\r\n            console.log(this.skillsetsListForSite);\r\n            for (var i = 0; i < this.empToResMapData.length; i++) {\r\n                let map = this.empToResMapData[i];\r\n                //map.empNumber = this.employeeList.find((y: any) => y.textTwo == map.employeeID).value;\r\n                map.empNumber = (_a = this.employeeList.find((y) => (y === null || y === void 0 ? void 0 : y.value) == (map === null || map === void 0 ? void 0 : map.employeeNumber))) === null || _a === void 0 ? void 0 : _a.value;\r\n                map.empName = (_b = this.employeeList.find((y) => (y === null || y === void 0 ? void 0 : y.value) == (map === null || map === void 0 ? void 0 : map.employeeNumber))) === null || _b === void 0 ? void 0 : _b.text;\r\n                map.empNameAr = (_c = this.employeeList.find((y) => (y === null || y === void 0 ? void 0 : y.value) == (map === null || map === void 0 ? void 0 : map.employeeNumber))) === null || _c === void 0 ? void 0 : _c.textAr;\r\n                map.skillSetNameEng = (_d = this.skillsetsListForSite.find((x) => x.skillSetCode == (map === null || map === void 0 ? void 0 : map.skillSet))) === null || _d === void 0 ? void 0 : _d.nameInEnglish;\r\n                map.skillSetNameArb = (_e = this.skillsetsListForSite.find((x) => x.skillSetCode == (map === null || map === void 0 ? void 0 : map.skillSet))) === null || _e === void 0 ? void 0 : _e.nameInArabic;\r\n            }\r\n            if (this.empToResMapData.length == 0) {\r\n                for (let ss = 0; ss < this.skillsetsListForSite.length; ss++) {\r\n                    for (let i = 1; i <= this.skillsetsListForSite[ss].quantity; i++) {\r\n                        let row = {\r\n                            projectCode: this.project.projectCode,\r\n                            siteCode: this.form.controls['siteCode'].value,\r\n                            skillSet: this.skillsetsListForSite[ss].skillSetCode,\r\n                            skillSetNameEng: (_f = this.skillsetsListForSite[ss]) === null || _f === void 0 ? void 0 : _f.nameInEnglish,\r\n                            skillSetNameArb: (_g = this.skillsetsListForSite[ss]) === null || _g === void 0 ? void 0 : _g.nameInArabic,\r\n                            employeeNumber: \"\",\r\n                            employeeID: 0,\r\n                            mapId: 0\r\n                        };\r\n                        this.empToResMapData.push(row);\r\n                    }\r\n                }\r\n            }\r\n        }, error => {\r\n            this.isDataLoading = false;\r\n        });\r\n    }\r\n    getJvalue(i) {\r\n        return i % this.skillsetsListForSite.length;\r\n    }\r\n    getSkillsetsForSite(siteCode) {\r\n        this.isDataLoading = true;\r\n        if (siteCode != '')\r\n            this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${siteCode}`).subscribe(res => {\r\n                this.skillsetsListForSite = res;\r\n                //this.getShiftsForSite(siteCode);\r\n                this.loadEmployeesForProjectSite(siteCode);\r\n                this.isDataLoading = false;\r\n            }, error => {\r\n                this.isDataLoading = false;\r\n            });\r\n        else {\r\n            this.isDataLoading = false;\r\n            this.shiftsForSite = [];\r\n            this.skillsetsListForSite = [];\r\n            //this.loadskillsetData();\r\n            //this.loadEmpToResourceMap();\r\n        }\r\n    }\r\n    getShiftsForSite(siteCode) {\r\n        this.isDataLoading = true;\r\n        this.apiService.getall(`ShiftMaster/getShiftsToSiteBySiteCode/${siteCode}`).subscribe(res => {\r\n            this.shiftsForSite = res;\r\n            this.isDataLoading = false;\r\n            //this.loadskillsetData();\r\n            //  this.loadEmpToResourceMap();\r\n        });\r\n    }\r\n    onSelectSiteCode(event) {\r\n        this.loadEmployeesForProjectSite(event.target.value);\r\n        delay(1000);\r\n        this.getSkillsetsForSite(event.target.value);\r\n        // this.loadEmpToResourceMap(event.target.value);\r\n    }\r\n    filterEmployeeNumbers(val) {\r\n        return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.project.projectCode}/${this.form.controls['siteCode'].value}/?search=${val}`)\r\n            .pipe(map(response => {\r\n            const res = response;\r\n            this.isDataLoading = false;\r\n            return res;\r\n        }));\r\n    }\r\n    editMap(row) {\r\n        if (this.editRow == -1) {\r\n            this.editRow = row;\r\n            this.empCodeControl.setValue(this.empToResMapData[this.editRow].employeeNumber);\r\n        }\r\n        else\r\n            this.editRow = -1;\r\n        //this.employeeNumber = this.empToResMapData[this.editRow].employeeNumber;\r\n    }\r\n    autoSelectionEmployeeNumber(event) {\r\n        //if (this.empToResMapData.findIndex(e => e.employeeID == event.option.value.value) < 0) {\r\n        if (this.empToResMapData.findIndex(e => e.employeeNumber == event.option.value.text) < 0) {\r\n            this.empToResMapData[this.editRow].employeeID = event.option.value.value;\r\n            this.empToResMapData[this.editRow].employeeNumber = event.option.value.text;\r\n            this.empToResMapData[this.editRow].empName = event.option.value.textTwo;\r\n            this.empToResMapData[this.editRow].empNameAr = event.option.value.textAr;\r\n        }\r\n        this.editRow = -1;\r\n    }\r\n    submit() {\r\n        if (this.empToResMapData.length != 0 && !this.isDataLoading) {\r\n            //let postDataList: Array<any> = [];\r\n            //this.empToResMapData.forEach((e: any) => {\r\n            //  let item: any = {\r\n            //    mapId: e.mapId,\r\n            //    projectCode: e.projectCode,\r\n            //    siteCode: e.siteCode,\r\n            //    skillSet: e.skillSet,\r\n            //    employeeID: Number(e.employeeID),\r\n            //    employeeNumber: e.empNumber\r\n            //  }\r\n            //  postDataList.push(item);\r\n            //});\r\n            this.isDataLoading = true;\r\n            this.apiService.post('EmployeesToResorceMap/mapEmployeesToResources', this.empToResMapData)\r\n                .subscribe(res => {\r\n                this.utilService.OkMessage();\r\n                this.isDataLoading = false;\r\n                this.dialogRef.close(true);\r\n            }, error => {\r\n                console.log(error);\r\n                console.error(error);\r\n                this.utilService.ShowApiErrorMessage(error);\r\n                this.isDataLoading = false;\r\n            });\r\n        }\r\n        else if (this.isDataLoading) {\r\n            this.notifyService.showInfo(\"Please Wait...\");\r\n        }\r\n        else {\r\n            this.notifyService.showWarning(\"No_mapping_Data_Founds\");\r\n        }\r\n    }\r\n    canSave() {\r\n        return this.empToResMapData.findIndex(e => e.employeeNumber == \"\") < 0;\r\n    }\r\n}\r\nMappingEmpToResourceForProjectSiteComponent.ɵfac = function MappingEmpToResourceForProjectSiteComponent_Factory(t) { return new (t || MappingEmpToResourceForProjectSiteComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ApiService), i0.ɵɵdirectiveInject(i5.AuthorizeService), i0.ɵɵdirectiveInject(i6.UtilityService), i0.ɵɵdirectiveInject(i7.TranslateService), i0.ɵɵdirectiveInject(i8.NotificationService), i0.ɵɵdirectiveInject(i9.ValidationService), i0.ɵɵdirectiveInject(i10.MatDialogRef)); };\r\nMappingEmpToResourceForProjectSiteComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: MappingEmpToResourceForProjectSiteComponent, selectors: [[\"app-mapping-emp-to-resource-for-project-site\"]], features: [i0.ɵɵInheritDefinitionFeature], decls: 48, vars: 22, consts: [[\"novalidate\", \"\", 1, \"mt-4\", 3, \"formGroup\", \"ngSubmit\"], [1, \"modal-body\"], [1, \"modal-title\"], [\"type\", \"button\", \"aria-hidden\", \"true\", 1, \"close\", 3, \"click\"], [1, \"outer\"], [1, \"row\", \"rowm0\"], [1, \"col-md-12\", \"col-lg-12\"], [\"hidden\", \"\", 1, \"row\"], [1, \"row\", \"mt-3\"], [1, \"p-3\", 2, \"border\", \"1px solid #f4f4f4\"], [1, \"row\", \"mt-2\"], [1, \"col-md-3\", \"col-lg-3\"], [1, \"form-group\"], [\"type\", \"text\", \"formControlName\", \"customerCode\", \"readonly\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"projectCode\", \"readonly\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"startDate\", \"readonly\", \"\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"endDate\", \"readonly\", \"\", 1, \"form-control\"], [\"class\", \"row  mt-2\", 4, \"ngIf\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"modal-footer\"], [1, \"col-md-12\", \"col-lg-12\", \"text-center\"], [\"type\", \"button\", 1, \"btn\", \"waves-effect\", \"waves-light\", \"btn-rounded\", \"btn-secondary\", \"btn-midblock\", 3, \"value\", \"click\"], [\"type\", \"submit\", \"class\", \"btn waves-effect waves-light btn-rounded btn-primary btn-midblock\", 3, \"value\", 4, \"ngIf\"], [1, \"mr-sm-2\"], [\"formControlName\", \"siteCode\", 1, \"custom-select\", \"mr-sm-2\", 3, \"change\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"control\"], [3, \"value\"], [1, \"table-responsive\"], [\"id\", \"zero_config1\", 1, \"table\", \"table-bordered\", \"no-wrap\"], [2, \"width\", \"3%\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"width\", \"100%\", 4, \"ngIf\"], [1, \"icon-note\", 3, \"click\"], [\"width\", \"100%\"], [3, \"isLoading\"], [\"type\", \"text\", \"matInput\", \"\", 1, \"form-control\", 2, \"width\", \"inherit\", 3, \"placeholder\", \"formControl\", \"matAutocomplete\"], [3, \"optionSelected\"], [\"auto_emp\", \"matAutocomplete\"], [\"type\", \"submit\", 1, \"btn\", \"waves-effect\", \"waves-light\", \"btn-rounded\", \"btn-primary\", \"btn-midblock\", 3, \"value\"]], template: function MappingEmpToResourceForProjectSiteComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"form\", 0);\r\n        i0.ɵɵlistener(\"ngSubmit\", function MappingEmpToResourceForProjectSiteComponent_Template_form_ngSubmit_0_listener() { return ctx.submit(); });\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"h3\", 2);\r\n        i0.ɵɵtext(3);\r\n        i0.ɵɵpipe(4, \"translate\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"button\", 3);\r\n        i0.ɵɵlistener(\"click\", function MappingEmpToResourceForProjectSiteComponent_Template_button_click_5_listener() { return ctx.closeModel(); });\r\n        i0.ɵɵtext(6, \" \\u00D7\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"div\", 4);\r\n        i0.ɵɵelementStart(8, \"div\", 5);\r\n        i0.ɵɵelementStart(9, \"div\", 6);\r\n        i0.ɵɵelement(10, \"div\", 7);\r\n        i0.ɵɵelementStart(11, \"div\", 8);\r\n        i0.ɵɵelementStart(12, \"div\", 6);\r\n        i0.ɵɵelementStart(13, \"div\", 9);\r\n        i0.ɵɵelementStart(14, \"div\", 10);\r\n        i0.ɵɵelementStart(15, \"div\", 11);\r\n        i0.ɵɵelementStart(16, \"div\", 12);\r\n        i0.ɵɵelementStart(17, \"label\");\r\n        i0.ɵɵtext(18);\r\n        i0.ɵɵpipe(19, \"translate\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(20, \"input\", 13);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(21, \"div\", 11);\r\n        i0.ɵɵelementStart(22, \"div\", 12);\r\n        i0.ɵɵelementStart(23, \"label\");\r\n        i0.ɵɵtext(24);\r\n        i0.ɵɵpipe(25, \"translate\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(26, \"input\", 14);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(27, \"div\", 11);\r\n        i0.ɵɵelementStart(28, \"div\", 12);\r\n        i0.ɵɵelementStart(29, \"label\");\r\n        i0.ɵɵtext(30);\r\n        i0.ɵɵpipe(31, \"translate\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(32, \"input\", 15);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(33, \"div\", 11);\r\n        i0.ɵɵelementStart(34, \"div\", 12);\r\n        i0.ɵɵelementStart(35, \"label\");\r\n        i0.ɵɵtext(36);\r\n        i0.ɵɵpipe(37, \"translate\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(38, \"input\", 16);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(39, MappingEmpToResourceForProjectSiteComponent_div_39_Template, 13, 11, \"div\", 17);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(40, MappingEmpToResourceForProjectSiteComponent_div_40_Template, 24, 25, \"div\", 18);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(41, \"div\", 19);\r\n        i0.ɵɵelementStart(42, \"div\", 8);\r\n        i0.ɵɵelementStart(43, \"div\", 20);\r\n        i0.ɵɵelementStart(44, \"input\", 21);\r\n        i0.ɵɵlistener(\"click\", function MappingEmpToResourceForProjectSiteComponent_Template_input_click_44_listener() { return ctx.closeModel(); });\r\n        i0.ɵɵpipe(45, \"translate\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtext(46, \" \\u00A0 \");\r\n        i0.ɵɵtemplate(47, MappingEmpToResourceForProjectSiteComponent_input_47_Template, 2, 3, \"input\", 22);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 10, ctx.modalTitle));\r\n        i0.ɵɵadvance(15);\r\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(19, 12, \"Customer_Code\"));\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(25, 14, \"Project_Code\"));\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(31, 16, \"Project_Start_Date\"));\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(37, 18, \"Project_End_Date\"));\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.siteCodeList.length > 0);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.empToResMapData.length > 0);\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵpropertyInterpolate(\"value\", i0.ɵɵpipeBind1(45, 20, \"Cancel\"));\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.canSave() && ctx.empToResMapData.length != 0);\r\n    } }, directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i11.NgIf, i1.SelectControlValueAccessor, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i11.NgForOf, i12.ValidationMessagesComponent, i13.AutoLoaderComponent, i14.MatAutocompleteTrigger, i1.FormControlDirective, i14.MatAutocomplete, i15.MatOption], pipes: [i7.TranslatePipe, i11.AsyncPipe], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}