{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../api-authorization/AuthorizeService\";\nimport * as i2 from \"../services/notification.service\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@ngx-translate/core\";\nimport * as i6 from \"../services/api.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\n\nfunction NavMenuComponent_a_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 47);\n    i0.ɵɵelementStart(1, \"div\", 48);\n    i0.ɵɵelementStart(2, \"h6\", 49);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 50);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 50);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const not_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.SelectedLanguage == \"en\" ? not_r1.title : not_r1.title_Ar);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.SelectedLanguage == \"en\" ? not_r1.notifyMessage : not_r1.notifyMessage_Ar, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(not_r1.notifyDate);\n  }\n}\n\nconst _c0 = function (a0) {\n  return [a0];\n};\n\nexport let NavMenuComponent = /*#__PURE__*/(() => {\n  class NavMenuComponent {\n    constructor(authService, notifyService, http, router, translate, apiService) {\n      this.authService = authService;\n      this.notifyService = notifyService;\n      this.http = http;\n      this.router = router;\n      this.translate = translate;\n      this.apiService = apiService; //limesBasket$: BehaviorSubject<boolean>;\n\n      this.userName = 'User';\n      this.isAuthenticated = false;\n      this.SelectedLanguage = 'en';\n      this.cinNumber = '';\n      this.logoURL = '';\n      this.notificationList = [];\n      this.notificationCount = 0;\n      this.notificationLink = '';\n\n      this.getLanFile = lan => lan === 'ar' ? 'assets/new-styles-ar.css' : 'assets/new-styles.css';\n\n      translate.addLangs(['en', 'ar']);\n      translate.setDefaultLang('en');\n      translate.use('en');\n    }\n\n    ngOnInit() {\n      let linkElement = this.htmlLinkElement();\n      linkElement.setAttribute('href', 'assets/new-styles.css');\n      let lan = localStorage.getItem('language');\n      this.logoURL = localStorage.getItem('logoURL');\n\n      if (lan) {\n        this.SelectedLanguage = lan;\n        linkElement.setAttribute('href', this.getLanFile(lan));\n        this.translate.use(lan);\n        document.body.setAttribute('dir', lan === \"ar\" ? \"rtl\" : \"ltr\");\n        document.body.setAttribute('lang', lan);\n      }\n\n      document.head.appendChild(linkElement);\n      this.authService.getAuthorize().subscribe(isAuth => {\n        this.isAuthenticated = isAuth;\n      });\n      this.userName = this.authService.getUserName();\n      this.cinNumber = this.authService.getUser().cinNumber;\n      this.isAuthenticated = this.authService.isAuthenticated();\n\n      if (this.isAuthenticated) {\n        ////let distance = 0;\n        ////let isConfirmed = false;\n        ////let isExtended = false;      \n        ////let momentOfTime = new Date();\n        ////let timeSpan = 30 * 60 * 1000;\n        ////let countDownDate = momentOfTime.setTime(momentOfTime.getTime() + timeSpan);\n        ////let timerId = setInterval(() => {\n        ////  let now = new Date().getTime();\n        ////  distance = countDownDate - now;\n        ////  //console.log(distance);\n        ////  if (distance < (27 * 60 * 1000)) {\n        ////    if (isConfirmed === false) {\n        ////      isExtended = confirm(\"Do you want to extend sesssion\");\n        ////      isConfirmed = true;\n        ////      if (isExtended) {              \n        ////        location.reload(true);\n        ////      }            \n        ////    }\n        ////  }\n        ////  if (distance < 0) {          \n        ////    setTimeout(() => { clearInterval(timerId); this.LogOut(); }, 0);\n        ////  }\n        ////}, 900);\n        this.getNotificationData();\n      }\n    }\n\n    getNotificationData() {\n      this.apiService.getSchoolUrl('WebNotification/GetWebTopNotifications').subscribe(res => {\n        if (res) {\n          this.notificationList = res;\n          this.notificationCount = res.length;\n          this.notificationLink = 'school/allnotifications';\n        }\n      });\n    }\n\n    htmlLinkElement() {\n      var linkElement = document.createElement('link');\n      linkElement.setAttribute('rel', 'stylesheet');\n      linkElement.setAttribute('type', 'text/css');\n      linkElement.setAttribute('id', 'dynamicCss');\n      return linkElement;\n    }\n\n    selectLan(lan) {\n      const selectedLan = lan.target.value;\n      localStorage.setItem('language', selectedLan);\n      window.location.href = window.location.href;\n    }\n\n    LogOut() {\n      let user = this.authService.getUser();\n      localStorage.clear();\n      localStorage.removeItem(\"accessToken\");\n      this.authService.setAuthorize(false);\n      this.notifyService.showSuccess(\"Logout Successful\");\n      location.replace('');\n      localStorage.setItem('lastcinnumber', user.cinNumber); //this.authService.SetApiEndPoint(this.authService.GetSystemSetupApiEndPoint());\n\n      this.http.post(`${this.authService.GetSystemSetupApiEndPoint()}/validatecin/logout`, {\n        cinNumber: user.cinNumber\n      }).subscribe(resonse => {\n        let res = resonse;\n        this.authService.setAuthorize(false);\n        localStorage.clear(); //this.router.navigateByUrl('/');\n\n        this.notifyService.showSuccess(res.data); //window.location.href = \"/\";\n\n        location.replace('');\n      });\n    }\n\n  }\n\n  NavMenuComponent.ɵfac = function NavMenuComponent_Factory(t) {\n    return new (t || NavMenuComponent)(i0.ɵɵdirectiveInject(i1.AuthorizeService), i0.ɵɵdirectiveInject(i2.NotificationService), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.TranslateService), i0.ɵɵdirectiveInject(i6.ApiService));\n  };\n\n  NavMenuComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NavMenuComponent,\n    selectors: [[\"app-nav-menu\"]],\n    decls: 74,\n    vars: 10,\n    consts: [[\"data-navbarbg\", \"skin6\", 1, \"topbar\"], [1, \"navbar\", \"top-navbar\", \"navbar-expand-md\"], [\"data-logobg\", \"skin6\", 1, \"navbar-header\"], [\"href\", \"javascript:void(0)\", 1, \"nav-toggler\", \"waves-effect\", \"waves-light\", \"d-block\", \"d-md-none\"], [1, \"ti-menu\", \"ti-close\"], [1, \"navbar-brand\"], [\"href\", \"index.html\"], [1, \"logo-icon\"], [\"alt\", \"homepage\", 1, \"dark-logo\", 2, \"width\", \"130px\", \"height\", \"100px\", 3, \"src\"], [\"alt\", \"homepage\", 1, \"light-logo\", 2, \"width\", \"130px\", \"height\", \"100px\", 3, \"src\"], [1, \"logo-text\"], [\"href\", \"javascript:void(0)\", \"data-toggle\", \"collapse\", \"data-target\", \"#navbarSupportedContent\", \"aria-controls\", \"navbarSupportedContent\", \"aria-expanded\", \"false\", \"aria-label\", \"Toggle navigation\", 1, \"topbartoggler\", \"d-block\", \"d-md-none\", \"waves-effect\", \"waves-light\"], [1, \"ti-more\"], [\"id\", \"navbarSupportedContent\", 1, \"navbar-collapse\", \"collapse\"], [1, \"navbar-nav\", \"float-left\", \"mr-auto\", \"ml-3\", \"pl-1\"], [1, \"nav-item\", \"dropdown\"], [\"href\", \"javascript:void(0)\", \"id\", \"bell\", \"role\", \"button\", \"data-toggle\", \"dropdown\", \"aria-haspopup\", \"true\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\", \"pl-md-3\", \"position-relative\"], [\"data-feather\", \"bell\", 1, \"svg-icon\"], [1, \"badge\", \"badge-primary\", \"notify-no\", \"rounded-circle\"], [1, \"dropdown-menu\", \"dropdown-menu-left\", \"mailbox\", \"animated\", \"bounceInDown\"], [1, \"list-style-none\"], [1, \"message-center\", \"notifications\", \"position-relative\"], [\"href\", \"javascript:void(0)\", \"class\", \"message-item d-flex align-items-center border-bottom px-3 py-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"nav-link\", \"pt-3\", \"text-center\", \"text-dark\", 3, \"routerLink\"], [1, \"fa\", \"fa-angle-right\"], [1, \"nav-item\", \"d-none\", \"d-md-block\"], [\"href\", \"javascript:void(0)\", 1, \"nav-link\"], [1, \"customize-input\"], [2, \"font-size\", \"18px\", \"color\", \"#5f76e8\"], [\"href\", \"#\", \"id\", \"navbarDropdown\", \"role\", \"button\", \"data-toggle\", \"dropdown\", \"aria-haspopup\", \"true\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\"], [\"aria-labelledby\", \"navbarDropdown\", 1, \"dropdown-menu\"], [\"href\", \"#\", 1, \"dropdown-item\"], [1, \"dropdown-divider\"], [1, \"custom-select\", \"form-control\", \"bg-white\", \"custom-radius\", \"custom-shadow\", \"border-0\", 3, \"ngModel\", \"change\", \"ngModelChange\"], [\"value\", \"en\", \"selected\", \"\"], [\"value\", \"ar\"], [1, \"navbar-nav\", \"float-right\"], [\"href\", \"javascript:void(0)\", \"data-toggle\", \"dropdown\", \"aria-haspopup\", \"true\", \"aria-expanded\", \"false\", 1, \"nav-link\", \"dropdown-toggle\"], [\"src\", \"assets/images/users/profile-pic.jpg\", \"alt\", \"user\", \"width\", \"40\", 1, \"rounded-circle\"], [1, \"ml-2\", \"d-none\", \"d-lg-inline-block\"], [1, \"text-dark\"], [\"data-feather\", \"chevron-down\", \"id\", \"svgIconId\", 1, \"svg-icon\"], [1, \"dropdown-menu\", \"dropdown-menu-right\", \"user-dd\", \"animated\", \"flipInY\"], [\"href\", \"javascript:void(0)\", 1, \"dropdown-item\"], [\"data-feather\", \"user\", 1, \"svg-icon\", \"mr-2\", \"ml-1\"], [\"href\", \"javascript:void(0)\", 1, \"dropdown-item\", 3, \"click\"], [\"data-feather\", \"power\", 1, \"svg-icon\", \"mr-2\", \"ml-1\"], [\"href\", \"javascript:void(0)\", 1, \"message-item\", \"d-flex\", \"align-items-center\", \"border-bottom\", \"px-3\", \"py-2\"], [1, \"w-75\", \"d-inline-block\", \"v-middle\", \"pl-2\"], [1, \"message-title\", \"mb-0\", \"mt-1\"], [1, \"font-12\", \"text-nowrap\", \"d-block\", \"text-muted\"]],\n    template: function NavMenuComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"header\", 0);\n        i0.ɵɵelementStart(1, \"nav\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"a\", 3);\n        i0.ɵɵelement(4, \"i\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"a\", 6);\n        i0.ɵɵelementStart(7, \"b\", 7);\n        i0.ɵɵelement(8, \"img\", 8);\n        i0.ɵɵelement(9, \"img\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"span\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"a\", 11);\n        i0.ɵɵelement(12, \"i\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 13);\n        i0.ɵɵelementStart(14, \"ul\", 14);\n        i0.ɵɵelementStart(15, \"li\", 15);\n        i0.ɵɵelementStart(16, \"a\", 16);\n        i0.ɵɵelementStart(17, \"span\");\n        i0.ɵɵelement(18, \"i\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"span\", 18);\n        i0.ɵɵtext(20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 19);\n        i0.ɵɵelementStart(22, \"ul\", 20);\n        i0.ɵɵelementStart(23, \"li\");\n        i0.ɵɵelementStart(24, \"div\", 21);\n        i0.ɵɵtemplate(25, NavMenuComponent_a_25_Template, 8, 3, \"a\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"li\");\n        i0.ɵɵelementStart(27, \"a\", 23);\n        i0.ɵɵelementStart(28, \"strong\");\n        i0.ɵɵtext(29, \"See all notifications\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"i\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"li\", 25);\n        i0.ɵɵelementStart(32, \"a\", 26);\n        i0.ɵɵelementStart(33, \"div\", 27);\n        i0.ɵɵelementStart(34, \"b\", 28);\n        i0.ɵɵtext(35);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"li\", 15);\n        i0.ɵɵelement(37, \"a\", 29);\n        i0.ɵɵelementStart(38, \"div\", 30);\n        i0.ɵɵelementStart(39, \"a\", 31);\n        i0.ɵɵtext(40, \"Action\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"a\", 31);\n        i0.ɵɵtext(42, \"Another action\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"div\", 32);\n        i0.ɵɵelementStart(44, \"a\", 31);\n        i0.ɵɵtext(45, \"Something else here\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"li\", 25);\n        i0.ɵɵelementStart(47, \"a\", 26);\n        i0.ɵɵelementStart(48, \"div\", 27);\n        i0.ɵɵelementStart(49, \"select\", 33);\n        i0.ɵɵlistener(\"change\", function NavMenuComponent_Template_select_change_49_listener($event) {\n          return ctx.selectLan($event);\n        })(\"ngModelChange\", function NavMenuComponent_Template_select_ngModelChange_49_listener($event) {\n          return ctx.SelectedLanguage = $event;\n        });\n        i0.ɵɵelementStart(50, \"option\", 34);\n        i0.ɵɵtext(51, \"EN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"option\", 35);\n        i0.ɵɵtext(53, \"AR\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"ul\", 36);\n        i0.ɵɵelementStart(55, \"li\", 25);\n        i0.ɵɵelement(56, \"a\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"li\", 15);\n        i0.ɵɵelementStart(58, \"a\", 37);\n        i0.ɵɵelement(59, \"img\", 38);\n        i0.ɵɵelementStart(60, \"span\", 39);\n        i0.ɵɵelementStart(61, \"span\");\n        i0.ɵɵtext(62, \"Hello,\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(63, \"span\", 40);\n        i0.ɵɵtext(64);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(65, \"i\", 41);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(66, \"div\", 42);\n        i0.ɵɵelementStart(67, \"a\", 43);\n        i0.ɵɵelement(68, \"i\", 44);\n        i0.ɵɵtext(69, \" My Profile \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(70, \"div\", 32);\n        i0.ɵɵelementStart(71, \"a\", 45);\n        i0.ɵɵlistener(\"click\", function NavMenuComponent_Template_a_click_71_listener() {\n          return ctx.LogOut();\n        });\n        i0.ɵɵelement(72, \"i\", 46);\n        i0.ɵɵtext(73, \" Logout \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.logoURL, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.logoURL, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(11);\n        i0.ɵɵtextInterpolate(ctx.notificationCount);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.notificationList.slice(0, 5));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(8, _c0, ctx.notificationLink));\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.cinNumber);\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.SelectedLanguage);\n        i0.ɵɵadvance(15);\n        i0.ɵɵtextInterpolate(ctx.userName);\n      }\n    },\n    directives: [i7.NgForOf, i4.RouterLinkWithHref, i8.SelectControlValueAccessor, i8.NgControlStatus, i8.NgModel, i8.NgSelectOption, i8.ɵNgSelectMultipleOption],\n    styles: [\"a.navbar-brand[_ngcontent-%COMP%]{white-space:normal;text-align:center;word-break:break-all}html[_ngcontent-%COMP%]{font-size:14px}@media (min-width: 768px){html[_ngcontent-%COMP%]{font-size:16px}}.box-shadow[_ngcontent-%COMP%]{box-shadow:0 .25rem .75rem #0000000d}\"]\n  });\n  return NavMenuComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}