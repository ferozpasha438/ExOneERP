"use strict";(self.webpackChunkclient_app=self.webpackChunkclient_app||[]).push([[197],{8197:(X,Q,g)=>{g.r(Q),g.d(Q,{InventorymgsetupModule:()=>gi});var p=g(8583),N=g(7453),q=g(4655),a=g(3679),A=g(9692),Z=g(1494),h=g(2789),_=g(5289),C=g(4803),t=g(7716),I=g(3048);let B=(()=>{class o{constructor(e){var i;e.SetApiEndPoint(null===(i=e.getUser())||void 0===i?void 0:i.invUrl)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(I._))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ParentInventoryMgtComponent"]],decls:0,vars:0,template:function(e,i){},encapsulation:2}),o})();var x=g(1841),b=g(5830),L=g(7278),U=g(2013),M=g(7928),S=g(6397),y=g(2238),K=g(5939),R=g(3250),F=g(4376),et=g(5396),O=g(9790);function it(o,r){if(1&o&&(t.TgZ(0,"option",71),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function nt(o,r){if(1&o&&(t.ynx(0),t.YNc(1,it,2,2,"option",70),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.CategoryCodeList)}}function st(o,r){if(1&o&&(t.TgZ(0,"option",71),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function ot(o,r){if(1&o&&(t.ynx(0),t.YNc(1,st,2,2,"option",70),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.SubCategoryCodeList)}}function at(o,r){if(1&o&&(t.TgZ(0,"option",71),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function rt(o,r){if(1&o&&(t.ynx(0),t.YNc(1,at,2,2,"option",70),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.ClassCodeList)}}function lt(o,r){if(1&o&&(t.TgZ(0,"option",71),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function ct(o,r){if(1&o&&(t.ynx(0),t.YNc(1,lt,2,2,"option",70),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.SubClassCodeList)}}function dt(o,r){if(1&o&&(t.TgZ(0,"option",71),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function mt(o,r){if(1&o&&(t.ynx(0),t.YNc(1,dt,2,2,"option",70),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.UomLIst)}}function ht(o,r){if(1&o&&(t.TgZ(0,"option",71),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function ut(o,r){if(1&o&&(t.ynx(0),t.YNc(1,ht,2,2,"option",70),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.ItemTypeLIst)}}function pt(o,r){if(1&o&&(t.TgZ(0,"option",71),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function gt(o,r){if(1&o&&(t.ynx(0),t.YNc(1,pt,2,2,"option",70),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.TaxCodeList)}}function _t(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",72),t._uU(12),t.qZA(),t.TgZ(13,"td",72),t._uU(14,"0"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td",58),t.TgZ(24,"i",73),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editInventoryItem(s)}),t.qZA(),t._uU(25," \xa0 "),t.TgZ(26,"i",74),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteInventoryItem(s)}),t.qZA(),t._uU(27," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.whCode),t.xp6(2),t.Oqu(e.qtyOH),t.xp6(2),t.Oqu(e.qtyOnSalesOrder),t.xp6(2),t.Oqu(e.qtyOnPO),t.xp6(2),t.Oqu(e.qtyReserved),t.xp6(2),t.Oqu(e.invitemAvgCost),t.xp6(4),t.Oqu(e.itemLandedCost),t.xp6(2),t.Oqu(e.minQty),t.xp6(2),t.Oqu(e.maxQty),t.xp6(2),t.Oqu(e.eoq)}}function Zt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",72),t._uU(12),t.qZA(),t.TgZ(13,"td",72),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td",58),t.TgZ(22,"i",73),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editInventoryUOMItem(s)}),t.qZA(),t._uU(23," \xa0 "),t.TgZ(24,"i",74),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteInventoryUOMItem(s)}),t.qZA(),t._uU(25," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.itemUOM),t.xp6(2),t.Oqu(e.itemConvFactor),t.xp6(2),t.Oqu(e.itemUOMPrice1),t.xp6(2),t.Oqu(e.itemUOMPrice2),t.xp6(2),t.Oqu(e.itemUOMPrice3),t.xp6(2),t.Oqu(e.itemUOMDiscPer),t.xp6(2),t.Oqu(e.itemUOMPrice4),t.xp6(2),t.Oqu(e.itemUomAvgCost),t.xp6(2),t.Oqu(e.itemUomLastPOCost),t.xp6(2),t.Oqu(e.itemUomLandedCost)}}function vt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",58),t.TgZ(6,"i",73),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editInventoryBarcodeItem(s)}),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"i",74),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteInventoryBarcodeItem(s)}),t.qZA(),t._uU(9," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.itemBarUOM),t.xp6(2),t.Oqu(e.itemBarcode)}}function At(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",58),t.TgZ(8,"i",73),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editInventoryNotesItem(s)}),t.qZA(),t._uU(9," \xa0 "),t.TgZ(10,"i",74),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteInventoryNotesItem(s)}),t.qZA(),t._uU(11," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.noteDates),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.notes)}}function Tt(o,r){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",72),t._uU(10),t.qZA(),t.TgZ(11,"td",72),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.qZA()),2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.wHCode),t.xp6(2),t.Oqu(e.tranDate),t.xp6(2),t.Oqu(e.tranNumber),t.xp6(2),t.Oqu(e.tranUnit),t.xp6(2),t.Oqu(e.tranQty),t.xp6(2),t.Oqu(e.unitConvFactor),t.xp6(2),t.Oqu(e.tranTotQty),t.xp6(2),t.Oqu(e.tranPrice),t.xp6(2),t.Oqu(e.itemAvgCost),t.xp6(2),t.Oqu(e.tranRemarks)}}const v=function(){return{standalone:!0}};let j=(()=>{class o{constructor(e,i,n,s,c,m,d,l,u,T,f){this.fb=e,this.http=i,this.router=n,this.apiService=s,this.authService=c,this.utilService=m,this.notifyService=d,this.validationService=l,this.pageService=u,this.dialog=T,this.dialogRef=f,this.displayedColumns=["ItemCode","h_code","shortname","itemdescription","category","itemavgcost","itemstandardcost","Actions"],this.sortingOrder="id desc",this.searchValue="",this.isLoading=!1,this.isReadOnly=!1,this.displayedColumns1=["WareHouse","TranDate","TranType","TranNumber","TranUnit","unitConvFactor","TranTotQty","TranPrice","ItemAvgCost","TranRemarks"],this.VenCodeList=[],this.CategoryCodeList=[],this.SubCategoryCodeList=[],this.ClassCodeList=[],this.SubClassCodeList=[],this.TaxCodeList=[],this.UomLIst=[],this.warehouseList=[],this.ItemTrackingList=[],this.ItemTypeLIst=[],this.CategoryCode="",this.id=0,this.itemcode="",this.listOfInvoices=[],this.itemCode="",this.wHCode="",this.tranDate="",this.tranNumber="",this.tranUnit="",this.tranQty="",this.unitConvFactor="",this.tranTotQty="",this.tranPrice="",this.itemAvgCost="",this.tranRemarks="",this.ItemCodes="",this.sequence=1,this.editsequence=0,this.editInventoryUOMItemsequence=0,this.editBarcodesequence=0,this.listOfinventory=[],this.whCode="",this.qtyOH=0,this.qtyOnSalesOrder=0,this.qtyOnPO=0,this.qtyReserved=0,this.invitemAvgCost=0,this.itemLastPOCost=0,this.itemLandedCost=0,this.minQty=0,this.maxQty=0,this.eoq=0,this.listOfUOMinventory=[],this.itemUOM="",this.itemConvFactor=0,this.itemUOMPrice1=0,this.itemUOMPrice2=0,this.itemUOMPrice3=0,this.itemUOMDiscPer=0,this.itemUOMPrice4=0,this.itemUomAvgCost=0,this.itemUomLastPOCost=0,this.itemUomLandedCost=0,this.listOfBarcodeinventory=[],this.itemBarUOM="",this.itemBarcode="",this.listOfNotesinventory=[],this.noteDates="",this.name="",this.notes="",this.Total=0}ngOnInit(){this.setForm(),this.loadCategoryCode(),this.loadClassCode(),this.loadSubClassCode(),this.loadTaxCode(),this.loadUOMCode(),this.loadWarehouses(),this.loadVenCode(),this.initialLoading(),this.loadType(),this.id>0&&this.edit()}loadinventoryHistory(e){null!=e&&this.apiService.getall(`Inventorymanagementlist/InventoryHistory?ItemCodes=${e}`).subscribe(i=>{i&&i.historyList.forEach(s=>{this.listOfInvoices.push({itemCode:s.itemCode,wHCode:s.whCode,tranDate:s.tranDate,tranNumber:s.tranNumber,tranUnit:s.tranUnit,tranQty:s.tranQty,unitConvFactor:s.unitConvFactor,tranTotQty:s.tranTotQty,tranPrice:s.tranPrice,itemAvgCost:s.itemAvgCost,tranRemarks:s.tranRemarks})})})}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}GenerateItemNumber(){this.apiService.getall("Inventorymanagementlist/GenerateItemNumber").subscribe(e=>{e&&this.form.patchValue({itemCode:""+e.itemCode})})}loadVenCode(){this.apiService.getall("PurchaseOrder/GetVendorCodeSelectList").subscribe(e=>{e&&(this.VenCodeList=e)})}loadWarehouses(){this.apiService.getall("warehouse/getSelectWarehouseList").subscribe(e=>{e&&(this.warehouseList=e)})}loadType(){this.apiService.getall("warehouse/GetSelectSysTypeList").subscribe(e=>{e&&(this.ItemTypeLIst=e)})}ontype(e){"INV"==e&&this.apiService.getall(`warehouse/GetSelectTrackingList?Code=${e}`).subscribe(i=>{i&&(this.ItemTrackingList=i)})}loadCategoryCode(){this.apiService.getall("producthierarchy/GetCategorySelectList").subscribe(e=>{e&&(this.CategoryCodeList=e)})}loadTaxCode(){this.apiService.getall("Inventorymanagementlist/GetTaxSelectList").subscribe(e=>{e&&(this.TaxCodeList=e)})}loadClassCode(){this.apiService.getall("Inventorymanagementlist/GetSelectClass").subscribe(e=>{e&&(this.ClassCodeList=e)})}loadSubClassCode(){this.apiService.getall("Inventorymanagementlist/getSelectSubClassList").subscribe(e=>{e&&(this.SubClassCodeList=e)})}loadUOMCode(){this.apiService.getall("Inventorymanagementlist/GetUOMSelectList").subscribe(e=>{e&&(this.UomLIst=e)})}onSubCategory(e){null!=e&&this.apiService.getall(`Inventorymanagementlist/GetSelectSubCategoryList?CategoryCode=${e}`).subscribe(i=>{i&&(this.SubCategoryCodeList=i)})}keyPressNumbers(e){var i=e.which?e.which:e.keyCode;return!(46!=i&&i>31&&(i<48||i>57)&&(e.preventDefault(),1))}setForm(){this.form=this.fb.group({itemCode:"",hsnCode:"",itemDescription:["",a.kI.required],itemDescriptionAr:[""],shortName:"",shortNameAr:"",itemCat:["",a.kI.required],itemSubCat:["",a.kI.required],itemClass:["",a.kI.required],itemSubClass:["",a.kI.required],itemAvgCost:"0",itemStandardCost:"0",itemBaseUnit:["",a.kI.required],itemPrimeVendor:"",itemStandardPrice1:["0"],itemStandardPrice2:["0"],itemStandardPrice3:["0"],itemType:"",itemTracking:"",itemWeight:"0",itemTaxCode:["",a.kI.required],isActive:[!1],allowPriceOverride:[!1],allowDiscounts:[!1],allowQuantityOverride:[!1],ItemInventoryCodes:"",ItemUOMCodes:"",ItemBarcodeCodes:"",ItemNotesCodes:"",ItemHistoryCodes:"",authList:this.fb.array([this.createAuthority()]),inventoryList:this.fb.array([this.createInventory()]),barcodeList:this.fb.array([this.createBarcode()]),notesList:this.fb.array([this.createNotes()]),historyList:this.fb.array([this.createHistory()])})}loadUser(e,i,n,s){this.data=new h.by(this.getData()),this.totalItemsCount=2}submit(){alert("submit")}inventorysubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("Inventorymanagementlist",this.form.value).subscribe(e=>{e&&(Object.values(e),this.itemcode=Object.values(e)[0]),this.form.patchValue({ItemInventoryCodes:this.itemcode,ItemUOMCodes:this.itemcode,ItemBarcodeCodes:this.itemcode,ItemNotesCodes:this.itemcode,ItemHistoryCodes:this.itemcode,itemCode:this.itemcode}),this.setInventoryForm(this.itemcode),this.setUOMForm(this.itemcode),this.setBarcodeForm(this.itemcode),this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}setUOMForm(e){this.apiService.getall(`Inventorymanagementlist/GetUOMListByID?itemvalue=${e}`).subscribe(i=>{i&&i.authList.forEach(s=>{this.listOfUOMinventory.push({sequence:this.getSequence(),tranNumber:"0",itemUOM:s.itemUOM,itemConvFactor:s.itemConvFactor,itemUOMPrice1:s.itemUOMPrice1,itemUOMPrice2:s.itemUOMPrice2,itemUOMPrice3:s.itemUOMPrice3,itemUOMDiscPer:s.itemUOMDiscPer,itemUOMPrice4:s.itemUOMPrice4,itemUomAvgCost:s.itemUomAvgCost,itemUomLastPOCost:s.itemUomLastPOCost,itemUomLandedCost:s.itemUomLandedCost})})})}editItem(e){this.authList.push(this.createAuthority(e))}createAuthority(e){return this.fb.group(e||{itemUOM:["",a.kI.required],itemConvFactor:["",a.kI.required],itemUOMPrice1:["",a.kI.required],itemUOMPrice2:["",a.kI.required],itemUOMPrice3:["",a.kI.required],itemUOMDiscPer:["",a.kI.required],itemUOMPrice4:["",a.kI.required],itemUomAvgCost:["",a.kI.required],itemUomLastPOCost:["",a.kI.required],itemUomLandedCost:["",a.kI.required]})}get authList(){return this.form.get("authList")}addItem(){this.authList.push(this.createAuthority())}AddUOM(){this.id>0&&(this.form.value.id=this.id),this.form.value.authList=this.listOfUOMinventory,this.apiService.post("Inventorymanagementlist/CreateUomItem",this.form.value).subscribe(e=>{this.setBarcodeForm(this.itemcode),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}removeItem(e){this.authList.removeAt(e)}addItemInventory(){this.inventoryList.push(this.createInventory())}AddInventory(){this.id>0&&(this.form.value.id=this.id),this.form.value.inventoryList=this.listOfinventory,this.apiService.post("Inventorymanagementlist/CreateInventoryItem",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}removeItemInventory(e){this.inventoryList.removeAt(e)}setInventoryForm(e){this.apiService.getall(`Inventorymanagementlist/GetInventoryListByID?itemvalue=${e}`).subscribe(i=>{i&&i.inventoryList.forEach(s=>{this.listOfinventory.push({sequence:this.getSequence(),tranNumber:"0",whCode:s.whCode,qtyOH:s.qtyOH,qtyOnSalesOrder:s.qtyOnSalesOrder,qtyOnPO:s.qtyOnPO,qtyReserved:s.qtyReserved,invitemAvgCost:s.invItemAvgCost,itemLastPOCost:s.itemLastPOCost,itemLandedCost:s.itemLandedCost,minQty:s.minQty,maxQty:s.maxQty,eoq:s.eoq})})})}editInventory(e){this.inventoryList.push(this.createInventory(e))}createInventory(e){return this.fb.group(e||{whCode:["",a.kI.required],qtyOH:["",a.kI.required],qtyOnSalesOrder:["",a.kI.required],qtyOnPO:["",a.kI.required],qtyReserved:["",a.kI.required],invitemAvgCost:["",a.kI.required],itemLastPOCost:["",a.kI.required],itemLandedCost:["",a.kI.required],minQty:["",a.kI.required],maxQty:["",a.kI.required],eoq:["",a.kI.required]})}get inventoryList(){return this.form.get("inventoryList")}addItemBarcode(){this.barcodeList.push(this.createBarcode())}AddBarcode(){this.id>0&&(this.form.value.id=this.id),this.form.value.barcodeList=this.listOfBarcodeinventory,this.apiService.post("Inventorymanagementlist/CreateBarcodeItem",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}removeItemBarcode(e){this.barcodeList.removeAt(e)}editBarcode(e){this.barcodeList.push(this.createBarcode(e))}createBarcode(e){return this.fb.group(e||{itemBarcode:["",a.kI.required],itemUOM:["",a.kI.required]})}get barcodeList(){return this.form.get("barcodeList")}setBarcodeForm(e){this.apiService.getall(`Inventorymanagementlist/GetBarcodeListByID?itemvalue=${e}`).subscribe(i=>{i&&i.barCodeList.forEach(s=>{this.listOfBarcodeinventory.push({sequence:this.getSequence(),tranNumber:"0",itemBarUOM:s.itemBarUOM,itemBarcode:s.itemBarcode})})})}onBarcodechange(e){null!=e&&this.apiService.getall(`Inventorymanagementlist/GetBarcode?Barcode=${e}`).subscribe(i=>{i&&this.notifyService.showError("Duplicate Barcode...")})}addItemNotes(){this.notesList.push(this.createNotes())}AddNotes(){this.id>0&&(this.form.value.id=this.id),this.form.value.notesList=this.listOfNotesinventory,this.apiService.post("Inventorymanagementlist/CreateNotesItem",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}removeItemNotes(e){this.notesList.removeAt(e)}editNotes(e){this.notesList.push(this.createNotes(e))}createNotes(e){return this.fb.group(e||{noteDates:["",a.kI.required],name:["",a.kI.required],notes:["",a.kI.required]})}get notesList(){return this.form.get("notesList")}addItemHistory(){this.historyList.push(this.createHistory())}AddHistory(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("Inventorymanagementlist/CreateItemHistory",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}removeItemHistory(e){this.historyList.removeAt(e)}editHistory(e){this.historyList.push(this.createHistory(e))}createHistory(e){return this.fb.group(e||{whCode:["",a.kI.required],tranDate:["",a.kI.required],tranType:["",a.kI.required],tranNumber:["",a.kI.required],tranUnit:["",a.kI.required],tranQty:["",a.kI.required],unitConvFactor:["",a.kI.required],tranTotQty:["",a.kI.required],tranPrice:["",a.kI.required],itemAvgCost:["",a.kI.required],tranRemarks:["",a.kI.required]})}get historyList(){return this.form.get("historyList")}getData(){return[{ItemCode:"0110101",h_code:"012121011",shortname:"shortname ",itemdescription:"Appearls ",category:"Appearls ",itemavgcost:"$1200 ",itemstandardcost:"$1400 ",id:1},{ItemCode:"0110101",h_code:"012121011",shortname:"shortname ",itemdescription:"Appearls ",category:"Appearls ",itemavgcost:"$1200 ",itemstandardcost:"$1400 ",id:2}]}onSortOrder(e){this.sortingOrder=e.active+" "+e.direction,this.totalItemsCount=0,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,i,n,s){this.isLoading=!0,this.apiService.getPagination("Inventorymanagementlist",this.utilService.getQueryString(e,i,n,s)).subscribe(c=>{this.totalItemsCount=0,this.data=new h.by(c.items),this.totalItemsCount=c.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,this.isLoading=!1},c=>this.utilService.ShowApiErrorMessage(c))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}getSequence(){return this.sequence+=this.sequence+1}edit(){this.apiService.get("Inventorymanagementlist",this.id).subscribe(e=>{e&&(this.isReadOnly=!0,this.onSubCategory(e.itemCat),this.ontype(e.itemType),this.form.patchValue({ItemInventoryCodes:e.itemCode,ItemUOMCodes:e.itemCode,ItemBarcodeCodes:e.itemCode,ItemNotesCodes:e.itemCode,ItemHistoryCodes:e.itemCode}),this.form.patchValue(e),e.inventoryList.forEach(d=>{this.listOfinventory.push({sequence:this.getSequence(),tranNumber:"0",whCode:d.whCode,qtyOH:d.qtyOH,qtyOnSalesOrder:d.qtyOnSalesOrder,qtyOnPO:d.qtyOnPO,qtyReserved:d.qtyReserved,invitemAvgCost:d.invItemAvgCost,itemLastPOCost:d.itemLastPOCost,itemLandedCost:d.itemLandedCost,minQty:d.minQty,maxQty:d.maxQty,eoq:d.eoq})}),e.authList.forEach(d=>{this.listOfUOMinventory.push({sequence:this.getSequence(),tranNumber:"0",itemUOM:d.itemUOM,itemConvFactor:d.itemConvFactor,itemUOMPrice1:d.itemUOMPrice1,itemUOMPrice2:d.itemUOMPrice2,itemUOMPrice3:d.itemUOMPrice3,itemUOMDiscPer:d.itemUOMDiscPer,itemUOMPrice4:d.itemUOMPrice4,itemUomAvgCost:d.itemUomAvgCost,itemUomLastPOCost:d.itemUomLastPOCost,itemUomLandedCost:d.itemUomLandedCost})}),e.barcodeList.forEach(d=>{this.listOfBarcodeinventory.push({sequence:this.getSequence(),tranNumber:"0",itemBarUOM:d.itemBarUOM,itemBarcode:d.itemBarcode})}),e.notesList.forEach(d=>{this.listOfNotesinventory.push({sequence:this.getSequence(),tranNumber:"0",noteDates:d.noteDates,name:d.name,notes:d.notes})}),e.historyList.forEach(d=>{this.listOfInvoices.push({itemCode:d.itemCode,wHCode:d.whCode,tranDate:d.tranDate,tranNumber:d.tranNumber,tranUnit:d.tranUnit,tranQty:d.tranQty,unitConvFactor:d.unitConvFactor,tranTotQty:d.tranTotQty,tranPrice:d.tranPrice,itemAvgCost:d.itemAvgCost,tranRemarks:d.tranRemarks})}),this.listOfInvoices.forEach(d=>{this.Total+=d.tranPrice}),this.id=e.id)})}view(e){this.openDialogManage(e,_.Oi.create,"","",tt,{action:"",module:""},100)}openDialogManage(e=0,i,n="",s="",c,m={module:"00",action:"00act"},d=100){let l=this.utilService.openDialogCongif(this.dialog,c,d);l.componentInstance.dbops=i,l.componentInstance.modalTitle=n,l.componentInstance.id=e,l.componentInstance.moduleFile=m,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,C.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Inventorymanagementlist",e).subscribe(s=>{this.refresh(),this.utilService.OkMessage()})},n=>this.utilService.ShowApiErrorMessage(n))}refresh(){this.searchValue="",this.initialLoading()}closeModel(){this.dialogRef.close()}onTextchange(e){null!=e&&this.apiService.getall(`Inventorymanagementlist/GetInventoryItems?ItemCode=${e}`).subscribe(i=>{i&&(this.isReadOnly=!0,this.onSubCategory(i.itemCat),this.form.patchValue({ItemInventoryCodes:i.itemCode,ItemUOMCodes:i.itemCode,ItemBarcodeCodes:i.itemCode,ItemNotesCodes:i.itemCode,ItemHistoryCodes:i.itemCode}),this.form.patchValue(i),this.inventoryList.clear(),i.inventoryList.forEach(l=>{this.editInventory(l)}),this.authList.clear(),i.authList.forEach(l=>{this.editItem(l)}),this.barcodeList.clear(),i.barcodeList.forEach(l=>{this.editBarcode(l)}),this.notesList.clear(),i.notesList.forEach(l=>{this.editNotes(l)}),this.historyList.clear(),i.historyList.forEach(l=>{this.editHistory(l)}),this.id=i.id)})}Close(){this.refresh()}ErrorMessage(){this.notifyService.showError(this.isArabic()?"\u0627\u0645\u0644\u0623 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644":"Cannot Delete The  Item ")}ErrorMesg(){this.notifyService.showError(this.isArabic()?"\u0627\u0645\u0644\u0623 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644":"Duplicate Item ")}isArabic(){return"ar"==this.selectedLanguage()}selectedLanguage(){var e;return null!==(e=localStorage.getItem("language"))&&void 0!==e?e:"en-US"}deleteInventoryItem(e){e.qtyOH>0?this.ErrorMessage():this.removeInventoryList(e.sequence)}removeInventoryList(e){let i=this.listOfinventory.findIndex(n=>n.sequence===e);this.listOfinventory.splice(i,1)}editInventoryItem(e){this.editsequence=e.sequence,this.whCode=e.whCode,this.qtyOH=e.qtyOH,this.qtyOnSalesOrder=e.qtyOnSalesOrder,this.qtyOnPO=e.qtyOnPO,this.qtyReserved=e.qtyReserved,this.invitemAvgCost=e.invitemAvgCost,this.itemLastPOCost=e.itemLastPOCost,this.itemLandedCost=e.itemLandedCost,this.minQty=e.minQty,this.maxQty=e.maxQty,this.eoq=e.eoq}additem_inv(){this.editsequence>0&&(this.removeInventoryList(this.editsequence),this.editsequence=0),0!=this.minQty&&""!=this.whCode&&(this.listOfinventory.push({sequence:this.getSequence(),tranNumber:"0",whCode:this.whCode,qtyOH:this.qtyOH,qtyOnSalesOrder:this.qtyOnSalesOrder,qtyOnPO:this.qtyOnPO,qtyReserved:this.qtyReserved,invitemAvgCost:this.invitemAvgCost,itemLastPOCost:this.itemLastPOCost,itemLandedCost:this.itemLandedCost,minQty:this.minQty,maxQty:this.maxQty,eoq:this.eoq}),this.setToDefault())}setToDefault(){this.whCode="",this.qtyOH=0,this.qtyOnSalesOrder=0,this.qtyOnPO=0,this.qtyReserved=0,this.invitemAvgCost=0,this.itemLastPOCost=0,this.itemLandedCost=0,this.minQty=0,this.maxQty=0,this.eoq=0}deleteInventoryUOMItem(e){this.removeInventoryUOMList(e.sequence)}removeInventoryUOMList(e){let i=this.listOfUOMinventory.findIndex(n=>n.sequence===e);this.listOfUOMinventory.splice(i,1)}editInventoryUOMItem(e){this.editInventoryUOMItemsequence=e.sequence,this.itemUOM=e.itemUOM,this.itemConvFactor=e.itemConvFactor,this.itemUOMPrice1=e.itemUOMPrice1,this.itemUOMPrice2=e.itemUOMPrice2,this.itemUOMPrice3=e.itemUOMPrice3,this.itemUOMDiscPer=e.itemUOMDiscPer,this.itemUOMPrice4=e.itemUOMPrice4,this.itemUomAvgCost=e.itemUomAvgCost,this.itemUomLastPOCost=e.itemUomLastPOCost,this.itemUomLandedCost=e.itemUomLandedCost}additem_invUOM(){if(this.editInventoryUOMItemsequence>0&&(this.removeInventoryUOMList(this.editInventoryUOMItemsequence),this.editInventoryUOMItemsequence=0),""!=this.itemUOM&&0!=this.itemConvFactor){for(let e=0;e<this.listOfUOMinventory.length;e++)if(this.listOfUOMinventory[e].itemUOM==this.itemUOM)return void this.ErrorMesg();this.listOfUOMinventory.push({sequence:this.getSequence(),tranNumber:"0",itemUOM:this.itemUOM,itemConvFactor:this.itemConvFactor,itemUOMPrice1:this.itemUOMPrice1,itemUOMPrice2:this.itemUOMPrice2,itemUOMPrice3:this.itemUOMPrice3,itemUOMDiscPer:this.itemUOMDiscPer,itemUOMPrice4:this.itemUOMPrice4,itemUomAvgCost:this.itemUomAvgCost,itemUomLastPOCost:this.itemUomLastPOCost,itemUomLandedCost:this.itemUomLandedCost}),this.setToDefaultUOM()}}setToDefaultUOM(){this.itemUOM="",this.itemConvFactor=0,this.itemUOMPrice1=0,this.itemUOMPrice2=0,this.itemUOMPrice3=0,this.itemUOMDiscPer=0,this.itemUOMPrice4=0,this.itemUomAvgCost=0,this.itemUomLastPOCost=0,this.itemUomLandedCost=0}deleteInventoryBarcodeItem(e){this.removeInventoryBarcodeList(e.sequence)}removeInventoryBarcodeList(e){let i=this.listOfBarcodeinventory.findIndex(n=>n.sequence===e);this.listOfBarcodeinventory.splice(i,1)}editInventoryBarcodeItem(e){this.editBarcodesequence=e.sequence,this.itemBarUOM=e.itemBarUOM,this.itemBarcode=e.itemBarcode}additem_invBarcode(){if(this.editBarcodesequence>0&&(this.removeInventoryBarcodeList(this.editBarcodesequence),this.editBarcodesequence=0),""!=this.itemBarUOM&&""!=this.itemBarcode){for(let e=0;e<this.listOfBarcodeinventory.length;e++)if(this.listOfBarcodeinventory[e].itemBarcode==this.itemBarcode)return void this.ErrorMesg();this.listOfBarcodeinventory.push({sequence:this.getSequence(),tranNumber:"0",itemBarUOM:this.itemBarUOM,itemBarcode:this.itemBarcode}),this.setToDefaultBarcode()}}setToDefaultBarcode(){this.itemBarUOM="",this.itemBarcode=""}deleteInventoryNotesItem(e){this.removeInventoryNotesList(e.sequence)}removeInventoryNotesList(e){let i=this.listOfNotesinventory.findIndex(n=>n.sequence===e);this.listOfNotesinventory.splice(i,1)}editInventoryNotesItem(e){this.editsequence=e.sequence,this.noteDates=e.noteDates,this.name=e.name,this.notes=e.notes}additem_invNotes(){this.editsequence>0&&(this.deleteInventoryNotesItem(this.editsequence),this.editsequence=0),""!=this.noteDates&&""!=this.name&&""!=this.notes&&(this.listOfNotesinventory.push({sequence:this.getSequence(),tranNumber:"0",noteDates:this.noteDates,name:this.name,notes:this.notes}),this.setToDefaultNotes())}setToDefaultNotes(){this.noteDates="",this.name="",this.notes=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(x.eN),t.Y36(q.F0),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(U.g),t.Y36(M.R),t.Y36(S.N),t.Y36(y.uw),t.Y36(y.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdateinventorymanagementlist"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,7),t.Gf(Z.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:617,vars:493,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["novalidate","",1,"mt-1",3,"formGroup","ngSubmit"],[1,"tabs_custom",3,"label"],[1,"row","rowm0","rowp15","mt-3"],[1,"col-md-6","col-lg-6"],[1,"form-group"],[1,"mr-sm-2"],["type","text","maxlength","20","disabled","","formControlName","itemCode",1,"form-control",3,"placeholder","readonly","change"],["maxlength","20","type","text","formControlName","hsnCode",1,"form-control",3,"placeholder"],["type","text","maxlength","100","formControlName","itemDescription",1,"form-control",3,"placeholder"],[3,"control"],["type","text","maxlength","100","formControlName","itemDescriptionAr",1,"form-control",3,"placeholder"],["type","text","maxlength","250","formControlName","shortName",1,"form-control",3,"placeholder"],["type","text","maxlength","250","formControlName","shortNameAr",1,"form-control",3,"placeholder"],["id","CategoryCode","formControlName","itemCat",1,"custom-select","mr-sm-2",3,"change"],["value",""],[4,"ngIf"],["id","SubCategoryCode","formControlName","itemSubCat",1,"custom-select","mr-sm-2"],["id","ClassCode","formControlName","itemClass",1,"custom-select","mr-sm-2"],["id","ClassCode","formControlName","itemSubClass",1,"custom-select","mr-sm-2"],["type","text","maxlength","10","readonly","","formControlName","itemAvgCost",1,"form-control",3,"placeholder","keypress"],["type","text","maxlength","10","formControlName","itemStandardCost",1,"form-control",3,"placeholder","keypress"],["formControlName","itemBaseUnit",1,"custom-select","mr-sm-2"],["bindLabel","text","bindValue","value","formControlName","itemPrimeVendor",3,"items"],[1,"col-md-4","col-lg-4"],["type","number","maxlength","4","formControlName","itemStandardPrice1",1,"form-control",3,"placeholder"],["type","number","maxlength","4","formControlName","itemStandardPrice2",1,"form-control",3,"placeholder"],["type","number","maxlength","4","formControlName","itemStandardPrice3",1,"form-control",3,"placeholder"],["id","CategoryCode","formControlName","itemType",1,"custom-select","mr-sm-2",3,"change"],["bindLabel","text","bindValue","value","formControlName","itemTracking",3,"items"],["type","text","maxlength","20","formControlName","itemWeight",1,"form-control",3,"placeholder","keypress"],["id","CategoryCode","formControlName","itemTaxCode",1,"custom-select","mr-sm-2"],["color","primary","formControlName","isActive"],["color","primary","formControlName","allowPriceOverride"],["color","primary","formControlName","allowDiscounts"],["color","primary","formControlName","allowQuantityOverride"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button","data-dismiss","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary",3,"click"],["type","submit","value","SAVE",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock"],[3,"label"],[1,"mt-2"],[1,"form-inline","float-right"],["type","text","readonly","","formControlName","ItemInventoryCodes",1,"form-control","mx-sm-3"],[1,"cardtitle-divider","mt-2"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["width","18%"],["width","8%"],["width","11%"],["bindLabel","text","bindValue","value","disabled","",3,"items","ngModel","ngModelOptions","ngModelChange"],["readonly","","type","number","onKeyPress","if(this.value.length==5) return false;",1,"form-control",2,"width","80px",3,"ngModelOptions","ngModel","ngModelChange"],["readonly","","type","number","onKeyPress","if(this.value.length==5) return false;",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],["type","number","onKeyPress","if(this.value.length==5) return false;",1,"form-control",2,"width","80px",3,"ngModelOptions","ngModel","ngModelChange"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"click"],[1,"icon-plus"],[1,"text-center"],[4,"ngFor","ngForOf"],["type","button","value","SAVE",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["type","text","readonly","","formControlName","ItemUOMCodes",1,"form-control","mx-sm-3"],["bindLabel","text","bindValue","value",2,"width","140px",3,"items","ngModel","ngModelOptions","ngModelChange"],["type","number","onKeyPress","if(this.value.length==5) return false;",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],["type","text","readonly","","formControlName","ItemBarcodeCodes",1,"form-control","mx-sm-3"],["type","text",1,"form-control",3,"ngModelOptions","ngModel","blur","ngModelChange"],["type","text","readonly","","formControlName","ItemNotesCodes",1,"form-control","mx-sm-3"],["type","date",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],["type","text",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],["type","text","readonly","","formControlName","ItemHistoryCodes",1,"form-control","mx-sm-3"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-right"],[1,"icon-note","cpointer",3,"click"],[1,"icon-trash","cpointer",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return i.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"div",1),t.TgZ(6,"div",2),t.TgZ(7,"form",3),t.NdJ("ngSubmit",function(){return i.inventorysubmit()}),t.TgZ(8,"mat-tab-group"),t.TgZ(9,"mat-tab",4),t.ALo(10,"translate"),t.TgZ(11,"div",5),t.TgZ(12,"div",6),t.TgZ(13,"div",7),t.TgZ(14,"label",8),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"input",9),t.NdJ("change",function(s){return i.onTextchange(s.target.value)}),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",6),t.TgZ(21,"div",7),t.TgZ(22,"label",8),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"input",10),t.ALo(26,"translate"),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",6),t.TgZ(29,"div",7),t.TgZ(30,"label",8),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"input",11),t.ALo(34,"translate"),t.ALo(35,"translate"),t._UZ(36,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(37,"div",6),t.TgZ(38,"div",7),t.TgZ(39,"label",8),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"input",13),t.ALo(43,"translate"),t.ALo(44,"translate"),t.qZA(),t.qZA(),t.TgZ(45,"div",6),t.TgZ(46,"div",7),t.TgZ(47,"label",8),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._UZ(50,"input",14),t.ALo(51,"translate"),t.ALo(52,"translate"),t.qZA(),t.qZA(),t.TgZ(53,"div",6),t.TgZ(54,"div",7),t.TgZ(55,"label",8),t._uU(56),t.ALo(57,"translate"),t.qZA(),t._UZ(58,"input",15),t.ALo(59,"translate"),t.ALo(60,"translate"),t.qZA(),t.qZA(),t.TgZ(61,"div",6),t.TgZ(62,"div",7),t.TgZ(63,"label",8),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"select",16),t.NdJ("change",function(s){return i.onSubCategory(s.target.value)}),t.TgZ(67,"option",17),t._uU(68,"Choose Category Code"),t.qZA(),t.YNc(69,nt,2,1,"ng-container",18),t.qZA(),t._UZ(70,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(71,"div",6),t.TgZ(72,"div",7),t.TgZ(73,"label",8),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"select",19),t.TgZ(77,"option",17),t._uU(78,"Choose Sub Category Code"),t.qZA(),t.YNc(79,ot,2,1,"ng-container",18),t.qZA(),t._UZ(80,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(81,"div",6),t.TgZ(82,"div",7),t.TgZ(83,"label",8),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"select",20),t.TgZ(87,"option",17),t._uU(88,"Choose Class Code"),t.qZA(),t.YNc(89,rt,2,1,"ng-container",18),t.qZA(),t._UZ(90,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(91,"div",6),t.TgZ(92,"div",7),t.TgZ(93,"label",8),t._uU(94),t.ALo(95,"translate"),t.qZA(),t.TgZ(96,"select",21),t.TgZ(97,"option",17),t._uU(98,"Choose Sub Class Code"),t.qZA(),t.YNc(99,ct,2,1,"ng-container",18),t.qZA(),t._UZ(100,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(101,"div",6),t.TgZ(102,"div",7),t.TgZ(103,"label",8),t._uU(104),t.ALo(105,"translate"),t.qZA(),t.TgZ(106,"input",22),t.NdJ("keypress",function(s){return i.keyPressNumbers(s)}),t.ALo(107,"translate"),t.ALo(108,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(109,"div",6),t.TgZ(110,"div",7),t.TgZ(111,"label",8),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"input",23),t.NdJ("keypress",function(s){return i.keyPressNumbers(s)}),t.ALo(115,"translate"),t.ALo(116,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(117,"div",6),t.TgZ(118,"div",7),t.TgZ(119,"label",8),t._uU(120),t.ALo(121,"translate"),t.qZA(),t.TgZ(122,"select",24),t.TgZ(123,"option",17),t._uU(124,"Choose UOM"),t.qZA(),t.YNc(125,mt,2,1,"ng-container",18),t.qZA(),t._UZ(126,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(127,"div",6),t.TgZ(128,"div",7),t.TgZ(129,"label",8),t._uU(130),t.ALo(131,"translate"),t.qZA(),t._UZ(132,"ng-select",25),t.qZA(),t.qZA(),t.TgZ(133,"div",26),t.TgZ(134,"div",7),t.TgZ(135,"label",8),t._uU(136),t.ALo(137,"translate"),t.qZA(),t._UZ(138,"input",27),t.ALo(139,"translate"),t.ALo(140,"translate"),t.qZA(),t.qZA(),t.TgZ(141,"div",26),t.TgZ(142,"div",7),t.TgZ(143,"label",8),t._uU(144),t.ALo(145,"translate"),t.qZA(),t._UZ(146,"input",28),t.ALo(147,"translate"),t.ALo(148,"translate"),t.qZA(),t.qZA(),t.TgZ(149,"div",26),t.TgZ(150,"div",7),t.TgZ(151,"label",8),t._uU(152),t.ALo(153,"translate"),t.qZA(),t._UZ(154,"input",29),t.ALo(155,"translate"),t.ALo(156,"translate"),t.qZA(),t.qZA(),t.TgZ(157,"div",6),t.TgZ(158,"div",7),t.TgZ(159,"label",8),t._uU(160),t.ALo(161,"translate"),t.qZA(),t.TgZ(162,"select",30),t.NdJ("change",function(s){return i.ontype(s.target.value)}),t.TgZ(163,"option",17),t._uU(164,"Choose Type Code"),t.qZA(),t.YNc(165,ut,2,1,"ng-container",18),t.qZA(),t._UZ(166,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(167,"div",6),t.TgZ(168,"div",7),t.TgZ(169,"label",8),t._uU(170),t.ALo(171,"translate"),t.qZA(),t._UZ(172,"ng-select",31),t._UZ(173,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(174,"div",6),t.TgZ(175,"div",7),t.TgZ(176,"label",8),t._uU(177),t.ALo(178,"translate"),t.qZA(),t.TgZ(179,"input",32),t.NdJ("keypress",function(s){return i.keyPressNumbers(s)}),t.ALo(180,"translate"),t.ALo(181,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(182,"div",6),t.TgZ(183,"div",7),t.TgZ(184,"label",8),t._uU(185),t.ALo(186,"translate"),t.qZA(),t.TgZ(187,"select",33),t.TgZ(188,"option",17),t._uU(189,"Choose Tax Code"),t.qZA(),t.YNc(190,gt,2,1,"ng-container",18),t.qZA(),t._UZ(191,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(192,"div",6),t.TgZ(193,"div",7),t.TgZ(194,"label",8),t._uU(195),t.ALo(196,"translate"),t.qZA(),t.TgZ(197,"div",7),t._UZ(198,"mat-slide-toggle",34),t.qZA(),t.qZA(),t.qZA(),t.TgZ(199,"div",6),t.TgZ(200,"div",7),t.TgZ(201,"label",8),t._uU(202),t.ALo(203,"translate"),t.qZA(),t.TgZ(204,"div",7),t._UZ(205,"mat-slide-toggle",35),t.qZA(),t.qZA(),t.qZA(),t.TgZ(206,"div",6),t.TgZ(207,"div",7),t.TgZ(208,"label",8),t._uU(209),t.ALo(210,"translate"),t.qZA(),t.TgZ(211,"div",7),t._UZ(212,"mat-slide-toggle",36),t.qZA(),t.qZA(),t.qZA(),t.TgZ(213,"div",6),t.TgZ(214,"div",7),t.TgZ(215,"label",8),t._uU(216),t.ALo(217,"translate"),t.qZA(),t.TgZ(218,"div",7),t._UZ(219,"mat-slide-toggle",37),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(220,"div",38),t.TgZ(221,"div",39),t.TgZ(222,"button",40),t.NdJ("click",function(){return i.closeModel()}),t._uU(223),t.ALo(224,"translate"),t.qZA(),t._UZ(225,"input",41),t.qZA(),t.qZA(),t.qZA(),t.TgZ(226,"mat-tab",42),t.ALo(227,"translate"),t.TgZ(228,"div",5),t.TgZ(229,"div",6),t.TgZ(230,"h4",43),t._uU(231),t.ALo(232,"translate"),t.qZA(),t.qZA(),t.TgZ(233,"div",6),t.TgZ(234,"div",44),t.TgZ(235,"div",7),t.TgZ(236,"label",8),t._uU(237),t.ALo(238,"translate"),t.qZA(),t._UZ(239,"input",45),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(240,"div",46),t.TgZ(241,"div",47),t.TgZ(242,"table",48),t.TgZ(243,"thead"),t.TgZ(244,"tr"),t.TgZ(245,"th",49),t._uU(246),t.ALo(247,"translate"),t.qZA(),t.TgZ(248,"th",49),t._uU(249),t.ALo(250,"translate"),t.qZA(),t.TgZ(251,"th",49),t._uU(252),t.ALo(253,"translate"),t.qZA(),t.TgZ(254,"th"),t._uU(255),t.ALo(256,"translate"),t.qZA(),t.TgZ(257,"th",50),t._uU(258),t.ALo(259,"translate"),t.qZA(),t.TgZ(260,"th",51),t._uU(261),t.ALo(262,"translate"),t.qZA(),t.TgZ(263,"th"),t._uU(264),t.ALo(265,"translate"),t.qZA(),t.TgZ(266,"th"),t._uU(267),t.ALo(268,"translate"),t.qZA(),t.TgZ(269,"th"),t._uU(270),t.ALo(271,"translate"),t.qZA(),t.TgZ(272,"th"),t._uU(273),t.ALo(274,"translate"),t.qZA(),t.TgZ(275,"th"),t._uU(276),t.ALo(277,"translate"),t.qZA(),t._UZ(278,"th"),t.qZA(),t.qZA(),t.TgZ(279,"tbody"),t.TgZ(280,"tr"),t.TgZ(281,"td"),t.TgZ(282,"ng-select",52),t.NdJ("ngModelChange",function(s){return i.whCode=s}),t.qZA(),t.qZA(),t.TgZ(283,"td"),t.TgZ(284,"input",53),t.NdJ("ngModelChange",function(s){return i.qtyOH=s}),t.qZA(),t.qZA(),t.TgZ(285,"td"),t.TgZ(286,"input",54),t.NdJ("ngModelChange",function(s){return i.qtyOnSalesOrder=s}),t.qZA(),t.qZA(),t.TgZ(287,"td"),t.TgZ(288,"input",54),t.NdJ("ngModelChange",function(s){return i.qtyOnPO=s}),t.qZA(),t.qZA(),t.TgZ(289,"td"),t.TgZ(290,"input",54),t.NdJ("ngModelChange",function(s){return i.qtyReserved=s}),t.qZA(),t.qZA(),t.TgZ(291,"td"),t.TgZ(292,"input",54),t.NdJ("ngModelChange",function(s){return i.invitemAvgCost=s}),t.qZA(),t.qZA(),t.TgZ(293,"td"),t.TgZ(294,"input",54),t.NdJ("ngModelChange",function(s){return i.itemLastPOCost=s}),t.qZA(),t.qZA(),t.TgZ(295,"td"),t.TgZ(296,"input",54),t.NdJ("ngModelChange",function(s){return i.itemLandedCost=s}),t.qZA(),t.qZA(),t.TgZ(297,"td"),t.TgZ(298,"input",55),t.NdJ("ngModelChange",function(s){return i.minQty=s}),t.qZA(),t.qZA(),t.TgZ(299,"td"),t.TgZ(300,"input",55),t.NdJ("ngModelChange",function(s){return i.maxQty=s}),t.qZA(),t.qZA(),t.TgZ(301,"td"),t.TgZ(302,"input",55),t.NdJ("ngModelChange",function(s){return i.eoq=s}),t.qZA(),t.qZA(),t.TgZ(303,"td"),t.TgZ(304,"button",56),t.NdJ("click",function(){return i.additem_inv()}),t._UZ(305,"i",57),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(306,"thead"),t.TgZ(307,"tr"),t.TgZ(308,"th",49),t._uU(309),t.ALo(310,"translate"),t.qZA(),t.TgZ(311,"th",49),t._uU(312),t.ALo(313,"translate"),t.qZA(),t.TgZ(314,"th",49),t._uU(315),t.ALo(316,"translate"),t.qZA(),t.TgZ(317,"th"),t._uU(318),t.ALo(319,"translate"),t.qZA(),t.TgZ(320,"th",50),t._uU(321),t.ALo(322,"translate"),t.qZA(),t.TgZ(323,"th",51),t._uU(324),t.ALo(325,"translate"),t.qZA(),t.TgZ(326,"th"),t._uU(327),t.ALo(328,"translate"),t.qZA(),t.TgZ(329,"th"),t._uU(330),t.ALo(331,"translate"),t.qZA(),t.TgZ(332,"th"),t._uU(333),t.ALo(334,"translate"),t.qZA(),t.TgZ(335,"th"),t._uU(336),t.ALo(337,"translate"),t.qZA(),t.TgZ(338,"th"),t._uU(339),t.ALo(340,"translate"),t.qZA(),t._UZ(341,"th",58),t.qZA(),t.qZA(),t.TgZ(342,"tbody"),t.YNc(343,_t,28,10,"tr",59),t.qZA(),t.qZA(),t.TgZ(344,"div",38),t.TgZ(345,"div",39),t.TgZ(346,"input",60),t.NdJ("click",function(){return i.AddInventory()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(347,"mat-tab",42),t.ALo(348,"translate"),t.TgZ(349,"div",5),t.TgZ(350,"div",6),t.TgZ(351,"h4",43),t._uU(352),t.ALo(353,"translate"),t.qZA(),t.qZA(),t.TgZ(354,"div",6),t.TgZ(355,"div",44),t.TgZ(356,"div",7),t.TgZ(357,"label",8),t._uU(358),t.ALo(359,"translate"),t.qZA(),t._UZ(360,"input",61),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(361,"div",46),t.TgZ(362,"div",47),t.TgZ(363,"table",48),t.TgZ(364,"thead"),t.TgZ(365,"tr"),t.TgZ(366,"th",49),t._uU(367),t.ALo(368,"translate"),t.qZA(),t.TgZ(369,"th",49),t._uU(370),t.ALo(371,"translate"),t.qZA(),t.TgZ(372,"th",49),t._uU(373),t.ALo(374,"translate"),t.qZA(),t.TgZ(375,"th"),t._uU(376),t.ALo(377,"translate"),t.qZA(),t.TgZ(378,"th",50),t._uU(379),t.ALo(380,"translate"),t.qZA(),t.TgZ(381,"th",51),t._uU(382),t.ALo(383,"translate"),t.qZA(),t.TgZ(384,"th"),t._uU(385),t.ALo(386,"translate"),t.qZA(),t.TgZ(387,"th"),t._uU(388),t.ALo(389,"translate"),t.qZA(),t.TgZ(390,"th"),t._uU(391),t.ALo(392,"translate"),t.qZA(),t.TgZ(393,"th"),t._uU(394),t.ALo(395,"translate"),t.qZA(),t._UZ(396,"th"),t.qZA(),t.qZA(),t.TgZ(397,"tbody"),t.TgZ(398,"tr"),t.TgZ(399,"td"),t.TgZ(400,"ng-select",62),t.NdJ("ngModelChange",function(s){return i.itemUOM=s}),t.qZA(),t.qZA(),t.TgZ(401,"td"),t.TgZ(402,"input",55),t.NdJ("ngModelChange",function(s){return i.itemConvFactor=s}),t.qZA(),t.qZA(),t.TgZ(403,"td"),t.TgZ(404,"input",63),t.NdJ("ngModelChange",function(s){return i.itemUOMPrice1=s}),t.qZA(),t.qZA(),t.TgZ(405,"td"),t.TgZ(406,"input",63),t.NdJ("ngModelChange",function(s){return i.itemUOMPrice2=s}),t.qZA(),t.qZA(),t.TgZ(407,"td"),t.TgZ(408,"input",63),t.NdJ("ngModelChange",function(s){return i.itemUOMPrice3=s}),t.qZA(),t.qZA(),t.TgZ(409,"td"),t.TgZ(410,"input",63),t.NdJ("ngModelChange",function(s){return i.itemUOMDiscPer=s}),t.qZA(),t.qZA(),t.TgZ(411,"td"),t.TgZ(412,"input",63),t.NdJ("ngModelChange",function(s){return i.itemUOMPrice4=s}),t.qZA(),t.qZA(),t.TgZ(413,"td"),t.TgZ(414,"input",55),t.NdJ("ngModelChange",function(s){return i.itemUomAvgCost=s}),t.qZA(),t.qZA(),t.TgZ(415,"td"),t.TgZ(416,"input",55),t.NdJ("ngModelChange",function(s){return i.itemUomLastPOCost=s}),t.qZA(),t.qZA(),t.TgZ(417,"td"),t.TgZ(418,"input",55),t.NdJ("ngModelChange",function(s){return i.itemUomLandedCost=s}),t.qZA(),t.qZA(),t.TgZ(419,"td"),t.TgZ(420,"button",56),t.NdJ("click",function(){return i.additem_invUOM()}),t._UZ(421,"i",57),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(422,"thead"),t.TgZ(423,"tr"),t.TgZ(424,"th",49),t._uU(425),t.ALo(426,"translate"),t.qZA(),t.TgZ(427,"th",49),t._uU(428),t.ALo(429,"translate"),t.qZA(),t.TgZ(430,"th",49),t._uU(431),t.ALo(432,"translate"),t.qZA(),t.TgZ(433,"th"),t._uU(434),t.ALo(435,"translate"),t.qZA(),t.TgZ(436,"th",50),t._uU(437),t.ALo(438,"translate"),t.qZA(),t.TgZ(439,"th",51),t._uU(440),t.ALo(441,"translate"),t.qZA(),t.TgZ(442,"th"),t._uU(443),t.ALo(444,"translate"),t.qZA(),t.TgZ(445,"th"),t._uU(446),t.ALo(447,"translate"),t.qZA(),t.TgZ(448,"th"),t._uU(449),t.ALo(450,"translate"),t.qZA(),t.TgZ(451,"th"),t._uU(452),t.ALo(453,"translate"),t.qZA(),t._UZ(454,"th",58),t.qZA(),t.qZA(),t.TgZ(455,"tbody"),t.YNc(456,Zt,26,10,"tr",59),t.qZA(),t.qZA(),t.TgZ(457,"div",38),t.TgZ(458,"div",39),t.TgZ(459,"input",60),t.NdJ("click",function(){return i.AddUOM()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(460,"mat-tab",42),t.ALo(461,"translate"),t.TgZ(462,"div",5),t.TgZ(463,"div",6),t.TgZ(464,"h4",43),t._uU(465),t.ALo(466,"translate"),t.qZA(),t.qZA(),t.TgZ(467,"div",6),t.TgZ(468,"div",44),t.TgZ(469,"div",7),t.TgZ(470,"label",8),t._uU(471),t.ALo(472,"translate"),t.qZA(),t._UZ(473,"input",64),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(474,"div",46),t.TgZ(475,"div",47),t.TgZ(476,"table",48),t.TgZ(477,"thead"),t.TgZ(478,"tr"),t.TgZ(479,"th"),t._uU(480),t.ALo(481,"translate"),t.qZA(),t.TgZ(482,"th"),t._uU(483),t.ALo(484,"translate"),t.qZA(),t._UZ(485,"th"),t.qZA(),t.qZA(),t.TgZ(486,"tbody"),t.TgZ(487,"tr"),t.TgZ(488,"td"),t.TgZ(489,"ng-select",62),t.NdJ("ngModelChange",function(s){return i.itemBarUOM=s}),t.qZA(),t.qZA(),t.TgZ(490,"td"),t.TgZ(491,"input",65),t.NdJ("blur",function(s){return i.onBarcodechange(s.target.value)})("ngModelChange",function(s){return i.itemBarcode=s}),t.qZA(),t.qZA(),t.TgZ(492,"td"),t.TgZ(493,"button",56),t.NdJ("click",function(){return i.additem_invBarcode()}),t._UZ(494,"i",57),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(495,"thead"),t.TgZ(496,"tr"),t.TgZ(497,"th"),t._uU(498),t.ALo(499,"translate"),t.qZA(),t.TgZ(500,"th"),t._uU(501),t.ALo(502,"translate"),t.qZA(),t._UZ(503,"th",58),t.qZA(),t.qZA(),t.TgZ(504,"tbody"),t.YNc(505,vt,10,2,"tr",59),t.qZA(),t.qZA(),t.TgZ(506,"div",38),t.TgZ(507,"div",39),t.TgZ(508,"input",60),t.NdJ("click",function(){return i.AddBarcode()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(509,"mat-tab",42),t.ALo(510,"translate"),t.TgZ(511,"div",5),t.TgZ(512,"div",6),t.TgZ(513,"h4",43),t._uU(514),t.ALo(515,"translate"),t.qZA(),t.qZA(),t.TgZ(516,"div",6),t.TgZ(517,"div",44),t.TgZ(518,"div",7),t.TgZ(519,"label",8),t._uU(520),t.ALo(521,"translate"),t.qZA(),t._UZ(522,"input",66),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(523,"div",46),t.TgZ(524,"div",47),t.TgZ(525,"table",48),t.TgZ(526,"thead"),t.TgZ(527,"tr"),t.TgZ(528,"th"),t._uU(529),t.ALo(530,"translate"),t.qZA(),t.TgZ(531,"th"),t._uU(532),t.ALo(533,"translate"),t.qZA(),t.TgZ(534,"th"),t._uU(535),t.ALo(536,"translate"),t.qZA(),t._UZ(537,"th"),t.qZA(),t.qZA(),t.TgZ(538,"tbody"),t.TgZ(539,"tr"),t.TgZ(540,"td"),t.TgZ(541,"input",67),t.NdJ("ngModelChange",function(s){return i.noteDates=s}),t.qZA(),t.qZA(),t.TgZ(542,"td"),t.TgZ(543,"input",68),t.NdJ("ngModelChange",function(s){return i.name=s}),t.qZA(),t.qZA(),t.TgZ(544,"td"),t.TgZ(545,"input",68),t.NdJ("ngModelChange",function(s){return i.notes=s}),t.qZA(),t.qZA(),t.TgZ(546,"td"),t.TgZ(547,"button",56),t.NdJ("click",function(){return i.additem_invNotes()}),t._UZ(548,"i",57),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(549,"thead"),t.TgZ(550,"tr"),t.TgZ(551,"th"),t._uU(552),t.ALo(553,"translate"),t.qZA(),t.TgZ(554,"th"),t._uU(555),t.ALo(556,"translate"),t.qZA(),t.TgZ(557,"th"),t._uU(558),t.ALo(559,"translate"),t.qZA(),t._UZ(560,"th",58),t.qZA(),t.qZA(),t.TgZ(561,"tbody"),t.YNc(562,At,12,3,"tr",59),t.qZA(),t.qZA(),t.TgZ(563,"div",38),t.TgZ(564,"div",39),t.TgZ(565,"input",60),t.NdJ("click",function(){return i.AddNotes()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(566,"mat-tab",42),t.ALo(567,"translate"),t.TgZ(568,"div",5),t.TgZ(569,"div",6),t.TgZ(570,"h4",43),t._uU(571),t.ALo(572,"translate"),t.qZA(),t.qZA(),t.TgZ(573,"div",6),t.TgZ(574,"div",44),t.TgZ(575,"div",7),t.TgZ(576,"label",8),t._uU(577),t.ALo(578,"translate"),t.qZA(),t._UZ(579,"input",69),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(580,"div",46),t.TgZ(581,"div",47),t.TgZ(582,"table",48),t.TgZ(583,"thead"),t.TgZ(584,"tr"),t.TgZ(585,"th"),t._uU(586),t.ALo(587,"translate"),t.qZA(),t.TgZ(588,"th"),t._uU(589),t.ALo(590,"translate"),t.qZA(),t.TgZ(591,"th"),t._uU(592),t.ALo(593,"translate"),t.qZA(),t.TgZ(594,"th"),t._uU(595),t.ALo(596,"translate"),t.qZA(),t.TgZ(597,"th"),t._uU(598),t.ALo(599,"translate"),t.qZA(),t.TgZ(600,"th"),t._uU(601),t.ALo(602,"translate"),t.qZA(),t.TgZ(603,"th"),t._uU(604),t.ALo(605,"translate"),t.qZA(),t.TgZ(606,"th"),t._uU(607),t.ALo(608,"translate"),t.qZA(),t.TgZ(609,"th"),t._uU(610),t.ALo(611,"translate"),t.qZA(),t.TgZ(612,"th"),t._uU(613),t.ALo(614,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(615,"tbody"),t.YNc(616,Tt,21,10,"tr",59),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,209,"Create_New_Inventory")," "),t.xp6(6),t.Q6J("formGroup",i.form),t.xp6(2),t.s9C("label",t.lcZ(10,211,"Item_Master")),t.xp6(6),t.Oqu(t.lcZ(16,213,"Item_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(18,215,"Please_Enter")," ",t.lcZ(19,217,"Item_Code"),""),t.Q6J("readonly",i.isReadOnly),t.xp6(6),t.Oqu(t.lcZ(24,219,"HSN_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(26,221,"Please_Enter")," ",t.lcZ(27,223,"HSN_Code"),""),t.xp6(6),t.Oqu(t.lcZ(32,225,"Item_Description")),t.xp6(2),t.hYB("placeholder","",t.lcZ(34,227,"Please_Enter")," ",t.lcZ(35,229,"Item_Description"),""),t.xp6(3),t.Q6J("control",i.form.controls.itemDescription),t.xp6(4),t.hij(" ",t.lcZ(41,231,"Item_Description_Arabic")," "),t.xp6(2),t.hYB("placeholder","",t.lcZ(43,233,"Please_Enter")," ",t.lcZ(44,235,"Item_Description_Arabic"),""),t.xp6(6),t.hij(" ",t.lcZ(49,237,"Short_Name")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(51,239,"Please_Enter"),"  ",t.lcZ(52,241,"Short_Name"),""),t.xp6(6),t.hij(" ",t.lcZ(57,243,"Short_Name_Arabic")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(59,245,"Please_Enter"),"  ",t.lcZ(60,247,"Short_Name_Arabic"),""),t.xp6(6),t.hij(" ",t.lcZ(65,249,"Category")," "),t.xp6(5),t.Q6J("ngIf",i.CategoryCodeList),t.xp6(1),t.Q6J("control",i.form.controls.itemCat),t.xp6(4),t.hij(" ",t.lcZ(75,251,"Sub_Category")," "),t.xp6(5),t.Q6J("ngIf",i.SubCategoryCodeList),t.xp6(1),t.Q6J("control",i.form.controls.itemSubCat),t.xp6(4),t.hij(" ",t.lcZ(85,253,"Class")," "),t.xp6(5),t.Q6J("ngIf",i.ClassCodeList),t.xp6(1),t.Q6J("control",i.form.controls.itemClass),t.xp6(4),t.hij(" ",t.lcZ(95,255,"Sub_Class")," "),t.xp6(5),t.Q6J("ngIf",i.SubClassCodeList),t.xp6(1),t.Q6J("control",i.form.controls.itemSubClass),t.xp6(4),t.hij(" ",t.lcZ(105,257,"Item_Avg_Cost")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(107,259,"Please_Enter"),"  ",t.lcZ(108,261,"Item_Avg_Cost"),""),t.xp6(6),t.hij(" ",t.lcZ(113,263,"Item_Standard_Cost")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(115,265,"Please_Enter"),"  ",t.lcZ(116,267,"Item_Standard_Cost"),""),t.xp6(6),t.hij(" ",t.lcZ(121,269,"Base_Stock_Unit")," "),t.xp6(5),t.Q6J("ngIf",i.UomLIst),t.xp6(1),t.Q6J("control",i.form.controls.itemBaseUnit),t.xp6(4),t.hij(" ",t.lcZ(131,271,"Prime_Vendor")," "),t.xp6(2),t.Q6J("items",i.VenCodeList),t.xp6(4),t.hij(" ",t.lcZ(137,273,"Standard_Price1_MRP")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(139,275,"Please_Enter"),"  ",t.lcZ(140,277,"Standard_Price1_MRP"),""),t.xp6(6),t.hij(" ",t.lcZ(145,279,"Standard_Price_2")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(147,281,"Please_Enter"),"  ",t.lcZ(148,283,"Standard_Price_2"),""),t.xp6(6),t.hij(" ",t.lcZ(153,285,"Standard_Price_3")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(155,287,"Please_Enter"),"  ",t.lcZ(156,289,"Standard_Price_3"),""),t.xp6(6),t.hij(" ",t.lcZ(161,291,"Item_Type")," "),t.xp6(5),t.Q6J("ngIf",i.ItemTypeLIst),t.xp6(1),t.Q6J("control",i.form.controls.itemType),t.xp6(4),t.hij(" ",t.lcZ(171,293,"Item_Tracking")," "),t.xp6(2),t.Q6J("items",i.ItemTrackingList),t.xp6(1),t.Q6J("control",i.form.controls.itemTracking),t.xp6(4),t.hij(" ",t.lcZ(178,295,"Item_Weight")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(180,297,"Please_Enter"),"  ",t.lcZ(181,299,"Item_Weight"),""),t.xp6(6),t.hij(" ",t.lcZ(186,301,"Item_Tax")," "),t.xp6(5),t.Q6J("ngIf",i.TaxCodeList),t.xp6(1),t.Q6J("control",i.form.controls.itemTaxCode),t.xp6(4),t.hij(" ",t.lcZ(196,303,"Item_is_Active")," "),t.xp6(7),t.hij(" ",t.lcZ(203,305,"Allow_Price_Override")," "),t.xp6(7),t.hij(" ",t.lcZ(210,307,"Allow_Discounts")," "),t.xp6(7),t.hij(" ",t.lcZ(217,309,"Allow_Quantity_Override")," "),t.xp6(7),t.hij(" ",t.lcZ(224,311,"Cancel")," "),t.xp6(3),t.s9C("label",t.lcZ(227,313,"Item_Inventory")),t.xp6(5),t.Oqu(t.lcZ(232,315,"Item_Inventory")),t.xp6(6),t.Oqu(t.lcZ(238,317,"Item_Code")),t.xp6(9),t.Oqu(t.lcZ(247,319,"WareHouse")),t.xp6(3),t.Oqu(t.lcZ(250,321,"QtyOH")),t.xp6(3),t.Oqu(t.lcZ(253,323,"qtyOnSalesOrder")),t.xp6(3),t.Oqu(t.lcZ(256,325,"QtyOnPO")),t.xp6(3),t.Oqu(t.lcZ(259,327,"QtyReserved")),t.xp6(3),t.Oqu(t.lcZ(262,329,"ItemAvgCost")),t.xp6(3),t.Oqu(t.lcZ(265,331,"ItemLastPOCost")),t.xp6(3),t.Oqu(t.lcZ(268,333,"ItemLandedCost")),t.xp6(3),t.Oqu(t.lcZ(271,335,"MinQty")),t.xp6(3),t.Oqu(t.lcZ(274,337,"MaxQty")),t.xp6(3),t.Oqu(t.lcZ(277,339,"EOQ")),t.xp6(6),t.Q6J("items",i.warehouseList)("ngModel",i.whCode)("ngModelOptions",t.DdM(467,v)),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(468,v))("ngModel",i.qtyOH),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(469,v))("ngModel",i.qtyOnSalesOrder),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(470,v))("ngModel",i.qtyOnPO),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(471,v))("ngModel",i.qtyReserved),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(472,v))("ngModel",i.invitemAvgCost),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(473,v))("ngModel",i.itemLastPOCost),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(474,v))("ngModel",i.itemLandedCost),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(475,v))("ngModel",i.minQty),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(476,v))("ngModel",i.maxQty),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(477,v))("ngModel",i.eoq),t.xp6(7),t.Oqu(t.lcZ(310,341,"WareHouse")),t.xp6(3),t.Oqu(t.lcZ(313,343,"QtyOH")),t.xp6(3),t.Oqu(t.lcZ(316,345,"qtyOnSalesOrder")),t.xp6(3),t.Oqu(t.lcZ(319,347,"QtyOnPO")),t.xp6(3),t.Oqu(t.lcZ(322,349,"QtyReserved")),t.xp6(3),t.Oqu(t.lcZ(325,351,"ItemAvgCost")),t.xp6(3),t.Oqu(t.lcZ(328,353,"ItemLastPOCost")),t.xp6(3),t.Oqu(t.lcZ(331,355,"ItemLandedCost")),t.xp6(3),t.Oqu(t.lcZ(334,357,"MinQty")),t.xp6(3),t.Oqu(t.lcZ(337,359,"MaxQty")),t.xp6(3),t.Oqu(t.lcZ(340,361,"EOQ")),t.xp6(4),t.Q6J("ngForOf",i.listOfinventory),t.xp6(4),t.s9C("label",t.lcZ(348,363,"Unit_of_Measure")),t.xp6(5),t.Oqu(t.lcZ(353,365,"Unit_of_Measure")),t.xp6(6),t.Oqu(t.lcZ(359,367,"Item_Code")),t.xp6(9),t.Oqu(t.lcZ(368,369,"UOM")),t.xp6(3),t.Oqu(t.lcZ(371,371,"ConvFactor")),t.xp6(3),t.Oqu(t.lcZ(374,373,"UOMPrice1")),t.xp6(3),t.Oqu(t.lcZ(377,375,"UOMPrice2")),t.xp6(3),t.Oqu(t.lcZ(380,377,"UOMPrice3")),t.xp6(3),t.Oqu(t.lcZ(383,379,"UOMDiscPer")),t.xp6(3),t.Oqu(t.lcZ(386,381,"UOMPrice4")),t.xp6(3),t.Oqu(t.lcZ(389,383,"AvgCost")),t.xp6(3),t.Oqu(t.lcZ(392,385,"LastPOCost")),t.xp6(3),t.Oqu(t.lcZ(395,387,"LandedCost")),t.xp6(6),t.Q6J("items",i.UomLIst)("ngModel",i.itemUOM)("ngModelOptions",t.DdM(478,v)),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(479,v))("ngModel",i.itemConvFactor),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(480,v))("ngModel",i.itemUOMPrice1),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(481,v))("ngModel",i.itemUOMPrice2),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(482,v))("ngModel",i.itemUOMPrice3),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(483,v))("ngModel",i.itemUOMDiscPer),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(484,v))("ngModel",i.itemUOMPrice4),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(485,v))("ngModel",i.itemUomAvgCost),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(486,v))("ngModel",i.itemUomLastPOCost),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(487,v))("ngModel",i.itemUomLandedCost),t.xp6(7),t.Oqu(t.lcZ(426,389,"UOM")),t.xp6(3),t.Oqu(t.lcZ(429,391,"ConvFactor")),t.xp6(3),t.Oqu(t.lcZ(432,393,"UOMPrice1")),t.xp6(3),t.Oqu(t.lcZ(435,395,"UOMPrice2")),t.xp6(3),t.Oqu(t.lcZ(438,397,"UOMPrice3")),t.xp6(3),t.Oqu(t.lcZ(441,399,"UOMDiscPer")),t.xp6(3),t.Oqu(t.lcZ(444,401,"UOMPrice4")),t.xp6(3),t.Oqu(t.lcZ(447,403,"AvgCost")),t.xp6(3),t.Oqu(t.lcZ(450,405,"LastPOCost")),t.xp6(3),t.Oqu(t.lcZ(453,407,"LandedCost")),t.xp6(4),t.Q6J("ngForOf",i.listOfUOMinventory),t.xp6(4),t.s9C("label",t.lcZ(461,409,"Item_Barcode")),t.xp6(5),t.Oqu(t.lcZ(466,411,"Item_Barcode")),t.xp6(6),t.Oqu(t.lcZ(472,413,"Item_Code")),t.xp6(9),t.Oqu(t.lcZ(481,415,"Unit")),t.xp6(3),t.Oqu(t.lcZ(484,417,"Barcode")),t.xp6(6),t.Q6J("items",i.UomLIst)("ngModel",i.itemBarUOM)("ngModelOptions",t.DdM(488,v)),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(489,v))("ngModel",i.itemBarcode),t.xp6(7),t.Oqu(t.lcZ(499,419,"Unit")),t.xp6(3),t.Oqu(t.lcZ(502,421,"Barcode")),t.xp6(4),t.Q6J("ngForOf",i.listOfBarcodeinventory),t.xp6(4),t.s9C("label",t.lcZ(510,423,"Item_Notes")),t.xp6(5),t.Oqu(t.lcZ(515,425,"Item_Notes")),t.xp6(6),t.Oqu(t.lcZ(521,427,"Item_Code")),t.xp6(9),t.Oqu(t.lcZ(530,429,"Date")),t.xp6(3),t.Oqu(t.lcZ(533,431,"Name")),t.xp6(3),t.Oqu(t.lcZ(536,433,"Notes")),t.xp6(6),t.Q6J("ngModelOptions",t.DdM(490,v))("ngModel",i.noteDates),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(491,v))("ngModel",i.name),t.xp6(2),t.Q6J("ngModelOptions",t.DdM(492,v))("ngModel",i.notes),t.xp6(7),t.Oqu(t.lcZ(553,435,"Date")),t.xp6(3),t.Oqu(t.lcZ(556,437,"Name")),t.xp6(3),t.Oqu(t.lcZ(559,439,"Notes")),t.xp6(4),t.Q6J("ngForOf",i.listOfNotesinventory),t.xp6(4),t.s9C("label",t.lcZ(567,441,"History")),t.xp6(5),t.Oqu(t.lcZ(572,443,"History")),t.xp6(6),t.Oqu(t.lcZ(578,445,"Item_Code")),t.xp6(9),t.Oqu(t.lcZ(587,447,"WHCode")),t.xp6(3),t.Oqu(t.lcZ(590,449,"TranDate")),t.xp6(3),t.Oqu(t.lcZ(593,451,"TranNumber")),t.xp6(3),t.Oqu(t.lcZ(596,453,"TranUnit")),t.xp6(3),t.Oqu(t.lcZ(599,455,"TranQty")),t.xp6(3),t.Oqu(t.lcZ(602,457,"UnitConvFactor")),t.xp6(3),t.Oqu(t.lcZ(605,459,"TranTotQty")),t.xp6(3),t.Oqu(t.lcZ(608,461,"TranPrice")),t.xp6(3),t.Oqu(t.lcZ(611,463,"ItemAvgCost")),t.xp6(3),t.Oqu(t.lcZ(614,465,"TranRemarks")),t.xp6(3),t.Q6J("ngForOf",i.listOfInvoices))},directives:[a._Y,a.JL,a.sg,K.SP,K.uX,a.Fj,a.nD,a.JJ,a.u,R.s,a.EJ,a.YN,a.Kr,p.O5,F.w9,a.wV,et.Rr,a.On,p.sg],pipes:[O.X$],encapsulation:2}),o})();var ft=g(4041);function Ct(o,r){1&o&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Item_Code")," "))}function It(o,r){if(1&o&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.itemCode)}}function qt(o,r){1&o&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"HSN_Code")," "))}function yt(o,r){if(1&o&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.hsnCode)}}function Ot(o,r){1&o&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Short_Name")," "))}function bt(o,r){if(1&o&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.shortName)}}function Lt(o,r){1&o&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Item_Description")," "))}function Ut(o,r){if(1&o&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.itemDescription)}}function xt(o,r){1&o&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Category")," "))}function Mt(o,r){if(1&o&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.itemCat)}}function St(o,r){1&o&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Item_Avg_Cost")," "))}function Nt(o,r){if(1&o&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.itemAvgCost)}}function kt(o,r){1&o&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Item_Standard_Cost")," "))}function wt(o,r){if(1&o&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.itemStandardCost)}}function Dt(o,r){1&o&&t._UZ(0,"th",46)}function Pt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",47),t.TgZ(1,"a",48),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",49),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"a",50),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().delete(s.id)}),t._UZ(5,"i",51),t.qZA(),t.qZA()}}function Qt(o,r){1&o&&t._UZ(0,"tr",52)}function Rt(o,r){1&o&&t._UZ(0,"tr",53)}let tt=(()=>{class o extends B{constructor(e,i,n,s,c,m,d,l,u,T,f){super(c),this.fb=e,this.http=i,this.router=n,this.apiService=s,this.authService=c,this.utilService=m,this.notifyService=d,this.validationService=l,this.pageService=u,this.dialog=T,this.translate=f,this.displayedColumns=["ItemCode","h_code","shortname","itemdescription","category","itemavgcost","itemstandardcost","Actions"],this.sortingOrder="id desc",this.searchValue="",this.isLoading=!1,this.isReadOnly=!1,this.displayedColumns1=["WareHouse","TranDate","TranType","TranNumber","TranUnit","unitConvFactor","TranTotQty","TranPrice","ItemAvgCost","TranRemarks"],this.VenCodeList=[],this.CategoryCodeList=[],this.SubCategoryCodeList=[],this.ClassCodeList=[],this.SubClassCodeList=[],this.TaxCodeList=[],this.UomLIst=[],this.warehouseList=[],this.ItemTrackingList=[],this.ItemTypeLIst=[],this.CategoryCode="",this.id=0,this.itemcode="",this.listOfInvoices=[],this.itemCode="",this.wHCode="",this.tranDate="",this.tranNumber="",this.tranUnit="",this.tranQty="",this.unitConvFactor="",this.tranTotQty="",this.tranPrice="",this.itemAvgCost="",this.tranRemarks="",this.ItemCodes="",this.sequence=1,this.editsequence=0,this.editInventoryUOMItemsequence=0,this.editBarcodesequence=0,this.listOfinventory=[],this.whCode="",this.qtyOH=0,this.qtyOnSalesOrder=0,this.qtyOnPO=0,this.qtyReserved=0,this.invitemAvgCost=0,this.itemLastPOCost=0,this.itemLandedCost=0,this.minQty=0,this.maxQty=0,this.eoq=0,this.listOfUOMinventory=[],this.itemUOM="",this.itemConvFactor=0,this.itemUOMPrice1=0,this.itemUOMPrice2=0,this.itemUOMPrice3=0,this.itemUOMDiscPer=0,this.itemUOMPrice4=0,this.itemUomAvgCost=0,this.itemUomLastPOCost=0,this.itemUomLandedCost=0,this.listOfBarcodeinventory=[],this.itemBarUOM="",this.itemBarcode="",this.listOfNotesinventory=[],this.noteDates="",this.name="",this.notes=""}ngOnInit(){this.setForm(),this.loadCategoryCode(),this.loadClassCode(),this.loadSubClassCode(),this.loadTaxCode(),this.loadUOMCode(),this.loadWarehouses(),this.loadVenCode(),this.initialLoading(),this.loadType()}loadinventoryHistory(e){null!=e&&this.apiService.getall(`Inventorymanagementlist/InventoryHistory?ItemCodes=${e}`).subscribe(i=>{i&&i.historyList.forEach(s=>{this.listOfInvoices.push({itemCode:s.itemCode,wHCode:s.whCode,tranDate:s.tranDate,tranNumber:s.tranNumber,tranUnit:s.tranUnit,tranQty:s.tranQty,unitConvFactor:s.unitConvFactor,tranTotQty:s.tranTotQty,tranPrice:s.tranPrice,itemAvgCost:s.itemAvgCost,tranRemarks:s.tranRemarks})})})}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}GenerateItemNumber(){this.apiService.getall("Inventorymanagementlist/GenerateItemNumber").subscribe(e=>{e&&this.form.patchValue({itemCode:""+e.itemCode})})}loadVenCode(){this.apiService.getall("PurchaseOrder/GetVendorCodeSelectList").subscribe(e=>{e&&(this.VenCodeList=e)})}loadWarehouses(){this.apiService.getall("warehouse/getSelectWarehouseList").subscribe(e=>{e&&(this.warehouseList=e)})}loadType(){this.apiService.getall("warehouse/GetSelectSysTypeList").subscribe(e=>{e&&(this.ItemTypeLIst=e)})}ontype(e){"INV"==e&&this.apiService.getall(`warehouse/GetSelectTrackingList?Code=${e}`).subscribe(i=>{i&&(this.ItemTrackingList=i)})}loadCategoryCode(){this.apiService.getall("producthierarchy/GetCategorySelectList").subscribe(e=>{e&&(this.CategoryCodeList=e)})}loadTaxCode(){this.apiService.getall("Inventorymanagementlist/GetTaxSelectList").subscribe(e=>{e&&(this.TaxCodeList=e)})}loadClassCode(){this.apiService.getall("Inventorymanagementlist/GetSelectClass").subscribe(e=>{e&&(this.ClassCodeList=e)})}loadSubClassCode(){this.apiService.getall("Inventorymanagementlist/getSelectSubClassList").subscribe(e=>{e&&(this.SubClassCodeList=e)})}loadUOMCode(){this.apiService.getall("Inventorymanagementlist/GetUOMSelectList").subscribe(e=>{e&&(this.UomLIst=e)})}onSubCategory(e){null!=e&&this.apiService.getall(`Inventorymanagementlist/GetSelectSubCategoryList?CategoryCode=${e}`).subscribe(i=>{i&&(this.SubCategoryCodeList=i)})}setForm(){this.form=this.fb.group({"":["",a.kI.required],itemCode:"",hSNCode:"",itemDescription:"",itemDescriptionAr:"",shortName:"",shortNameAr:"",itemCat:["",a.kI.required],itemSubCat:["",a.kI.required],itemClass:["",a.kI.required],itemSubClass:["",a.kI.required],itemAvgCost:"",itemStandardCost:"",itemBaseUnit:["",a.kI.required],itemPrimeVendor:"",itemStandardPrice1:["",a.kI.required],itemStandardPrice2:["",a.kI.required],itemStandardPrice3:["",a.kI.required],itemType:"",itemTracking:"",itemWeight:"",itemTaxCode:["",a.kI.required],isActive:[!1],allowPriceOverride:[!1],allowDiscounts:[!1],allowQuantityOverride:[!1],ItemInventoryCodes:"",ItemUOMCodes:"",ItemBarcodeCodes:"",ItemNotesCodes:"",ItemHistoryCodes:"",authList:this.fb.array([this.createAuthority()]),inventoryList:this.fb.array([this.createInventory()]),barcodeList:this.fb.array([this.createBarcode()]),notesList:this.fb.array([this.createNotes()]),historyList:this.fb.array([this.createHistory()])})}loadUser(e,i,n,s){this.data=new h.by(this.getData()),this.totalItemsCount=2}submit(){alert("submit")}inventorysubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("Inventorymanagementlist",this.form.value).subscribe(e=>{e&&(Object.values(e),this.itemcode=Object.values(e)[0]),this.form.patchValue({ItemInventoryCodes:this.itemcode,ItemUOMCodes:this.itemcode,ItemBarcodeCodes:this.itemcode,ItemNotesCodes:this.itemcode,ItemHistoryCodes:this.itemcode,itemCode:this.itemcode}),this.setInventoryForm(this.itemcode),this.setUOMForm(this.itemcode),this.setBarcodeForm(this.itemcode),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}setUOMForm(e){this.apiService.getall(`Inventorymanagementlist/GetUOMListByID?itemvalue=${e}`).subscribe(i=>{i&&i.authList.forEach(s=>{this.listOfUOMinventory.push({sequence:this.getSequence(),tranNumber:"0",itemUOM:s.itemUOM,itemConvFactor:s.itemConvFactor,itemUOMPrice1:s.itemUOMPrice1,itemUOMPrice2:s.itemUOMPrice2,itemUOMPrice3:s.itemUOMPrice3,itemUOMDiscPer:s.itemUOMDiscPer,itemUOMPrice4:s.itemUOMPrice4,itemUomAvgCost:s.itemUomAvgCost,itemUomLastPOCost:s.itemUomLastPOCost,itemUomLandedCost:s.itemUomLandedCost})})})}editItem(e){this.authList.push(this.createAuthority(e))}createAuthority(e){return this.fb.group(e||{itemUOM:["",a.kI.required],itemConvFactor:["",a.kI.required],itemUOMPrice1:["",a.kI.required],itemUOMPrice2:["",a.kI.required],itemUOMPrice3:["",a.kI.required],itemUOMDiscPer:["",a.kI.required],itemUOMPrice4:["",a.kI.required],itemUomAvgCost:["",a.kI.required],itemUomLastPOCost:["",a.kI.required],itemUomLandedCost:["",a.kI.required]})}get authList(){return this.form.get("authList")}addItem(){this.authList.push(this.createAuthority())}AddUOM(){this.id>0&&(this.form.value.id=this.id),this.form.value.authList=this.listOfUOMinventory,this.apiService.post("Inventorymanagementlist/CreateUomItem",this.form.value).subscribe(e=>{this.setBarcodeForm(this.itemcode),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}removeItem(e){this.authList.removeAt(e)}addItemInventory(){this.inventoryList.push(this.createInventory())}AddInventory(){this.id>0&&(this.form.value.id=this.id),this.form.value.inventoryList=this.listOfinventory,this.apiService.post("Inventorymanagementlist/CreateInventoryItem",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}removeItemInventory(e){this.inventoryList.removeAt(e)}setInventoryForm(e){this.apiService.getall(`Inventorymanagementlist/GetInventoryListByID?itemvalue=${e}`).subscribe(i=>{i&&i.inventoryList.forEach(s=>{this.listOfinventory.push({sequence:this.getSequence(),tranNumber:"0",whCode:s.whCode,qtyOH:s.qtyOH,qtyOnSalesOrder:s.qtyOnSalesOrder,qtyOnPO:s.qtyOnPO,qtyReserved:s.qtyReserved,invitemAvgCost:s.invItemAvgCost,itemLastPOCost:s.itemLastPOCost,itemLandedCost:s.itemLandedCost,minQty:s.minQty,maxQty:s.maxQty,eoq:s.eoq})})})}editInventory(e){this.inventoryList.push(this.createInventory(e))}createInventory(e){return this.fb.group(e||{whCode:["",a.kI.required],qtyOH:["",a.kI.required],qtyOnSalesOrder:["",a.kI.required],qtyOnPO:["",a.kI.required],qtyReserved:["",a.kI.required],invitemAvgCost:["",a.kI.required],itemLastPOCost:["",a.kI.required],itemLandedCost:["",a.kI.required],minQty:["",a.kI.required],maxQty:["",a.kI.required],eoq:["",a.kI.required]})}get inventoryList(){return this.form.get("inventoryList")}addItemBarcode(){this.barcodeList.push(this.createBarcode())}AddBarcode(){this.id>0&&(this.form.value.id=this.id),this.form.value.barcodeList=this.listOfBarcodeinventory,this.apiService.post("Inventorymanagementlist/CreateBarcodeItem",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}removeItemBarcode(e){this.barcodeList.removeAt(e)}editBarcode(e){this.barcodeList.push(this.createBarcode(e))}createBarcode(e){return this.fb.group(e||{itemBarcode:["",a.kI.required],itemUOM:["",a.kI.required]})}get barcodeList(){return this.form.get("barcodeList")}setBarcodeForm(e){this.apiService.getall(`Inventorymanagementlist/GetBarcodeListByID?itemvalue=${e}`).subscribe(i=>{i&&i.barCodeList.forEach(s=>{this.listOfBarcodeinventory.push({sequence:this.getSequence(),tranNumber:"0",itemBarUOM:s.itemBarUOM,itemBarcode:s.itemBarcode})})})}onBarcodechange(e){null!=e&&this.apiService.getall(`Inventorymanagementlist/GetBarcode?Barcode=${e}`).subscribe(i=>{i&&this.notifyService.showError("Duplicate Barcode...")})}addItemNotes(){this.notesList.push(this.createNotes())}AddNotes(){this.id>0&&(this.form.value.id=this.id),this.form.value.notesList=this.listOfNotesinventory,this.apiService.post("Inventorymanagementlist/CreateNotesItem",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}removeItemNotes(e){this.notesList.removeAt(e)}editNotes(e){this.notesList.push(this.createNotes(e))}createNotes(e){return this.fb.group(e||{noteDates:["",a.kI.required],name:["",a.kI.required],notes:["",a.kI.required]})}get notesList(){return this.form.get("notesList")}addItemHistory(){this.historyList.push(this.createHistory())}AddHistory(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("Inventorymanagementlist/CreateItemHistory",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}removeItemHistory(e){this.historyList.removeAt(e)}editHistory(e){this.historyList.push(this.createHistory(e))}createHistory(e){return this.fb.group(e||{whCode:["",a.kI.required],tranDate:["",a.kI.required],tranType:["",a.kI.required],tranNumber:["",a.kI.required],tranUnit:["",a.kI.required],tranQty:["",a.kI.required],unitConvFactor:["",a.kI.required],tranTotQty:["",a.kI.required],tranPrice:["",a.kI.required],itemAvgCost:["",a.kI.required],tranRemarks:["",a.kI.required]})}get historyList(){return this.form.get("historyList")}getData(){return[{ItemCode:"0110101",h_code:"012121011",shortname:"shortname ",itemdescription:"Appearls ",category:"Appearls ",itemavgcost:"$1200 ",itemstandardcost:"$1400 ",id:1},{ItemCode:"0110101",h_code:"012121011",shortname:"shortname ",itemdescription:"Appearls ",category:"Appearls ",itemavgcost:"$1200 ",itemstandardcost:"$1400 ",id:2}]}onSortOrder(e){this.sortingOrder=e.active+" "+e.direction,this.totalItemsCount=0,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,i,n,s){this.isLoading=!0,this.apiService.getPagination("Inventorymanagementlist",this.utilService.getQueryString(e,i,n,s)).subscribe(c=>{this.totalItemsCount=0,this.data=new h.by(c.items),this.totalItemsCount=c.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},c=>this.utilService.ShowApiErrorMessage(c))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}getSequence(){return this.sequence+=this.sequence+1}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,C.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Inventorymanagementlist",e).subscribe(s=>{this.refresh(),this.utilService.OkMessage()})},n=>this.utilService.ShowApiErrorMessage(n))}refresh(){this.searchValue="",this.initialLoading()}closeModel(){this.ngOnInit(),this.listOfNotesinventory=[],this.listOfBarcodeinventory=[],this.listOfUOMinventory=[],this.listOfInvoices=[]}onTextchange(e){null!=e&&this.apiService.getall(`Inventorymanagementlist/GetInventoryItems?ItemCode=${e}`).subscribe(i=>{i&&(this.isReadOnly=!0,this.onSubCategory(i.itemCat),this.form.patchValue({ItemInventoryCodes:i.itemCode,ItemUOMCodes:i.itemCode,ItemBarcodeCodes:i.itemCode,ItemNotesCodes:i.itemCode,ItemHistoryCodes:i.itemCode}),this.form.patchValue(i),this.inventoryList.clear(),i.inventoryList.forEach(l=>{this.editInventory(l)}),this.authList.clear(),i.authList.forEach(l=>{this.editItem(l)}),this.barcodeList.clear(),i.barcodeList.forEach(l=>{this.editBarcode(l)}),this.notesList.clear(),i.notesList.forEach(l=>{this.editNotes(l)}),this.historyList.clear(),i.historyList.forEach(l=>{this.editHistory(l)}),this.id=i.id)})}Close(){this.refresh()}ErrorMessage(){this.notifyService.showError(this.isArabic()?"\u0627\u0645\u0644\u0623 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644":"Cannot Delete The  Item ")}ErrorMesg(){this.notifyService.showError(this.isArabic()?"\u0627\u0645\u0644\u0623 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644":"Duplicate Item ")}isArabic(){return"ar"==this.selectedLanguage()}selectedLanguage(){var e;return null!==(e=localStorage.getItem("language"))&&void 0!==e?e:"en-US"}deleteInventoryItem(e){e.qtyOH>0?this.ErrorMessage():this.removeInventoryList(e.sequence)}removeInventoryList(e){let i=this.listOfinventory.findIndex(n=>n.sequence===e);this.listOfinventory.splice(i,1)}editInventoryItem(e){this.editsequence=e.sequence,this.whCode=e.whCode,this.qtyOH=e.qtyOH,this.qtyOnSalesOrder=e.qtyOnSalesOrder,this.qtyOnPO=e.qtyOnPO,this.qtyReserved=e.qtyReserved,this.invitemAvgCost=e.invitemAvgCost,this.itemLastPOCost=e.itemLastPOCost,this.itemLandedCost=e.itemLandedCost,this.minQty=e.minQty,this.maxQty=e.maxQty,this.eoq=e.eoq}additem_inv(){this.editsequence>0&&(this.removeInventoryList(this.editsequence),this.editsequence=0),this.listOfinventory.push({sequence:this.getSequence(),tranNumber:"0",whCode:this.whCode,qtyOH:this.qtyOH,qtyOnSalesOrder:this.qtyOnSalesOrder,qtyOnPO:this.qtyOnPO,qtyReserved:this.qtyReserved,invitemAvgCost:this.invitemAvgCost,itemLastPOCost:this.itemLastPOCost,itemLandedCost:this.itemLandedCost,minQty:this.minQty,maxQty:this.maxQty,eoq:this.eoq}),this.setToDefault()}setToDefault(){this.whCode="",this.qtyOH=0,this.qtyOnSalesOrder=0,this.qtyOnPO=0,this.qtyReserved=0,this.invitemAvgCost=0,this.itemLastPOCost=0,this.itemLandedCost=0,this.minQty=0,this.maxQty=0,this.eoq=0}deleteInventoryUOMItem(e){this.removeInventoryUOMList(e.sequence)}removeInventoryUOMList(e){let i=this.listOfUOMinventory.findIndex(n=>n.sequence===e);this.listOfUOMinventory.splice(i,1)}editInventoryUOMItem(e){this.editInventoryUOMItemsequence=e.sequence,this.itemUOM=e.itemUOM,this.itemConvFactor=e.itemConvFactor,this.itemUOMPrice1=e.itemUOMPrice1,this.itemUOMPrice2=e.itemUOMPrice2,this.itemUOMPrice3=e.itemUOMPrice3,this.itemUOMDiscPer=e.itemUOMDiscPer,this.itemUOMPrice4=e.itemUOMPrice4,this.itemUomAvgCost=e.itemUomAvgCost,this.itemUomLastPOCost=e.itemUomLastPOCost,this.itemUomLandedCost=e.itemUomLandedCost}additem_invUOM(){this.editInventoryUOMItemsequence>0&&(this.removeInventoryUOMList(this.editInventoryUOMItemsequence),this.editInventoryUOMItemsequence=0);for(let e=0;e<this.listOfUOMinventory.length;e++)if(this.listOfUOMinventory[e].itemUOM==this.itemUOM)return void this.ErrorMesg();this.listOfUOMinventory.push({sequence:this.getSequence(),tranNumber:"0",itemUOM:this.itemUOM,itemConvFactor:this.itemConvFactor,itemUOMPrice1:this.itemUOMPrice1,itemUOMPrice2:this.itemUOMPrice2,itemUOMPrice3:this.itemUOMPrice3,itemUOMDiscPer:this.itemUOMDiscPer,itemUOMPrice4:this.itemUOMPrice4,itemUomAvgCost:this.itemUomAvgCost,itemUomLastPOCost:this.itemUomLastPOCost,itemUomLandedCost:this.itemUomLandedCost}),this.setToDefaultUOM()}setToDefaultUOM(){this.itemUOM="",this.itemConvFactor=0,this.itemUOMPrice1=0,this.itemUOMPrice2=0,this.itemUOMPrice3=0,this.itemUOMDiscPer=0,this.itemUOMPrice4=0,this.itemUomAvgCost=0,this.itemUomLastPOCost=0,this.itemUomLandedCost=0}deleteInventoryBarcodeItem(e){this.removeInventoryBarcodeList(e.sequence)}removeInventoryBarcodeList(e){let i=this.listOfBarcodeinventory.findIndex(n=>n.sequence===e);this.listOfBarcodeinventory.splice(i,1)}editInventoryBarcodeItem(e){this.editBarcodesequence=e.sequence,this.itemBarUOM=e.itemBarUOM,this.itemBarcode=e.itemBarcode}additem_invBarcode(){this.editBarcodesequence>0&&(this.removeInventoryBarcodeList(this.editBarcodesequence),this.editBarcodesequence=0),this.listOfBarcodeinventory.push({sequence:this.getSequence(),tranNumber:"0",itemBarUOM:this.itemBarUOM,itemBarcode:this.itemBarcode}),this.setToDefaultBarcode()}setToDefaultBarcode(){this.itemBarUOM="",this.itemBarcode=""}deleteInventoryNotesItem(e){this.removeInventoryNotesList(e.sequence)}removeInventoryNotesList(e){let i=this.listOfNotesinventory.findIndex(n=>n.sequence===e);this.listOfNotesinventory.splice(i,1)}editInventoryNotesItem(e){this.editsequence=e.sequence,this.noteDates=e.noteDates,this.name=e.name,this.notes=e.notes}additem_invNotes(){this.editsequence>0&&(this.deleteInventoryNotesItem(this.editsequence),this.editsequence=0),this.listOfNotesinventory.push({sequence:this.getSequence(),tranNumber:"0",noteDates:this.noteDates,name:this.name,notes:this.notes}),this.setToDefaultNotes()}setToDefaultNotes(){this.noteDates="",this.name="",this.notes=""}create(){this.openDialogManage(0,_.Oi.create,this.translate.instant("Create_New_Issues"),"",j)}edit(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Issues"),"",j)}view(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Issues"),"",j)}openApprovalDialog(e,i,n,s,c,m,d){let l=this.openApprovalDialog1(this.dialog,d);l.componentInstance.dbops=n,l.componentInstance.modalTitle=s,l.componentInstance.modalBtnTitle=c,l.componentInstance.serviceType=m,l.componentInstance.serviceCode=i,l.componentInstance.branchCode=e,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}openApprovalDialog1(e,i){return e.open(i,{disableClose:!0})}openDialogManage(e=0,i,n="",s="",c,m={module:"00",action:"00act"},d=100){let l=this.utilService.openDialogCongif(this.dialog,c,d);l.componentInstance.dbops=i,l.componentInstance.modalTitle=n,l.componentInstance.id=e,l.componentInstance.moduleFile=m,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(x.eN),t.Y36(q.F0),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(U.g),t.Y36(M.R),t.Y36(S.N),t.Y36(y.uw),t.Y36(O.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-inventorymanagementlist"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,7),t.Gf(Z.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},features:[t.qOj],decls:74,vars:26,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","pb-3"],[1,"col-md-3"],[1,"custom-select","mr-sm-2"],["value",""],["value","TransLocK"],["value","TransPost"],["value","TransVoid"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"col-md-3","col-lg-3","text-right"],["data-toggle","modal","data-target","#scrollable-modal","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[3,"isLoading"],["mat-table","","matSort","","matSortActive","Id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","ItemCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","h_code"],["matColumnDef","shortname"],["matColumnDef","itemdescription"],["matColumnDef","category"],["matColumnDef","itemavgcost"],["matColumnDef","itemstandardcost"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"text-center"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons",3,"click"],[1,"icon-note"],[1,"tableicons",3,"click"],[1,"icon-trash"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",14),t.TgZ(22,"select",15),t.TgZ(23,"option",16),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",17),t._uU(27,"Trans LocK"),t.qZA(),t.TgZ(28,"option",18),t._uU(29,"Trans Post"),t.qZA(),t.TgZ(30,"option",19),t._uU(31,"Trans Void"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",1),t.TgZ(33,"div",20),t.TgZ(34,"h4",21),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.qZA(),t.TgZ(37,"div",22),t.TgZ(38,"a",23),t.NdJ("click",function(){return i.create()}),t._UZ(39,"i",24),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(42,"div",25),t.TgZ(43,"div",26),t._UZ(44,"spinner-loader",27),t.TgZ(45,"table",28),t.NdJ("matSortChange",function(s){return i.onSortOrder(s)}),t.ynx(46,29),t.YNc(47,Ct,3,3,"th",30),t.YNc(48,It,2,1,"td",31),t.BQk(),t.ynx(49,32),t.YNc(50,qt,3,3,"th",30),t.YNc(51,yt,2,1,"td",31),t.BQk(),t.ynx(52,33),t.YNc(53,Ot,3,3,"th",30),t.YNc(54,bt,2,1,"td",31),t.BQk(),t.ynx(55,34),t.YNc(56,Lt,3,3,"th",30),t.YNc(57,Ut,2,1,"td",31),t.BQk(),t.ynx(58,35),t.YNc(59,xt,3,3,"th",30),t.YNc(60,Mt,2,1,"td",31),t.BQk(),t.ynx(61,36),t.YNc(62,St,3,3,"th",30),t.YNc(63,Nt,2,1,"td",31),t.BQk(),t.ynx(64,37),t.YNc(65,kt,3,3,"th",30),t.YNc(66,wt,2,1,"td",31),t.BQk(),t.ynx(67,38),t.YNc(68,Dt,1,0,"th",39),t.YNc(69,Pt,6,0,"td",40),t.BQk(),t.YNc(70,Qt,1,0,"tr",41),t.YNc(71,Rt,1,0,"tr",42),t.qZA(),t.ynx(72),t.TgZ(73,"mat-paginator",43),t.NdJ("page",function(s){return i.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,14,"Inventory_Management_List")," "),t.xp6(6),t.hij("",t.lcZ(11,16,"Inventory_Management")," "),t.xp6(3),t.hij("",t.lcZ(14,18,"Inventory_Management_List")," "),t.xp6(11),t.Oqu(t.lcZ(25,20,"Inventory_Management_List")),t.xp6(11),t.Oqu(t.lcZ(36,22,"Inventory_Management_List")),t.xp6(5),t.Oqu(t.lcZ(41,24,"Add_New_Inventory")),t.xp6(4),t.Q6J("isLoading",i.isLoading),t.xp6(1),t.Q6J("dataSource",i.data),t.xp6(25),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("length",i.totalItemsCount)("pageSize",i.pageService.pageCount)("pageSizeOptions",i.pageService.selectItemsPerPage))},directives:[a.YN,a.Kr,ft.r,h.BZ,Z.YE,h.w1,h.fO,h.Dz,h.as,h.nj,A.NW,h.ge,Z.nU,h.ev,h.XQ,h.Gk],pipes:[O.X$],encapsulation:2}),o})(),J=(()=>{class o{constructor(e,i,n,s,c,m){this.fb=e,this.apiService=i,this.authService=n,this.utilService=s,this.dialogRef=c,this.notifyService=m,this.id=0}ngOnInit(){this.setForm()}setForm(){this.form=this.fb.group({appRemarks:["",a.kI.required],trantype:["Invoice",a.kI.required],tranSource:["AR",a.kI.required]})}submit(){this.form.valid&&this.id>0&&(this.form.value.id=this.id,this.apiService.post("InventoryTransaction/InvApprovals",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0)},e=>{this.utilService.ShowApiErrorMessage(e)}))}reset(){this.form.reset()}closeModel(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(y.so),t.Y36(U.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-inventoryuserapproval"]],decls:22,vars:14,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-1",3,"formGroup","ngSubmit"],[1,"row","rowm0"],[1,"col-md-4","col-lg-4"],[1,"form-group"],[1,"mr-sm-2"],["type","text","formControlName","appRemarks",1,"form-control",3,"placeholder"],[3,"control"],[1,"row"],[1,"col-lg-12","col-md-12","text-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return i.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"label",5),t._uU(10," appRemarks "),t.qZA(),t._UZ(11,"input",6),t.ALo(12,"translate"),t._UZ(13,"validation-message",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",8),t.TgZ(15,"div",9),t.TgZ(16,"button",10),t.NdJ("click",function(){return i.closeModel()}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._uU(19," \xa0\xa0 "),t._UZ(20,"input",11),t.ALo(21,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,6,"Create_New_Sales_Invoice")," "),t.xp6(4),t.Q6J("formGroup",i.form),t.xp6(6),t.s9C("placeholder",t.lcZ(12,8,"AppRemarks")),t.xp6(2),t.Q6J("control",i.form.controls.appRemarks),t.xp6(4),t.hij(" ",t.lcZ(18,10,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(21,12,"Save")))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,R.s],pipes:[O.X$],encapsulation:2}),o})();var Y=g(5291);function Bt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",39),t._uU(12),t.qZA(),t.TgZ(13,"td",39),t._uU(14),t.qZA(),t.TgZ(15,"td",29),t.TgZ(16,"i",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editInvoiceItem(s)}),t.qZA(),t._uU(17," \xa0 "),t.TgZ(18,"i",41),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteInvoiceItem(s)}),t.qZA(),t._uU(19," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.tranItemCode),t.xp6(2),t.Oqu(e.tranItemName),t.xp6(2),t.Oqu(e.tranItemQty),t.xp6(2),t.Oqu(e.tranItemUnit),t.xp6(2),t.Oqu(e.tranUOMFactor),t.xp6(2),t.Oqu(e.tranItemCost),t.xp6(2),t.Oqu(e.tranTotCost)}}const k=function(){return{standalone:!0}};let E=(()=>{class o{constructor(e,i,n,s,c,m,d,l,u,T,f){this.fb=e,this.http=i,this.router=n,this.apiService=s,this.authService=c,this.utilService=m,this.notifyService=d,this.validationService=l,this.pageService=u,this.dialog=T,this.dialogRef=f,this.displayedColumns=["tranNumber","tranDate","tranDocNumber","tranReference","tranLocation","tranToLocation","tranTotalCost","Actions"],this.searchValue="",this.sortingOrder="id desc",this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.itemTaxPer="",this.TranUserList=[],this.tranLocationList=[],this.tranToLocationList=[],this.tranInvAccountList=[],this.tranInvAdjAccountList=[],this.jVNumList=[],this.ItemCodeList=[],this.BarcodeList=[],this.UOMList=[],this.tranBranchList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc="",this.discPer="",this.DiscPerc=0,this.discAmt=0,this.tranItemUnitCode="",this.taxAmount=0,this.itemTracking=0,this.itemTax=""}ngOnInit(){this.initialLoading(),this.setForm(),this.Users(),this.FromLocation(),this.Branch(),this.Accounts(),this.AdjAccounts(),this.JVNumber(),this.loadItemCode(),this.loadbarCode(),this.loadUnitCode(),this.form.patchValue({trantype:"3"}),this.id>0&&this.edit()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadUser(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadUser(e,i,n,s){this.data=new h.by(this.getData()),this.totalItemsCount=2}Users(){this.apiService.getall("InventoryAdjustments/GetAdjustmentsUserSelectList").subscribe(e=>{e&&(this.TranUserList=e)})}FromLocation(){this.apiService.getall("InventoryAdjustments/GetAdjustmentToLocationList").subscribe(e=>{e&&(this.tranLocationList=e)})}ToLocation(){this.apiService.getall("InventoryAdjustments/GetAdjustmentToLocationList").subscribe(e=>{e&&(this.tranToLocationList=e)})}Branch(){this.apiService.getall("InventoryReceipts/GetReceiptsBranchList").subscribe(e=>{e&&(this.tranBranchList=e)})}Accounts(){this.apiService.getall("InventoryAdjustments/GetAdjustmentAccountSelectList").subscribe(e=>{e&&(this.tranInvAccountList=e)})}AdjAccounts(){this.apiService.getall("InventoryAdjustments/GetAdjustmentAccountSelectList").subscribe(e=>{e&&(this.tranInvAdjAccountList=e)})}JVNumber(){this.apiService.getall("InventoryAdjustments/GetAdjustmentJVNumberSelectList").subscribe(e=>{e&&(this.jVNumList=e)})}loadItemCode(){this.apiService.getall("InventoryAdjustments/GetAdjustmentItemCodeList").subscribe(e=>{e&&(this.ItemCodeList=e)})}loadbarCode(){this.apiService.getall("InventoryAdjustments/GetAdjustmentBarCodeSelectList").subscribe(e=>{e&&(this.BarcodeList=e)})}loadUnitCode(){this.apiService.getall("InventoryAdjustments/GetAdjustmentUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadUomdata(e){let n=this.tranItemCode+"_"+e.value;n?this.apiService.getall(`InventoryAdjustments/AdjustmentProductUomtPriceItem/${n}`).subscribe(s=>{s&&(this.tranUOMFactor=s.tranItemUomFactor,this.tranItemCost=s.itemAvgcost)}):(this.unitType="",this.description="")}getData(){return[]}setForm(){this.form=this.fb.group({tranDate:["",a.kI.required],tranLocation:["",a.kI.required],tranBranch:["",a.kI.required],tranDocNumber:["",a.kI.required],tranReference:["",a.kI.required],tranRemarks:["",a.kI.required]})}create(){this.setForm(),this.refresh()}loadList(e,i,n,s,c=""){}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("InventoryAdjustments",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,C.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("InventoryAdjustments",e).subscribe(s=>{this.refresh(),this.utilService.OkMessage()})},n=>this.utilService.ShowApiErrorMessage(n))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(s=>{s&&this.form.controls.taxIdNumber.setValue(s.vatNumber)})}closeModel(){this.dialogRef.close()}submit(){if(this.id>0&&(this.form.value.id=this.id),this.listOfInvoices.length<=0)return void this.utilService.FillUpFields();if(this.listOfInvoices.length<2)return void this.notifyService.showError("line items should be 2 or more than 2 ");const e=this.listOfInvoices.find(n=>n.tranTotCost<0),i=this.listOfInvoices.find(n=>n.tranTotCost>0);e&&i?(this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.form.value.trantype="3",this.apiService.post("InventoryAdjustments/AdjustmentCreateIssuesRequest",this.form.value).subscribe(n=>{this.reset(),this.utilService.OkMessage(),this.dialogRef.close(!0)},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})):this.notifyService.showError("any of the line items total cost should be + and -")}reset(){this.listOfInvoices=[],this.grandTotalStr="0",this.form.reset()}edit(){this.apiService.get("InventoryAdjustments",this.id).subscribe(e=>{e&&(this.isReadOnly=!0,this.form.patchValue(e),this.form.patchValue({jVNum:`${e.jvNum}`}),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),this.form.patchValue({trantype:"3"}),this.form.value.itemList=this.listOfInvoices,this.listOfInvoices=[],e.itemList.forEach(n=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:n.tranItemCode,tranBarcode:n.tranBarcode,tranItemName:n.tranItemName,tranItemName2:n.tranItemName2,tranItemQty:n.tranItemQty,tranItemUnit:n.tranItemUnit,tranUOMFactor:n.tranUOMFactor,tranItemCost:n.tranItemCost,tranTotCost:n.tranTotCost,itemAttribute1:n.itemAttribute1,itemAttribute2:n.itemAttribute2,remarks:n.remarks,iNVAcc:n.invAcc,iNVADJAcc:n.invAdjAcc})}),this.setGrandTotal(),this.id=e.id)})}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}view(e){this.openDialogManage(e,_.Oi.create,"","",$,{action:"",module:""},100)}openDialogManage(e=0,i,n="",s="",c,m={module:"00",action:"00act"},d=100){let l=this.utilService.openDialogCongif(this.dialog,c,d);l.componentInstance.dbops=i,l.componentInstance.modalTitle=n,l.componentInstance.id=e,l.componentInstance.moduleFile=m,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(n=>{n&&(this.UOMList=n)})}loadVendata(e){let i=e.value;i&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${i}`).subscribe(n=>{n&&(this.form.patchValue({vendCode:`${n.vendName}`}),this.form.patchValue({paymentID:`${n.poTermsCode}`}))})}loadTaxdata(e){let i=e.value;i&&(this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${i}`).subscribe(n=>{n&&(this.itemTaxPer=n[0].itemTaxperc,this.tranItemName=n[0].shortName)}),this.loadUomList(i))}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let i=e.value;i?this.apiService.getall(`product/productUnitPriceItem/${i}`).subscribe(s=>{s&&(this.product=s.nameEN,this.unitType=s.unitTypeEN,this.description=s.description,this.price=s.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){0!=this.tranTotCost&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnit:this.tranItemUnit,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let i=this.listOfInvoices.findIndex(n=>n.sequence===e);this.listOfInvoices.splice(i,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnit=e.tranItemUnit,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandInvoiceTotal+=e.tranTotCost}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(3),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(3),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(3)}setToDefault(){this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0}calculate(){var n=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(n.toString())}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=this.tranTotCost,i=parseFloat((parseFloat(this.discPer)/100).toFixed(2)),n=parseFloat((e*i/100).toFixed(2));this.discAmt=parseFloat(n.toString());var s=this.tranItemCost;this.tranTotCost=s-s*i,this.tranTotCost=this.tranTotCost*this.tranItemQty,i=parseFloat(this.itemTaxPer),this.taxAmount=0==this.form.value.taxInclusive?parseFloat((this.tranTotCost*i/100).toFixed(2)):parseFloat((this.tranTotCost*i/(i+100)).toFixed(4))}}calculatetaxAmount(){var e=this.tranTotCost,i=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*i/100).toFixed(2))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(x.eN),t.Y36(q.F0),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(U.g),t.Y36(M.R),t.Y36(S.N),t.Y36(y.uw),t.Y36(y.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdateadjacement"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,7),t.Gf(Z.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:152,vars:141,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],[1,"mr-sm-2"],["type","date","formControlName","tranDate",1,"form-control",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","tranBranch",3,"items"],[3,"control"],["bindLabel","text","bindValue","value","formControlName","tranLocation",3,"items"],["type","text","formControlName","tranDocNumber",1,"form-control",3,"placeholder"],["type","text","formControlName","tranReference",1,"form-control",3,"placeholder"],[1,"col-md-6","col-lg-6"],["formControlName","tranRemarks",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["width","18%"],["width","8%"],["width","11%"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"click"],[1,"icon-plus"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","5","rowspan","5"],[1,"text-right","bgcolor_bottom"],[1,"bgcolor_bottom"],[1,"row"],[1,"col-lg-12","col-md-12","text-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[1,"text-right"],[1,"icon-note","cpointer",3,"click"],[1,"icon-trash","cpointer",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return i.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"div",3),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t.TgZ(14,"label",9),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",10),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.TgZ(20,"div",7),t.TgZ(21,"div",8),t.TgZ(22,"label",9),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"ng-select",11),t._UZ(26,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(27,"div",7),t.TgZ(28,"div",8),t.TgZ(29,"label",9),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"ng-select",13),t._UZ(33,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(34,"div",7),t.TgZ(35,"div",8),t.TgZ(36,"label",9),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"input",14),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.TgZ(42,"div",7),t.TgZ(43,"div",8),t.TgZ(44,"label",9),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"input",15),t.ALo(48,"translate"),t.ALo(49,"translate"),t.qZA(),t.qZA(),t.TgZ(50,"div",16),t.TgZ(51,"div",8),t.TgZ(52,"label",9),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"textarea",17),t.ALo(56,"translate"),t.ALo(57,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",18),t.TgZ(59,"table",19),t.TgZ(60,"thead"),t.TgZ(61,"tr"),t.TgZ(62,"th",20),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"th",20),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"th"),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"th",21),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"th",22),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"th"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t._UZ(83,"th"),t._UZ(84,"th"),t.qZA(),t.qZA(),t.TgZ(85,"tbody"),t.TgZ(86,"tr"),t.TgZ(87,"td"),t.TgZ(88,"ng-select",23),t.NdJ("ngModelChange",function(s){return i.tranItemCode=s})("change",function(s){return i.loadTaxdata(s)}),t.qZA(),t.qZA(),t.TgZ(89,"td"),t.TgZ(90,"input",24),t.NdJ("ngModelChange",function(s){return i.tranItemName=s}),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.TgZ(92,"td"),t.TgZ(93,"ng-select",23),t.NdJ("ngModelChange",function(s){return i.tranItemUnit=s})("change",function(s){return i.loadUomdata(s)}),t.qZA(),t.qZA(),t.TgZ(94,"td"),t.TgZ(95,"input",24),t.NdJ("ngModelChange",function(s){return i.tranUOMFactor=s}),t.ALo(96,"translate"),t.qZA(),t.qZA(),t.TgZ(97,"td"),t.TgZ(98,"input",25),t.NdJ("ngModelChange",function(s){return i.tranItemCost=s}),t.ALo(99,"translate"),t.qZA(),t.qZA(),t.TgZ(100,"td"),t.TgZ(101,"input",26),t.NdJ("ngModelChange",function(s){return i.tranItemQty=s})("keyup",function(){return i.calculate()}),t.ALo(102,"translate"),t.qZA(),t.qZA(),t.TgZ(103,"td"),t.TgZ(104,"input",24),t.NdJ("ngModelChange",function(s){return i.tranTotCost=s}),t.ALo(105,"translate"),t.qZA(),t.qZA(),t.TgZ(106,"td"),t.TgZ(107,"button",27),t.NdJ("click",function(){return i.addInvoice()}),t._UZ(108,"i",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(109,"thead"),t.TgZ(110,"tr"),t.TgZ(111,"th"),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"th"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"th"),t._uU(118),t.ALo(119,"translate"),t.qZA(),t.TgZ(120,"th"),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"th"),t._uU(124),t.ALo(125,"translate"),t.qZA(),t.TgZ(126,"th"),t._uU(127),t.ALo(128,"translate"),t.qZA(),t.TgZ(129,"th"),t._uU(130),t.ALo(131,"translate"),t.qZA(),t._UZ(132,"th",29),t.qZA(),t.qZA(),t.TgZ(133,"tbody"),t.YNc(134,Bt,20,7,"tr",30),t.qZA(),t.TgZ(135,"tfoot"),t.TgZ(136,"tr",31),t._UZ(137,"td",32),t.TgZ(138,"td",33),t._uU(139),t.ALo(140,"translate"),t.qZA(),t.TgZ(141,"td",33),t._uU(142),t.qZA(),t._UZ(143,"td",34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(144,"div",35),t.TgZ(145,"div",36),t.TgZ(146,"button",37),t.NdJ("click",function(){return i.closeModel()}),t._uU(147),t.ALo(148,"translate"),t.qZA(),t._uU(149," \xa0\xa0 "),t._UZ(150,"input",38),t.ALo(151,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,60,"Create_New_Adjustments")," "),t.xp6(4),t.Q6J("formGroup",i.form),t.xp6(10),t.Oqu(t.lcZ(16,62,"Trans_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(18,64,"Select")," ",t.lcZ(19,66,"Trans_Date"),""),t.xp6(6),t.hij(" ",t.lcZ(24,68,"Branch")," "),t.xp6(2),t.Q6J("items",i.tranBranchList),t.xp6(1),t.Q6J("control",i.form.controls.tranBranch),t.xp6(4),t.hij(" ",t.lcZ(31,70,"WareHouse")," "),t.xp6(2),t.Q6J("items",i.tranLocationList),t.xp6(1),t.Q6J("control",i.form.controls.tranLocation),t.xp6(4),t.hij(" ",t.lcZ(38,72,"Document_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(40,74,"Please_Enter"),"  ",t.lcZ(41,76,"Document_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(46,78,"Reference_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(48,80,"Please_Enter"),"  ",t.lcZ(49,82,"Reference_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(54,84,"Remarks")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(56,86,"Please_Enter"),"  ",t.lcZ(57,88,"Remarks"),""),t.xp6(8),t.Oqu(t.lcZ(64,90,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(67,92,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(70,94,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(73,96,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(76,98,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(79,100,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(82,102,"Tot Cost")),t.xp6(7),t.Q6J("items",i.ItemCodeList)("ngModel",i.tranItemCode)("ngModelOptions",t.DdM(134,k)),t.xp6(2),t.s9C("placeholder",t.lcZ(91,104,"tranItemName")),t.Q6J("ngModel",i.tranItemName)("ngModelOptions",t.DdM(135,k)),t.xp6(3),t.Q6J("items",i.UOMList)("ngModel",i.tranItemUnit)("ngModelOptions",t.DdM(136,k)),t.xp6(2),t.s9C("placeholder",t.lcZ(96,106,"tranUOMFactor")),t.Q6J("ngModel",i.tranUOMFactor)("ngModelOptions",t.DdM(137,k)),t.xp6(3),t.s9C("placeholder",t.lcZ(99,108,"tranItemCost")),t.Q6J("ngModel",i.tranItemCost)("ngModelOptions",t.DdM(138,k)),t.xp6(3),t.s9C("placeholder",t.lcZ(102,110,"Quantity")),t.Q6J("ngModel",i.tranItemQty)("ngModelOptions",t.DdM(139,k)),t.xp6(3),t.s9C("placeholder",t.lcZ(105,112,"tranTotCost")),t.Q6J("ngModel",i.tranTotCost)("ngModelOptions",t.DdM(140,k)),t.xp6(8),t.Oqu(t.lcZ(113,114,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(116,116,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(119,118,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(122,120,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(125,122,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(128,124,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(131,126,"Tot Cost")),t.xp6(4),t.Q6J("ngForOf",i.listOfInvoices),t.xp6(5),t.Oqu(t.lcZ(140,128,"Invoice_Total")),t.xp6(3),t.Oqu(i.grandInvoiceTotalStr),t.xp6(5),t.hij(" ",t.lcZ(148,130,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(151,132,"Save")))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,F.w9,R.s,a.On,p.sg],pipes:[O.X$],encapsulation:2}),o})();var V=g(8590);function Ft(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TranNumber")," "))}function Jt(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranNumber)}}function Yt(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Date")," "))}function Vt(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.tranDate,"dd/MM/yyyy"))}}function jt(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Doc_Num")," "))}function Et(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranDocNumber)}}function $t(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reference")," "))}function Ht(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranReference)}}function Gt(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Location")," "))}function zt(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranLocation)}}function Wt(o,r){1&o&&(t.TgZ(0,"th",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Xt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",44),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t.ALo(1,"translate"),t._UZ(2,"i",48),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.s9C("id","edit_"+e.id),t.s9C("matTooltip",t.lcZ(1,2,"Edit_Item"))}}function Kt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t.ALo(1,"translate"),t._UZ(2,"i",50),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Delete_Item"))}function te(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approvePurchaseOrder(n)}),t.ALo(1,"translate"),t._UZ(2,"i",53),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Approve_Item"))}function ee(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().Issuessettelment(n.id)}),t.ALo(1,"translate"),t._UZ(2,"i",54),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Posting_Item"))}function ie(o,r){if(1&o&&(t.ynx(0),t.YNc(1,te,3,3,"a",51),t._uU(2," \xa0 "),t.YNc(3,ee,3,3,"a",51),t._uU(4," \xa0 "),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.approvedUser&&!e.isSettled),t.xp6(2),t.Q6J("ngIf",e.canSettle&&!e.isSettled)}}function ne(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",41),t.YNc(1,Xt,3,4,"a",43),t._uU(2," \xa0 "),t.TgZ(3,"a",44),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().view(s.id)}),t.ALo(4,"translate"),t._UZ(5,"i",45),t.qZA(),t._uU(6," \xa0 "),t.YNc(7,Kt,3,3,"a",46),t.YNc(8,ie,5,2,"ng-container",47),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved&&!e.isSettled),t.xp6(2),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(4,5,"View_Details")),t.xp6(4),t.Q6J("ngIf",!e.isSettled&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.hasAuthority)}}function se(o,r){1&o&&t._UZ(0,"tr",55)}function oe(o,r){1&o&&t._UZ(0,"tr",56)}let $=(()=>{class o extends B{constructor(e,i,n,s,c,m,d,l,u,T,f){super(c),this.fb=e,this.http=i,this.router=n,this.apiService=s,this.authService=c,this.utilService=m,this.notifyService=d,this.validationService=l,this.pageService=u,this.dialog=T,this.translate=f,this.displayedColumns=["tranNumber","tranDate","tranDocNumber","tranReference","tranLocation","Actions"],this.searchValue="",this.sortingOrder="id desc",this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.TranUserList=[],this.tranLocationList=[],this.tranToLocationList=[],this.tranInvAccountList=[],this.tranInvAdjAccountList=[],this.jVNumList=[],this.ItemCodeList=[],this.BarcodeList=[],this.UOMList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc=""}ngOnInit(){this.initialLoading(),this.form.patchValue({trantype:"3"})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}getData(){return[]}create(){this.openDialogManage(0,_.Oi.create,this.translate.instant("Create_New_Issues"),"",E)}edit(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Adjustments"),"",E)}view(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Adjustments"),"",E)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,i,n,s,c=""){this.isLoading=!0,this.apiService.getPagination("InventoryAdjustments",this.utilService.getQueryString(e,i,n,s)).subscribe(m=>{this.totalItemsCount=0,this.data=new h.by(m.items),this.totalItemsCount=m.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},m=>this.utilService.ShowApiErrorMessage(m))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,C.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("InventoryAdjustments",e).subscribe(s=>{this.refresh(),this.utilService.OkMessage()})},n=>this.utilService.ShowApiErrorMessage(n))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(s=>{s&&this.form.controls.taxIdNumber.setValue(s.vatNumber)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}closeModel(){this.refresh()}setToDefault(){this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc=""}reset(){this.listOfInvoices=[],this.grandTotalStr="0",this.form.reset()}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}approve(e){this.openDialogManage(e,_.Oi.create,"","",J,{action:"",module:""},50)}approvePurchaseOrder(e){this.openApprovalDialog(e.tranBranch,e.tranNumber,_.Oi.create,"Issues","Save","ADJS",Y.$)}openApprovalDialog(e,i,n,s,c,m,d){let l=this.openApprovalDialog1(this.dialog,d);l.componentInstance.dbops=n,l.componentInstance.modalTitle=s,l.componentInstance.modalBtnTitle=c,l.componentInstance.serviceType=m,l.componentInstance.serviceCode=i,l.componentInstance.branchCode=e,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}openApprovalDialog1(e,i){return e.open(i,{disableClose:!0})}Issuessettelment(e){e>0&&this.apiService.getall(`InventoryAdjustments/AdjustmentSettelementList/${e}`).subscribe(i=>{i&&(this.utilService.OkMessage(),this.refresh())})}openDialogManage(e=0,i,n="",s="",c,m={module:"00",action:"00act"},d=100){let l=this.utilService.openDialogCongif(this.dialog,c,d);l.componentInstance.dbops=i,l.componentInstance.modalTitle=n,l.componentInstance.id=e,l.componentInstance.moduleFile=m,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(x.eN),t.Y36(q.F0),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(U.g),t.Y36(M.R),t.Y36(S.N),t.Y36(y.uw),t.Y36(O.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-adjustments"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,7),t.Gf(Z.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},features:[t.qOj],decls:67,vars:25,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","pb-3"],[1,"col-md-3"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],["value","TransLocK"],["value","TransPost"],["value","TransVoid"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"col-md-3","col-lg-3","text-right"],["data-toggle","modal","data-target","#scrollable-modal","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","Id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","tranNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tranDate"],["matColumnDef","tranDocNumber"],["matColumnDef","tranReference"],["matColumnDef","tranLocation"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["class","tableicons pcursor","data-toggle","modal","data-target","#scrollable-modal",3,"id","matTooltip","click",4,"ngIf"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"id","matTooltip","click"],[1,"icon-list"],["class","tableicons",3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],[1,"icon-note"],[1,"tableicons",3,"matTooltip","click"],[1,"icon-trash"],["class","tableicons pcursor",3,"matTooltip","click",4,"ngIf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-arrow-up-circle"],[1,"icon-action-undo"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",14),t.TgZ(22,"select",15),t.NdJ("change",function(s){return i.loadApprovals(s)}),t.TgZ(23,"option",16),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",17),t._uU(27,"Trans LocK"),t.qZA(),t.TgZ(28,"option",18),t._uU(29,"Trans Post"),t.qZA(),t.TgZ(30,"option",19),t._uU(31,"Trans Void"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",1),t.TgZ(33,"div",20),t.TgZ(34,"h4",21),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.qZA(),t.TgZ(37,"div",22),t.TgZ(38,"a",23),t.NdJ("click",function(){return i.create()}),t._UZ(39,"i",24),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(42,"div",25),t.TgZ(43,"div",26),t.TgZ(44,"table",27),t.NdJ("matSortChange",function(s){return i.onSortOrder(s)}),t.ynx(45,28),t.YNc(46,Ft,3,3,"th",29),t.YNc(47,Jt,2,1,"td",30),t.BQk(),t.ynx(48,31),t.YNc(49,Yt,3,3,"th",29),t.YNc(50,Vt,3,4,"td",30),t.BQk(),t.ynx(51,32),t.YNc(52,jt,3,3,"th",29),t.YNc(53,Et,2,1,"td",30),t.BQk(),t.ynx(54,33),t.YNc(55,$t,3,3,"th",29),t.YNc(56,Ht,2,1,"td",30),t.BQk(),t.ynx(57,34),t.YNc(58,Gt,3,3,"th",29),t.YNc(59,zt,2,1,"td",30),t.BQk(),t.ynx(60,35),t.YNc(61,Wt,3,3,"th",36),t.YNc(62,ne,9,7,"td",30),t.BQk(),t.YNc(63,se,1,0,"tr",37),t.YNc(64,oe,1,0,"tr",38),t.qZA(),t.ynx(65),t.TgZ(66,"mat-paginator",39),t.NdJ("page",function(s){return i.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,13,"Inventory_Adjustments")," "),t.xp6(6),t.hij("",t.lcZ(11,15,"Inventory_Adjustments")," "),t.xp6(3),t.hij("",t.lcZ(14,17,"Inventory_Adjustments")," "),t.xp6(11),t.Oqu(t.lcZ(25,19,"Adjustments_List")),t.xp6(11),t.Oqu(t.lcZ(36,21,"Adjustments_List")),t.xp6(5),t.Oqu(t.lcZ(41,23,"Add_New_Adjustments")),t.xp6(4),t.Q6J("dataSource",i.data),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("length",i.totalItemsCount)("pageSize",i.pageService.pageCount)("pageSizeOptions",i.pageService.selectItemsPerPage))},directives:[a.YN,a.Kr,h.BZ,Z.YE,h.w1,h.fO,h.Dz,h.as,h.nj,A.NW,h.ge,Z.nU,h.ev,p.O5,V.gM,h.XQ,h.Gk],pipes:[O.X$,p.uU],encapsulation:2}),o})();function ae(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",39),t._uU(12),t.qZA(),t.TgZ(13,"td",39),t._uU(14),t.qZA(),t.TgZ(15,"td",29),t.TgZ(16,"i",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editInvoiceItem(s)}),t.qZA(),t._uU(17," \xa0 "),t.TgZ(18,"i",41),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteInvoiceItem(s)}),t.qZA(),t._uU(19," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.tranItemCode),t.xp6(2),t.Oqu(e.tranItemName),t.xp6(2),t.Oqu(e.tranItemQty),t.xp6(2),t.Oqu(e.tranItemUnitCode),t.xp6(2),t.Oqu(e.tranUOMFactor),t.xp6(2),t.Oqu(e.tranItemCost),t.xp6(2),t.Oqu(e.tranTotCost)}}const w=function(){return{standalone:!0}};let H=(()=>{class o{constructor(e,i,n,s,c,m,d,l,u,T,f){this.fb=e,this.http=i,this.router=n,this.apiService=s,this.authService=c,this.utilService=m,this.notifyService=d,this.validationService=l,this.pageService=u,this.dialog=T,this.dialogRef=f,this.displayedColumns=["tranNumber","tranDate","tranDocNumber","tranReference","tranLocation","tranToLocation","tranTotalCost","Actions"],this.searchValue="",this.sortingOrder="id desc",this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.itemTaxPer="",this.TranUserList=[],this.tranLocationList=[],this.tranToLocationList=[],this.tranInvAccountList=[],this.tranInvAdjAccountList=[],this.jVNumList=[],this.ItemCodeList=[],this.BarcodeList=[],this.UOMList=[],this.tranBranchList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc="",this.discPer="",this.DiscPerc=0,this.discAmt=0,this.tranItemUnitCode="",this.taxAmount=0,this.itemTracking=0,this.itemTax=""}ngOnInit(){this.initialLoading(),this.setForm(),this.Users(),this.FromLocation(),this.Branch(),this.Accounts(),this.AdjAccounts(),this.JVNumber(),this.loadItemCode(),this.loadbarCode(),this.loadUnitCode(),this.form.patchValue({trantype:"3"}),this.id>0&&this.edit()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadUser(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadUser(e,i,n,s){this.data=new h.by(this.getData()),this.totalItemsCount=2}Users(){this.apiService.getall("InventoryReceipts/GetReceiptsUserSelectList").subscribe(e=>{e&&(this.TranUserList=e)})}FromLocation(){this.apiService.getall("InventoryReceipts/GetReceiptsToLocationList").subscribe(e=>{e&&(this.tranLocationList=e)})}Branch(){this.apiService.getall("InventoryReceipts/GetReceiptsBranchList").subscribe(e=>{e&&(this.tranBranchList=e)})}Accounts(){this.apiService.getall("InventoryReceipts/GetReceiptsAccountSelectList").subscribe(e=>{e&&(this.tranInvAccountList=e)})}AdjAccounts(){this.apiService.getall("InventoryReceipts/GetReceiptsAccountSelectList").subscribe(e=>{e&&(this.tranInvAdjAccountList=e)})}JVNumber(){this.apiService.getall("InventoryReceipts/GetReceiptsJVNumberSelectList").subscribe(e=>{e&&(this.jVNumList=e)})}loadItemCode(){this.apiService.getall("InventoryReceipts/GetReceiptsItemCodeList").subscribe(e=>{e&&(this.ItemCodeList=e)})}loadbarCode(){this.apiService.getall("InventoryReceipts/GetReceiptsBarCodeSelectList").subscribe(e=>{e&&(this.BarcodeList=e)})}loadUnitCode(){this.apiService.getall("InventoryReceipts/GetReceiptsUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}getData(){return[]}setForm(){this.form=this.fb.group({tranDate:["",a.kI.required],tranLocation:["",a.kI.required],tranBranch:["",a.kI.required],tranDocNumber:["",a.kI.required],tranReference:["",a.kI.required],tranRemarks:["",a.kI.required]})}create(){this.setForm(),this.refresh()}loadList(e,i,n,s,c=""){this.isLoading=!0,this.apiService.getPagination("InventoryReceipts",this.utilService.getQueryString(e,i,n,s)).subscribe(m=>{this.totalItemsCount=0,this.data=new h.by(m.items),this.totalItemsCount=m.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,this.isLoading=!1},m=>this.utilService.ShowApiErrorMessage(m))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("InventoryReceipts",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,C.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("InventoryReceipts",e).subscribe(s=>{this.refresh(),this.utilService.OkMessage()})},n=>this.utilService.ShowApiErrorMessage(n))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(s=>{s&&this.form.controls.taxIdNumber.setValue(s.vatNumber)})}closeModel(){this.dialogRef.close()}submit(){this.id>0&&(this.form.value.id=this.id),this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.form.value.trantype="3",this.grandTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost}),this.form.value.tranTotalCost=this.grandTotal,this.apiService.post("InventoryReceipts/ReceiptsCreateIssuesRequest",this.form.value).subscribe(e=>{this.reset(),this.dialogRef.close(!0),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}reset(){this.listOfInvoices=[],this.grandTotalStr="0",this.form.reset()}edit(){this.apiService.get("InventoryReceipts",this.id).subscribe(e=>{e&&(this.isReadOnly=!0,this.form.patchValue(e),this.form.patchValue({jVNum:`${e.jvNum}`}),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),this.form.patchValue({trantype:"3"}),this.form.value.itemList=this.listOfInvoices,this.listOfInvoices=[],e.itemList.forEach(n=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:n.tranItemCode,tranBarcode:n.tranBarcode,tranItemName:n.tranItemName,tranItemName2:n.tranItemName2,tranItemQty:n.tranItemQty,tranItemUnit:n.tranItemUnit,tranUOMFactor:n.tranUOMFactor,tranItemCost:n.tranItemCost,tranTotCost:n.tranTotCost,itemAttribute1:n.itemAttribute1,itemAttribute2:n.itemAttribute2,remarks:n.remarks,iNVAcc:n.invAcc,iNVADJAcc:n.invAdjAcc})}),this.setGrandTotal(),this.id=e.id)})}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}view(e){this.openDialogManage(e,_.Oi.create,"","",G,{action:"",module:""},100)}openDialogManage(e=0,i,n="",s="",c,m={module:"00",action:"00act"},d=100){let l=this.utilService.openDialogCongif(this.dialog,c,d);l.componentInstance.dbops=i,l.componentInstance.modalTitle=n,l.componentInstance.id=e,l.componentInstance.moduleFile=m,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}loadUomdata(e){let n=this.tranItemCode+"_"+e.value;n?this.apiService.getall(`PurchaseOrder/ProductUomtPriceItem/${n}`).subscribe(s=>{s&&(this.tranUOMFactor=s.tranItemUomFactor,this.tranItemCost=s.itemAvgcost)}):(this.unitType="",this.description="")}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(n=>{n&&(this.UOMList=n)})}loadVendata(e){let i=e.value;i&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${i}`).subscribe(n=>{n&&(this.form.patchValue({vendCode:`${n.vendName}`}),this.form.patchValue({paymentID:`${n.poTermsCode}`}))})}loadTaxdata(e){let i=e.value;i&&(this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${i}`).subscribe(n=>{n&&(this.itemTaxPer=n[0].itemTaxperc,this.tranItemName=n[0].shortName)}),this.loadUomList(i))}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let i=e.value;i?this.apiService.getall(`product/productUnitPriceItem/${i}`).subscribe(s=>{s&&(this.product=s.nameEN,this.unitType=s.unitTypeEN,this.description=s.description,this.price=s.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.tranTotCost>0&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnit:this.tranItemUnit,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let i=this.listOfInvoices.findIndex(n=>n.sequence===e);this.listOfInvoices.splice(i,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnit=e.tranItemUnit,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandInvoiceTotal+=e.tranTotCost}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(3),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(3),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(3)}setToDefault(){this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0}calculate(){var n=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(n.toString())}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=this.tranTotCost,i=parseFloat((parseFloat(this.discPer)/100).toFixed(2)),n=parseFloat((e*i/100).toFixed(2));this.discAmt=parseFloat(n.toString());var s=this.tranItemCost;this.tranTotCost=s-s*i,this.tranTotCost=this.tranTotCost*this.tranItemQty,i=parseFloat(this.itemTaxPer),this.taxAmount=0==this.form.value.taxInclusive?parseFloat((this.tranTotCost*i/100).toFixed(2)):parseFloat((this.tranTotCost*i/(i+100)).toFixed(4))}}calculatetaxAmount(){var e=this.tranTotCost,i=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*i/100).toFixed(2))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(x.eN),t.Y36(q.F0),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(U.g),t.Y36(M.R),t.Y36(S.N),t.Y36(y.uw),t.Y36(y.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdatereceipts"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,7),t.Gf(Z.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:154,vars:144,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],[1,"mr-sm-2"],["type","date","formControlName","tranDate",1,"form-control",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","tranBranch",3,"items"],[3,"control"],["bindLabel","text","bindValue","value","formControlName","tranLocation",3,"items"],["type","text","formControlName","tranDocNumber",1,"form-control",3,"placeholder"],["type","text","formControlName","tranReference",1,"form-control",3,"placeholder"],[1,"col-md-6","col-lg-6"],["formControlName","tranRemarks",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["width","18%"],["width","8%"],["width","11%"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"click"],[1,"icon-plus"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","5","rowspan","5"],[1,"text-right","bgcolor_bottom"],[1,"bgcolor_bottom"],[1,"row"],[1,"col-lg-12","col-md-12","text-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[1,"text-right"],[1,"icon-note","cpointer",3,"click"],[1,"icon-trash","cpointer",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return i.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"div",3),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t.TgZ(14,"label",9),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",10),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.TgZ(20,"div",7),t.TgZ(21,"div",8),t.TgZ(22,"label",9),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"ng-select",11),t._UZ(26,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(27,"div",7),t.TgZ(28,"div",8),t.TgZ(29,"label",9),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"ng-select",13),t._UZ(33,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(34,"div",7),t.TgZ(35,"div",8),t.TgZ(36,"label",9),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"input",14),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.TgZ(42,"div",7),t.TgZ(43,"div",8),t.TgZ(44,"label",9),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"input",15),t.ALo(48,"translate"),t.ALo(49,"translate"),t.qZA(),t.qZA(),t.TgZ(50,"div",16),t.TgZ(51,"div",8),t.TgZ(52,"label",9),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"textarea",17),t.ALo(56,"translate"),t.ALo(57,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",18),t.TgZ(59,"table",19),t.TgZ(60,"thead"),t.TgZ(61,"tr"),t.TgZ(62,"th",20),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"th",20),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"th"),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"th",21),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"th",22),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"th"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"th"),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._UZ(86,"th"),t.qZA(),t.qZA(),t.TgZ(87,"tbody"),t.TgZ(88,"tr"),t.TgZ(89,"td"),t.TgZ(90,"ng-select",23),t.NdJ("ngModelChange",function(s){return i.tranItemCode=s})("change",function(s){return i.loadTaxdata(s)}),t.qZA(),t.qZA(),t.TgZ(91,"td"),t.TgZ(92,"input",24),t.NdJ("ngModelChange",function(s){return i.tranItemName=s}),t.ALo(93,"translate"),t.qZA(),t.qZA(),t.TgZ(94,"td"),t.TgZ(95,"ng-select",23),t.NdJ("ngModelChange",function(s){return i.tranItemUnit=s})("change",function(s){return i.loadUomdata(s)}),t.qZA(),t.qZA(),t.TgZ(96,"td"),t.TgZ(97,"input",24),t.NdJ("ngModelChange",function(s){return i.tranUOMFactor=s}),t.ALo(98,"translate"),t.qZA(),t.qZA(),t.TgZ(99,"td"),t.TgZ(100,"input",25),t.NdJ("ngModelChange",function(s){return i.tranItemCost=s}),t.ALo(101,"translate"),t.qZA(),t.qZA(),t.TgZ(102,"td"),t.TgZ(103,"input",26),t.NdJ("ngModelChange",function(s){return i.tranItemQty=s})("keyup",function(){return i.calculate()}),t.ALo(104,"translate"),t.qZA(),t.qZA(),t.TgZ(105,"td"),t.TgZ(106,"input",24),t.NdJ("ngModelChange",function(s){return i.tranTotCost=s}),t.ALo(107,"translate"),t.qZA(),t.qZA(),t.TgZ(108,"td"),t.TgZ(109,"button",27),t.NdJ("click",function(){return i.addInvoice()}),t._UZ(110,"i",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(111,"thead"),t.TgZ(112,"tr"),t.TgZ(113,"th"),t._uU(114),t.ALo(115,"translate"),t.qZA(),t.TgZ(116,"th"),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.TgZ(119,"th"),t._uU(120),t.ALo(121,"translate"),t.qZA(),t.TgZ(122,"th"),t._uU(123),t.ALo(124,"translate"),t.qZA(),t.TgZ(125,"th"),t._uU(126),t.ALo(127,"translate"),t.qZA(),t.TgZ(128,"th"),t._uU(129),t.ALo(130,"translate"),t.qZA(),t.TgZ(131,"th"),t._uU(132),t.ALo(133,"translate"),t.qZA(),t._UZ(134,"th",29),t.qZA(),t.qZA(),t.TgZ(135,"tbody"),t.YNc(136,ae,20,7,"tr",30),t.qZA(),t.TgZ(137,"tfoot"),t.TgZ(138,"tr",31),t._UZ(139,"td",32),t.TgZ(140,"td",33),t._uU(141),t.ALo(142,"translate"),t.qZA(),t.TgZ(143,"td",33),t._uU(144),t.qZA(),t._UZ(145,"td",34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(146,"div",35),t.TgZ(147,"div",36),t.TgZ(148,"button",37),t.NdJ("click",function(){return i.closeModel()}),t._uU(149),t.ALo(150,"translate"),t.qZA(),t._uU(151," \xa0\xa0 "),t._UZ(152,"input",38),t.ALo(153,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,61,"Create_New_Receipts")," "),t.xp6(4),t.Q6J("formGroup",i.form),t.xp6(10),t.Oqu(t.lcZ(16,63,"Trans_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(18,65,"Select")," ",t.lcZ(19,67,"Trans_Date"),""),t.xp6(6),t.hij(" ",t.lcZ(24,69,"Branch")," "),t.xp6(2),t.Q6J("items",i.tranBranchList),t.xp6(1),t.Q6J("control",i.form.controls.tranBranch),t.xp6(4),t.hij(" ",t.lcZ(31,71,"WareHouse")," "),t.xp6(2),t.Q6J("items",i.tranLocationList),t.xp6(1),t.Q6J("control",i.form.controls.tranLocation),t.xp6(4),t.hij(" ",t.lcZ(38,73,"Document_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(40,75,"Please_Enter"),"  ",t.lcZ(41,77,"Document_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(46,79,"Reference_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(48,81,"Please_Enter"),"  ",t.lcZ(49,83,"Reference_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(54,85,"Remarks")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(56,87,"Please_Enter"),"  ",t.lcZ(57,89,"Remarks"),""),t.xp6(8),t.Oqu(t.lcZ(64,91,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(67,93,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(70,95,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(73,97,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(76,99,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(79,101,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(82,103,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(85,105,"Disc Per")),t.xp6(6),t.Q6J("items",i.ItemCodeList)("ngModel",i.tranItemCode)("ngModelOptions",t.DdM(137,w)),t.xp6(2),t.s9C("placeholder",t.lcZ(93,107,"tranItemName")),t.Q6J("ngModel",i.tranItemName)("ngModelOptions",t.DdM(138,w)),t.xp6(3),t.Q6J("items",i.UOMList)("ngModel",i.tranItemUnit)("ngModelOptions",t.DdM(139,w)),t.xp6(2),t.s9C("placeholder",t.lcZ(98,109,"tranUOMFactor")),t.Q6J("ngModel",i.tranUOMFactor)("ngModelOptions",t.DdM(140,w)),t.xp6(3),t.s9C("placeholder",t.lcZ(101,111,"tranItemCost")),t.Q6J("ngModel",i.tranItemCost)("ngModelOptions",t.DdM(141,w)),t.xp6(3),t.s9C("placeholder",t.lcZ(104,113,"Quantity")),t.Q6J("ngModel",i.tranItemQty)("ngModelOptions",t.DdM(142,w)),t.xp6(3),t.s9C("placeholder",t.lcZ(107,115,"tranTotCost")),t.Q6J("ngModel",i.tranTotCost)("ngModelOptions",t.DdM(143,w)),t.xp6(8),t.Oqu(t.lcZ(115,117,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(118,119,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(121,121,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(124,123,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(127,125,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(130,127,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(133,129,"Tot Cost")),t.xp6(4),t.Q6J("ngForOf",i.listOfInvoices),t.xp6(5),t.Oqu(t.lcZ(142,131,"Invoice_Total")),t.xp6(3),t.Oqu(i.grandInvoiceTotalStr),t.xp6(5),t.hij(" ",t.lcZ(150,133,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(153,135,"Save")))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,F.w9,R.s,a.On,p.sg],pipes:[O.X$],encapsulation:2}),o})();function re(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TranNumber")," "))}function le(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranNumber)}}function ce(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Date")," "))}function de(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.tranDate,"dd/MM/yyyy"))}}function me(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Doc_Num")," "))}function he(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranDocNumber)}}function ue(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reference")," "))}function pe(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranReference)}}function ge(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Location")," "))}function _e(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranLocation)}}function Ze(o,r){1&o&&(t.TgZ(0,"th",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function ve(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",44),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t.ALo(1,"translate"),t._UZ(2,"i",48),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.s9C("id","edit_"+e.id),t.s9C("matTooltip",t.lcZ(1,2,"Edit_Item"))}}function Ae(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",50),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"Delete_Item")))}function Te(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approvePurchaseOrder(n)}),t.ALo(1,"translate"),t._UZ(2,"i",53),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Approve_Item"))}function fe(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().Receiptsettelment(n.id)}),t.ALo(1,"translate"),t._UZ(2,"i",54),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Posting_Item"))}function Ce(o,r){if(1&o&&(t.ynx(0),t.YNc(1,Te,3,3,"a",51),t._uU(2," \xa0 "),t.YNc(3,fe,3,3,"a",51),t._uU(4," \xa0 "),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.approvedUser&&!e.isSettled),t.xp6(2),t.Q6J("ngIf",e.canSettle&&!e.isSettled)}}function Ie(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",41),t.YNc(1,ve,3,4,"a",43),t._uU(2," \xa0 "),t.TgZ(3,"a",44),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().view(s.id)}),t.ALo(4,"translate"),t._UZ(5,"i",45),t.qZA(),t._uU(6," \xa0 "),t.YNc(7,Ae,3,3,"a",46),t.YNc(8,Ce,5,2,"ng-container",47),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved&&!e.isSettled),t.xp6(2),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(4,5,"View_Details")),t.xp6(4),t.Q6J("ngIf",!e.isSettled&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.hasAuthority)}}function qe(o,r){1&o&&t._UZ(0,"tr",55)}function ye(o,r){1&o&&t._UZ(0,"tr",56)}let G=(()=>{class o extends B{constructor(e,i,n,s,c,m,d,l,u,T,f){super(c),this.fb=e,this.http=i,this.router=n,this.apiService=s,this.authService=c,this.utilService=m,this.notifyService=d,this.validationService=l,this.pageService=u,this.dialog=T,this.translate=f,this.displayedColumns=["tranNumber","tranDate","tranDocNumber","tranReference","tranLocation","Actions"],this.searchValue="",this.sortingOrder="id desc",this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.TranUserList=[],this.tranLocationList=[],this.tranToLocationList=[],this.tranInvAccountList=[],this.tranInvAdjAccountList=[],this.jVNumList=[],this.ItemCodeList=[],this.BarcodeList=[],this.UOMList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc=""}ngOnInit(){this.initialLoading(),this.setForm(),this.Users(),this.FromLocation(),this.ToLocation(),this.Accounts(),this.AdjAccounts(),this.JVNumber(),this.loadItemCode(),this.loadbarCode(),this.loadUnitCode(),this.form.patchValue({trantype:"3"})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}loadUser(e,i,n,s){this.data=new h.by(this.getData()),this.totalItemsCount=2}Users(){this.apiService.getall("InventoryReceipts/GetReceiptsUserSelectList").subscribe(e=>{e&&(this.TranUserList=e)})}FromLocation(){this.apiService.getall("InventoryReceipts/GetReceiptsToLocationList").subscribe(e=>{e&&(this.tranLocationList=e)})}ToLocation(){this.apiService.getall("InventoryReceipts/GetReceiptsToLocationList").subscribe(e=>{e&&(this.tranToLocationList=e)})}Accounts(){this.apiService.getall("InventoryReceipts/GetReceiptsAccountSelectList").subscribe(e=>{e&&(this.tranInvAccountList=e)})}AdjAccounts(){this.apiService.getall("InventoryReceipts/GetReceiptsAccountSelectList").subscribe(e=>{e&&(this.tranInvAdjAccountList=e)})}JVNumber(){this.apiService.getall("InventoryReceipts/GetReceiptsJVNumberSelectList").subscribe(e=>{e&&(this.jVNumList=e)})}loadItemCode(){this.apiService.getall("InventoryReceipts/GetReceiptsItemCodeList").subscribe(e=>{e&&(this.ItemCodeList=e)})}loadbarCode(){this.apiService.getall("InventoryReceipts/GetReceiptsBarCodeSelectList").subscribe(e=>{e&&(this.BarcodeList=e)})}loadUnitCode(){this.apiService.getall("InventoryReceipts/GetReceiptsUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadUomdata(e){let n=this.tranItemCode+"_"+e.value;n?this.apiService.getall(`InventoryReceipts/ReceiptsProductUomtPriceItem/${n}`).subscribe(s=>{s&&(this.tranUOMFactor=s.tranItemUomFactor,this.tranItemCost=s.itemAvgcost)}):(this.unitType="",this.description="")}getData(){return[]}setForm(){this.form=this.fb.group({tranDate:["",a.kI.required],tranUser:["",a.kI.required],tranLocation:["",a.kI.required],tranToLocation:["",a.kI.required],tranDocNumber:["",a.kI.required],tranReference:["",a.kI.required],trantype:["",a.kI.required],tranRemarks:["",a.kI.required],tranInvAccount:["",a.kI.required],tranInvAdjAccount:["",a.kI.required],jVNum:["",a.kI.required]})}create(){this.openDialogManage(0,_.Oi.create,this.translate.instant("Create_New_Receipts"),"",H)}edit(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Receipts"),"",H)}view(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Receipts"),"",H)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,i,n,s,c=""){this.isLoading=!0,this.apiService.getPagination("InventoryReceipts",this.utilService.getQueryString(e,i,n,s)).subscribe(m=>{this.totalItemsCount=0,this.data=new h.by(m.items),this.totalItemsCount=m.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},m=>this.utilService.ShowApiErrorMessage(m))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("InventoryReceipts",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,C.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("InventoryReceipts",e).subscribe(s=>{this.refresh(),this.utilService.OkMessage()})},n=>this.utilService.ShowApiErrorMessage(n))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(s=>{s&&this.form.controls.taxIdNumber.setValue(s.vatNumber)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let i=e.value;i?this.apiService.getall(`product/productUnitPriceItem/${i}`).subscribe(s=>{s&&(this.product=s.nameEN,this.unitType=s.unitTypeEN,this.description=s.description,this.price=s.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.tranTotCost>0&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranBarcode:this.tranBarcode,tranItemName:this.tranItemName,tranItemName2:this.tranItemName2,tranItemQty:this.tranItemQty,tranItemUnit:this.tranItemUnit,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,itemAttribute1:this.itemAttribute1,itemAttribute2:this.itemAttribute2,remarks:this.remarks,iNVAcc:this.iNVAcc,iNVADJAcc:this.iNVADJAcc}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let i=this.listOfInvoices.findIndex(n=>n.sequence===e);this.listOfInvoices.splice(i,1)}editInvoiceItem(e){this.tranItemCode=e.tranItemCode,this.tranBarcode=e.tranBarcode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnit=e.tranItemUnit,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.itemAttribute1=e.itemAttribute1,this.itemAttribute2=e.itemAttribute2,this.remarks=e.remarks,this.iNVAcc=e.iNVAcc,this.iNVADJAcc=e.iNVADJAcc}setGrandTotal(){this.grandTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost}),this.grandTotalStr=this.grandTotal.toString()}closeModel(){this.refresh()}setToDefault(){this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc=""}calculate(){var n=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(n.toString())}submit(){this.id>0&&(this.form.value.id=this.id),this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.apiService.post("InventoryReceipts/ReceiptsCreateIssuesRequest",this.form.value).subscribe(e=>{this.reset(),this.utilService.OkMessage(),this.closeModel()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}reset(){this.listOfInvoices=[],this.grandTotalStr="0",this.form.reset()}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}approve(e){this.openDialogManage(e,_.Oi.create,"","",J,{action:"",module:""},50)}approvePurchaseOrder(e){this.openApprovalDialog(e.tranBranch,e.tranNumber,_.Oi.create,"Receipts","Save","RECP",Y.$)}openApprovalDialog(e,i,n,s,c,m,d){let l=this.openApprovalDialog1(this.dialog,d);l.componentInstance.dbops=n,l.componentInstance.modalTitle=s,l.componentInstance.modalBtnTitle=c,l.componentInstance.serviceType=m,l.componentInstance.serviceCode=i,l.componentInstance.branchCode=e,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}openApprovalDialog1(e,i){return e.open(i,{disableClose:!0})}Receiptsettelment(e){e>0&&this.apiService.getall(`InventoryReceipts/ReceiptsSettelementList/${e}`).subscribe(i=>{i&&(this.utilService.OkMessage(),this.refresh())})}openDialogManage(e=0,i,n="",s="",c,m={module:"00",action:"00act"},d=100){let l=this.utilService.openDialogCongif(this.dialog,c,d);l.componentInstance.dbops=i,l.componentInstance.modalTitle=n,l.componentInstance.id=e,l.componentInstance.moduleFile=m,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(x.eN),t.Y36(q.F0),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(U.g),t.Y36(M.R),t.Y36(S.N),t.Y36(y.uw),t.Y36(O.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-receipts"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,7),t.Gf(Z.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},features:[t.qOj],decls:67,vars:25,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","pb-3"],[1,"col-md-3"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],["value","TransLocK"],["value","TransPost"],["value","TransVoid"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"col-md-3","col-lg-3","text-right"],["data-toggle","modal","data-target","#scrollable-modal","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","Id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","tranNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tranDate"],["matColumnDef","tranDocNumber"],["matColumnDef","tranReference"],["matColumnDef","tranLocation"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["class","tableicons pcursor","data-toggle","modal","data-target","#scrollable-modal",3,"id","matTooltip","click",4,"ngIf"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"id","matTooltip","click"],[1,"icon-list"],["class","tableicons",3,"click",4,"ngIf"],[4,"ngIf"],[1,"icon-note"],[1,"tableicons",3,"click"],[1,"icon-trash",3,"matTooltip"],["class","tableicons pcursor",3,"matTooltip","click",4,"ngIf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-arrow-up-circle"],[1,"icon-action-undo"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",14),t.TgZ(22,"select",15),t.NdJ("change",function(s){return i.loadApprovals(s)}),t.TgZ(23,"option",16),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",17),t._uU(27,"Trans LocK"),t.qZA(),t.TgZ(28,"option",18),t._uU(29,"Trans Post"),t.qZA(),t.TgZ(30,"option",19),t._uU(31,"Trans Void"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",1),t.TgZ(33,"div",20),t.TgZ(34,"h4",21),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.qZA(),t.TgZ(37,"div",22),t.TgZ(38,"a",23),t.NdJ("click",function(){return i.create()}),t._UZ(39,"i",24),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(42,"div",25),t.TgZ(43,"div",26),t.TgZ(44,"table",27),t.NdJ("matSortChange",function(s){return i.onSortOrder(s)}),t.ynx(45,28),t.YNc(46,re,3,3,"th",29),t.YNc(47,le,2,1,"td",30),t.BQk(),t.ynx(48,31),t.YNc(49,ce,3,3,"th",29),t.YNc(50,de,3,4,"td",30),t.BQk(),t.ynx(51,32),t.YNc(52,me,3,3,"th",29),t.YNc(53,he,2,1,"td",30),t.BQk(),t.ynx(54,33),t.YNc(55,ue,3,3,"th",29),t.YNc(56,pe,2,1,"td",30),t.BQk(),t.ynx(57,34),t.YNc(58,ge,3,3,"th",29),t.YNc(59,_e,2,1,"td",30),t.BQk(),t.ynx(60,35),t.YNc(61,Ze,3,3,"th",36),t.YNc(62,Ie,9,7,"td",30),t.BQk(),t.YNc(63,qe,1,0,"tr",37),t.YNc(64,ye,1,0,"tr",38),t.qZA(),t.ynx(65),t.TgZ(66,"mat-paginator",39),t.NdJ("page",function(s){return i.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,13,"Inventory_Receipts")," "),t.xp6(6),t.hij("",t.lcZ(11,15,"Inventory_Receipts")," "),t.xp6(3),t.hij("",t.lcZ(14,17,"Inventory_Receipts")," "),t.xp6(11),t.Oqu(t.lcZ(25,19,"Receipts_List")),t.xp6(11),t.Oqu(t.lcZ(36,21,"Receipts_List")),t.xp6(5),t.Oqu(t.lcZ(41,23,"Add_New_Receipts")),t.xp6(4),t.Q6J("dataSource",i.data),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("length",i.totalItemsCount)("pageSize",i.pageService.pageCount)("pageSizeOptions",i.pageService.selectItemsPerPage))},directives:[a.YN,a.Kr,h.BZ,Z.YE,h.w1,h.fO,h.Dz,h.as,h.nj,A.NW,h.ge,Z.nU,h.ev,p.O5,V.gM,h.XQ,h.Gk],pipes:[O.X$,p.uU],encapsulation:2}),o})();function Oe(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",39),t._uU(12),t.qZA(),t.TgZ(13,"td",39),t._uU(14),t.qZA(),t.TgZ(15,"td",29),t.TgZ(16,"i",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editInvoiceItem(s)}),t.qZA(),t._uU(17," \xa0 "),t.TgZ(18,"i",41),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteInvoiceItem(s)}),t.qZA(),t._uU(19," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.tranItemCode),t.xp6(2),t.Oqu(e.tranItemName),t.xp6(2),t.Oqu(e.tranItemQty),t.xp6(2),t.Oqu(e.tranItemUnit),t.xp6(2),t.Oqu(e.tranUOMFactor),t.xp6(2),t.Oqu(e.tranItemCost),t.xp6(2),t.Oqu(e.tranTotCost)}}const D=function(){return{standalone:!0}};let z=(()=>{class o{constructor(e,i,n,s,c,m,d,l,u,T,f){this.fb=e,this.http=i,this.router=n,this.apiService=s,this.authService=c,this.utilService=m,this.notifyService=d,this.validationService=l,this.pageService=u,this.dialog=T,this.dialogRef=f,this.displayedColumns=["tranNumber","tranDate","tranDocNumber","tranReference","tranLocation","tranToLocation","tranTotalCost","Actions"],this.searchValue="",this.sortingOrder="id desc",this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.itemTaxPer="",this.TranUserList=[],this.tranLocationList=[],this.tranToLocationList=[],this.tranInvAccountList=[],this.tranInvAdjAccountList=[],this.jVNumList=[],this.ItemCodeList=[],this.BarcodeList=[],this.UOMList=[],this.tranBranchList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc="",this.discPer="",this.DiscPerc=0,this.discAmt=0,this.tranItemUnitCode="",this.taxAmount=0,this.itemTracking=0,this.itemTax=""}ngOnInit(){this.initialLoading(),this.setForm(),this.Users(),this.FromLocation(),this.Branch(),this.Accounts(),this.AdjAccounts(),this.JVNumber(),this.loadItemCode(),this.loadbarCode(),this.loadUnitCode(),this.form.patchValue({trantype:"3"}),this.id>0&&this.edit()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadUser(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadUser(e,i,n,s){this.data=new h.by(this.getData()),this.totalItemsCount=2}Users(){this.apiService.getall("InventoryTransaction/GetUserSelectList").subscribe(e=>{e&&(this.TranUserList=e)})}FromLocation(){this.apiService.getall("InventoryTransaction/GetToLocationList").subscribe(e=>{e&&(this.tranLocationList=e)})}Branch(){this.apiService.getall("InventoryReceipts/GetReceiptsBranchList").subscribe(e=>{e&&(this.tranBranchList=e)})}Accounts(){this.apiService.getall("InventoryTransaction/GetAccountSelectList").subscribe(e=>{e&&(this.tranInvAccountList=e)})}AdjAccounts(){this.apiService.getall("InventoryTransaction/GetAccountSelectList").subscribe(e=>{e&&(this.tranInvAdjAccountList=e)})}JVNumber(){this.apiService.getall("InventoryTransaction/GetJVNumberSelectList").subscribe(e=>{e&&(this.jVNumList=e)})}loadItemCode(){this.apiService.getall("InventoryTransaction/GetItemCodeList").subscribe(e=>{e&&(this.ItemCodeList=e)})}loadbarCode(){this.apiService.getall("InventoryTransaction/GetBarCodeSelectList").subscribe(e=>{e&&(this.BarcodeList=e)})}loadUnitCode(){this.apiService.getall("InventoryTransaction/GetUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}getData(){return[]}setForm(){this.form=this.fb.group({tranDate:["",a.kI.required],tranLocation:["",a.kI.required],tranBranch:["",a.kI.required],tranDocNumber:["",a.kI.required],tranReference:["",a.kI.required],tranRemarks:["",a.kI.required]})}create(){this.setForm(),this.refresh()}loadList(e,i,n,s,c=""){this.isLoading=!0,this.apiService.getPagination("InventoryTransaction",this.utilService.getQueryString(e,i,n,s)).subscribe(m=>{this.totalItemsCount=0,this.data=new h.by(m.items),this.totalItemsCount=m.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,this.isLoading=!1},m=>this.utilService.ShowApiErrorMessage(m))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.grandTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost}),this.form.value.tranTotalCost=this.grandTotal,this.apiService.post("InventoryTransaction",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,C.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("InventoryTransaction",e).subscribe(s=>{this.refresh(),this.utilService.OkMessage()})},n=>this.utilService.ShowApiErrorMessage(n))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(s=>{s&&this.form.controls.taxIdNumber.setValue(s.vatNumber)})}closeModel(){this.dialogRef.close()}submit(){this.id>0&&(this.form.value.id=this.id),this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.form.value.trantype="3",this.grandTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost}),this.form.value.tranTotalCost=this.grandTotal,this.apiService.post("InventoryTransaction/CreateIssuesRequest",this.form.value).subscribe(e=>{this.reset(),this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}reset(){this.listOfInvoices=[],this.grandTotalStr="0",this.form.reset()}edit(){this.apiService.get("InventoryTransaction",this.id).subscribe(e=>{e&&(this.isReadOnly=!0,this.form.patchValue(e),this.form.patchValue({jVNum:`${e.jvNum}`}),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),this.form.patchValue({trantype:"3"}),this.form.value.itemList=this.listOfInvoices,this.listOfInvoices=[],e.itemList.forEach(n=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:n.tranItemCode,tranBarcode:n.tranBarcode,tranItemName:n.tranItemName,tranItemName2:n.tranItemName2,tranItemQty:n.tranItemQty,tranItemUnit:n.tranItemUnit,tranUOMFactor:n.tranUOMFactor,tranItemCost:n.tranItemCost,tranTotCost:n.tranTotCost,itemAttribute1:n.itemAttribute1,itemAttribute2:n.itemAttribute2,remarks:n.remarks,iNVAcc:n.invAcc,iNVADJAcc:n.invAdjAcc})}),this.setGrandTotal(),this.id=e.id)})}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}view(e){this.openDialogManage(e,_.Oi.create,"","",G,{action:"",module:""},100)}openDialogManage(e=0,i,n="",s="",c,m={module:"00",action:"00act"},d=100){let l=this.utilService.openDialogCongif(this.dialog,c,d);l.componentInstance.dbops=i,l.componentInstance.modalTitle=n,l.componentInstance.id=e,l.componentInstance.moduleFile=m,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}loadUomdata(e){let n=this.tranItemCode+"_"+e.value;n?this.apiService.getall(`PurchaseOrder/ProductUomtPriceItem/${n}`).subscribe(s=>{s&&(this.tranUOMFactor=s.tranItemUomFactor,this.tranItemCost=s.itemAvgcost)}):(this.unitType="",this.description="")}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(n=>{n&&(this.UOMList=n)})}loadVendata(e){let i=e.value;i&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${i}`).subscribe(n=>{n&&(this.form.patchValue({vendCode:`${n.vendName}`}),this.form.patchValue({paymentID:`${n.poTermsCode}`}))})}loadTaxdata(e){let i=e.value;i&&(this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${i}`).subscribe(n=>{n&&(this.itemTaxPer=n[0].itemTaxperc,this.tranItemName=n[0].shortName)}),this.loadUomList(i))}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let i=e.value;i?this.apiService.getall(`product/productUnitPriceItem/${i}`).subscribe(s=>{s&&(this.product=s.nameEN,this.unitType=s.unitTypeEN,this.description=s.description,this.price=s.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.tranTotCost>0&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnit:this.tranItemUnit,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let i=this.listOfInvoices.findIndex(n=>n.sequence===e);this.listOfInvoices.splice(i,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnit=e.tranItemUnit,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandInvoiceTotal+=e.tranTotCost}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(3),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(3),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(3)}setToDefault(){this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0}calculate(){var n=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(n.toString())}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=this.tranTotCost,i=parseFloat((parseFloat(this.discPer)/100).toFixed(2)),n=parseFloat((e*i/100).toFixed(2));this.discAmt=parseFloat(n.toString());var s=this.tranItemCost;this.tranTotCost=s-s*i,this.tranTotCost=this.tranTotCost*this.tranItemQty,i=parseFloat(this.itemTaxPer),this.taxAmount=0==this.form.value.taxInclusive?parseFloat((this.tranTotCost*i/100).toFixed(2)):parseFloat((this.tranTotCost*i/(i+100)).toFixed(4))}}calculatetaxAmount(){var e=this.tranTotCost,i=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*i/100).toFixed(2))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(x.eN),t.Y36(q.F0),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(U.g),t.Y36(M.R),t.Y36(S.N),t.Y36(y.uw),t.Y36(y.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdateissues"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,7),t.Gf(Z.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:154,vars:144,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],[1,"mr-sm-2"],["type","date","formControlName","tranDate",1,"form-control",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","tranBranch",3,"items"],[3,"control"],["bindLabel","text","bindValue","value","formControlName","tranLocation",3,"items"],["type","text","formControlName","tranDocNumber",1,"form-control",3,"placeholder"],["type","text","formControlName","tranReference",1,"form-control",3,"placeholder"],[1,"col-md-6","col-lg-6"],["formControlName","tranRemarks",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["width","18%"],["width","8%"],["width","11%"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"click"],[1,"icon-plus"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","5","rowspan","5"],[1,"text-right","bgcolor_bottom"],[1,"bgcolor_bottom"],[1,"row"],[1,"col-lg-12","col-md-12","text-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[1,"text-right"],[1,"icon-note","cpointer",3,"click"],[1,"icon-trash","cpointer",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return i.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"div",3),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t.TgZ(14,"label",9),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",10),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.TgZ(20,"div",7),t.TgZ(21,"div",8),t.TgZ(22,"label",9),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"ng-select",11),t._UZ(26,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(27,"div",7),t.TgZ(28,"div",8),t.TgZ(29,"label",9),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"ng-select",13),t._UZ(33,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(34,"div",7),t.TgZ(35,"div",8),t.TgZ(36,"label",9),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"input",14),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.TgZ(42,"div",7),t.TgZ(43,"div",8),t.TgZ(44,"label",9),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"input",15),t.ALo(48,"translate"),t.ALo(49,"translate"),t.qZA(),t.qZA(),t.TgZ(50,"div",16),t.TgZ(51,"div",8),t.TgZ(52,"label",9),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"textarea",17),t.ALo(56,"translate"),t.ALo(57,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",18),t.TgZ(59,"table",19),t.TgZ(60,"thead"),t.TgZ(61,"tr"),t.TgZ(62,"th",20),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"th",20),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"th"),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"th",21),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"th",22),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"th"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"th"),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._UZ(86,"th"),t.qZA(),t.qZA(),t.TgZ(87,"tbody"),t.TgZ(88,"tr"),t.TgZ(89,"td"),t.TgZ(90,"ng-select",23),t.NdJ("ngModelChange",function(s){return i.tranItemCode=s})("change",function(s){return i.loadTaxdata(s)}),t.qZA(),t.qZA(),t.TgZ(91,"td"),t.TgZ(92,"input",24),t.NdJ("ngModelChange",function(s){return i.tranItemName=s}),t.ALo(93,"translate"),t.qZA(),t.qZA(),t.TgZ(94,"td"),t.TgZ(95,"ng-select",23),t.NdJ("ngModelChange",function(s){return i.tranItemUnit=s})("change",function(s){return i.loadUomdata(s)}),t.qZA(),t.qZA(),t.TgZ(96,"td"),t.TgZ(97,"input",24),t.NdJ("ngModelChange",function(s){return i.tranUOMFactor=s}),t.ALo(98,"translate"),t.qZA(),t.qZA(),t.TgZ(99,"td"),t.TgZ(100,"input",25),t.NdJ("ngModelChange",function(s){return i.tranItemCost=s}),t.ALo(101,"translate"),t.qZA(),t.qZA(),t.TgZ(102,"td"),t.TgZ(103,"input",26),t.NdJ("ngModelChange",function(s){return i.tranItemQty=s})("keyup",function(){return i.calculate()}),t.ALo(104,"translate"),t.qZA(),t.qZA(),t.TgZ(105,"td"),t.TgZ(106,"input",24),t.NdJ("ngModelChange",function(s){return i.tranTotCost=s}),t.ALo(107,"translate"),t.qZA(),t.qZA(),t.TgZ(108,"td"),t.TgZ(109,"button",27),t.NdJ("click",function(){return i.addInvoice()}),t._UZ(110,"i",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(111,"thead"),t.TgZ(112,"tr"),t.TgZ(113,"th"),t._uU(114),t.ALo(115,"translate"),t.qZA(),t.TgZ(116,"th"),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.TgZ(119,"th"),t._uU(120),t.ALo(121,"translate"),t.qZA(),t.TgZ(122,"th"),t._uU(123),t.ALo(124,"translate"),t.qZA(),t.TgZ(125,"th"),t._uU(126),t.ALo(127,"translate"),t.qZA(),t.TgZ(128,"th"),t._uU(129),t.ALo(130,"translate"),t.qZA(),t.TgZ(131,"th"),t._uU(132),t.ALo(133,"translate"),t.qZA(),t._UZ(134,"th",29),t.qZA(),t.qZA(),t.TgZ(135,"tbody"),t.YNc(136,Oe,20,7,"tr",30),t.qZA(),t.TgZ(137,"tfoot"),t.TgZ(138,"tr",31),t._UZ(139,"td",32),t.TgZ(140,"td",33),t._uU(141),t.ALo(142,"translate"),t.qZA(),t.TgZ(143,"td",33),t._uU(144),t.qZA(),t._UZ(145,"td",34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(146,"div",35),t.TgZ(147,"div",36),t.TgZ(148,"button",37),t.NdJ("click",function(){return i.closeModel()}),t._uU(149),t.ALo(150,"translate"),t.qZA(),t._uU(151," \xa0\xa0 "),t._UZ(152,"input",38),t.ALo(153,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,61,"Create_New_Issues")," "),t.xp6(4),t.Q6J("formGroup",i.form),t.xp6(10),t.Oqu(t.lcZ(16,63,"Trans_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(18,65,"Select")," ",t.lcZ(19,67,"Trans_Date"),""),t.xp6(6),t.hij(" ",t.lcZ(24,69,"Branch")," "),t.xp6(2),t.Q6J("items",i.tranBranchList),t.xp6(1),t.Q6J("control",i.form.controls.tranBranch),t.xp6(4),t.hij(" ",t.lcZ(31,71,"WareHouse")," "),t.xp6(2),t.Q6J("items",i.tranLocationList),t.xp6(1),t.Q6J("control",i.form.controls.tranLocation),t.xp6(4),t.hij(" ",t.lcZ(38,73,"Document_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(40,75,"Please_Enter"),"  ",t.lcZ(41,77,"Document_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(46,79,"Reference_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(48,81,"Please_Enter"),"  ",t.lcZ(49,83,"Reference_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(54,85,"Remarks")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(56,87,"Please_Enter"),"  ",t.lcZ(57,89,"Remarks"),""),t.xp6(8),t.Oqu(t.lcZ(64,91,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(67,93,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(70,95,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(73,97,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(76,99,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(79,101,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(82,103,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(85,105,"Disc Per")),t.xp6(6),t.Q6J("items",i.ItemCodeList)("ngModel",i.tranItemCode)("ngModelOptions",t.DdM(137,D)),t.xp6(2),t.s9C("placeholder",t.lcZ(93,107,"tranItemName")),t.Q6J("ngModel",i.tranItemName)("ngModelOptions",t.DdM(138,D)),t.xp6(3),t.Q6J("items",i.UOMList)("ngModel",i.tranItemUnit)("ngModelOptions",t.DdM(139,D)),t.xp6(2),t.s9C("placeholder",t.lcZ(98,109,"tranUOMFactor")),t.Q6J("ngModel",i.tranUOMFactor)("ngModelOptions",t.DdM(140,D)),t.xp6(3),t.s9C("placeholder",t.lcZ(101,111,"tranItemCost")),t.Q6J("ngModel",i.tranItemCost)("ngModelOptions",t.DdM(141,D)),t.xp6(3),t.s9C("placeholder",t.lcZ(104,113,"Quantity")),t.Q6J("ngModel",i.tranItemQty)("ngModelOptions",t.DdM(142,D)),t.xp6(3),t.s9C("placeholder",t.lcZ(107,115,"tranTotCost")),t.Q6J("ngModel",i.tranTotCost)("ngModelOptions",t.DdM(143,D)),t.xp6(8),t.Oqu(t.lcZ(115,117,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(118,119,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(121,121,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(124,123,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(127,125,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(130,127,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(133,129,"Tot Cost")),t.xp6(4),t.Q6J("ngForOf",i.listOfInvoices),t.xp6(5),t.Oqu(t.lcZ(142,131,"Invoice_Total")),t.xp6(3),t.Oqu(i.grandInvoiceTotalStr),t.xp6(5),t.hij(" ",t.lcZ(150,133,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(153,135,"Save")))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,F.w9,R.s,a.On,p.sg],pipes:[O.X$],encapsulation:2}),o})();function be(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TranNumber")," "))}function Le(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranNumber)}}function Ue(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Date")," "))}function xe(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.tranDate,"dd/MM/yyyy"))}}function Me(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Doc_Num")," "))}function Se(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranDocNumber)}}function Ne(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reference")," "))}function ke(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranReference)}}function we(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Location")," "))}function De(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranLocation)}}function Pe(o,r){1&o&&(t.TgZ(0,"th",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Qe(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",44),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t.ALo(1,"translate"),t._UZ(2,"i",48),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.s9C("id","edit_"+e.id),t.s9C("matTooltip",t.lcZ(1,2,"Edit_Item"))}}function Re(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",50),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"Delete_Item")))}function Be(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approvePurchaseOrder(n)}),t.ALo(1,"translate"),t._UZ(2,"i",53),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Approve_Item"))}function Fe(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().Issuessettelment(n.id)}),t.ALo(1,"translate"),t._UZ(2,"i",54),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Posting_Item"))}function Je(o,r){if(1&o&&(t.ynx(0),t.YNc(1,Be,3,3,"a",51),t._uU(2," \xa0 "),t.YNc(3,Fe,3,3,"a",51),t._uU(4," \xa0 "),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.approvedUser&&!e.isSettled),t.xp6(2),t.Q6J("ngIf",e.canSettle&&!e.isSettled)}}function Ye(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",41),t.YNc(1,Qe,3,4,"a",43),t._uU(2," \xa0 "),t.TgZ(3,"a",44),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().view(s.id)}),t.ALo(4,"translate"),t._UZ(5,"i",45),t.qZA(),t._uU(6," \xa0 "),t.YNc(7,Re,3,3,"a",46),t.YNc(8,Je,5,2,"ng-container",47),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved&&!e.isSettled),t.xp6(2),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(4,5,"View_Details")),t.xp6(4),t.Q6J("ngIf",!e.isSettled&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.hasAuthority)}}function Ve(o,r){1&o&&t._UZ(0,"tr",55)}function je(o,r){1&o&&t._UZ(0,"tr",56)}let Ee=(()=>{class o extends B{constructor(e,i,n,s,c,m,d,l,u,T,f){super(c),this.fb=e,this.http=i,this.router=n,this.apiService=s,this.authService=c,this.utilService=m,this.notifyService=d,this.validationService=l,this.pageService=u,this.dialog=T,this.translate=f,this.displayedColumns=["tranNumber","tranDate","tranDocNumber","tranReference","tranLocation","Actions"],this.searchValue="",this.sortingOrder="id desc",this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.TranUserList=[],this.tranLocationList=[],this.tranToLocationList=[],this.tranInvAccountList=[],this.tranInvAdjAccountList=[],this.jVNumList=[],this.ItemCodeList=[],this.BarcodeList=[],this.UOMList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc=""}ngOnInit(){this.initialLoading(),this.setForm(),this.Users(),this.FromLocation(),this.ToLocation(),this.Accounts(),this.AdjAccounts(),this.JVNumber(),this.loadItemCode(),this.loadbarCode(),this.loadUnitCode(),this.form.patchValue({trantype:"3"})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}loadUser(e,i,n,s){this.data=new h.by(this.getData()),this.totalItemsCount=2}Users(){this.apiService.getall("InventoryTransaction/GetUserSelectList").subscribe(e=>{e&&(this.TranUserList=e)})}FromLocation(){this.apiService.getall("InventoryTransaction/GetToLocationList").subscribe(e=>{e&&(this.tranLocationList=e)})}ToLocation(){this.apiService.getall("InventoryTransaction/GetToLocationList").subscribe(e=>{e&&(this.tranToLocationList=e)})}Accounts(){this.apiService.getall("InventoryTransaction/GetAccountSelectList").subscribe(e=>{e&&(this.tranInvAccountList=e)})}AdjAccounts(){this.apiService.getall("InventoryTransaction/GetAccountSelectList").subscribe(e=>{e&&(this.tranInvAdjAccountList=e)})}JVNumber(){this.apiService.getall("InventoryTransaction/GetJVNumberSelectList").subscribe(e=>{e&&(this.jVNumList=e)})}loadItemCode(){this.apiService.getall("InventoryTransaction/GetItemCodeList").subscribe(e=>{e&&(this.ItemCodeList=e)})}loadbarCode(){this.apiService.getall("InventoryTransaction/GetBarCodeSelectList").subscribe(e=>{e&&(this.BarcodeList=e)})}loadUnitCode(){this.apiService.getall("InventoryTransaction/GetUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadUomdata(e){let n=this.tranItemCode+"_"+e.value;n?this.apiService.getall(`InventoryTransaction/ProductUomtPriceItem/${n}`).subscribe(s=>{s&&(this.tranUOMFactor=s.tranItemUomFactor,this.tranItemCost=s.itemAvgcost)}):(this.unitType="",this.description="")}getData(){return[]}setForm(){this.form=this.fb.group({tranDate:["",a.kI.required],tranUser:["",a.kI.required],tranLocation:["",a.kI.required],tranToLocation:["",a.kI.required],tranDocNumber:["",a.kI.required],tranReference:["",a.kI.required],trantype:["",a.kI.required],tranRemarks:["",a.kI.required],tranInvAccount:["",a.kI.required],tranInvAdjAccount:["",a.kI.required],jVNum:["",a.kI.required]})}create(){this.openDialogManage(0,_.Oi.create,this.translate.instant("Create_New_Issues"),"",z)}edit(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Issues"),"",z)}view(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Issues"),"",z)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,i,n,s,c=""){this.isLoading=!0,this.apiService.getPagination("InventoryTransaction",this.utilService.getQueryString(e,i,n,s)).subscribe(m=>{this.totalItemsCount=0,this.data=new h.by(m.items),this.totalItemsCount=m.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},m=>this.utilService.ShowApiErrorMessage(m))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("InventoryTransaction",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,C.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("InventoryTransaction",e).subscribe(s=>{this.refresh(),this.utilService.OkMessage()})},n=>this.utilService.ShowApiErrorMessage(n))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(s=>{s&&this.form.controls.taxIdNumber.setValue(s.vatNumber)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let i=e.value;i?this.apiService.getall(`product/productUnitPriceItem/${i}`).subscribe(s=>{s&&(this.product=s.nameEN,this.unitType=s.unitTypeEN,this.description=s.description,this.price=s.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.tranTotCost>0&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranBarcode:this.tranBarcode,tranItemName:this.tranItemName,tranItemName2:this.tranItemName2,tranItemQty:this.tranItemQty,tranItemUnit:this.tranItemUnit,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,itemAttribute1:this.itemAttribute1,itemAttribute2:this.itemAttribute2,remarks:this.remarks,iNVAcc:this.iNVAcc,iNVADJAcc:this.iNVADJAcc}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let i=this.listOfInvoices.findIndex(n=>n.sequence===e);this.listOfInvoices.splice(i,1)}editInvoiceItem(e){this.tranItemCode=e.tranItemCode,this.tranBarcode=e.tranBarcode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnit=e.tranItemUnit,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.itemAttribute1=e.itemAttribute1,this.itemAttribute2=e.itemAttribute2,this.remarks=e.remarks,this.iNVAcc=e.iNVAcc,this.iNVADJAcc=e.iNVADJAcc}setGrandTotal(){this.grandTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost}),this.grandTotalStr=this.grandTotal.toString()}closeModel(){this.refresh()}setToDefault(){this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc=""}calculate(){var n=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(n.toString())}submit(){this.id>0&&(this.form.value.id=this.id),this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.apiService.post("InventoryTransaction/CreateIssuesRequest",this.form.value).subscribe(e=>{this.reset(),this.utilService.OkMessage(),this.closeModel()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}reset(){this.listOfInvoices=[],this.grandTotalStr="0",this.form.reset()}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}approve(e){this.openDialogManage(e,_.Oi.create,"","",J,{action:"",module:""},50)}approvePurchaseOrder(e){this.openApprovalDialog(e.tranBranch,e.tranNumber,_.Oi.create,"Issues","Save","ISSU",Y.$)}openApprovalDialog(e,i,n,s,c,m,d){let l=this.openApprovalDialog1(this.dialog,d);l.componentInstance.dbops=n,l.componentInstance.modalTitle=s,l.componentInstance.modalBtnTitle=c,l.componentInstance.serviceType=m,l.componentInstance.serviceCode=i,l.componentInstance.branchCode=e,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}openApprovalDialog1(e,i){return e.open(i,{disableClose:!0})}Issuessettelment(e){e>0&&this.apiService.getall(`InventoryTransaction/IssuesSettelementList/${e}`).subscribe(i=>{i&&(this.utilService.OkMessage(),this.refresh())})}openDialogManage(e=0,i,n="",s="",c,m={module:"00",action:"00act"},d=100){let l=this.utilService.openDialogCongif(this.dialog,c,d);l.componentInstance.dbops=i,l.componentInstance.modalTitle=n,l.componentInstance.id=e,l.componentInstance.moduleFile=m,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(x.eN),t.Y36(q.F0),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(U.g),t.Y36(M.R),t.Y36(S.N),t.Y36(y.uw),t.Y36(O.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-issues"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,7),t.Gf(Z.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},features:[t.qOj],decls:67,vars:25,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","pb-3"],[1,"col-md-3"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],["value","TransLocK"],["value","TransPost"],["value","TransVoid"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"col-md-3","col-lg-3","text-right"],["data-toggle","modal","data-target","#scrollable-modal","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","Id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","tranNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tranDate"],["matColumnDef","tranDocNumber"],["matColumnDef","tranReference"],["matColumnDef","tranLocation"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["class","tableicons pcursor","data-toggle","modal","data-target","#scrollable-modal",3,"id","matTooltip","click",4,"ngIf"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"id","matTooltip","click"],[1,"icon-list"],["class","tableicons",3,"click",4,"ngIf"],[4,"ngIf"],[1,"icon-note"],[1,"tableicons",3,"click"],[1,"icon-trash",3,"matTooltip"],["class","tableicons pcursor",3,"matTooltip","click",4,"ngIf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-arrow-up-circle"],[1,"icon-action-undo"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",14),t.TgZ(22,"select",15),t.NdJ("change",function(s){return i.loadApprovals(s)}),t.TgZ(23,"option",16),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",17),t._uU(27,"Trans LocK"),t.qZA(),t.TgZ(28,"option",18),t._uU(29,"Trans Post"),t.qZA(),t.TgZ(30,"option",19),t._uU(31,"Trans Void"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",1),t.TgZ(33,"div",20),t.TgZ(34,"h4",21),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.qZA(),t.TgZ(37,"div",22),t.TgZ(38,"a",23),t.NdJ("click",function(){return i.create()}),t._UZ(39,"i",24),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(42,"div",25),t.TgZ(43,"div",26),t.TgZ(44,"table",27),t.NdJ("matSortChange",function(s){return i.onSortOrder(s)}),t.ynx(45,28),t.YNc(46,be,3,3,"th",29),t.YNc(47,Le,2,1,"td",30),t.BQk(),t.ynx(48,31),t.YNc(49,Ue,3,3,"th",29),t.YNc(50,xe,3,4,"td",30),t.BQk(),t.ynx(51,32),t.YNc(52,Me,3,3,"th",29),t.YNc(53,Se,2,1,"td",30),t.BQk(),t.ynx(54,33),t.YNc(55,Ne,3,3,"th",29),t.YNc(56,ke,2,1,"td",30),t.BQk(),t.ynx(57,34),t.YNc(58,we,3,3,"th",29),t.YNc(59,De,2,1,"td",30),t.BQk(),t.ynx(60,35),t.YNc(61,Pe,3,3,"th",36),t.YNc(62,Ye,9,7,"td",30),t.BQk(),t.YNc(63,Ve,1,0,"tr",37),t.YNc(64,je,1,0,"tr",38),t.qZA(),t.ynx(65),t.TgZ(66,"mat-paginator",39),t.NdJ("page",function(s){return i.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,13,"Inventory_Issues")," "),t.xp6(6),t.hij("",t.lcZ(11,15,"Inventory_Issues")," "),t.xp6(3),t.hij("",t.lcZ(14,17,"Inventory_Issues")," "),t.xp6(11),t.Oqu(t.lcZ(25,19,"Issues_List")),t.xp6(11),t.Oqu(t.lcZ(36,21,"Issues_List")),t.xp6(5),t.Oqu(t.lcZ(41,23,"Add_New_Issues")),t.xp6(4),t.Q6J("dataSource",i.data),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("length",i.totalItemsCount)("pageSize",i.pageService.pageCount)("pageSizeOptions",i.pageService.selectItemsPerPage))},directives:[a.YN,a.Kr,h.BZ,Z.YE,h.w1,h.fO,h.Dz,h.as,h.nj,A.NW,h.ge,Z.nU,h.ev,p.O5,V.gM,h.XQ,h.Gk],pipes:[O.X$,p.uU],encapsulation:2}),o})();function $e(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",40),t._uU(12),t.qZA(),t.TgZ(13,"td",40),t._uU(14),t.qZA(),t.TgZ(15,"td",30),t.TgZ(16,"i",41),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editInvoiceItem(s)}),t.qZA(),t._uU(17," \xa0 "),t.TgZ(18,"i",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteInvoiceItem(s)}),t.qZA(),t._uU(19," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e.tranItemCode),t.xp6(2),t.Oqu(e.tranItemName),t.xp6(2),t.Oqu(e.tranItemQty),t.xp6(2),t.Oqu(e.tranItemUnit),t.xp6(2),t.Oqu(e.tranUOMFactor),t.xp6(2),t.Oqu(e.tranItemCost),t.xp6(2),t.Oqu(e.tranTotCost)}}const P=function(){return{standalone:!0}};let W=(()=>{class o{constructor(e,i,n,s,c,m,d,l,u,T,f){this.fb=e,this.http=i,this.router=n,this.apiService=s,this.authService=c,this.utilService=m,this.notifyService=d,this.validationService=l,this.pageService=u,this.dialog=T,this.dialogRef=f,this.displayedColumns=["tranNumber","tranDate","tranDocNumber","tranReference","tranLocation","tranToLocation","tranTotalCost","Actions"],this.searchValue="",this.sortingOrder="id desc",this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.itemTaxPer="",this.TranUserList=[],this.tranLocationList=[],this.tranToLocationList=[],this.tranInvAccountList=[],this.tranInvAdjAccountList=[],this.jVNumList=[],this.ItemCodeList=[],this.BarcodeList=[],this.UOMList=[],this.tranBranchList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc="",this.discPer="",this.DiscPerc=0,this.discAmt=0,this.tranItemUnitCode="",this.taxAmount=0,this.itemTracking=0,this.itemTax=""}ngOnInit(){this.setForm(),this.Users(),this.FromLocation(),this.Branch(),this.Accounts(),this.AdjAccounts(),this.JVNumber(),this.loadItemCode(),this.loadbarCode(),this.loadUnitCode(),this.form.patchValue({trantype:"3"}),this.id>0&&this.edit()}Users(){this.apiService.getall("InventoryTransfer/GetTransferUserSelectList").subscribe(e=>{e&&(this.TranUserList=e)})}FromLocation(){this.apiService.getall("InventoryTransfer/GetTransferToLocationList").subscribe(e=>{e&&(this.tranLocationList=e)})}ToLocation(){this.apiService.getall("InventoryTransfer/GetTransferToLocationList").subscribe(e=>{e&&(this.tranToLocationList=e)})}Branch(){this.apiService.getall("InventoryReceipts/GetReceiptsBranchList").subscribe(e=>{e&&(this.tranBranchList=e)})}Accounts(){this.apiService.getall("InventoryTransfer/GetTransferAccountSelectList").subscribe(e=>{e&&(this.tranInvAccountList=e)})}AdjAccounts(){this.apiService.getall("InventoryTransfer/GetAdjustmentAccountSelectList").subscribe(e=>{e&&(this.tranInvAdjAccountList=e)})}JVNumber(){this.apiService.getall("InventoryTransfer/GetAdjustmentJVNumberSelectList").subscribe(e=>{e&&(this.jVNumList=e)})}loadItemCode(){this.apiService.getall("InventoryTransfer/GetTransferItemCodeList").subscribe(e=>{e&&(this.ItemCodeList=e)})}loadbarCode(){this.apiService.getall("InventoryTransfer/GetTransferBarCodeSelectList").subscribe(e=>{e&&(this.BarcodeList=e)})}loadUnitCode(){this.apiService.getall("InventoryTransfer/GetTransferUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadUomdata(e){let n=this.tranItemCode+"_"+e.value;n?this.apiService.getall(`InventoryTransfer/TransferProductUomtPriceItem/${n}`).subscribe(s=>{s&&(this.tranUOMFactor=s.tranItemUomFactor,this.tranItemCost=s.itemAvgcost)}):(this.unitType="",this.description="")}getData(){return[]}setForm(){this.form=this.fb.group({tranDate:["",a.kI.required],tranToLocation:["",a.kI.required],tranLocation:["",a.kI.required],branchCode:["",a.kI.required],tranDocNumber:["",a.kI.required],tranReference:["",a.kI.required],tranRemarks:["",a.kI.required]})}create(){this.setForm(),this.refresh()}loadList(e,i,n,s,c=""){this.isLoading=!0,this.apiService.getPagination("InventoryTransfer",this.utilService.getQueryString(e,i,n,s)).subscribe(m=>{this.totalItemsCount=0,this.data=new h.by(m.items),this.totalItemsCount=m.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,this.isLoading=!1},m=>this.utilService.ShowApiErrorMessage(m))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("InventoryTransfer",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,C.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("InventoryTransfer",e).subscribe(s=>{this.refresh(),this.utilService.OkMessage()})},n=>this.utilService.ShowApiErrorMessage(n))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(s=>{s&&this.form.controls.taxIdNumber.setValue(s.vatNumber)})}closeModel(){this.dialogRef.close()}submit(){this.id>0&&(this.form.value.id=this.id),this.listOfInvoices.length>0?(this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.form.value.trantype="3",this.apiService.post("InventoryTransfer/TransferCreateIssuesRequest",this.form.value).subscribe(e=>{this.reset(),this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.notifyService.showError("Items Empty")}reset(){this.listOfInvoices=[],this.grandTotalStr="0",this.form.reset()}edit(){this.apiService.get("InventoryTransfer",this.id).subscribe(e=>{e&&(this.isReadOnly=!0,this.form.patchValue(e),this.form.patchValue({jVNum:`${e.jvNum}`}),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),this.form.patchValue({trantype:"3"}),this.form.value.itemList=this.listOfInvoices,this.listOfInvoices=[],e.itemList.forEach(n=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:n.tranItemCode,tranBarcode:n.tranBarcode,tranItemName:n.tranItemName,tranItemName2:n.tranItemName2,tranItemQty:n.tranItemQty,tranItemUnit:n.tranItemUnit,tranUOMFactor:n.tranUOMFactor,tranItemCost:n.tranItemCost,tranTotCost:n.tranTotCost,itemAttribute1:n.itemAttribute1,itemAttribute2:n.itemAttribute2,remarks:n.remarks,iNVAcc:n.invAcc,iNVADJAcc:n.invAdjAcc})}),this.setGrandTotal(),this.id=e.id)})}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}view(e){this.openDialogManage(e,_.Oi.create,"","",$,{action:"",module:""},100)}openDialogManage(e=0,i,n="",s="",c,m={module:"00",action:"00act"},d=100){let l=this.utilService.openDialogCongif(this.dialog,c,d);l.componentInstance.dbops=i,l.componentInstance.modalTitle=n,l.componentInstance.id=e,l.componentInstance.moduleFile=m,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(n=>{n&&(this.UOMList=n)})}loadVendata(e){let i=e.value;i&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${i}`).subscribe(n=>{n&&(this.form.patchValue({vendCode:`${n.vendName}`}),this.form.patchValue({paymentID:`${n.poTermsCode}`}))})}loadTaxdata(e){let i=e.value;i&&(this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${i}`).subscribe(n=>{n&&(this.itemTaxPer=n[0].itemTaxperc,this.tranItemName=n[0].shortName)}),this.loadUomList(i))}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let i=e.value;i?this.apiService.getall(`product/productUnitPriceItem/${i}`).subscribe(s=>{s&&(this.product=s.nameEN,this.unitType=s.unitTypeEN,this.description=s.description,this.price=s.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){0!=this.tranTotCost&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnit:this.tranItemUnit,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let i=this.listOfInvoices.findIndex(n=>n.sequence===e);this.listOfInvoices.splice(i,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnit=e.tranItemUnit,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandInvoiceTotal+=e.tranTotCost}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(3),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(3),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(3)}setToDefault(){this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0}calculate(){var n=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(n.toString())}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=this.tranTotCost,i=parseFloat((parseFloat(this.discPer)/100).toFixed(2)),n=parseFloat((e*i/100).toFixed(2));this.discAmt=parseFloat(n.toString());var s=this.tranItemCost;this.tranTotCost=s-s*i,this.tranTotCost=this.tranTotCost*this.tranItemQty,i=parseFloat(this.itemTaxPer),this.taxAmount=0==this.form.value.taxInclusive?parseFloat((this.tranTotCost*i/100).toFixed(2)):parseFloat((this.tranTotCost*i/(i+100)).toFixed(4))}}calculatetaxAmount(){var e=this.tranTotCost,i=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*i/100).toFixed(2))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(x.eN),t.Y36(q.F0),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(U.g),t.Y36(M.R),t.Y36(S.N),t.Y36(y.uw),t.Y36(y.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdatetransfer"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,7),t.Gf(Z.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:161,vars:149,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],[1,"mr-sm-2"],["type","date","formControlName","tranDate",1,"form-control",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","branchCode",3,"items"],[3,"control"],["bindLabel","text","bindValue","value","formControlName","tranLocation",3,"items"],["bindLabel","text","bindValue","value","formControlName","tranToLocation",3,"items"],["type","text","formControlName","tranDocNumber",1,"form-control",3,"placeholder"],["type","text","formControlName","tranReference",1,"form-control",3,"placeholder"],[1,"col-md-6","col-lg-6"],["formControlName","tranRemarks",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["width","18%"],["width","8%"],["width","11%"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"click"],[1,"icon-plus"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","5","rowspan","5"],[1,"text-right","bgcolor_bottom"],[1,"bgcolor_bottom"],[1,"row"],[1,"col-lg-12","col-md-12","text-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[1,"text-right"],[1,"icon-note","cpointer",3,"click"],[1,"icon-trash","cpointer",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return i.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return i.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"div",3),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t.TgZ(14,"label",9),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",10),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.TgZ(20,"div",7),t.TgZ(21,"div",8),t.TgZ(22,"label",9),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"ng-select",11),t._UZ(26,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(27,"div",7),t.TgZ(28,"div",8),t.TgZ(29,"label",9),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"ng-select",13),t._UZ(33,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(34,"div",7),t.TgZ(35,"div",8),t.TgZ(36,"label",9),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"ng-select",14),t._UZ(40,"validation-message",12),t.qZA(),t.qZA(),t.TgZ(41,"div",7),t.TgZ(42,"div",8),t.TgZ(43,"label",9),t._uU(44),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"input",15),t.ALo(47,"translate"),t.ALo(48,"translate"),t.qZA(),t.qZA(),t.TgZ(49,"div",7),t.TgZ(50,"div",8),t.TgZ(51,"label",9),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._UZ(54,"input",16),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.qZA(),t.TgZ(57,"div",17),t.TgZ(58,"div",8),t.TgZ(59,"label",9),t._uU(60),t.ALo(61,"translate"),t.qZA(),t._UZ(62,"textarea",18),t.ALo(63,"translate"),t.ALo(64,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"div",19),t.TgZ(66,"table",20),t.TgZ(67,"thead"),t.TgZ(68,"tr"),t.TgZ(69,"th",21),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"th",21),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"th"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"th",22),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"th",23),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"th"),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"th"),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.TgZ(90,"th"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t._UZ(93,"th"),t.qZA(),t.qZA(),t.TgZ(94,"tbody"),t.TgZ(95,"tr"),t.TgZ(96,"td"),t.TgZ(97,"ng-select",24),t.NdJ("ngModelChange",function(s){return i.tranItemCode=s})("change",function(s){return i.loadTaxdata(s)}),t.qZA(),t.qZA(),t.TgZ(98,"td"),t.TgZ(99,"input",25),t.NdJ("ngModelChange",function(s){return i.tranItemName=s}),t.ALo(100,"translate"),t.qZA(),t.qZA(),t.TgZ(101,"td"),t.TgZ(102,"ng-select",24),t.NdJ("ngModelChange",function(s){return i.tranItemUnit=s})("change",function(s){return i.loadUomdata(s)}),t.qZA(),t.qZA(),t.TgZ(103,"td"),t.TgZ(104,"input",25),t.NdJ("ngModelChange",function(s){return i.tranUOMFactor=s}),t.ALo(105,"translate"),t.qZA(),t.qZA(),t.TgZ(106,"td"),t.TgZ(107,"input",26),t.NdJ("ngModelChange",function(s){return i.tranItemCost=s}),t.ALo(108,"translate"),t.qZA(),t.qZA(),t.TgZ(109,"td"),t.TgZ(110,"input",27),t.NdJ("ngModelChange",function(s){return i.tranItemQty=s})("keyup",function(){return i.calculate()}),t.ALo(111,"translate"),t.qZA(),t.qZA(),t.TgZ(112,"td"),t.TgZ(113,"input",25),t.NdJ("ngModelChange",function(s){return i.tranTotCost=s}),t.ALo(114,"translate"),t.qZA(),t.qZA(),t.TgZ(115,"td"),t.TgZ(116,"button",28),t.NdJ("click",function(){return i.addInvoice()}),t._UZ(117,"i",29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(118,"thead"),t.TgZ(119,"tr"),t.TgZ(120,"th"),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"th"),t._uU(124),t.ALo(125,"translate"),t.qZA(),t.TgZ(126,"th"),t._uU(127),t.ALo(128,"translate"),t.qZA(),t.TgZ(129,"th"),t._uU(130),t.ALo(131,"translate"),t.qZA(),t.TgZ(132,"th"),t._uU(133),t.ALo(134,"translate"),t.qZA(),t.TgZ(135,"th"),t._uU(136),t.ALo(137,"translate"),t.qZA(),t.TgZ(138,"th"),t._uU(139),t.ALo(140,"translate"),t.qZA(),t._UZ(141,"th",30),t.qZA(),t.qZA(),t.TgZ(142,"tbody"),t.YNc(143,$e,20,7,"tr",31),t.qZA(),t.TgZ(144,"tfoot"),t.TgZ(145,"tr",32),t._UZ(146,"td",33),t.TgZ(147,"td",34),t._uU(148),t.ALo(149,"translate"),t.qZA(),t.TgZ(150,"td",34),t._uU(151),t.qZA(),t._UZ(152,"td",35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(153,"div",36),t.TgZ(154,"div",37),t.TgZ(155,"button",38),t.NdJ("click",function(){return i.closeModel()}),t._uU(156),t.ALo(157,"translate"),t.qZA(),t._uU(158," \xa0\xa0 "),t._UZ(159,"input",39),t.ALo(160,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,64,"Create_New_Transfer")," "),t.xp6(4),t.Q6J("formGroup",i.form),t.xp6(10),t.Oqu(t.lcZ(16,66,"Trans_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(18,68,"Select")," ",t.lcZ(19,70,"Trans_Date"),""),t.xp6(6),t.hij(" ",t.lcZ(24,72,"Branch")," "),t.xp6(2),t.Q6J("items",i.tranBranchList),t.xp6(1),t.Q6J("control",i.form.controls.branchCode),t.xp6(4),t.hij(" ",t.lcZ(31,74," From WareHouse")," "),t.xp6(2),t.Q6J("items",i.tranLocationList),t.xp6(1),t.Q6J("control",i.form.controls.tranLocation),t.xp6(4),t.hij(" ",t.lcZ(38,76,"To WareHouse")," "),t.xp6(2),t.Q6J("items",i.tranLocationList),t.xp6(1),t.Q6J("control",i.form.controls.tranToLocation),t.xp6(4),t.hij(" ",t.lcZ(45,78,"Document_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(47,80,"Please_Enter"),"  ",t.lcZ(48,82,"Document_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(53,84,"Reference_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(55,86,"Please_Enter"),"  ",t.lcZ(56,88,"Reference_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(61,90,"Remarks")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(63,92,"Please_Enter"),"  ",t.lcZ(64,94,"Remarks"),""),t.xp6(8),t.Oqu(t.lcZ(71,96,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(74,98,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(77,100,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(80,102,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(83,104,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(86,106,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(89,108,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(92,110,"Disc Per")),t.xp6(6),t.Q6J("items",i.ItemCodeList)("ngModel",i.tranItemCode)("ngModelOptions",t.DdM(142,P)),t.xp6(2),t.s9C("placeholder",t.lcZ(100,112,"tranItemName")),t.Q6J("ngModel",i.tranItemName)("ngModelOptions",t.DdM(143,P)),t.xp6(3),t.Q6J("items",i.UOMList)("ngModel",i.tranItemUnit)("ngModelOptions",t.DdM(144,P)),t.xp6(2),t.s9C("placeholder",t.lcZ(105,114,"tranUOMFactor")),t.Q6J("ngModel",i.tranUOMFactor)("ngModelOptions",t.DdM(145,P)),t.xp6(3),t.s9C("placeholder",t.lcZ(108,116,"tranItemCost")),t.Q6J("ngModel",i.tranItemCost)("ngModelOptions",t.DdM(146,P)),t.xp6(3),t.s9C("placeholder",t.lcZ(111,118,"Quantity")),t.Q6J("ngModel",i.tranItemQty)("ngModelOptions",t.DdM(147,P)),t.xp6(3),t.s9C("placeholder",t.lcZ(114,120,"tranTotCost")),t.Q6J("ngModel",i.tranTotCost)("ngModelOptions",t.DdM(148,P)),t.xp6(8),t.Oqu(t.lcZ(122,122,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(125,124,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(128,126,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(131,128,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(134,130,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(137,132,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(140,134,"Tot Cost")),t.xp6(4),t.Q6J("ngForOf",i.listOfInvoices),t.xp6(5),t.Oqu(t.lcZ(149,136,"Invoice_Total")),t.xp6(3),t.Oqu(i.grandInvoiceTotalStr),t.xp6(5),t.hij(" ",t.lcZ(157,138,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(160,140,"Save")))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,F.w9,R.s,a.On,p.sg],pipes:[O.X$],encapsulation:2}),o})();function He(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TranNumber")," "))}function Ge(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranNumber)}}function ze(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Date")," "))}function We(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.tranDate,"dd/MM/yyyy"))}}function Xe(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Doc_Num")," "))}function Ke(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranDocNumber)}}function ti(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reference")," "))}function ei(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranReference)}}function ii(o,r){1&o&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Location")," "))}function ni(o,r){if(1&o&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e.tranLocation)}}function si(o,r){1&o&&(t.TgZ(0,"th",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function oi(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",44),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t.ALo(1,"translate"),t._UZ(2,"i",48),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.s9C("id","edit_"+e.id),t.s9C("matTooltip",t.lcZ(1,2,"Edit_Item"))}}function ai(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",50),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"Delete_Item")))}function ri(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approvePurchaseOrder(n)}),t.ALo(1,"translate"),t._UZ(2,"i",53),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Approve_Item"))}function li(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().Issuessettelment(n.id)}),t.ALo(1,"translate"),t._UZ(2,"i",54),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Posting_Item"))}function ci(o,r){if(1&o&&(t.ynx(0),t.YNc(1,ri,3,3,"a",51),t._uU(2," \xa0 "),t.YNc(3,li,3,3,"a",51),t._uU(4," \xa0 "),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.approvedUser&&!e.isSettled),t.xp6(2),t.Q6J("ngIf",e.canSettle&&!e.isSettled)}}function di(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",41),t.YNc(1,oi,3,4,"a",43),t._uU(2," \xa0 "),t.TgZ(3,"a",44),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().view(s.id)}),t.ALo(4,"translate"),t._UZ(5,"i",45),t.qZA(),t._uU(6," \xa0 "),t.YNc(7,ai,3,3,"a",46),t.YNc(8,ci,5,2,"ng-container",47),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved&&!e.isSettled),t.xp6(2),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(4,5,"View_Details")),t.xp6(4),t.Q6J("ngIf",!e.isSettled&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.hasAuthority)}}function mi(o,r){1&o&&t._UZ(0,"tr",55)}function hi(o,r){1&o&&t._UZ(0,"tr",56)}const ui=[{path:"inventorymanagementlist",component:tt},{path:"adjustments",component:$},{path:"Issues",component:Ee},{path:"Receipts",component:G},{path:"Transfer",component:(()=>{class o extends B{constructor(e,i,n,s,c,m,d,l,u,T,f){super(c),this.fb=e,this.http=i,this.router=n,this.apiService=s,this.authService=c,this.utilService=m,this.notifyService=d,this.validationService=l,this.pageService=u,this.dialog=T,this.translate=f,this.displayedColumns=["tranNumber","tranDate","tranDocNumber","tranReference","tranLocation","Actions"],this.searchValue="",this.sortingOrder="id desc",this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.TranUserList=[],this.tranLocationList=[],this.tranToLocationList=[],this.tranInvAccountList=[],this.tranInvAdjAccountList=[],this.jVNumList=[],this.ItemCodeList=[],this.BarcodeList=[],this.UOMList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc=""}ngOnInit(){this.initialLoading(),this.form.patchValue({trantype:"3"})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadUser(e,i,n,s){this.data=new h.by(this.getData()),this.totalItemsCount=2}getData(){return[]}create(){this.openDialogManage(0,_.Oi.create,this.translate.instant("Create_New_Issues"),"",W)}edit(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Adjustments"),"",W)}view(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Adjustments"),"",W)}loadList(e,i,n,s,c=""){this.isLoading=!0,this.apiService.getPagination("InventoryTransfer",this.utilService.getQueryString(e,i,n,s)).subscribe(m=>{this.totalItemsCount=0,this.data=new h.by(m.items),this.totalItemsCount=m.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},m=>this.utilService.ShowApiErrorMessage(m))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,C.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("InventoryTransfer",e).subscribe(s=>{this.refresh(),this.utilService.OkMessage()})},n=>this.utilService.ShowApiErrorMessage(n))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(s=>{s&&this.form.controls.taxIdNumber.setValue(s.vatNumber)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}closeModel(){this.refresh()}setToDefault(){this.tranItemCode=0,this.tranBarcode="",this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnit="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.itemAttribute1="",this.itemAttribute2="",this.remarks="",this.iNVAcc="",this.iNVADJAcc=""}reset(){this.listOfInvoices=[],this.grandTotalStr="0",this.form.reset()}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}approve(e){this.openDialogManage(e,_.Oi.create,"","",J,{action:"",module:""},50)}approvePurchaseOrder(e){this.openApprovalDialog(e.branchCode,e.tranNumber,_.Oi.create,"Transfer","Save","TRNS",Y.$)}openApprovalDialog(e,i,n,s,c,m,d){let l=this.openApprovalDialog1(this.dialog,d);l.componentInstance.dbops=n,l.componentInstance.modalTitle=s,l.componentInstance.modalBtnTitle=c,l.componentInstance.serviceType=m,l.componentInstance.serviceCode=i,l.componentInstance.branchCode=e,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}openApprovalDialog1(e,i){return e.open(i,{disableClose:!0})}Issuessettelment(e){e>0&&this.apiService.getall(`InventoryTransfer/StockTransfer/${e}`).subscribe(i=>{i&&(this.utilService.OkMessage(),this.refresh())})}openDialogManage(e=0,i,n="",s="",c,m={module:"00",action:"00act"},d=100){let l=this.utilService.openDialogCongif(this.dialog,c,d);l.componentInstance.dbops=i,l.componentInstance.modalTitle=n,l.componentInstance.id=e,l.componentInstance.moduleFile=m,l.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(x.eN),t.Y36(q.F0),t.Y36(b.s),t.Y36(I._),t.Y36(L.t),t.Y36(U.g),t.Y36(M.R),t.Y36(S.N),t.Y36(y.uw),t.Y36(O.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-transfer"]],viewQuery:function(e,i){if(1&e&&(t.Gf(A.NW,7),t.Gf(Z.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},features:[t.qOj],decls:67,vars:25,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","pb-3"],[1,"col-md-3"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],["value","TransLocK"],["value","TransPost"],["value","TransVoid"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"col-md-3","col-lg-3","text-right"],["data-toggle","modal","data-target","#scrollable-modal","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSort","","matSortActive","Id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","tranNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tranDate"],["matColumnDef","tranDocNumber"],["matColumnDef","tranReference"],["matColumnDef","tranLocation"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["class","tableicons pcursor","data-toggle","modal","data-target","#scrollable-modal",3,"id","matTooltip","click",4,"ngIf"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"id","matTooltip","click"],[1,"icon-list"],["class","tableicons",3,"click",4,"ngIf"],[4,"ngIf"],[1,"icon-note"],[1,"tableicons",3,"click"],[1,"icon-trash",3,"matTooltip"],["class","tableicons pcursor",3,"matTooltip","click",4,"ngIf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-arrow-up-circle"],[1,"icon-action-undo"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",14),t.TgZ(22,"select",15),t.NdJ("change",function(s){return i.loadApprovals(s)}),t.TgZ(23,"option",16),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",17),t._uU(27,"Trans LocK"),t.qZA(),t.TgZ(28,"option",18),t._uU(29,"Trans Post"),t.qZA(),t.TgZ(30,"option",19),t._uU(31,"Trans Void"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",1),t.TgZ(33,"div",20),t.TgZ(34,"h4",21),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.qZA(),t.TgZ(37,"div",22),t.TgZ(38,"a",23),t.NdJ("click",function(){return i.create()}),t._UZ(39,"i",24),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(42,"div",25),t.TgZ(43,"div",26),t.TgZ(44,"table",27),t.NdJ("matSortChange",function(s){return i.onSortOrder(s)}),t.ynx(45,28),t.YNc(46,He,3,3,"th",29),t.YNc(47,Ge,2,1,"td",30),t.BQk(),t.ynx(48,31),t.YNc(49,ze,3,3,"th",29),t.YNc(50,We,3,4,"td",30),t.BQk(),t.ynx(51,32),t.YNc(52,Xe,3,3,"th",29),t.YNc(53,Ke,2,1,"td",30),t.BQk(),t.ynx(54,33),t.YNc(55,ti,3,3,"th",29),t.YNc(56,ei,2,1,"td",30),t.BQk(),t.ynx(57,34),t.YNc(58,ii,3,3,"th",29),t.YNc(59,ni,2,1,"td",30),t.BQk(),t.ynx(60,35),t.YNc(61,si,3,3,"th",36),t.YNc(62,di,9,7,"td",30),t.BQk(),t.YNc(63,mi,1,0,"tr",37),t.YNc(64,hi,1,0,"tr",38),t.qZA(),t.ynx(65),t.TgZ(66,"mat-paginator",39),t.NdJ("page",function(s){return i.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,13,"Inventory_Transfer")," "),t.xp6(6),t.hij("",t.lcZ(11,15,"Inventory_Transfer")," "),t.xp6(3),t.hij("",t.lcZ(14,17,"Inventory_Transfer")," "),t.xp6(11),t.Oqu(t.lcZ(25,19,"Transfer_List")),t.xp6(11),t.Oqu(t.lcZ(36,21,"Transfer_List")),t.xp6(5),t.Oqu(t.lcZ(41,23,"Add_New_Transfer")),t.xp6(4),t.Q6J("dataSource",i.data),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("length",i.totalItemsCount)("pageSize",i.pageService.pageCount)("pageSizeOptions",i.pageService.selectItemsPerPage))},directives:[a.YN,a.Kr,h.BZ,Z.YE,h.w1,h.fO,h.Dz,h.as,h.nj,A.NW,h.ge,Z.nU,h.ev,p.O5,V.gM,h.XQ,h.Gk],pipes:[O.X$,p.uU],encapsulation:2}),o})()}];let pi=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[q.Bz.forChild(ui)],q.Bz]}),o})(),gi=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[pi,N.m],p.ez]}),o})()},4803:(X,Q,g)=>{g.d(Q,{a:()=>q});var p=g(7716),N=g(2238);let q=(()=>{class a{constructor(Z){this.dialogRef=Z,this.modalTitle=""}onNoClick(){this.dialogRef.close()}}return a.\u0275fac=function(Z){return new(Z||a)(p.Y36(N.so))},a.\u0275cmp=p.Xpm({type:a,selectors:[["delete-confirmation-dialog"]],decls:9,vars:2,consts:[["mat-dialog-content","",1,"text-danger"],["mat-dialog-actions",""],[1,"btn","btn-primary",3,"mat-dialog-close"],[1,"btn","btn-danger",3,"click"]],template:function(Z,h){1&Z&&(p.TgZ(0,"div",0),p.TgZ(1,"h4"),p._uU(2),p.qZA(),p.qZA(),p.TgZ(3,"div",1),p.TgZ(4,"button",2),p._uU(5,"Yes"),p.qZA(),p._uU(6," \xa0 "),p.TgZ(7,"button",3),p.NdJ("click",function(){return h.onNoClick()}),p._uU(8,"No"),p.qZA(),p.qZA()),2&Z&&(p.xp6(2),p.Oqu(""!==h.modalTitle?h.modalTitle:"Are you sure ?"),p.xp6(2),p.Q6J("mat-dialog-close",!0))},directives:[N.xY,N.H8,N.ZT],encapsulation:2}),a})()},4041:(X,Q,g)=>{g.d(Q,{r:()=>A,R:()=>Z});var p=g(7716),N=g(8583),q=g(4885);function a(h,_){1&h&&(p.TgZ(0,"div",1),p._UZ(1,"mat-progress-spinner",2),p.qZA())}let A=(()=>{class h{constructor(){this.isLoading=!1}}return h.\u0275fac=function(C){return new(C||h)},h.\u0275cmp=p.Xpm({type:h,selectors:[["spinner-loader"]],inputs:{isLoading:"isLoading"},decls:1,vars:1,consts:[["style","display: flex; justify-content: center; align-items: center; background: white;",4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center","background","white"],["color","primary","strokeWidth","3","diameter","30","mode","indeterminate"]],template:function(C,t){1&C&&p.YNc(0,a,2,0,"div",0),2&C&&p.Q6J("ngIf",t.isLoading)},directives:[N.O5,q.Ou],encapsulation:2}),h})();function Z(h,_){return C=>{const I=C.controls[_];I.errors&&!I.errors.confirmedValidator||I.setErrors(C.controls[h].value!==I.value?{confirmedValidator:!0}:null)}}}}]);