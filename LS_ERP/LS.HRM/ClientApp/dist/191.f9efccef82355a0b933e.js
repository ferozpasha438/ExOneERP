"use strict";(self.webpackChunkclient_app=self.webpackChunkclient_app||[]).push([[191],{9191:(tt,E,m)=>{m.r(E),m.d(E,{PurchasemgsetupModule:()=>Bo});var c=m(8583),w=m(7453),y=m(4655),s=m(3679),U=m(9692),T=m(1494),p=m(2789),_=m(5289),t=m(7716),q=m(3048);let O=(()=>{class o{constructor(e){var a;e.SetApiEndPoint(null===(a=e.getUser())||void 0===a?void 0:a.popUrl)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(q._))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ParentOptMgtComponent"]],decls:0,vars:0,template:function(e,a){},encapsulation:2}),o})();var V=m(4803),j=m(5291),k=m(1841),C=m(5830),I=m(7278),Z=m(2238),A=m(2013),b=m(7928),v=m(6397),G=m(4376),H=m(3250),x=m(9790),W=m(4246);function pt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",62),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",62),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td",51),t.TgZ(24,"i",63),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().editInvoiceItem(r)}),t.qZA(),t._uU(25," \xa0 "),t.TgZ(26,"i",64),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().deleteInvoiceItem(r)}),t.qZA(),t._uU(27," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.tranItemCode),t.xp6(2),t.Oqu(e.tranItemName),t.xp6(2),t.Oqu(e.tranItemUnitCode),t.xp6(2),t.Oqu(e.tranUOMFactor),t.xp6(2),t.Oqu(e.tranItemCost),t.xp6(2),t.Oqu(e.tranItemQty),t.xp6(2),t.Oqu(e.tranTotCost),t.xp6(2),t.Oqu(e.discPer),t.xp6(2),t.Oqu(e.discAmt),t.xp6(2),t.Oqu(e.itemTaxPer),t.xp6(2),t.Oqu(e.taxAmount)}}const R=function(){return{standalone:!0}};let rt=(()=>{class o{constructor(e,a,i,r,l,d,h,u,g,L,f){this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.utilService=d,this.dialogRef=h,this.notifyService=u,this.validationService=g,this.pageService=L,this.dialog=f,this.displayedColumns=["purchaseOrderNO","tranDate","invRefNumber","branchCode","vendCode","paymentID","taxId","Actions"],this.searchValue="",this.sortingOrder="id desc",this.customerList=[],this.companyList=[],this.paymentTermsList=[],this.branchList=[],this.productList=[],this.vatList=[],this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.DiscPerc=0,this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isVatIncluded=!1,this.isQuantityLoading=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.ShipmentCodeList=[],this.CurrencyCodeList=[],this.TaxCodeList=[],this.VenCodeList=[],this.compCodeList=[],this.BranchCodeList=[],this.VenNameList=[],this.PaymentTermList=[],this.ItemCodeList=[],this.ItemNameList=[],this.UOMList=[],this.PurchaseRequestList=[],this.warehouseList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.isshown=!1,this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="0",this.discAmt=0,this.itemTax="",this.itemTaxPer="0",this.taxAmount=0,this.itemTracking=0,this.isloadPRdata=!1}ngOnInit(){this.initialLoading(),this.setForm(),this.loadTaxCode(),this.loadVenCode(),this.loadCompCode(),this.loadBranchCode(),this.loadVenName(),this.loadPaymentTerm(),this.loadItemCode(),this.loadItemName(),this.loadUnitCode(),this.loadCurrencyCode(),this.loadShipmentCode(),this.loadPurchaseRequest(),this.loadWarehouses(),this.form.patchValue({trantype:"2"}),this.id>0&&this.edit()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadUser(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadUser(e,a,i,r){this.data=new p.by(this.getData()),this.totalItemsCount=2}loadCompCode(){this.apiService.getall("PurchaseOrder/GetCompSelectList").subscribe(e=>{e&&(this.compCodeList=e)})}loadBranchCode(){this.apiService.getall("PurchaseOrder/GetBranchSelectList").subscribe(e=>{e&&(this.BranchCodeList=e)})}loadTaxCode(){this.apiService.getall("PurchaseOrder/GetTaxSelectList").subscribe(e=>{e&&(this.TaxCodeList=e)})}loadVenCode(){this.apiService.getall("PurchaseOrder/GetVendorCodeSelectList").subscribe(e=>{e&&(this.VenCodeList=e)})}loadVenName(){this.apiService.getall("PurchaseOrder/GetVendorNameSelectList").subscribe(e=>{e&&(this.VenNameList=e)})}loadPaymentTerm(){this.apiService.getall("PurchaseOrder/GetPaymentTermSelectList").subscribe(e=>{e&&(this.PaymentTermList=e)})}loadItemCode(){this.apiService.getall("PurchaseOrder/GetItemCodeSelectList").subscribe(e=>{e&&(this.ItemCodeList=e,this.ItemCodeList.forEach(a=>{a.text=a.textTwo+" ("+a.value+")"}))})}loadItemName(){this.apiService.getall("PurchaseOrder/GetItemNameSelectList").subscribe(e=>{e&&(this.ItemNameList=e)})}loadUnitCode(){this.apiService.getall("PurchaseOrder/GetUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadCurrencyCode(){this.apiService.getall("PurchaseOrder/GetCurrencySelectList").subscribe(e=>{e&&(this.CurrencyCodeList=e)})}loadShipmentCode(){this.apiService.getall("PurchaseOrder/GetShipmentSelectList").subscribe(e=>{e&&(this.ShipmentCodeList=e)})}loadUomdata(e){let i=this.tranItemCode+"_"+e.value;i?this.apiService.getall(`PurchaseOrder/ProductUomtPriceItem/${i}`).subscribe(r=>{r&&(this.tranUOMFactor=r.tranItemUomFactor,this.tranItemCost=r.itemAvgcost)}):(this.unitType="",this.description="")}getData(){return[]}setForm(){this.form=this.fb.group({compCode:["",s.kI.required],branchCode:["",s.kI.required],tranDate:["",s.kI.required],deliveryDate:["",s.kI.required],invRefNumber:["",s.kI.required],venCatCode:["",s.kI.required],docNumber:["",s.kI.required],taxId:["",s.kI.required],remarks:["",s.kI.required],poNotes:["",s.kI.required],trantype:["",s.kI.required],vendCode:["",s.kI.required],paymentID:["",s.kI.required],taxInclusive:["",s.kI.required],tranCurrencyCode:["",s.kI.required],tranShipMode:[""],shipmentMode:[""],fromPr:[""],whCode:["",s.kI.required]})}loadPurchaseRequest(){this.apiService.getall("PurchaseOrder/GetPrSelectList").subscribe(e=>{e&&(this.PurchaseRequestList=e)})}loadWarehouses(){this.apiService.getall("warehouse/getSelectWarehouseList").subscribe(e=>{e&&(this.warehouseList=e)})}loadPRdata(e){this.apiService.getall(`PurchaseOrder/GetPRList/${e.value}`).subscribe(i=>{i&&(this.isReadOnly=!0,this.form.patchValue(i),this.isloadPRdata=!0,this.form.patchValue({tranDate:`${i.tranDate.split("T")[0]}`}),i.deliveryDate&&this.form.patchValue({deliveryDate:`${i.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${i.compCode}`}),this.form.patchValue({tranCurrencyCode:`${i.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${i.poNotes}`}),this.id=i.id,this.form.patchValue({trantype:"2"}),this.listOfInvoices=[],i.itemList.forEach(l=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:l.tranItemCode,tranItemName:l.tranItemName,tranItemName2:l.tranItemName2,tranItemQty:l.tranItemQty,tranItemUnitCode:l.tranItemUnitCode,tranUOMFactor:l.tranUOMFactor,tranItemCost:l.tranItemCost,tranTotCost:l.tranTotCost,discPer:l.discPer,discAmt:l.discAmt,itemTax:l.itemTax,itemTaxPer:l.itemTaxPer,taxAmount:l.taxAmount,itemTracking:l.itemTracking})}),this.setGrandTotal())})}loadList(e,a,i,r,l=""){this.isLoading=!0,this.apiService.getPagination("PurchaseOrder/GetPagedPurchaseOrderList",this.utilService.getQueryString(e,a,i,r)).subscribe(d=>{this.totalItemsCount=0,this.data=new p.by(d.items),this.totalItemsCount=d.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,this.isLoading=!1},d=>this.utilService.ShowApiErrorMessage(d))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("PurchaseOrder",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,V.a).afterClosed().subscribe(i=>{i&&e>0&&this.apiService.delete("PurchaseOrder",e).subscribe(r=>{this.refresh(),this.utilService.OkMessage()})},i=>this.utilService.ShowApiErrorMessage(i))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(r=>{r&&this.form.controls.taxIdNumber.setValue(r.vatNumber)})}loadBranchs(e){let a=e.target.value;a&&this.apiService.getall(`branch/getSelectSysBranchListByComId/${a}`).subscribe(i=>{i&&(this.branchList=i)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let a=e.value;a?this.apiService.getall(`product/productUnitPriceItem/${a}`).subscribe(r=>{r&&(this.product=r.nameEN,this.unitType=r.unitTypeEN,this.description=r.description,this.price=r.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.tranTotCost>0&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnitCode:this.tranItemUnitCode,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let a=this.listOfInvoices.findIndex(i=>i.sequence===e);this.listOfInvoices.splice(a,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnitCode=e.tranItemUnitCode,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.listOfInvoices.forEach(e=>{this.grandInvoiceTotal+=e.tranTotCost+e.taxAmount,this.grandVatTotal+=e.taxAmount,this.grandTotal+=e.tranTotCost}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(3),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(3),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(3)}closeModel(){this.ngOnInit(),this.listOfInvoices=[],this.dialogRef.close()}setToDefault(){this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="0",this.discAmt=0,this.itemTax="",this.isVatIncluded||(this.itemTaxPer="0"),this.taxAmount=0,this.itemTracking=0}calculate(){var i=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(i.toString()),this.calculateDis(),this.calculatetaxAmount()}setTaxValue(e){const a=e.target.value;a&&(this.isVatIncluded="0"!=a,this.itemTaxPer="0",this.taxAmount=0,this.form.controls.taxId.setValue(""))}loadItemTax(e){this.isVatIncluded&&(this.itemTaxPer=e.text)}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=parseFloat(this.vat.toString());parseFloat(this.discPer)>100&&(this.discPer="0");var a=parseFloat(this.discPer),l=parseFloat((this.tranItemQty*this.tranItemCost).toString()),d=parseFloat((l*a/100).toFixed(2));l=parseFloat((l-d).toString()),this.discAmt=d,this.tranTotCost=parseFloat(l.toString()),parseFloat(this.itemTaxPer),""!=this.form.value.taxInclusive?0==this.form.value.taxInclusive?(this.taxAmount=0,this.itemTaxPer="0"):this.taxAmount=parseFloat((l*e/100).toFixed(2)):(this.taxAmount=0,this.itemTaxPer="0"),this.tranTotCost=parseFloat(this.taxAmount.toString())+parseFloat(l.toString())}}calculatetaxAmount(){if(""!=this.form.value.taxInclusive&&"1"==this.form.value.taxInclusive){var e=this.tranTotCost,a=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*a/100).toFixed(2))}else this.taxAmount=0,this.itemTaxPer="0"}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.isloadPRdata&&(this.form.value.fromPr="FPR"),this.listOfInvoices.length>0?(this.form.value.Prcode="0",this.form.value.vendCode=this.form.value.venCatCode,this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.grandTotal=0,this.DiscPerc=0,this.discAmt=0,this.grandVatTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.DiscPerc+=parseFloat(e.discPer),this.discAmt+=e.discAmt}),this.form.value.tranTotalCost=this.grandTotal,this.form.value.taxes=this.grandVatTotal,this.form.value.tranDiscPer=this.DiscPerc,this.form.value.tranDiscAmount=this.discAmt,this.apiService.post("PurchaseOrder/CreatePurchaserequest",this.form.value).subscribe(e=>{this.reset(),this.dialogRef.close(!0),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.notifyService.showError("Line Items Empty")):this.utilService.FillUpFields()}loadTaxdata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${a}`).subscribe(i=>{i&&(this.tranItemName=i[0].shortName),this.loadUomList(a)})}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(i=>{i&&(this.UOMList=i)})}loadVendata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${a}`).subscribe(i=>{i&&(this.form.patchValue({vendCode:`${i.vendName}`}),this.form.patchValue({paymentID:`${i.poTermsCode}`}))})}reset(){this.form.reset(),this.listOfInvoices=[],this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr=""}edit(){this.listOfInvoices=[],this.apiService.get("PurchaseOrder",this.id).subscribe(e=>{e&&(this.isReadOnly=!0,this.form.patchValue(e),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),e.deliveryDate&&this.form.patchValue({deliveryDate:`${e.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${e.compCode}`}),this.form.patchValue({tranCurrencyCode:`${e.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${e.poNotes}`}),e.itemList.forEach(i=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:i.tranItemCode,tranItemName:i.tranItemName,tranItemName2:i.tranItemName2,tranItemQty:i.tranItemQty,tranItemUnitCode:i.tranItemUnitCode,tranUOMFactor:i.tranUOMFactor,tranItemCost:i.tranItemCost,tranTotCost:i.tranTotCost,discPer:i.discPer,discAmt:i.discAmt,itemTax:i.itemTax,itemTaxPer:i.itemTaxPer,taxAmount:i.taxAmount,itemTracking:i.itemTracking})}),this.setGrandTotal(),this.id=e.id)})}view(){this.listOfInvoices=[],this.apiService.get("PurchaseOrder",this.id).subscribe(e=>{e&&(this.isReadOnly=!1,this.form.patchValue(e),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),e.deliveryDate&&this.form.patchValue({deliveryDate:`${e.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${e.compCode}`}),this.form.patchValue({tranCurrencyCode:`${e.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${e.poNotes}`}),this.listOfInvoices=[],e.itemList.forEach(i=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:i.tranItemCode,tranItemName:i.tranItemName,tranItemName2:i.tranItemName2,tranItemQty:i.tranItemQty,tranItemUnitCode:i.tranItemUnitCode,tranUOMFactor:i.tranUOMFactor,tranItemCost:i.tranItemCost,tranTotCost:i.tranTotCost,discPer:i.discPer,discAmt:i.discAmt,itemTax:i.itemTax,itemTaxPer:i.itemTaxPer,taxAmount:i.taxAmount,itemTracking:i.itemTracking})}),this.setGrandTotal(),this.id=e.id)})}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}approvePurchaseOrder(e){this.openApprovalDialog(e.branchCode,e.purchaseOrderNO,_.Oi.create,"Purchase_Order","Save","PO",j.$)}openApprovalDialog(e,a,i,r,l,d,h){let u=this.openApprovalDialog1(this.dialog,h);u.componentInstance.dbops=i,u.componentInstance.modalTitle=r,u.componentInstance.modalBtnTitle=l,u.componentInstance.serviceType=d,u.componentInstance.serviceCode=a,u.componentInstance.branchCode=e,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}openApprovalDialog1(e,a){return e.open(a,{disableClose:!0})}AccountPosting(e){this.apiService.getall(`PurchaseOrder/AccountsPosting/${e}`).subscribe(a=>{a&&(this.utilService.OkMessage(),this.refresh())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(Z.so),t.Y36(A.g),t.Y36(b.R),t.Y36(v.N),t.Y36(Z.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdatepurchaseorder"]],viewQuery:function(e,a){if(1&e&&(t.Gf(U.NW,7),t.Gf(T.YE,7)),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},decls:305,vars:277,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"col-md-6","col-lg-6"],[1,"form-group",2,"padding-left","1235px"],[1,"mr-sm-2"],["bindLabel","text","bindValue","value","formControlName","Prcode",2,"width","200px",3,"items","change"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["bindLabel","text","bindValue","value","formControlName","compCode",3,"items"],[3,"control"],["bindLabel","text","bindValue","value","formControlName","whCode",3,"items"],["bindLabel","text","bindValue","value","formControlName","branchCode",3,"items"],["formControlName","trantype",1,"custom-select","mr-sm-2"],["value",""],["value","2"],["bindLabel","text","bindValue","value","formControlName","venCatCode",3,"items","change"],["type","date","formControlName","tranDate",1,"form-control",3,"placeholder"],["type","date","formControlName","deliveryDate",1,"form-control",3,"placeholder"],["type","text","formControlName","invRefNumber",1,"form-control",3,"placeholder"],["type","text","readonly","","formControlName","vendCode",1,"form-control",3,"placeholder"],["type","text","formControlName","docNumber",1,"form-control",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","paymentID",3,"items"],["id","taxid","formControlName","taxInclusive",1,"custom-select","mr-sm-2",3,"change"],["value","1"],["value","0"],["bindLabel","text","bindValue","value","formControlName","taxId",3,"items","change"],["bindLabel","text","bindValue","value","formControlName","tranCurrencyCode",3,"items"],[1,"row"],["bindLabel","text","bindValue","value","formControlName","tranShipMode",3,"items"],["type","text","formControlName","shipmentMode",1,"form-control",3,"placeholder"],["formControlName","remarks",1,"form-control",3,"placeholder"],["formControlName","poNotes",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["width","18%"],["width","8%"],["width","11%"],["bindLabel","text","bindValue","value",2,"width","250px",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","blur"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","change","blur"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","blur"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"click"],[1,"icon-plus"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","6","rowspan","5"],[1,"text-right","bgcolor"],[1,"bgcolor"],[1,"text-right","bgcolor_bottom"],[1,"bgcolor_bottom"],[1,"col-lg-12","col-md-12","text-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"disabled","value"],[1,"text-right"],[1,"icon-note","cpointer",3,"click"],[1,"icon-trash","cpointer",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return a.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return a.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"label",4),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"ng-select",5),t.NdJ("change",function(r){return a.loadPRdata(r)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.TgZ(13,"div",7),t.TgZ(14,"div",8),t.TgZ(15,"div",7),t.TgZ(16,"div",9),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"label",4),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"ng-select",13),t._UZ(24,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"div",12),t.TgZ(27,"label",4),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"ng-select",15),t._UZ(31,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(32,"div",11),t.TgZ(33,"div",12),t.TgZ(34,"label",4),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"ng-select",16),t._UZ(38,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(39,"div",11),t.TgZ(40,"div",12),t.TgZ(41,"label",4),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"select",17),t.TgZ(45,"option",18),t._uU(46,"Choose TranType Code"),t.qZA(),t.ynx(47),t.TgZ(48,"option",19),t._uU(49,"Purchase Order"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",11),t.TgZ(51,"div",12),t.TgZ(52,"label",4),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"ng-select",20),t.NdJ("change",function(r){return a.loadVendata(r)}),t.qZA(),t._UZ(56,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(57,"div",11),t.TgZ(58,"div",12),t.TgZ(59,"label",4),t._uU(60),t.ALo(61,"translate"),t.qZA(),t._UZ(62,"input",21),t.ALo(63,"translate"),t.ALo(64,"translate"),t.qZA(),t.qZA(),t.TgZ(65,"div",11),t.TgZ(66,"div",12),t.TgZ(67,"label",4),t._uU(68),t.ALo(69,"translate"),t.qZA(),t._UZ(70,"input",22),t.ALo(71,"translate"),t.ALo(72,"translate"),t.qZA(),t.qZA(),t.TgZ(73,"div",11),t.TgZ(74,"div",12),t.TgZ(75,"label",4),t._uU(76),t.ALo(77,"translate"),t.qZA(),t._UZ(78,"input",23),t.ALo(79,"translate"),t.ALo(80,"translate"),t.qZA(),t.qZA(),t.TgZ(81,"div",11),t.TgZ(82,"div",12),t.TgZ(83,"label",4),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._UZ(86,"input",24),t.ALo(87,"translate"),t.ALo(88,"translate"),t._UZ(89,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(90,"div",11),t.TgZ(91,"div",12),t.TgZ(92,"label",4),t._uU(93),t.ALo(94,"translate"),t.qZA(),t._UZ(95,"input",25),t.ALo(96,"translate"),t.ALo(97,"translate"),t.qZA(),t.qZA(),t.TgZ(98,"div",11),t.TgZ(99,"div",12),t.TgZ(100,"label",4),t._uU(101),t.ALo(102,"translate"),t.qZA(),t._UZ(103,"ng-select",26),t._UZ(104,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(105,"div",11),t.TgZ(106,"div",12),t.TgZ(107,"label",4),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.TgZ(110,"select",27),t.NdJ("change",function(r){return a.setTaxValue(r)}),t.TgZ(111,"option",18),t._uU(112,"Choose Tax Code"),t.qZA(),t.ynx(113),t.TgZ(114,"option",28),t._uU(115,"Yes"),t.qZA(),t.TgZ(116,"option",29),t._uU(117,"NO"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(118,"div",11),t.TgZ(119,"div",12),t.TgZ(120,"label",4),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.TgZ(123,"ng-select",30),t.NdJ("change",function(r){return a.loadItemTax(r)}),t.qZA(),t._UZ(124,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(125,"div",11),t.TgZ(126,"div",12),t.TgZ(127,"label",4),t._uU(128),t.ALo(129,"translate"),t.qZA(),t._UZ(130,"ng-select",31),t._UZ(131,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(132,"div",2),t.TgZ(133,"label",4),t._uU(134),t.ALo(135,"translate"),t.qZA(),t.TgZ(136,"div",32),t.TgZ(137,"div",2),t._UZ(138,"ng-select",33),t.qZA(),t.TgZ(139,"div",2),t._UZ(140,"input",34),t.ALo(141,"translate"),t.ALo(142,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(143,"div",2),t.TgZ(144,"div",12),t.TgZ(145,"label",4),t._uU(146),t.ALo(147,"translate"),t.qZA(),t._UZ(148,"textarea",35),t.ALo(149,"translate"),t.ALo(150,"translate"),t.qZA(),t.qZA(),t.TgZ(151,"div",2),t.TgZ(152,"div",12),t.TgZ(153,"label",4),t._uU(154),t.ALo(155,"translate"),t.qZA(),t._UZ(156,"textarea",36),t.ALo(157,"translate"),t.ALo(158,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(159,"div",37),t.TgZ(160,"table",38),t.TgZ(161,"thead"),t.TgZ(162,"tr"),t.TgZ(163,"th",39),t._uU(164),t.ALo(165,"translate"),t.qZA(),t.TgZ(166,"th",39),t._uU(167),t.ALo(168,"translate"),t.qZA(),t.TgZ(169,"th"),t._uU(170),t.ALo(171,"translate"),t.qZA(),t.TgZ(172,"th",40),t._uU(173),t.ALo(174,"translate"),t.qZA(),t.TgZ(175,"th",41),t._uU(176),t.ALo(177,"translate"),t.qZA(),t.TgZ(178,"th"),t._uU(179),t.ALo(180,"translate"),t.qZA(),t.TgZ(181,"th"),t._uU(182),t.ALo(183,"translate"),t.qZA(),t.TgZ(184,"th"),t._uU(185),t.ALo(186,"translate"),t.qZA(),t.TgZ(187,"th"),t._uU(188),t.ALo(189,"translate"),t.qZA(),t.TgZ(190,"th"),t._uU(191),t.ALo(192,"translate"),t.qZA(),t.TgZ(193,"th"),t._uU(194),t.ALo(195,"translate"),t.qZA(),t._UZ(196,"th"),t.qZA(),t.qZA(),t.TgZ(197,"tbody"),t.TgZ(198,"tr"),t.TgZ(199,"td"),t.TgZ(200,"ng-select",42),t.NdJ("ngModelChange",function(r){return a.tranItemCode=r})("change",function(r){return a.loadTaxdata(r)}),t.qZA(),t.qZA(),t.TgZ(201,"td"),t.TgZ(202,"input",43),t.NdJ("ngModelChange",function(r){return a.tranItemName=r}),t.ALo(203,"translate"),t.qZA(),t.qZA(),t.TgZ(204,"td"),t.TgZ(205,"ng-select",44),t.NdJ("ngModelChange",function(r){return a.tranItemUnitCode=r})("change",function(r){return a.loadUomdata(r)}),t.qZA(),t.qZA(),t.TgZ(206,"td"),t.TgZ(207,"input",43),t.NdJ("ngModelChange",function(r){return a.tranUOMFactor=r}),t.ALo(208,"translate"),t.qZA(),t.qZA(),t.TgZ(209,"td"),t.TgZ(210,"input",45),t.NdJ("ngModelChange",function(r){return a.tranItemCost=r})("keyup",function(){return a.calculate()}),t.ALo(211,"translate"),t.qZA(),t.qZA(),t.TgZ(212,"td"),t.TgZ(213,"input",45),t.NdJ("ngModelChange",function(r){return a.tranItemQty=r})("keyup",function(){return a.calculate()}),t.ALo(214,"translate"),t.qZA(),t.qZA(),t.TgZ(215,"td"),t.TgZ(216,"input",46),t.NdJ("ngModelChange",function(r){return a.tranTotCost=r})("blur",function(){return a.calculatetaxAmount()}),t.ALo(217,"translate"),t.qZA(),t.qZA(),t.TgZ(218,"td"),t.TgZ(219,"input",47),t.NdJ("ngModelChange",function(r){return a.discPer=r})("change",function(){return a.calculateDis()})("blur",function(){return a.calculatetaxAmount()}),t.ALo(220,"translate"),t.qZA(),t.qZA(),t.TgZ(221,"td"),t.TgZ(222,"input",46),t.NdJ("ngModelChange",function(r){return a.discAmt=r})("blur",function(){return a.calculatetaxAmount()}),t.ALo(223,"translate"),t.qZA(),t.qZA(),t.TgZ(224,"td"),t.TgZ(225,"input",48),t.NdJ("ngModelChange",function(r){return a.itemTaxPer=r})("blur",function(){return a.calculatetaxAmount()}),t.ALo(226,"translate"),t.qZA(),t.qZA(),t.TgZ(227,"td"),t.TgZ(228,"input",43),t.NdJ("ngModelChange",function(r){return a.taxAmount=r}),t.ALo(229,"translate"),t.qZA(),t.qZA(),t.TgZ(230,"td"),t.TgZ(231,"button",49),t.NdJ("click",function(){return a.addInvoice()}),t._UZ(232,"i",50),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(233,"thead"),t.TgZ(234,"tr"),t.TgZ(235,"th"),t._uU(236),t.ALo(237,"translate"),t.qZA(),t.TgZ(238,"th"),t._uU(239),t.ALo(240,"translate"),t.qZA(),t.TgZ(241,"th"),t._uU(242),t.ALo(243,"translate"),t.qZA(),t.TgZ(244,"th"),t._uU(245),t.ALo(246,"translate"),t.qZA(),t.TgZ(247,"th"),t._uU(248),t.ALo(249,"translate"),t.qZA(),t.TgZ(250,"th"),t._uU(251),t.ALo(252,"translate"),t.qZA(),t.TgZ(253,"th"),t._uU(254),t.ALo(255,"translate"),t.qZA(),t.TgZ(256,"th"),t._uU(257),t.ALo(258,"translate"),t.qZA(),t.TgZ(259,"th"),t._uU(260),t.ALo(261,"translate"),t.qZA(),t.TgZ(262,"th"),t._uU(263),t.ALo(264,"translate"),t.qZA(),t.TgZ(265,"th"),t._uU(266),t.ALo(267,"translate"),t.qZA(),t._UZ(268,"th",51),t.qZA(),t.qZA(),t.TgZ(269,"tbody"),t.YNc(270,pt,28,11,"tr",52),t.qZA(),t.TgZ(271,"tfoot"),t.TgZ(272,"tr",53),t._UZ(273,"td",54),t.TgZ(274,"td",55),t._uU(275),t.ALo(276,"translate"),t.qZA(),t.TgZ(277,"td",55),t._uU(278),t.ALo(279,"decimalpipe"),t.qZA(),t._UZ(280,"td",56),t.qZA(),t.TgZ(281,"tr",53),t.TgZ(282,"td",55),t._uU(283),t.ALo(284,"translate"),t.qZA(),t.TgZ(285,"td",55),t._uU(286),t.ALo(287,"decimalpipe"),t.qZA(),t._UZ(288,"td",56),t.qZA(),t.TgZ(289,"tr",53),t.TgZ(290,"td",57),t._uU(291),t.ALo(292,"translate"),t.qZA(),t.TgZ(293,"td",57),t._uU(294),t.ALo(295,"decimalpipe"),t.qZA(),t._UZ(296,"td",58),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(297,"div",32),t.TgZ(298,"div",59),t.TgZ(299,"button",60),t.NdJ("click",function(){return a.closeModel()}),t._uU(300),t.ALo(301,"translate"),t.qZA(),t._uU(302," \xa0\xa0 "),t._UZ(303,"input",61),t.ALo(304,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,118,"Create_New_Purchase_Order")," "),t.xp6(4),t.Q6J("formGroup",a.form),t.xp6(4),t.Oqu(t.lcZ(10,120,"Purchase_Reuest_Number")),t.xp6(2),t.Q6J("items",a.PurchaseRequestList),t.xp6(10),t.Oqu(t.lcZ(22,122,"Organization")),t.xp6(2),t.Q6J("items",a.compCodeList),t.xp6(1),t.Q6J("control",a.form.controls.compCode),t.xp6(4),t.Oqu(t.lcZ(29,124,"Warehouse")),t.xp6(2),t.Q6J("items",a.warehouseList),t.xp6(1),t.Q6J("control",a.form.controls.whCode),t.xp6(4),t.Oqu(t.lcZ(36,126,"Branch")),t.xp6(2),t.Q6J("items",a.BranchCodeList),t.xp6(1),t.Q6J("control",a.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(43,128,"TranType")),t.xp6(11),t.hij(" ",t.lcZ(54,130,"Vendor_Code")," "),t.xp6(2),t.Q6J("items",a.VenCodeList),t.xp6(1),t.Q6J("control",a.form.controls.venCatCode),t.xp6(4),t.Oqu(t.lcZ(61,132,"Transaction_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(63,134,"Select")," ",t.lcZ(64,136,"Transaction_Date"),""),t.xp6(6),t.Oqu(t.lcZ(69,138,"Delivery_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(71,140,"Select")," ",t.lcZ(72,142,"Delivery_Date"),""),t.xp6(6),t.hij(" ",t.lcZ(77,144,"Invoice_Reference_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(79,146,"Please_Enter"),"  ",t.lcZ(80,148,"Invoice_Reference_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(85,150,"Vendor_Name")," "),t.xp6(2),t.hYB("placeholder","",t.lcZ(87,152,"Please_Enter")," ",t.lcZ(88,154,"Vendor_Name"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendCode),t.xp6(4),t.hij(" ",t.lcZ(94,156,"Document_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(96,158,"Please_Enter"),"  ",t.lcZ(97,160,"Category"),""),t.xp6(6),t.Oqu(t.lcZ(102,162,"Payment_Terms")),t.xp6(2),t.Q6J("items",a.PaymentTermList),t.xp6(1),t.Q6J("control",a.form.controls.paymentID),t.xp6(4),t.Oqu(t.lcZ(109,164,"VAT_Inclusive")),t.xp6(13),t.hij(" ",t.lcZ(122,166,"TAX Number")," "),t.xp6(2),t.Q6J("items",a.TaxCodeList),t.xp6(1),t.Q6J("control",a.form.controls.taxId),t.xp6(4),t.hij(" ",t.lcZ(129,168,"Currency")," "),t.xp6(2),t.Q6J("items",a.CurrencyCodeList),t.xp6(1),t.Q6J("control",a.form.controls.tranCurrencyCode),t.xp6(3),t.hij(" ",t.lcZ(135,170,"Shipment Mode")," "),t.xp6(4),t.Q6J("items",a.ShipmentCodeList),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(141,172,"Please_Enter"),"  ",t.lcZ(142,174,"Shipment Mode"),""),t.xp6(6),t.hij(" ",t.lcZ(147,176,"Remarks")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(149,178,"Please_Enter"),"  ",t.lcZ(150,180,"Remarks"),""),t.xp6(6),t.hij(" ",t.lcZ(155,182,"Invoice_Notes")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(157,184,"Please_Enter"),"  ",t.lcZ(158,186,"Invoice_Notes"),""),t.xp6(8),t.Oqu(t.lcZ(165,188,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(168,190,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(171,192,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(174,194,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(177,196,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(180,198,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(183,200,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(186,202,"Disc Per")),t.xp6(3),t.Oqu(t.lcZ(189,204,"Disc Amt")),t.xp6(3),t.Oqu(t.lcZ(192,206,"Item TaxPer")),t.xp6(3),t.Oqu(t.lcZ(195,208,"Tax Amount")),t.xp6(6),t.Q6J("items",a.ItemCodeList)("ngModel",a.tranItemCode)("ngModelOptions",t.DdM(266,R)),t.xp6(2),t.s9C("placeholder",t.lcZ(203,210,"tranItemName")),t.Q6J("ngModel",a.tranItemName)("ngModelOptions",t.DdM(267,R)),t.xp6(3),t.Q6J("items",a.UOMList)("ngModel",a.tranItemUnitCode)("ngModelOptions",t.DdM(268,R)),t.xp6(2),t.s9C("placeholder",t.lcZ(208,212,"tranUOMFactor")),t.Q6J("ngModel",a.tranUOMFactor)("ngModelOptions",t.DdM(269,R)),t.xp6(3),t.s9C("placeholder",t.lcZ(211,214,"tranItemCost")),t.Q6J("ngModel",a.tranItemCost)("ngModelOptions",t.DdM(270,R)),t.xp6(3),t.s9C("placeholder",t.lcZ(214,216,"Quantity")),t.Q6J("ngModel",a.tranItemQty)("ngModelOptions",t.DdM(271,R)),t.xp6(3),t.s9C("placeholder",t.lcZ(217,218,"tranTotCost")),t.Q6J("ngModel",a.tranTotCost)("ngModelOptions",t.DdM(272,R)),t.xp6(3),t.s9C("placeholder",t.lcZ(220,220,"discPer")),t.Q6J("ngModel",a.discPer)("ngModelOptions",t.DdM(273,R)),t.xp6(3),t.s9C("placeholder",t.lcZ(223,222,"discAmt")),t.Q6J("ngModel",a.discAmt)("ngModelOptions",t.DdM(274,R)),t.xp6(3),t.s9C("placeholder",t.lcZ(226,224,"itemTaxPer")),t.Q6J("ngModel",a.itemTaxPer)("ngModelOptions",t.DdM(275,R)),t.xp6(3),t.s9C("placeholder",t.lcZ(229,226,"taxAmount")),t.Q6J("ngModel",a.taxAmount)("ngModelOptions",t.DdM(276,R)),t.xp6(8),t.Oqu(t.lcZ(237,228,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(240,230,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(243,232,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(246,234,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(249,236,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(252,238,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(255,240,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(258,242,"Disc Per")),t.xp6(3),t.Oqu(t.lcZ(261,244,"Disc Amt")),t.xp6(3),t.Oqu(t.lcZ(264,246,"Item TaxPer")),t.xp6(3),t.Oqu(t.lcZ(267,248,"Tax Amount")),t.xp6(4),t.Q6J("ngForOf",a.listOfInvoices),t.xp6(5),t.Oqu(t.lcZ(276,250,"Total_Amount")),t.xp6(3),t.Oqu(t.lcZ(279,252,a.grandTotalStr)),t.xp6(5),t.Oqu(t.lcZ(284,254,"VAT_Amount")),t.xp6(3),t.Oqu(t.lcZ(287,256,a.grandVatTotalStr)),t.xp6(5),t.Oqu(t.lcZ(292,258,"Invoice_Total")),t.xp6(3),t.Oqu(t.lcZ(295,260,a.grandInvoiceTotalStr)),t.xp6(6),t.hij(" ",t.lcZ(301,262,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(304,264,"Save")),t.Q6J("disabled",a.isshown))},directives:[s._Y,s.JL,s.sg,G.w9,s.JJ,s.u,H.s,s.EJ,s.YN,s.Kr,s.Fj,s.On,c.sg],pipes:[x.X$,W.J],encapsulation:2}),o})(),ct=(()=>{class o{constructor(e){this.viewContainerRef=e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.s_b))},o.\u0275dir=t.lG2({type:o,selectors:[["","loadingComponent",""]]}),o})();class nt{constructor(n,e){this.component=n,this.data=e}}var J=m(4041);function ht(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",26),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,2,"Goods_Receipt_Number")," : ",e.item.tranNumber," ")}}function mt(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",26),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,2,"Purchase_ReturnNumber")," : ",e.item.tranNumber," ")}}function gt(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",26),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,2,"Purchase_OrderNumber")," : ",e.item.purchaseOrderNO," ")}}function Zt(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",26),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.AsE(" ",t.lcZ(3,2,"Purchase_RequestNumber")," : ",e.item.purchaseOrderNO," ")}}function _t(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",13),t._uU(8),t.qZA(),t.TgZ(9,"td",27),t._uU(10),t.qZA(),t.TgZ(11,"td",27),t._uU(12),t.qZA(),t.TgZ(13,"td",27),t._uU(14),t.qZA(),t.qZA()),2&o){const e=n.$implicit,a=n.index;t.xp6(2),t.hij(" ",a+1,""),t.xp6(2),t.hij(" ",e.tranItemCode," "),t.xp6(2),t.AsE(" ",e.tranItemName,", ",e.itemDescription," "),t.xp6(2),t.hij(" ",e.tranItemUnitCode," "),t.xp6(2),t.hij(" ",e.tranItemQty,""),t.xp6(2),t.hij(" ",e.tranItemCost,""),t.xp6(2),t.hij(" ",e.tranTotCost+e.discAmt,"")}}function At(o,n){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE("",t.lcZ(2,2,"Purchase_OrderNumber")," : ",e.item.purchaseOrderNO,"")}}function Tt(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",29),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.qZA()),2&o){const e=n.$implicit,a=n.index;t.xp6(2),t.hij(" Shipment ",a+1," "),t.xp6(2),t.lnq(" PO Quantity = ",e.tranItemQty,"; Received Quantity = ",e.receivingQty,"; Balance Quantity = ",e.balQty," "),t.xp6(2),t.AsE(" Unit Price = ",e.tranItemCost,"; Total = ",e.tranTotCost," ")}}function ft(o,n){if(1&o&&(t.TgZ(0,"table",3),t.TgZ(1,"tr"),t.TgZ(2,"th",28),t._uU(3,"Shipment Details"),t.qZA(),t.qZA(),t.YNc(4,Tt,7,6,"tr",17),t.qZA()),2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.shipmentList)}}function Ct(o,n){if(1&o&&(t.TgZ(0,"div",2),t.TgZ(1,"table",3),t.TgZ(2,"tr",4),t.TgZ(3,"td"),t._UZ(4,"img",5),t.qZA(),t.qZA(),t.YNc(5,ht,4,4,"tr",6),t.YNc(6,mt,4,4,"tr",6),t.YNc(7,gt,4,4,"tr",6),t.YNc(8,Zt,4,4,"tr",6),t.TgZ(9,"tr"),t.TgZ(10,"td"),t.TgZ(11,"Strong"),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"td",7),t.TgZ(14,"Strong"),t._uU(15),t.qZA(),t._uU(16),t.ALo(17,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"table",3),t.TgZ(19,"tr",8),t.TgZ(20,"td",9),t._uU(21," Vendor Details "),t.qZA(),t.TgZ(22,"td",9),t._uU(23," Ship To Details "),t.qZA(),t.qZA(),t.TgZ(24,"tr"),t.TgZ(25,"td"),t._uU(26," Vendor Number "),t.qZA(),t.TgZ(27,"td"),t._uU(28),t.qZA(),t.TgZ(29,"td"),t._uU(30," Name "),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.qZA(),t.qZA(),t.TgZ(33,"tr"),t.TgZ(34,"td"),t._uU(35," Vendor Name "),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.qZA(),t.TgZ(38,"td"),t._uU(39," Contact Person "),t.qZA(),t.TgZ(40,"td"),t._uU(41," - "),t.qZA(),t.qZA(),t.TgZ(42,"tr"),t.TgZ(43,"td"),t._uU(44," Phone "),t.qZA(),t.TgZ(45,"td"),t._uU(46),t.qZA(),t.TgZ(47,"td"),t._uU(48," Phone "),t.qZA(),t.TgZ(49,"td"),t._uU(50),t.qZA(),t.qZA(),t.TgZ(51,"tr"),t.TgZ(52,"td"),t._uU(53," Email "),t.qZA(),t.TgZ(54,"td"),t._uU(55),t.qZA(),t.TgZ(56,"td"),t._uU(57," Email "),t.qZA(),t.TgZ(58,"td"),t._uU(59),t.qZA(),t.qZA(),t.TgZ(60,"tr"),t.TgZ(61,"td"),t._uU(62," Address "),t.qZA(),t.TgZ(63,"td"),t._uU(64),t.qZA(),t.TgZ(65,"td"),t._uU(66," Address "),t.qZA(),t.TgZ(67,"td"),t._uU(68),t.qZA(),t.qZA(),t.qZA(),t.TgZ(69,"table",3),t.TgZ(70,"thead",10),t.TgZ(71,"tr"),t.TgZ(72,"th",11),t.TgZ(73,"h4"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(76,"tr"),t.TgZ(77,"th",12),t._uU(78," Line# "),t.qZA(),t.TgZ(79,"th"),t._uU(80," Item Code "),t.qZA(),t.TgZ(81,"th"),t._uU(82," Item Details "),t.qZA(),t.TgZ(83,"th",13),t._uU(84," Unit Of Measure"),t.qZA(),t.TgZ(85,"th",14),t._uU(86," Quantity "),t.qZA(),t.TgZ(87,"th",15),t._uU(88," Unit Price "),t.qZA(),t.TgZ(89,"th",16),t._uU(90," Total "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(91,"tbody"),t.YNc(92,_t,15,8,"tr",17),t.TgZ(93,"tr"),t.TgZ(94,"td",18),t.TgZ(95,"strong"),t._uU(96,"For Office Use Only"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(97,"tr"),t.TgZ(98,"td",19),t.TgZ(99,"strong"),t._uU(100,"Project:"),t.qZA(),t.qZA(),t.TgZ(101,"td",20),t._UZ(102,"strong"),t.qZA(),t.TgZ(103,"td",20),t._UZ(104,"strong"),t.qZA(),t.TgZ(105,"td",20),t.TgZ(106,"strong"),t._uU(107," Total Amount"),t.qZA(),t.qZA(),t.TgZ(108,"td",20),t.TgZ(109,"strong"),t._uU(110),t.qZA(),t.qZA(),t.qZA(),t.TgZ(111,"tr"),t.TgZ(112,"td",19),t.TgZ(113,"strong"),t._uU(114,"Department:"),t.qZA(),t.qZA(),t.TgZ(115,"td",20),t._UZ(116,"strong"),t.qZA(),t.TgZ(117,"td",20),t._UZ(118,"strong"),t.qZA(),t.TgZ(119,"td",20),t.TgZ(120,"strong"),t._uU(121,"Other Cost"),t.qZA(),t.qZA(),t.TgZ(122,"td",20),t.TgZ(123,"strong"),t._uU(124),t.qZA(),t.qZA(),t.qZA(),t.TgZ(125,"tr"),t.TgZ(126,"td",19),t.TgZ(127,"strong"),t._uU(128,"Branch:"),t.qZA(),t.qZA(),t.TgZ(129,"td",20),t._UZ(130,"strong"),t.qZA(),t.TgZ(131,"td",20),t._UZ(132,"strong"),t.qZA(),t.TgZ(133,"td",20),t.TgZ(134,"strong"),t._uU(135,"Discount Amount"),t.qZA(),t.qZA(),t.TgZ(136,"td",20),t.TgZ(137,"strong"),t._uU(138),t.qZA(),t.qZA(),t.qZA(),t.TgZ(139,"tr"),t.TgZ(140,"td",19),t.TgZ(141,"strong"),t._uU(142,"City:"),t.qZA(),t.qZA(),t.TgZ(143,"td",20),t._UZ(144,"strong"),t.qZA(),t.TgZ(145,"td",20),t._UZ(146,"strong"),t.qZA(),t.TgZ(147,"td",20),t.TgZ(148,"strong"),t._uU(149,"Net Total"),t.qZA(),t.qZA(),t.TgZ(150,"td",20),t.TgZ(151,"strong"),t._uU(152),t.qZA(),t.qZA(),t.qZA(),t.TgZ(153,"tr"),t.TgZ(154,"td",19),t.TgZ(155,"strong"),t._uU(156,"Person:"),t.qZA(),t.qZA(),t.TgZ(157,"td",20),t._UZ(158,"strong"),t.qZA(),t.TgZ(159,"td",20),t._UZ(160,"strong"),t.qZA(),t.TgZ(161,"td",20),t.TgZ(162,"strong"),t._uU(163,"VAT Amount"),t.qZA(),t.qZA(),t.TgZ(164,"td",20),t.TgZ(165,"strong"),t._uU(166),t.qZA(),t.qZA(),t.qZA(),t.TgZ(167,"tr"),t.TgZ(168,"td",19),t._UZ(169,"strong"),t.qZA(),t.TgZ(170,"td",20),t._UZ(171,"strong"),t.qZA(),t.TgZ(172,"td",20),t._UZ(173,"strong"),t.qZA(),t.TgZ(174,"td",20),t.TgZ(175,"strong"),t._uU(176,"Grand Total"),t.qZA(),t.qZA(),t.TgZ(177,"td",20),t.TgZ(178,"strong"),t._uU(179),t.qZA(),t.qZA(),t.qZA(),t.TgZ(180,"tr"),t.TgZ(181,"td",18),t._UZ(182,"strong"),t.qZA(),t.qZA(),t.TgZ(183,"tr"),t.TgZ(184,"td",19),t.TgZ(185,"strong"),t._uU(186,"Head Of Administration:"),t.qZA(),t.qZA(),t.TgZ(187,"td",20),t._UZ(188,"strong"),t.qZA(),t.TgZ(189,"td",21),t.TgZ(190,"strong"),t._uU(191,"Comments"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(192,"tr"),t.TgZ(193,"td",19),t._uU(194,"Name:Abduaziz Almalki"),t.qZA(),t._UZ(195,"td"),t.TgZ(196,"td",22),t._UZ(197,"strong"),t.qZA(),t.qZA(),t.TgZ(198,"tr"),t.TgZ(199,"td",19),t.TgZ(200,"strong"),t._uU(201,"Deputy General Manager:"),t.qZA(),t.qZA(),t.TgZ(202,"td",20),t._UZ(203,"strong"),t.qZA(),t.TgZ(204,"td",21),t.TgZ(205,"strong"),t._uU(206,"Comments"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(207,"tr"),t.TgZ(208,"td",19),t._uU(209,"Mohammed Almansaky"),t.qZA(),t.TgZ(210,"td"),t._UZ(211,"strong"),t.qZA(),t.TgZ(212,"td",22),t._UZ(213,"strong"),t.qZA(),t.qZA(),t.TgZ(214,"tr"),t.TgZ(215,"td",19),t.TgZ(216,"strong"),t._uU(217,"Operation Director:"),t.qZA(),t.qZA(),t.TgZ(218,"td",20),t._UZ(219,"strong"),t.qZA(),t.TgZ(220,"td",21),t.TgZ(221,"strong"),t._uU(222,"Comments"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(223,"tr"),t.TgZ(224,"td",19),t._uU(225,"Atif Alharbi"),t.qZA(),t.TgZ(226,"td"),t._UZ(227,"strong"),t.qZA(),t.TgZ(228,"td",21),t._UZ(229,"strong"),t.qZA(),t.qZA(),t.TgZ(230,"tr"),t.TgZ(231,"td",19),t.TgZ(232,"strong"),t._uU(233,"Procurement Head:"),t.qZA(),t.qZA(),t.TgZ(234,"td",20),t._UZ(235,"strong"),t.qZA(),t.TgZ(236,"td",21),t.TgZ(237,"strong"),t._uU(238,"Comments"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(239,"tr"),t.TgZ(240,"td",19),t._uU(241,"Name: Sahar Almalki"),t.qZA(),t.TgZ(242,"td"),t._UZ(243,"strong"),t.qZA(),t.TgZ(244,"td",21),t._UZ(245,"strong"),t.qZA(),t.qZA(),t.TgZ(246,"tr"),t.TgZ(247,"td",19),t.TgZ(248,"strong"),t._uU(249,"Finance Head"),t.qZA(),t.qZA(),t.TgZ(250,"td",20),t._UZ(251,"strong"),t.qZA(),t.TgZ(252,"td",21),t.TgZ(253,"strong"),t._uU(254,"Comments"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(255,"tr"),t.TgZ(256,"td",19),t._uU(257,"Faisal Alhussain"),t.qZA(),t.TgZ(258,"td"),t._UZ(259,"strong"),t.qZA(),t.TgZ(260,"td",23),t._UZ(261,"strong"),t.qZA(),t.TgZ(262,"td",24),t._UZ(263,"strong"),t.qZA(),t.qZA(),t.qZA(),t._UZ(264,"tfoot"),t.qZA(),t.TgZ(265,"table",3),t.TgZ(266,"tr"),t.TgZ(267,"td"),t._uU(268),t.qZA(),t.TgZ(269,"td"),t.YNc(270,At,3,4,"span",6),t.qZA(),t._UZ(271,"td"),t.qZA(),t.TgZ(272,"tr"),t.TgZ(273,"td"),t._uU(274," Effective Date: "),t.qZA(),t._UZ(275,"td"),t._UZ(276,"td"),t.qZA(),t.qZA(),t.YNc(277,ft,5,1,"table",25),t.qZA()),2&o){const e=t.oxw();t.xp6(4),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(1),t.Q6J("ngIf","grn"==e.data.from),t.xp6(1),t.Q6J("ngIf","prt"==e.data.from),t.xp6(1),t.Q6J("ngIf","PO"==e.data.from),t.xp6(1),t.Q6J("ngIf","PR"==e.data.from),t.xp6(4),t.hij(" ",e.typeOfSource," "),t.xp6(3),t.hij(" ",e.typeOfSource," Date: "),t.xp6(1),t.hij(" ",t.xi3(17,28,e.item.tranDate,"dd-MM-yyyy")," "),t.xp6(12),t.hij(" ",e.item.vendCode," "),t.xp6(4),t.hij(" ",e.company.companyName," "),t.xp6(5),t.hij(" ",e.item.vendName," "),t.xp6(9),t.hij(" ",e.item.vatNumber," "),t.xp6(4),t.hij(" ",e.company.phone," "),t.xp6(5),t.hij(" ",e.item.whName," "),t.xp6(4),t.hij(" ",e.company.email," "),t.xp6(5),t.hij(" ",e.item.vendAddress," "),t.xp6(4),t.hij(" ",e.company.companyAddress," "),t.xp6(6),t.hij(" ",t.lcZ(75,31,"PO"==e.data.from?"Purchase_Order_LineDetails":"PR"==e.data.from?"Purchase_Requisition_LineDetails":"prt"==e.data.from?"Purchase_Return_LineDetails":"Purchase_Order_Receipt_LineDetails"),""),t.xp6(18),t.Q6J("ngForOf",e.itemList),t.xp6(18),t.Oqu(e.item.tranTotalCost+e.item.tranDiscAmount),t.xp6(14),t.Oqu(e.item.ohCharges),t.xp6(14),t.Oqu(e.item.tranDiscAmount),t.xp6(14),t.Oqu(e.item.tranTotalCost),t.xp6(14),t.Oqu(e.item.taxes),t.xp6(13),t.Oqu(e.item.totalAmount+e.item.tranDiscAmount),t.xp6(89),t.hij(" Doc No: ",e.item.docNumber," "),t.xp6(2),t.Q6J("ngIf","prt"!=e.data.from),t.xp6(7),t.Q6J("ngIf",e.shipmentList)}}let vt=(()=>{class o{constructor(e,a,i,r){this.apiService=e,this.authService=a,this.utilService=i,this.notifyService=r,this.isLoading=!1,this.isArabic=!1,this.typeOfSource=""}ngOnInit(){this.data&&(this.loadSalesView(),this.typeOfSource="PO"==this.data.from?"Purchase Order":"PR"==this.data.from?"Purchase Requisition":"prt"==this.data.from?"Purchase Return":"Goods Received Note - GRN ")}loadSalesView(){this.isLoading=!0,this.apiService.getall(`PurchaseOrder/getPOPrintingOneList/${this.data.id}?type=${this.data.from}`).subscribe(e=>{this.isLoading=!1,e&&(this.item=e,this.itemList=e.itemList,this.shipmentList=e.shipmentList,this.company=e.company,this.isArabic=this.authService.isArabic())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(A.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-poprintingformatonepage"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"isLoading"],["id","Format3","class","p-1 shadow","style","text-align: @TextAlign",4,"ngIf"],["id","Format3",1,"p-1","shadow",2,"text-align","@TextAlign"],["border","1","cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","@TextAlign"],[1,"float-right",2,"width","200px","height","150px",3,"src"],[4,"ngIf"],[2,"text-align","right"],[2,"border","thin","background-color","whitesmoke"],["colspan","2",2,"width","50%","text-align","center"],[1,"alert-dark"],["colspan","7",1,"text-center"],[2,"width","10px"],[2,"width","150px"],[2,"width","50px","text-align","right"],[2,"width","115px","text-align","right"],[2,"width","120px","text-align","right"],[4,"ngFor","ngForOf"],["colspan","6",2,"text-align","left"],["colspan","2"],[1,"align-right",2,"text-align","right"],["colspan","3"],["colspan","3",1,"align-right",2,"text-align","right"],["colspan","2",1,"align-right",2,"text-align","right"],["colspan","3",2,"text-align","right"],["style","width:100%; padding-bottom:5px;","border","1","cellpadding","0","cellspacing","0","width","100%","class","ur_tablestyle",4,"ngIf"],["colspan","2",2,"text-align","right"],[2,"width","100px","text-align","right"],["colspan","3",1,"text-center"],[1,"text-center"]],template:function(e,a){1&e&&(t._UZ(0,"spinner-loader",0),t.YNc(1,Ct,278,33,"div",1)),2&e&&(t.Q6J("isLoading",a.isLoading),t.xp6(1),t.Q6J("ngIf",a.item&&a.company))},directives:[J.r,c.O5,c.sg],pipes:[c.uU,x.X$],encapsulation:2}),o})();function qt(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",16),t._uU(8),t.qZA(),t.TgZ(9,"td",18),t._uU(10),t.qZA(),t.TgZ(11,"td",18),t._uU(12),t.qZA(),t.TgZ(13,"td",19),t._uU(14),t.qZA(),t.qZA()),2&o){const e=n.$implicit,a=n.index;t.xp6(2),t.hij(" ",a+1,""),t.xp6(2),t.hij(" ",e.tranItemCode," "),t.xp6(2),t.AsE("",e.tranItemName," and ",e.itemDescription," "),t.xp6(2),t.hij(" ",e.tranItemUnitCode," "),t.xp6(2),t.hij(" ",e.tranItemQty," "),t.xp6(2),t.hij(" ",e.tranItemCost," "),t.xp6(2),t.hij(" ",e.tranItemQty*e.tranItemCost," ")}}function xt(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",25),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.qZA()),2&o){const e=n.$implicit,a=n.index;t.xp6(2),t.hij(" Shipment ",a+1," "),t.xp6(2),t.lnq(" PO Quantity = ",e.tranItemQty,"; Received Quantity = ",e.receivingQty,"; Balance Quantity = ",e.balQty," "),t.xp6(2),t.AsE(" Unit Price = ",e.tranItemCost,"; Total = ",e.tranTotCost," ")}}function bt(o,n){if(1&o&&(t.TgZ(0,"table",5),t.TgZ(1,"tr"),t.TgZ(2,"th",24),t._uU(3,"Shipment Details"),t.qZA(),t.qZA(),t.YNc(4,xt,7,6,"tr",20),t.qZA()),2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.shipmentList)}}function Ut(o,n){if(1&o&&(t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"h5"),t.TgZ(4,"strong"),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"table",5),t.TgZ(8,"tr",6),t.TgZ(9,"td"),t.TgZ(10,"span"),t._uU(11),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"span"),t._uU(14),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.TgZ(20,"td"),t._UZ(21,"img",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"table",5),t.TgZ(23,"tr"),t.TgZ(24,"td",8),t._uU(25," Vendor Number "),t.qZA(),t.TgZ(26,"td",9),t._uU(27),t.qZA(),t.qZA(),t.TgZ(28,"tr"),t.TgZ(29,"td",8),t._uU(30," Vendor Name and Address "),t.qZA(),t.TgZ(31,"td",9),t._uU(32),t.qZA(),t.qZA(),t.TgZ(33,"tr"),t.TgZ(34,"td",8),t.TgZ(35,"strong"),t._uU(36),t.qZA(),t.qZA(),t.TgZ(37,"td",8),t.TgZ(38,"strong"),t._uU(39),t.qZA(),t.qZA(),t.TgZ(40,"td",8),t._uU(41,"Document Number "),t.qZA(),t.TgZ(42,"td",8),t._uU(43),t.qZA(),t.qZA(),t.TgZ(44,"tr"),t.TgZ(45,"td",8),t._uU(46,"Delivery Date "),t.qZA(),t.TgZ(47,"td"),t._uU(48),t.ALo(49,"date"),t.qZA(),t.TgZ(50,"td",8),t._uU(51,"Reference "),t.qZA(),t.TgZ(52,"td"),t._uU(53," - "),t.qZA(),t.qZA(),t.TgZ(54,"tr"),t.TgZ(55,"td",8),t._uU(56," PO Date "),t.qZA(),t.TgZ(57,"td",8),t._uU(58),t.ALo(59,"date"),t.qZA(),t.TgZ(60,"td",8),t.TgZ(61,"strong"),t._uU(62," Remarks"),t.qZA(),t.qZA(),t.TgZ(63,"td",8),t._uU(64),t.qZA(),t.qZA(),t.TgZ(65,"tr"),t.TgZ(66,"td",8),t._uU(67,"Approved Date "),t.qZA(),t.TgZ(68,"td"),t._uU(69),t.ALo(70,"date"),t.qZA(),t.TgZ(71,"td",8),t._uU(72,"Approval Authority "),t.qZA(),t.TgZ(73,"td"),t._uU(74),t.qZA(),t.qZA(),t.TgZ(75,"tr"),t.TgZ(76,"td",10),t._uU(77," Ship To Address "),t.qZA(),t.TgZ(78,"td",10),t.TgZ(79,"p",11),t._uU(80,"@address"),t.qZA(),t.qZA(),t.TgZ(81,"td",10),t.TgZ(82,"strong"),t._uU(83," Bill to Address "),t.qZA(),t.qZA(),t.TgZ(84,"td",10),t.TgZ(85,"p",11),t._uU(86,"@address"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(87,"table",5),t.TgZ(88,"thead",12),t.TgZ(89,"tr"),t.TgZ(90,"th",13),t.TgZ(91,"h4"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(94,"tr"),t.TgZ(95,"th",14),t._uU(96," Line# "),t.qZA(),t.TgZ(97,"th",15),t._uU(98," Item Code"),t.qZA(),t.TgZ(99,"th"),t._uU(100," Item Details "),t.qZA(),t.TgZ(101,"th",16),t._uU(102," Unit Of Measure"),t.qZA(),t.TgZ(103,"th",17),t._uU(104," Quantity "),t.qZA(),t.TgZ(105,"th",18),t._uU(106," Unit Price "),t.qZA(),t.TgZ(107,"th",19),t._uU(108," Total "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(109,"tbody"),t.YNc(110,qt,15,8,"tr",20),t.TgZ(111,"tr"),t.TgZ(112,"td",21),t._uU(113),t.qZA(),t.TgZ(114,"td",22),t.TgZ(115,"strong"),t._uU(116,"Total Amount:"),t.qZA(),t.qZA(),t.TgZ(117,"td",19),t._uU(118),t.qZA(),t.qZA(),t.TgZ(119,"tr"),t.TgZ(120,"td",21),t._uU(121),t.qZA(),t.TgZ(122,"td",22),t.TgZ(123,"strong"),t._uU(124,"Discount Amount:"),t.qZA(),t.qZA(),t.TgZ(125,"td",19),t._uU(126),t.qZA(),t.qZA(),t.TgZ(127,"tr"),t._UZ(128,"td",21),t.TgZ(129,"td",22),t.TgZ(130,"strong"),t._uU(131,"Net Total"),t.qZA(),t.qZA(),t.TgZ(132,"td",19),t._uU(133),t.qZA(),t.qZA(),t.TgZ(134,"tr"),t._UZ(135,"td",21),t.TgZ(136,"td",22),t.TgZ(137,"strong"),t._uU(138,"VAT Amount"),t.qZA(),t.qZA(),t.TgZ(139,"td",19),t._uU(140),t.qZA(),t.qZA(),t.TgZ(141,"tr"),t.TgZ(142,"td",21),t._uU(143),t.qZA(),t.TgZ(144,"td",22),t.TgZ(145,"strong"),t._uU(146,"Grand Total"),t.qZA(),t.qZA(),t.TgZ(147,"td",19),t._uU(148),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(149,bt,5,1,"table",23),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(5),t.AsE(" ",e.typeOfSource," : ",e.item.purchaseOrderNO," "),t.xp6(6),t.Oqu(e.company.companyName),t.xp6(3),t.Oqu(e.company.companyAddress),t.xp6(3),t.HOy(" ",t.lcZ(18,31,"Tel_Phone")," : ",e.company.Phone,", ",t.lcZ(19,33,"Mobile")," : ",e.company.mobile,", "),t.xp6(4),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(6),t.hij(" ",e.item.vendCode,""),t.xp6(5),t.AsE(" ",e.item.vendName,", ",e.item.vendAddress," "),t.xp6(4),t.hij(" ",e.typeOfSource," "),t.xp6(3),t.hij(" ",e.item.purchaseOrderNO," "),t.xp6(4),t.hij(" ",e.item.docNumber," "),t.xp6(5),t.hij(" ",t.xi3(49,35,e.item.deliveryDate,"dd/MM/yyyy")," "),t.xp6(10),t.hij(" ",t.xi3(59,38,e.item.tranDate,"dd/MM/yyyy")," "),t.xp6(6),t.hij(" ",e.item.remarks,""),t.xp6(5),t.hij(" ",t.xi3(70,41,e.item.approverDate,"dd/MM/yyyy")," "),t.xp6(5),t.hij(" ",e.item.approvers," "),t.xp6(18),t.hij(" ",t.lcZ(93,44,"PO"==e.data.from?"Purchase_Order_LineDetails":"PR"==e.data.from?"Purchase_Requisition_LineDetails":"prt"==e.data.from?"Purchase_Return_LineDetails":"Purchase_Order_Receipt_LineDetails"),""),t.xp6(18),t.Q6J("ngForOf",e.itemList),t.xp6(3),t.hij(" Vendor VAT# : ",e.item.vatNumber," "),t.xp6(5),t.hij(" ",e.item.tranTotalCost+e.item.tranDiscAmount," "),t.xp6(3),t.hij(" Remarks1 : ",e.item.remarks," "),t.xp6(5),t.hij("",e.item.tranDiscAmount," "),t.xp6(7),t.hij(" ",e.item.tranTotalCost," "),t.xp6(7),t.hij(" ",e.item.taxes," "),t.xp6(3),t.hij(" InWords Amount : ",e.item.totalAmountWord," "),t.xp6(5),t.hij(" ",e.item.totalAmount+e.item.tranDiscAmount," "),t.xp6(1),t.Q6J("ngIf",e.shipmentList)}}let It=(()=>{class o{constructor(e,a,i,r){this.apiService=e,this.authService=a,this.utilService=i,this.notifyService=r,this.isLoading=!1,this.isArabic=!1,this.typeOfSource=""}ngOnInit(){this.data&&(this.loadSalesView(),this.typeOfSource="PO"==this.data.from?"Purchase Order":"PR"==this.data.from?"Purchase Requisition":"prt"==this.data.from?"Purchase Return":"Goods Received Note - GRN ")}loadSalesView(){this.isLoading=!0,this.apiService.getall(`PurchaseOrder/getPOPrintingTwoList/${this.data.id}?type=${this.data.from}`).subscribe(e=>{this.isLoading=!1,e&&(this.item=e,this.itemList=e.itemList,this.shipmentList=e.shipmentList,this.company=e.company,this.isArabic=this.authService.isArabic())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(A.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-poprintingformatthreepage"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"isLoading"],["class","p-1","id","Format1",4,"ngIf"],["id","Format1",1,"p-1"],[1,"row","p-3","shadow-sm",2,"text-align","left","vertical-align","middle"],[1,"col-md-12",2,"border","0px solid lightgrey"],["border","1","cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","@TextAlign"],[1,"float-right",2,"width","200px","height","150px",3,"src"],[2,"width","25%"],["colspan","3"],[2,"width","25%","vertical-align","top"],[2,"white-space","pre-line"],[1,"alert-dark"],["colspan","7",1,"text-center"],[2,"width","10px"],[2,"width","200px"],[2,"width","150px"],[2,"width","50px","text-align","right"],[2,"width","100px","text-align","right"],[2,"width","120px","text-align","right"],[4,"ngFor","ngForOf"],["colspan","4"],["colspan","2",1,"align-right",2,"text-align","right"],["style","width:100%; padding-bottom:5px;","border","1","cellpadding","0","cellspacing","0","width","100%","class","ur_tablestyle",4,"ngIf"],["colspan","3",1,"text-center"],[1,"text-center"]],template:function(e,a){1&e&&(t._UZ(0,"spinner-loader",0),t.YNc(1,Ut,150,46,"div",1)),2&e&&(t.Q6J("isLoading",a.isLoading),t.xp6(1),t.Q6J("ngIf",a.item&&a.company))},directives:[J.r,c.O5,c.sg],pipes:[x.X$,c.uU],encapsulation:2}),o})();function Lt(o,n){if(1&o&&(t.TgZ(0,"tbody"),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td",14),t._uU(5,"-"),t.qZA(),t.TgZ(6,"td",15),t._uU(7),t.qZA(),t.TgZ(8,"td",16),t._uU(9),t.qZA(),t.TgZ(10,"td",17),t._uU(11),t.qZA(),t.qZA(),t.TgZ(12,"tr"),t.TgZ(13,"td"),t._uU(14),t.qZA(),t._UZ(15,"td",14),t.TgZ(16,"td",15),t._uU(17),t.qZA(),t.TgZ(18,"td",16),t._uU(19),t.qZA(),t.TgZ(20,"td",17),t._uU(21),t.qZA(),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(3),t.hij(" ",e.tranItemCode," "),t.xp6(4),t.hij(" ",e.tranItemQty," "),t.xp6(2),t.hij(" ",e.tranItemCost," "),t.xp6(2),t.hij(" ",e.tranItemQty*e.tranItemCost," "),t.xp6(3),t.AsE(" ",e.tranItemName," and ",e.itemDescription," "),t.xp6(3),t.hij(" ",e.tranItemUnitCode," "),t.xp6(2),t.hij(" ",e.tranTotCost," "),t.xp6(2),t.hij(" ",e.tranTotCost," ")}}function yt(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.qZA()),2&o){const e=n.$implicit,a=n.index;t.xp6(2),t.hij(" Shipment ",a+1," "),t.xp6(2),t.lnq(" PO Quantity = ",e.tranItemQty,"; Received Quantity = ",e.receivingQty,"; Balance Quantity = ",e.balQty," "),t.xp6(2),t.AsE(" Unit Price = ",e.tranItemCost,"; Total = ",e.tranTotCost," ")}}function Ot(o,n){if(1&o&&(t.TgZ(0,"table",24),t.TgZ(1,"tr"),t.TgZ(2,"th",25),t._uU(3,"Shipment Details"),t.qZA(),t.qZA(),t.YNc(4,yt,7,6,"tr",18),t.qZA()),2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.shipmentList)}}function Nt(o,n){if(1&o&&(t.TgZ(0,"div",2),t.TgZ(1,"table",3),t.TgZ(2,"tr",4),t.TgZ(3,"td"),t.TgZ(4,"h5"),t.TgZ(5,"strong"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"h6",5),t._uU(8),t.qZA(),t.TgZ(9,"h6",5),t._uU(10),t.qZA(),t.TgZ(11,"h6",5),t._uU(12),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"td"),t._UZ(16,"img",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",7),t.TgZ(18,"table",8),t.TgZ(19,"tr"),t.TgZ(20,"td",9),t.TgZ(21,"strong"),t._uU(22," PONumber "),t.qZA(),t.qZA(),t.TgZ(23,"td",9),t.TgZ(24,"strong"),t._uU(25," PODate "),t.qZA(),t.qZA(),t.TgZ(26,"td",9),t.TgZ(27,"strong"),t._uU(28," DeliveryDate "),t.qZA(),t.qZA(),t.TgZ(29,"td",9),t.TgZ(30,"strong"),t._uU(31," Terms "),t.qZA(),t.qZA(),t.TgZ(32,"td",9),t.TgZ(33,"strong"),t._uU(34," Location "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"tr"),t.TgZ(36,"td",9),t._uU(37),t.qZA(),t.TgZ(38,"td",9),t._uU(39),t.ALo(40,"date"),t.qZA(),t.TgZ(41,"td",9),t._uU(42),t.ALo(43,"date"),t.qZA(),t.TgZ(44,"td",9),t._uU(45),t.qZA(),t.TgZ(46,"td",9),t._uU(47),t.qZA(),t.qZA(),t.TgZ(48,"tr",4),t.TgZ(49,"td",9),t.TgZ(50,"strong"),t._uU(51," Vendor "),t.qZA(),t.qZA(),t.TgZ(52,"td",10),t._uU(53),t.qZA(),t.TgZ(54,"td",10),t.TgZ(55,"strong"),t._uU(56," VendorAddres "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"tr",4),t.TgZ(58,"td",9),t.TgZ(59,"strong"),t._uU(60," PORemarks "),t.qZA(),t.qZA(),t.TgZ(61,"td",10),t._uU(62),t.qZA(),t.TgZ(63,"td",11),t._uU(64),t.qZA(),t.qZA(),t.TgZ(65,"tr",4),t.TgZ(66,"td",9),t.TgZ(67,"strong"),t._uU(68," ReferenceAndDocument "),t.qZA(),t.qZA(),t.TgZ(69,"td",10),t._uU(70),t.qZA(),t.TgZ(71,"td",11),t._uU(72,"-"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"table"),t.TgZ(74,"tfoot"),t.TgZ(75,"tr"),t._UZ(76,"td",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(77,"table",8),t.TgZ(78,"thead",13),t.TgZ(79,"tr"),t.TgZ(80,"th"),t._uU(81," Item Code "),t.qZA(),t._UZ(82,"th",14),t.TgZ(83,"th",15),t._uU(84," Quantity "),t.qZA(),t.TgZ(85,"th",16),t._uU(86," Unit Price "),t.qZA(),t.TgZ(87,"th",17),t._uU(88," Total "),t.qZA(),t.qZA(),t.TgZ(89,"tr"),t.TgZ(90,"th"),t._uU(91," Item Details "),t.qZA(),t.TgZ(92,"th",14),t._uU(93,"PORemarks"),t.qZA(),t.TgZ(94,"th",15),t._uU(95," Unit Of Measure "),t.qZA(),t.TgZ(96,"th",16),t._uU(97," NetCost "),t.qZA(),t.TgZ(98,"th",17),t._uU(99," NetTotal "),t.qZA(),t.qZA(),t.qZA(),t.YNc(100,Lt,22,9,"tbody",18),t.TgZ(101,"tfoot"),t.TgZ(102,"tr"),t.TgZ(103,"td",19),t._uU(104),t.qZA(),t.TgZ(105,"td",20),t.TgZ(106,"strong"),t._uU(107,"Total:"),t.qZA(),t.qZA(),t.TgZ(108,"td",21),t._uU(109),t.qZA(),t.qZA(),t.TgZ(110,"tr"),t.TgZ(111,"td",19),t._uU(112),t.qZA(),t.TgZ(113,"td",20),t.TgZ(114,"strong"),t._uU(115,"Discount:"),t.qZA(),t.qZA(),t.TgZ(116,"td",21),t._uU(117),t.qZA(),t.qZA(),t.TgZ(118,"tr"),t._UZ(119,"td",19),t.TgZ(120,"td",20),t.TgZ(121,"strong"),t._uU(122,"Net Total:"),t.qZA(),t.qZA(),t.TgZ(123,"td",21),t._uU(124),t.qZA(),t.qZA(),t.TgZ(125,"tr"),t._UZ(126,"td",19),t.TgZ(127,"td",20),t.TgZ(128,"strong"),t._uU(129,"VAT/TAX: "),t.qZA(),t.qZA(),t.TgZ(130,"td",21),t._uU(131),t.qZA(),t.qZA(),t.TgZ(132,"tr"),t.TgZ(133,"td",19),t._uU(134),t.qZA(),t.TgZ(135,"td",20),t.TgZ(136,"strong"),t._uU(137,"Grand Total:"),t.qZA(),t.qZA(),t.TgZ(138,"td",21),t._uU(139),t.qZA(),t.qZA(),t.TgZ(140,"tr"),t.TgZ(141,"td",22),t._uU(142),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(143,"table",8),t.TgZ(144,"tr"),t._UZ(145,"th"),t.qZA(),t.TgZ(146,"tr"),t._UZ(147,"th"),t.qZA(),t.TgZ(148,"tr"),t.TgZ(149,"th"),t.TgZ(150,"strong"),t._uU(151," Prepared By "),t.qZA(),t.qZA(),t.TgZ(152,"th"),t.TgZ(153,"strong"),t._uU(154," Verified By "),t.qZA(),t.qZA(),t.TgZ(155,"th"),t.TgZ(156,"strong"),t._uU(157," Approved By "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(158,"tr"),t._UZ(159,"td"),t._UZ(160,"td"),t._UZ(161,"td"),t.qZA(),t.qZA(),t.YNc(162,Ot,5,1,"table",23),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(6),t.hij(" ",e.typeOfSource," "),t.xp6(2),t.Oqu(e.company.companyName),t.xp6(2),t.Oqu(e.company.companyAddress),t.xp6(2),t.HOy(" ",t.lcZ(13,29,"Tel_Phone")," : ",e.company.Phone,", ",t.lcZ(14,31,"Mobile")," : ",e.company.mobile,", "),t.xp6(4),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(21),t.Oqu(e.item.purchaseOrderNO),t.xp6(2),t.Oqu(t.xi3(40,33,e.item.tranDate,"dd/MM/yyyy")),t.xp6(3),t.Oqu(t.xi3(43,36,e.item.deliveryDate,"dd/MM/yyyy")),t.xp6(3),t.Oqu(e.item.pOTermsName),t.xp6(2),t.Oqu(e.item.wHName),t.xp6(6),t.AsE("(",e.item.vendCode,") ",e.item.vendName,""),t.xp6(9),t.Oqu(e.item.remarks),t.xp6(2),t.Oqu(e.item.vendAddress),t.xp6(6),t.Oqu(e.item.docNumber),t.xp6(30),t.Q6J("ngForOf",e.itemList),t.xp6(4),t.hij(" Vendor VAT# : ",e.item.vatNumber," "),t.xp6(5),t.hij(" ",e.item.tranTotalCost+e.item.tranDiscAmount," "),t.xp6(3),t.hij(" Remarks1: ",e.item.remarks," "),t.xp6(5),t.hij(" ",e.item.tranDiscAmount," "),t.xp6(7),t.hij(" ",e.item.tranTotalCost," "),t.xp6(7),t.hij(" ",e.item.taxes,""),t.xp6(3),t.hij(" InWords Amount : ",e.item.totalAmountWord," "),t.xp6(5),t.hij(" ",e.item.totalAmount+e.item.tranDiscAmount," "),t.xp6(3),t.hij(" Notes:",e.item.poNotes," "),t.xp6(20),t.Q6J("ngIf",e.shipmentList)}}let St=(()=>{class o{constructor(e,a,i,r){this.apiService=e,this.authService=a,this.utilService=i,this.notifyService=r,this.isLoading=!1,this.isArabic=!1,this.typeOfSource=""}ngOnInit(){this.data&&(this.loadSalesView(),this.typeOfSource="PO"==this.data.from?"Purchase Order":"PR"==this.data.from?"Purchase Requisition":"prt"==this.data.from?"Purchase Return":"Goods Received Note - GRN ")}loadSalesView(){this.isLoading=!0,this.apiService.getall(`PurchaseOrder/getPOPrintingTwoList/${this.data.id}?type=${this.data.from}`).subscribe(e=>{this.isLoading=!1,e&&(this.item=e,this.itemList=e.itemList,this.shipmentList=e.shipmentList,this.company=e.company,this.isArabic=this.authService.isArabic())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(A.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-poprintingformattwopage"]],inputs:{data:"data"},decls:2,vars:2,consts:[[3,"isLoading"],["class","p-1 shadow","style","text-align: @TextAlign",4,"ngIf"],[1,"p-1","shadow",2,"text-align","@TextAlign"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","@TextAlign"],[2,"white-space","pre-line"],[1,"float-right",2,"width","200px","height","150px",3,"src"],[1,"row","p-3",2,"text-align","@TextAlign","vertical-align","middle"],["border","1","cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"width","20%"],["colspan","2",2,"width","20%"],["colspan","2"],[2,"height","20px"],[1,""],[2,"width","200px"],[2,"width","50px","text-align","right"],[2,"width","100px","text-align","right"],["colspan","3",2,"width","120px","text-align","right"],[4,"ngFor","ngForOf"],["colspan","3"],["colspan","3",1,"align-right",2,"text-align","right"],[2,"width","120px","text-align","right"],["colspan","7"],["class","table table-bordered  table-sm offset-sm-0",4,"ngIf"],[1,"table","table-bordered","table-sm","offset-sm-0"],["colspan","3",1,"text-center"],[1,"text-center"]],template:function(e,a){1&e&&(t._UZ(0,"spinner-loader",0),t.YNc(1,Nt,163,39,"div",1)),2&e&&(t.Q6J("isLoading",a.isLoading),t.xp6(1),t.Q6J("ngIf",a.item&&a.company))},directives:[J.r,c.O5,c.sg],pipes:[x.X$,c.uU],encapsulation:2}),o})();function Pt(o,n){}let et=(()=>{class o{constructor(e,a){this.componentFactoryResolver=e,this.dialogRef=a,this.id=0,this.modalTitle="",this.modalBtnTitle="",this.poList=[]}ngOnInit(){this.fillComponents(),this.initialLoading(1)}fillComponents(){const e={from:this.modalBtnTitle,id:this.id};this.poList=[new nt(vt,e),new nt(St,e),new nt(It,e)]}initialLoading(e){const a=this.appComponentloader.viewContainerRef;a.clear();const i=this.poList[e-1],r=this.componentFactoryResolver.resolveComponentFactory(i.component);a.createComponent(r).instance.data=i.data}loadComponents(e){this.initialLoading(e.target.value)}printInvoice(){const e=document.getElementById("printcontainer"),a=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{a.document.write(e.innerHTML),a.document.close(),a.focus(),a.print(),a.close()},50)}closeModel(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t._Vd),t.Y36(Z.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-poprintingpage"]],viewQuery:function(e,a){if(1&e&&t.Gf(ct,7),2&e){let i;t.iGM(i=t.CRH())&&(a.appComponentloader=i.first)}},decls:28,vars:6,consts:[[1,"row",2,"position","relative"],[1,"col-md-12"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],["selected","","value","1"],["value","2"],["value","3"],["id","printcontainer",1,"p-1","shadow"],["loadingComponent",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return a.printInvoice()}),t._uU(3,"Print"),t.qZA(),t._uU(4," \xa0 "),t.TgZ(5,"button",3),t.NdJ("click",function(){return a.closeModel()}),t._uU(6," Close"),t.qZA(),t.TgZ(7,"button",4),t.NdJ("click",function(){return a.closeModel()}),t._uU(8," \xd7"),t.qZA(),t._UZ(9,"br"),t._UZ(10,"br"),t.TgZ(11,"h5"),t.TgZ(12,"strong"),t._uU(13," Select Format "),t.qZA(),t.qZA(),t.TgZ(14,"select",5),t.NdJ("change",function(r){return a.loadComponents(r)}),t.TgZ(15,"option",6),t._uU(16),t.ALo(17,"translate"),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"option",7),t._uU(20,"Format 1"),t.qZA(),t.TgZ(21,"option",8),t._uU(22,"Format 2"),t.qZA(),t.TgZ(23,"option",9),t._uU(24,"Format 3"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(25,"br"),t.TgZ(26,"div",10),t.YNc(27,Pt,0,0,"ng-template",11),t.qZA()),2&e&&(t.xp6(16),t.AsE("",t.lcZ(17,2,"Select")," ",t.lcZ(18,4,"Format")," "))},directives:[s.YN,s.Kr,ct],pipes:[x.X$],encapsulation:2}),o})();var dt=m(137),at=m(5939);function Mt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"form",11),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().expAdd()}),t.TgZ(1,"div",12),t.TgZ(2,"div",13),t.TgZ(3,"div",5),t.TgZ(4,"label",6),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",14),t.ALo(8,"translate"),t.ALo(9,"translate"),t._UZ(10,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(11,"div",13),t.TgZ(12,"div",5),t.TgZ(13,"label",6),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",16),t.ALo(17,"translate"),t.ALo(18,"translate"),t._UZ(19,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(20,"div",17),t.TgZ(21,"div",5),t.TgZ(22,"label",6),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"input",18),t.ALo(26,"translate"),t.ALo(27,"translate"),t._UZ(28,"validation-message",15),t.TgZ(29,"span",19),t._uU(30),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",17),t.TgZ(32,"div",5),t.TgZ(33,"label",6),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",20),t.ALo(37,"translate"),t.ALo(38,"translate"),t._UZ(39,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(40,"div",17),t.TgZ(41,"div",5),t.TgZ(42,"label",6),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"input",21),t.ALo(46,"translate"),t.ALo(47,"translate"),t._UZ(48,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(49,"div",22),t.TgZ(50,"div",23),t.TgZ(51,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._uU(54," \xa0\xa0 "),t._UZ(55,"input",25),t.ALo(56,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.expform),t.xp6(5),t.Oqu(t.lcZ(6,24,"itemCode")),t.xp6(2),t.hYB("placeholder","",t.lcZ(8,26,"Select")," ",t.lcZ(9,28,"itemCode"),""),t.xp6(3),t.Q6J("control",e.expform.controls.itemCode),t.xp6(4),t.Oqu(t.lcZ(15,30,"batchNumber")),t.xp6(2),t.hYB("placeholder","",t.lcZ(17,32,"Select")," ",t.lcZ(18,34,"batchNumber"),""),t.xp6(3),t.Q6J("control",e.expform.controls.batchNumber),t.xp6(4),t.Oqu(t.lcZ(24,36,"Quantity")),t.xp6(2),t.hYB("placeholder","",t.lcZ(26,38,"Select")," ",t.lcZ(27,40,"Quantity"),""),t.xp6(3),t.Q6J("control",e.expform.controls.qty),t.xp6(2),t.Oqu(e.qtyError),t.xp6(4),t.Oqu(t.lcZ(35,42,"mfgDate")),t.xp6(2),t.hYB("placeholder","",t.lcZ(37,44,"Select")," ",t.lcZ(38,46,"mfgDate"),""),t.xp6(3),t.Q6J("control",e.expform.controls.mfgDate),t.xp6(4),t.Oqu(t.lcZ(44,48,"expDate")),t.xp6(2),t.hYB("placeholder","",t.lcZ(46,50,"Select")," ",t.lcZ(47,52,"expDate"),""),t.xp6(3),t.Q6J("control",e.expform.controls.expDate),t.xp6(4),t.hij(" ",t.lcZ(53,54,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(56,56,"Add"))}}function wt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.TgZ(14,"button",32),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).editExp(r)}),t._UZ(15,"i",33),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.index),t.xp6(2),t.Oqu(e.itemCode),t.xp6(2),t.Oqu(e.batchNumber),t.xp6(2),t.Oqu(e.qty),t.xp6(2),t.Oqu(e.mfgDate),t.xp6(2),t.Oqu(e.expDate)}}function Dt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",26),t.TgZ(1,"h3",27),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"table",28),t.TgZ(5,"thead"),t.TgZ(6,"tr"),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"td"),t.qZA(),t.qZA(),t.TgZ(26,"tbody"),t.YNc(27,wt,16,6,"tr",29),t.TgZ(28,"tr"),t.TgZ(29,"td",30),t._uU(30,"Total Qty: "),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.qZA(),t.TgZ(33,"td",30),t.TgZ(34,"input",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().expSubmit()}),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,11,"Line_Items")," "),t.xp6(6),t.Oqu(t.lcZ(9,13,"index")),t.xp6(3),t.Oqu(t.lcZ(12,15,"itemCode")),t.xp6(3),t.Oqu(t.lcZ(15,17,"batchNumber")),t.xp6(3),t.Oqu(t.lcZ(18,19,"Quantity")),t.xp6(3),t.Oqu(t.lcZ(21,21,"mfgDate")),t.xp6(3),t.Oqu(t.lcZ(24,23,"expDate")),t.xp6(4),t.Q6J("ngForOf",e.expFormItems),t.xp6(5),t.Oqu(e.expLineItemsQty),t.xp6(2),t.s9C("value",t.lcZ(35,25,"Save_Expiry_Batch")),t.Q6J("disabled",e.expSelectedItemQty!=e.expLineItemsQty)}}function Qt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",37),t.TgZ(1,"div",38),t.TgZ(2,"div",12),t.TgZ(3,"div",39),t.TgZ(4,"div",40),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"div",17),t.TgZ(7,"div",5),t.TgZ(8,"label",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._UZ(11,"input",14),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.TgZ(14,"div",13),t.TgZ(15,"div",5),t.TgZ(16,"label",6),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"input",41),t.NdJ("blur",function(i){return t.CHM(e),t.oxw(2).checkSerial(i)}),t.ALo(20,"translate"),t.ALo(21,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",13),t.TgZ(23,"div",5),t.TgZ(24,"label",6),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",42),t.ALo(28,"translate"),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.TgZ(30,"div",13),t.TgZ(31,"div",5),t.TgZ(32,"label",6),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",43),t.ALo(36,"translate"),t.ALo(37,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.index;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(4),t.hij(" ",e+1," "),t.xp6(4),t.Oqu(t.lcZ(10,14,"itemCode")),t.xp6(2),t.hYB("placeholder","",t.lcZ(12,16,"Select")," ",t.lcZ(13,18,"itemCode"),""),t.xp6(6),t.Oqu(t.lcZ(18,20,"serialNumber")),t.xp6(2),t.hYB("placeholder","",t.lcZ(20,22,"Select")," ",t.lcZ(21,24,"serialNumber"),""),t.xp6(6),t.Oqu(t.lcZ(26,26,"poDate")),t.xp6(2),t.hYB("placeholder","",t.lcZ(28,28,"Select")," ",t.lcZ(29,30,"poDate"),""),t.xp6(6),t.Oqu(t.lcZ(34,32,"poNumber")),t.xp6(2),t.hYB("placeholder","",t.lcZ(36,34,"Select")," ",t.lcZ(37,36,"poNumber"),"")}}function kt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"form",11),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().serialSubmit()}),t.YNc(1,Qt,38,38,"div",34),t.TgZ(2,"div",35),t.TgZ(3,"div",36),t.TgZ(4,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._uU(7," \xa0\xa0 "),t._UZ(8,"input",25),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.serialform),t.xp6(1),t.Q6J("ngForOf",e.serialList.controls),t.xp6(4),t.hij(" ",t.lcZ(6,4,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(9,6,"Save"))}}let Jt=(()=>{class o{constructor(e,a,i,r,l,d,h,u){this.fb=e,this.apiService=a,this.authService=i,this.utilService=r,this.dialogRef=l,this.notifyService=d,this.validationService=h,this.dialog=u,this.modalBtnTitle="",this.modalTitle="",this.itemDisable={expiry:!0,serial:!0},this.labelClass=["text-danger"],this.selectedIndex=0,this.expItems=[],this.expFormItems=[],this.expMessage="",this.expItemCode="",this.qtyError="",this.expSelectedItemQty=0,this.expLineItemsQty=0,this.expErrorMessage="",this.expformIndex=0,this.editId=0,this.serialItems=[],this.serialFormItems=[],this.serialMessage="",this.serialItemCode="",this.serialSelectedItemQty=0,this.serialLineItemsQty=0,this.serialErrorMessage=""}ngOnInit(){this.setExpForm(),this.setSerialForm(),this.loadExpirySerialItems(),this.setItemDisable()}setItemDisable(){"1"==this.modalTitle?(this.itemDisable={expiry:!0,serial:!1},this.selectedIndex=0):"2"==this.modalTitle&&(this.selectedIndex=1,this.itemDisable={expiry:!1,serial:!0})}setExpForm(){this.expform=this.fb.group({index:[this.expformIndex],itemCode:["",s.kI.required],batchNumber:["",s.kI.required],poNumber:[this.modalBtnTitle,s.kI.required],mfgDate:[null,s.kI.required],expDate:[null,s.kI.required],qty:["",s.kI.required],remarks:[""]})}loadExpirySerialItems(){this.apiService.getall(`inventoryExpirySerial/getInvItemSelectListByPoNumber?purchaseOrderNO=${this.modalBtnTitle}`).subscribe(e=>{e&&(this.expItems=e.exps,this.serialItems=e.serials)})}expChange(e){this.expSelectedItemQty=parseFloat(this.expItems.find(a=>a.value==e.value).decValue),this.expform.controls.itemCode.setValue(e.value),this.expItemCode=e.value,this.expMessage=`${e.text} item is having ${this.expSelectedItemQty} Qty`}expAdd(){if(this.expform.valid){const e=parseFloat(this.expform.controls.qty.value),a=this.expform.controls.batchNumber.value;if(this.expFormItems.find(i=>i.batchNumber==a))return void this.notifyService.showError(`BatchNumber ${a} is duplicate`);if(this.editId>0&&(this.expFormItems.splice(this.editId,1),this.editId=0),e<=this.expSelectedItemQty){let r,i=0;this.expFormItems.forEach(l=>{i+=parseFloat(l.qty)}),r=i,i+=e,i<=this.expSelectedItemQty?(this.expLineItemsQty=0,this.expform.controls.index.setValue(this.expformIndex++),this.expFormItems.push(this.expform.value),this.expFormItems.forEach(l=>{this.expLineItemsQty+=parseFloat(l.qty)}),this.resetExp(),this.expform.controls.itemCode.setValue(this.expItemCode),this.expform.controls.poNumber.setValue(this.modalBtnTitle),this.qtyError=""):(this.expSelectedItemQty-r>0&&(this.qtyError=`you can add only ${this.expSelectedItemQty-r} qty here`),this.notifyService.showError(`total line Items Qty should not more than ${this.expSelectedItemQty}`))}else this.notifyService.showError(`Quantity should not more than Item Quantity of ${this.expSelectedItemQty}`)}else this.utilService.FillUpFields()}expSubmit(){this.expFormItems.length>0?this.apiService.post("inventoryExpirySerial/createInvItemExpiryBatch",{items:this.expFormItems}).subscribe(e=>{this.expSetDefault(),this.utilService.OkMessage()},e=>{var a;console.error(e),this.expErrorMessage=null===(a=e.error)||void 0===a?void 0:a.message,this.utilService.ShowApiErrorMessage(e)}):this.notifyService.showError(`Quantity should not equal to ${this.expSelectedItemQty}`)}editExp(e){this.editId=e.index,this.expform.patchValue(e)}expSetDefault(){this.expSelectedItem=null,this.loadExpirySerialItems(),this.expform.controls.itemCode.setValue(""),this.expFormItems=[],this.expSelectedItemQty=0,this.expLineItemsQty=0,this.expItemCode="",this.expMessage="",this.qtyError="",this.resetExp()}resetExp(){this.expform.reset()}serialChange(e){this.serialSelectedItemQty=parseFloat(this.serialItems.find(a=>a.value==e.value).decValue),this.serialSelectedItemQty>0&&this.addItems(this.serialSelectedItemQty),this.serialItemCode=e.value,this.setSerialItemCodePo(this.serialItemCode),this.serialMessage=`${e.text} item is having ${this.serialSelectedItemQty} Qty`}setSerialForm(){this.serialform=this.fb.group({serialList:this.fb.array([this.createSerialBatch()])})}createSerialBatch(){return this.fb.group({itemCode:["",s.kI.required],serialNumber:["",s.kI.required],poDate:[null,s.kI.required],poNumber:["",s.kI.required]})}addItems(e){this.serialList.controls=[];for(var a=0;a<e;a++)this.serialList.push(this.createSerialBatch())}get serialList(){return this.serialform.get("serialList")}checkSerial(e){let a=0;for(let i of this.serialList.controls)if(i instanceof s.cw){const r=i.controls.serialNumber.value;r&&this.utilService.hasValue(r)&&r==e.target.value&&(a++,2==a&&(this.notifyService.showError("duplicate serialNumber"),i.controls.serialNumber.setValue("")))}}serialSubmit(){let e=!1;for(let a of this.serialList.controls)if(a instanceof s.cw){const r=a.controls.poDate.value;a.controls.serialNumber.value&&r?e=!0:(e=!1,this.utilService.FillUpFields())}e&&this.apiService.post("inventoryExpirySerial/createInvItemSerialBatch",this.serialform.value).subscribe(a=>{this.serialSetDefault(),this.dialogRef.close(!0),this.utilService.OkMessage()},a=>{var i;console.error(a),this.serialErrorMessage=null===(i=a.error)||void 0===i?void 0:i.message})}setSerialItemCodePo(e){for(let a of this.serialList.controls)a instanceof s.cw&&(a.controls.itemCode.setValue(e),a.controls.poNumber.setValue(this.modalBtnTitle))}serialSetDefault(){this.serialSelectedItem=null,this.loadExpirySerialItems(),this.serialList.controls=[],this.serialFormItems=[],this.serialSelectedItemQty=0,this.serialLineItemsQty=0,this.serialItemCode="",this.serialMessage="",this.resetSerial()}resetSerial(){this.serialform.reset()}closeModel(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(Z.so),t.Y36(A.g),t.Y36(b.R),t.Y36(Z.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdateinvitemexpserialbatch"]],decls:33,vars:26,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],[3,"selectedIndex"],[3,"label","disabled"],[1,"pl-5","pr-5","pb-5"],[1,"p-3","pt-4",2,"width","450px"],[1,"form-group"],[1,"mr-sm-2"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"text-danger","text-center","font-weight-700",3,"innerHTML"],["novalidate","","class","mt-4",3,"formGroup","ngSubmit",4,"ngIf"],["class","p-2",4,"ngIf"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","rowm0"],[1,"col-md-3","col-lg-3"],["type","text","formControlName","itemCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","batchNumber",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],["type","number","formControlName","qty",1,"form-control",3,"placeholder"],[1,"text-danger"],["type","date","formControlName","mfgDate",1,"form-control",3,"placeholder"],["type","date","formControlName","expDate",1,"form-control",3,"placeholder"],[1,"col-md-12","col-lg-12","pt-4"],[1,"form-group","text-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[1,"p-2"],[1,"expTable"],[1,"table","table-responsive","expTable"],[4,"ngFor","ngForOf"],["colspan","2"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"value","disabled","click"],["title","edit",3,"click"],[1,"fa","fa-edit"],["class","row","formArrayName","serialList",4,"ngFor","ngForOf"],[1,"row"],[1,"col-lg-12","col-md-12","text-center"],["formArrayName","serialList",1,"row"],[1,"col-md-12","col-lg-12",3,"formGroupName"],[1,"col-md-1","col-lg-1"],[1,"form-group","float-right"],["type","text","formControlName","serialNumber",1,"form-control",3,"placeholder","blur"],["type","date","formControlName","poDate",1,"form-control",3,"placeholder"],["type","text","formControlName","poNumber","readonly","",1,"form-control",3,"placeholder"]],template:function(e,a){1&e&&(t.TgZ(0,"h3"),t.TgZ(1,"button",0),t.NdJ("click",function(){return a.closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA(),t.TgZ(3,"mat-tab-group",1),t.TgZ(4,"mat-tab",2),t.ALo(5,"translate"),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"ng-select",7),t.NdJ("ngModelChange",function(r){return a.expSelectedItem=r})("change",function(r){return a.expChange(r)}),t.qZA(),t._UZ(13,"br"),t.TgZ(14,"b"),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t._UZ(16,"p",8),t.YNc(17,Mt,57,58,"form",9),t.YNc(18,Dt,36,27,"div",10),t.qZA(),t.qZA(),t.TgZ(19,"mat-tab",2),t.ALo(20,"translate"),t.TgZ(21,"div",3),t.TgZ(22,"div",4),t.TgZ(23,"div",5),t.TgZ(24,"label",6),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"ng-select",7),t.NdJ("ngModelChange",function(r){return a.serialSelectedItem=r})("change",function(r){return a.serialChange(r)}),t.qZA(),t._UZ(28,"br"),t.TgZ(29,"b"),t._uU(30),t.qZA(),t.qZA(),t.qZA(),t._UZ(31,"p",8),t.YNc(32,kt,10,8,"form",9),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("selectedIndex",a.selectedIndex),t.xp6(1),t.s9C("label",t.lcZ(5,18,"Create_Exp_Batch")),t.Q6J("disabled",!a.itemDisable.expiry),t.xp6(6),t.Oqu(t.lcZ(11,20,"Select_Item")),t.xp6(2),t.Q6J("items",a.expItems)("ngModel",a.expSelectedItem),t.xp6(3),t.Oqu(a.expMessage),t.xp6(1),t.Q6J("innerHTML",a.expErrorMessage,t.oJD),t.xp6(1),t.Q6J("ngIf",a.expSelectedItemQty>0),t.xp6(1),t.Q6J("ngIf",a.expFormItems.length>0),t.xp6(1),t.s9C("label",t.lcZ(20,22,"Create_SerialNumber_Batch")),t.Q6J("disabled",!a.itemDisable.serial),t.xp6(6),t.Oqu(t.lcZ(26,24,"Select_Item")),t.xp6(2),t.Q6J("items",a.serialItems)("ngModel",a.serialSelectedItem),t.xp6(3),t.Oqu(a.serialMessage),t.xp6(1),t.Q6J("innerHTML",a.serialErrorMessage,t.oJD),t.xp6(1),t.Q6J("ngIf",a.serialSelectedItemQty>0))},directives:[at.SP,at.uX,G.w9,s.JJ,s.On,c.O5,s._Y,s.JL,s.sg,s.Fj,s.u,H.s,s.wV,c.sg,s.CE,s.x0],pipes:[x.X$],styles:[".expTable[_ngcontent-%COMP%] {\n    width: 900px;\n    position: relative;\n    left: 229px;\n    padding: 0px 100px;\n    margin: 1px 100px;\n  }\n\n    .mat-tab-label .mat-tab-label-content {\n    font-size: 19px !important;\n    color: #000000;\n    font-weight: 700;\n  }"]}),o})();var it=m(8590);function Ft(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Pr_Num")," "))}function Vt(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.purchaseOrderNO)}}function Rt(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Date")," "))}function Yt(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.tranDate,"dd/MM/yyyy"))}}function Bt(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Doc_Num")," "))}function Et(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.invRefNumber)}}function $t(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch")," "))}function jt(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function Gt(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vendor_Name")," "))}function Ht(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendName)}}function Wt(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vendor_Code")," "))}function zt(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendCode)}}function Xt(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Amount")," "))}function Kt(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.totalAmount)}}function te(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Payment_Terms")," "))}function ee(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.paymentID)}}function ae(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reference")," "))}function ie(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.taxId)}}function oe(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Remarks")," "))}function re(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.remarks)}}function ne(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function se(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",51),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().edit(i.id)}),t.ALo(1,"translate"),t._UZ(2,"i",59),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.s9C("id","edit_"+e.id),t.s9C("matTooltip",t.lcZ(1,2,"Edit_Item"))}}function le(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().delete(i.id)}),t.ALo(1,"translate"),t._UZ(2,"i",61),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Delete_Item"))}function ce(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",62),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().approvePurchaseOrder(i)}),t.ALo(1,"translate"),t._UZ(2,"i",63),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Approve_Item"))}function de(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",62),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().AccountPosting(i.id)}),t.ALo(1,"translate"),t._UZ(2,"i",64),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Posting_Item"))}function ue(o,n){if(1&o&&(t.ynx(0),t.YNc(1,ce,3,3,"a",58),t._uU(2," \xa0 "),t.YNc(3,de,3,3,"a",58),t._uU(4," \xa0 "),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.approvedUser&&!e.isSettled),t.xp6(2),t.Q6J("ngIf",e.canSettle&&!e.isSettled)}}function pe(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",62),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().openIntExpSerial(i)}),t.ALo(1,"translate"),t._UZ(2,"i",65),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Open_Int_Exp_Serial"))}function he(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",51),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().MultipleGrn(i.purchaseOrderNO)}),t.ALo(1,"translate"),t._UZ(2,"i",66),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.s9C("id","view_"+e.purchaseOrderNO),t.s9C("matTooltip",t.lcZ(1,2,"Multiple_Grn"))}}function me(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",48),t.YNc(1,se,3,4,"a",50),t._uU(2," \xa0 "),t.TgZ(3,"a",51),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().view(r.id)}),t.ALo(4,"translate"),t._UZ(5,"i",52),t.qZA(),t._uU(6," \xa0 "),t.TgZ(7,"a",53),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().uploadFile(r.id)}),t.ALo(8,"translate"),t._UZ(9,"i",54),t.qZA(),t._uU(10," \xa0 "),t.TgZ(11,"a",51),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().printing(r.id)}),t.ALo(12,"translate"),t._UZ(13,"i",55),t.qZA(),t._uU(14," \xa0 "),t.YNc(15,le,3,3,"a",56),t.YNc(16,ue,5,2,"ng-container",57),t.YNc(17,pe,3,3,"a",58),t._uU(18," \xa0 "),t.YNc(19,he,3,4,"a",50),t._uU(20," \xa0 "),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved&&!e.isSettled),t.xp6(2),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(4,10,"View_Details")),t.xp6(4),t.s9C("matTooltip",t.lcZ(8,12,"Document_Upload")),t.xp6(4),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(12,14,"Print_Preview")),t.xp6(4),t.Q6J("ngIf",!e.isSettled&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.hasAuthority&&0==e.expSerial),t.xp6(1),t.Q6J("ngIf",e.expSerial>0),t.xp6(2),t.Q6J("ngIf",!e.isgrn&&e.canSettle&&!e.isSettled)}}function ge(o,n){1&o&&t._UZ(0,"tr",67)}function Ze(o,n){1&o&&t._UZ(0,"tr",68)}const _e=function(){return{standalone:!0}};let Ae=(()=>{class o extends O{constructor(e,a,i,r,l,d,h,u,g,L,f){super(l),this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.utilService=d,this.notifyService=h,this.validationService=u,this.pageService=g,this.dialog=L,this.translate=f,this.displayedColumns=["purchaseOrderNO","tranDate","invRefNumber","branchCode","vendName","vendCode","amount","paymentID","taxId","remarks","Actions"],this.searchValue="",this.sortingOrder="id desc",this.customerList=[],this.companyList=[],this.paymentTermsList=[],this.branchList=[],this.productList=[],this.vatList=[],this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.DiscPerc=0,this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.ShipmentCodeList=[],this.CurrencyCodeList=[],this.TaxCodeList=[],this.VenCodeList=[],this.compCodeList=[],this.BranchCodeList=[],this.VenNameList=[],this.PaymentTermList=[],this.ItemNameList=[],this.UOMList=[],this.PurchaseRequestList=[],this.warehouseList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.isshown=!1,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0,this.tranItemCode="",this.ItemCodeList=[]}ngOnInit(){this.initialLoading(),this.setForm(),this.loadItemCode(),this.loadTaxCode(),this.loadVenCode(),this.loadCompCode(),this.loadBranchCode(),this.loadVenName(),this.loadPaymentTerm(),this.loadItemName(),this.loadUnitCode(),this.loadCurrencyCode(),this.loadShipmentCode(),this.loadPurchaseRequest(),this.loadWarehouses(),this.form.patchValue({trantype:"2"})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}loadUser(e,a,i,r){this.data=new p.by(this.getData()),this.totalItemsCount=2}loadCompCode(){this.apiService.getall("PurchaseOrder/GetCompSelectList").subscribe(e=>{e&&(this.compCodeList=e)})}loadBranchCode(){this.apiService.getall("PurchaseOrder/GetBranchSelectList").subscribe(e=>{e&&(this.BranchCodeList=e)})}loadTaxCode(){this.apiService.getall("PurchaseOrder/GetTaxSelectList").subscribe(e=>{e&&(this.TaxCodeList=e)})}loadVenCode(){this.apiService.getall("PurchaseOrder/GetVendorCodeSelectList").subscribe(e=>{e&&(this.VenCodeList=e)})}loadVenName(){this.apiService.getall("PurchaseOrder/GetVendorNameSelectList").subscribe(e=>{e&&(this.VenNameList=e)})}loadPaymentTerm(){this.apiService.getall("PurchaseOrder/GetPaymentTermSelectList").subscribe(e=>{e&&(this.PaymentTermList=e)})}loadItemCode(){this.apiService.getall("purchasereturn/GetItemCodeSelectList").subscribe(e=>{e&&(this.ItemCodeList=e)})}loadItemName(){this.apiService.getall("PurchaseOrder/GetItemNameSelectList").subscribe(e=>{e&&(this.ItemNameList=e)})}loadUnitCode(){this.apiService.getall("PurchaseOrder/GetUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadCurrencyCode(){this.apiService.getall("PurchaseOrder/GetCurrencySelectList").subscribe(e=>{e&&(this.CurrencyCodeList=e)})}loadShipmentCode(){this.apiService.getall("PurchaseOrder/GetShipmentSelectList").subscribe(e=>{e&&(this.ShipmentCodeList=e)})}loadUomdata(e){let i=this.tranItemCode+"_"+e.value;i?this.apiService.getall(`PurchaseOrder/ProductUomtPriceItem/${i}`).subscribe(r=>{r&&(this.tranUOMFactor=r.tranItemUomFactor,this.tranItemCost=r.itemAvgcost)}):(this.unitType="",this.description="")}getData(){return[]}setForm(){this.form=this.fb.group({"":["",s.kI.required],compCode:["",s.kI.required],branchCode:["",s.kI.required],tranDate:["",s.kI.required],deliveryDate:["",s.kI.required],invRefNumber:["",s.kI.required],venCatCode:["",s.kI.required],docNumber:["",s.kI.required],taxId:["",s.kI.required],remarks:["",s.kI.required],poNotes:["",s.kI.required],trantype:["",s.kI.required],vendCode:["",s.kI.required],paymentID:["",s.kI.required],taxInclusive:["",s.kI.required],tranCurrencyCode:["",s.kI.required],tranShipMode:["",s.kI.required],whCode:["",s.kI.required]})}loadPurchaseRequest(){this.apiService.getall("PurchaseOrder/GetPrSelectList").subscribe(e=>{e&&(this.PurchaseRequestList=e)})}loadWarehouses(){this.apiService.getall("warehouse/getSelectWarehouseList").subscribe(e=>{e&&(this.warehouseList=e)})}loadPRdata(e){this.apiService.getall(`PurchaseOrder/GetPRList/${e.value}`).subscribe(i=>{i&&(this.isReadOnly=!0,this.form.patchValue(i),this.form.patchValue({tranDate:`${i.tranDate.split("T")[0]}`}),this.form.patchValue({deliveryDate:`${i.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${i.compCode}`}),this.form.patchValue({tranCurrencyCode:`${i.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${i.poNotes}`}),this.id=i.id,this.form.patchValue({trantype:"2"}),this.listOfInvoices=[],i.itemList.forEach(l=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:l.tranItemCode,tranItemName:l.tranItemName,tranItemName2:l.tranItemName2,tranItemQty:l.tranItemQty,tranItemUnitCode:l.tranItemUnitCode,tranUOMFactor:l.tranUOMFactor,tranItemCost:l.tranItemCost,tranTotCost:l.tranTotCost,discPer:l.discPer,discAmt:l.discAmt,itemTax:l.itemTax,itemTaxPer:l.itemTaxPer,taxAmount:l.taxAmount,itemTracking:l.itemTracking})}),this.setGrandTotal())})}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,a,i,r,l=""){var d;this.isLoading=!0,this.apiService.getPagination("PurchaseOrder/GetPagedPurchaseOrderList",this.utilService.getQueryString(e,a,i,r,l,"",0,null!==(d=this.tranItemCode)&&void 0!==d?d:"")).subscribe(h=>{this.totalItemsCount=0,this.data=new p.by(h.items),this.totalItemsCount=h.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},h=>this.utilService.ShowApiErrorMessage(h))}applyFilter(e,a){(e||a)&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("PurchaseOrder",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,V.a).afterClosed().subscribe(i=>{i&&e>0&&this.apiService.delete("PurchaseOrder",e).subscribe(r=>{this.refresh(),this.utilService.OkMessage()})},i=>this.utilService.ShowApiErrorMessage(i))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.tranItemCode="",this.sortingOrder="id desc",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(r=>{r&&this.form.controls.taxIdNumber.setValue(r.vatNumber)})}loadBranchs(e){let a=e.target.value;a&&this.apiService.getall(`branch/getSelectSysBranchListByComId/${a}`).subscribe(i=>{i&&(this.branchList=i)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let a=e.value;a?this.apiService.getall(`product/productUnitPriceItem/${a}`).subscribe(r=>{r&&(this.product=r.nameEN,this.unitType=r.unitTypeEN,this.description=r.description,this.price=r.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.tranTotCost>0&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnitCode:this.tranItemUnitCode,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let a=this.listOfInvoices.findIndex(i=>i.sequence===e);this.listOfInvoices.splice(a,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnitCode=e.tranItemUnitCode,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,0==this.form.value.taxInclusive&&this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandInvoiceTotal+=e.tranTotCost+e.taxAmount}),1==this.form.value.taxInclusive&&this.listOfInvoices.forEach(e=>{this.grandInvoiceTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandTotal+=e.tranTotCost-e.taxAmount}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(3),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(3),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(3)}closeModel(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.listOfInvoices=[]}setToDefault(){this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0}calculate(){var i=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(i.toString())}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=this.tranTotCost,a=parseFloat((parseFloat(this.discPer)/100).toFixed(2)),i=parseFloat((e*a/100).toFixed(2));this.discAmt=parseFloat(i.toString());var r=this.tranItemCost;this.tranTotCost=r-r*a,this.tranTotCost=this.tranTotCost*this.tranItemQty,a=parseFloat(this.itemTaxPer),this.taxAmount=0==this.form.value.taxInclusive?parseFloat((this.tranTotCost*a/100).toFixed(2)):parseFloat((this.tranTotCost*a/(a+100)).toFixed(4))}}calculatetaxAmount(){var e=this.tranTotCost,a=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*a/100).toFixed(2))}submit(){this.id>0&&(this.form.value.id=this.id),this.form.value.Prcode="0",this.form.value.vendCode=this.form.value.venCatCode,this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.grandTotal=0,this.DiscPerc=0,this.discAmt=0,this.grandVatTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.DiscPerc+=parseFloat(e.discPer),this.discAmt+=e.discAmt}),this.form.value.tranTotalCost=this.grandTotal,this.form.value.taxes=this.grandVatTotal,this.form.value.tranDiscPer=this.DiscPerc,this.form.value.tranDiscAmount=this.discAmt,this.apiService.post("PurchaseOrder/CreatePurchaserequest",this.form.value).subscribe(e=>{this.reset(),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}loadTaxdata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${a}`).subscribe(i=>{i&&(this.itemTaxPer=i[0].itemTaxperc,this.tranItemName=i[0].shortName),this.loadUomList(a)})}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(i=>{i&&(this.UOMList=i)})}loadVendata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${a}`).subscribe(i=>{i&&(this.form.patchValue({vendCode:`${i.vendName}`}),this.form.patchValue({paymentID:`${i.poTermsCode}`}))})}reset(){this.form.reset(),this.listOfInvoices=[],this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr=""}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}approvePurchaseOrder(e){this.openApprovalDialog(e.branchCode,e.purchaseOrderNO,_.Oi.create,"Purchase_Order","Save","PO",j.$)}openApprovalDialog(e,a,i,r,l,d,h){let u=this.openApprovalDialog1(this.dialog,h);u.componentInstance.dbops=i,u.componentInstance.modalTitle=r,u.componentInstance.modalBtnTitle=l,u.componentInstance.serviceType=d,u.componentInstance.serviceCode=a,u.componentInstance.branchCode=e,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}openApprovalDialog1(e,a){return e.open(a,{disableClose:!0})}AccountPosting(e){this.apiService.getall(`PurchaseOrder/AccountsPosting/${e}`).subscribe(a=>{a&&(this.utilService.OkMessage(),this.refresh())})}create(){this.openDialogManage(0,_.Oi.create,this.translate.instant("Create_New_Purchase_Request"),"",rt)}edit(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Purchase_Request"),"",rt)}MultipleGrn(e){this.apiService.getall(`PurchaseOrder/GRNUpdate/${e}`).subscribe(a=>{a&&(this.utilService.OkMessage(),this.refresh()),this.utilService.OkMessage(),this.refresh()})}view(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Purchase_Request"),"",rt)}printing(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Purchase_Request"),"PO",et)}openIntExpSerial(e){this.openDialogManage(0,_.Oi.create,e.expSerial,e.purchaseOrderNO,Jt)}openDialogManage(e=0,a,i="",r="",l,d={module:"00",action:"00act"},h=100){let u=this.utilService.openDialogCongif(this.dialog,l,h);u.componentInstance.dbops=a,u.componentInstance.modalTitle=i,u.componentInstance.modalBtnTitle=r,u.componentInstance.id=e,u.componentInstance.moduleFile=d,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}openFileUploadDialogManage(e="",a,i,r=80){let l=this.utilService.openDialogCongif(this.dialog,a,r);l.componentInstance.modalTitle=e,l.componentInstance.moduleFile=i,l.afterClosed().subscribe(d=>{})}uploadFile(e){this.openFileUploadDialogManage(this.translate.instant("Document_Upload"),dt.Y,{module:"PURMGT",action:"PO",id:e,sourceId:e})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(A.g),t.Y36(b.R),t.Y36(v.N),t.Y36(Z.uw),t.Y36(x.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-purchaseorder"]],viewQuery:function(e,a){if(1&e&&(t.Gf(U.NW,7),t.Gf(T.YE,7)),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},features:[t.qOj],decls:86,vars:37,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","pb-3"],[1,"col-md-3"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],["bindLabel","textTwo","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange"],[1,"col-md-4","arabicright"],[1,"btn","btn-primary",3,"click"],[1,"",3,"matTooltip","click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"col-md-3","col-lg-3","text-right"],["data-toggle","modal","data-target","#scrollable-modal","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[3,"isLoading"],["mat-table","","matSort","","matSortActive","Id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","purchaseOrderNO"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tranDate"],["matColumnDef","invRefNumber"],["matColumnDef","branchCode"],["matColumnDef","vendName"],["matColumnDef","vendCode"],["matColumnDef","amount"],["matColumnDef","paymentID"],["matColumnDef","taxId"],["matColumnDef","remarks"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["class","tableicons pcursor","data-toggle","modal","data-target","#scrollable-modal",3,"id","matTooltip","click",4,"ngIf"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"id","matTooltip","click"],[1,"icon-list"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-cloud-upload"],[1,"icon-printer"],["class","tableicons",3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],["class","tableicons pcursor",3,"matTooltip","click",4,"ngIf"],[1,"icon-note"],[1,"tableicons",3,"matTooltip","click"],[1,"icon-trash"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-arrow-up-circle"],[1,"icon-action-undo"],[1,"icon-action-undo","text-danger"],[1,"icon-settings"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",14),t.TgZ(22,"input",15),t.NdJ("ngModelChange",function(r){return a.searchValue=r}),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.TgZ(24,"div",14),t.TgZ(25,"ng-select",16),t.NdJ("ngModelChange",function(r){return a.tranItemCode=r}),t.qZA(),t.qZA(),t.TgZ(26,"div",17),t.TgZ(27,"button",18),t.NdJ("click",function(){return a.applyFilter(a.searchValue,a.tranItemCode)}),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._uU(30," \xa0 "),t.TgZ(31,"a",19),t.NdJ("click",function(){return a.refresh()}),t.ALo(32,"translate"),t._UZ(33,"i",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",1),t.TgZ(35,"div",21),t.TgZ(36,"h4",22),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.qZA(),t.TgZ(39,"div",23),t.TgZ(40,"a",24),t.NdJ("click",function(){return a.create()}),t._UZ(41,"i",25),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(44,"div",26),t.TgZ(45,"div",27),t._UZ(46,"spinner-loader",28),t.TgZ(47,"table",29),t.NdJ("matSortChange",function(r){return a.onSortOrder(r)}),t.ynx(48,30),t.YNc(49,Ft,3,3,"th",31),t.YNc(50,Vt,2,1,"td",32),t.BQk(),t.ynx(51,33),t.YNc(52,Rt,3,3,"th",31),t.YNc(53,Yt,3,4,"td",32),t.BQk(),t.ynx(54,34),t.YNc(55,Bt,3,3,"th",31),t.YNc(56,Et,2,1,"td",32),t.BQk(),t.ynx(57,35),t.YNc(58,$t,3,3,"th",31),t.YNc(59,jt,2,1,"td",32),t.BQk(),t.ynx(60,36),t.YNc(61,Gt,3,3,"th",31),t.YNc(62,Ht,2,1,"td",32),t.BQk(),t.ynx(63,37),t.YNc(64,Wt,3,3,"th",31),t.YNc(65,zt,2,1,"td",32),t.BQk(),t.ynx(66,38),t.YNc(67,Xt,3,3,"th",31),t.YNc(68,Kt,2,1,"td",32),t.BQk(),t.ynx(69,39),t.YNc(70,te,3,3,"th",31),t.YNc(71,ee,2,1,"td",32),t.BQk(),t.ynx(72,40),t.YNc(73,ae,3,3,"th",31),t.YNc(74,ie,2,1,"td",32),t.BQk(),t.ynx(75,41),t.YNc(76,oe,3,3,"th",31),t.YNc(77,re,2,1,"td",32),t.BQk(),t._uU(78," ma "),t.ynx(79,42),t.YNc(80,ne,3,3,"th",43),t.YNc(81,me,21,16,"td",32),t.BQk(),t.YNc(82,ge,1,0,"tr",44),t.YNc(83,Ze,1,0,"tr",45),t.qZA(),t.ynx(84),t.TgZ(85,"mat-paginator",46),t.NdJ("page",function(r){return a.onPageSwitch(r)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,20,"Purchase_Order")," "),t.xp6(6),t.hij("",t.lcZ(11,22,"Purchase_Management")," "),t.xp6(3),t.hij("",t.lcZ(14,24,"Purchase_Order")," "),t.xp6(9),t.MGl("placeholder","",t.lcZ(23,26,"Search"),"..."),t.Q6J("ngModel",a.searchValue),t.xp6(3),t.Q6J("items",a.ItemCodeList)("ngModel",a.tranItemCode)("ngModelOptions",t.DdM(36,_e)),t.xp6(3),t.Oqu(t.lcZ(29,28,"Search")),t.xp6(3),t.s9C("matTooltip",t.lcZ(32,30,"Refresh")),t.xp6(6),t.Oqu(t.lcZ(38,32,"Purchase_Order")),t.xp6(5),t.Oqu(t.lcZ(43,34,"Add_New_Purchase_Order")),t.xp6(4),t.Q6J("isLoading",a.isLoading),t.xp6(1),t.Q6J("dataSource",a.data),t.xp6(35),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("length",a.totalItemsCount)("pageSize",a.pageService.pageCount)("pageSizeOptions",a.pageService.selectItemsPerPage))},directives:[s.Fj,s.JJ,s.On,G.w9,it.gM,J.r,p.BZ,T.YE,p.w1,p.fO,p.Dz,p.as,p.nj,U.NW,p.ge,T.nU,p.ev,c.O5,p.XQ,p.Gk],pipes:[x.X$,c.uU],encapsulation:2}),o})();var Te=m(5620);function fe(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td",59),t._uU(12),t.qZA(),t.TgZ(13,"td",59),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td",48),t.TgZ(24,"i",60),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().editInvoiceItem(r)}),t.qZA(),t._uU(25," \xa0 "),t.TgZ(26,"i",61),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().deleteInvoiceItem(r)}),t.qZA(),t._uU(27," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.tranItemCode),t.xp6(2),t.Oqu(e.tranItemName),t.xp6(2),t.Oqu(e.tranItemQty),t.xp6(2),t.Oqu(e.tranItemUnitCode),t.xp6(2),t.Oqu(e.tranUOMFactor),t.xp6(2),t.Oqu(e.tranItemCost),t.xp6(2),t.Oqu(e.tranTotCost),t.xp6(2),t.Oqu(e.discPer),t.xp6(2),t.Oqu(e.discAmt),t.xp6(2),t.Oqu(e.itemTaxPer),t.xp6(2),t.Oqu(e.taxAmount)}}const Y=function(){return{standalone:!0}};let st=(()=>{class o{constructor(e,a,i,r,l,d,h,u,g,L){this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.utilService=d,this.dialogRef=h,this.notifyService=u,this.validationService=g,this.commonService=L,this.isReadOnly=!1,this.id=0,this.ShipmentCodeList=[],this.CurrencyCodeList=[],this.TaxCodeList=[],this.VenCodeList=[],this.compCodeList=[],this.BranchCodeList=[],this.VenNameList=[],this.PaymentTermList=[],this.customerList=[],this.companyList=[],this.ItemCodeList=[],this.ItemNameList=[],this.UOMList=[],this.warehouseList=[],this.isshown=!1,this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.grandTotalStr1=0,this.grandVatTotalStr1=0,this.grandInvoiceTotalStr1=0,this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="0",this.DiscPerc=0,this.discAmt=0,this.itemTax="",this.itemTaxPer="0",this.taxAmount=0,this.itemTracking=0,this.isVatIncluded=!1,this.isQuantityLoading=!1}ngOnInit(){this.setForm(),this.loadWarehouses(),this.loadItemCode(),this.loadItemName(),this.loadUnitCode(),this.loadTaxCode(),this.loadVenCode(),this.loadCompCode(),this.loadBranchCode(),this.loadVenName(),this.loadPaymentTerm(),this.loadCurrencyCode(),this.loadShipmentCode(),this.form.patchValue({trantype:"1"}),this.id>0&&this.edit()}setForm(){this.form=this.fb.group({compCode:["",s.kI.required],branchCode:["",s.kI.required],tranDate:["",s.kI.required],deliveryDate:[],invRefNumber:[""],docNumber:["",s.kI.required],taxId:["",s.kI.required],remarks:["",s.kI.required],poNotes:["",s.kI.required],trantype:["",s.kI.required],venCatCode:[],vendCode:[],paymentID:["",s.kI.required],taxInclusive:["",s.kI.required],tranCurrencyCode:["",s.kI.required],tranShipMode:[""],shipmentMode:[""],whCode:["",s.kI.required]})}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(i=>{i&&(this.UOMList=i)})}loadWarehouses(){this.apiService.getall("warehouse/getSelectWarehouseList").subscribe(e=>{e&&(this.warehouseList=e)})}loadItemCode(){this.apiService.getall("PurchaseOrder/GetItemCodeSelectList").subscribe(e=>{e&&(this.ItemCodeList=e,this.ItemCodeList.forEach(a=>{a.text=a.textTwo+" ("+a.value+")"}))})}loadItemName(){this.apiService.getall("PurchaseOrder/GetItemNameSelectList").subscribe(e=>{e&&(this.ItemNameList=e)})}loadUnitCode(){this.apiService.getall("PurchaseOrder/GetUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadCompCode(){this.apiService.getall("PurchaseOrder/GetCompSelectList").subscribe(e=>{e&&(this.compCodeList=e)})}loadBranchCode(){this.apiService.getall("PurchaseOrder/GetBranchSelectList").subscribe(e=>{e&&(this.BranchCodeList=e)})}loadTaxCode(){this.apiService.getall("PurchaseOrder/GetTaxSelectList").subscribe(e=>{e&&(this.TaxCodeList=e)})}loadCurrencyCode(){this.apiService.getall("PurchaseOrder/GetCurrencySelectList").subscribe(e=>{e&&(this.CurrencyCodeList=e)})}loadShipmentCode(){this.apiService.getall("PurchaseOrder/GetShipmentSelectList").subscribe(e=>{e&&(this.ShipmentCodeList=e)})}loadVenCode(){this.apiService.getall("PurchaseOrder/GetVendorCodeSelectList").subscribe(e=>{e&&(this.VenCodeList=e)})}loadVenName(){this.apiService.getall("PurchaseOrder/GetVendorNameSelectList").subscribe(e=>{e&&(this.VenNameList=e)})}loadPaymentTerm(){this.apiService.getall("PurchaseOrder/GetPaymentTermSelectList").subscribe(e=>{e&&(this.PaymentTermList=e)})}loadUomdata(e){let i=this.tranItemCode+"_"+e.value;i?this.apiService.getall(`PurchaseOrder/ProductUomtPriceItem/${i}`).subscribe(r=>{r&&(this.tranUOMFactor=r.tranItemUomFactor,this.tranItemCost=r.itemAvgcost)}):(this.unitType="",this.description="")}loadwarehouse(e){let a=e.value;a&&(this.apiService.getall(`PurchaseOrder/ProductWarehouse/${a}`).subscribe(i=>{i&&(this.warehouseList=i)}),this.loadcompany(a))}loadcompany(e){e&&this.apiService.getall(`PurchaseOrder/Productcompany/${e}`).subscribe(i=>{i&&(this.compCodeList=i)})}loadVendata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${a}`).subscribe(i=>{i&&(this.form.patchValue({vendCode:`${i.vendName}`}),this.form.patchValue({paymentID:`${i.poTermsCode}`}))})}loadTaxdata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${a}`).subscribe(i=>{i&&(this.tranItemName=i[0].shortName),this.loadUomList(a)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let a=e.value;a?this.apiService.getall(`product/productUnitPriceItem/${a}`).subscribe(r=>{r&&(this.product=r.nameEN,this.unitType=r.unitTypeEN,this.description=r.description,this.price=r.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnitCode:this.tranItemUnitCode,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0}),this.setGrandTotal(),this.setToDefault()}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let a=this.listOfInvoices.findIndex(i=>i.sequence===e);this.listOfInvoices.splice(a,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnitCode=e.tranItemUnitCode,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.listOfInvoices.forEach(e=>{this.grandInvoiceTotal+=e.tranTotCost+e.taxAmount,this.grandVatTotal+=e.taxAmount,this.grandTotal+=e.tranTotCost}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(3),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(3),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(3)}setToDefault(){this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="0",this.discAmt=0,this.itemTax="0",this.isVatIncluded||(this.itemTaxPer="0"),this.taxAmount=0,this.itemTracking=0}calculate(){var i=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(i.toString()),this.calculateDis(),this.calculatetaxAmount()}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=this.tranTotCost,a=parseFloat((parseFloat(this.discPer)/100).toFixed(2)),i=parseFloat((e*a).toFixed(2));this.discAmt=parseFloat(i.toString());var r=this.tranItemCost;this.tranTotCost=r-r*a,this.tranTotCost=this.tranTotCost*this.tranItemQty,a=parseFloat(this.itemTaxPer),this.taxAmount=0==this.form.value.taxInclusive?parseFloat((this.tranTotCost*a/100).toFixed(2)):parseFloat((this.tranTotCost*a/(a+100)).toFixed(4))}}setTaxValue(e){const a=e.target.value;a&&(this.isVatIncluded="0"!=a,this.itemTaxPer="0",this.taxAmount=0,this.form.controls.taxId.setValue(""))}loadItemTax(e){this.isVatIncluded&&(this.itemTaxPer=e.text)}calculatetaxAmount(){var e=this.tranTotCost,a=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*a/100).toFixed(2))}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.listOfInvoices.length>0?(this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.form.value.Prcode="0",this.form.value.vendCode=this.form.value.venCatCode,this.grandTotal=0,this.DiscPerc=0,this.discAmt=0,this.grandVatTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.DiscPerc+=parseFloat(e.discPer),this.discAmt+=e.discAmt}),this.form.value.tranTotalCost=this.grandTotal,this.form.value.taxes=this.grandVatTotal,this.form.value.tranDiscPer=this.DiscPerc,this.form.value.tranDiscAmount=this.discAmt,this.form.value.deliveryDate||(this.form.value.deliveryDate=null),this.apiService.post("PurchaseOrder/CreatePurchaserequest",this.form.value).subscribe(e=>{this.reset(),this.dialogRef.close(!0),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.notifyService.showError("Line Items Empty")):this.utilService.FillUpFields()}reset(){this.form.reset()}closeModel(){this.ngOnInit(),this.listOfInvoices=[],this.dialogRef.close()}edit(){this.listOfInvoices=[],this.apiService.get("PurchaseOrder",this.id).subscribe(e=>{e&&(this.isReadOnly=!0,this.form.patchValue(e),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),e.deliveryDate&&this.form.patchValue({deliveryDate:`${e.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${e.compCode}`}),this.form.patchValue({tranCurrencyCode:`${e.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${e.poNotes}`}),e.itemList.forEach(i=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:i.tranItemCode,tranItemName:i.tranItemName,tranItemName2:i.tranItemName2,tranItemQty:i.tranItemQty,tranItemUnitCode:i.tranItemUnitCode,tranUOMFactor:i.tranUOMFactor,tranItemCost:i.tranItemCost,tranTotCost:i.tranTotCost,discPer:i.discPer,discAmt:i.discAmt,itemTax:i.itemTax,itemTaxPer:i.itemTaxPer,taxAmount:i.taxAmount,itemTracking:i.itemTracking})}),this.setGrandTotal())})}view(){this.listOfInvoices=[],this.apiService.get("PurchaseOrder",this.id).subscribe(e=>{e&&(this.isReadOnly=!0,this.form.patchValue(e),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),e.deliveryDate&&this.form.patchValue({deliveryDate:`${e.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${e.compCode}`}),this.form.patchValue({tranCurrencyCode:`${e.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${e.poNotes}`}),e.itemList.forEach(i=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:i.tranItemCode,tranItemName:i.tranItemName,tranItemName2:i.tranItemName2,tranItemQty:i.tranItemQty,tranItemUnitCode:i.tranItemUnitCode,tranUOMFactor:i.tranUOMFactor,tranItemCost:i.tranItemCost,tranTotCost:i.tranTotCost,discPer:i.discPer,discAmt:i.discAmt,itemTax:i.itemTax,itemTaxPer:i.itemTaxPer,taxAmount:i.taxAmount,itemTracking:i.itemTracking})}),this.setGrandTotal())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(Z.so),t.Y36(A.g),t.Y36(b.R),t.Y36(Te.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdatepurchaserequest"]],decls:297,vars:271,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],[1,"mr-sm-2"],["bindLabel","text","bindValue","value","formControlName","branchCode",3,"items","change"],[3,"control"],["bindLabel","text","bindValue","value","formControlName","whCode",3,"items"],["bindLabel","text","bindValue","value","formControlName","compCode",3,"items"],["formControlName","trantype",1,"custom-select","mr-sm-2"],["value",""],["selected","","value","1"],["bindLabel","text","bindValue","value","formControlName","venCatCode",3,"items","change"],["type","date","formControlName","tranDate",1,"form-control",3,"placeholder"],["type","date","formControlName","deliveryDate",1,"form-control",3,"placeholder"],["type","text","formControlName","invRefNumber",1,"form-control",3,"placeholder"],["type","text","readonly","","formControlName","vendCode",1,"form-control",3,"placeholder"],["type","text","formControlName","docNumber",1,"form-control",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","paymentID",3,"items"],["id","taxid","formControlName","taxInclusive",1,"custom-select","mr-sm-2",3,"change"],["value","1"],["value","0"],["bindLabel","text","bindValue","value","formControlName","taxId",3,"items","change"],["bindLabel","text","bindValue","value","formControlName","tranCurrencyCode",3,"items"],[1,"col-md-6","col-lg-6"],[1,"row"],["bindLabel","text","bindValue","value","formControlName","tranShipMode",3,"items"],["type","text","formControlName","shipmentMode",1,"form-control",3,"placeholder"],["formControlName","remarks",1,"form-control",3,"placeholder"],["formControlName","poNotes",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["width","18%"],["width","8%"],["width","11%"],["bindLabel","text","bindValue","value",2,"width","250px",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","blur"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","change","blur"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"click"],[1,"icon-plus"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","6","rowspan","5"],[1,"text-right","bgcolor"],[1,"bgcolor"],[1,"text-right","bgcolor_bottom"],[1,"bgcolor_bottom"],[1,"col-lg-12","col-md-12","text-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"disabled","value"],[1,"text-right"],[1,"icon-note","cpointer",3,"click"],[1,"icon-trash","cpointer",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return a.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return a.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"div",3),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t.TgZ(14,"label",9),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"ng-select",10),t.NdJ("change",function(r){return a.loadwarehouse(r)}),t.qZA(),t._UZ(18,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(19,"div",7),t.TgZ(20,"div",8),t.TgZ(21,"label",9),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"ng-select",12),t._UZ(25,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(26,"div",7),t.TgZ(27,"div",8),t.TgZ(28,"label",9),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"ng-select",13),t._UZ(32,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(33,"div",7),t.TgZ(34,"div",8),t.TgZ(35,"label",9),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"select",14),t.TgZ(39,"option",15),t._uU(40,"Choose TranType Code"),t.qZA(),t.ynx(41),t.TgZ(42,"option",16),t._uU(43,"Purchase Request"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",7),t.TgZ(45,"div",8),t.TgZ(46,"label",9),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"ng-select",17),t.NdJ("change",function(r){return a.loadVendata(r)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",7),t.TgZ(51,"div",8),t.TgZ(52,"label",9),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"input",18),t.ALo(56,"translate"),t.ALo(57,"translate"),t.qZA(),t.qZA(),t.TgZ(58,"div",7),t.TgZ(59,"div",8),t.TgZ(60,"label",9),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"input",19),t.ALo(64,"translate"),t.ALo(65,"translate"),t.qZA(),t.qZA(),t.TgZ(66,"div",7),t.TgZ(67,"div",8),t.TgZ(68,"label",9),t._uU(69),t.ALo(70,"translate"),t.qZA(),t._UZ(71,"input",20),t.ALo(72,"translate"),t.ALo(73,"translate"),t.qZA(),t.qZA(),t.TgZ(74,"div",7),t.TgZ(75,"div",8),t.TgZ(76,"label",9),t._uU(77),t.ALo(78,"translate"),t.qZA(),t._UZ(79,"input",21),t.ALo(80,"translate"),t.ALo(81,"translate"),t.qZA(),t.qZA(),t.TgZ(82,"div",7),t.TgZ(83,"div",8),t.TgZ(84,"label",9),t._uU(85),t.ALo(86,"translate"),t.qZA(),t._UZ(87,"input",22),t.ALo(88,"translate"),t.ALo(89,"translate"),t.qZA(),t.qZA(),t.TgZ(90,"div",7),t.TgZ(91,"div",8),t.TgZ(92,"label",9),t._uU(93),t.ALo(94,"translate"),t.qZA(),t._UZ(95,"ng-select",23),t._UZ(96,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(97,"div",7),t.TgZ(98,"div",8),t.TgZ(99,"label",9),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.TgZ(102,"select",24),t.NdJ("change",function(r){return a.setTaxValue(r)}),t.TgZ(103,"option",15),t._uU(104,"Choose Tax Code"),t.qZA(),t.ynx(105),t.TgZ(106,"option",25),t._uU(107,"Yes"),t.qZA(),t.TgZ(108,"option",26),t._uU(109,"NO"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(110,"div",7),t.TgZ(111,"div",8),t.TgZ(112,"label",9),t._uU(113),t.ALo(114,"translate"),t.qZA(),t.TgZ(115,"ng-select",27),t.NdJ("change",function(r){return a.loadItemTax(r)}),t.qZA(),t._UZ(116,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(117,"div",7),t.TgZ(118,"div",8),t.TgZ(119,"label",9),t._uU(120),t.ALo(121,"translate"),t.qZA(),t._UZ(122,"ng-select",28),t._UZ(123,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(124,"div",29),t.TgZ(125,"label",9),t._uU(126),t.ALo(127,"translate"),t.qZA(),t.TgZ(128,"div",30),t.TgZ(129,"div",29),t._UZ(130,"ng-select",31),t.qZA(),t.TgZ(131,"div",29),t._UZ(132,"input",32),t.ALo(133,"translate"),t.ALo(134,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(135,"div",29),t.TgZ(136,"div",8),t.TgZ(137,"label",9),t._uU(138),t.ALo(139,"translate"),t.qZA(),t._UZ(140,"textarea",33),t.ALo(141,"translate"),t.ALo(142,"translate"),t.qZA(),t.qZA(),t.TgZ(143,"div",29),t.TgZ(144,"div",8),t.TgZ(145,"label",9),t._uU(146),t.ALo(147,"translate"),t.qZA(),t._UZ(148,"textarea",34),t.ALo(149,"translate"),t.ALo(150,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(151,"div",35),t.TgZ(152,"table",36),t.TgZ(153,"thead"),t.TgZ(154,"tr"),t.TgZ(155,"th",37),t._uU(156),t.ALo(157,"translate"),t.qZA(),t.TgZ(158,"th",37),t._uU(159),t.ALo(160,"translate"),t.qZA(),t.TgZ(161,"th"),t._uU(162),t.ALo(163,"translate"),t.qZA(),t.TgZ(164,"th",38),t._uU(165),t.ALo(166,"translate"),t.qZA(),t.TgZ(167,"th",39),t._uU(168),t.ALo(169,"translate"),t.qZA(),t.TgZ(170,"th"),t._uU(171),t.ALo(172,"translate"),t.qZA(),t.TgZ(173,"th"),t._uU(174),t.ALo(175,"translate"),t.qZA(),t.TgZ(176,"th"),t._uU(177),t.ALo(178,"translate"),t.qZA(),t.TgZ(179,"th"),t._uU(180),t.ALo(181,"translate"),t.qZA(),t.TgZ(182,"th"),t._uU(183),t.ALo(184,"translate"),t.qZA(),t.TgZ(185,"th"),t._uU(186),t.ALo(187,"translate"),t.qZA(),t._UZ(188,"th"),t.qZA(),t.qZA(),t.TgZ(189,"tbody"),t.TgZ(190,"tr"),t.TgZ(191,"td"),t.TgZ(192,"ng-select",40),t.NdJ("ngModelChange",function(r){return a.tranItemCode=r})("change",function(r){return a.loadTaxdata(r)}),t.qZA(),t.qZA(),t.TgZ(193,"td"),t.TgZ(194,"input",41),t.NdJ("ngModelChange",function(r){return a.tranItemName=r}),t.ALo(195,"translate"),t.qZA(),t.qZA(),t.TgZ(196,"td"),t.TgZ(197,"ng-select",42),t.NdJ("ngModelChange",function(r){return a.tranItemUnitCode=r})("change",function(r){return a.loadUomdata(r)}),t.qZA(),t.qZA(),t.TgZ(198,"td"),t.TgZ(199,"input",41),t.NdJ("ngModelChange",function(r){return a.tranUOMFactor=r}),t.ALo(200,"translate"),t.qZA(),t.qZA(),t.TgZ(201,"td"),t.TgZ(202,"input",43),t.NdJ("ngModelChange",function(r){return a.tranItemCost=r})("keyup",function(){return a.calculate()}),t.ALo(203,"translate"),t.qZA(),t.qZA(),t.TgZ(204,"td"),t.TgZ(205,"input",43),t.NdJ("ngModelChange",function(r){return a.tranItemQty=r})("keyup",function(){return a.calculate()}),t.ALo(206,"translate"),t.qZA(),t.qZA(),t.TgZ(207,"td"),t.TgZ(208,"input",44),t.NdJ("ngModelChange",function(r){return a.tranTotCost=r})("blur",function(){return a.calculatetaxAmount()}),t.ALo(209,"translate"),t.qZA(),t.qZA(),t.TgZ(210,"td"),t.TgZ(211,"input",45),t.NdJ("ngModelChange",function(r){return a.discPer=r})("change",function(){return a.calculateDis()})("blur",function(){return a.calculatetaxAmount()}),t.ALo(212,"translate"),t.qZA(),t.qZA(),t.TgZ(213,"td"),t.TgZ(214,"input",44),t.NdJ("ngModelChange",function(r){return a.discAmt=r})("blur",function(){return a.calculatetaxAmount()}),t.ALo(215,"translate"),t.qZA(),t.qZA(),t.TgZ(216,"td"),t.TgZ(217,"input",44),t.NdJ("ngModelChange",function(r){return a.itemTaxPer=r})("blur",function(){return a.calculatetaxAmount()}),t.ALo(218,"translate"),t.qZA(),t.qZA(),t.TgZ(219,"td"),t.TgZ(220,"input",41),t.NdJ("ngModelChange",function(r){return a.taxAmount=r}),t.ALo(221,"translate"),t.qZA(),t.qZA(),t.TgZ(222,"td"),t.TgZ(223,"button",46),t.NdJ("click",function(){return a.addInvoice()}),t._UZ(224,"i",47),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(225,"thead"),t.TgZ(226,"tr"),t.TgZ(227,"th"),t._uU(228),t.ALo(229,"translate"),t.qZA(),t.TgZ(230,"th"),t._uU(231),t.ALo(232,"translate"),t.qZA(),t.TgZ(233,"th"),t._uU(234),t.ALo(235,"translate"),t.qZA(),t.TgZ(236,"th"),t._uU(237),t.ALo(238,"translate"),t.qZA(),t.TgZ(239,"th"),t._uU(240),t.ALo(241,"translate"),t.qZA(),t.TgZ(242,"th"),t._uU(243),t.ALo(244,"translate"),t.qZA(),t.TgZ(245,"th"),t._uU(246),t.ALo(247,"translate"),t.qZA(),t.TgZ(248,"th"),t._uU(249),t.ALo(250,"translate"),t.qZA(),t.TgZ(251,"th"),t._uU(252),t.ALo(253,"translate"),t.qZA(),t.TgZ(254,"th"),t._uU(255),t.ALo(256,"translate"),t.qZA(),t.TgZ(257,"th"),t._uU(258),t.ALo(259,"translate"),t.qZA(),t._UZ(260,"th",48),t.qZA(),t.qZA(),t.TgZ(261,"tbody"),t.YNc(262,fe,28,11,"tr",49),t.qZA(),t.TgZ(263,"tfoot"),t.TgZ(264,"tr",50),t._UZ(265,"td",51),t.TgZ(266,"td",52),t._uU(267),t.ALo(268,"translate"),t.qZA(),t.TgZ(269,"td",52),t._uU(270),t.ALo(271,"decimalpipe"),t.qZA(),t._UZ(272,"td",53),t.qZA(),t.TgZ(273,"tr",50),t.TgZ(274,"td",52),t._uU(275),t.ALo(276,"translate"),t.qZA(),t.TgZ(277,"td",52),t._uU(278),t.ALo(279,"decimalpipe"),t.qZA(),t._UZ(280,"td",53),t.qZA(),t.TgZ(281,"tr",50),t.TgZ(282,"td",54),t._uU(283),t.ALo(284,"translate"),t.qZA(),t.TgZ(285,"td",54),t._uU(286),t.ALo(287,"decimalpipe"),t.qZA(),t._UZ(288,"td",55),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(289,"div",30),t.TgZ(290,"div",56),t.TgZ(291,"button",57),t.NdJ("click",function(){return a.closeModel()}),t._uU(292),t.ALo(293,"translate"),t.qZA(),t._uU(294," \xa0\xa0 "),t._UZ(295,"input",58),t.ALo(296,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,114,"Create_New_Purchase_Request")," "),t.xp6(4),t.Q6J("formGroup",a.form),t.xp6(10),t.Oqu(t.lcZ(16,116,"Branch")),t.xp6(2),t.Q6J("items",a.BranchCodeList),t.xp6(1),t.Q6J("control",a.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(23,118,"Warehouse")),t.xp6(2),t.Q6J("items",a.warehouseList),t.xp6(1),t.Q6J("control",a.form.controls.whCode),t.xp6(4),t.Oqu(t.lcZ(30,120,"Organization")),t.xp6(2),t.Q6J("items",a.compCodeList),t.xp6(1),t.Q6J("control",a.form.controls.compCode),t.xp6(4),t.Oqu(t.lcZ(37,122,"TranType")),t.xp6(11),t.hij(" ",t.lcZ(48,124,"Vendor_Code")," "),t.xp6(2),t.Q6J("items",a.VenCodeList),t.xp6(4),t.Oqu(t.lcZ(54,126,"Trans_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(56,128,"Select")," ",t.lcZ(57,130,"Trans_Date"),""),t.xp6(6),t.Oqu(t.lcZ(62,132,"Delivery_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(64,134,"Select")," ",t.lcZ(65,136,"Delivery_Date"),""),t.xp6(6),t.hij(" ",t.lcZ(70,138,"Invoice_Reference_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(72,140,"Please_Enter"),"  ",t.lcZ(73,142,"Invoice_Reference_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(78,144,"Vendor_Name")," "),t.xp6(2),t.hYB("placeholder","",t.lcZ(80,146,"Please_Enter")," ",t.lcZ(81,148,"Vendor_Name"),""),t.xp6(6),t.hij(" ",t.lcZ(86,150,"Document_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(88,152,"Please_Enter"),"  ",t.lcZ(89,154,"Category"),""),t.xp6(6),t.Oqu(t.lcZ(94,156,"Payment_Terms")),t.xp6(2),t.Q6J("items",a.PaymentTermList),t.xp6(1),t.Q6J("control",a.form.controls.paymentID),t.xp6(4),t.Oqu(t.lcZ(101,158,"VAT_Inclusive")),t.xp6(13),t.hij(" ",t.lcZ(114,160,"TAX Number")," "),t.xp6(2),t.Q6J("items",a.TaxCodeList),t.xp6(1),t.Q6J("control",a.form.controls.taxId),t.xp6(4),t.hij(" ",t.lcZ(121,162,"Currency")," "),t.xp6(2),t.Q6J("items",a.CurrencyCodeList),t.xp6(1),t.Q6J("control",a.form.controls.tranCurrencyCode),t.xp6(3),t.hij(" ",t.lcZ(127,164,"Shipment Mode")," "),t.xp6(4),t.Q6J("items",a.ShipmentCodeList),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(133,166,"Please_Enter"),"  ",t.lcZ(134,168,"Shipment Mode"),""),t.xp6(6),t.hij(" ",t.lcZ(139,170,"Remarks")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(141,172,"Please_Enter"),"  ",t.lcZ(142,174,"Remarks"),""),t.xp6(6),t.hij(" ",t.lcZ(147,176,"Invoice_Notes")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(149,178,"Please_Enter"),"  ",t.lcZ(150,180,"Invoice_Notes"),""),t.xp6(8),t.Oqu(t.lcZ(157,182,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(160,184,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(163,186,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(166,188,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(169,190,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(172,192,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(175,194,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(178,196,"Disc Per")),t.xp6(3),t.Oqu(t.lcZ(181,198,"Disc Amt")),t.xp6(3),t.Oqu(t.lcZ(184,200,"Item TaxPer")),t.xp6(3),t.Oqu(t.lcZ(187,202,"Tax Amount")),t.xp6(6),t.Q6J("items",a.ItemCodeList)("ngModel",a.tranItemCode)("ngModelOptions",t.DdM(260,Y)),t.xp6(2),t.s9C("placeholder",t.lcZ(195,204,"tranItemName")),t.Q6J("ngModel",a.tranItemName)("ngModelOptions",t.DdM(261,Y)),t.xp6(3),t.Q6J("items",a.UOMList)("ngModel",a.tranItemUnitCode)("ngModelOptions",t.DdM(262,Y)),t.xp6(2),t.s9C("placeholder",t.lcZ(200,206,"tranUOMFactor")),t.Q6J("ngModel",a.tranUOMFactor)("ngModelOptions",t.DdM(263,Y)),t.xp6(3),t.s9C("placeholder",t.lcZ(203,208,"tranItemCost")),t.Q6J("ngModel",a.tranItemCost)("ngModelOptions",t.DdM(264,Y)),t.xp6(3),t.s9C("placeholder",t.lcZ(206,210,"Quantity")),t.Q6J("ngModel",a.tranItemQty)("ngModelOptions",t.DdM(265,Y)),t.xp6(3),t.s9C("placeholder",t.lcZ(209,212,"tranTotCost")),t.Q6J("ngModel",a.tranTotCost)("ngModelOptions",t.DdM(266,Y)),t.xp6(3),t.s9C("placeholder",t.lcZ(212,214,"discPer")),t.Q6J("ngModel",a.discPer)("ngModelOptions",t.DdM(267,Y)),t.xp6(3),t.s9C("placeholder",t.lcZ(215,216,"discAmt")),t.Q6J("ngModel",a.discAmt)("ngModelOptions",t.DdM(268,Y)),t.xp6(3),t.s9C("placeholder",t.lcZ(218,218,"itemTaxPer")),t.Q6J("ngModel",a.itemTaxPer)("ngModelOptions",t.DdM(269,Y)),t.xp6(3),t.s9C("placeholder",t.lcZ(221,220,"taxAmount")),t.Q6J("ngModel",a.taxAmount)("ngModelOptions",t.DdM(270,Y)),t.xp6(8),t.Oqu(t.lcZ(229,222,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(232,224,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(235,226,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(238,228,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(241,230,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(244,232,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(247,234,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(250,236,"Disc Per")),t.xp6(3),t.Oqu(t.lcZ(253,238,"Disc Amt")),t.xp6(3),t.Oqu(t.lcZ(256,240,"Item TaxPer")),t.xp6(3),t.Oqu(t.lcZ(259,242,"Tax Amount")),t.xp6(4),t.Q6J("ngForOf",a.listOfInvoices),t.xp6(5),t.Oqu(t.lcZ(268,244,"Total_Amount")),t.xp6(3),t.Oqu(t.lcZ(271,246,a.grandTotalStr)),t.xp6(5),t.Oqu(t.lcZ(276,248,"VAT_Amount")),t.xp6(3),t.Oqu(t.lcZ(279,250,a.grandVatTotalStr)),t.xp6(5),t.Oqu(t.lcZ(284,252,"Invoice_Total")),t.xp6(3),t.Oqu(t.lcZ(287,254,a.grandInvoiceTotalStr)),t.xp6(6),t.hij(" ",t.lcZ(293,256,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(296,258,"Save")),t.Q6J("disabled",a.isshown))},directives:[s._Y,s.JL,s.sg,G.w9,s.JJ,s.u,H.s,s.EJ,s.YN,s.Kr,s.Fj,s.On,c.sg],pipes:[x.X$,W.J],encapsulation:2}),o})();function Ce(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Purchase_Request_No")," "))}function ve(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.purchaseRequestNO)}}function qe(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Date")," "))}function xe(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.tranDate,"dd/MM/yyyy"))}}function be(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Doc_Num")," "))}function Ue(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.invRefNumber)}}function Ie(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch")," "))}function Le(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function ye(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vendor_Name")," "))}function Oe(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendName)}}function Ne(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vendor_Code")," "))}function Se(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendCode)}}function Pe(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Amount")," "))}function Me(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.totalAmount)}}function we(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Payment_Terms")," "))}function De(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.paymentID)}}function Qe(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reference")," "))}function ke(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.taxId)}}function Je(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Remarks")," "))}function Fe(o,n){if(1&o&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.remarks)}}function Ve(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Re(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",51),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().edit(i.id)}),t.ALo(1,"translate"),t._UZ(2,"i",58),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.s9C("id","edit_"+e.id),t.s9C("matTooltip",t.lcZ(1,2,"Edit_Item"))}}function Ye(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",59),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().delete(i.id)}),t._UZ(1,"i",60),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"Delete_Item")))}function Be(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",62),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().approvePurchaseRequest(i)}),t.ALo(1,"translate"),t._UZ(2,"i",63),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Approve_Item"))}function Ee(o,n){if(1&o&&(t.ynx(0),t.YNc(1,Be,3,3,"a",61),t._uU(2," \xa0 "),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.approvedUser&&!e.isSettled)}}function $e(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",48),t.YNc(1,Re,3,4,"a",50),t._uU(2," \xa0 "),t.TgZ(3,"a",51),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().view(r.id)}),t.ALo(4,"translate"),t._UZ(5,"i",52),t.qZA(),t._uU(6," \xa0 "),t.TgZ(7,"a",53),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().uploadFile(r.id)}),t.ALo(8,"translate"),t._UZ(9,"i",54),t.qZA(),t._uU(10," \xa0 "),t.TgZ(11,"a",51),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().printing(r.id)}),t.ALo(12,"translate"),t._UZ(13,"i",55),t.qZA(),t._uU(14," \xa0 "),t.YNc(15,Ye,3,3,"a",56),t.YNc(16,Ee,3,1,"ng-container",57),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved&&!e.isSettled),t.xp6(2),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(4,8,"View_Details")),t.xp6(4),t.s9C("matTooltip",t.lcZ(8,10,"Document_Upload")),t.xp6(4),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(12,12,"Print_Preview")),t.xp6(4),t.Q6J("ngIf",!e.isSettled&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.hasAuthority)}}function je(o,n){1&o&&t._UZ(0,"tr",64)}function Ge(o,n){1&o&&t._UZ(0,"tr",65)}const He=function(){return{standalone:!0}};let We=(()=>{class o extends O{constructor(e,a,i,r,l,d,h,u,g,L,f){super(l),this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.utilService=d,this.translate=h,this.notifyService=u,this.validationService=g,this.pageService=L,this.dialog=f,this.displayedColumns=["purchaseRequestNO","tranDate","invRefNumber","branchCode","vendName","vendCode","amount","paymentID","taxId","remarks","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.IsSettlentOpened=!1,this.IsApproved=!1,this.tranItemCode="",this.ItemCodeList=[]}ngOnInit(){this.initialLoading(),this.loadItemCode()}refresh(){this.searchValue="",this.tranItemCode="",this.sortingOrder="id desc",this.initialLoading()}loadItemCode(){this.apiService.getall("purchasereturn/GetItemCodeSelectList").subscribe(e=>{e&&(this.ItemCodeList=e)})}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.sortingOrder=e.active+" "+e.direction,this.totalItemsCount=0,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,a,i,r,l=""){var d;this.isLoading=!0,this.apiService.getPagination("PurchaseOrder",this.utilService.getQueryString(e,a,i,r,l,"",0,null!==(d=this.tranItemCode)&&void 0!==d?d:"")).subscribe(h=>{this.totalItemsCount=0,this.data=new p.by(h.items),this.totalItemsCount=h.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},h=>this.utilService.ShowApiErrorMessage(h))}applyFilter(e,a){(e||a)&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}openDialogManage(e=0,a,i="",r="",l,d={module:"00",action:"00act"},h=100){let u=this.utilService.openDialogCongif(this.dialog,l,h);u.componentInstance.dbops=a,u.componentInstance.modalTitle=i,u.componentInstance.modalBtnTitle=r,u.componentInstance.id=e,u.componentInstance.moduleFile=d,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}create(){this.openDialogManage(0,_.Oi.create,this.translate.instant("Create_New_Purchase_Request"),"",st)}edit(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Purchase_Request"),"",st)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,V.a).afterClosed().subscribe(i=>{i&&e>0&&this.apiService.delete("PurchaseOrder",e).subscribe(r=>{this.refresh(),this.utilService.OkMessage()})},i=>this.utilService.ShowApiErrorMessage(i))}view(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Purchase_Request"),"",st)}printing(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Purchase_Request"),"PR",et)}approve(e){}settlePayment(e){}approvePurchaseRequest(e){this.openApprovalDialog(e.branchCode,e.purchaseRequestNO,_.Oi.create,"Purchase_Request","Save","PR",j.$)}openApprovalDialog(e,a,i,r,l,d,h){let u=this.openApprovalDialog1(this.dialog,h);u.componentInstance.dbops=i,u.componentInstance.modalTitle=r,u.componentInstance.modalBtnTitle=l,u.componentInstance.serviceType=d,u.componentInstance.serviceCode=a,u.componentInstance.branchCode=e,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}openApprovalDialog1(e,a){return e.open(a,{disableClose:!0})}openFileUploadDialogManage(e="",a,i,r=80){let l=this.utilService.openDialogCongif(this.dialog,a,r);l.componentInstance.modalTitle=e,l.componentInstance.moduleFile=i,l.afterClosed().subscribe(d=>{})}uploadFile(e){this.openFileUploadDialogManage(this.translate.instant("Document_Upload"),dt.Y,{module:"PURMGT",action:"PR",id:e,sourceId:e})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(x.sK),t.Y36(A.g),t.Y36(b.R),t.Y36(v.N),t.Y36(Z.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-purchaserequest"]],viewQuery:function(e,a){if(1&e&&(t.Gf(U.NW,7),t.Gf(T.YE,7)),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},features:[t.qOj],decls:88,vars:37,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","pb-3"],[1,"col-md-3"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],["bindLabel","textTwo","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange"],[1,"col-md-4","arabicright"],[1,"btn","btn-primary",3,"click"],[1,"",3,"matTooltip","click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"col-md-3","col-lg-3","text-right"],[1,"nav-item","dropdown"],["data-toggle","modal","data-target","#scrollable-modal","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"example-table-container","table-responsive","pt-3"],[3,"isLoading"],["mat-table","","matSort","","matSortActive","Id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","purchaseRequestNO"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tranDate"],["matColumnDef","invRefNumber"],["matColumnDef","branchCode"],["matColumnDef","vendName"],["matColumnDef","vendCode"],["matColumnDef","amount"],["matColumnDef","paymentID"],["matColumnDef","taxId"],["matColumnDef","remarks"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["class","tableicons pcursor","data-toggle","modal","data-target","#scrollable-modal",3,"id","matTooltip","click",4,"ngIf"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"id","matTooltip","click"],[1,"icon-list"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-cloud-upload"],[1,"icon-printer"],["class","tableicons",3,"click",4,"ngIf"],[4,"ngIf"],[1,"icon-note"],[1,"tableicons",3,"click"],[1,"icon-trash",3,"matTooltip"],["class","tableicons pcursor",3,"matTooltip","click",4,"ngIf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-arrow-up-circle"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",8),t.TgZ(16,"div",1),t.TgZ(17,"div",9),t.TgZ(18,"div",10),t.TgZ(19,"div",11),t.TgZ(20,"div",12),t.TgZ(21,"div",13),t.TgZ(22,"input",14),t.NdJ("ngModelChange",function(r){return a.searchValue=r}),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.TgZ(24,"div",13),t.TgZ(25,"ng-select",15),t.NdJ("ngModelChange",function(r){return a.tranItemCode=r}),t.qZA(),t.qZA(),t.TgZ(26,"div",16),t.TgZ(27,"button",17),t.NdJ("click",function(){return a.applyFilter(a.searchValue,a.tranItemCode)}),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._uU(30," \xa0 "),t.TgZ(31,"a",18),t.NdJ("click",function(){return a.refresh()}),t.ALo(32,"translate"),t._UZ(33,"i",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",1),t.TgZ(35,"div",20),t.TgZ(36,"h4",21),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.qZA(),t.TgZ(39,"div",22),t.TgZ(40,"div",23),t.TgZ(41,"a",24),t.NdJ("click",function(){return a.create()}),t._UZ(42,"i",25),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(45,"div",26),t.TgZ(46,"div",27),t._UZ(47,"spinner-loader",28),t.ynx(48),t.TgZ(49,"table",29),t.NdJ("matSortChange",function(r){return a.onSortOrder(r)}),t.ynx(50,30),t.YNc(51,Ce,3,3,"th",31),t.YNc(52,ve,2,1,"td",32),t.BQk(),t.ynx(53,33),t.YNc(54,qe,3,3,"th",31),t.YNc(55,xe,3,4,"td",32),t.BQk(),t.ynx(56,34),t.YNc(57,be,3,3,"th",31),t.YNc(58,Ue,2,1,"td",32),t.BQk(),t.ynx(59,35),t.YNc(60,Ie,3,3,"th",31),t.YNc(61,Le,2,1,"td",32),t.BQk(),t.ynx(62,36),t.YNc(63,ye,3,3,"th",31),t.YNc(64,Oe,2,1,"td",32),t.BQk(),t.ynx(65,37),t.YNc(66,Ne,3,3,"th",31),t.YNc(67,Se,2,1,"td",32),t.BQk(),t.ynx(68,38),t.YNc(69,Pe,3,3,"th",31),t.YNc(70,Me,2,1,"td",32),t.BQk(),t.ynx(71,39),t.YNc(72,we,3,3,"th",31),t.YNc(73,De,2,1,"td",32),t.BQk(),t.ynx(74,40),t.YNc(75,Qe,3,3,"th",31),t.YNc(76,ke,2,1,"td",32),t.BQk(),t.ynx(77,41),t.YNc(78,Je,3,3,"th",31),t.YNc(79,Fe,2,1,"td",32),t.BQk(),t._uU(80," ne "),t.ynx(81,42),t.YNc(82,Ve,3,3,"th",43),t.YNc(83,$e,17,14,"td",32),t.BQk(),t.YNc(84,je,1,0,"tr",44),t.YNc(85,Ge,1,0,"tr",45),t.qZA(),t.ynx(86),t.TgZ(87,"mat-paginator",46),t.NdJ("page",function(r){return a.onPageSwitch(r)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,20,"Purchase_Request")," "),t.xp6(6),t.hij("",t.lcZ(11,22,"Purchase_Management")," "),t.xp6(3),t.Oqu(t.lcZ(14,24,"Purchase_Request")),t.xp6(9),t.MGl("placeholder","",t.lcZ(23,26,"Search"),"..."),t.Q6J("ngModel",a.searchValue),t.xp6(3),t.Q6J("items",a.ItemCodeList)("ngModel",a.tranItemCode)("ngModelOptions",t.DdM(36,He)),t.xp6(3),t.Oqu(t.lcZ(29,28,"Search")),t.xp6(3),t.s9C("matTooltip",t.lcZ(32,30,"Refresh")),t.xp6(6),t.Oqu(t.lcZ(38,32,"Purchase_Request")),t.xp6(6),t.hij("",t.lcZ(44,34,"Add_New_Purchase_Request")," "),t.xp6(4),t.Q6J("isLoading",a.isLoading),t.xp6(2),t.Q6J("dataSource",a.data),t.xp6(35),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("length",a.totalItemsCount)("pageSize",a.pageService.pageCount)("pageSizeOptions",a.pageService.selectItemsPerPage))},directives:[s.Fj,s.JJ,s.On,G.w9,it.gM,J.r,p.BZ,T.YE,p.w1,p.fO,p.Dz,p.as,p.nj,U.NW,p.ge,T.nU,p.ev,c.O5,p.XQ,p.Gk],pipes:[x.X$,c.uU],encapsulation:2}),o})();function ze(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",61),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",61),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td",50),t.TgZ(24,"i",62),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().editInvoiceItem(r)}),t.qZA(),t._uU(25," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.tranItemCode),t.xp6(2),t.Oqu(e.tranItemName),t.xp6(2),t.Oqu(e.tranItemUnitCode),t.xp6(2),t.Oqu(e.tranUOMFactor),t.xp6(2),t.Oqu(e.tranItemCost),t.xp6(2),t.Oqu(e.tranItemQty),t.xp6(2),t.Oqu(e.tranTotCost),t.xp6(2),t.Oqu(e.discPer),t.xp6(2),t.Oqu(e.discAmt),t.xp6(2),t.Oqu(e.itemTaxPer),t.xp6(2),t.Oqu(e.taxAmount)}}const B=function(){return{standalone:!0}};let lt=(()=>{class o{constructor(e,a,i,r,l,d,h,u,g,L,f){this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.utilService=d,this.dialogRef=h,this.notifyService=u,this.validationService=g,this.pageService=L,this.dialog=f,this.displayedColumns=["tranNumber","tranDate","invRefNumber","branchCode","vendCode","paymentID","taxId","Actions"],this.searchValue="",this.sortingOrder="id desc",this.customerList=[],this.companyList=[],this.paymentTermsList=[],this.branchList=[],this.productList=[],this.vatList=[],this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.DiscPerc=0,this.trantypeValue="3",this.oldBalQty=0,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.ShipmentCodeList=[],this.CurrencyCodeList=[],this.TaxCodeList=[],this.VenCodeList=[],this.compCodeList=[],this.BranchCodeList=[],this.VenNameList=[],this.PaymentTermList=[],this.ItemCodeList=[],this.ItemNameList=[],this.UOMList=[],this.PurchaseRequestList=[],this.warehouseList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="0",this.discAmt=0,this.itemTax="0",this.itemTaxPer="0",this.taxAmount=0,this.receivedQty=0,this.returnedQty=0,this.balQty=0,this.preBalQty=0,this.isVatIncluded=!1,this.isQuantityLoading=!1,this.itemTracking=0}ngOnInit(){this.setForm(),this.loadTaxCode(),this.loadVenCode(),this.loadCompCode(),this.loadBranchCode(),this.loadVenName(),this.loadPaymentTerm(),this.loadItemCode(),this.loadItemName(),this.loadUnitCode(),this.loadCurrencyCode(),this.loadShipmentCode(),this.loadPurchaseRequest(),this.loadWarehouses(),this.form.patchValue({trantype:"3"}),this.id>0&&this.edit()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadUser(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadUser(e,a,i,r){this.data=new p.by(this.getData()),this.totalItemsCount=2}loadCompCode(){this.apiService.getall("purchasereturn/GetCompSelectList").subscribe(e=>{e&&(this.compCodeList=e)})}loadWarehouses(){this.apiService.getall("warehouse/getSelectWarehouseList").subscribe(e=>{e&&(this.warehouseList=e)})}loadBranchCode(){this.apiService.getall("purchasereturn/GetBranchSelectList").subscribe(e=>{e&&(this.BranchCodeList=e)})}loadTaxCode(){this.apiService.getall("purchasereturn/GetTaxSelectList").subscribe(e=>{e&&(this.TaxCodeList=e)})}loadVenCode(){this.apiService.getall("purchasereturn/GetVendorCodeSelectList").subscribe(e=>{e&&(this.VenCodeList=e)}),this.apiService.getall("PurchaseOrder/GetGRNSelectList").subscribe(e=>{e&&(this.PurchaseRequestList=e)})}loadVenName(){this.apiService.getall("purchasereturn/GetVendorNameSelectList").subscribe(e=>{e&&(this.VenNameList=e)})}loadPaymentTerm(){this.apiService.getall("purchasereturn/GetPaymentTermSelectList").subscribe(e=>{e&&(this.PaymentTermList=e)})}loadItemCode(){this.apiService.getall("purchasereturn/GetItemCodeSelectList").subscribe(e=>{e&&(this.ItemCodeList=e,this.ItemCodeList.forEach(a=>{a.text=a.textTwo+" ("+a.value+")"}))})}loadItemName(){this.apiService.getall("purchasereturn/GetItemNameSelectList").subscribe(e=>{e&&(this.ItemNameList=e)})}loadUnitCode(){this.apiService.getall("purchasereturn/GetUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadCurrencyCode(){this.apiService.getall("purchasereturn/GetCurrencySelectList").subscribe(e=>{e&&(this.CurrencyCodeList=e)})}loadShipmentCode(){this.apiService.getall("purchasereturn/GetShipmentSelectList").subscribe(e=>{e&&(this.ShipmentCodeList=e)})}loadUomdata(e){let i=this.tranItemCode+"_"+e.value;i?this.apiService.getall(`purchasereturn/ProductUomtPriceItem/${i}`).subscribe(r=>{r&&(this.tranUOMFactor=r.tranItemUomFactor,this.tranItemCost=r.itemAvgcost)}):(this.unitType="",this.description="")}loadVendata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${a}`).subscribe(i=>{i&&(this.form.patchValue({vendCode:`${i.vendName}`}),this.form.patchValue({paymentID:`${i.poTermsCode}`}))})}loadTaxdata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${a}`).subscribe(i=>{i&&(this.tranItemName=i[0].shortName),this.loadUomList(a)})}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(i=>{i&&(this.UOMList=i)})}getData(){return[]}setForm(){this.form=this.fb.group({compCode:["",s.kI.required],branchCode:["",s.kI.required],tranDate:["",s.kI.required],deliveryDate:["",s.kI.required],invRefNumber:["",s.kI.required],venCatCode:["",s.kI.required],docNumber:["",s.kI.required],taxId:["",s.kI.required],remarks:[""],poNotes:[""],trantype:[this.trantypeValue,s.kI.required],vendCode:["",s.kI.required],paymentID:["",s.kI.required],taxInclusive:["",s.kI.required],tranCurrencyCode:["",s.kI.required],tranShipMode:[""],shipmentMode:[""],whCode:["",s.kI.required]})}loadPurchaseRequest(){}checkReturnedQty(){const e=parseInt(this.preBalQty.toString()),a=parseInt(this.receivedQty.toString()),i=parseInt(this.returnedQty.toString()),r=parseInt(this.balQty.toString());0==this.oldBalQty&&(this.oldBalQty=r),i>e-a?(this.returnedQty=0,this.balQty=this.preBalQty):this.balQty=this.oldBalQty-this.returnedQty}loadPRdata(e){this.apiService.getall(`purchasereturn/GetPRList/${e.value}`).subscribe(i=>{i&&(this.isReadOnly=!0,this.form.patchValue(i),this.form.patchValue({tranDate:`${i.tranDate.split("T")[0]}`}),i.deliveryDate&&this.form.patchValue({deliveryDate:`${i.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${i.compCode}`}),this.form.patchValue({tranCurrencyCode:`${i.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${i.poNotes}`}),this.id=i.id,this.form.patchValue({trantype:"2"}),i.itemList.forEach(l=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:l.tranItemCode,tranItemName:l.tranItemName,tranItemName2:l.tranItemName2,tranItemQty:l.tranItemQty,tranItemUnitCode:l.tranItemUnitCode,tranUOMFactor:l.tranUOMFactor,tranItemCost:l.tranItemCost,tranTotCost:l.tranTotCost,discPer:l.discPer,discAmt:l.discAmt,itemTax:l.itemTax,itemTaxPer:l.itemTaxPer,taxAmount:l.taxAmount,itemTracking:l.itemTracking,receivedQty:l.receivedQty,returnedQty:l.returnedQty,balQty:l.balQty,preBalQty:l.preBalQty})}),this.setGrandTotal())})}loadList(e,a,i,r,l=""){this.isLoading=!0,this.apiService.getPagination("purchasereturn",this.utilService.getQueryString(e,a,i,r)).subscribe(d=>{this.totalItemsCount=0,this.data=new p.by(d.items),this.totalItemsCount=d.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,this.isLoading=!1},d=>this.utilService.ShowApiErrorMessage(d))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}setTaxValue(e){const a=e.target.value;a&&(this.isVatIncluded="0"!=a,this.itemTaxPer="0",this.taxAmount=0,this.form.controls.taxId.setValue(""))}loadItemTax(e){this.isVatIncluded&&(this.itemTaxPer=e.text)}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("purchasereturn",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,V.a).afterClosed().subscribe(i=>{i&&e>0&&this.apiService.delete("purchasereturn",e).subscribe(r=>{this.refresh(),this.utilService.OkMessage()})},i=>this.utilService.ShowApiErrorMessage(i))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(r=>{r&&this.form.controls.taxIdNumber.setValue(r.vatNumber)})}loadBranchs(e){let a=e.target.value;a&&this.apiService.getall(`branch/getSelectSysBranchListByComId/${a}`).subscribe(i=>{i&&(this.branchList=i)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let a=e.value;a?this.apiService.getall(`product/productUnitPriceItem/${a}`).subscribe(r=>{r&&(this.product=r.nameEN,this.unitType=r.unitTypeEN,this.description=r.description,this.price=r.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.tranTotCost>0&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnitCode:this.tranItemUnitCode,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0,receivedQty:this.receivedQty,returnedQty:this.returnedQty,balQty:this.balQty,preBalQty:this.preBalQty}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let a=this.listOfInvoices.findIndex(i=>i.sequence===e);this.listOfInvoices.splice(a,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnitCode=e.tranItemUnitCode,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking,this.receivedQty=e.receivedQty,this.returnedQty=e.returnedQty,this.balQty=e.balQty,this.preBalQty=e.preBalQty}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandInvoiceTotal+=e.tranTotCost+e.taxAmount}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(2),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(2),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(2)}closeModel(){this.ngOnInit(),this.listOfInvoices=[],this.dialogRef.close()}setToDefault(){this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="0",this.discAmt=0,this.itemTax="",this.isVatIncluded||(this.itemTaxPer="0"),this.taxAmount=0,this.itemTracking=0}calculate(){var i=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(i.toString()),this.calculateDis(),this.calculatetaxAmount()}calculateQuantity(){const e=this.form.controls.whCode.value;e&&this.tranItemCode&&this.tranItemQty&&(this.isQuantityLoading=!0,this.apiService.getall(`purchasereturn/getItemsForWarehouseSelectList?whCode=${e}&itemCode=${this.tranItemCode}&itemCount=${this.tranItemQty}`).subscribe(a=>{a&&(this.isQuantityLoading=!1,"1"==a.value&&(this.notifyService.showError(` Warehouse Quantity (${a.text})`),this.tranItemQty=this.tranTotCost=0))}))}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=this.tranTotCost,a=parseFloat((parseFloat(this.discPer)/100).toFixed(2)),i=parseFloat((e*a).toFixed(2));this.discAmt=parseFloat(i.toString());var r=this.tranItemCost;this.tranTotCost=r-r*a,this.tranTotCost=this.tranTotCost*this.tranItemQty,a=parseFloat(this.itemTaxPer),this.taxAmount=0==this.form.value.taxInclusive?parseFloat((this.tranTotCost*a/100).toFixed(2)):parseFloat((this.tranTotCost*a/(a+100)).toFixed(4))}}calculatetaxAmount(){var e=this.tranTotCost,a=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*a/100).toFixed(2))}submit(){if(this.form.valid){if(this.id>0&&(this.form.value.id=this.id),!this.form.value.tranShipMode&&!this.form.value.shipmentMode.trim())return void this.utilService.localizeError("shipmentMode");this.listOfInvoices.length>0?(this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.form.value.Prcode="0",this.form.value.vendCode=this.form.value.venCatCode,this.grandTotal=0,this.DiscPerc=0,this.discAmt=0,this.grandVatTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.DiscPerc+=parseFloat(e.discPer),this.discAmt+=e.discAmt}),this.form.value.tranTotalCost=this.grandTotal,this.form.value.taxes=this.grandVatTotal,this.form.value.tranDiscPer=this.DiscPerc,this.form.value.tranDiscAmount=this.discAmt,this.apiService.post("purchasereturn/CreatePurchaserequest",this.form.value).subscribe(e=>{this.reset(),this.dialogRef.close(!0),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.notifyService.showError("Line Items Empty")}else this.utilService.FillUpFields()}reset(){this.form.reset()}edit(){this.apiService.get("purchasereturn",this.id).subscribe(e=>{e&&(this.isReadOnly=!0,this.form.patchValue(e),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),e.deliveryDate&&this.form.patchValue({deliveryDate:`${e.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${e.compCode}`}),this.form.patchValue({tranCurrencyCode:`${e.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${e.poNotes}`}),e.itemList.forEach(i=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:i.tranItemCode,tranItemName:i.tranItemName,tranItemName2:i.tranItemName2,tranItemQty:i.tranItemQty,tranItemUnitCode:i.tranItemUnitCode,tranUOMFactor:i.tranUOMFactor,tranItemCost:i.tranItemCost,tranTotCost:i.tranTotCost,discPer:i.discPer,discAmt:i.discAmt,itemTax:i.itemTax,itemTaxPer:i.itemTaxPer,taxAmount:i.taxAmount,itemTracking:i.itemTracking,receivedQty:i.receivedQty,returnedQty:i.returnedQty,balQty:i.balQty,preBalQty:i.preBalQty})}),this.setGrandTotal())})}view(){this.apiService.get("purchasereturn",this.id).subscribe(e=>{e&&(this.isReadOnly=!0,this.form.patchValue(e),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),e.deliveryDate&&this.form.patchValue({deliveryDate:`${e.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${e.compCode}`}),this.form.patchValue({tranCurrencyCode:`${e.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${e.poNotes}`}),e.itemList.forEach(i=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:i.tranItemCode,tranItemName:i.tranItemName,tranItemName2:i.tranItemName2,tranItemQty:i.tranItemQty,tranItemUnitCode:i.tranItemUnitCode,tranUOMFactor:i.tranUOMFactor,tranItemCost:i.tranItemCost,tranTotCost:i.tranTotCost,discPer:i.discPer,discAmt:i.discAmt,itemTax:i.itemTax,itemTaxPer:i.itemTaxPer,taxAmount:i.taxAmount,itemTracking:i.itemTracking,receivedQty:i.receivedQty,returnedQty:i.returnedQty,balQty:i.balQty,preBalQty:i.preBalQty})}),this.setGrandTotal(),this.id=e.id)})}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}approvePurchaseReturn(e){this.openApprovalDialog(e.branchCode,e.purchaseRequestNO,_.Oi.create,"Purchase_Return","Save","PRT",j.$)}openApprovalDialog(e,a,i,r,l,d,h){let u=this.openApprovalDialog1(this.dialog,h);u.componentInstance.dbops=i,u.componentInstance.modalTitle=r,u.componentInstance.modalBtnTitle=l,u.componentInstance.serviceType=d,u.componentInstance.serviceCode=a,u.componentInstance.branchCode=e,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}openApprovalDialog1(e,a){return e.open(a,{disableClose:!0})}loadGRNReturndata(e){let a=e.value;this.apiService.getall(`purchasereturn/getGRNReturnDetails/${a}`).subscribe(i=>{i&&(this.isReadOnly=!0,this.form.patchValue(i),this.form.patchValue({tranDate:`${i.tranDate.split("T")[0]}`}),i.deliveryDate&&this.form.patchValue({deliveryDate:`${i.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${i.compCode}`}),this.form.patchValue({tranCurrencyCode:`${i.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${i.poNotes}`}),this.form.patchValue({purchaseRequestNO:a}),this.form.patchValue({trantype:this.trantypeValue}),this.listOfInvoices=[],i.itemList.forEach(l=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:l.tranItemCode,tranItemName:l.tranItemName,tranItemName2:l.tranItemName2,tranItemQty:l.tranItemQty,tranItemUnitCode:l.tranItemUnitCode,tranUOMFactor:l.tranUOMFactor,tranItemCost:l.tranItemCost,tranTotCost:l.tranTotCost,discPer:l.discPer,discAmt:l.discAmt,itemTax:l.itemTax,itemTaxPer:l.itemTaxPer,taxAmount:l.taxAmount,itemTracking:l.itemTracking,receivedQty:l.receivedQty,returnedQty:l.returnedQty,balQty:l.balQty,preBalQty:l.preBalQty})}),this.setGrandTotal())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(Z.so),t.Y36(A.g),t.Y36(b.R),t.Y36(v.N),t.Y36(Z.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdatepurchasereturn"]],viewQuery:function(e,a){if(1&e&&(t.Gf(U.NW,7),t.Gf(T.YE,7)),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},decls:300,vars:273,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],[1,"mr-sm-2"],["bindLabel","text","bindValue","value","formControlName","compCode",3,"items"],[3,"control"],["bindLabel","text","bindValue","value","formControlName","whCode",3,"items"],["bindLabel","text","bindValue","value","formControlName","branchCode",3,"items"],["formControlName","trantype",1,"custom-select","mr-sm-2"],["value",""],["value","3"],["bindLabel","text","bindValue","value","formControlName","venCatCode",3,"items","change"],["type","date","formControlName","tranDate",1,"form-control",3,"placeholder"],["type","date","formControlName","deliveryDate",1,"form-control",3,"placeholder"],["type","text","formControlName","invRefNumber",1,"form-control",3,"placeholder"],["type","text","readonly","","formControlName","vendCode",1,"form-control",3,"placeholder"],["type","text","formControlName","docNumber",1,"form-control",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","paymentID",3,"items"],["id","taxid","formControlName","taxInclusive",1,"custom-select","mr-sm-2",3,"change"],["value","1"],["value","0"],["bindLabel","text","bindValue","value","formControlName","taxId",3,"items","change"],["bindLabel","text","bindValue","value","formControlName","tranCurrencyCode",3,"items"],[1,"col-md-6","col-lg-6"],[1,"row"],["bindLabel","text","bindValue","value","formControlName","tranShipMode",3,"items"],["type","text","formControlName","shipmentMode",1,"form-control",3,"placeholder"],["formControlName","remarks",1,"form-control",3,"placeholder"],["formControlName","poNotes",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["width","18%"],["width","8%"],["width","11%"],["bindLabel","text","bindValue","value",2,"width","250px",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],[3,"isLoading"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","blur"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","blur"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","change","blur"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"click"],[1,"icon-plus"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","9","rowspan","5"],[1,"text-right","bgcolor"],[1,"bgcolor"],[1,"text-right","bgcolor_bottom"],[1,"bgcolor_bottom"],[1,"col-lg-12","col-md-12","text-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[1,"text-right"],[1,"icon-note","cpointer",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return a.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return a.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"div",3),t.TgZ(10,"div",5),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t.TgZ(14,"label",9),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"ng-select",10),t._UZ(18,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(19,"div",7),t.TgZ(20,"div",8),t.TgZ(21,"label",9),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"ng-select",12),t._UZ(25,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(26,"div",7),t.TgZ(27,"div",8),t.TgZ(28,"label",9),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"ng-select",13),t._UZ(32,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(33,"div",7),t.TgZ(34,"div",8),t.TgZ(35,"label",9),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"select",14),t.TgZ(39,"option",15),t._uU(40,"Choose TranType Code"),t.qZA(),t.ynx(41),t.TgZ(42,"option",16),t._uU(43,"Purchase Return"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",7),t.TgZ(45,"div",8),t.TgZ(46,"label",9),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"ng-select",17),t.NdJ("change",function(r){return a.loadVendata(r)}),t.qZA(),t._UZ(50,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(51,"div",7),t.TgZ(52,"div",8),t.TgZ(53,"label",9),t._uU(54),t.ALo(55,"translate"),t.qZA(),t._UZ(56,"input",18),t.ALo(57,"translate"),t.ALo(58,"translate"),t.qZA(),t.qZA(),t.TgZ(59,"div",7),t.TgZ(60,"div",8),t.TgZ(61,"label",9),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._UZ(64,"input",19),t.ALo(65,"translate"),t.ALo(66,"translate"),t.qZA(),t.qZA(),t.TgZ(67,"div",7),t.TgZ(68,"div",8),t.TgZ(69,"label",9),t._uU(70),t.ALo(71,"translate"),t.qZA(),t._UZ(72,"input",20),t.ALo(73,"translate"),t.ALo(74,"translate"),t.qZA(),t.qZA(),t.TgZ(75,"div",7),t.TgZ(76,"div",8),t.TgZ(77,"label",9),t._uU(78),t.ALo(79,"translate"),t.qZA(),t._UZ(80,"input",21),t.ALo(81,"translate"),t.ALo(82,"translate"),t._UZ(83,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(84,"div",7),t.TgZ(85,"div",8),t.TgZ(86,"label",9),t._uU(87),t.ALo(88,"translate"),t.qZA(),t._UZ(89,"input",22),t.ALo(90,"translate"),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.TgZ(92,"div",7),t.TgZ(93,"div",8),t.TgZ(94,"label",9),t._uU(95),t.ALo(96,"translate"),t.qZA(),t._UZ(97,"ng-select",23),t._UZ(98,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(99,"div",7),t.TgZ(100,"div",8),t.TgZ(101,"label",9),t._uU(102),t.ALo(103,"translate"),t.qZA(),t.TgZ(104,"select",24),t.NdJ("change",function(r){return a.setTaxValue(r)}),t.TgZ(105,"option",15),t._uU(106,"Choose Tax Code"),t.qZA(),t.ynx(107),t.TgZ(108,"option",25),t._uU(109,"Yes"),t.qZA(),t.TgZ(110,"option",26),t._uU(111,"NO"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(112,"div",7),t.TgZ(113,"div",8),t.TgZ(114,"label",9),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"ng-select",27),t.NdJ("change",function(r){return a.loadItemTax(r)}),t.qZA(),t._UZ(118,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(119,"div",7),t.TgZ(120,"div",8),t.TgZ(121,"label",9),t._uU(122),t.ALo(123,"translate"),t.qZA(),t._UZ(124,"ng-select",28),t._UZ(125,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(126,"div",29),t.TgZ(127,"label",9),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.TgZ(130,"div",30),t.TgZ(131,"div",29),t._UZ(132,"ng-select",31),t.qZA(),t.TgZ(133,"div",29),t._UZ(134,"input",32),t.ALo(135,"translate"),t.ALo(136,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(137,"div",29),t.TgZ(138,"div",8),t.TgZ(139,"label",9),t._uU(140),t.ALo(141,"translate"),t.qZA(),t._UZ(142,"textarea",33),t.ALo(143,"translate"),t.ALo(144,"translate"),t.qZA(),t.qZA(),t.TgZ(145,"div",29),t.TgZ(146,"div",8),t.TgZ(147,"label",9),t._uU(148),t.ALo(149,"translate"),t.qZA(),t._UZ(150,"textarea",34),t.ALo(151,"translate"),t.ALo(152,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(153,"div",35),t.TgZ(154,"table",36),t.TgZ(155,"thead"),t.TgZ(156,"tr"),t.TgZ(157,"th",37),t._uU(158),t.ALo(159,"translate"),t.qZA(),t.TgZ(160,"th",37),t._uU(161),t.ALo(162,"translate"),t.qZA(),t.TgZ(163,"th"),t._uU(164),t.ALo(165,"translate"),t.qZA(),t.TgZ(166,"th",38),t._uU(167),t.ALo(168,"translate"),t.qZA(),t.TgZ(169,"th",39),t._uU(170),t.ALo(171,"translate"),t.qZA(),t.TgZ(172,"th"),t._uU(173),t.ALo(174,"translate"),t.qZA(),t.TgZ(175,"th"),t._uU(176),t.ALo(177,"translate"),t.qZA(),t.TgZ(178,"th"),t._uU(179),t.ALo(180,"translate"),t.qZA(),t.TgZ(181,"th"),t._uU(182),t.ALo(183,"translate"),t.qZA(),t.TgZ(184,"th"),t._uU(185),t.ALo(186,"translate"),t.qZA(),t.TgZ(187,"th"),t._uU(188),t.ALo(189,"translate"),t.qZA(),t._UZ(190,"th"),t.qZA(),t.qZA(),t.TgZ(191,"tbody"),t.TgZ(192,"tr"),t.TgZ(193,"td"),t.TgZ(194,"ng-select",40),t.NdJ("ngModelChange",function(r){return a.tranItemCode=r})("change",function(r){return a.loadTaxdata(r)}),t.qZA(),t.qZA(),t.TgZ(195,"td"),t.TgZ(196,"input",41),t.NdJ("ngModelChange",function(r){return a.tranItemName=r}),t.ALo(197,"translate"),t.qZA(),t.qZA(),t.TgZ(198,"td"),t.TgZ(199,"ng-select",42),t.NdJ("ngModelChange",function(r){return a.tranItemUnitCode=r})("change",function(r){return a.loadUomdata(r)}),t.qZA(),t.qZA(),t.TgZ(200,"td"),t.TgZ(201,"input",41),t.NdJ("ngModelChange",function(r){return a.tranUOMFactor=r}),t.ALo(202,"translate"),t.qZA(),t.qZA(),t.TgZ(203,"td"),t.TgZ(204,"input",43),t.NdJ("ngModelChange",function(r){return a.tranItemCost=r})("keyup",function(){return a.calculate()}),t.ALo(205,"translate"),t.qZA(),t.qZA(),t.TgZ(206,"td"),t._UZ(207,"spinner-loader",44),t.TgZ(208,"input",45),t.NdJ("ngModelChange",function(r){return a.tranItemQty=r})("keyup",function(){return a.calculate()})("blur",function(){return a.calculateQuantity()}),t.ALo(209,"translate"),t.qZA(),t.qZA(),t.TgZ(210,"td"),t.TgZ(211,"input",46),t.NdJ("ngModelChange",function(r){return a.tranTotCost=r})("blur",function(){return a.calculatetaxAmount()}),t.ALo(212,"translate"),t.qZA(),t.qZA(),t.TgZ(213,"td"),t.TgZ(214,"input",47),t.NdJ("ngModelChange",function(r){return a.discPer=r})("change",function(){return a.calculateDis()})("blur",function(){return a.calculatetaxAmount()}),t.ALo(215,"translate"),t.qZA(),t.qZA(),t.TgZ(216,"td"),t.TgZ(217,"input",46),t.NdJ("ngModelChange",function(r){return a.discAmt=r})("blur",function(){return a.calculatetaxAmount()}),t.ALo(218,"translate"),t.qZA(),t.qZA(),t.TgZ(219,"td"),t.TgZ(220,"input",46),t.NdJ("ngModelChange",function(r){return a.itemTaxPer=r})("blur",function(){return a.calculatetaxAmount()}),t.ALo(221,"translate"),t.qZA(),t.qZA(),t.TgZ(222,"td"),t.TgZ(223,"input",41),t.NdJ("ngModelChange",function(r){return a.taxAmount=r}),t.ALo(224,"translate"),t.qZA(),t.qZA(),t.TgZ(225,"td"),t.TgZ(226,"button",48),t.NdJ("click",function(){return a.addInvoice()}),t._UZ(227,"i",49),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(228,"thead"),t.TgZ(229,"tr"),t.TgZ(230,"th"),t._uU(231),t.ALo(232,"translate"),t.qZA(),t.TgZ(233,"th"),t._uU(234),t.ALo(235,"translate"),t.qZA(),t.TgZ(236,"th"),t._uU(237),t.ALo(238,"translate"),t.qZA(),t.TgZ(239,"th"),t._uU(240),t.ALo(241,"translate"),t.qZA(),t.TgZ(242,"th"),t._uU(243),t.ALo(244,"translate"),t.qZA(),t.TgZ(245,"th"),t._uU(246),t.ALo(247,"translate"),t.qZA(),t.TgZ(248,"th"),t._uU(249),t.ALo(250,"translate"),t.qZA(),t.TgZ(251,"th"),t._uU(252),t.ALo(253,"translate"),t.qZA(),t.TgZ(254,"th"),t._uU(255),t.ALo(256,"translate"),t.qZA(),t.TgZ(257,"th"),t._uU(258),t.ALo(259,"translate"),t.qZA(),t.TgZ(260,"th"),t._uU(261),t.ALo(262,"translate"),t.qZA(),t._UZ(263,"th",50),t.qZA(),t.qZA(),t.TgZ(264,"tbody"),t.YNc(265,ze,26,11,"tr",51),t.qZA(),t.TgZ(266,"tfoot"),t.TgZ(267,"tr",52),t._UZ(268,"td",53),t.TgZ(269,"td",54),t._uU(270),t.ALo(271,"translate"),t.qZA(),t.TgZ(272,"td",54),t._uU(273),t.ALo(274,"decimalpipe"),t.qZA(),t._UZ(275,"td",55),t.qZA(),t.TgZ(276,"tr",52),t.TgZ(277,"td",54),t._uU(278),t.ALo(279,"translate"),t.qZA(),t.TgZ(280,"td",54),t._uU(281),t.ALo(282,"decimalpipe"),t.qZA(),t._UZ(283,"td",55),t.qZA(),t.TgZ(284,"tr",52),t.TgZ(285,"td",56),t._uU(286),t.ALo(287,"translate"),t.qZA(),t.TgZ(288,"td",56),t._uU(289),t.ALo(290,"decimalpipe"),t.qZA(),t._UZ(291,"td",57),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(292,"div",30),t.TgZ(293,"div",58),t.TgZ(294,"button",59),t.NdJ("click",function(){return a.closeModel()}),t._uU(295),t.ALo(296,"translate"),t.qZA(),t._uU(297," \xa0\xa0 "),t._UZ(298,"input",60),t.ALo(299,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,116,"Create_New_Purchase_Return")," "),t.xp6(4),t.Q6J("formGroup",a.form),t.xp6(10),t.Oqu(t.lcZ(16,118,"Organization")),t.xp6(2),t.Q6J("items",a.compCodeList),t.xp6(1),t.Q6J("control",a.form.controls.compCode),t.xp6(4),t.Oqu(t.lcZ(23,120,"Warehouse")),t.xp6(2),t.Q6J("items",a.warehouseList),t.xp6(1),t.Q6J("control",a.form.controls.whCode),t.xp6(4),t.Oqu(t.lcZ(30,122,"Branch")),t.xp6(2),t.Q6J("items",a.BranchCodeList),t.xp6(1),t.Q6J("control",a.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(37,124,"TranType")),t.xp6(11),t.hij(" ",t.lcZ(48,126,"Vendor_Code")," "),t.xp6(2),t.Q6J("items",a.VenCodeList),t.xp6(1),t.Q6J("control",a.form.controls.venCatCode),t.xp6(4),t.Oqu(t.lcZ(55,128,"Invoice_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(57,130,"Select")," ",t.lcZ(58,132,"Invoice_Date"),""),t.xp6(6),t.Oqu(t.lcZ(63,134,"Delivery_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(65,136,"Select")," ",t.lcZ(66,138,"Delivery_Date"),""),t.xp6(6),t.hij(" ",t.lcZ(71,140,"Invoice_Reference_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(73,142,"Please_Enter"),"  ",t.lcZ(74,144,"Invoice_Reference_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(79,146,"Vendor_Name")," "),t.xp6(2),t.hYB("placeholder","",t.lcZ(81,148,"Please_Enter")," ",t.lcZ(82,150,"Vendor_Name"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendCode),t.xp6(4),t.hij(" ",t.lcZ(88,152,"Document_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(90,154,"Please_Enter"),"  ",t.lcZ(91,156,"Category"),""),t.xp6(6),t.Oqu(t.lcZ(96,158,"Payment_Terms")),t.xp6(2),t.Q6J("items",a.PaymentTermList),t.xp6(1),t.Q6J("control",a.form.controls.paymentID),t.xp6(4),t.Oqu(t.lcZ(103,160,"VAT_Inclusive")),t.xp6(13),t.hij(" ",t.lcZ(116,162,"TAX Number")," "),t.xp6(2),t.Q6J("items",a.TaxCodeList),t.xp6(1),t.Q6J("control",a.form.controls.taxId),t.xp6(4),t.hij(" ",t.lcZ(123,164,"Currency")," "),t.xp6(2),t.Q6J("items",a.CurrencyCodeList),t.xp6(1),t.Q6J("control",a.form.controls.tranCurrencyCode),t.xp6(3),t.hij(" ",t.lcZ(129,166,"Shipment Mode")," "),t.xp6(4),t.Q6J("items",a.ShipmentCodeList),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(135,168,"Please_Enter"),"  ",t.lcZ(136,170,"Shipment Mode"),""),t.xp6(6),t.hij(" ",t.lcZ(141,172,"Remarks")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(143,174,"Please_Enter"),"  ",t.lcZ(144,176,"Remarks"),""),t.xp6(6),t.hij(" ",t.lcZ(149,178,"Invoice_Notes")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(151,180,"Please_Enter"),"  ",t.lcZ(152,182,"Invoice_Notes"),""),t.xp6(8),t.Oqu(t.lcZ(159,184,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(162,186,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(165,188,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(168,190,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(171,192,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(174,194,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(177,196,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(180,198,"Disc Per")),t.xp6(3),t.Oqu(t.lcZ(183,200,"Disc Amt")),t.xp6(3),t.Oqu(t.lcZ(186,202,"Item TaxPer")),t.xp6(3),t.Oqu(t.lcZ(189,204,"Tax Amount")),t.xp6(6),t.Q6J("items",a.ItemCodeList)("ngModel",a.tranItemCode)("ngModelOptions",t.DdM(262,B)),t.xp6(2),t.s9C("placeholder",t.lcZ(197,206,"tranItemName")),t.Q6J("ngModel",a.tranItemName)("ngModelOptions",t.DdM(263,B)),t.xp6(3),t.Q6J("items",a.UOMList)("ngModel",a.tranItemUnitCode)("ngModelOptions",t.DdM(264,B)),t.xp6(2),t.s9C("placeholder",t.lcZ(202,208,"tranUOMFactor")),t.Q6J("ngModel",a.tranUOMFactor)("ngModelOptions",t.DdM(265,B)),t.xp6(3),t.s9C("placeholder",t.lcZ(205,210,"tranItemCost")),t.Q6J("ngModel",a.tranItemCost)("ngModelOptions",t.DdM(266,B)),t.xp6(3),t.Q6J("isLoading",a.isQuantityLoading),t.xp6(1),t.s9C("placeholder",t.lcZ(209,212,"Quantity")),t.Q6J("ngModel",a.tranItemQty)("ngModelOptions",t.DdM(267,B)),t.xp6(3),t.s9C("placeholder",t.lcZ(212,214,"tranTotCost")),t.Q6J("ngModel",a.tranTotCost)("ngModelOptions",t.DdM(268,B)),t.xp6(3),t.s9C("placeholder",t.lcZ(215,216,"discPer")),t.Q6J("ngModel",a.discPer)("ngModelOptions",t.DdM(269,B)),t.xp6(3),t.s9C("placeholder",t.lcZ(218,218,"discAmt")),t.Q6J("ngModel",a.discAmt)("ngModelOptions",t.DdM(270,B)),t.xp6(3),t.s9C("placeholder",t.lcZ(221,220,"itemTaxPer")),t.Q6J("ngModel",a.itemTaxPer)("ngModelOptions",t.DdM(271,B)),t.xp6(3),t.s9C("placeholder",t.lcZ(224,222,"taxAmount")),t.Q6J("ngModel",a.taxAmount)("ngModelOptions",t.DdM(272,B)),t.xp6(8),t.Oqu(t.lcZ(232,224,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(235,226,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(238,228,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(241,230,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(244,232,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(247,234,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(250,236,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(253,238,"Disc Per")),t.xp6(3),t.Oqu(t.lcZ(256,240,"Disc Amt")),t.xp6(3),t.Oqu(t.lcZ(259,242,"Item TaxPer")),t.xp6(3),t.Oqu(t.lcZ(262,244,"Tax Amount")),t.xp6(4),t.Q6J("ngForOf",a.listOfInvoices),t.xp6(5),t.Oqu(t.lcZ(271,246,"Total_Amount")),t.xp6(3),t.Oqu(t.lcZ(274,248,a.grandTotalStr)),t.xp6(5),t.Oqu(t.lcZ(279,250,"VAT_Amount")),t.xp6(3),t.Oqu(t.lcZ(282,252,a.grandVatTotalStr)),t.xp6(5),t.Oqu(t.lcZ(287,254,"Invoice_Total")),t.xp6(3),t.Oqu(t.lcZ(290,256,a.grandInvoiceTotalStr)),t.xp6(6),t.hij(" ",t.lcZ(296,258,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(299,260,"Save")))},directives:[s._Y,s.JL,s.sg,G.w9,s.JJ,s.u,H.s,s.EJ,s.YN,s.Kr,s.Fj,s.On,J.r,c.sg],pipes:[x.X$,W.J],encapsulation:2}),o})();function Xe(o,n){1&o&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Prt_Num")," "))}function Ke(o,n){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.tranNumber)}}function ta(o,n){1&o&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Date")," "))}function ea(o,n){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.tranDate,"dd/MM/yyyy"))}}function aa(o,n){1&o&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Doc_Num")," "))}function ia(o,n){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.invRefNumber)}}function oa(o,n){1&o&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch")," "))}function ra(o,n){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function na(o,n){1&o&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vendor_Code")," "))}function sa(o,n){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendCode)}}function la(o,n){1&o&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Amount")," "))}function ca(o,n){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.tranTotalCost)}}function da(o,n){1&o&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Payment_Terms")," "))}function ua(o,n){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.paymentID)}}function pa(o,n){1&o&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reference")," "))}function ha(o,n){if(1&o&&(t.TgZ(0,"td",46),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.taxId)}}function ma(o,n){1&o&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function ga(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",49),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().edit(i.id)}),t.ALo(1,"translate"),t._UZ(2,"i",53),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.s9C("id","edit_"+e.id),t.s9C("matTooltip",t.lcZ(1,2,"Edit_Item"))}}function Za(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",54),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().delete(i.id)}),t._UZ(1,"i",55),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"Delete_Item")))}function _a(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",57),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().approvePurchaseReturn(i)}),t.ALo(1,"translate"),t._UZ(2,"i",58),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Approve_Item"))}function Aa(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",57),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().AccountPosting(i.id)}),t.ALo(1,"translate"),t._UZ(2,"i",59),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Posting_Item"))}function Ta(o,n){if(1&o&&(t.ynx(0),t.YNc(1,_a,3,3,"a",56),t._uU(2," \xa0 "),t.YNc(3,Aa,3,3,"a",56),t._uU(4," \xa0 "),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.approvedUser&&!e.isSettled),t.xp6(2),t.Q6J("ngIf",e.canSettle&&!e.isSettled)}}function fa(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",46),t.YNc(1,ga,3,4,"a",48),t._uU(2," \xa0 "),t.TgZ(3,"a",49),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().printing(r.id)}),t.ALo(4,"translate"),t._UZ(5,"i",50),t.qZA(),t._uU(6," \xa0 "),t.YNc(7,Za,3,3,"a",51),t.YNc(8,Ta,5,2,"ng-container",52),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved&&!e.isSettled),t.xp6(2),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(4,5,"Print_Preview")),t.xp6(4),t.Q6J("ngIf",!e.isSettled&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.hasAuthority)}}function Ca(o,n){1&o&&t._UZ(0,"tr",60)}function va(o,n){1&o&&t._UZ(0,"tr",61)}let qa=(()=>{class o extends O{constructor(e,a,i,r,l,d,h,u,g,L,f){super(l),this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.utilService=d,this.notifyService=h,this.validationService=u,this.pageService=g,this.dialog=L,this.translate=f,this.displayedColumns=["tranNumber","tranDate","invRefNumber","branchCode","vendCode","amount","paymentID","taxId","Actions"],this.searchValue="",this.sortingOrder="id desc",this.customerList=[],this.companyList=[],this.paymentTermsList=[],this.branchList=[],this.productList=[],this.vatList=[],this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.ShipmentCodeList=[],this.CurrencyCodeList=[],this.TaxCodeList=[],this.VenCodeList=[],this.compCodeList=[],this.BranchCodeList=[],this.VenNameList=[],this.PaymentTermList=[],this.ItemCodeList=[],this.ItemNameList=[],this.UOMList=[],this.PurchaseRequestList=[],this.warehouseList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0}ngOnInit(){this.initialLoading(),this.setForm(),this.loadTaxCode(),this.loadVenCode(),this.loadCompCode(),this.loadBranchCode(),this.loadVenName(),this.loadPaymentTerm(),this.loadItemCode(),this.loadItemName(),this.loadUnitCode(),this.loadCurrencyCode(),this.loadShipmentCode(),this.loadPurchaseRequest(),this.loadWarehouses(),this.form.patchValue({trantype:"3"})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadUser(e,a,i,r){this.data=new p.by(this.getData()),this.totalItemsCount=2}loadCompCode(){this.apiService.getall("purchasereturn/GetCompSelectList").subscribe(e=>{e&&(this.compCodeList=e)})}loadWarehouses(){this.apiService.getall("warehouse/getSelectWarehouseList").subscribe(e=>{e&&(this.warehouseList=e)})}loadBranchCode(){this.apiService.getall("purchasereturn/GetBranchSelectList").subscribe(e=>{e&&(this.BranchCodeList=e)})}loadTaxCode(){this.apiService.getall("purchasereturn/GetTaxSelectList").subscribe(e=>{e&&(this.TaxCodeList=e)})}loadVenCode(){this.apiService.getall("purchasereturn/GetVendorCodeSelectList").subscribe(e=>{e&&(this.VenCodeList=e)})}loadVenName(){this.apiService.getall("purchasereturn/GetVendorNameSelectList").subscribe(e=>{e&&(this.VenNameList=e)})}loadPaymentTerm(){this.apiService.getall("purchasereturn/GetPaymentTermSelectList").subscribe(e=>{e&&(this.PaymentTermList=e)})}loadItemCode(){this.apiService.getall("purchasereturn/GetItemCodeSelectList").subscribe(e=>{e&&(this.ItemCodeList=e)})}loadItemName(){this.apiService.getall("purchasereturn/GetItemNameSelectList").subscribe(e=>{e&&(this.ItemNameList=e)})}loadUnitCode(){this.apiService.getall("purchasereturn/GetUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadCurrencyCode(){this.apiService.getall("purchasereturn/GetCurrencySelectList").subscribe(e=>{e&&(this.CurrencyCodeList=e)})}loadShipmentCode(){this.apiService.getall("purchasereturn/GetShipmentSelectList").subscribe(e=>{e&&(this.ShipmentCodeList=e)})}loadUomdata(e){let i=this.tranItemCode+"_"+e.value;i?this.apiService.getall(`purchasereturn/ProductUomtPriceItem/${i}`).subscribe(r=>{r&&(this.tranUOMFactor=r.tranItemUomFactor,this.tranItemCost=r.itemAvgcost)}):(this.unitType="",this.description="")}loadVendata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${a}`).subscribe(i=>{i&&(this.form.patchValue({vendCode:`${i.vendName}`}),this.form.patchValue({paymentID:`${i.poTermsCode}`}))})}loadTaxdata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${a}`).subscribe(i=>{i&&(this.itemTaxPer=i[0].itemTaxperc,this.tranItemName=i[0].shortName),this.loadUomList(a)})}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(i=>{i&&(this.UOMList=i)})}getData(){return[]}setForm(){this.form=this.fb.group({"":["",s.kI.required],compCode:["",s.kI.required],branchCode:["",s.kI.required],tranDate:["",s.kI.required],deliveryDate:["",s.kI.required],invRefNumber:["",s.kI.required],venCatCode:["",s.kI.required],docNumber:["",s.kI.required],taxId:["",s.kI.required],remarks:["",s.kI.required],poNotes:["",s.kI.required],trantype:["",s.kI.required],vendCode:["",s.kI.required],paymentID:["",s.kI.required],taxInclusive:["",s.kI.required],tranCurrencyCode:["",s.kI.required],tranShipMode:["",s.kI.required],whCode:["",s.kI.required]})}loadPurchaseRequest(){this.apiService.getall("purchasereturn/GetPrSelectList").subscribe(e=>{e&&(this.PurchaseRequestList=e)})}loadPRdata(e){this.apiService.getall(`purchasereturn/GetPRList/${e.value}`).subscribe(i=>{i&&(this.isReadOnly=!0,this.form.patchValue(i),this.form.patchValue({tranDate:`${i.tranDate.split("T")[0]}`}),this.form.patchValue({deliveryDate:`${i.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${i.compCode}`}),this.form.patchValue({tranCurrencyCode:`${i.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${i.poNotes}`}),this.id=i.id,this.form.patchValue({trantype:"2"}),i.itemList.forEach(l=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:l.tranItemCode,tranItemName:l.tranItemName,tranItemName2:l.tranItemName2,tranItemQty:l.tranItemQty,tranItemUnitCode:l.tranItemUnitCode,tranUOMFactor:l.tranUOMFactor,tranItemCost:l.tranItemCost,tranTotCost:l.tranTotCost,discPer:l.discPer,discAmt:l.discAmt,itemTax:l.itemTax,itemTaxPer:l.itemTaxPer,taxAmount:l.taxAmount,itemTracking:l.itemTracking})}),this.setGrandTotal())})}loadList(e,a,i,r,l=""){this.isLoading=!0,this.apiService.getPagination("purchasereturn",this.utilService.getQueryString(e,a,i,r)).subscribe(d=>{this.totalItemsCount=0,this.data=new p.by(d.items),this.totalItemsCount=d.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},d=>this.utilService.ShowApiErrorMessage(d))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("purchasereturn",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,V.a).afterClosed().subscribe(i=>{i&&e>0&&this.apiService.delete("purchasereturn",e).subscribe(r=>{this.refresh(),this.utilService.OkMessage()})},i=>this.utilService.ShowApiErrorMessage(i))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(r=>{r&&this.form.controls.taxIdNumber.setValue(r.vatNumber)})}loadBranchs(e){let a=e.target.value;a&&this.apiService.getall(`branch/getSelectSysBranchListByComId/${a}`).subscribe(i=>{i&&(this.branchList=i)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let a=e.value;a?this.apiService.getall(`product/productUnitPriceItem/${a}`).subscribe(r=>{r&&(this.product=r.nameEN,this.unitType=r.unitTypeEN,this.description=r.description,this.price=r.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.tranTotCost>0&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnitCode:this.tranItemUnitCode,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let a=this.listOfInvoices.findIndex(i=>i.sequence===e);this.listOfInvoices.splice(a,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnitCode=e.tranItemUnitCode,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandInvoiceTotal+=e.tranTotCost+e.taxAmount}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(2),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(2),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(2)}closeModel(){this.ngOnInit(),this.listOfInvoices=[]}setToDefault(){this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0}calculate(){var i=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(i.toString())}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=this.tranTotCost,a=parseFloat((parseFloat(this.discPer)/100).toFixed(2)),i=parseFloat((e*a/100).toFixed(2));this.discAmt=parseFloat(i.toString());var r=this.tranItemCost;this.tranTotCost=r-r*a,this.tranTotCost=this.tranTotCost*this.tranItemQty,a=parseFloat(this.itemTaxPer),this.taxAmount=0==this.form.value.taxInclusive?parseFloat((this.tranTotCost*a/100).toFixed(2)):parseFloat((this.tranTotCost*a/(a+100)).toFixed(4))}}calculatetaxAmount(){var e=this.tranTotCost,a=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*a/100).toFixed(2))}submit(){this.id>0&&(this.form.value.id=this.id),this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.form.value.Prcode="0",this.form.value.vendCode=this.form.value.venCatCode,this.apiService.post("purchasereturn/CreatePurchaserequest",this.form.value).subscribe(e=>{this.reset(),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}reset(){this.form.reset()}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}approvePurchaseReturn(e){this.openApprovalDialog(e.branchCode,e.tranNumber,_.Oi.create,"Purchase_Return","Save","PRT",j.$)}openApprovalDialog(e,a,i,r,l,d,h){let u=this.openApprovalDialog1(this.dialog,h);u.componentInstance.dbops=i,u.componentInstance.modalTitle=r,u.componentInstance.modalBtnTitle=l,u.componentInstance.serviceType=d,u.componentInstance.serviceCode=a,u.componentInstance.branchCode=e,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}openApprovalDialog1(e,a){return e.open(a,{disableClose:!0})}create(){this.openDialogManage(0,_.Oi.create,this.translate.instant("Create_New_Purchase_Return"),"",lt)}edit(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Purchase_Request"),"",lt)}view(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Purchase_Request"),"",lt)}printing(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Purchase_Request"),"prt",et)}openDialogManage(e=0,a,i="",r="",l,d={module:"00",action:"00act"},h=100){let u=this.utilService.openDialogCongif(this.dialog,l,h);u.componentInstance.dbops=a,u.componentInstance.modalTitle=i,u.componentInstance.modalBtnTitle=r,u.componentInstance.id=e,u.componentInstance.moduleFile=d,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}AccountPosting(e){this.apiService.getall(`purchasereturn/AccountsPosting/${e}`).subscribe(a=>{a&&(this.utilService.OkMessage(),this.refresh())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(A.g),t.Y36(b.R),t.Y36(v.N),t.Y36(Z.uw),t.Y36(x.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-purchasereturn"]],viewQuery:function(e,a){if(1&e&&(t.Gf(U.NW,7),t.Gf(T.YE,7)),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},features:[t.qOj],decls:80,vars:26,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","pb-3"],[1,"col-md-3"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],["value","approval"],["value","unapproval"],["value","settled"],["value","unsettled"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"col-md-3","col-lg-3","text-right"],["data-toggle","modal","data-target","#scrollable-modal","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[3,"isLoading"],["mat-table","","matSort","","matSortActive","Id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","tranNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tranDate"],["matColumnDef","invRefNumber"],["matColumnDef","branchCode"],["matColumnDef","vendCode"],["matColumnDef","amount"],["matColumnDef","paymentID"],["matColumnDef","taxId"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["class","tableicons pcursor","data-toggle","modal","data-target","#scrollable-modal",3,"id","matTooltip","click",4,"ngIf"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"id","matTooltip","click"],[1,"icon-printer"],["class","tableicons",3,"click",4,"ngIf"],[4,"ngIf"],[1,"icon-note"],[1,"tableicons",3,"click"],[1,"icon-trash",3,"matTooltip"],["class","tableicons pcursor",3,"matTooltip","click",4,"ngIf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-arrow-up-circle"],[1,"icon-action-undo"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",14),t.TgZ(22,"select",15),t.NdJ("change",function(r){return a.loadApprovals(r)}),t.TgZ(23,"option",16),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",17),t._uU(27,"Approval"),t.qZA(),t.TgZ(28,"option",18),t._uU(29,"UnApproval"),t.qZA(),t.TgZ(30,"option",19),t._uU(31,"Settled"),t.qZA(),t.TgZ(32,"option",20),t._uU(33,"UnSettled"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",1),t.TgZ(35,"div",21),t.TgZ(36,"h4",22),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.qZA(),t.TgZ(39,"div",23),t.TgZ(40,"a",24),t.NdJ("click",function(){return a.create()}),t._UZ(41,"i",25),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(44,"div",26),t.TgZ(45,"div",27),t._UZ(46,"spinner-loader",28),t.TgZ(47,"table",29),t.NdJ("matSortChange",function(r){return a.onSortOrder(r)}),t.ynx(48,30),t.YNc(49,Xe,3,3,"th",31),t.YNc(50,Ke,2,1,"td",32),t.BQk(),t.ynx(51,33),t.YNc(52,ta,3,3,"th",31),t.YNc(53,ea,3,4,"td",32),t.BQk(),t.ynx(54,34),t.YNc(55,aa,3,3,"th",31),t.YNc(56,ia,2,1,"td",32),t.BQk(),t.ynx(57,35),t.YNc(58,oa,3,3,"th",31),t.YNc(59,ra,2,1,"td",32),t.BQk(),t.ynx(60,36),t.YNc(61,na,3,3,"th",31),t.YNc(62,sa,2,1,"td",32),t.BQk(),t.ynx(63,37),t.YNc(64,la,3,3,"th",31),t.YNc(65,ca,2,1,"td",32),t.BQk(),t.ynx(66,38),t.YNc(67,da,3,3,"th",31),t.YNc(68,ua,2,1,"td",32),t.BQk(),t.ynx(69,39),t.YNc(70,pa,3,3,"th",31),t.YNc(71,ha,2,1,"td",32),t.BQk(),t._uU(72," r "),t.ynx(73,40),t.YNc(74,ma,3,3,"th",41),t.YNc(75,fa,9,7,"td",32),t.BQk(),t.YNc(76,Ca,1,0,"tr",42),t.YNc(77,va,1,0,"tr",43),t.qZA(),t.ynx(78),t.TgZ(79,"mat-paginator",44),t.NdJ("page",function(r){return a.onPageSwitch(r)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,14,"Purchase_Return")," "),t.xp6(6),t.hij("",t.lcZ(11,16,"Purchase_Management")," "),t.xp6(3),t.hij("",t.lcZ(14,18,"Purchase_Return")," "),t.xp6(11),t.Oqu(t.lcZ(25,20,"Purchase_Return_List")),t.xp6(13),t.Oqu(t.lcZ(38,22,"Purchase_Return")),t.xp6(5),t.Oqu(t.lcZ(43,24,"Add_New_Purchase_Return")),t.xp6(4),t.Q6J("isLoading",a.isLoading),t.xp6(1),t.Q6J("dataSource",a.data),t.xp6(29),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("length",a.totalItemsCount)("pageSize",a.pageService.pageCount)("pageSizeOptions",a.pageService.selectItemsPerPage))},directives:[s.YN,s.Kr,J.r,p.BZ,T.YE,p.w1,p.fO,p.Dz,p.as,p.nj,U.NW,p.ge,T.nU,p.ev,c.O5,it.gM,p.XQ,p.Gk],pipes:[x.X$,c.uU],encapsulation:2}),o})();function xa(o,n){if(1&o&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function ba(o,n){if(1&o&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}let Ua=(()=>{class o extends O{constructor(e,a,i,r,l){super(a),this.dialogRef=e,this.authService=a,this.fb=i,this.apiService=r,this.utilService=l,this.branchCodeList=[],this.readonly="",this.id=0}ngOnInit(){this.setForm(),this.loadBranchCodes(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({id:[this.id],branchCode:["",s.kI.required],appAuth:["",s.kI.required],appLevel:[""],purchaseRequest:[!1],purchaseOrder:[!1],purchaseReturn:[!1]}),this.loadUsers()}removeItem(e){}loadUsers(){this.apiService.getall("PurchaseAuthorities/GetUserSelectionList").subscribe(e=>{this.userList=e})}submit(){this.form.value.appAuth=this.appAuth,this.form.value.branchCode=this.branchCode,this.form.value.appLevel=0,this.form.valid?this.apiService.post("PurchaseAuthorities",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}loadBranchCodes(){this.apiService.getall("PurchaseAuthorities/getSelectBranchCodeList").subscribe(e=>{this.branchCodeList=e})}setEditForm(){this.apiService.get("PurchaseAuthorities/getAuthorityById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.branchCode=e.branchCode,this.appAuth=e.appAuth,this.form.controls.branchCode.disable({onlySelf:!0}),this.form.controls.appAuth.disable({onlySelf:!0}),this.form.controls.appLevel.disable({onlySelf:!0}))})}getAuthority(){""!=this.form.controls.branchCode.value&&""!=this.form.controls.appAuth.value&&(this.branchCode=this.form.controls.branchCode.value,this.appAuth=this.form.controls.appAuth.value,this.apiService.getall(`PurchaseAuthorities/getAuthorityByBranchUserId/${this.branchCode}/${this.appAuth}`).subscribe(e=>{null!=e&&(this.id=e.id,this.setEditForm())}))}closeModel(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.so),t.Y36(q._),t.Y36(s.qu),t.Y36(C.s),t.Y36(I.t))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdateauthorities"]],features:[t.qOj],decls:69,vars:41,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"cardtitle-divider"],[1,"table","table-bordered","no-wrap"],["formControlName","branchCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","appAuth",1,"custom-select","mr-sm-2",3,"change"],["type","checkbox","formControlName","purchaseRequest"],["type","checkbox","formControlName","purchaseOrder"],["type","checkbox","formControlName","purchaseReturn"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"]],template:function(e,a){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return a.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return a.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"nav",7),t.TgZ(11,"ol",8),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",9),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"li",10),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",4),t.TgZ(23,"div",12),t.TgZ(24,"div",13),t._UZ(25,"div",4),t._UZ(26,"div",14),t.TgZ(27,"table",15),t.TgZ(28,"tr"),t.TgZ(29,"td"),t.TgZ(30,"select",16),t.NdJ("change",function(){return a.getAuthority()}),t.TgZ(31,"option",17),t._uU(32),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.YNc(35,xa,2,2,"option",18),t.qZA(),t._UZ(36,"validation-message",19),t.qZA(),t.TgZ(37,"td"),t.TgZ(38,"select",20),t.NdJ("change",function(){return a.getAuthority()}),t.TgZ(39,"option",17),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.YNc(42,ba,2,3,"option",18),t.qZA(),t._UZ(43,"validation-message",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"table"),t.TgZ(45,"tr"),t.TgZ(46,"td"),t._UZ(47,"input",21),t.qZA(),t.TgZ(48,"td"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"td"),t._UZ(52,"input",22),t.qZA(),t.TgZ(53,"td"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"td"),t._UZ(58,"input",23),t.qZA(),t.TgZ(59,"td"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(62,"div",24),t.TgZ(63,"div",25),t.TgZ(64,"input",26),t.NdJ("click",function(){return a.closeModel()}),t.ALo(65,"translate"),t.qZA(),t._uU(66," \xa0 "),t._UZ(67,"input",27),t.ALo(68,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,17,a.modalTitle)),t.xp6(4),t.Q6J("formGroup",a.form),t.xp6(8),t.hij(" ",t.lcZ(14,19,"Purchase_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(17,21,"Purchase")," "),t.xp6(3),t.Oqu(t.lcZ(20,23,"Purchase_Authorities")),t.xp6(13),t.AsE("",t.lcZ(33,25,"Select")," ",t.lcZ(34,27,"Branch")," "),t.xp6(3),t.Q6J("ngForOf",a.branchCodeList),t.xp6(1),t.Q6J("control",a.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(41,29,"Select_User")),t.xp6(2),t.Q6J("ngForOf",a.userList),t.xp6(1),t.Q6J("control",a.form.controls.appAuth),t.xp6(6),t.Oqu(t.lcZ(50,31,"PurchaseRequest")),t.xp6(5),t.Oqu(t.lcZ(55,33,"PurchaseOrder")),t.xp6(6),t.Oqu(t.lcZ(61,35,"PurchaseReturn")),t.xp6(4),t.s9C("value",t.lcZ(65,37,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(68,39,"Save")))},directives:[s._Y,s.JL,s.sg,s.EJ,s.JJ,s.u,s.YN,s.Kr,c.sg,H.s,s.Wl],pipes:[x.X$],encapsulation:2}),o})();function Ia(o,n){1&o&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function La(o,n){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function ya(o,n){1&o&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"User_Id")," "))}function Oa(o,n){if(1&o&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.appAuth," ")}}function Na(o,n){1&o&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Purchase Request")," "))}function Sa(o,n){1&o&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Pa(o,n){1&o&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Ma(o,n){if(1&o&&(t.TgZ(0,"td",34),t.YNc(1,Sa,3,3,"span",35),t.YNc(2,Pa,3,3,"ng-template",null,36,t.W1O),t.qZA()),2&o){const e=n.$implicit,a=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.purchaseRequest)("ngIfElse",a)}}function wa(o,n){1&o&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Purchase Order")," "))}function Da(o,n){1&o&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Qa(o,n){1&o&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function ka(o,n){if(1&o&&(t.TgZ(0,"td",34),t.YNc(1,Da,3,3,"span",35),t.YNc(2,Qa,3,3,"ng-template",null,36,t.W1O),t.qZA()),2&o){const e=n.$implicit,a=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.purchaseOrder)("ngIfElse",a)}}function Ja(o,n){1&o&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Purchase Return")," "))}function Fa(o,n){1&o&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Va(o,n){1&o&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Ra(o,n){if(1&o&&(t.TgZ(0,"td",34),t.YNc(1,Fa,3,3,"span",35),t.YNc(2,Va,3,3,"ng-template",null,36,t.W1O),t.qZA()),2&o){const e=n.$implicit,a=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.purchaseReturn)("ngIfElse",a)}}function Ya(o,n){1&o&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Ba(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",34),t.TgZ(1,"a",40),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().edit(r.id)}),t._UZ(2,"i",41),t.qZA(),t.TgZ(3,"a",40),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().delete(r.id)}),t._UZ(4,"i",42),t.qZA(),t.qZA()}}function Ea(o,n){1&o&&t._UZ(0,"tr",43)}function $a(o,n){1&o&&t._UZ(0,"tr",44)}let ja=(()=>{class o extends O{constructor(e,a,i,r,l,d,h,u,g,L){super(l),this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.notifyService=d,this.utilService=h,this.validationService=u,this.dialog=g,this.pageService=L,this.displayedColumns=["branchCode","appAuth","PurchaseRequest","PurchaseOrder","PurchaseReturn","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadServices(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadServices(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadServices(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadServices(e,a,i,r){this.isLoading=!0,this.apiService.getPagination("PurchaseAuthorities/getAuthoritiesPagedList",this.utilService.getQueryString(e,a,i,r)).subscribe(l=>{this.totalItemsCount=0,this.data=new p.by(l.items),this.totalItemsCount=l.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,setTimeout(()=>this.data.sort=this.sort,2e3),this.isLoading=!1},l=>this.utilService.ShowApiErrorMessage(l))}applyFilter(e){e&&(this.searchValue=e,this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,a,i,r){let l=this.utilService.openCrudDialog(this.dialog,Ua);l.componentInstance.dbops=a,l.componentInstance.modalTitle=i,l.componentInstance.modalBtnTitle=r,l.componentInstance.id=e,l.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}create(){this.openDialogManage(0,_.Oi.create,"Adding_New_Authority","Add")}edit(e){this.openDialogManage(e,_.Oi.update,"Updating_Authority","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,V.a).afterClosed().subscribe(i=>{i&&e>0&&this.apiService.delete("PurchaseAuthorities",e).subscribe(r=>{this.utilService.OkMessage(),this.ngOnInit()})},i=>this.utilService.ShowApiErrorMessage(i))}submit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(A.g),t.Y36(I.t),t.Y36(b.R),t.Y36(Z.uw),t.Y36(v.N))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-purchaseauthorities"]],viewQuery:function(e,a){if(1&e&&(t.Gf(U.NW,7),t.Gf(T.YE,7)),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},features:[t.qOj],decls:61,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],[1,"card-title","pt6"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addServiceUnitMap","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","branchCode","sticky",""],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appAuth","sticky",""],["matColumnDef","PurchaseRequest"],["matColumnDef","PurchaseOrder"],["matColumnDef","PurchaseReturn"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],[1,"icon-trash"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"nav",5),t.TgZ(9,"ol",6),t.TgZ(10,"li",7),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"li",7),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"li",8),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",9),t.TgZ(20,"div",1),t.TgZ(21,"div",10),t.TgZ(22,"div",11),t.TgZ(23,"div",12),t.TgZ(24,"div",1),t.TgZ(25,"div",13),t.TgZ(26,"h4",14),t._uU(27),t.ALo(28,"translate"),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.TgZ(30,"div",15),t.TgZ(31,"a",16),t.NdJ("click",function(){return a.create()}),t._UZ(32,"i",17),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(35,"div",18),t.TgZ(36,"div",19),t.ynx(37),t.TgZ(38,"table",20),t.NdJ("matSortChange",function(r){return a.onSortOrder(r)}),t.ynx(39,21),t.YNc(40,Ia,3,3,"th",22),t.YNc(41,La,2,1,"td",23),t.BQk(),t.ynx(42,24),t.YNc(43,ya,3,3,"th",22),t.YNc(44,Oa,2,1,"td",23),t.BQk(),t.ynx(45,25),t.YNc(46,Na,3,3,"th",22),t.YNc(47,Ma,4,2,"td",23),t.BQk(),t.ynx(48,26),t.YNc(49,wa,3,3,"th",22),t.YNc(50,ka,4,2,"td",23),t.BQk(),t.ynx(51,27),t.YNc(52,Ja,3,3,"th",22),t.YNc(53,Ra,4,2,"td",23),t.BQk(),t.ynx(54,28),t.YNc(55,Ya,3,3,"th",29),t.YNc(56,Ba,5,0,"td",23),t.BQk(),t.YNc(57,Ea,1,0,"tr",30),t.YNc(58,$a,1,0,"tr",31),t.qZA(),t.BQk(),t.qZA(),t.ynx(59),t.TgZ(60,"mat-paginator",32),t.NdJ("page",function(r){return a.onPageSwitch(r)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.AsE(" ",t.lcZ(5,15,"Purchase")," ",t.lcZ(6,17,"Authorities")," "),t.xp6(7),t.hij(" ",t.lcZ(12,19,"Purchase_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(15,21,"Purchase")," "),t.xp6(3),t.Oqu(t.lcZ(18,23,"Authorities")),t.xp6(10),t.AsE("",t.lcZ(28,25,"Authorirites")," ",t.lcZ(29,27,"List")," "),t.xp6(6),t.hij("",t.lcZ(34,29,"Add_New_Authority")," "),t.xp6(5),t.Q6J("dataSource",a.data),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("length",a.totalItemsCount)("pageSize",a.pageService.pageCount)("pageSizeOptions",a.pageService.selectItemsPerPage))},directives:[p.BZ,T.YE,p.w1,p.fO,p.Dz,p.as,p.nj,U.NW,p.ge,T.nU,p.ev,c.O5,p.XQ,p.Gk],pipes:[x.X$],encapsulation:2}),o})(),Ga=(()=>{class o extends O{constructor(e,a){super(e),this.authService=e,this.router=a}ngOnInit(){this.router.navigate(["/dashboard/fin/appurchaseinvoice"])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(q._),t.Y36(y.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-purchaseinvoice"]],features:[t.qOj],decls:0,vars:0,template:function(e,a){},encapsulation:2}),o})();var N=m(9761),S=m(4395),P=m(7519),M=m(3190),Q=m(8002),z=m(4727),$=m(1554),D=m(1627),X=m(8295),ut=m(5396),K=m(2458);function Ha(o,n){if(1&o&&(t.TgZ(0,"mat-option",90),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.text),t.xp6(1),t.hij(" ",e.text," ")}}function Wa(o,n){if(1&o&&(t.TgZ(0,"mat-option",90),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.text),t.xp6(1),t.hij(" ",e.text," ")}}function za(o,n){if(1&o&&(t.TgZ(0,"mat-option",90),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.text),t.xp6(1),t.hij(" ",e.text," ")}}function Xa(o,n){if(1&o&&(t.TgZ(0,"option",90),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function Ka(o,n){if(1&o&&(t.TgZ(0,"option",90),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function ti(o,n){if(1&o&&(t.TgZ(0,"mat-option",90),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.text),t.xp6(1),t.hij(" ",e.text," ")}}function ei(o,n){if(1&o&&(t.TgZ(0,"mat-option",90),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.text),t.xp6(1),t.hij(" ",e.text," ")}}function ai(o,n){if(1&o&&(t.TgZ(0,"mat-option",90),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.text),t.xp6(1),t.hij(" ",e.text," ")}}function ii(o,n){if(1&o&&(t.TgZ(0,"mat-option",90),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.text),t.xp6(1),t.hij(" ",e.text," ")}}let oi=(()=>{class o{constructor(e,a,i,r,l,d,h,u,g,L){this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.utilService=d,this.translate=h,this.notifyService=u,this.validationService=g,this.dialogRef=L,this.id=0,this.cityList1=[],this.cityList2=[],this.categoryCodeControl=new s.NI("",s.kI.required),this.salesTermsCodeControl=new s.NI("",s.kI.required),this.userTypes=[],this.custARAcControl=new s.NI("",s.kI.required),this.custArAcCodeControl=new s.NI("",s.kI.required),this.custDefExpAcCodeControl=new s.NI("",s.kI.required),this.custARAdjAcCodeControl=new s.NI("",s.kI.required),this.custARDiscAcCodeControl=new s.NI("",s.kI.required),this.readonly="",this.isDataLoading=!1,this.filteredCategoryCodes=this.categoryCodeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(d.autoDelay()),(0,P.x)(),(0,M.w)(f=>(""!==f.trim()&&(this.isDataLoading=!0),this.filterCategoryCodes(f||"")))),this.filteredSalesTermsCodes=this.salesTermsCodeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(d.autoDelay()),(0,P.x)(),(0,M.w)(f=>(""!==f.trim()&&(this.isDataLoading=!0),this.filterSalesTermsCodes(f||"")))),this.filteredcustARAc=this.custARAcControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(d.autoDelay()),(0,P.x)(),(0,M.w)(f=>(""!==f.trim()&&(this.isDataLoading=!0),this.filterAccountCodes(f||"")))),this.filteredcustArAcCode=this.custArAcCodeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(d.autoDelay()),(0,P.x)(),(0,M.w)(f=>(""!==f.trim()&&(this.isDataLoading=!0),this.filterAccountCodes(f||"")))),this.filteredcustDefExpAcCode=this.custDefExpAcCodeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(d.autoDelay()),(0,P.x)(),(0,M.w)(f=>(""!==f.trim()&&(this.isDataLoading=!0),this.filterAccountCodes(f||"")))),this.filteredcustARAdjAcCode=this.custARAdjAcCodeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(d.autoDelay()),(0,P.x)(),(0,M.w)(f=>(""!==f.trim()&&(this.isDataLoading=!0),this.filterAccountCodes(f||"")))),this.filteredcustARDiscAcCode=this.custARDiscAcCodeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(d.autoDelay()),(0,P.x)(),(0,M.w)(f=>(""!==f.trim()&&(this.isDataLoading=!0),this.filterAccountCodes(f||""))))}ngOnInit(){this.setForm(),this.loadCities(),this.id>0&&(this.readonly="readonly",this.setEditForm())}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({vendCode:["",s.kI.required],vendName:["",s.kI.required],vendArbName:["",s.kI.required],vendAlias:["",s.kI.required],vatNumber:["",s.kI.required],vendRating:["",s.kI.required],vendDiscount:["",s.kI.required],vendCrLimit:["",s.kI.required],vendPoRep:["",s.kI.required],vendPoArea:["",s.kI.required],vendARAc:[""],vendLastPaidDate:["",s.kI.required],vendLastPoDate:["",s.kI.required],vendLastPayAmt:["",s.kI.required],vendAddress1:["",s.kI.required],vendMobile1:["",s.kI.compose([s.kI.required,this.validationService.mobileValidator])],vendPhone1:["",s.kI.compose([s.kI.required,this.validationService.mobileValidator])],vendEmail1:["",s.kI.compose([s.kI.required,s.kI.email])],vendContact1:["",s.kI.compose([s.kI.required])],vendAddress2:["",s.kI.required],vendMobile2:["",s.kI.compose([s.kI.required,this.validationService.mobileValidator])],vendPhone2:["",s.kI.compose([s.kI.required,this.validationService.mobileValidator])],vendEmail2:["",s.kI.compose([s.kI.required,s.kI.email])],vendContact2:["",s.kI.compose([s.kI.required])],isActive:[!0],stateone:[""],countryone:[""],statetwo:[""],countrytwo:[""],vendType:["",s.kI.required],vendCatCode:[""],poTermsCode:[""],vendCityCode1:["",s.kI.required],vendCityCode2:["",s.kI.required],vendUDF1:[""],vendUDF2:[""],vendUDF3:[""],vendAllowCrsale:[!1],vendAlloCrOverride:[!1],vendOnHold:[!1],vendAlloChkPay:[!1],vendSetPriceLevel:[!1],vendIsVendor:[!1],vendArAcBranch:[!1],vendArAcCode:[""],vendDefExpAcCode:[""],vendARAdjAcCode:[""],vendARDiscAcCode:[""],vendOutStandBal:[0],vendAvailCrLimit:[""]})}submit(){this.id>0&&(this.form.value.id=this.id);let e=this.categoryCodeControl.value,a=this.salesTermsCodeControl.value,i=this.custARAcControl.value,r=this.custARDiscAcCodeControl.value,l=this.custDefExpAcCodeControl.value,d=this.custARAdjAcCodeControl.value,h=this.custArAcCodeControl.value;if(this.utilService.hasValue(e)?(this.form.value.vendCatCode=this.utilService.removeSqueres(e),this.categoryCodeControl.setValue(e)):console.log("vendCatCode-"),this.utilService.hasValue(a)?(this.form.value.poTermsCode=this.utilService.removeSqueres(a),this.salesTermsCodeControl.setValue(a)):console.log("poTermsCode-"),this.utilService.hasValue(i)?(this.form.value.vendARAc=this.utilService.removeSqueres(i),this.custARAcControl.setValue(i)):console.log("vendARAc-"),this.utilService.hasValue(h)?(this.form.value.vendArAcCode=this.utilService.removeSqueres(h),this.custArAcCodeControl.setValue(h)):console.log("vendArAcCode-"),this.utilService.hasValue(l)?(this.form.value.vendDefExpAcCode=this.utilService.removeSqueres(l),this.custDefExpAcCodeControl.setValue(l)):console.log("custDefExpAcCode-"),this.utilService.hasValue(d)?(this.form.value.vendARAdjAcCode=this.utilService.removeSqueres(d),this.custARAdjAcCodeControl.setValue(d)):console.log("custARAdjAcCode-"),this.utilService.hasValue(r)?(this.form.value.vendARDiscAcCode=this.utilService.removeSqueres(r),this.custARDiscAcCodeControl.setValue(r)):console.log("custARDiscAcCode-"),this.form.valid){if(!(this.utilService.hasValue(r)||this.utilService.hasValue(l)||this.utilService.hasValue(d)||this.utilService.hasValue(h)))return void this.notifyService.showError("Select Account Mapping");this.apiService.post("vendorMaster",this.form.value).subscribe(u=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},u=>{console.error(u),this.utilService.ShowApiErrorMessage(u)})}else this.utilService.FillUpFields()}setEditForm(){this.apiService.get("vendorMaster",this.id).subscribe(e=>{e&&(this.categoryCodeControl.setValue(e.vendCatCode),this.salesTermsCodeControl.setValue(e.poTermsCode),this.custARAcControl.setValue(e.vendARAc),this.custDefExpAcCodeControl.setValue(e.vendDefExpAcCode),this.custARAdjAcCodeControl.setValue(e.vendARAdjAcCode),this.custArAcCodeControl.setValue(e.vendArAcCode),this.custARDiscAcCodeControl.setValue(e.vendARDiscAcCode),this.form.patchValue(e),this.apiService.getall("City/getStateCountrybyCityCode/"+e.vendCityCode1).subscribe(a=>{this.form.patchValue({stateone:a.stateName,countryone:a.countryName})}),this.apiService.getall("City/getStateCountrybyCityCode/"+e.vendCityCode2).subscribe(a=>{this.form.patchValue({statetwo:a.stateName,countrytwo:a.countryName})}),this.form.patchValue({id:0}))})}loadCities(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.cityList1=e,this.cityList2=e}),this.apiService.getall("userType/getUserTypeSelectList").subscribe(e=>{this.userTypes=e})}getStateCountrybyCityCode1(e){this.apiService.getall("City/getStateCountrybyCityCode/"+e.target.value).subscribe(i=>{this.form.patchValue({vendCityCode1:i.cityCode,stateone:i.stateName,countryone:i.countryName})})}getStateCountrybyCityCode2(e){this.apiService.getall("City/getStateCountrybyCityCode/"+e.target.value).subscribe(i=>{this.form.patchValue({vendCityCode2:i.cityCode,statetwo:i.stateName,countrytwo:i.countryName})})}reset(){this.form.controls.vendName.setValue("")}filterCategoryCodes(e){return this.apiService.getall(`vendorCategory/getSelectVendorCategoryCodeList?search=${e}`).pipe((0,Q.U)(a=>{const i=a;return this.isDataLoading=!1,i}))}filterSalesTermsCodes(e){return this.apiService.getall(`poTermsCode/getSelectPoTermsCodeList?search=${e}`).pipe((0,Q.U)(a=>{const i=a;return this.isDataLoading=!1,i}))}filterAccountCodes(e){return this.apiService.getall(`mainAccounts/getSelectMainAccountList?search=${e}`).pipe((0,Q.U)(a=>{const i=a;return this.isDataLoading=!1,i}))}validate(e,a,i){let r="";switch("change"==i&&(r=e.target.value),a){case"categoryCodeControl":this.apiService.getall("vendorCategory/getCustCatByVenCatCode/"+r).subscribe(l=>{null!=l?this.form.value.vendCatCode=l.vendCatCode:(this.form.value.vendCatCode="",this.categoryCodeControl.setValue(""))});break;case"salesTermsCodeControl":this.apiService.getall("poTermsCode/getPoTermsByTermsCode/"+r).subscribe(l=>{null!=l?this.form.value.poTermsCode=l.poTermsCode:(this.form.value.poTermsCode="",this.salesTermsCodeControl.setValue(""))});break;case"ARAcControl":this.apiService.getall("MainAccounts/getAccountByAccountCode/"+r).subscribe(l=>{null!=l?this.form.value.vendARAc=l.finAcCode:(this.form.value.vendARAc="",this.custARAcControl.setValue(""))});break;case"custDefExpAcCodeControl":this.apiService.getall("MainAccounts/getAccountByAccountCode/"+r).subscribe(l=>{null!=l?this.form.value.vendDefExpAcCode=l.finAcCode:(this.form.value.vendDefExpAcCode="",this.custDefExpAcCodeControl.setValue(""))});break;case"custARAdjAcCodeControl":this.apiService.getall("MainAccounts/getAccountByAccountCode/"+r).subscribe(l=>{null!=l?this.form.value.vendARAdjAcCode=l.finAcCode:(this.form.value.vendARAdjAcCode="",this.custARAdjAcCodeControl.setValue(""))});break;case"custArAcCodeControl":this.apiService.getall("MainAccounts/getAccountByAccountCode/"+r).subscribe(l=>{null!=l?this.form.value.vendArAcCode=l.finAcCode:(this.form.value.vendArAcCode="",this.custArAcCodeControl.setValue(""))});break;case"custARDiscAcCodeControl":this.apiService.getall("MainAccounts/getAccountByAccountCode/"+r).subscribe(l=>{null!=l?this.form.value.vendARDiscAcCode=l.finAcCode:(this.form.value.vendARDiscAcCode="",this.custARDiscAcCodeControl.setValue(""))})}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(x.sK),t.Y36(A.g),t.Y36(b.R),t.Y36(Z.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdatepurchasevendor"]],decls:574,vars:528,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["animationDuration","0ms"],[1,"tabs_custom",3,"label"],[1,"mt-4"],[1,"cardtitle-divider"],[1,"row","rowm0","rowp15"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["data-type","image-add",1,"col-4","pl-2","pr-2","pt-2",2,"max-width","130px"],["data-type","image-ratio-box",1,"ratio-box","text-center"],["data-type","noimage","src","../../../assets/images/photo-camera-gray.svg",1,"btn","btn-light","ratio-img","img-fluid","p-2","image","border","dashed","rounded",2,"cursor","pointer"],["type","number","formControlName","vendOutStandBal",1,"form-control",3,"placeholder","readonly"],["type","number","formControlName","vendAvailCrLimit",1,"form-control",3,"placeholder"],[1,"mr-sm-2"],["type","text","formControlName","vendCode",1,"form-control",3,"placeholder","readonly"],[3,"control"],["type","text","formControlName","vatNumber",1,"form-control",3,"placeholder"],["type","text","formControlName","vendAlias",1,"form-control",3,"placeholder"],["type","text","formControlName","vendName",1,"form-control",3,"placeholder"],["type","text","formControlName","vendArbName",1,"form-control",3,"placeholder"],["type","number","formControlName","vendType",1,"form-control",3,"placeholder"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete","change"],["auto1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","number","min","1","max","5","formControlName","vendRating",1,"form-control",3,"placeholder"],["auto2","matAutocomplete"],["type","number","formControlName","vendDiscount",1,"form-control",3,"placeholder"],["type","number","formControlName","vendCrLimit",1,"form-control",3,"placeholder"],["type","text","formControlName","vendPoRep",1,"form-control",3,"placeholder"],["type","text","formControlName","vendPoArea",1,"form-control",3,"placeholder"],["auto3","matAutocomplete"],["type","number","formControlName","vendLastPayAmt",1,"form-control",3,"placeholder"],[1,"input-group"],["formControlName","vendLastPoDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker",""],["formControlName","vendLastPaidDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],["picker2",""],[1,"row","mt-3"],["formControlName","vendAddress1",1,"form-control",3,"placeholder"],["formControlName","vendCityCode1",1,"custom-select","mr-sm-2",3,"change"],["value",""],["type","text","formControlName","stateone","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","countryone","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","vendMobile1","maxlength","10",1,"form-control",3,"placeholder"],["type","text","formControlName","vendPhone1","maxlength","10",1,"form-control",3,"placeholder"],["type","email","formControlName","vendContact1",1,"form-control",3,"placeholder"],["type","email","formControlName","vendEmail1",1,"form-control",3,"placeholder"],["formControlName","vendAddress2",1,"form-control",3,"placeholder"],["formControlName","vendCityCode2",1,"custom-select","mr-sm-2",3,"change"],["type","text","formControlName","statetwo","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","countrytwo","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","vendMobile2","maxlength","10",1,"form-control",3,"placeholder"],["type","text","formControlName","vendPhone2","maxlength","10",1,"form-control",3,"placeholder"],["type","email","formControlName","vendContact2",1,"form-control",3,"placeholder"],["type","email","formControlName","vendEmail2",1,"form-control",3,"placeholder"],[3,"label"],[1,"col-md-4","col-lg-4"],["color","primary","formControlName","isActive"],["color","primary","formControlName","vendAllowCrsale"],["color","primary","formControlName","vendAlloCrOverride"],["color","primary","formControlName","vendOnHold"],["color","primary","formControlName","vendAlloChkPay"],["color","primary","formControlName","vendSetPriceLevel"],["color","primary","formControlName","vendIsVendor"],["color","primary","formControlName","vendArAcBranch"],["auto4","matAutocomplete"],["auto5","matAutocomplete"],["auto6","matAutocomplete"],["auto7","matAutocomplete"],[1,"row"],[1,"custom-file"],["type","file","id","customFile",1,"custom-file-input"],["for","customFile",1,"custom-file-label"],[1,"custom-file","mt-3"],[1,"mt-3","text-center"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[1,"mt-3","custom-listrow"],["href","#",1,"listicons"],[1,"icon-trash"],[1,"row","customrow"],[1,"col-lg-12","col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"value","click"],[3,"value"]],template:function(e,a){if(1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return a.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return a.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"mat-tab-group",6),t.TgZ(10,"mat-tab",7),t.ALo(11,"translate"),t.TgZ(12,"h4",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"div",9),t.TgZ(16,"div",10),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",13),t.TgZ(23,"div",14),t._UZ(24,"img",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"div",12),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",16),t.ALo(31,"translate"),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",12),t.TgZ(34,"label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",17),t.ALo(38,"translate"),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.TgZ(40,"div",11),t.TgZ(41,"div",12),t.TgZ(42,"label",18),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"input",19),t.ALo(46,"translate"),t.ALo(47,"translate"),t._UZ(48,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(49,"div",11),t.TgZ(50,"div",12),t.TgZ(51,"label",18),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._UZ(54,"input",21),t.ALo(55,"translate"),t.ALo(56,"translate"),t._UZ(57,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(58,"div",11),t.TgZ(59,"div",12),t.TgZ(60,"label",18),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"input",22),t.ALo(64,"translate"),t.ALo(65,"translate"),t._UZ(66,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(67,"div",11),t.TgZ(68,"div",12),t.TgZ(69,"label",18),t._uU(70),t.ALo(71,"translate"),t.qZA(),t._UZ(72,"input",23),t.ALo(73,"translate"),t.ALo(74,"translate"),t._UZ(75,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(76,"div",11),t.TgZ(77,"div",12),t.TgZ(78,"label",18),t._uU(79),t.ALo(80,"translate"),t.qZA(),t._UZ(81,"input",24),t.ALo(82,"translate"),t.ALo(83,"translate"),t._UZ(84,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(85,"div",11),t.TgZ(86,"div",12),t.TgZ(87,"label",18),t._uU(88),t.ALo(89,"translate"),t.qZA(),t._UZ(90,"input",25),t.ALo(91,"translate"),t.ALo(92,"translate"),t._UZ(93,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(94,"div",11),t.TgZ(95,"div",12),t.TgZ(96,"label",18),t._uU(97),t.ALo(98,"translate"),t.qZA(),t._UZ(99,"auto-loader",26),t.TgZ(100,"input",27),t.NdJ("change",function(r){return a.validate(r,"categoryCodeControl","change")}),t.ALo(101,"translate"),t.ALo(102,"translate"),t.qZA(),t.TgZ(103,"mat-autocomplete",null,28),t.YNc(105,Ha,2,2,"mat-option",29),t.ALo(106,"async"),t.qZA(),t._UZ(107,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(108,"div",11),t.TgZ(109,"div",12),t.TgZ(110,"label",18),t._uU(111),t.ALo(112,"translate"),t.qZA(),t._UZ(113,"input",30),t.ALo(114,"translate"),t.ALo(115,"translate"),t._UZ(116,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(117,"div",11),t.TgZ(118,"div",12),t.TgZ(119,"label",18),t._uU(120),t.ALo(121,"translate"),t.qZA(),t._UZ(122,"auto-loader",26),t.TgZ(123,"input",27),t.NdJ("change",function(r){return a.validate(r,"salesTermsCodeControl","change")}),t.ALo(124,"translate"),t.ALo(125,"translate"),t.qZA(),t.TgZ(126,"mat-autocomplete",null,31),t.YNc(128,Wa,2,2,"mat-option",29),t.ALo(129,"async"),t.qZA(),t._UZ(130,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(131,"div",11),t.TgZ(132,"div",12),t.TgZ(133,"label",18),t._uU(134),t.ALo(135,"translate"),t.qZA(),t._UZ(136,"input",32),t.ALo(137,"translate"),t.ALo(138,"translate"),t._UZ(139,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(140,"div",11),t.TgZ(141,"div",12),t.TgZ(142,"label",18),t._uU(143),t.ALo(144,"translate"),t.qZA(),t._UZ(145,"input",33),t.ALo(146,"translate"),t.ALo(147,"translate"),t._UZ(148,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(149,"div",11),t.TgZ(150,"div",12),t.TgZ(151,"label",18),t._uU(152),t.ALo(153,"translate"),t.qZA(),t._UZ(154,"input",34),t.ALo(155,"translate"),t.ALo(156,"translate"),t._UZ(157,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(158,"div",11),t.TgZ(159,"div",12),t.TgZ(160,"label",18),t._uU(161),t.ALo(162,"translate"),t.qZA(),t._UZ(163,"input",35),t.ALo(164,"translate"),t.ALo(165,"translate"),t._UZ(166,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(167,"div",11),t.TgZ(168,"div",12),t.TgZ(169,"label",18),t._uU(170),t.ALo(171,"translate"),t.qZA(),t._UZ(172,"auto-loader",26),t.TgZ(173,"input",27),t.NdJ("change",function(r){return a.validate(r,"custARAcControl","change")}),t.ALo(174,"translate"),t.ALo(175,"translate"),t.qZA(),t.TgZ(176,"mat-autocomplete",null,36),t.YNc(178,za,2,2,"mat-option",29),t.ALo(179,"async"),t.qZA(),t._UZ(180,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(181,"div",11),t.TgZ(182,"div",12),t.TgZ(183,"label",18),t._uU(184),t.ALo(185,"translate"),t.qZA(),t._UZ(186,"input",37),t.ALo(187,"translate"),t.ALo(188,"translate"),t._UZ(189,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(190,"div",11),t.TgZ(191,"div",12),t.TgZ(192,"label",18),t._uU(193),t.ALo(194,"translate"),t.qZA(),t.TgZ(195,"div",12),t.TgZ(196,"div",38),t._UZ(197,"input",39),t.ALo(198,"translate"),t.ALo(199,"translate"),t._UZ(200,"validation-message",20),t.TgZ(201,"div",40),t._UZ(202,"mat-datepicker-toggle",41),t._UZ(203,"mat-datepicker",null,42),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(205,"div",11),t.TgZ(206,"div",12),t.TgZ(207,"label",18),t._uU(208),t.ALo(209,"translate"),t.qZA(),t.TgZ(210,"div",12),t.TgZ(211,"div",38),t._UZ(212,"input",43),t.ALo(213,"translate"),t.ALo(214,"translate"),t._UZ(215,"validation-message",20),t.TgZ(216,"div",40),t._UZ(217,"mat-datepicker-toggle",41),t._UZ(218,"mat-datepicker",null,44),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(220,"div",11),t.TgZ(221,"div",11),t.TgZ(222,"h4",8),t._uU(223),t.ALo(224,"translate"),t.qZA(),t._UZ(225,"div",9),t.TgZ(226,"div",45),t.TgZ(227,"div",5),t.TgZ(228,"div",12),t.TgZ(229,"textarea",46),t.ALo(230,"translate"),t.ALo(231,"translate"),t._uU(232,"                    \n"),t.qZA(),t._UZ(233,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(234,"div",11),t.TgZ(235,"div",12),t.TgZ(236,"label"),t._uU(237),t.ALo(238,"translate"),t.qZA(),t.TgZ(239,"select",47),t.NdJ("change",function(r){return a.getStateCountrybyCityCode1(r)}),t.TgZ(240,"option",48),t._uU(241),t.ALo(242,"translate"),t.ALo(243,"translate"),t.qZA(),t.YNc(244,Xa,2,2,"option",29),t.qZA(),t._UZ(245,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(246,"div",11),t.TgZ(247,"div",12),t.TgZ(248,"label"),t._uU(249),t.ALo(250,"translate"),t.qZA(),t._UZ(251,"input",49),t.ALo(252,"translate"),t.ALo(253,"translate"),t.qZA(),t.qZA(),t.TgZ(254,"div",11),t.TgZ(255,"div",12),t.TgZ(256,"label"),t._uU(257),t.ALo(258,"translate"),t.qZA(),t._UZ(259,"input",50),t.ALo(260,"translate"),t.ALo(261,"translate"),t.qZA(),t.qZA(),t.TgZ(262,"div",11),t.TgZ(263,"div",12),t.TgZ(264,"label"),t._uU(265),t.ALo(266,"translate"),t.qZA(),t._UZ(267,"input",51),t.ALo(268,"translate"),t.ALo(269,"translate"),t._UZ(270,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(271,"div",11),t.TgZ(272,"div",12),t.TgZ(273,"label"),t._uU(274),t.ALo(275,"translate"),t.qZA(),t._UZ(276,"input",52),t.ALo(277,"translate"),t.ALo(278,"translate"),t._UZ(279,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(280,"div",11),t.TgZ(281,"div",12),t.TgZ(282,"label"),t._uU(283),t.ALo(284,"translate"),t.qZA(),t._UZ(285,"input",53),t.ALo(286,"translate"),t.ALo(287,"translate"),t._UZ(288,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(289,"div",5),t.TgZ(290,"div",12),t.TgZ(291,"label"),t._uU(292),t.ALo(293,"translate"),t.qZA(),t._UZ(294,"input",54),t.ALo(295,"translate"),t.ALo(296,"translate"),t._UZ(297,"validation-message",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(298,"div",11),t.TgZ(299,"h4",8),t._uU(300),t.ALo(301,"translate"),t.qZA(),t._UZ(302,"div",9),t.TgZ(303,"div",45),t.TgZ(304,"div",5),t.TgZ(305,"div",12),t.TgZ(306,"textarea",55),t.ALo(307,"translate"),t.ALo(308,"translate"),t._uU(309,"                    \n"),t.qZA(),t._UZ(310,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(311,"div",11),t.TgZ(312,"div",12),t.TgZ(313,"label"),t._uU(314),t.ALo(315,"translate"),t.qZA(),t.TgZ(316,"select",56),t.NdJ("change",function(r){return a.getStateCountrybyCityCode2(r)}),t.TgZ(317,"option",48),t._uU(318),t.ALo(319,"translate"),t.ALo(320,"translate"),t.qZA(),t.YNc(321,Ka,2,2,"option",29),t.qZA(),t._UZ(322,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(323,"div",11),t.TgZ(324,"div",12),t.TgZ(325,"label"),t._uU(326),t.ALo(327,"translate"),t.qZA(),t._UZ(328,"input",57),t.ALo(329,"translate"),t.ALo(330,"translate"),t.qZA(),t.qZA(),t.TgZ(331,"div",11),t.TgZ(332,"div",12),t.TgZ(333,"label"),t._uU(334),t.ALo(335,"translate"),t.qZA(),t._UZ(336,"input",58),t.ALo(337,"translate"),t.ALo(338,"translate"),t.qZA(),t.qZA(),t.TgZ(339,"div",11),t.TgZ(340,"div",12),t.TgZ(341,"label"),t._uU(342),t.ALo(343,"translate"),t.qZA(),t._UZ(344,"input",59),t.ALo(345,"translate"),t.ALo(346,"translate"),t._UZ(347,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(348,"div",11),t.TgZ(349,"div",12),t.TgZ(350,"label"),t._uU(351),t.ALo(352,"translate"),t.qZA(),t._UZ(353,"input",60),t.ALo(354,"translate"),t.ALo(355,"translate"),t._UZ(356,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(357,"div",11),t.TgZ(358,"div",12),t.TgZ(359,"label"),t._uU(360),t.ALo(361,"translate"),t.qZA(),t._UZ(362,"input",61),t.ALo(363,"translate"),t.ALo(364,"translate"),t._UZ(365,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(366,"div",5),t.TgZ(367,"div",12),t.TgZ(368,"label"),t._uU(369),t.ALo(370,"translate"),t.qZA(),t._UZ(371,"input",62),t.ALo(372,"translate"),t.ALo(373,"translate"),t._UZ(374,"validation-message",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(375,"mat-tab",63),t.ALo(376,"translate"),t.TgZ(377,"h4",8),t._uU(378),t.ALo(379,"translate"),t.qZA(),t._UZ(380,"div",9),t.TgZ(381,"div",10),t.TgZ(382,"div",64),t.TgZ(383,"label",18),t._uU(384),t.ALo(385,"translate"),t.qZA(),t.TgZ(386,"div",12),t._UZ(387,"mat-slide-toggle",65),t.qZA(),t.qZA(),t.TgZ(388,"div",64),t.TgZ(389,"label",18),t._uU(390),t.ALo(391,"translate"),t.qZA(),t.TgZ(392,"div",12),t._UZ(393,"mat-slide-toggle",66),t.qZA(),t.qZA(),t.TgZ(394,"div",64),t.TgZ(395,"label",18),t._uU(396),t.ALo(397,"translate"),t.qZA(),t.TgZ(398,"div",12),t._UZ(399,"mat-slide-toggle",67),t.qZA(),t.qZA(),t.TgZ(400,"div",64),t.TgZ(401,"label",18),t._uU(402),t.ALo(403,"translate"),t.qZA(),t.TgZ(404,"div",12),t._UZ(405,"mat-slide-toggle",68),t.qZA(),t.qZA(),t.TgZ(406,"div",64),t.TgZ(407,"label",18),t._uU(408),t.ALo(409,"translate"),t.qZA(),t.TgZ(410,"div",12),t._UZ(411,"mat-slide-toggle",69),t.qZA(),t.qZA(),t.TgZ(412,"div",64),t.TgZ(413,"label",18),t._uU(414),t.ALo(415,"translate"),t.qZA(),t.TgZ(416,"div",12),t._UZ(417,"mat-slide-toggle",70),t.qZA(),t.qZA(),t.TgZ(418,"div",64),t.TgZ(419,"label",18),t._uU(420),t.ALo(421,"translate"),t.qZA(),t.TgZ(422,"div",12),t._UZ(423,"mat-slide-toggle",71),t.qZA(),t.qZA(),t.TgZ(424,"div",64),t.TgZ(425,"label",18),t._uU(426),t.ALo(427,"translate"),t.qZA(),t.TgZ(428,"div",12),t._UZ(429,"mat-slide-toggle",72),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(430,"mat-tab",63),t.ALo(431,"translate"),t.TgZ(432,"h4",8),t._uU(433),t.ALo(434,"translate"),t.qZA(),t._UZ(435,"div",9),t.TgZ(436,"div",10),t.TgZ(437,"div",11),t.TgZ(438,"div",12),t.TgZ(439,"label",18),t._uU(440),t.ALo(441,"translate"),t.qZA(),t._UZ(442,"auto-loader",26),t.TgZ(443,"input",27),t.NdJ("change",function(r){return a.validate(r,"custArAcCodeControl","change")}),t.ALo(444,"translate"),t.ALo(445,"translate"),t.qZA(),t.TgZ(446,"mat-autocomplete",null,73),t.YNc(448,ti,2,2,"mat-option",29),t.ALo(449,"async"),t.qZA(),t._UZ(450,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(451,"div",11),t.TgZ(452,"div",12),t.TgZ(453,"label",18),t._uU(454),t.ALo(455,"translate"),t.qZA(),t._UZ(456,"auto-loader",26),t.TgZ(457,"input",27),t.NdJ("change",function(r){return a.validate(r,"custDefExpAcCodeControl","change")}),t.ALo(458,"translate"),t.ALo(459,"translate"),t.qZA(),t.TgZ(460,"mat-autocomplete",null,74),t.YNc(462,ei,2,2,"mat-option",29),t.ALo(463,"async"),t.qZA(),t._UZ(464,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(465,"div",11),t.TgZ(466,"div",12),t.TgZ(467,"label",18),t._uU(468),t.ALo(469,"translate"),t.qZA(),t._UZ(470,"auto-loader",26),t.TgZ(471,"input",27),t.NdJ("change",function(r){return a.validate(r,"custARAdjAcCodeControl","change")}),t.ALo(472,"translate"),t.ALo(473,"translate"),t.qZA(),t.TgZ(474,"mat-autocomplete",null,75),t.YNc(476,ai,2,2,"mat-option",29),t.ALo(477,"async"),t.qZA(),t._UZ(478,"validation-message",20),t.qZA(),t.qZA(),t.TgZ(479,"div",11),t.TgZ(480,"div",12),t.TgZ(481,"label",18),t._uU(482),t.ALo(483,"translate"),t.qZA(),t._UZ(484,"auto-loader",26),t.TgZ(485,"input",27),t.NdJ("change",function(r){return a.validate(r,"custARDiscAcCodeControl","change")}),t.ALo(486,"translate"),t.ALo(487,"translate"),t.qZA(),t.TgZ(488,"mat-autocomplete",null,76),t.YNc(490,ii,2,2,"mat-option",29),t.ALo(491,"async"),t.qZA(),t._UZ(492,"validation-message",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(493,"mat-tab",63),t.ALo(494,"translate"),t.TgZ(495,"h4",8),t._uU(496),t.ALo(497,"translate"),t.qZA(),t._UZ(498,"div",9),t.TgZ(499,"div",10),t.TgZ(500,"div",11),t.TgZ(501,"div",77),t.TgZ(502,"div",5),t.TgZ(503,"div",78),t._UZ(504,"input",79),t.TgZ(505,"label",80),t._uU(506),t.ALo(507,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(508,"div",5),t.TgZ(509,"div",81),t._UZ(510,"input",79),t.TgZ(511,"label",80),t._uU(512),t.ALo(513,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(514,"div",5),t.TgZ(515,"div",81),t._UZ(516,"input",79),t.TgZ(517,"label",80),t._uU(518),t.ALo(519,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(520,"div",5),t.TgZ(521,"div",82),t._UZ(522,"input",83),t.ALo(523,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(524,"div",11),t.TgZ(525,"h4"),t._uU(526),t.ALo(527,"translate"),t.qZA(),t._UZ(528,"div",9),t.TgZ(529,"div",77),t.TgZ(530,"div",5),t.TgZ(531,"div",84),t.TgZ(532,"a",85),t._UZ(533,"i",86),t.qZA(),t.TgZ(534,"label"),t._uU(535),t.ALo(536,"translate"),t.qZA(),t.qZA(),t.TgZ(537,"div",84),t.TgZ(538,"a",85),t._UZ(539,"i",86),t.qZA(),t.TgZ(540,"label"),t._uU(541),t.ALo(542,"translate"),t.qZA(),t.qZA(),t.TgZ(543,"div",84),t.TgZ(544,"a",85),t._UZ(545,"i",86),t.qZA(),t.TgZ(546,"label"),t._uU(547),t.ALo(548,"translate"),t.qZA(),t.qZA(),t.TgZ(549,"div",84),t.TgZ(550,"a",85),t._UZ(551,"i",86),t.qZA(),t.TgZ(552,"label"),t._uU(553),t.ALo(554,"translate"),t.qZA(),t.qZA(),t.TgZ(555,"div",84),t.TgZ(556,"a",85),t._UZ(557,"i",86),t.qZA(),t.TgZ(558,"label"),t._uU(559),t.ALo(560,"translate"),t.qZA(),t.qZA(),t.TgZ(561,"div",84),t.TgZ(562,"a",85),t._UZ(563,"i",86),t.qZA(),t.TgZ(564,"label"),t._uU(565),t.ALo(566,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(567,"div",87),t.TgZ(568,"div",88),t.TgZ(569,"input",89),t.NdJ("click",function(){return a.closeModel()}),t.ALo(570,"translate"),t.qZA(),t._uU(571," \xa0\xa0 "),t._UZ(572,"input",83),t.ALo(573,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const i=t.MAs(104),r=t.MAs(127),l=t.MAs(177),d=t.MAs(204),h=t.MAs(219),u=t.MAs(447),g=t.MAs(461),L=t.MAs(475),f=t.MAs(489);t.xp6(1),t.Oqu(t.lcZ(2,218,"Adding_New_Vendor")),t.xp6(4),t.Q6J("formGroup",a.form),t.xp6(5),t.s9C("label",t.lcZ(11,220,"Primary_Details")),t.xp6(3),t.Oqu(t.lcZ(14,222,"Primary_Details")),t.xp6(7),t.Oqu(t.lcZ(21,224,"Company_Logo")),t.xp6(8),t.Oqu(t.lcZ(29,226,"Outstanding_Balance")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,228,"Please_Enter")," ",t.lcZ(32,230,"Outstanding_Balance"),""),t.Q6J("readonly",!0),t.xp6(5),t.hij("",t.lcZ(36,232,"Available_Credit_Limit")," "),t.xp6(2),t.hYB("placeholder","",t.lcZ(38,234,"Please_Enter")," ",t.lcZ(39,236,"Available_Credit_Limit"),""),t.xp6(6),t.Oqu(t.lcZ(44,238,"Vendor_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(46,240,"Please_Enter")," ",t.lcZ(47,242,"Vendor_Code"),""),t.s9C("readonly",a.readonly),t.xp6(3),t.Q6J("control",a.form.controls.vendCode),t.xp6(4),t.Oqu(t.lcZ(53,244,"GST_VAT_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(55,246,"Please_Enter")," ",t.lcZ(56,248,"Vendor_Code"),""),t.xp6(3),t.Q6J("control",a.form.controls.vatNumber),t.xp6(4),t.Oqu(t.lcZ(62,250,"Alias")),t.xp6(2),t.hYB("placeholder","",t.lcZ(64,252,"Please_Enter")," ",t.lcZ(65,254,"User_Email"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendAlias),t.xp6(4),t.Oqu(t.lcZ(71,256,"Vendor_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(73,258,"Please_Enter")," ",t.lcZ(74,260,"Vendor_Name"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendName),t.xp6(4),t.hij(" ",t.lcZ(80,262,"Vendor_Name_Arabic")," "),t.xp6(2),t.hYB("placeholder","",t.lcZ(82,264,"Please_Enter")," ",t.lcZ(83,266,"Vendor_Name_Arabic"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendArbName),t.xp6(4),t.hij(" ",t.lcZ(89,268,"Type")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(91,270,"Please_Enter"),"  ",t.lcZ(92,272,"Type"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendType),t.xp6(4),t.hij(" ",t.lcZ(98,274,"Category")," "),t.xp6(2),t.Q6J("isLoading",a.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(101,276,"Please_Select")," ",t.lcZ(102,278,"Category"),""),t.Q6J("formControl",a.categoryCodeControl)("matAutocomplete",i),t.xp6(5),t.Q6J("ngForOf",t.lcZ(106,280,a.filteredCategoryCodes)),t.xp6(2),t.Q6J("control",a.categoryCodeControl),t.xp6(4),t.hij(" ",t.lcZ(112,282,"Vendor_Rating")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(114,284,"Please_Enter"),"  ",t.lcZ(115,286,"Vendor_Rating"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendRating),t.xp6(4),t.hij(" ",t.lcZ(121,288,"Terms_Code")," "),t.xp6(2),t.Q6J("isLoading",a.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(124,290,"Please_Select")," ",t.lcZ(125,292,"Terms_Code"),""),t.Q6J("formControl",a.salesTermsCodeControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(129,294,a.filteredSalesTermsCodes)),t.xp6(2),t.Q6J("control",a.salesTermsCodeControl),t.xp6(4),t.hij(" ",t.lcZ(135,296,"Vendor_Discount")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(137,298,"Please_Enter"),"  ",t.lcZ(138,300,"Vendor_Discount"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendDiscount),t.xp6(4),t.hij(" ",t.lcZ(144,302,"Credit_Limit")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(146,304,"Please_Enter"),"  ",t.lcZ(147,306,"Credit_Limit"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendCrLimit),t.xp6(4),t.hij(" ",t.lcZ(153,308,"Account_Manager_Sales_Rep")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(155,310,"Please_Enter"),"  ",t.lcZ(156,312,"Account_Manager_Sales_Rep"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendPoRep),t.xp6(4),t.hij(" ",t.lcZ(162,314,"Sales_Area")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(164,316,"Please_Enter"),"  ",t.lcZ(165,318,"Sales_Area"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendPoArea),t.xp6(4),t.hij(" ",t.lcZ(171,320,"Discount_AP_Account")," "),t.xp6(2),t.Q6J("isLoading",a.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(174,322,"Please_Enter")," ",t.lcZ(175,324,"Discount_AR_Account"),""),t.Q6J("formControl",a.custARAcControl)("matAutocomplete",l),t.xp6(5),t.Q6J("ngForOf",t.lcZ(179,326,a.filteredcustARAc)),t.xp6(2),t.Q6J("control",a.custARAcControl),t.xp6(4),t.hij(" ",t.lcZ(185,328,"Last_Paid_Amount")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(187,330,"Please_Enter"),"  ",t.lcZ(188,332,"Last_Paid_Amount"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendLastPayAmt),t.xp6(4),t.hij(" ",t.lcZ(194,334,"Last_Sales_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(198,336,"Please_Enter")," ",t.lcZ(199,338,"Last_Sales_Date"),""),t.Q6J("matDatepicker",d),t.xp6(3),t.Q6J("control",a.form.controls.vendLastPoDate),t.xp6(2),t.Q6J("for",d),t.xp6(6),t.hij(" ",t.lcZ(209,340,"Last_Payment_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(213,342,"Please_Enter")," ",t.lcZ(214,344,"Last_Payment_Date"),""),t.Q6J("matDatepicker",h),t.xp6(3),t.Q6J("control",a.form.controls.vendLastPaidDate),t.xp6(2),t.Q6J("for",h),t.xp6(6),t.Oqu(t.lcZ(224,346,"Primary_Address")),t.xp6(6),t.hYB("placeholder","",t.lcZ(230,348,"Please_Select")," ",t.lcZ(231,350,"Primary_Address"),""),t.xp6(4),t.Q6J("control",a.form.controls.vendAddress1),t.xp6(4),t.Oqu(t.lcZ(238,352,"City")),t.xp6(4),t.AsE("",t.lcZ(242,354,"Select")," ",t.lcZ(243,356,"City")," "),t.xp6(3),t.Q6J("ngForOf",a.cityList1),t.xp6(1),t.Q6J("control",a.form.controls.vendCityCode1),t.xp6(4),t.Oqu(t.lcZ(250,358,"State")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(252,360,"Please_Enter"),"  ",t.lcZ(253,362,"State"),""),t.xp6(6),t.Oqu(t.lcZ(258,364,"Country")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(260,366,"Please_Enter"),"  ",t.lcZ(261,368,"Country"),""),t.xp6(6),t.Oqu(t.lcZ(266,370,"Mobile")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(268,372,"Please_Enter"),"  ",t.lcZ(269,374,"Mobile"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendMobile1),t.xp6(4),t.Oqu(t.lcZ(275,376,"Phone")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(277,378,"Please_Enter"),"  ",t.lcZ(278,380,"Phone"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendPhone1),t.xp6(4),t.Oqu(t.lcZ(284,382,"Contact_Person")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(286,384,"Please_Enter"),"  ",t.lcZ(287,386,"Contact_Person"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendContact1),t.xp6(4),t.Oqu(t.lcZ(293,388,"Email")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(295,390,"Please_Enter"),"  ",t.lcZ(296,392,"Email"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendEmail1),t.xp6(3),t.Oqu(t.lcZ(301,394,"Secondary_Address")),t.xp6(6),t.hYB("placeholder","",t.lcZ(307,396,"Please_Enter")," ",t.lcZ(308,398,"Secondary_Address"),""),t.xp6(4),t.Q6J("control",a.form.controls.vendAddress2),t.xp6(4),t.Oqu(t.lcZ(315,400,"City")),t.xp6(4),t.AsE("",t.lcZ(319,402,"Select")," ",t.lcZ(320,404,"City")," "),t.xp6(3),t.Q6J("ngForOf",a.cityList2),t.xp6(1),t.Q6J("control",a.form.controls.vendCityCode1),t.xp6(4),t.Oqu(t.lcZ(327,406,"State")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(329,408,"Please_Enter"),"  ",t.lcZ(330,410,"State"),""),t.xp6(6),t.Oqu(t.lcZ(335,412,"Country")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(337,414,"Please_Enter"),"  ",t.lcZ(338,416,"Country"),""),t.xp6(6),t.Oqu(t.lcZ(343,418,"Mobile")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(345,420,"Please_Enter"),"  ",t.lcZ(346,422,"Mobile"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendMobile2),t.xp6(4),t.Oqu(t.lcZ(352,424,"Phone")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(354,426,"Please_Enter"),"  ",t.lcZ(355,428,"Phone"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendPhone2),t.xp6(4),t.Oqu(t.lcZ(361,430,"Contact_Person")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(363,432,"Please_Enter"),"  ",t.lcZ(364,434,"Contact_Person"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendContact2),t.xp6(4),t.Oqu(t.lcZ(370,436,"Email")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(372,438,"Please_Enter"),"  ",t.lcZ(373,440,"Email"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendEmail2),t.xp6(1),t.s9C("label",t.lcZ(376,442,"Control")),t.xp6(3),t.Oqu(t.lcZ(379,444,"Control")),t.xp6(6),t.Oqu(t.lcZ(385,446,"Is_Active_Customer")),t.xp6(6),t.Oqu(t.lcZ(391,448,"Allow_Credit_Sales")),t.xp6(6),t.Oqu(t.lcZ(397,450,"Allow_Credit_Limit_Override")),t.xp6(6),t.Oqu(t.lcZ(403,452,"Hold_Vendor_Sales")),t.xp6(6),t.hij("",t.lcZ(409,454,"Allow_Check_Payments")," "),t.xp6(6),t.hij("",t.lcZ(415,456,"Set_Price_Level")," "),t.xp6(6),t.hij("",t.lcZ(421,458,"Vendor_is_Vendor_too")," "),t.xp6(6),t.hij("",t.lcZ(427,460,"User_AR_account_branchwise")," "),t.xp6(4),t.s9C("label",t.lcZ(431,462,"Account_Mapping")),t.xp6(3),t.Oqu(t.lcZ(434,464,"Account_Mapping")),t.xp6(7),t.Oqu(t.lcZ(441,466,"AP_Account")),t.xp6(2),t.Q6J("isLoading",a.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(444,468,"Please_Enter")," ",t.lcZ(445,470,"AP_Account"),""),t.Q6J("formControl",a.custArAcCodeControl)("matAutocomplete",u),t.xp6(5),t.Q6J("ngForOf",t.lcZ(449,472,a.filteredcustArAcCode)),t.xp6(2),t.Q6J("control",a.custArAcCodeControl),t.xp6(4),t.Oqu(t.lcZ(455,474,"Default_Expense_Account")),t.xp6(2),t.Q6J("isLoading",a.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(458,476,"Please_Enter")," ",t.lcZ(459,478,"Default_Expense_Account"),""),t.Q6J("formControl",a.custDefExpAcCodeControl)("matAutocomplete",g),t.xp6(5),t.Q6J("ngForOf",t.lcZ(463,480,a.filteredcustDefExpAcCode)),t.xp6(2),t.Q6J("control",a.custDefExpAcCodeControl),t.xp6(4),t.hij("",t.lcZ(469,482,"AP_Adjustment_Account")," "),t.xp6(2),t.Q6J("isLoading",a.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(472,484,"Please_Enter")," ",t.lcZ(473,486,"AP_Adjustment_Account"),""),t.Q6J("formControl",a.custARAdjAcCodeControl)("matAutocomplete",L),t.xp6(5),t.Q6J("ngForOf",t.lcZ(477,488,a.filteredcustARAdjAcCode)),t.xp6(2),t.Q6J("control",a.custARAdjAcCodeControl),t.xp6(4),t.Oqu(t.lcZ(483,490,"Discount_Account")),t.xp6(2),t.Q6J("isLoading",a.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(486,492,"Please_Enter")," ",t.lcZ(487,494,"Discount_Account"),""),t.Q6J("formControl",a.custARDiscAcCodeControl)("matAutocomplete",f),t.xp6(5),t.Q6J("ngForOf",t.lcZ(491,496,a.filteredcustARDiscAcCode)),t.xp6(2),t.Q6J("control",a.custARDiscAcCodeControl),t.xp6(1),t.s9C("label",t.lcZ(494,498,"Document_Upload")),t.xp6(3),t.hij("",t.lcZ(497,500,"Document_Upload")," "),t.xp6(10),t.Oqu(t.lcZ(507,502,"Choose_File")),t.xp6(6),t.Oqu(t.lcZ(513,504,"Choose_File")),t.xp6(6),t.Oqu(t.lcZ(519,506,"Choose_File")),t.xp6(4),t.s9C("value",t.lcZ(523,508,"Upload_Files")),t.xp6(4),t.Oqu(t.lcZ(527,510,"List_of_Files")),t.xp6(9),t.hij("",t.lcZ(536,512,"File1.doc")," "),t.xp6(6),t.Oqu(t.lcZ(542,514,"File2.doc")),t.xp6(6),t.Oqu(t.lcZ(548,516,"File3.doc")),t.xp6(6),t.Oqu(t.lcZ(554,518,"File4.doc")),t.xp6(6),t.Oqu(t.lcZ(560,520,"File5.doc")),t.xp6(6),t.Oqu(t.lcZ(566,522,"File6.doc")),t.xp6(4),t.s9C("value",t.lcZ(570,524,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(573,526,"Save"))}},directives:[s._Y,s.JL,s.sg,at.SP,at.uX,s.wV,s.Fj,s.JJ,s.u,H.s,z.z,$.ZL,s.oH,$.XC,c.sg,s.qQ,s.Fd,D.hl,D.nW,X.R9,D.Mq,s.EJ,s.YN,s.Kr,s.nD,ut.Rr,K.ey],pipes:[x.X$,c.Ov],encapsulation:2}),o})();var ri=m(9206),ni=m(5766);function si(o,n){1&o&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vendor_Code")," "))}function li(o,n){if(1&o&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendCode)}}function ci(o,n){1&o&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vendor_Name")," "))}function di(o,n){if(1&o&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendName)}}function ui(o,n){1&o&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Alias_Name")," "))}function pi(o,n){if(1&o&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendAlias)}}function hi(o,n){1&o&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vendor_Address")," "))}function mi(o,n){if(1&o&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendAddress1)}}function gi(o,n){1&o&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Category")," "))}function Zi(o,n){if(1&o&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendCatCode)}}function _i(o,n){1&o&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Vendor_Active")," "))}function Ai(o,n){1&o&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function Ti(o,n){1&o&&(t.TgZ(0,"span",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function fi(o,n){if(1&o&&(t.TgZ(0,"td",37),t.YNc(1,Ai,3,3,"span",38),t.YNc(2,Ti,3,3,"ng-template",null,39,t.W1O),t.qZA()),2&o){const e=n.$implicit,a=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",a)}}function Ci(o,n){1&o&&(t.TgZ(0,"th",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Actions"),""))}function vi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",37),t.TgZ(1,"a",43),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().edit(r.id)}),t._UZ(2,"i",44),t.qZA(),t.TgZ(3,"a",43),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().delete(r.id)}),t._UZ(4,"i",45),t.qZA(),t.TgZ(5,"a",43),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().print(r.vendCode)}),t._UZ(6,"i",46),t.qZA(),t._uU(7,"\xa0 "),t.TgZ(8,"a",43),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().printCustInvoices(r.vendCode)}),t._UZ(9,"i",47),t.qZA(),t._uU(10,"\xa0 "),t.qZA()}}function qi(o,n){1&o&&t._UZ(0,"tr",48)}function xi(o,n){1&o&&t._UZ(0,"tr",49)}let bi=(()=>{class o extends O{constructor(e,a,i,r,l,d,h,u,g,L,f){super(l),this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.translate=d,this.notifyService=h,this.utilService=u,this.validationService=g,this.dialog=L,this.pageService=f,this.displayedColumns=["vendCode","vendName","vendAlias","vendAddress1","vendCatCode","isActive","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.id=0}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,a,i,r){this.isLoading=!0,this.apiService.getPagination("vendorMaster",this.utilService.getQueryString(e,a,i,r)).subscribe(l=>{this.totalItemsCount=0,this.data=new p.by(l.items),this.totalItemsCount=l.totalCount,setTimeout(()=>this.data.sort=this.sort,2e3),this.isLoading=!1},l=>this.utilService.ShowApiErrorMessage(l))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,a,i,r){let l=this.utilService.openCrudDialog(this.dialog,oi);l.componentInstance.dbops=a,l.componentInstance.modalTitle=i,l.componentInstance.modalBtnTitle=r,l.componentInstance.id=e,l.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}openDialogManageOne(e="",a,i="",r){let l=this.utilService.openDialogCongif(this.dialog,r);l.componentInstance.dbops=a,l.componentInstance.modalTitle=i,l.componentInstance.customerCode=e}create(){this.openDialogManage(0,_.Oi.create,"Adding_New_Customer","Add")}edit(e){this.openDialogManage(e,_.Oi.update,"Updating_Customer","Update")}print(e){this.openDialogManageOne(e,_.Oi.update,this.translate.instant("Create_New_Sales_Invoice"),ri.G)}printCustInvoices(e){this.openDialogManageOne(e,_.Oi.update,this.translate.instant("Create_New_Sales_Invoice"),ni.S)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,V.a).afterClosed().subscribe(i=>{i&&e>0&&this.apiService.delete("CustomerMaster",e).subscribe(r=>{this.utilService.OkMessage(),this.ngOnInit()})},i=>this.utilService.ShowApiErrorMessage(i))}submit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(x.sK),t.Y36(A.g),t.Y36(I.t),t.Y36(b.R),t.Y36(Z.uw),t.Y36(v.N))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-purchasevendor"]],viewQuery:function(e,a){if(1&e&&(t.Gf(U.NW,7),t.Gf(T.YE,7)),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},features:[t.qOj],decls:64,vars:26,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-4","col-lg-4"],[1,"card-title","pt6"],[1,"col-md-8","col-lg-8","text-right"],["data-toggle","modal","data-target","#addupdateUnit","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[3,"isLoading"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","vendCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","vendName"],["matColumnDef","vendAlias"],["matColumnDef","vendAddress1"],["matColumnDef","vendCatCode"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],[1,"icon-trash"],[1,"icon-printer"],[1,"icon-list"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"h4",14),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t.TgZ(29,"a",16),t.NdJ("click",function(){return a.create()}),t._UZ(30,"i",17),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(33,"div",18),t.TgZ(34,"div",19),t._UZ(35,"spinner-loader",20),t.TgZ(36,"div",21),t.ynx(37),t.TgZ(38,"table",22),t.NdJ("matSortChange",function(r){return a.onSortOrder(r)}),t.ynx(39,23),t.YNc(40,si,3,3,"th",24),t.YNc(41,li,2,1,"td",25),t.BQk(),t.ynx(42,26),t.YNc(43,ci,3,3,"th",24),t.YNc(44,di,2,1,"td",25),t.BQk(),t.ynx(45,27),t.YNc(46,ui,3,3,"th",24),t.YNc(47,pi,2,1,"td",25),t.BQk(),t.ynx(48,28),t.YNc(49,hi,3,3,"th",24),t.YNc(50,mi,2,1,"td",25),t.BQk(),t.ynx(51,29),t.YNc(52,gi,3,3,"th",24),t.YNc(53,Zi,2,1,"td",25),t.BQk(),t.ynx(54,30),t.YNc(55,_i,3,3,"th",24),t.YNc(56,fi,4,2,"td",25),t.BQk(),t.ynx(57,31),t.YNc(58,Ci,3,3,"th",32),t.YNc(59,vi,11,0,"td",25),t.BQk(),t.YNc(60,qi,1,0,"tr",33),t.YNc(61,xi,1,0,"tr",34),t.qZA(),t.ynx(62),t.TgZ(63,"mat-paginator",35),t.NdJ("page",function(r){return a.onPageSwitch(r)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,14,"Vendor_Master")," "),t.xp6(6),t.hij("",t.lcZ(11,16,"Finance")," "),t.xp6(3),t.Oqu(t.lcZ(14,18,"Account_Payable")),t.xp6(3),t.hij("",t.lcZ(17,20,"Vendor_Master")," "),t.xp6(10),t.Oqu(t.lcZ(27,22,"Vendor_Master_List")),t.xp6(5),t.Oqu(t.lcZ(32,24,"Add_New_Vendor")),t.xp6(4),t.Q6J("isLoading",a.isLoading),t.xp6(3),t.Q6J("dataSource",a.data),t.xp6(22),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("length",a.totalItemsCount)("pageSize",a.pageService.pageCount)("pageSizeOptions",a.pageService.selectItemsPerPage))},directives:[J.r,p.BZ,T.YE,p.w1,p.fO,p.Dz,p.as,p.nj,U.NW,p.ge,T.nU,p.ev,c.O5,p.XQ,p.Gk],pipes:[x.X$],encapsulation:2}),o})();function Ui(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",57),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",57),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.TgZ(27,"td",58),t.TgZ(28,"i",59),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().editInvoiceItem(r)}),t.qZA(),t._uU(29," \xa0 "),t.TgZ(30,"i",60),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().deleteInvoiceItem(r)}),t.qZA(),t._uU(31," \xa0 "),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.tranItemCode),t.xp6(2),t.Oqu(e.tranItemName),t.xp6(2),t.Oqu(e.tranItemUnitCode),t.xp6(2),t.Oqu(e.tranUOMFactor),t.xp6(2),t.Oqu(e.tranItemCost),t.xp6(2),t.Oqu(e.tranItemQty),t.xp6(2),t.Oqu(e.tranTotCost),t.xp6(2),t.Oqu(e.discPer),t.xp6(2),t.Oqu(e.discAmt),t.xp6(2),t.Oqu(e.itemTaxPer),t.xp6(2),t.Oqu(e.taxAmount),t.xp6(2),t.Oqu(e.receivingQty),t.xp6(2),t.Oqu(e.balQty)}}const F=function(){return{standalone:!0}};let ot=(()=>{class o{constructor(e,a,i,r,l,d,h,u,g,L,f){this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.utilService=d,this.dialogRef=h,this.notifyService=u,this.validationService=g,this.pageService=L,this.dialog=f,this.displayedColumns=["purchaseOrderNO","tranDate","invRefNumber","branchCode","vendCode","paymentID","taxId","Actions"],this.searchValue="",this.sortingOrder="id desc",this.customerList=[],this.companyList=[],this.paymentTermsList=[],this.branchList=[],this.productList=[],this.vatList=[],this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.DiscPerc=0,this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.ShipmentCodeList=[],this.CurrencyCodeList=[],this.TaxCodeList=[],this.VenCodeList=[],this.compCodeList=[],this.BranchCodeList=[],this.VenNameList=[],this.PaymentTermList=[],this.ItemCodeList=[],this.ItemNameList=[],this.UOMList=[],this.PurchaseRequestList=[],this.warehouseList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.isshown=!1,this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.receivingQty=0,this.balQty=0,this.receivedQty=0,this.itemTracking=0}ngOnInit(){this.initialLoading(),this.setForm(),this.loadTaxCode(),this.loadVenCode(),this.loadCompCode(),this.loadBranchCode(),this.loadVenName(),this.loadPaymentTerm(),this.loadItemCode(),this.loadItemName(),this.loadUnitCode(),this.loadCurrencyCode(),this.loadShipmentCode(),this.loadPurchaseRequest(),this.loadWarehouses(),this.form.patchValue({trantype:"2"}),this.id>0&&this.GRN()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadUser(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadUser(e,a,i,r){this.data=new p.by(this.getData()),this.totalItemsCount=2}loadCompCode(){this.apiService.getall("PurchaseOrder/GetCompSelectList").subscribe(e=>{e&&(this.compCodeList=e)})}loadBranchCode(){this.apiService.getall("PurchaseOrder/GetBranchSelectList").subscribe(e=>{e&&(this.BranchCodeList=e)})}loadTaxCode(){this.apiService.getall("PurchaseOrder/GetTaxSelectList").subscribe(e=>{e&&(this.TaxCodeList=e)})}loadVenCode(){this.apiService.getall("PurchaseOrder/GetVendorCodeSelectList").subscribe(e=>{e&&(this.VenCodeList=e)})}loadVenName(){this.apiService.getall("PurchaseOrder/GetVendorNameSelectList").subscribe(e=>{e&&(this.VenNameList=e)})}loadPaymentTerm(){this.apiService.getall("PurchaseOrder/GetPaymentTermSelectList").subscribe(e=>{e&&(this.PaymentTermList=e)})}loadItemCode(){this.apiService.getall("PurchaseOrder/GetItemCodeSelectList").subscribe(e=>{e&&(this.ItemCodeList=e,this.ItemCodeList.forEach(a=>{a.text=a.textTwo+" ("+a.value+")"}))})}loadItemName(){this.apiService.getall("PurchaseOrder/GetItemNameSelectList").subscribe(e=>{e&&(this.ItemNameList=e)})}loadUnitCode(){this.apiService.getall("PurchaseOrder/GetUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadCurrencyCode(){this.apiService.getall("PurchaseOrder/GetCurrencySelectList").subscribe(e=>{e&&(this.CurrencyCodeList=e)})}loadShipmentCode(){this.apiService.getall("PurchaseOrder/GetShipmentSelectList").subscribe(e=>{e&&(this.ShipmentCodeList=e)})}loadUomdata(e){let i=this.tranItemCode+"_"+e.value;i?this.apiService.getall(`PurchaseOrder/ProductUomtPriceItem/${i}`).subscribe(r=>{r&&(this.tranUOMFactor=r.tranItemUomFactor,this.tranItemCost=r.itemAvgcost)}):(this.unitType="",this.description="")}getData(){return[]}setForm(){this.form=this.fb.group({"":["",s.kI.required],compCode:["",s.kI.required],branchCode:["",s.kI.required],tranDate:["",s.kI.required],deliveryDate:["",s.kI.required],invRefNumber:["",s.kI.required],venCatCode:["",s.kI.required],docNumber:["",s.kI.required],taxId:["",s.kI.required],remarks:["",s.kI.required],poNotes:["",s.kI.required],trantype:["",s.kI.required],vendCode:["",s.kI.required],paymentID:["",s.kI.required],taxInclusive:["",s.kI.required],tranCurrencyCode:["",s.kI.required],tranShipMode:["",s.kI.required],whCode:["",s.kI.required],Prcode:["",s.kI.required]})}loadPurchaseRequest(){this.apiService.getall("PurchaseOrder/GetGRNSelectList").subscribe(e=>{e&&(this.PurchaseRequestList=e)})}loadWarehouses(){this.apiService.getall("warehouse/getSelectWarehouseList").subscribe(e=>{e&&(this.warehouseList=e)})}loadList(e,a,i,r,l=""){this.isLoading=!0,this.apiService.getPagination("PurchaseOrder/GetPagedPurchaseOrderList",this.utilService.getQueryString(e,a,i,r)).subscribe(d=>{this.totalItemsCount=0,this.data=new p.by(d.items),this.totalItemsCount=d.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,this.isLoading=!1},d=>this.utilService.ShowApiErrorMessage(d))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("PurchaseOrder",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,V.a).afterClosed().subscribe(i=>{i&&e>0&&this.apiService.delete("PurchaseOrder",e).subscribe(r=>{this.refresh(),this.utilService.OkMessage()})},i=>this.utilService.ShowApiErrorMessage(i))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(r=>{r&&this.form.controls.taxIdNumber.setValue(r.vatNumber)})}loadBranchs(e){let a=e.target.value;a&&this.apiService.getall(`branch/getSelectSysBranchListByComId/${a}`).subscribe(i=>{i&&(this.branchList=i)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let a=e.value;a?this.apiService.getall(`product/productUnitPriceItem/${a}`).subscribe(r=>{r&&(this.product=r.nameEN,this.unitType=r.unitTypeEN,this.description=r.description,this.price=r.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.tranTotCost>0&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnitCode:this.tranItemUnitCode,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0,receivingQty:this.receivingQty,balQty:this.balQty,receivedQty:this.receivedQty}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let a=this.listOfInvoices.findIndex(i=>i.sequence===e);this.listOfInvoices.splice(a,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnitCode=e.tranItemUnitCode,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking,this.receivingQty=e.receivingQty,this.balQty=e.balQty,this.receivedQty=e.receivedQty}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,0==this.form.value.taxInclusive&&this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandInvoiceTotal+=e.tranTotCost+e.taxAmount}),1==this.form.value.taxInclusive&&this.listOfInvoices.forEach(e=>{this.grandInvoiceTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandTotal+=e.tranTotCost-e.taxAmount}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(3),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(3),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(3)}closeModel(){this.ngOnInit(),this.listOfInvoices=[],this.dialogRef.close()}setToDefault(){this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0,this.receivingQty=0,this.balQty=0,this.receivedQty=0}calculate(){var i=parseFloat((this.receivingQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(i.toString())}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=parseFloat(this.itemTaxPer.toString());parseFloat(this.discPer)>100&&(this.discPer="0");var a=parseFloat(this.discPer),l=parseFloat((this.tranItemQty*this.tranItemCost).toString()),d=parseFloat((l*a/100).toFixed(2));l=parseFloat((l-d).toString()),this.discAmt=d,this.tranTotCost=parseFloat(l.toString()),parseFloat(this.itemTaxPer),""!=this.form.value.taxInclusive?"0"==this.form.value.taxInclusive?(this.taxAmount=0,this.itemTaxPer="0"):this.taxAmount=parseFloat((l*e/100).toFixed(2)):(this.taxAmount=0,this.itemTaxPer="0"),this.tranTotCost=parseFloat(this.taxAmount.toString())+parseFloat(l.toString())}}calculatetaxAmount(){if(""!=this.form.value.taxInclusive&&"1"==this.form.value.taxInclusive){var e=this.tranTotCost,a=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*a/100).toFixed(2))}else this.taxAmount=0,this.itemTaxPer="0"}submit(){this.id>0&&(this.form.value.id=this.id),this.form.value.vendCode=this.form.value.venCatCode,this.form.value.purchaseOrderNO=this.form.value.Prcode,this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.grandTotal=0,this.DiscPerc=0,this.discAmt=0,this.grandVatTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.DiscPerc+=parseFloat(e.discPer),this.discAmt+=e.discAmt}),this.form.value.tranTotalCost=this.grandTotal,this.form.value.taxes=this.grandVatTotal,this.form.value.tranDiscPer=this.DiscPerc,this.form.value.tranDiscAmount=this.discAmt,this.apiService.post("PurchaseOrder/CreateGRN",this.form.value).subscribe(e=>{this.reset(),this.dialogRef.close(!0),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}loadTaxdata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${a}`).subscribe(i=>{i&&(this.itemTaxPer=i[0].itemTaxperc,this.tranItemName=i[0].shortName),this.loadUomList(a)})}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(i=>{i&&(this.UOMList=i)})}loadVendata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${a}`).subscribe(i=>{i&&(this.form.patchValue({vendCode:`${i.vendName}`}),this.form.patchValue({paymentID:`${i.poTermsCode}`}))})}reset(){this.form.reset(),this.listOfInvoices=[],this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr=""}GRN(){this.listOfInvoices=[],this.apiService.getall(`PurchaseOrder/GRNDetails/${this.id}`).subscribe(e=>{e&&(this.isReadOnly=!0,this.form.patchValue(e),this.form.patchValue({tranDate:`${e.tranDate.split("T")[0]}`}),this.form.patchValue({deliveryDate:`${e.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${e.compCode}`}),this.form.patchValue({tranCurrencyCode:`${e.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${e.poNotes}`}),e.itemList.forEach(i=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:i.tranItemCode,tranItemName:i.tranItemName,tranItemName2:i.tranItemName2,tranItemQty:i.tranItemQty,tranItemUnitCode:i.tranItemUnitCode,tranUOMFactor:i.tranUOMFactor,tranItemCost:i.tranItemCost,tranTotCost:i.tranTotCost,discPer:i.discPer,discAmt:i.discAmt,itemTax:i.itemTax,itemTaxPer:i.itemTaxPer,taxAmount:i.taxAmount,itemTracking:i.itemTracking,receivingQty:i.receivingQty,balQty:i.balQty,receivedQty:i.receivedQty})}),this.setGrandTotal(),this.id=e.id)})}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}approvePurchaseOrder(e){this.openApprovalDialog(e.branchCode,e.purchaseOrderNO,_.Oi.create,"Purchase_Order","Save","PO",j.$)}openApprovalDialog(e,a,i,r,l,d,h){let u=this.openApprovalDialog1(this.dialog,h);u.componentInstance.dbops=i,u.componentInstance.modalTitle=r,u.componentInstance.modalBtnTitle=l,u.componentInstance.serviceType=d,u.componentInstance.serviceCode=a,u.componentInstance.branchCode=e,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}openApprovalDialog1(e,a){return e.open(a,{disableClose:!0})}AccountPosting(e){this.apiService.getall(`PurchaseOrder/AccountsPosting/${e}`).subscribe(a=>{a&&(this.utilService.OkMessage(),this.refresh())})}loadGRNdata(e){this.apiService.getall(`PurchaseOrder/GetGRNList/${e.value}`).subscribe(i=>{i&&(this.setToDefault(),this.isReadOnly=!0,this.form.patchValue(i),this.form.patchValue({tranDate:`${i.tranDate.split("T")[0]}`}),this.form.patchValue({deliveryDate:`${i.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${i.compCode}`}),this.form.patchValue({tranCurrencyCode:`${i.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${i.poNotes}`}),this.listOfInvoices=[],i.itemList.forEach(l=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:l.tranItemCode,tranItemName:l.tranItemName,tranItemName2:l.tranItemName2,tranItemQty:l.tranItemQty,tranItemUnitCode:l.tranItemUnitCode,tranUOMFactor:l.tranUOMFactor,tranItemCost:l.tranItemCost,tranTotCost:l.tranTotCost,discPer:l.discPer,discAmt:l.discAmt,itemTax:l.itemTax,itemTaxPer:l.itemTaxPer,taxAmount:l.taxAmount,itemTracking:l.itemTracking,receivingQty:0,balQty:l.balQty,receivedQty:0})}),this.setGrandTotal())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(Z.so),t.Y36(A.g),t.Y36(b.R),t.Y36(v.N),t.Y36(Z.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-addupdatemultiplegrn"]],viewQuery:function(e,a){if(1&e&&(t.Gf(U.NW,7),t.Gf(T.YE,7)),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},decls:314,vars:287,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"col-md-6","col-lg-6"],[1,"form-group",2,"padding-left","1235px"],[1,"mr-sm-2"],["bindLabel","text","bindValue","value","formControlName","Prcode",2,"width","200px",3,"items","change"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["bindLabel","text","bindValue","value","formControlName","compCode",2,"width","250px",3,"items"],[3,"control"],["bindLabel","text","bindValue","value","formControlName","whCode",3,"items"],["bindLabel","text","bindValue","value","formControlName","branchCode",3,"items"],["formControlName","trantype",1,"custom-select","mr-sm-2"],["value",""],["value","2"],["bindLabel","text","bindValue","value","formControlName","venCatCode",3,"items","change"],["type","date","formControlName","tranDate",1,"form-control",3,"placeholder"],["type","date","formControlName","deliveryDate",1,"form-control",3,"placeholder"],["type","text","formControlName","invRefNumber",1,"form-control",3,"placeholder"],["type","text","readonly","","formControlName","vendCode",1,"form-control",3,"placeholder"],["type","text","formControlName","docNumber",1,"form-control",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","paymentID",3,"items"],["id","taxid","formControlName","taxInclusive",1,"custom-select","mr-sm-2"],["value","1"],["value","0"],["bindLabel","text","bindValue","value","formControlName","taxId",3,"items"],["bindLabel","text","bindValue","value","formControlName","tranCurrencyCode",3,"items"],["bindLabel","text","bindValue","value","formControlName","tranShipMode",3,"items"],["formControlName","remarks",1,"form-control",3,"placeholder"],["formControlName","poNotes",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["width","18%"],["width","8%"],["width","11%"],["bindLabel","text","bindValue","value",2,"width","250px",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],["bindLabel","text","bindValue","value","readonly","",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["type","text","placeholder","{{'receivingqty | translate}}",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"click"],[1,"icon-plus"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","6","rowspan","5"],[1,"text-right","bgcolor"],[1,"bgcolor"],[1,"text-right","bgcolor_bottom"],[1,"bgcolor_bottom"],[1,"row"],[1,"col-lg-12","col-md-12","text-center"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"disabled","value"],[1,"text-right"],[1,"text-center"],[1,"icon-note","cpointer",3,"click"],[1,"icon-trash","cpointer",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return a.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return a.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"label",4),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"ng-select",5),t.NdJ("change",function(r){return a.loadGRNdata(r)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.TgZ(13,"div",7),t.TgZ(14,"div",8),t.TgZ(15,"div",7),t.TgZ(16,"div",9),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"label",4),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"ng-select",13),t._UZ(24,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"div",12),t.TgZ(27,"label",4),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"ng-select",15),t._UZ(31,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(32,"div",11),t.TgZ(33,"div",12),t.TgZ(34,"label",4),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"ng-select",16),t._UZ(38,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(39,"div",11),t.TgZ(40,"div",12),t.TgZ(41,"label",4),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"select",17),t.TgZ(45,"option",18),t._uU(46,"Choose TranType Code"),t.qZA(),t.ynx(47),t.TgZ(48,"option",19),t._uU(49,"Purchase Order"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",11),t.TgZ(51,"div",12),t.TgZ(52,"label",4),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"ng-select",20),t.NdJ("change",function(r){return a.loadVendata(r)}),t.qZA(),t._UZ(56,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(57,"div",11),t.TgZ(58,"div",12),t.TgZ(59,"label",4),t._uU(60),t.ALo(61,"translate"),t.qZA(),t._UZ(62,"input",21),t.ALo(63,"translate"),t.ALo(64,"translate"),t.qZA(),t.qZA(),t.TgZ(65,"div",11),t.TgZ(66,"div",12),t.TgZ(67,"label",4),t._uU(68),t.ALo(69,"translate"),t.qZA(),t._UZ(70,"input",22),t.ALo(71,"translate"),t.ALo(72,"translate"),t.qZA(),t.qZA(),t.TgZ(73,"div",11),t.TgZ(74,"div",12),t.TgZ(75,"label",4),t._uU(76),t.ALo(77,"translate"),t.qZA(),t._UZ(78,"input",23),t.ALo(79,"translate"),t.ALo(80,"translate"),t.qZA(),t.qZA(),t.TgZ(81,"div",11),t.TgZ(82,"div",12),t.TgZ(83,"label",4),t._uU(84),t.ALo(85,"translate"),t.qZA(),t._UZ(86,"input",24),t.ALo(87,"translate"),t.ALo(88,"translate"),t._UZ(89,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(90,"div",11),t.TgZ(91,"div",12),t.TgZ(92,"label",4),t._uU(93),t.ALo(94,"translate"),t.qZA(),t._UZ(95,"input",25),t.ALo(96,"translate"),t.ALo(97,"translate"),t.qZA(),t.qZA(),t.TgZ(98,"div",11),t.TgZ(99,"div",12),t.TgZ(100,"label",4),t._uU(101),t.ALo(102,"translate"),t.qZA(),t._UZ(103,"ng-select",26),t._UZ(104,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(105,"div",11),t.TgZ(106,"div",12),t.TgZ(107,"label",4),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.TgZ(110,"select",27),t.TgZ(111,"option",18),t._uU(112,"Choose Tax Code"),t.qZA(),t.ynx(113),t.TgZ(114,"option",28),t._uU(115,"Yes"),t.qZA(),t.TgZ(116,"option",29),t._uU(117,"NO"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(118,"div",11),t.TgZ(119,"div",12),t.TgZ(120,"label",4),t._uU(121),t.ALo(122,"translate"),t.qZA(),t._UZ(123,"ng-select",30),t._UZ(124,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(125,"div",11),t.TgZ(126,"div",12),t.TgZ(127,"label",4),t._uU(128),t.ALo(129,"translate"),t.qZA(),t._UZ(130,"ng-select",31),t._UZ(131,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(132,"div",11),t.TgZ(133,"div",12),t.TgZ(134,"label",4),t._uU(135),t.ALo(136,"translate"),t.qZA(),t._UZ(137,"ng-select",32),t._UZ(138,"validation-message",14),t.qZA(),t.qZA(),t.TgZ(139,"div",2),t.TgZ(140,"div",12),t.TgZ(141,"label",4),t._uU(142),t.ALo(143,"translate"),t.qZA(),t._UZ(144,"textarea",33),t.ALo(145,"translate"),t.ALo(146,"translate"),t.qZA(),t.qZA(),t.TgZ(147,"div",2),t.TgZ(148,"div",12),t.TgZ(149,"label",4),t._uU(150),t.ALo(151,"translate"),t.qZA(),t._UZ(152,"textarea",34),t.ALo(153,"translate"),t.ALo(154,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(155,"div",35),t.TgZ(156,"table",36),t.TgZ(157,"thead"),t.TgZ(158,"tr"),t.TgZ(159,"th",37),t._uU(160),t.ALo(161,"translate"),t.qZA(),t.TgZ(162,"th",37),t._uU(163),t.ALo(164,"translate"),t.qZA(),t.TgZ(165,"th"),t._uU(166),t.ALo(167,"translate"),t.qZA(),t.TgZ(168,"th",38),t._uU(169),t.ALo(170,"translate"),t.qZA(),t.TgZ(171,"th",39),t._uU(172),t.ALo(173,"translate"),t.qZA(),t.TgZ(174,"th"),t._uU(175),t.ALo(176,"translate"),t.qZA(),t.TgZ(177,"th"),t._uU(178),t.ALo(179,"translate"),t.qZA(),t.TgZ(180,"th"),t._uU(181),t.ALo(182,"translate"),t.qZA(),t.TgZ(183,"th"),t._uU(184),t.ALo(185,"translate"),t.qZA(),t.TgZ(186,"th"),t._uU(187),t.ALo(188,"translate"),t.qZA(),t.TgZ(189,"th"),t._uU(190),t.ALo(191,"translate"),t.qZA(),t.TgZ(192,"th"),t._uU(193),t.ALo(194,"translate"),t.qZA(),t.TgZ(195,"th"),t._uU(196),t.ALo(197,"translate"),t.qZA(),t._UZ(198,"th"),t.qZA(),t.qZA(),t.TgZ(199,"tbody"),t.TgZ(200,"tr"),t.TgZ(201,"td"),t.TgZ(202,"ng-select",40),t.NdJ("ngModelChange",function(r){return a.tranItemCode=r})("change",function(r){return a.loadTaxdata(r)}),t.qZA(),t.qZA(),t.TgZ(203,"td"),t.TgZ(204,"input",41),t.NdJ("ngModelChange",function(r){return a.tranItemName=r}),t.ALo(205,"translate"),t.qZA(),t.qZA(),t.TgZ(206,"td"),t.TgZ(207,"ng-select",42),t.NdJ("ngModelChange",function(r){return a.tranItemUnitCode=r})("change",function(r){return a.loadUomdata(r)}),t.qZA(),t.qZA(),t.TgZ(208,"td"),t.TgZ(209,"input",41),t.NdJ("ngModelChange",function(r){return a.tranUOMFactor=r}),t.ALo(210,"translate"),t.qZA(),t.qZA(),t.TgZ(211,"td"),t.TgZ(212,"input",41),t.NdJ("ngModelChange",function(r){return a.tranItemCost=r}),t.ALo(213,"translate"),t.qZA(),t.qZA(),t.TgZ(214,"td"),t.TgZ(215,"input",41),t.NdJ("ngModelChange",function(r){return a.tranItemQty=r}),t.ALo(216,"translate"),t.qZA(),t.qZA(),t.TgZ(217,"td"),t.TgZ(218,"input",41),t.NdJ("ngModelChange",function(r){return a.tranTotCost=r}),t.ALo(219,"translate"),t.qZA(),t.qZA(),t.TgZ(220,"td"),t.TgZ(221,"input",41),t.NdJ("ngModelChange",function(r){return a.discPer=r}),t.ALo(222,"translate"),t.qZA(),t.qZA(),t.TgZ(223,"td"),t.TgZ(224,"input",41),t.NdJ("ngModelChange",function(r){return a.discAmt=r}),t.ALo(225,"translate"),t.qZA(),t.qZA(),t.TgZ(226,"td"),t.TgZ(227,"input",41),t.NdJ("ngModelChange",function(r){return a.itemTaxPer=r}),t.ALo(228,"translate"),t.qZA(),t.qZA(),t.TgZ(229,"td"),t.TgZ(230,"input",41),t.NdJ("ngModelChange",function(r){return a.taxAmount=r}),t.ALo(231,"translate"),t.qZA(),t.qZA(),t.TgZ(232,"td"),t.TgZ(233,"input",43),t.NdJ("ngModelChange",function(r){return a.receivingQty=r})("change",function(){return a.calculateDis()}),t.qZA(),t.qZA(),t.TgZ(234,"td"),t.TgZ(235,"input",41),t.NdJ("ngModelChange",function(r){return a.balQty=r}),t.ALo(236,"translate"),t.qZA(),t.qZA(),t.TgZ(237,"td"),t.TgZ(238,"button",44),t.NdJ("click",function(){return a.addInvoice()}),t._UZ(239,"i",45),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(240,"thead"),t.TgZ(241,"tr"),t.TgZ(242,"th"),t._uU(243),t.ALo(244,"translate"),t.qZA(),t.TgZ(245,"th"),t._uU(246),t.ALo(247,"translate"),t.qZA(),t.TgZ(248,"th"),t._uU(249),t.ALo(250,"translate"),t.qZA(),t.TgZ(251,"th"),t._uU(252),t.ALo(253,"translate"),t.qZA(),t.TgZ(254,"th"),t._uU(255),t.ALo(256,"translate"),t.qZA(),t.TgZ(257,"th"),t._uU(258),t.ALo(259,"translate"),t.qZA(),t.TgZ(260,"th"),t._uU(261),t.ALo(262,"translate"),t.qZA(),t.TgZ(263,"th"),t._uU(264),t.ALo(265,"translate"),t.qZA(),t.TgZ(266,"th"),t._uU(267),t.ALo(268,"translate"),t.qZA(),t.TgZ(269,"th"),t._uU(270),t.ALo(271,"translate"),t.qZA(),t.TgZ(272,"th"),t._uU(273),t.ALo(274,"translate"),t.qZA(),t.TgZ(275,"th"),t._uU(276),t.ALo(277,"translate"),t.qZA(),t.TgZ(278,"th"),t._uU(279),t.ALo(280,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(281,"tbody"),t.YNc(282,Ui,32,13,"tr",46),t.qZA(),t.TgZ(283,"tfoot"),t.TgZ(284,"tr",47),t._UZ(285,"td",48),t.TgZ(286,"td",49),t._uU(287),t.ALo(288,"translate"),t.qZA(),t.TgZ(289,"td",49),t._uU(290),t.qZA(),t._UZ(291,"td",50),t.qZA(),t.TgZ(292,"tr",47),t.TgZ(293,"td",49),t._uU(294),t.ALo(295,"translate"),t.qZA(),t.TgZ(296,"td",49),t._uU(297),t.qZA(),t._UZ(298,"td",50),t.qZA(),t.TgZ(299,"tr",47),t.TgZ(300,"td",51),t._uU(301),t.ALo(302,"translate"),t.qZA(),t.TgZ(303,"td",51),t._uU(304),t.qZA(),t._UZ(305,"td",52),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(306,"div",53),t.TgZ(307,"div",54),t.TgZ(308,"button",55),t.NdJ("click",function(){return a.closeModel()}),t._uU(309),t.ALo(310,"translate"),t.qZA(),t._uU(311," \xa0\xa0 "),t._UZ(312,"input",56),t.ALo(313,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,126,"Create_New_Grn")," "),t.xp6(4),t.Q6J("formGroup",a.form),t.xp6(4),t.Oqu(t.lcZ(10,128,"Purchase_Order_Number")),t.xp6(2),t.Q6J("items",a.PurchaseRequestList),t.xp6(10),t.Oqu(t.lcZ(22,130,"Organization")),t.xp6(2),t.Q6J("items",a.compCodeList),t.xp6(1),t.Q6J("control",a.form.controls.compCode),t.xp6(4),t.Oqu(t.lcZ(29,132,"Warehouse")),t.xp6(2),t.Q6J("items",a.warehouseList),t.xp6(1),t.Q6J("control",a.form.controls.whCode),t.xp6(4),t.Oqu(t.lcZ(36,134,"Branch")),t.xp6(2),t.Q6J("items",a.BranchCodeList),t.xp6(1),t.Q6J("control",a.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(43,136,"TranType")),t.xp6(11),t.hij(" ",t.lcZ(54,138,"Vendor_Code")," "),t.xp6(2),t.Q6J("items",a.VenCodeList),t.xp6(1),t.Q6J("control",a.form.controls.venCatCode),t.xp6(4),t.Oqu(t.lcZ(61,140,"Invoice_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(63,142,"Select")," ",t.lcZ(64,144,"Invoice_Date"),""),t.xp6(6),t.Oqu(t.lcZ(69,146,"Delivery_Date")),t.xp6(2),t.hYB("placeholder","",t.lcZ(71,148,"Select")," ",t.lcZ(72,150,"Delivery_Date"),""),t.xp6(6),t.hij(" ",t.lcZ(77,152,"Invoice_Reference_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(79,154,"Please_Enter"),"  ",t.lcZ(80,156,"Invoice_Reference_Number"),""),t.xp6(6),t.hij(" ",t.lcZ(85,158,"Vendor_Name")," "),t.xp6(2),t.hYB("placeholder","",t.lcZ(87,160,"Please_Enter")," ",t.lcZ(88,162,"Vendor_Name"),""),t.xp6(3),t.Q6J("control",a.form.controls.vendCode),t.xp6(4),t.hij(" ",t.lcZ(94,164,"Document_Number")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(96,166,"Please_Enter"),"  ",t.lcZ(97,168,"Category"),""),t.xp6(6),t.Oqu(t.lcZ(102,170,"Payment_Terms")),t.xp6(2),t.Q6J("items",a.PaymentTermList),t.xp6(1),t.Q6J("control",a.form.controls.paymentID),t.xp6(4),t.Oqu(t.lcZ(109,172,"VAT_Inclusive")),t.xp6(13),t.hij(" ",t.lcZ(122,174,"TAX Number")," "),t.xp6(2),t.Q6J("items",a.TaxCodeList),t.xp6(1),t.Q6J("control",a.form.controls.taxId),t.xp6(4),t.hij(" ",t.lcZ(129,176,"Currency")," "),t.xp6(2),t.Q6J("items",a.CurrencyCodeList),t.xp6(1),t.Q6J("control",a.form.controls.tranCurrencyCode),t.xp6(4),t.hij(" ",t.lcZ(136,178,"Shipment Mode")," "),t.xp6(2),t.Q6J("items",a.ShipmentCodeList),t.xp6(1),t.Q6J("control",a.form.controls.tranShipMode),t.xp6(4),t.hij(" ",t.lcZ(143,180,"Remarks")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(145,182,"Please_Enter"),"  ",t.lcZ(146,184,"Remarks"),""),t.xp6(6),t.hij(" ",t.lcZ(151,186,"Invoice_Notes")," "),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(153,188,"Please_Enter"),"  ",t.lcZ(154,190,"Invoice_Notes"),""),t.xp6(8),t.Oqu(t.lcZ(161,192,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(164,194,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(167,196,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(170,198,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(173,200,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(176,202,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(179,204,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(182,206,"Disc Per")),t.xp6(3),t.Oqu(t.lcZ(185,208,"Disc Amt")),t.xp6(3),t.Oqu(t.lcZ(188,210,"Item TaxPer")),t.xp6(3),t.Oqu(t.lcZ(191,212,"Tax Amount")),t.xp6(3),t.Oqu(t.lcZ(194,214,"Receiving Qty")),t.xp6(3),t.Oqu(t.lcZ(197,216,"Bal Qty")),t.xp6(6),t.Q6J("items",a.ItemCodeList)("ngModel",a.tranItemCode)("ngModelOptions",t.DdM(274,F)),t.xp6(2),t.s9C("placeholder",t.lcZ(205,218,"tranItemName")),t.Q6J("ngModel",a.tranItemName)("ngModelOptions",t.DdM(275,F)),t.xp6(3),t.Q6J("items",a.UOMList)("ngModel",a.tranItemUnitCode)("ngModelOptions",t.DdM(276,F)),t.xp6(2),t.s9C("placeholder",t.lcZ(210,220,"tranUOMFactor")),t.Q6J("ngModel",a.tranUOMFactor)("ngModelOptions",t.DdM(277,F)),t.xp6(3),t.s9C("placeholder",t.lcZ(213,222,"tranItemCost")),t.Q6J("ngModel",a.tranItemCost)("ngModelOptions",t.DdM(278,F)),t.xp6(3),t.s9C("placeholder",t.lcZ(216,224,"Quantity")),t.Q6J("ngModel",a.tranItemQty)("ngModelOptions",t.DdM(279,F)),t.xp6(3),t.s9C("placeholder",t.lcZ(219,226,"tranTotCost")),t.Q6J("ngModel",a.tranTotCost)("ngModelOptions",t.DdM(280,F)),t.xp6(3),t.s9C("placeholder",t.lcZ(222,228,"discPer")),t.Q6J("ngModel",a.discPer)("ngModelOptions",t.DdM(281,F)),t.xp6(3),t.s9C("placeholder",t.lcZ(225,230,"discAmt")),t.Q6J("ngModel",a.discAmt)("ngModelOptions",t.DdM(282,F)),t.xp6(3),t.s9C("placeholder",t.lcZ(228,232,"itemTaxPer")),t.Q6J("ngModel",a.itemTaxPer)("ngModelOptions",t.DdM(283,F)),t.xp6(3),t.s9C("placeholder",t.lcZ(231,234,"taxAmount")),t.Q6J("ngModel",a.taxAmount)("ngModelOptions",t.DdM(284,F)),t.xp6(3),t.Q6J("ngModel",a.receivingQty)("ngModelOptions",t.DdM(285,F)),t.xp6(2),t.s9C("placeholder",t.lcZ(236,236,"balqty")),t.Q6J("ngModel",a.balQty)("ngModelOptions",t.DdM(286,F)),t.xp6(8),t.Oqu(t.lcZ(244,238,"Item Code")),t.xp6(3),t.Oqu(t.lcZ(247,240,"Item Name")),t.xp6(3),t.Oqu(t.lcZ(250,242,"Item UnitCode")),t.xp6(3),t.Oqu(t.lcZ(253,244,"UOM Factor")),t.xp6(3),t.Oqu(t.lcZ(256,246,"Item Cost")),t.xp6(3),t.Oqu(t.lcZ(259,248,"Item Qty")),t.xp6(3),t.Oqu(t.lcZ(262,250,"Tot Cost")),t.xp6(3),t.Oqu(t.lcZ(265,252,"Disc Per")),t.xp6(3),t.Oqu(t.lcZ(268,254,"Disc Amt")),t.xp6(3),t.Oqu(t.lcZ(271,256,"Item TaxPer")),t.xp6(3),t.Oqu(t.lcZ(274,258,"Tax Amount")),t.xp6(3),t.Oqu(t.lcZ(277,260,"Receiving Qty")),t.xp6(3),t.Oqu(t.lcZ(280,262,"Bal Qty")),t.xp6(3),t.Q6J("ngForOf",a.listOfInvoices),t.xp6(5),t.Oqu(t.lcZ(288,264,"Total_Amount")),t.xp6(3),t.Oqu(a.grandTotalStr),t.xp6(4),t.Oqu(t.lcZ(295,266,"VAT_Amount")),t.xp6(3),t.Oqu(a.grandVatTotalStr),t.xp6(4),t.Oqu(t.lcZ(302,268,"Invoice_Total")),t.xp6(3),t.Oqu(a.grandInvoiceTotalStr),t.xp6(5),t.hij(" ",t.lcZ(310,270,"Cancel")," "),t.xp6(3),t.s9C("value",t.lcZ(313,272,"Save")),t.Q6J("disabled",a.isshown))},directives:[s._Y,s.JL,s.sg,G.w9,s.JJ,s.u,H.s,s.EJ,s.YN,s.Kr,s.Fj,s.On,c.sg],pipes:[x.X$],encapsulation:2}),o})();function Ii(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Pr_Num")," "))}function Li(o,n){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.purchaseOrderNO)}}function yi(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Date")," "))}function Oi(o,n){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.tranDate,"dd/MM/yyyy"))}}function Ni(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Doc_Num")," "))}function Si(o,n){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.invRefNumber)}}function Pi(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch")," "))}function Mi(o,n){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function wi(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vendor_Code")," "))}function Di(o,n){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.vendCode)}}function Qi(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Amount")," "))}function ki(o,n){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.tranTotalCost)}}function Ji(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Payment_Terms")," "))}function Fi(o,n){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.paymentID)}}function Vi(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reference")," "))}function Ri(o,n){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.taxId)}}function Yi(o,n){1&o&&(t.TgZ(0,"th",49),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Item")," "))}function Bi(o,n){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.itemNames)}}function Ei(o,n){1&o&&(t.TgZ(0,"th",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function $i(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",53),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().edit(i.id)}),t.ALo(1,"translate"),t._UZ(2,"i",58),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.s9C("id","edit_"+e.id),t.s9C("matTooltip",t.lcZ(1,2,"Edit_Item"))}}function ji(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",59),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.oxw().delete(i.id)}),t.ALo(1,"translate"),t._UZ(2,"i",60),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Delete_Item"))}function Gi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",62),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().approvePurchaseOrder(i)}),t.ALo(1,"translate"),t._UZ(2,"i",63),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Approve_Item"))}function Hi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"a",62),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.oxw().AccountPosting(i.id)}),t.ALo(1,"translate"),t._UZ(2,"i",64),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"Posting_Item"))}function Wi(o,n){if(1&o&&(t.ynx(0),t.YNc(1,Gi,3,3,"a",61),t._uU(2," \xa0 "),t.YNc(3,Hi,3,3,"a",61),t._uU(4," \xa0 "),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.approvedUser),t.xp6(2),t.Q6J("ngIf",e.canSettle&&!e.isSettled)}}function zi(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",50),t.YNc(1,$i,3,4,"a",52),t._uU(2," \xa0 "),t.TgZ(3,"a",53),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().view(r.id)}),t.ALo(4,"translate"),t._UZ(5,"i",54),t.qZA(),t._uU(6," \xa0 "),t.TgZ(7,"a",53),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw().printing(r.id)}),t.ALo(8,"translate"),t._UZ(9,"i",55),t.qZA(),t._uU(10," \xa0 "),t.YNc(11,ji,3,3,"a",56),t.YNc(12,Wi,5,2,"ng-container",57),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved&&!e.isSettled),t.xp6(2),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(4,7,"View_Details")),t.xp6(4),t.s9C("id","view_"+e.id),t.s9C("matTooltip",t.lcZ(8,9,"Print_Preview")),t.xp6(4),t.Q6J("ngIf",!e.isSettled&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.hasAuthority)}}function Xi(o,n){1&o&&t._UZ(0,"tr",65)}function Ki(o,n){1&o&&t._UZ(0,"tr",66)}function eo(o,n){if(1&o&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.value," ")}}function ao(o,n){if(1&o&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" (",e.value,") ",e.textTwo," ")}}function io(o,n){if(1&o&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" (",e.value,") ",e.text," ")}}function oo(o,n){if(1&o&&t._UZ(0,"img",52),2&o){const e=t.oxw(2);t.s9C("src",e.logoURL,t.LSH)}}function ro(o,n){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE(' The Statement of " Purchase Order Summary List " for ',t.xi3(2,2,e.dateFrom,"dd/MM/yyyy")," to ",t.xi3(3,5,e.dateTo,"dd/MM/yyyy")," ")}}function no(o,n){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE(' The Statement of " Purchase Request Summary List " for ',t.xi3(2,2,e.dateFrom,"dd/MM/yyyy")," to ",t.xi3(3,5,e.dateTo,"dd/MM/yyyy")," ")}}function so(o,n){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE(' The Statement of " Purchase GRN Summary List " for ',t.xi3(2,2,e.dateFrom,"dd/MM/yyyy")," to ",t.xi3(3,5,e.dateTo,"dd/MM/yyyy")," ")}}function lo(o,n){if(1&o&&(t.TgZ(0,"div",40),t.TgZ(1,"div",53),t.YNc(2,ro,4,8,"p",54),t.YNc(3,no,4,8,"p",55),t.YNc(4,so,4,8,"p",55),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngSwitch",e.orderType),t.xp6(2),t.Q6J("ngSwitchCase","pr"),t.xp6(1),t.Q6J("ngSwitchCase","grn")}}function co(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",56),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"td",57),t._uU(17),t.ALo(18,"decimalpipe"),t.qZA(),t.TgZ(19,"td",57),t._uU(20,"0.00"),t.qZA(),t.TgZ(21,"td",57),t._uU(22),t.ALo(23,"decimalpipe"),t.qZA(),t.TgZ(24,"td",57),t._uU(25),t.ALo(26,"decimalpipe"),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.vendCode),t.xp6(2),t.Oqu(e.vendName),t.xp6(2),t.Oqu(e.invoiceNumber),t.xp6(2),t.Oqu(t.xi3(9,10,e.tranDate,"dd-MM-yyyy")),t.xp6(3),t.Oqu(e.trantype),t.xp6(2),t.Oqu(e.docNum),t.xp6(2),t.Oqu(e.remarks),t.xp6(2),t.Oqu(t.lcZ(18,13,e.drAmount)),t.xp6(5),t.Oqu(t.lcZ(23,15,e.crAmount)),t.xp6(3),t.Oqu(t.lcZ(26,17,e.balance))}}function uo(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",37),t.TgZ(1,"div",38),t.TgZ(2,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"div",39),t.TgZ(7,"div",40),t._uU(8),t.YNc(9,oo,1,1,"img",41),t._UZ(10,"br"),t._uU(11),t._UZ(12,"br"),t._uU(13),t.qZA(),t._UZ(14,"br"),t.YNc(15,lo,5,3,"div",42),t.TgZ(16,"div",43),t._UZ(17,"spinner-loader",15),t.TgZ(18,"table",44),t.TgZ(19,"tr"),t.TgZ(20,"th",45),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th",46),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",46),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th",46),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"th",46),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.qZA(),t.YNc(53,co,27,19,"tr",47),t.TgZ(54,"tr"),t.TgZ(55,"td",48),t.TgZ(56,"strong"),t._uU(57,"P.O Total"),t.qZA(),t.qZA(),t.TgZ(58,"td",49),t.TgZ(59,"strong"),t._uU(60),t.ALo(61,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(62,"td",49),t.TgZ(63,"strong"),t._uU(64),t.ALo(65,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(66,"td",49),t.TgZ(67,"strong"),t._uU(68),t.ALo(69,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(70,"td",49),t.TgZ(71,"strong"),t._uU(72),t.ALo(73,"decimalpipe"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(74,"tr"),t.TgZ(75,"td",48),t._uU(76," Summary Of Transaction "),t.qZA(),t.TgZ(77,"td",50),t._uU(78," Total Amount "),t.qZA(),t._UZ(79,"td",51),t.qZA(),t.TgZ(80,"tr"),t.TgZ(81,"td",48),t._uU(82," Total Purchases "),t.qZA(),t.TgZ(83,"td",50),t._uU(84),t.ALo(85,"decimalpipe"),t.qZA(),t._UZ(86,"td",51),t.qZA(),t.TgZ(87,"tr"),t.TgZ(88,"td",48),t._uU(89," Total Tax "),t.qZA(),t.TgZ(90,"td",50),t._uU(91),t.ALo(92,"decimalpipe"),t.qZA(),t._UZ(93,"td",51),t.qZA(),t.TgZ(94,"tr"),t.TgZ(95,"td",48),t._uU(96,"Total With Tax "),t.qZA(),t.TgZ(97,"td",50),t._uU(98),t.ALo(99,"decimalpipe"),t.qZA(),t._UZ(100,"td",51),t.qZA(),t.TgZ(101,"tr"),t.TgZ(102,"td",48),t._uU(103,"Number of P.O "),t.qZA(),t.TgZ(104,"td",50),t._uU(105),t.qZA(),t._UZ(106,"td",51),t.qZA(),t.TgZ(107,"tr"),t.TgZ(108,"td",48),t._uU(109,"Average Purchase (Total/Num of P.O) "),t.qZA(),t.TgZ(110,"td",50),t._uU(111),t.ALo(112,"decimalpipe"),t.qZA(),t._UZ(113,"td",51),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,28,"Print")," "),t.xp6(5),t.hij(" ",e.companyName," "),t.xp6(1),t.Q6J("ngIf",e.companyName),t.xp6(2),t.hij(" ",e.branchName," "),t.xp6(2),t.hij(" ",e.companyAddress," "),t.xp6(2),t.Q6J("ngIf",e.dateFrom&&e.dateTo),t.xp6(2),t.Q6J("isLoading",e.isLoading),t.xp6(4),t.Oqu(t.lcZ(22,30,"Vendor_Code")),t.xp6(3),t.Oqu(t.lcZ(25,32,"Vendor_Name")),t.xp6(3),t.Oqu(t.lcZ(28,34,"PO_Nubmer")),t.xp6(3),t.Oqu(t.lcZ(31,36,"PO_Date")),t.xp6(3),t.hij("",t.lcZ(34,38,"Trantype")," "),t.xp6(3),t.Oqu(t.lcZ(37,40,"DocNum")),t.xp6(3),t.hij("",t.lcZ(40,42,"Reference_Number")," "),t.xp6(3),t.Oqu(t.lcZ(43,44,"PO_Total")),t.xp6(3),t.Oqu(t.lcZ(46,46,"Discount")),t.xp6(3),t.hij("",t.lcZ(49,48,"Tax_Amount")," "),t.xp6(3),t.Oqu(t.lcZ(52,50,"Net_Total")),t.xp6(2),t.Q6J("ngForOf",e.vendorList),t.xp6(7),t.Oqu(t.lcZ(61,52,e.tranTotalCost)),t.xp6(4),t.Oqu(t.lcZ(65,54,e.tranDiscAmount)),t.xp6(4),t.Oqu(t.lcZ(69,56,e.taxes)),t.xp6(4),t.Oqu(t.lcZ(73,58,e.totalBalance)),t.xp6(12),t.hij(" ",t.lcZ(85,60,e.tranTotalCost)," "),t.xp6(7),t.hij(" ",t.lcZ(92,62,e.taxes)," "),t.xp6(7),t.hij("",t.lcZ(99,64,e.totalBalance)," "),t.xp6(7),t.hij("",e.vendorList.length," "),t.xp6(6),t.hij("",t.lcZ(112,66,e.totalBalance/e.vendorList.length)," ")}}function po(o,n){1&o&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"No_Records")))}function mo(o,n){if(1&o&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.value," ")}}function go(o,n){if(1&o&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" (",e.value,") ",e.textTwo," ")}}function Zo(o,n){if(1&o&&t._UZ(0,"img",44),2&o){const e=t.oxw(2);t.s9C("src",e.logoURL,t.LSH)}}function _o(o,n){if(1&o&&(t.TgZ(0,"div",32),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"date"),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.AsE(" Vendor Purchase Summary List from date ",t.xi3(3,3,e.dateFrom,"dd/MM/yyyy")," to ",t.xi3(4,6,e.dateTo,"dd/MM/yyyy")," "),t.xp6(4),t.hij(" Branch Code ",e.branchName," ")}}function Ao(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",45),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",46),t._uU(6),t.qZA(),t.TgZ(7,"td",46),t._uU(8),t.ALo(9,"decimalpipe"),t.qZA(),t.TgZ(10,"td",46),t._uU(11),t.ALo(12,"decimalpipe"),t.qZA(),t.TgZ(13,"td",46),t._uU(14),t.ALo(15,"decimalpipe"),t.qZA(),t.TgZ(16,"td",46),t._uU(17),t.ALo(18,"decimalpipe"),t.qZA(),t.TgZ(19,"td",46),t._uU(20),t.ALo(21,"decimalpipe"),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.vendCode),t.xp6(2),t.Oqu(e.vendName),t.xp6(2),t.Oqu(e.docNumber),t.xp6(2),t.Oqu(t.lcZ(9,8,e.drAmount)),t.xp6(3),t.Oqu(t.lcZ(12,10,e.openingBalance)),t.xp6(3),t.Oqu(t.lcZ(15,12,e.balance)),t.xp6(3),t.Oqu(t.lcZ(18,14,e.crAmount)),t.xp6(3),t.Oqu(t.lcZ(21,16,e.remarks))}}function To(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",29),t.TgZ(1,"div",30),t.TgZ(2,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"div",31),t.TgZ(7,"div",32),t._uU(8),t.YNc(9,Zo,1,1,"img",33),t._UZ(10,"br"),t._uU(11),t._UZ(12,"br"),t._uU(13),t.qZA(),t._UZ(14,"br"),t.YNc(15,_o,7,9,"div",34),t.TgZ(16,"div",35),t._UZ(17,"spinner-loader",10),t.TgZ(18,"table",36),t.TgZ(19,"tr"),t.TgZ(20,"th",37),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.YNc(44,Ao,22,18,"tr",38),t.TgZ(45,"tr"),t.TgZ(46,"td",39),t.TgZ(47,"strong"),t._uU(48,"P.O Total"),t.qZA(),t.qZA(),t.TgZ(49,"td",40),t.TgZ(50,"strong"),t._uU(51),t.ALo(52,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(53,"td",40),t.TgZ(54,"strong"),t._uU(55),t.ALo(56,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(57,"td",40),t.TgZ(58,"strong"),t._uU(59),t.ALo(60,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(61,"td",40),t.TgZ(62,"strong"),t._uU(63),t.ALo(64,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(65,"td",40),t.TgZ(66,"strong"),t._uU(67),t.ALo(68,"decimalpipe"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(69,"tr"),t.TgZ(70,"td",41),t._uU(71," Summary Of Transaction "),t.qZA(),t.TgZ(72,"td",42),t._uU(73," Total Amount "),t.qZA(),t._UZ(74,"td",43),t.qZA(),t.TgZ(75,"tr"),t.TgZ(76,"td",41),t._uU(77," Total Purchases "),t.qZA(),t.TgZ(78,"td",42),t._uU(79),t.ALo(80,"decimalpipe"),t.qZA(),t._UZ(81,"td",43),t.qZA(),t.TgZ(82,"tr"),t.TgZ(83,"td",41),t._uU(84," Total Tax "),t.qZA(),t.TgZ(85,"td",42),t._uU(86),t.ALo(87,"decimalpipe"),t.qZA(),t._UZ(88,"td",43),t.qZA(),t.TgZ(89,"tr"),t.TgZ(90,"td",41),t._uU(91,"Total With Tax "),t.qZA(),t.TgZ(92,"td",42),t._uU(93),t.ALo(94,"decimalpipe"),t.qZA(),t._UZ(95,"td",43),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,24,"Print")," "),t.xp6(5),t.hij(" ",e.companyName," "),t.xp6(1),t.Q6J("ngIf",e.companyName),t.xp6(2),t.hij(" ",e.branchName," "),t.xp6(2),t.hij(" ",e.companyAddress," "),t.xp6(2),t.Q6J("ngIf",e.dateFrom&&e.dateTo),t.xp6(2),t.Q6J("isLoading",e.isLoading),t.xp6(4),t.Oqu(t.lcZ(22,26,"Vendor_Code")),t.xp6(3),t.Oqu(t.lcZ(25,28,"Vendor_Name")),t.xp6(3),t.Oqu(t.lcZ(28,30,"Num_Of_Inv")),t.xp6(3),t.Oqu(t.lcZ(31,32,"GRN Value")),t.xp6(3),t.Oqu(t.lcZ(34,34,"Discount Value")),t.xp6(3),t.Oqu(t.lcZ(37,36,"Net Value")),t.xp6(3),t.Oqu(t.lcZ(40,38,"VAT")),t.xp6(3),t.Oqu(t.lcZ(43,40,"GRN_Total")),t.xp6(2),t.Q6J("ngForOf",e.vendorList),t.xp6(7),t.Oqu(t.lcZ(52,42,e.tranTotalCost)),t.xp6(4),t.Oqu(t.lcZ(56,44,e.tranDiscAmount)),t.xp6(4),t.Oqu(t.lcZ(60,46,e.totalBalance)),t.xp6(4),t.Oqu(t.lcZ(64,48,e.taxes)),t.xp6(4),t.Oqu(t.lcZ(68,50,e.netTotalBalanceAmount)),t.xp6(12),t.hij(" ",t.lcZ(80,52,e.totalBalance)," "),t.xp6(7),t.hij(" ",t.lcZ(87,54,e.taxes)," "),t.xp6(7),t.hij("",t.lcZ(94,56,e.netTotalBalanceAmount)," ")}}function fo(o,n){1&o&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"No_Records")))}function vo(o,n){if(1&o&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.value," ")}}function qo(o,n){if(1&o&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" (",e.value,") ",e.textTwo," ")}}function xo(o,n){if(1&o&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" (",e.value,") ",e.text," ")}}function bo(o,n){if(1&o&&t._UZ(0,"img",54),2&o){const e=t.oxw(2);t.s9C("src",e.logoURL,t.LSH)}}function Uo(o,n){if(1&o&&(t.TgZ(0,"div",37),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"date"),t.ALo(4,"date"),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.AsE(' The Statement of " Item Purchase History" for ',t.xi3(3,2,e.dateFrom,"dd/MM/yyyy")," to ",t.xi3(4,5,e.dateTo,"dd/MM/yyyy")," ")}}function Io(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",56),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",57),t._uU(6),t.ALo(7,"decimalpipe"),t.qZA(),t.TgZ(8,"td",57),t._uU(9),t.ALo(10,"decimalpipe"),t.qZA(),t.TgZ(11,"td",57),t._uU(12),t.ALo(13,"decimalpipe"),t.qZA(),t.TgZ(14,"td",57),t._uU(15),t.ALo(16,"decimalpipe"),t.qZA(),t.TgZ(17,"td",57),t._uU(18),t.ALo(19,"decimalpipe"),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.vendCode),t.xp6(2),t.Oqu(e.vendName),t.xp6(2),t.Oqu(t.lcZ(7,7,e.trantype)),t.xp6(3),t.Oqu(t.lcZ(10,9,e.drAmount)),t.xp6(3),t.Oqu(t.lcZ(13,11,e.openingBalance)),t.xp6(3),t.Oqu(t.lcZ(16,13,e.crAmount)),t.xp6(3),t.Oqu(t.lcZ(19,15,e.balance))}}function Lo(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",55),t.TgZ(2,"table",50),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"table",50),t.TgZ(9,"tr"),t.TgZ(10,"th",51),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"th"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.YNc(31,Io,20,17,"tr",42),t.qZA(),t._UZ(32,"br"),t._UZ(33,"br"),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(5),t.HOy(" ",t.lcZ(6,12,"Item_Code")," : ",e[0].itemCode,", \xa0 \xa0 ",t.lcZ(7,14,"Item_Short_Name")," : ",e[0].itemName," "),t.xp6(6),t.Oqu(t.lcZ(12,16,"Vendor_Code")),t.xp6(3),t.Oqu(t.lcZ(15,18,"Vendor_Name")),t.xp6(3),t.Oqu(t.lcZ(18,20,"QtyOH")),t.xp6(3),t.Oqu(t.lcZ(21,22,"Item_Avg_Cost")),t.xp6(3),t.Oqu(t.lcZ(24,24,"Discount Value")),t.xp6(3),t.Oqu(t.lcZ(27,26,"VAT")),t.xp6(3),t.Oqu(t.lcZ(30,28,"GRN_Total")),t.xp6(2),t.Q6J("ngForOf",e)}}function yo(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",46),t._uU(6),t.ALo(7,"decimalpipe"),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.text),t.xp6(2),t.Oqu(e.textTwo),t.xp6(2),t.Oqu(t.lcZ(7,3,e.value))}}function Oo(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"div",35),t.TgZ(2,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"div",36),t.TgZ(7,"div",37),t._uU(8),t.YNc(9,bo,1,1,"img",38),t._UZ(10,"br"),t._uU(11),t._UZ(12,"br"),t._uU(13),t.qZA(),t._UZ(14,"br"),t.YNc(15,Uo,5,8,"div",39),t.TgZ(16,"div",40),t.TgZ(17,"table",41),t.TgZ(18,"tbody"),t.YNc(19,Lo,34,30,"tr",42),t.TgZ(20,"tr"),t.TgZ(21,"td",43),t.TgZ(22,"strong"),t._uU(23,"Total Purchases"),t.qZA(),t.qZA(),t.TgZ(24,"td",44),t.TgZ(25,"strong"),t._uU(26),t.ALo(27,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(28,"td",44),t.TgZ(29,"strong"),t._uU(30),t.ALo(31,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(32,"td",44),t.TgZ(33,"strong"),t._uU(34),t.ALo(35,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(36,"td",44),t.TgZ(37,"strong"),t._uU(38),t.ALo(39,"decimalpipe"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td",45),t._uU(42," Summary Of Transaction "),t.qZA(),t.TgZ(43,"td",46),t._uU(44," Total Amount "),t.qZA(),t._UZ(45,"td",47),t.qZA(),t.TgZ(46,"tr"),t.TgZ(47,"td",45),t._uU(48," Total Purchases "),t.qZA(),t.TgZ(49,"td",46),t._uU(50),t.ALo(51,"decimalpipe"),t.qZA(),t._UZ(52,"td",47),t.qZA(),t.TgZ(53,"tr"),t.TgZ(54,"td",45),t._uU(55," Total Tax "),t.qZA(),t.TgZ(56,"td",46),t._uU(57),t.ALo(58,"decimalpipe"),t.qZA(),t._UZ(59,"td",47),t.qZA(),t.TgZ(60,"tr"),t.TgZ(61,"td",45),t._uU(62,"Total With Tax "),t.qZA(),t.TgZ(63,"td",46),t._uU(64),t.ALo(65,"decimalpipe"),t.qZA(),t._UZ(66,"td",47),t.qZA(),t.TgZ(67,"tr"),t.TgZ(68,"td",45),t._uU(69," Total Item Quantity "),t.qZA(),t.TgZ(70,"td",46),t._uU(71),t.ALo(72,"decimalpipe"),t.qZA(),t._UZ(73,"td",47),t.qZA(),t.TgZ(74,"tr"),t._UZ(75,"td",48),t.TgZ(76,"td",49),t.TgZ(77,"h5"),t._uU(78," Break Down By Warehouse"),t.qZA(),t.TgZ(79,"table",50),t.TgZ(80,"tr"),t.TgZ(81,"th",51),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"th"),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"th"),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.qZA(),t.YNc(90,yo,8,5,"tr",42),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(91,"div",52),t.TgZ(92,"mat-paginator",53),t.NdJ("page",function(i){return t.CHM(e),t.oxw().onPageSwitch(i)}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,22,"Print")," "),t.xp6(5),t.hij(" ",e.companyName," "),t.xp6(1),t.Q6J("ngIf",e.companyName),t.xp6(2),t.hij(" ",e.branchName," "),t.xp6(2),t.hij(" ",e.companyAddress," "),t.xp6(2),t.Q6J("ngIf",e.dateFrom&&e.dateTo),t.xp6(4),t.Q6J("ngForOf",e.vendorList),t.xp6(7),t.Oqu(t.lcZ(27,24,e.tranTotalCost)),t.xp6(4),t.Oqu(t.lcZ(31,26,e.tranDiscAmount)),t.xp6(4),t.Oqu(t.lcZ(35,28,e.taxes)),t.xp6(4),t.Oqu(t.lcZ(39,30,e.netTotalBalanceAmount)),t.xp6(12),t.hij(" ",t.lcZ(51,32,e.totalBalance)," "),t.xp6(7),t.hij(" ",t.lcZ(58,34,e.taxes)," "),t.xp6(7),t.hij("",t.lcZ(65,36,e.netTotalBalanceAmount)," "),t.xp6(7),t.hij("",t.lcZ(72,38,e.totalItemQty)," "),t.xp6(11),t.Oqu(t.lcZ(83,40,"Item_Short_Name")),t.xp6(3),t.Oqu(t.lcZ(86,42,"Warehouse")),t.xp6(3),t.Oqu(t.lcZ(89,44,"QtyOH")),t.xp6(2),t.Q6J("ngForOf",e.poItemList),t.xp6(2),t.Q6J("length",e.totalItemsCount)("pageSize",e.pageService.pageCount)("pageSizeOptions",e.pageService.selectItemsPerPage)}}function No(o,n){1&o&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"No_Records")))}function Po(o,n){if(1&o&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.value," ")}}function Mo(o,n){if(1&o&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" (",e.value,") ",e.textTwo," ")}}function wo(o,n){if(1&o&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" (",e.value,") ",e.text," ")}}function Do(o,n){if(1&o&&t._UZ(0,"img",48),2&o){const e=t.oxw(2);t.s9C("src",e.logoURL,t.LSH)}}function Qo(o,n){if(1&o&&(t.TgZ(0,"div",37),t.TgZ(1,"p"),t._uU(2),t.ALo(3,"date"),t.ALo(4,"date"),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.AsE(' The Statement of " Vendor Purchase Summary" for ',t.xi3(3,2,e.dateFrom,"dd/MM/yyyy")," to ",t.xi3(4,5,e.dateTo,"dd/MM/yyyy")," ")}}function ko(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",52),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",53),t._uU(6),t.qZA(),t.TgZ(7,"td",53),t._uU(8),t.ALo(9,"decimalpipe"),t.qZA(),t.TgZ(10,"td",53),t._uU(11),t.ALo(12,"decimalpipe"),t.qZA(),t.TgZ(13,"td",53),t._uU(14),t.ALo(15,"decimalpipe"),t.qZA(),t.TgZ(16,"td",53),t._uU(17),t.ALo(18,"decimalpipe"),t.qZA(),t.TgZ(19,"td",53),t._uU(20),t.ALo(21,"decimalpipe"),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.itemCode),t.xp6(2),t.Oqu(e.itemName),t.xp6(2),t.Oqu(e.remarks),t.xp6(2),t.Oqu(t.lcZ(9,8,e.trantype)),t.xp6(3),t.Oqu(t.lcZ(12,10,e.drAmount)),t.xp6(3),t.Oqu(t.lcZ(15,12,e.openingBalance)),t.xp6(3),t.Oqu(t.lcZ(18,14,e.crAmount)),t.xp6(3),t.Oqu(t.lcZ(21,16,e.balance))}}function Jo(o,n){if(1&o&&(t.TgZ(0,"tr"),t.TgZ(1,"td",49),t.TgZ(2,"table",50),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"table",50),t.TgZ(9,"tr"),t.TgZ(10,"th",51),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"th"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"th"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.YNc(34,ko,22,18,"tr",42),t.qZA(),t._UZ(35,"br"),t._UZ(36,"br"),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(5),t.HOy(" ",t.lcZ(6,13,"Vendor_Code")," : ",e[0].vendCode,", \xa0 \xa0 ",t.lcZ(7,15,"Vendor_Name")," : ",e[0].vendName," "),t.xp6(6),t.Oqu(t.lcZ(12,17,"Item_Code")),t.xp6(3),t.Oqu(t.lcZ(15,19,"Item_Short_Name")),t.xp6(3),t.Oqu(t.lcZ(18,21,"Num_Of_Inv")),t.xp6(3),t.Oqu(t.lcZ(21,23,"QtyOH")),t.xp6(3),t.Oqu(t.lcZ(24,25,"Item_Avg_Cost")),t.xp6(3),t.Oqu(t.lcZ(27,27,"Discount Value")),t.xp6(3),t.Oqu(t.lcZ(30,29,"VAT")),t.xp6(3),t.Oqu(t.lcZ(33,31,"GRN_Total")),t.xp6(2),t.Q6J("ngForOf",e)}}function Fo(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"div",35),t.TgZ(2,"button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"div",36),t.TgZ(7,"div",37),t._uU(8),t.YNc(9,Do,1,1,"img",38),t._UZ(10,"br"),t._uU(11),t._UZ(12,"br"),t._uU(13),t.qZA(),t._UZ(14,"br"),t.YNc(15,Qo,5,8,"div",39),t.TgZ(16,"div",40),t.TgZ(17,"table",41),t.TgZ(18,"tbody"),t.YNc(19,Jo,37,33,"tr",42),t.TgZ(20,"tr"),t.TgZ(21,"td",43),t.TgZ(22,"strong"),t._uU(23,"P.O Total"),t.qZA(),t.qZA(),t.TgZ(24,"td",44),t.TgZ(25,"strong"),t._uU(26),t.ALo(27,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(28,"td",44),t.TgZ(29,"strong"),t._uU(30),t.ALo(31,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(32,"td",44),t.TgZ(33,"strong"),t._uU(34),t.ALo(35,"decimalpipe"),t.qZA(),t.qZA(),t.TgZ(36,"td",44),t.TgZ(37,"strong"),t._uU(38),t.ALo(39,"decimalpipe"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td",45),t._uU(42," Summary Of Transaction "),t.qZA(),t.TgZ(43,"td",46),t._uU(44," Total Amount "),t.qZA(),t._UZ(45,"td",47),t.qZA(),t.TgZ(46,"tr"),t.TgZ(47,"td",45),t._uU(48," Total Purchases "),t.qZA(),t.TgZ(49,"td",46),t._uU(50),t.ALo(51,"decimalpipe"),t.qZA(),t._UZ(52,"td",47),t.qZA(),t.TgZ(53,"tr"),t.TgZ(54,"td",45),t._uU(55," Total Tax "),t.qZA(),t.TgZ(56,"td",46),t._uU(57),t.ALo(58,"decimalpipe"),t.qZA(),t._UZ(59,"td",47),t.qZA(),t.TgZ(60,"tr"),t.TgZ(61,"td",45),t._uU(62,"Total With Tax "),t.qZA(),t.TgZ(63,"td",46),t._uU(64),t.ALo(65,"decimalpipe"),t.qZA(),t._UZ(66,"td",47),t.qZA(),t.TgZ(67,"tr"),t.TgZ(68,"td",45),t._uU(69,"totalItemQty "),t.qZA(),t.TgZ(70,"td",46),t._uU(71),t.ALo(72,"decimalpipe"),t.qZA(),t._UZ(73,"td",47),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,15,"Print")," "),t.xp6(5),t.hij(" ",e.companyName," "),t.xp6(1),t.Q6J("ngIf",e.companyName),t.xp6(2),t.hij(" ",e.branchName," "),t.xp6(2),t.hij(" ",e.companyAddress," "),t.xp6(2),t.Q6J("ngIf",e.dateFrom&&e.dateTo),t.xp6(4),t.Q6J("ngForOf",e.vendorList),t.xp6(7),t.Oqu(t.lcZ(27,17,e.tranTotalCost)),t.xp6(4),t.Oqu(t.lcZ(31,19,e.tranDiscAmount)),t.xp6(4),t.Oqu(t.lcZ(35,21,e.taxes)),t.xp6(4),t.Oqu(t.lcZ(39,23,e.netTotalBalanceAmount)),t.xp6(12),t.hij(" ",t.lcZ(51,25,e.totalBalance)," "),t.xp6(7),t.hij(" ",t.lcZ(58,27,e.taxes)," "),t.xp6(7),t.hij("",t.lcZ(65,29,e.netTotalBalanceAmount)," "),t.xp6(7),t.hij("",t.lcZ(72,31,e.totalItemQty)," ")}}function Vo(o,n){1&o&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"No_Records")))}const Ro=[{path:"purchaserequest",component:We},{path:"purchaseorder",component:Ae},{path:"purchasereturn",component:qa},{path:"purchaseauthorities",component:ja},{path:"Purchaseinvoice",component:Ga},{path:"vendor",component:bi},{path:"Grn",component:(()=>{class o extends O{constructor(e,a,i,r,l,d,h,u,g,L,f){super(l),this.fb=e,this.http=a,this.router=i,this.apiService=r,this.authService=l,this.utilService=d,this.notifyService=h,this.validationService=u,this.pageService=g,this.dialog=L,this.translate=f,this.displayedColumns=["purchaseOrderNO","tranDate","invRefNumber","branchCode","vendCode","amount","paymentID","taxId","itemName","Actions"],this.searchValue="",this.sortingOrder="id desc",this.customerList=[],this.companyList=[],this.paymentTermsList=[],this.branchList=[],this.productList=[],this.vatList=[],this.productId=0,this.quantity=0,this.price=0,this.vat=0,this.vatAmount=0,this.total=0,this.unitType="",this.description="",this.product="",this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr="",this.DiscPerc=0,this.sequence=1,this.editsequence=0,this.listOfInvoices=[],this.canShowNotes=!1,this.canShowRemarks=!1,this.isLoading=!1,this.isReadOnly=!1,this.id=0,this.ShipmentCodeList=[],this.CurrencyCodeList=[],this.TaxCodeList=[],this.VenCodeList=[],this.compCodeList=[],this.BranchCodeList=[],this.VenNameList=[],this.PaymentTermList=[],this.ItemCodeList=[],this.ItemNameList=[],this.UOMList=[],this.PurchaseRequestList=[],this.warehouseList=[],this.ItemTrackingList=[{value:1,text:"Yes"},{value:0,text:"NO"}],this.isshown=!1,this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0}ngOnInit(){this.initialLoading(),this.setForm(),this.loadTaxCode(),this.loadVenCode(),this.loadCompCode(),this.loadBranchCode(),this.loadVenName(),this.loadPaymentTerm(),this.loadItemCode(),this.loadItemName(),this.loadUnitCode(),this.loadCurrencyCode(),this.loadShipmentCode(),this.loadPurchaseRequest(),this.loadWarehouses(),this.form.patchValue({trantype:"2"})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUser(0,this.pageService.pageCount,"",this.sortingOrder)}loadUser(e,a,i,r){this.data=new p.by(this.getData()),this.totalItemsCount=2}loadCompCode(){this.apiService.getall("PurchaseOrder/GetCompSelectList").subscribe(e=>{e&&(this.compCodeList=e)})}loadBranchCode(){this.apiService.getall("PurchaseOrder/GetBranchSelectList").subscribe(e=>{e&&(this.BranchCodeList=e)})}loadTaxCode(){this.apiService.getall("PurchaseOrder/GetTaxSelectList").subscribe(e=>{e&&(this.TaxCodeList=e)})}loadVenCode(){this.apiService.getall("PurchaseOrder/GetVendorCodeSelectList").subscribe(e=>{e&&(this.VenCodeList=e)})}loadVenName(){this.apiService.getall("PurchaseOrder/GetVendorNameSelectList").subscribe(e=>{e&&(this.VenNameList=e)})}loadPaymentTerm(){this.apiService.getall("PurchaseOrder/GetPaymentTermSelectList").subscribe(e=>{e&&(this.PaymentTermList=e)})}loadItemCode(){this.apiService.getall("PurchaseOrder/GetItemCodeSelectList").subscribe(e=>{e&&(this.ItemCodeList=e)})}loadItemName(){this.apiService.getall("PurchaseOrder/GetItemNameSelectList").subscribe(e=>{e&&(this.ItemNameList=e)})}loadUnitCode(){this.apiService.getall("PurchaseOrder/GetUOMSelectList").subscribe(e=>{e&&(this.UOMList=e)})}loadCurrencyCode(){this.apiService.getall("PurchaseOrder/GetCurrencySelectList").subscribe(e=>{e&&(this.CurrencyCodeList=e)})}loadShipmentCode(){this.apiService.getall("PurchaseOrder/GetShipmentSelectList").subscribe(e=>{e&&(this.ShipmentCodeList=e)})}loadUomdata(e){let i=this.tranItemCode+"_"+e.value;i?this.apiService.getall(`PurchaseOrder/ProductUomtPriceItem/${i}`).subscribe(r=>{r&&(this.tranUOMFactor=r.tranItemUomFactor,this.tranItemCost=r.itemAvgcost)}):(this.unitType="",this.description="")}getData(){return[]}setForm(){this.form=this.fb.group({"":["",s.kI.required],compCode:["",s.kI.required],branchCode:["",s.kI.required],tranDate:["",s.kI.required],deliveryDate:["",s.kI.required],invRefNumber:["",s.kI.required],venCatCode:["",s.kI.required],docNumber:["",s.kI.required],taxId:["",s.kI.required],remarks:["",s.kI.required],poNotes:["",s.kI.required],trantype:["",s.kI.required],vendCode:["",s.kI.required],paymentID:["",s.kI.required],taxInclusive:["",s.kI.required],tranCurrencyCode:["",s.kI.required],tranShipMode:["",s.kI.required],whCode:["",s.kI.required]})}loadPurchaseRequest(){this.apiService.getall("PurchaseOrder/GetPrSelectList").subscribe(e=>{e&&(this.PurchaseRequestList=e)})}loadWarehouses(){this.apiService.getall("warehouse/getSelectWarehouseList").subscribe(e=>{e&&(this.warehouseList=e)})}loadPRdata(e){this.apiService.getall(`PurchaseOrder/GetPRList/${e.value}`).subscribe(i=>{i&&(this.isReadOnly=!0,this.form.patchValue(i),this.form.patchValue({tranDate:`${i.tranDate.split("T")[0]}`}),this.form.patchValue({deliveryDate:`${i.deliveryDate.split("T")[0]}`}),this.form.patchValue({compCode:`${i.compCode}`}),this.form.patchValue({tranCurrencyCode:`${i.tranCurrencyCode}`}),this.form.patchValue({poNotes:`${i.poNotes}`}),this.id=i.id,this.form.patchValue({trantype:"2"}),this.listOfInvoices=[],i.itemList.forEach(l=>{this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:l.tranItemCode,tranItemName:l.tranItemName,tranItemName2:l.tranItemName2,tranItemQty:l.tranItemQty,tranItemUnitCode:l.tranItemUnitCode,tranUOMFactor:l.tranUOMFactor,tranItemCost:l.tranItemCost,tranTotCost:l.tranTotCost,discPer:l.discPer,discAmt:l.discAmt,itemTax:l.itemTax,itemTaxPer:l.itemTaxPer,taxAmount:l.taxAmount,itemTracking:l.itemTracking})}),this.setGrandTotal())})}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,a,i,r,l=""){this.isLoading=!0,this.apiService.getPagination("PurchaseOrder/GetPagedGRNList",this.utilService.getQueryString(e,a,i,r)).subscribe(d=>{this.totalItemsCount=0,this.data=new p.by(d.items),this.totalItemsCount=d.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},d=>this.utilService.ShowApiErrorMessage(d))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}purchaseOrdersubmit(){this.id>0&&(this.form.value.id=this.id),this.apiService.post("PurchaseOrder",this.form.value).subscribe(e=>{e&&this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,V.a).afterClosed().subscribe(i=>{i&&e>0&&this.apiService.delete("PurchaseOrder/GRNDelete",e).subscribe(r=>{this.refresh(),this.utilService.OkMessage()})},i=>this.utilService.ShowApiErrorMessage(i))}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}refresh(){this.searchValue="",this.sortingOrder="id desc",this.initialLoading()}Close(){this.refresh()}customerChange(e){this.apiService.getall(`customer/getCustomerById/${e.value}`).subscribe(r=>{r&&this.form.controls.taxIdNumber.setValue(r.vatNumber)})}loadBranchs(e){let a=e.target.value;a&&this.apiService.getall(`branch/getSelectSysBranchListByComId/${a}`).subscribe(i=>{i&&(this.branchList=i)})}resetProduct(){this.product="",this.unitType="",this.description="",this.price=0,this.total=0,this.quantity=0}loadProductdata(e){let a=e.value;a?this.apiService.getall(`product/productUnitPriceItem/${a}`).subscribe(r=>{r&&(this.product=r.nameEN,this.unitType=r.unitTypeEN,this.description=r.description,this.price=r.unitPrice)}):(this.unitType="",this.description="")}addInvoice(){this.tranTotCost>0&&(this.editsequence>0&&(this.removeInvoiceList(this.editsequence),this.editsequence=0),this.listOfInvoices.push({sequence:this.getSequence(),tranNumber:"0",tranItemCode:this.tranItemCode,tranItemName:this.tranItemName,tranItemName2:"",tranItemQty:this.tranItemQty,tranItemUnitCode:this.tranItemUnitCode,tranUOMFactor:this.tranUOMFactor,tranItemCost:this.tranItemCost,tranTotCost:this.tranTotCost,discPer:this.discPer,discAmt:this.discAmt,itemTax:0,itemTaxPer:this.itemTaxPer,taxAmount:this.taxAmount,itemTracking:0}),this.setGrandTotal(),this.setToDefault())}getSequence(){return this.sequence+=this.sequence+1}showCanShowNotes(){this.canShowNotes=!this.canShowNotes}showCanShowRemarks(){this.canShowRemarks=!this.canShowRemarks}deleteInvoiceItem(e){this.removeInvoiceList(e.sequence),this.setGrandTotal()}removeInvoiceList(e){let a=this.listOfInvoices.findIndex(i=>i.sequence===e);this.listOfInvoices.splice(a,1)}editInvoiceItem(e){this.editsequence=e.sequence,this.tranItemCode=e.tranItemCode,this.tranItemName=e.tranItemName,this.tranItemName2=e.tranItemName2,this.tranItemQty=e.tranItemQty,this.tranItemUnitCode=e.tranItemUnitCode,this.tranUOMFactor=e.tranUOMFactor,this.tranItemCost=e.tranItemCost,this.tranTotCost=e.tranTotCost,this.discPer=e.discPer,this.discAmt=e.discAmt,this.itemTax=e.itemTax,this.itemTaxPer=e.itemTaxPer,this.taxAmount=e.taxAmount,this.itemTracking=e.itemTracking}setGrandTotal(){this.grandTotal=0,this.grandVatTotal=0,this.grandInvoiceTotal=0,0==this.form.value.taxInclusive&&this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandInvoiceTotal+=e.tranTotCost+e.taxAmount}),1==this.form.value.taxInclusive&&this.listOfInvoices.forEach(e=>{this.grandInvoiceTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.grandTotal+=e.tranTotCost-e.taxAmount}),this.grandTotalStr=parseFloat(this.grandTotal.toString()).toFixed(3),this.grandVatTotalStr=parseFloat(this.grandVatTotal.toString()).toFixed(3),this.grandInvoiceTotalStr=parseFloat(this.grandInvoiceTotal.toString()).toFixed(3)}closeModel(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.listOfInvoices=[]}setToDefault(){this.tranItemCode=0,this.tranItemName="",this.tranItemName2="",this.tranItemQty=0,this.tranItemUnitCode="",this.tranUOMFactor="",this.tranItemCost=0,this.tranTotCost=0,this.discPer="",this.discAmt=0,this.itemTax="",this.itemTaxPer="",this.taxAmount=0,this.itemTracking=0}calculate(){var i=parseFloat((this.tranItemQty*this.tranItemCost).toString());this.tranTotCost=parseFloat(i.toString())}calculateDis(){if(""!=this.discPer&&0!=this.tranItemCost){var e=this.tranTotCost,a=parseFloat((parseFloat(this.discPer)/100).toFixed(2)),i=parseFloat((e*a/100).toFixed(2));this.discAmt=parseFloat(i.toString());var r=this.tranItemCost;this.tranTotCost=r-r*a,this.tranTotCost=this.tranTotCost*this.tranItemQty,a=parseFloat(this.itemTaxPer),this.taxAmount=0==this.form.value.taxInclusive?parseFloat((this.tranTotCost*a/100).toFixed(2)):parseFloat((this.tranTotCost*a/(a+100)).toFixed(4))}}calculatetaxAmount(){var e=this.tranTotCost,a=parseFloat(this.itemTaxPer);this.taxAmount=parseFloat((e*a/100).toFixed(2))}submit(){this.id>0&&(this.form.value.id=this.id),this.form.value.Prcode="0",this.form.value.vendCode=this.form.value.venCatCode,this.form.value.itemList=this.listOfInvoices,this.form.value.tranNumber="0",this.grandTotal=0,this.DiscPerc=0,this.discAmt=0,this.grandVatTotal=0,this.listOfInvoices.forEach(e=>{this.grandTotal+=e.tranTotCost,this.grandVatTotal+=e.taxAmount,this.DiscPerc+=parseFloat(e.discPer),this.discAmt+=e.discAmt}),this.form.value.tranTotalCost=this.grandTotal,this.form.value.taxes=this.grandVatTotal,this.form.value.tranDiscPer=this.DiscPerc,this.form.value.tranDiscAmount=this.discAmt,this.apiService.post("PurchaseOrder/CreateGRN",this.form.value).subscribe(e=>{this.reset(),this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}loadTaxdata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductTaxPrice/${a}`).subscribe(i=>{i&&(this.itemTaxPer=i[0].itemTaxperc,this.tranItemName=i[0].shortName),this.loadUomList(a)})}loadUomList(e){e&&this.apiService.getall(`PurchaseOrder/GetUOMItemList/${e}`).subscribe(i=>{i&&(this.UOMList=i)})}loadVendata(e){let a=e.value;a&&this.apiService.getall(`PurchaseOrder/ProductVenPriceItem/${a}`).subscribe(i=>{i&&(this.form.patchValue({vendCode:`${i.vendName}`}),this.form.patchValue({paymentID:`${i.poTermsCode}`}))})}reset(){this.form.reset(),this.listOfInvoices=[],this.grandTotalStr="",this.grandVatTotalStr="",this.grandInvoiceTotalStr=""}loadApprovals(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,e.target.value)}approvePurchaseOrder(e){this.openApprovalDialog(e.branchCode,e.tranNumber,_.Oi.create,"GRN","Save","GN",j.$)}openApprovalDialog(e,a,i,r,l,d,h){let u=this.openApprovalDialog1(this.dialog,h);u.componentInstance.dbops=i,u.componentInstance.modalTitle=r,u.componentInstance.modalBtnTitle=l,u.componentInstance.serviceType=d,u.componentInstance.serviceCode=a,u.componentInstance.branchCode=e,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}openApprovalDialog1(e,a){return e.open(a,{disableClose:!0})}AccountPosting(e){this.apiService.getall(`PurchaseOrder/GRNAccountsPosting/${e}`).subscribe(a=>{a&&(this.utilService.OkMessage(),this.refresh())})}create(){this.openDialogManage(0,_.Oi.create,this.translate.instant("Create_New_Grn_Request"),"",ot)}edit(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Grn_Request"),"",ot)}MultipleGrn(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_GRN"),"",ot)}view(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Grn_Request"),"",ot)}printing(e){this.openDialogManage(e,_.Oi.update,this.translate.instant("Create_New_Purchase_Request"),"grn",et)}openDialogManage(e=0,a,i="",r="",l,d={module:"00",action:"00act"},h=100){let u=this.utilService.openDialogCongif(this.dialog,l,h);u.componentInstance.dbops=a,u.componentInstance.modalTitle=i,u.componentInstance.modalBtnTitle=r,u.componentInstance.id=e,u.componentInstance.moduleFile=d,u.afterClosed().subscribe(g=>{g&&!0===g&&this.initialLoading()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(k.eN),t.Y36(y.F0),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(A.g),t.Y36(b.R),t.Y36(v.N),t.Y36(Z.uw),t.Y36(x.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-grn"]],viewQuery:function(e,a){if(1&e&&(t.Gf(U.NW,7),t.Gf(T.YE,7)),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first)}},features:[t.qOj],decls:86,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"row","pb-3"],[1,"col-md-3"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],["value","approval"],["value","unapproval"],["value","settled"],["value","unsettled"],[1,"col-md-4","arabicright"],[1,"",3,"matTooltip","click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"col-md-3","col-lg-3","text-right"],["data-toggle","modal","data-target","#scrollable-modal","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[3,"isLoading"],["mat-table","","matSort","","matSortActive","Id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","purchaseOrderNO"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tranDate"],["matColumnDef","invRefNumber"],["matColumnDef","branchCode"],["matColumnDef","vendCode"],["matColumnDef","amount"],["matColumnDef","paymentID"],["matColumnDef","taxId"],["matColumnDef","itemName"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["class","tableicons pcursor","data-toggle","modal","data-target","#scrollable-modal",3,"id","matTooltip","click",4,"ngIf"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"id","matTooltip","click"],[1,"icon-list"],[1,"icon-printer"],["class","tableicons",3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],[1,"icon-note"],[1,"tableicons",3,"matTooltip","click"],[1,"icon-trash"],["class","tableicons pcursor",3,"matTooltip","click",4,"ngIf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-arrow-up-circle"],[1,"icon-action-undo"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",14),t.TgZ(22,"select",15),t.NdJ("change",function(r){return a.loadApprovals(r)}),t.TgZ(23,"option",16),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",17),t._uU(27,"Approval"),t.qZA(),t.TgZ(28,"option",18),t._uU(29,"UnApproval"),t.qZA(),t.TgZ(30,"option",19),t._uU(31,"Settled"),t.qZA(),t.TgZ(32,"option",20),t._uU(33,"UnSettled"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",21),t.TgZ(35,"a",22),t.NdJ("click",function(){return a.refresh()}),t.ALo(36,"translate"),t._UZ(37,"i",23),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",1),t.TgZ(39,"div",24),t.TgZ(40,"h4",25),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.qZA(),t.TgZ(43,"div",26),t.TgZ(44,"a",27),t.NdJ("click",function(){return a.create()}),t._UZ(45,"i",28),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(48,"div",29),t.TgZ(49,"div",30),t._UZ(50,"spinner-loader",31),t.TgZ(51,"table",32),t.NdJ("matSortChange",function(r){return a.onSortOrder(r)}),t.ynx(52,33),t.YNc(53,Ii,3,3,"th",34),t.YNc(54,Li,2,1,"td",35),t.BQk(),t.ynx(55,36),t.YNc(56,yi,3,3,"th",34),t.YNc(57,Oi,3,4,"td",35),t.BQk(),t.ynx(58,37),t.YNc(59,Ni,3,3,"th",34),t.YNc(60,Si,2,1,"td",35),t.BQk(),t.ynx(61,38),t.YNc(62,Pi,3,3,"th",34),t.YNc(63,Mi,2,1,"td",35),t.BQk(),t.ynx(64,39),t.YNc(65,wi,3,3,"th",34),t.YNc(66,Di,2,1,"td",35),t.BQk(),t.ynx(67,40),t.YNc(68,Qi,3,3,"th",34),t.YNc(69,ki,2,1,"td",35),t.BQk(),t.ynx(70,41),t.YNc(71,Ji,3,3,"th",34),t.YNc(72,Fi,2,1,"td",35),t.BQk(),t.ynx(73,42),t.YNc(74,Vi,3,3,"th",34),t.YNc(75,Ri,2,1,"td",35),t.BQk(),t.ynx(76,43),t.YNc(77,Yi,3,3,"th",34),t.YNc(78,Bi,2,1,"td",35),t.BQk(),t.ynx(79,44),t.YNc(80,Ei,3,3,"th",45),t.YNc(81,zi,13,11,"td",35),t.BQk(),t.YNc(82,Xi,1,0,"tr",46),t.YNc(83,Ki,1,0,"tr",47),t.qZA(),t.ynx(84),t.TgZ(85,"mat-paginator",48),t.NdJ("page",function(r){return a.onPageSwitch(r)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,15,"GRN")," "),t.xp6(6),t.hij("",t.lcZ(11,17,"Purchase_Management")," "),t.xp6(3),t.hij("",t.lcZ(14,19,"GRN")," "),t.xp6(11),t.Oqu(t.lcZ(25,21,"GRN_List")),t.xp6(11),t.s9C("matTooltip",t.lcZ(36,23,"Refresh")),t.xp6(6),t.Oqu(t.lcZ(42,25,"GRN_List")),t.xp6(5),t.Oqu(t.lcZ(47,27,"Add_New_GRN")),t.xp6(4),t.Q6J("isLoading",a.isLoading),t.xp6(1),t.Q6J("dataSource",a.data),t.xp6(31),t.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(2),t.Q6J("length",a.totalItemsCount)("pageSize",a.pageService.pageCount)("pageSizeOptions",a.pageService.selectItemsPerPage))},directives:[s.YN,s.Kr,it.gM,J.r,p.BZ,T.YE,p.w1,p.fO,p.Dz,p.as,p.nj,U.NW,p.ge,T.nU,p.ev,c.O5,p.XQ,p.Gk],pipes:[x.X$,c.uU],encapsulation:2}),o})()},{path:"purchasesummary",component:(()=>{class o extends O{constructor(e,a,i,r,l){super(i),this.fb=e,this.apiService=a,this.authService=i,this.utilService=r,this.notifyService=l,this.vendCode="",this.isAllVendors=!1,this.dateFrom="",this.dateTo="",this.type="All",this.orderType="po",this.vendorList=[],this.codeControl=new s.NI(""),this.tranTotalCost=0,this.taxes=0,this.tranDiscAmount=0,this.totalBalance=0,this.companyName="",this.companyAddress="",this.branchName="",this.isLoading=!1,this.isCodeLoading=!1,this.isBranchLoading=!1,this.branchCodeControl=new s.NI(""),this.isItemLoading=!1,this.itemControl=new s.NI(""),this.filteredOptions=this.codeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(d=>(""!==d.trim()&&(this.isCodeLoading=!0),this.filter(d||"")))),this.filteredItemsOptions=this.itemControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(d=>(""!==d.trim()&&(this.isItemLoading=!0),this.filterItems(d||"")))),this.filteredBranchOptions=this.branchCodeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(d=>(""!==d.trim()&&(this.isBranchLoading=!0),this.filterBranch(d||""))))}ngOnInit(){}filter(e){return this.apiService.getall(`vendor/getVendorSelectItemList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isCodeLoading=!1,i}))}filterItems(e){return this.apiService.getall(`purchaseOrder/GetItemNameSelectList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isItemLoading=!1,i}))}filterBranch(e){return this.apiService.getall(`branch/getSelectSysBranchList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isBranchLoading=!1,i}))}search(){this.isLoading=!0,this.apiService.getall(`purchaseReport/getPurchaseOrderSummaryList?orderType=${this.orderType}&isAllVendors=${this.isAllVendors}&type=${this.type}&itemCode=${this.itemControl.value}&branchCode=${this.branchCodeControl.value}&vendCode=${this.codeControl.value}&from=${this.utilService.getCommonDate(this.dateFrom)}&to=${this.utilService.getCommonDate(this.dateTo)}`).subscribe(e=>{this.isLoading=!1,e&&(this.vendorList=e.list,this.companyName=e.comapnyName,this.companyAddress=e.address,this.branchName=e.branchName,this.logoURL=e.logoURL,this.tranTotalCost=e.totalDrAmount,this.tranDiscAmount=0,this.taxes=e.totalCrAmount,this.totalBalance=e.totalBalance)})}openPrint(){const e=document.getElementById("printcontainer"),a=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{a.document.write(e.innerHTML),a.document.close(),a.focus(),a.print(),a.close()},50)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(A.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-purchaseordersummary"]],features:[t.qOj],decls:119,vars:97,consts:[[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"col-md-4","col-lg-4"],[1,"form-group"],["for","exampleFormControlSelect1"],["id","Price Decimal",1,"custom-select","mr-sm-2",3,"ngModel","ngModelChange"],["value","po","selected","selected"],["value","pr"],["value","grn"],["value","prt"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],["auto1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["vendCode1","matAutocomplete"],[1,"col-md-6","col-lg-6"],["itemCode1","matAutocomplete"],["value","All"],["value","closed"],["value","opened"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],[1,"row","mb-4"],[1,"col-md-12","col-lg-12","text-center"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["class","modal-content",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"modal-content"],[1,"modal-body"],["id","printcontainer",1,"outer"],[1,"text-center","font-weight-medium"],["style","width:200px;height:150px;float:right;",3,"src",4,"ngIf"],["class","text-center font-weight-medium",4,"ngIf"],[1,"table-responsive"],["border","1","cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[1,"w10per",2,"padding","10px"],[1,"w10per"],[4,"ngFor","ngForOf"],["colspan","7",2,"text-align","right"],[1,"align-right",2,"text-align","right"],[2,"text-align","right"],["colspan","3"],[2,"width","200px","height","150px","float","right",3,"src"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],[2,"padding","8px"],[1,"text-right"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",0),t.TgZ(5,"div",4),t.TgZ(6,"h4",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(9,"div",6),t.TgZ(10,"div",0),t.TgZ(11,"div",7),t.TgZ(12,"div",8),t.TgZ(13,"label",9),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"select",10),t.NdJ("ngModelChange",function(r){return a.orderType=r}),t.TgZ(17,"option",11),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"option",12),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"option",13),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",14),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",7),t.TgZ(30,"div",8),t.TgZ(31,"label",9),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"auto-loader",15),t._UZ(35,"input",16),t.ALo(36,"translate"),t.ALo(37,"translate"),t.TgZ(38,"mat-autocomplete",null,17),t.YNc(40,eo,2,2,"mat-option",18),t.ALo(41,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",7),t.TgZ(43,"div",8),t.TgZ(44,"label"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"auto-loader",15),t._UZ(48,"input",16),t.ALo(49,"translate"),t.ALo(50,"translate"),t.TgZ(51,"mat-autocomplete",null,19),t.YNc(53,ao,2,3,"mat-option",18),t.ALo(54,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",20),t.TgZ(56,"div",8),t.TgZ(57,"label"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t._UZ(60,"auto-loader",15),t._UZ(61,"input",16),t.ALo(62,"translate"),t.ALo(63,"translate"),t.TgZ(64,"mat-autocomplete",null,21),t.YNc(66,io,2,3,"mat-option",18),t.ALo(67,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",7),t.TgZ(69,"div",8),t.TgZ(70,"label"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"select",10),t.NdJ("ngModelChange",function(r){return a.type=r}),t.TgZ(74,"option",22),t._uU(75,"All"),t.qZA(),t.TgZ(76,"option",23),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"option",24),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(82,"div",7),t.TgZ(83,"div",8),t.TgZ(84,"label"),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"div",8),t.TgZ(88,"div",25),t.TgZ(89,"input",26),t.NdJ("ngModelChange",function(r){return a.dateFrom=r}),t.ALo(90,"translate"),t.qZA(),t.TgZ(91,"div",27),t._UZ(92,"mat-datepicker-toggle",28),t._UZ(93,"mat-datepicker",null,29),t._UZ(95,"br"),t._UZ(96,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(97,"div",7),t.TgZ(98,"div",8),t.TgZ(99,"label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.TgZ(102,"div",8),t.TgZ(103,"div",25),t.TgZ(104,"input",26),t.NdJ("ngModelChange",function(r){return a.dateTo=r}),t.ALo(105,"translate"),t.qZA(),t.TgZ(106,"div",27),t._UZ(107,"mat-datepicker-toggle",28),t._UZ(108,"mat-datepicker",null,30),t._UZ(110,"br"),t._UZ(111,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(112,"div",31),t.TgZ(113,"div",32),t.TgZ(114,"button",33),t.NdJ("click",function(){return a.search()}),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(117,uo,114,68,"div",34),t.YNc(118,po,3,3,"h3",35)),2&e){const i=t.MAs(39),r=t.MAs(52),l=t.MAs(65),d=t.MAs(94),h=t.MAs(109);t.xp6(7),t.hij("",t.lcZ(8,45,"Purchase_Order_Summary")," "),t.xp6(7),t.Oqu(t.lcZ(15,47,"Type_Of_Summary")),t.xp6(2),t.Q6J("ngModel",a.orderType),t.xp6(2),t.Oqu(t.lcZ(19,49,"Purchase_Order_Summary")),t.xp6(3),t.Oqu(t.lcZ(22,51,"Purchase_Request_Summary")),t.xp6(3),t.Oqu(t.lcZ(25,53,"Purchase_Grn_Summary")),t.xp6(3),t.Oqu(t.lcZ(28,55,"Purchase_PRT_Summary")),t.xp6(5),t.Oqu(t.lcZ(33,57,"Branch_Code")),t.xp6(2),t.Q6J("isLoading",a.isBranchLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(36,59,"Please_Enter")," ",t.lcZ(37,61,"Branch_Code"),""),t.Q6J("formControl",a.branchCodeControl)("matAutocomplete",i),t.xp6(5),t.Q6J("ngForOf",t.lcZ(41,63,a.filteredBranchOptions)),t.xp6(5),t.Oqu(t.lcZ(46,65,"Vendor_Code")),t.xp6(2),t.Q6J("isLoading",a.isCodeLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(49,67,"Please_Enter")," ",t.lcZ(50,69,"Vendor_Code"),""),t.Q6J("formControl",a.codeControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(54,71,a.filteredOptions)),t.xp6(5),t.Oqu(t.lcZ(59,73,"Item_Code")),t.xp6(2),t.Q6J("isLoading",a.isItemLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(62,75,"Please_Enter")," ",t.lcZ(63,77,"Item_Code"),""),t.Q6J("formControl",a.itemControl)("matAutocomplete",l),t.xp6(5),t.Q6J("ngForOf",t.lcZ(67,79,a.filteredItemsOptions)),t.xp6(5),t.Oqu(t.lcZ(72,81,"Choose")),t.xp6(2),t.Q6J("ngModel",a.type),t.xp6(4),t.Oqu(t.lcZ(78,83,"Posted")),t.xp6(3),t.Oqu(t.lcZ(81,85,"UnPosted")),t.xp6(5),t.Oqu(t.lcZ(86,87,"From_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(90,89,"Select_a_Date")),t.Q6J("ngModel",a.dateFrom)("matDatepicker",d),t.xp6(3),t.Q6J("for",d),t.xp6(8),t.Oqu(t.lcZ(101,91,"To_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(105,93,"Select_a_Date")),t.Q6J("ngModel",a.dateTo)("matDatepicker",h),t.xp6(3),t.Q6J("for",h),t.xp6(8),t.hij(" ",t.lcZ(116,95,"Search")," "),t.xp6(2),t.Q6J("ngIf",a.vendorList&&a.vendorList.length>0),t.xp6(1),t.Q6J("ngIf",a.vendorList&&0===a.vendorList.length)}},directives:[s.EJ,s.JJ,s.On,s.YN,s.Kr,z.z,s.Fj,$.ZL,s.oH,$.XC,c.sg,D.hl,D.nW,X.R9,D.Mq,c.O5,K.ey,J.r,c.RF,c.ED,c.n9],pipes:[x.X$,c.Ov,W.J,c.uU],encapsulation:2}),o})()},{path:"vendorlist",component:(()=>{class o extends O{constructor(e,a,i,r,l){super(i),this.fb=e,this.apiService=a,this.authService=i,this.utilService=r,this.notifyService=l,this.vendCode="",this.isAllVendors=!1,this.dateFrom="",this.dateTo="",this.type="All",this.vendorList=[],this.codeControl=new s.NI(""),this.tranTotalCost=0,this.taxes=0,this.tranDiscAmount=0,this.totalBalance=0,this.netTotalBalanceAmount=0,this.companyName="",this.companyAddress="",this.branchName="",this.isLoading=!1,this.isBranchLoading=!1,this.branchCodeControl=new s.NI(""),this.isCodeLoading=!1,this.filteredOptions=this.codeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(d=>(""!==d.trim()&&(this.isCodeLoading=!0),this.filter(d||"")))),this.filteredBranchOptions=this.branchCodeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(d=>(""!==d.trim()&&(this.isBranchLoading=!0),this.filterBranch(d||""))))}ngOnInit(){}filter(e){return this.apiService.getall(`vendor/getVendorSelectItemList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isCodeLoading=!1,i}))}filterBranch(e){return this.apiService.getall(`branch/getSelectSysBranchList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isBranchLoading=!1,i}))}search(){this.isLoading=!0,this.apiService.getall(`purchaseReport/getVendorPOList?isAllVendors=${this.isAllVendors}&branchCode=${this.branchCodeControl.value}&vendCode=${this.codeControl.value}&from=${this.utilService.getCommonDate(this.dateFrom)}&to=${this.utilService.getCommonDate(this.dateTo)}`).subscribe(e=>{this.isLoading=!1,e&&(this.vendorList=e.list,this.companyName=e.comapnyName,this.companyAddress=e.address,this.branchName=e.branchName,this.logoURL=e.logoURL,this.tranTotalCost=e.totalDrAmount,this.tranDiscAmount=e.totalOpeningAmount,this.taxes=e.totalCrAmount,this.netTotalBalanceAmount=e.netTotalBalanceAmount,this.totalBalance=e.totalBalance)})}openPrint(){const e=document.getElementById("printcontainer"),a=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{a.document.write(e.innerHTML),a.document.close(),a.focus(),a.print(),a.close()},50)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(A.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-vendorporeport"]],features:[t.qOj],decls:79,vars:60,consts:[[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"col-md-4","col-lg-4"],[1,"form-group"],["for","exampleFormControlSelect1"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],["auto1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["vendCode1","matAutocomplete"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],[1,"form-group","pt",2,"padding-top","35px","padding-left","20px"],["color","primary",3,"ngModel","ngModelChange"],[1,"row","mb-4"],[1,"col-md-12","col-lg-12","text-center"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["class","modal-content",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"modal-content"],[1,"modal-body"],["id","printcontainer",1,"outer"],[1,"text-center","font-weight-medium"],["style","width:200px;height:150px;float:right;",3,"src",4,"ngIf"],["class","text-center font-weight-medium",4,"ngIf"],[1,"table-responsive"],["border","1","cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[1,"w10per",2,"padding","10px"],[4,"ngFor","ngForOf"],["colspan","3",2,"text-align","right"],[1,"align-right",2,"text-align","right"],["colspan","7",2,"text-align","right"],[2,"text-align","right"],["colspan","3"],[2,"width","200px","height","150px","float","right",3,"src"],[2,"padding","8px"],[1,"text-right"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",0),t.TgZ(5,"div",4),t.TgZ(6,"h4",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(9,"div",6),t.TgZ(10,"div",0),t.TgZ(11,"div",7),t.TgZ(12,"div",8),t.TgZ(13,"label",9),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"auto-loader",10),t._UZ(17,"input",11),t.ALo(18,"translate"),t.ALo(19,"translate"),t.TgZ(20,"mat-autocomplete",null,12),t.YNc(22,mo,2,2,"mat-option",13),t.ALo(23,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",7),t.TgZ(25,"div",8),t.TgZ(26,"label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"auto-loader",10),t._UZ(30,"input",11),t.ALo(31,"translate"),t.ALo(32,"translate"),t.TgZ(33,"mat-autocomplete",null,14),t.YNc(35,go,2,3,"mat-option",13),t.ALo(36,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",7),t.TgZ(38,"div",8),t.TgZ(39,"label"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",8),t.TgZ(43,"div",15),t.TgZ(44,"input",16),t.NdJ("ngModelChange",function(r){return a.dateFrom=r}),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"div",17),t._UZ(47,"mat-datepicker-toggle",18),t._UZ(48,"mat-datepicker",null,19),t._UZ(50,"br"),t._UZ(51,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"div",7),t.TgZ(53,"div",8),t.TgZ(54,"label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",8),t.TgZ(58,"div",15),t.TgZ(59,"input",16),t.NdJ("ngModelChange",function(r){return a.dateTo=r}),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"div",17),t._UZ(62,"mat-datepicker-toggle",18),t._UZ(63,"mat-datepicker",null,20),t._UZ(65,"br"),t._UZ(66,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"div",1),t.TgZ(68,"div",21),t.TgZ(69,"mat-slide-toggle",22),t.NdJ("ngModelChange",function(r){return a.isAllVendors=r}),t.qZA(),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(72,"div",23),t.TgZ(73,"div",24),t.TgZ(74,"button",25),t.NdJ("click",function(){return a.search()}),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(77,To,96,58,"div",26),t.YNc(78,fo,3,3,"h3",27)),2&e){const i=t.MAs(21),r=t.MAs(34),l=t.MAs(49),d=t.MAs(64);t.xp6(7),t.hij("",t.lcZ(8,30,"Vendor_Purchase_Order")," "),t.xp6(7),t.Oqu(t.lcZ(15,32,"Branch_Code")),t.xp6(2),t.Q6J("isLoading",a.isBranchLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(18,34,"Please_Enter")," ",t.lcZ(19,36,"Branch_Code"),""),t.Q6J("formControl",a.branchCodeControl)("matAutocomplete",i),t.xp6(5),t.Q6J("ngForOf",t.lcZ(23,38,a.filteredBranchOptions)),t.xp6(5),t.Oqu(t.lcZ(28,40,"Vendor_Code")),t.xp6(2),t.Q6J("isLoading",a.isCodeLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(31,42,"Please_Enter")," ",t.lcZ(32,44,"Vendor_Code"),""),t.Q6J("formControl",a.codeControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(36,46,a.filteredOptions)),t.xp6(5),t.Oqu(t.lcZ(41,48,"From_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(45,50,"Select_a_Date")),t.Q6J("ngModel",a.dateFrom)("matDatepicker",l),t.xp6(3),t.Q6J("for",l),t.xp6(8),t.Oqu(t.lcZ(56,52,"To_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(60,54,"Select_a_Date")),t.Q6J("ngModel",a.dateTo)("matDatepicker",d),t.xp6(3),t.Q6J("for",d),t.xp6(7),t.Q6J("ngModel",a.isAllVendors),t.xp6(1),t.hij(" ",t.lcZ(71,56,"Vend_Statement_Balance")," "),t.xp6(5),t.hij(" ",t.lcZ(76,58,"Search")," "),t.xp6(2),t.Q6J("ngIf",a.vendorList&&a.vendorList.length>0),t.xp6(1),t.Q6J("ngIf",a.vendorList&&0===a.vendorList.length)}},directives:[z.z,s.Fj,$.ZL,s.JJ,s.oH,$.XC,c.sg,D.hl,s.On,D.nW,X.R9,D.Mq,ut.Rr,c.O5,K.ey,J.r],pipes:[x.X$,c.Ov,W.J,c.uU],encapsulation:2}),o})()},{path:"itempurchasehistory",component:(()=>{class o extends O{constructor(e,a,i,r,l){super(a),this.apiService=e,this.authService=a,this.utilService=i,this.pageService=r,this.notifyService=l,this.totalItemsCount=0,this.vendCode="",this.isSummary=!1,this.dateFrom="",this.dateTo="",this.vendorSummaryList=[],this.vendorList=[],this.poItemList=[],this.codeControl=new s.NI(""),this.companyName="",this.companyAddress="",this.branchName="",this.isLoading=!1,this.isCodeLoading=!1,this.openingBalance=0,this.closingBalance=0,this.tranTotalCost=0,this.totalItemQty=0,this.taxes=0,this.tranDiscAmount=0,this.totalBalance=0,this.netTotalBalanceAmount=0,this.isBranchLoading=!1,this.branchCodeControl=new s.NI(""),this.isItemLoading=!1,this.itemControl=new s.NI(""),this.filteredOptions=this.codeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(d=>(""!==d.trim()&&(this.isCodeLoading=!0),this.filter(d||"")))),this.filteredItemsOptions=this.itemControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(d=>(""!==d.trim()&&(this.isItemLoading=!0),this.filterItems(d||"")))),this.filteredBranchOptions=this.branchCodeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(d=>(""!==d.trim()&&(this.isBranchLoading=!0),this.filterBranch(d||""))))}ngOnInit(){}filter(e){return this.apiService.getall(`vendor/getVendorSelectItemList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isCodeLoading=!1,i}))}filterBranch(e){return this.apiService.getall(`branch/getSelectSysBranchList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isBranchLoading=!1,i}))}filterItems(e){return this.apiService.getall(`purchaseOrder/GetItemNameSelectList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isItemLoading=!1,i}))}onPageSwitch(e){this.search(e.pageIndex,e.pageSize)}search(e=this.pageService.page,a=this.pageService.pageCount){this.isLoading=!0,this.apiService.getall(`purchaseReport/getpoItemAnalysisSummary?page=${e}&pageCount=${a}&itemCode=${this.itemControl.value}&branchCode=${this.branchCodeControl.value}&vendCode=${this.codeControl.value}&from=${this.utilService.getCommonDate(this.dateFrom)}&to=${this.utilService.getCommonDate(this.dateTo)}`).subscribe(i=>{if(this.isLoading=!1,i){const r=i.listItems;this.vendorList=r.list,this.totalItemsCount=r.reportCount,this.poItemList=i.warehouseItems,this.companyName=i.comapnyName,this.companyAddress=i.address,this.branchName=i.branchName,this.logoURL=i.logoURL,this.tranTotalCost=i.totalDrAmount,this.tranDiscAmount=i.totalOpeningAmount,this.totalBalance=i.totalBalance,this.taxes=i.totalCrAmount,this.netTotalBalanceAmount=i.netTotalBalanceAmount,this.totalItemQty=i.totalItemQty}})}openPrint(){const e=document.getElementById("printcontainer"),a=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{a.document.write(e.innerHTML),a.document.close(),a.focus(),a.print(),a.close()},50)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(v.u),t.Y36(A.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-poitemanalysissummary"]],viewQuery:function(e,a){if(1&e&&t.Gf(U.NW,7),2&e){let i;t.iGM(i=t.CRH())&&(a.paginator=i.first)}},features:[t.qOj],decls:101,vars:81,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"cardtitle-divider"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["for","exampleFormControlSelect1"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],["auto1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["vendCode1","matAutocomplete"],["itemCode1","matAutocomplete"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],[1,"row","mb-4"],[1,"col-md-12","col-lg-12","text-center"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["class","modal-content",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"modal-content"],[1,"modal-body"],["id","printcontainer",1,"outer"],[1,"text-center","font-weight-medium"],["style","width:200px;height:150px;float:right;",3,"src",4,"ngIf"],["class","text-center font-weight-medium",4,"ngIf"],[1,"table-responsive"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[4,"ngFor","ngForOf"],["colspan","7",2,"text-align","right"],[1,"align-right",2,"text-align","right"],["colspan","10",2,"text-align","right"],[2,"text-align","right"],["colspan","0"],["colspan","6",2,"text-align","right"],["colspan","6"],["border","1","cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[1,"w10per",2,"padding","10px"],[1,"example-table-container","table-responsive","pt-3"],[3,"length","pageSize","pageSizeOptions","page"],[2,"width","200px","height","150px","float","right",3,"src"],["colspan","11"],[2,"padding","8px"],[1,"text-right"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",1),t.TgZ(19,"div",9),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t._UZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"div",14),t.TgZ(26,"label",15),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"auto-loader",16),t._UZ(30,"input",17),t.ALo(31,"translate"),t.ALo(32,"translate"),t.TgZ(33,"mat-autocomplete",null,18),t.YNc(35,vo,2,2,"mat-option",19),t.ALo(36,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",13),t.TgZ(38,"div",14),t.TgZ(39,"label"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"auto-loader",16),t._UZ(43,"input",17),t.ALo(44,"translate"),t.ALo(45,"translate"),t.TgZ(46,"mat-autocomplete",null,20),t.YNc(48,qo,2,3,"mat-option",19),t.ALo(49,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",13),t.TgZ(51,"div",14),t.TgZ(52,"label"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"auto-loader",16),t._UZ(56,"input",17),t.ALo(57,"translate"),t.ALo(58,"translate"),t.TgZ(59,"mat-autocomplete",null,21),t.YNc(61,xo,2,3,"mat-option",19),t.ALo(62,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"div",13),t.TgZ(64,"div",14),t.TgZ(65,"label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"div",14),t.TgZ(69,"div",22),t.TgZ(70,"input",23),t.NdJ("ngModelChange",function(r){return a.dateFrom=r}),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"div",24),t._UZ(73,"mat-datepicker-toggle",25),t._UZ(74,"mat-datepicker",null,26),t._UZ(76,"br"),t._UZ(77,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(78,"div",13),t.TgZ(79,"div",14),t.TgZ(80,"label"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"div",14),t.TgZ(84,"div",22),t.TgZ(85,"input",23),t.NdJ("ngModelChange",function(r){return a.dateTo=r}),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"div",24),t._UZ(88,"mat-datepicker-toggle",25),t._UZ(89,"mat-datepicker",null,27),t._UZ(91,"br"),t._UZ(92,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(93,"div",28),t.TgZ(94,"div",29),t.TgZ(95,"button",30),t.NdJ("click",function(){return a.search()}),t._uU(96),t.ALo(97,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(98,"spinner-loader",16),t.YNc(99,Oo,93,46,"div",31),t.YNc(100,No,3,3,"h3",32),t.qZA()),2&e){const i=t.MAs(34),r=t.MAs(47),l=t.MAs(60),d=t.MAs(75),h=t.MAs(90);t.xp6(4),t.hij(" ",t.lcZ(5,39,"PO_Items_Statement")," "),t.xp6(6),t.hij(" ",t.lcZ(11,41,"Administration")," "),t.xp6(3),t.Oqu(t.lcZ(14,43,"Purchase_Management")),t.xp6(3),t.Oqu(t.lcZ(17,45,"PO_Items_Statement")),t.xp6(11),t.Oqu(t.lcZ(28,47,"Branch_Code")),t.xp6(2),t.Q6J("isLoading",a.isBranchLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(31,49,"Please_Enter")," ",t.lcZ(32,51,"Branch_Code"),""),t.Q6J("formControl",a.branchCodeControl)("matAutocomplete",i),t.xp6(5),t.Q6J("ngForOf",t.lcZ(36,53,a.filteredBranchOptions)),t.xp6(5),t.Oqu(t.lcZ(41,55,"Vendor_Code")),t.xp6(2),t.Q6J("isLoading",a.isCodeLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(44,57,"Please_Enter")," ",t.lcZ(45,59,"Vendor_Code"),""),t.Q6J("formControl",a.codeControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(49,61,a.filteredOptions)),t.xp6(5),t.Oqu(t.lcZ(54,63,"Item_Code")),t.xp6(2),t.Q6J("isLoading",a.isItemLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(57,65,"Please_Enter")," ",t.lcZ(58,67,"Item_Code"),""),t.Q6J("formControl",a.itemControl)("matAutocomplete",l),t.xp6(5),t.Q6J("ngForOf",t.lcZ(62,69,a.filteredItemsOptions)),t.xp6(5),t.Oqu(t.lcZ(67,71,"From_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(71,73,"Select_a_Date")),t.Q6J("ngModel",a.dateFrom)("matDatepicker",d),t.xp6(3),t.Q6J("for",d),t.xp6(8),t.Oqu(t.lcZ(82,75,"To_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(86,77,"Select_a_Date")),t.Q6J("ngModel",a.dateTo)("matDatepicker",h),t.xp6(3),t.Q6J("for",h),t.xp6(8),t.hij(" ",t.lcZ(97,79,"Search")," "),t.xp6(2),t.Q6J("isLoading",a.isLoading),t.xp6(1),t.Q6J("ngIf",a.vendorList&&a.vendorList.length>0||a.vendorSummaryList&&a.vendorSummaryList.length>0),t.xp6(1),t.Q6J("ngIf",a.vendorList&&0===a.vendorList.length)}},directives:[z.z,s.Fj,$.ZL,s.JJ,s.oH,$.XC,c.sg,D.hl,s.On,D.nW,X.R9,D.Mq,J.r,c.O5,K.ey,U.NW],pipes:[x.X$,c.Ov,W.J,c.uU],encapsulation:2}),o})()},{path:"povendorpurchasehistory",component:(()=>{class o extends O{constructor(e,a,i,r){super(a),this.apiService=e,this.authService=a,this.utilService=i,this.notifyService=r,this.vendCode="",this.isSummary=!1,this.dateFrom="",this.dateTo="",this.vendorSummaryList=[],this.vendorList=[],this.codeControl=new s.NI(""),this.companyName="",this.companyAddress="",this.branchName="",this.isLoading=!1,this.isCodeLoading=!1,this.openingBalance=0,this.closingBalance=0,this.tranTotalCost=0,this.totalItemQty=0,this.taxes=0,this.tranDiscAmount=0,this.totalBalance=0,this.netTotalBalanceAmount=0,this.isBranchLoading=!1,this.branchCodeControl=new s.NI(""),this.isItemLoading=!1,this.itemControl=new s.NI(""),this.filteredOptions=this.codeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(l=>(""!==l.trim()&&(this.isCodeLoading=!0),this.filter(l||"")))),this.filteredItemsOptions=this.itemControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(l=>(""!==l.trim()&&(this.isItemLoading=!0),this.filterItems(l||"")))),this.filteredBranchOptions=this.branchCodeControl.valueChanges.pipe((0,N.O)(""),(0,S.b)(400),(0,P.x)(),(0,M.w)(l=>(""!==l.trim()&&(this.isBranchLoading=!0),this.filterBranch(l||""))))}ngOnInit(){}filter(e){return this.apiService.getall(`vendor/getVendorSelectItemList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isCodeLoading=!1,i}))}filterBranch(e){return this.apiService.getall(`branch/getSelectSysBranchList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isBranchLoading=!1,i}))}filterItems(e){return this.apiService.getall(`purchaseOrder/GetItemNameSelectList?search=${e.trim()}`).pipe((0,Q.U)(a=>{const i=a;return this.isItemLoading=!1,i}))}search(){this.isLoading=!0,this.apiService.getall(`purchaseReport/getpoItemAnalysisSummary?type=povendanls&itemCode=${this.itemControl.value}&branchCode=${this.branchCodeControl.value}&vendCode=${this.codeControl.value}&from=${this.utilService.getCommonDate(this.dateFrom)}&to=${this.utilService.getCommonDate(this.dateTo)}`).subscribe(e=>{this.isLoading=!1,e&&(this.vendorList=e.listItems,this.companyName=e.comapnyName,this.companyAddress=e.address,this.branchName=e.branchName,this.logoURL=e.logoURL,this.tranTotalCost=e.totalDrAmount,this.tranDiscAmount=e.totalOpeningAmount,this.totalBalance=e.totalBalance,this.taxes=e.totalCrAmount,this.netTotalBalanceAmount=e.netTotalBalanceAmount,this.totalItemQty=e.totalItemQty)})}openPrint(){const e=document.getElementById("printcontainer"),a=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{a.document.write(e.innerHTML),a.document.close(),a.focus(),a.print(),a.close()},50)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.s),t.Y36(q._),t.Y36(I.t),t.Y36(A.g))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-povendoranalysissummayitem"]],features:[t.qOj],decls:101,vars:81,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"cardtitle-divider"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["for","exampleFormControlSelect1"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],["auto1","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["vendCode1","matAutocomplete"],["itemCode1","matAutocomplete"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],[1,"row","mb-4"],[1,"col-md-12","col-lg-12","text-center"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["class","modal-content",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"modal-content"],[1,"modal-body"],["id","printcontainer",1,"outer"],[1,"text-center","font-weight-medium"],["style","width:200px;height:150px;float:right;",3,"src",4,"ngIf"],["class","text-center font-weight-medium",4,"ngIf"],[1,"table-responsive"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[4,"ngFor","ngForOf"],["colspan","7",2,"text-align","right"],[1,"align-right",2,"text-align","right"],["colspan","10",2,"text-align","right"],[2,"text-align","right"],["colspan","0"],[2,"width","200px","height","150px","float","right",3,"src"],["colspan","11"],["border","1","cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[1,"w10per",2,"padding","10px"],[2,"padding","8px"],[1,"text-right"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",1),t.TgZ(19,"div",9),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t._UZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"div",14),t.TgZ(26,"label",15),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"auto-loader",16),t._UZ(30,"input",17),t.ALo(31,"translate"),t.ALo(32,"translate"),t.TgZ(33,"mat-autocomplete",null,18),t.YNc(35,Po,2,2,"mat-option",19),t.ALo(36,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",13),t.TgZ(38,"div",14),t.TgZ(39,"label"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"auto-loader",16),t._UZ(43,"input",17),t.ALo(44,"translate"),t.ALo(45,"translate"),t.TgZ(46,"mat-autocomplete",null,20),t.YNc(48,Mo,2,3,"mat-option",19),t.ALo(49,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",13),t.TgZ(51,"div",14),t.TgZ(52,"label"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"auto-loader",16),t._UZ(56,"input",17),t.ALo(57,"translate"),t.ALo(58,"translate"),t.TgZ(59,"mat-autocomplete",null,21),t.YNc(61,wo,2,3,"mat-option",19),t.ALo(62,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"div",13),t.TgZ(64,"div",14),t.TgZ(65,"label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"div",14),t.TgZ(69,"div",22),t.TgZ(70,"input",23),t.NdJ("ngModelChange",function(r){return a.dateFrom=r}),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"div",24),t._UZ(73,"mat-datepicker-toggle",25),t._UZ(74,"mat-datepicker",null,26),t._UZ(76,"br"),t._UZ(77,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(78,"div",13),t.TgZ(79,"div",14),t.TgZ(80,"label"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"div",14),t.TgZ(84,"div",22),t.TgZ(85,"input",23),t.NdJ("ngModelChange",function(r){return a.dateTo=r}),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"div",24),t._UZ(88,"mat-datepicker-toggle",25),t._UZ(89,"mat-datepicker",null,27),t._UZ(91,"br"),t._UZ(92,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(93,"div",28),t.TgZ(94,"div",29),t.TgZ(95,"button",30),t.NdJ("click",function(){return a.search()}),t._uU(96),t.ALo(97,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(98,"spinner-loader",16),t.YNc(99,Fo,74,33,"div",31),t.YNc(100,Vo,3,3,"h3",32),t.qZA()),2&e){const i=t.MAs(34),r=t.MAs(47),l=t.MAs(60),d=t.MAs(75),h=t.MAs(90);t.xp6(4),t.hij(" ",t.lcZ(5,39,"PO_Vendor_Items_Statement")," "),t.xp6(6),t.hij(" ",t.lcZ(11,41,"Administration")," "),t.xp6(3),t.Oqu(t.lcZ(14,43,"Purchase_Management")),t.xp6(3),t.Oqu(t.lcZ(17,45,"PO_Vendor_Items_Statement")),t.xp6(11),t.Oqu(t.lcZ(28,47,"Branch_Code")),t.xp6(2),t.Q6J("isLoading",a.isBranchLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(31,49,"Please_Enter")," ",t.lcZ(32,51,"Branch_Code"),""),t.Q6J("formControl",a.branchCodeControl)("matAutocomplete",i),t.xp6(5),t.Q6J("ngForOf",t.lcZ(36,53,a.filteredBranchOptions)),t.xp6(5),t.Oqu(t.lcZ(41,55,"Vendor_Code")),t.xp6(2),t.Q6J("isLoading",a.isCodeLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(44,57,"Please_Enter")," ",t.lcZ(45,59,"Vendor_Code"),""),t.Q6J("formControl",a.codeControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(49,61,a.filteredOptions)),t.xp6(5),t.Oqu(t.lcZ(54,63,"Item_Code")),t.xp6(2),t.Q6J("isLoading",a.isItemLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(57,65,"Please_Enter")," ",t.lcZ(58,67,"Item_Code"),""),t.Q6J("formControl",a.itemControl)("matAutocomplete",l),t.xp6(5),t.Q6J("ngForOf",t.lcZ(62,69,a.filteredItemsOptions)),t.xp6(5),t.Oqu(t.lcZ(67,71,"From_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(71,73,"Select_a_Date")),t.Q6J("ngModel",a.dateFrom)("matDatepicker",d),t.xp6(3),t.Q6J("for",d),t.xp6(8),t.Oqu(t.lcZ(82,75,"To_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(86,77,"Select_a_Date")),t.Q6J("ngModel",a.dateTo)("matDatepicker",h),t.xp6(3),t.Q6J("for",h),t.xp6(8),t.hij(" ",t.lcZ(97,79,"Search")," "),t.xp6(2),t.Q6J("isLoading",a.isLoading),t.xp6(1),t.Q6J("ngIf",a.vendorList&&a.vendorList.length>0||a.vendorSummaryList&&a.vendorSummaryList.length>0),t.xp6(1),t.Q6J("ngIf",a.vendorList&&0===a.vendorList.length)}},directives:[z.z,s.Fj,$.ZL,s.JJ,s.oH,$.XC,c.sg,D.hl,s.On,D.nW,X.R9,D.Mq,J.r,c.O5,K.ey],pipes:[x.X$,c.Ov,W.J,c.uU],encapsulation:2}),o})()}];let Yo=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[y.Bz.forChild(Ro)],y.Bz]}),o})(),Bo=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[Yo,w.m],c.ez]}),o})()},4727:(tt,E,m)=>{m.d(E,{z:()=>U});var c=m(7716),w=m(8583),y=m(4885);function s(T,p){1&T&&(c.TgZ(0,"div",1),c._UZ(1,"mat-progress-spinner",2),c.qZA())}let U=(()=>{class T{constructor(){this.isLoading=!1}}return T.\u0275fac=function(_){return new(_||T)},T.\u0275cmp=c.Xpm({type:T,selectors:[["auto-loader"]],inputs:{isLoading:"isLoading"},decls:1,vars:1,consts:[["style","display: flex; justify-content: center; align-items: center; background: white;",4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center","background","white"],["color","primary","strokeWidth","3","diameter","20","mode","indeterminate"]],template:function(_,t){1&_&&c.YNc(0,s,2,0,"div",0),2&_&&c.Q6J("ngIf",t.isLoading)},directives:[w.O5,y.Ou],encapsulation:2}),T})()},4803:(tt,E,m)=>{m.d(E,{a:()=>y});var c=m(7716),w=m(2238);let y=(()=>{class s{constructor(T){this.dialogRef=T,this.modalTitle=""}onNoClick(){this.dialogRef.close()}}return s.\u0275fac=function(T){return new(T||s)(c.Y36(w.so))},s.\u0275cmp=c.Xpm({type:s,selectors:[["delete-confirmation-dialog"]],decls:9,vars:2,consts:[["mat-dialog-content","",1,"text-danger"],["mat-dialog-actions",""],[1,"btn","btn-primary",3,"mat-dialog-close"],[1,"btn","btn-danger",3,"click"]],template:function(T,p){1&T&&(c.TgZ(0,"div",0),c.TgZ(1,"h4"),c._uU(2),c.qZA(),c.qZA(),c.TgZ(3,"div",1),c.TgZ(4,"button",2),c._uU(5,"Yes"),c.qZA(),c._uU(6," \xa0 "),c.TgZ(7,"button",3),c.NdJ("click",function(){return p.onNoClick()}),c._uU(8,"No"),c.qZA(),c.qZA()),2&T&&(c.xp6(2),c.Oqu(""!==p.modalTitle?p.modalTitle:"Are you sure ?"),c.xp6(2),c.Q6J("mat-dialog-close",!0))},directives:[w.xY,w.H8,w.ZT],encapsulation:2}),s})()},137:(tt,E,m)=>{m.d(E,{Y:()=>k});var c=m(7716),w=m(3679),y=m(5830),s=m(3048),U=m(7278),T=m(2013),p=m(1841),_=m(2238),t=m(4041),q=m(8583),O=m(9790);function V(C,I){if(1&C&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"a",17),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"td"),c._uU(5),c.qZA(),c.qZA()),2&C){const Z=I.$implicit,A=c.oxw(2);c.xp6(2),c.s9C("href",A.fileUrl+"/fileUpload/downLoadFilesByFileName?fileName="+Z.fileName,c.LSH),c.xp6(1),c.hij(" ",Z.name," "),c.xp6(2),c.Oqu(Z.description)}}function j(C,I){if(1&C&&(c.TgZ(0,"table",15),c.TgZ(1,"tr"),c.TgZ(2,"th"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"th"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.qZA(),c.YNc(8,V,6,3,"tr",16),c.qZA()),2&C){const Z=c.oxw();c.xp6(3),c.Oqu(c.lcZ(4,3,"Name")),c.xp6(3),c.Oqu(c.lcZ(7,5,"Description")),c.xp6(2),c.Q6J("ngForOf",Z.uploadedFiles)}}let k=(()=>{class C{constructor(Z,A,b,v,G,H,x,W){this.fb=Z,this.apiService=A,this.authService=b,this.utilService=v,this.notifyService=G,this.http=H,this.dialog=x,this.dialogRef=W,this.uploadedFiles=[],this.fileUrl="",this.isLoading=!1,this.fileone="",this.filetwo="",this.filethree="",this.filefour="",this.filefive="",this.files=[]}ngOnInit(){this.loadFiles(),this.fileUrl=this.authService.ApiEndPoint()}onSelectFile1(Z){this.fileUploadone=Z.target.files[0]}onSelectFile2(Z){this.fileUploadtwo=Z.target.files[0]}onSelectFile3(Z){this.fileUploadthree=Z.target.files[0]}onSelectFile4(Z){this.fileUploadfour=Z.target.files[0]}onSelectFile5(Z){this.fileUploadfive=Z.target.files[0]}loadFiles(){this.isLoading=!0,this.apiService.getall(`fileUpload/getFilesByModulewiseId?sourceId=${this.moduleFile.sourceId}&action=${this.moduleFile.action}`).subscribe(Z=>{this.isLoading=!1,this.uploadedFiles=Z},Z=>{this.isLoading=!1})}uploadFiles(){this.formData=new FormData,this.moduleFile&&this.formData.append("modulefile",JSON.stringify(this.moduleFile)),this.fileUploadone&&(this.formData.append("fileone",this.fileUploadone,this.fileUploadone.name),this.formData.append("fileone",this.fileone)),this.fileUploadtwo&&(this.formData.append("filetwo",this.fileUploadtwo,this.fileUploadtwo.name),this.formData.append("filetwo",this.filetwo)),this.fileUploadthree&&(this.formData.append("filethree",this.fileUploadthree,this.fileUploadthree.name),this.formData.append("filethree",this.filethree)),this.fileUploadfour&&(this.formData.append("filefour",this.fileUploadfour,this.fileUploadfour.name),this.formData.append("filefour",this.filefour)),this.fileUploadfive&&(this.formData.append("filefive",this.fileUploadfive,this.fileUploadfive.name),this.formData.append("filefive",this.filefive)),this.apiService.post("fileUpload/uploadfiles",this.formData).subscribe(Z=>{this.notifyService.showSuccess("Uploaded successfully"),this.dialogRef.close(!0)},Z=>{this.notifyService.showError(Z.error)})}closeModel(){this.dialogRef.close()}}return C.\u0275fac=function(Z){return new(Z||C)(c.Y36(w.qu),c.Y36(y.s),c.Y36(s._),c.Y36(U.t),c.Y36(T.g),c.Y36(p.eN),c.Y36(_.uw),c.Y36(_.so))},C.\u0275cmp=c.Xpm({type:C,selectors:[["file-upload"]],decls:54,vars:31,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],[1,"row","rowm0","offset-2"],[1,"col-md-12","col-lg-12","pb-4"],[1,"col-md-4","col-lg-4"],["for","TileImage"],["type","file",3,"change"],[1,"col-md-4","col-lg-4","pt-3"],["maxlength","500","type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"col-md-2","col-lg-2"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","button",1,"btn","waves-effect","waves-light","btn-primary",3,"click"],[3,"isLoading"],["class","table table-bordered",4,"ngIf"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"]],template:function(Z,A){1&Z&&(c.TgZ(0,"button",0),c.NdJ("click",function(){return A.closeModel()}),c._uU(1," \xd7"),c.qZA(),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"h2"),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.qZA(),c.TgZ(7,"div",3),c._UZ(8,"label",4),c.TgZ(9,"input",5),c.NdJ("change",function(v){return A.onSelectFile1(v)}),c.qZA(),c.qZA(),c.TgZ(10,"div",6),c.TgZ(11,"input",7),c.NdJ("ngModelChange",function(v){return A.fileone=v}),c.ALo(12,"translate"),c.qZA(),c.qZA(),c._UZ(13,"div",8),c.TgZ(14,"div",3),c._UZ(15,"label",4),c.TgZ(16,"input",5),c.NdJ("change",function(v){return A.onSelectFile2(v)}),c.qZA(),c.qZA(),c.TgZ(17,"div",6),c.TgZ(18,"input",7),c.NdJ("ngModelChange",function(v){return A.filetwo=v}),c.ALo(19,"translate"),c.qZA(),c.qZA(),c._UZ(20,"div",8),c.TgZ(21,"div",3),c._UZ(22,"label",4),c.TgZ(23,"input",5),c.NdJ("change",function(v){return A.onSelectFile3(v)}),c.qZA(),c.qZA(),c.TgZ(24,"div",6),c.TgZ(25,"input",7),c.NdJ("ngModelChange",function(v){return A.filethree=v}),c.ALo(26,"translate"),c.qZA(),c.qZA(),c._UZ(27,"div",8),c.TgZ(28,"div",3),c._UZ(29,"label",4),c.TgZ(30,"input",5),c.NdJ("change",function(v){return A.onSelectFile4(v)}),c.qZA(),c.qZA(),c.TgZ(31,"div",6),c.TgZ(32,"input",7),c.NdJ("ngModelChange",function(v){return A.filefour=v}),c.ALo(33,"translate"),c.qZA(),c.qZA(),c._UZ(34,"div",8),c.TgZ(35,"div",3),c._UZ(36,"label",4),c.TgZ(37,"input",5),c.NdJ("change",function(v){return A.onSelectFile5(v)}),c.qZA(),c.qZA(),c.TgZ(38,"div",6),c.TgZ(39,"input",7),c.NdJ("ngModelChange",function(v){return A.filefive=v}),c.ALo(40,"translate"),c.qZA(),c.qZA(),c._UZ(41,"div",8),c.qZA(),c.TgZ(42,"div",9),c.TgZ(43,"div",10),c.TgZ(44,"input",11),c.NdJ("click",function(){return A.closeModel()}),c.ALo(45,"translate"),c.qZA(),c._uU(46," \xa0 "),c.TgZ(47,"button",12),c.NdJ("click",function(){return A.uploadFiles()}),c._uU(48),c.ALo(49,"translate"),c.qZA(),c.qZA(),c.qZA(),c._UZ(50,"br"),c.TgZ(51,"div"),c._UZ(52,"spinner-loader",13),c.YNc(53,j,9,7,"table",14),c.qZA()),2&Z&&(c.xp6(5),c.Oqu(c.lcZ(6,15,"Document_Upload")),c.xp6(6),c.s9C("placeholder",c.lcZ(12,17,"Please_Enter")),c.Q6J("ngModel",A.fileone),c.xp6(7),c.s9C("placeholder",c.lcZ(19,19,"Please_Enter")),c.Q6J("ngModel",A.filetwo),c.xp6(7),c.s9C("placeholder",c.lcZ(26,21,"Please_Enter")),c.Q6J("ngModel",A.filethree),c.xp6(7),c.s9C("placeholder",c.lcZ(33,23,"Please_Enter")),c.Q6J("ngModel",A.filefour),c.xp6(7),c.s9C("placeholder",c.lcZ(40,25,"Please_Enter")),c.Q6J("ngModel",A.filefive),c.xp6(5),c.s9C("value",c.lcZ(45,27,"Cancel")),c.xp6(4),c.Oqu(c.lcZ(49,29,"Save")),c.xp6(4),c.Q6J("isLoading",A.isLoading),c.xp6(1),c.Q6J("ngIf",A.uploadedFiles&&A.uploadedFiles.length>0))},directives:[w.Fj,w.nD,w.JJ,w.On,t.r,q.O5,q.sg],pipes:[O.X$],encapsulation:2}),C})()},4041:(tt,E,m)=>{m.d(E,{r:()=>U,R:()=>T});var c=m(7716),w=m(8583),y=m(4885);function s(p,_){1&p&&(c.TgZ(0,"div",1),c._UZ(1,"mat-progress-spinner",2),c.qZA())}let U=(()=>{class p{constructor(){this.isLoading=!1}}return p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=c.Xpm({type:p,selectors:[["spinner-loader"]],inputs:{isLoading:"isLoading"},decls:1,vars:1,consts:[["style","display: flex; justify-content: center; align-items: center; background: white;",4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center","background","white"],["color","primary","strokeWidth","3","diameter","30","mode","indeterminate"]],template:function(t,q){1&t&&c.YNc(0,s,2,0,"div",0),2&t&&c.Q6J("ngIf",q.isLoading)},directives:[w.O5,y.Ou],encapsulation:2}),p})();function T(p,_){return t=>{const O=t.controls[_];O.errors&&!O.errors.confirmedValidator||O.setErrors(t.controls[p].value!==O.value?{confirmedValidator:!0}:null)}}}}]);