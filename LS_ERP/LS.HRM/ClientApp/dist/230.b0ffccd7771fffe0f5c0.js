"use strict";(self.webpackChunkclient_app=self.webpackChunkclient_app||[]).push([[230],{8230:(tO,Be,X)=>{X.r(Be),X.d(Be,{OperationalmgtModule:()=>z9});var Z=X(8583),qo=X(7453),D=X(4655),l=X(3679),ot=X(9761),it=X(4395),nt=X(7519),at=X(3190),pt=X(8002),t=X(7716),v=X(3048);let y=(()=>{class i{constructor(e){var o;e.SetApiEndPoint(null===(o=e.getUser())||void 0===o?void 0:o.opmUrl)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v._))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ParentOptMgtComponent"]],decls:0,vars:0,template:function(e,o){},encapsulation:2}),i})();var Ae=X(6738),N=X(1841),q=X(5830),b=X(7278),f=X(9790),w=X(2013),E=X(7928),At=X(4727),lt=X(1554),V=X(3250),j=X(1627),ft=X(8295),Ut=X(2458),ut=X(8590);function bo(i,a){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" ",e.value,"-",e.text," ")}}function yo(i,a){if(1&i&&(t.TgZ(0,"option",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(t.lcZ(2,2,e.value))}}function So(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",32),t._uU(4),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=a.day,s=t.oxw(2);t.xp6(2),t.hij(" ",e.employeeNumber," "),t.xp6(1),t.s9C("matTooltip",s.getCellInfo(o,n)),t.xp6(1),t.hij(" ",s.getDay(e)," ")}}function wo(i,a){if(1&i&&(t.TgZ(0,"div",29),t.TgZ(1,"table",30),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"tbody"),t.YNc(10,So,5,3,"tr",31),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,5,"Employee")," "),t.xp6(3),t.hij(" ",e.form.controls.monthYear.value.toDateString()," "),t.xp6(2),t.Q6J("ngForOf",e.listOfRoasters),t.xp6(3),t.Oqu(t.lcZ(14,7,"Total_Shifts")),t.xp6(3),t.hij(" ",e.totalShiftsCol[e.day]," ")}}let Uo=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfRoasters=[],this.listOfDays=[],this.sequence=1,this.editsequence=0,this.remarks="",this.shiftsFormControls=new l.Oe([new l.NI("")]),this.noOfDays=0,this.saveEnable=!1,this.editEnable=!1,this.monthYear="",this.employeeNumber="",this.employeeName="",this.s=[],this.custCodeControl=new l.NI("",l.kI.required),this.empCodeControl=new l.NI(""),this.siteCodeList=[],this.customerCode="",this.listOfShiftCodes=[],this.employeeList=[],this.siteCode="",this.projectCode="",this.day=0,this.month=0,this.year=0,this.shiftCode="",this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0,this.newTotalShifts=0,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(this.customerCode),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(_=>(""!==_.trim()&&(this.isDataLoading=!0),this.filterCustCodes(_||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadShiftCodes(){this.apiService.getall("ShiftMaster/getSelectShiftsToSiteBySiteCode/"+this.siteCode).subscribe(e=>{this.listOfShiftCodes=e,this.findNoOfShifts()})}ngOnInit(){let e=new Date(Date.now());this.year=e.getFullYear(),this.setForm(),this.readonly="readonly"}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],monthYear:[""],siteCode:["",l.kI.required],month:[0],year:[this.year],employeeNumber:[""],shiftCode:[""]})}removeEntry(e){this.listOfRoasters.splice(e,1),this.saveEnable=!0,this.findNoOfShifts()}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.employeeNumber.setValue(""),this.form.controls.employeeName.setValue("")}goBack(){window.history.back()}onSelectionCustomerCode(e,o){let n="";n="change"==o?e.target.value:e.option.value,this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){this.form.patchValue({customerCode:s.custCode});let r=this.custCodeControl.value;this.form.value.customerCode=r,this.customerCode=r,this.loadSiteCodes(r)}else this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""),this.customerCode="",this.siteCodeList=[]}),this.form.controls.siteCode.setValue(""),this.siteCode="",this.loadData()}onSelectSiteCode(e){const o=e.target.value;this.form.value.siteCode=o,this.form.controls.siteCode.setValue(o),this.siteCode=o,this.loadData()}loadData(){if(""!=this.customerCode&&""!=this.siteCode&&0!=this.month&&0!=this.year){let o=new Date(this.year,this.month-1,1),n=new Date(this.year,this.month,0);this.listOfDays=[],this.noOfDays=n.getDate()-o.getDate()+1,this.apiService.getall(`MonthlyRoaster/getMonthlyRoaster/${this.customerCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(s=>{this.listOfRoasters=s,this.sequence=this.listOfRoasters.length+1}),this.loadWeekDays(),this.shiftsFormControls.clear();for(var e=1;e<=this.noOfDays;e++)this.shiftsFormControls.push(new l.NI(""));this.loadShiftCodes(),this.listOfShiftCodes=[]}else this.listOfRoasters=[]}loadWeekDays(){this.form.controls.monthYear.setValue(new Date(this.year,this.month-1,this.day));for(var e=1;e<=this.noOfDays;e++){let o=new Date(this.year,this.month-1,e),s={dayText:o.toDateString().substring(0,1),dayNumber:e,dayFullName:o.toDateString()};this.listOfDays.push(s)}}loadSiteCodes(e){this.apiService.getall(`CustomerSite/getSelectSiteListByCustCode/${e}`).subscribe(o=>{this.siteCodeList=o})}openDatePicker(e){e.open()}closeDatePicker(e,o){let s=Ae(e).format("YYYY-MM");this.day=parseInt(s.toString().substring(8,10)),this.month=parseInt(s.toString().substring(5,7)),this.year=Number(s.toString().substring(0,4)),""!=this.customerCode&&""!=this.siteCode&&this.loadData()}findNoOfShifts(){var e;this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0;let o=null===(e=this.listOfShiftCodes.find(c=>"True"==c.textTwo))||void 0===e?void 0:e.value;for(var n=0;n<this.noOfDays;n++){let c=0;for(var s=0;s<this.listOfRoasters.length;s++){let p=0,u=this.listOfRoasters[s];for(var r=0;r<u.s.length;r++)u.s[r]==o||""==u.s[r]||null==u.s[r]||(p++,r==n&&c++);this.totalShiftsRow.push(p)}this.totalShiftsCol.push(c),this.grandTotalShifts=this.grandTotalShifts+this.totalShiftsCol[n]}}RoastersCount(){return this.listOfRoasters.length}getCellInfo(e,o){return`Date:${new Date(this.year,this.month,this.day).toDateString()}\nShift: ${this.getShiftInfo(e,this.day)}`}getShiftInfo(e,o){return`${this.listOfRoasters[e].s[o]}`}getDay(e){return e.s[this.day]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attendance-from-monthly-roaster"]],features:[t.qOj],decls:56,vars:41,consts:[["novalidate","",1,"mt-4",3,"formGroup"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete","change"],[3,"optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],["formControlName","monthYear",1,"form-control","datapickerinput",3,"matDatepicker","placeholder","dateChange","click"],["matSuffix","",3,"for"],["dp2",""],["class","table-responsive",4,"ngIf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],[3,"value"],[1,"table-responsive"],["id","zero_config1",1,"table","table-bordered","no-wrap"],[4,"ngFor","ngForOf"],[3,"matTooltip"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._UZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",4),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"label",10),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t._UZ(16,"auto-loader",13),t.TgZ(17,"input",14),t.NdJ("change",function(r){return o.onSelectionCustomerCode(r,"change")}),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,"select")}),t.YNc(22,bo,2,3,"mat-option",17),t.ALo(23,"async"),t.qZA(),t.qZA(),t._UZ(24,"validation-message",18),t.qZA(),t.qZA(),t.TgZ(25,"div",9),t.TgZ(26,"div",11),t.TgZ(27,"label",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"select",19),t.NdJ("change",function(r){return o.onSelectSiteCode(r)}),t.TgZ(31,"option",20),t._uU(32),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.YNc(35,yo,3,4,"option",17),t.qZA(),t._UZ(36,"validation-message",18),t.qZA(),t.qZA(),t.TgZ(37,"div",9),t.TgZ(38,"div",11),t.TgZ(39,"label",10),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",11),t.TgZ(43,"div",12),t.TgZ(44,"input",21),t.NdJ("dateChange",function(r){t.CHM(n);const c=t.MAs(48);return o.closeDatePicker(r,c)})("click",function(){t.CHM(n);const r=t.MAs(48);return o.openDatePicker(r)}),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"mat-datepicker-toggle",22),t._UZ(47,"mat-datepicker",null,23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(49,wo,17,9,"div",24),t.TgZ(50,"div",25),t.TgZ(51,"div",6),t.TgZ(52,"div",26),t.TgZ(53,"input",27),t.NdJ("click",function(){return o.goBack()}),t.ALo(54,"translate"),t.qZA(),t._uU(55," \xa0 "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(21),s=t.MAs(48);t.Q6J("formGroup",o.form),t.xp6(12),t.Oqu(t.lcZ(13,21,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(18,23,"Please_Enter")," ",t.lcZ(19,25,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(23,27,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(4),t.Oqu(t.lcZ(29,29,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(33,31,"Select")," ",t.lcZ(34,33,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(41,35,"Date")),t.xp6(4),t.hYB("placeholder","",t.lcZ(45,37,"Select")," ","Year_Month",""),t.Q6J("matDatepicker",s),t.xp6(2),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",0!=o.RoastersCount()),t.xp6(4),t.s9C("value",t.lcZ(54,39,"Cancel"))}},directives:[l._Y,l.JL,l.sg,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,V.s,l.EJ,l.u,l.YN,l.Kr,j.hl,j.nW,ft.R9,j.Mq,Z.O5,Ut.ey,ut.gM],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();var k=X(9692),x=X(1494),m=X(2789),g=X(5289),dt=X(4803),T=X(2238);function Do(i,a){if(1&i&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.lnq("",e.value,"-",e.text,"-",e.textTwo,"")}}function Lo(i,a){if(1&i&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}let No=(()=>{class i extends y{constructor(e,o,n,s,r){super(o),this.dialogRef=e,this.authService=o,this.fb=n,this.apiService=s,this.utilService=r,this.branchCodeList=[],this.readonly="",this.id=0}ngOnInit(){this.setForm(),this.loadBranchCodes(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({id:[this.id],branchCode:["",l.kI.required],appAuth:["",l.kI.required],appLevel:[""],canApproveSurvey:[!1],canApproveEnquiry:[!1],canApproveProposal:[!1],canModifyEstimation:[!1],canConvertEnqToProject:[!1],canCreateRoaster:[!1],canEditRoaster:[!1],isFinalAuthority:[!1],canApproveEstimation:[!1],canApproveContract:[!1],canConvertEstimationToProposal:[!1],canConvertProposalToContract:[!1],canEditEnquiry:[!1],canAddSurveyorToEnquiry:[!1],canApprovePvReq:[!1]}),this.loadUsers()}removeItem(e){}loadUsers(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{this.userList=e})}submit(){this.form.value.appAuth=this.appAuth,this.form.value.branchCode=this.branchCode,this.form.value.appLevel=0,this.form.valid?this.apiService.post("OpAuthorities",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}loadBranchCodes(){this.apiService.getall("Branch/getSelectBranchCodeList").subscribe(e=>{this.branchCodeList=e})}setEditForm(){this.apiService.get("OpAuthorities/getAuthorityById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.branchCode=e.branchCode,this.appAuth=e.appAuth,this.form.controls.branchCode.disable({onlySelf:!0}),this.form.controls.appAuth.disable({onlySelf:!0}),this.form.controls.appLevel.disable({onlySelf:!0}))})}getAuthority(){""!=this.form.controls.branchCode.value&&""!=this.form.controls.appAuth.value&&(this.branchCode=this.form.controls.branchCode.value,this.appAuth=this.form.controls.appAuth.value,this.apiService.getall(`OpAuthorities/getAuthorityByBranchUserId/${this.branchCode}/${this.appAuth}`).subscribe(e=>{null!=e&&(this.id=e.id,this.setEditForm())}))}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(v._),t.Y36(l.qu),t.Y36(q.s),t.Y36(b.t))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-authorities"]],features:[t.qOj],decls:135,vars:77,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"cardtitle-divider"],[1,"table","table-bordered","no-wrap"],["formControlName","branchCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","appAuth",1,"custom-select","mr-sm-2",3,"change"],["type","checkbox","formControlName","canApproveEnquiry"],["type","checkbox","formControlName","canApproveSurvey"],["type","checkbox","formControlName","canApproveEstimation"],["type","checkbox","formControlName","canApproveProposal"],["type","checkbox","formControlName","canApproveContract"],["type","checkbox","formControlName","canModifyEstimation"],["type","checkbox","formControlName","canConvertEnqToProject"],["type","checkbox","formControlName","canConvertEstimationToProposal"],["type","checkbox","formControlName","canConvertProposalToContract"],["type","checkbox","formControlName","canCreateRoaster"],["type","checkbox","formControlName","canEditRoaster"],["type","checkbox","formControlName","isFinalAuthority"],["type","checkbox","formControlName","canEditEnquiry"],["type","checkbox","formControlName","canAddSurveyorToEnquiry"],["type","checkbox","formControlName","canApprovePvReq"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"nav",7),t.TgZ(11,"ol",8),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",9),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"li",10),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",4),t.TgZ(23,"div",12),t.TgZ(24,"div",13),t._UZ(25,"div",4),t._UZ(26,"div",14),t.TgZ(27,"table",15),t.TgZ(28,"tr"),t.TgZ(29,"td"),t.TgZ(30,"select",16),t.NdJ("change",function(){return o.getAuthority()}),t.TgZ(31,"option",17),t._uU(32),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.YNc(35,Do,2,4,"option",18),t.qZA(),t._UZ(36,"validation-message",19),t.qZA(),t.TgZ(37,"td"),t.TgZ(38,"select",20),t.NdJ("change",function(){return o.getAuthority()}),t.TgZ(39,"option",17),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.YNc(42,Lo,2,3,"option",18),t.qZA(),t._UZ(43,"validation-message",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"table"),t.TgZ(45,"tr"),t.TgZ(46,"td"),t._UZ(47,"input",21),t.qZA(),t.TgZ(48,"td"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"td"),t._UZ(52,"input",22),t.qZA(),t.TgZ(53,"td"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"td"),t._UZ(58,"input",23),t.qZA(),t.TgZ(59,"td"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"td"),t._UZ(63,"input",24),t.qZA(),t.TgZ(64,"td"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.qZA(),t.TgZ(67,"tr"),t.TgZ(68,"td"),t._UZ(69,"input",25),t.qZA(),t.TgZ(70,"td"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"td"),t._UZ(74,"input",26),t.qZA(),t.TgZ(75,"td"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.qZA(),t.TgZ(78,"tr"),t.TgZ(79,"td"),t._UZ(80,"input",27),t.qZA(),t.TgZ(81,"td"),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"td"),t._UZ(85,"input",28),t.qZA(),t.TgZ(86,"td"),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.qZA(),t.TgZ(89,"tr"),t.TgZ(90,"td"),t._UZ(91,"input",29),t.qZA(),t.TgZ(92,"td"),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.TgZ(95,"td"),t._UZ(96,"input",30),t.qZA(),t.TgZ(97,"td"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.qZA(),t.TgZ(100,"tr"),t.TgZ(101,"td"),t._UZ(102,"input",31),t.qZA(),t.TgZ(103,"td"),t._uU(104),t.ALo(105,"translate"),t.qZA(),t.TgZ(106,"td"),t._UZ(107,"input",32),t.qZA(),t.TgZ(108,"td"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.qZA(),t.TgZ(111,"tr"),t.TgZ(112,"td"),t._UZ(113,"input",33),t.qZA(),t.TgZ(114,"td"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"td"),t._UZ(118,"input",34),t.qZA(),t.TgZ(119,"td"),t._uU(120),t.ALo(121,"translate"),t.qZA(),t.qZA(),t.TgZ(122,"tr"),t.TgZ(123,"td"),t._UZ(124,"input",35),t.qZA(),t.TgZ(125,"td"),t._uU(126),t.ALo(127,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(128,"div",36),t.TgZ(129,"div",37),t.TgZ(130,"input",38),t.NdJ("click",function(){return o.closeModel()}),t.ALo(131,"translate"),t.qZA(),t._uU(132," \xa0 "),t._UZ(133,"input",39),t.ALo(134,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,29,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(8),t.hij(" ",t.lcZ(14,31,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(17,33,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(20,35,"Operations_Authorities")),t.xp6(13),t.AsE("",t.lcZ(33,37,"Select")," ",t.lcZ(34,39,"Branch")," "),t.xp6(3),t.Q6J("ngForOf",o.branchCodeList),t.xp6(1),t.Q6J("control",o.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(41,41,"Select_User")),t.xp6(2),t.Q6J("ngForOf",o.userList),t.xp6(1),t.Q6J("control",o.form.controls.appAuth),t.xp6(6),t.Oqu(t.lcZ(50,43,"Approve_Enquiry")),t.xp6(5),t.Oqu(t.lcZ(55,45,"Approve_Survey")),t.xp6(6),t.Oqu(t.lcZ(61,47,"Approve_Estimation")),t.xp6(5),t.Oqu(t.lcZ(66,49,"Approve_Proposal")),t.xp6(6),t.Oqu(t.lcZ(72,51,"Approve_Contract")),t.xp6(5),t.Oqu(t.lcZ(77,53,"Modify_Estimation")),t.xp6(6),t.Oqu(t.lcZ(83,55,"Convert_Enquiry_To_Project")),t.xp6(5),t.Oqu(t.lcZ(88,57,"Convert_Estimation_To_Proposal")),t.xp6(6),t.Oqu(t.lcZ(94,59,"Convert_Proposal_To_Contract")),t.xp6(5),t.Oqu(t.lcZ(99,61,"Creat_Roaster")),t.xp6(6),t.Oqu(t.lcZ(105,63,"Edit_Roaster")),t.xp6(5),t.Oqu(t.lcZ(110,65,"Is_FinalAuthority")),t.xp6(6),t.Oqu(t.lcZ(116,67,"Create_Edit_Enquiry")),t.xp6(5),t.Oqu(t.lcZ(121,69,"Add_Surveyor_To_Enquiry")),t.xp6(6),t.Oqu(t.lcZ(127,71,"Approve_Project_Variation")),t.xp6(4),t.s9C("value",t.lcZ(131,73,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(134,75,"Save")))},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,l.YN,l.Kr,Z.sg,V.s,l.Wl],pipes:[f.X$],encapsulation:2}),i})();var B=X(6397),Zt=X(4041);function Eo(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function Oo(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function ko(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"User_Id")," "))}function jo(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.appAuth," ")}}function Mo(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"User_Name")," "))}function Ro(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.userName," ")}}function Po(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAE")," "))}function Fo(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Io(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Yo(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Fo,3,3,"span",50),t.YNc(2,Io,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApproveEnquiry)("ngIfElse",o)}}function Jo(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAS")," "))}function Qo(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Bo(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Ho(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Qo,3,3,"span",50),t.YNc(2,Bo,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApproveSurvey)("ngIfElse",o)}}function $o(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAE")," "))}function Vo(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Go(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Wo(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Vo,3,3,"span",50),t.YNc(2,Go,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApproveEstimation)("ngIfElse",o)}}function zo(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAP")," "))}function Xo(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Ko(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function ti(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Xo,3,3,"span",50),t.YNc(2,Ko,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApproveProposal)("ngIfElse",o)}}function ei(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAC")," "))}function oi(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function ii(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function ni(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,oi,3,3,"span",50),t.YNc(2,ii,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApproveContract)("ngIfElse",o)}}function ai(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CME")," "))}function si(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function ri(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function li(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,si,3,3,"span",50),t.YNc(2,ri,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canModifyEstimation)("ngIfElse",o)}}function ci(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CCEP")," "))}function pi(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function ui(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function di(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,pi,3,3,"span",50),t.YNc(2,ui,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canConvertEnqToProject)("ngIfElse",o)}}function _i(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CCEsP")," "))}function mi(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function gi(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function hi(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,mi,3,3,"span",50),t.YNc(2,gi,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canConvertEstimationToProposal)("ngIfElse",o)}}function Zi(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CCPC")," "))}function fi(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Ai(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Ci(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,fi,3,3,"span",50),t.YNc(2,Ai,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canConvertProposalToContract)("ngIfElse",o)}}function Ti(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CCR")," "))}function vi(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function xi(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function qi(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,vi,3,3,"span",50),t.YNc(2,xi,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canCreateRoaster)("ngIfElse",o)}}function bi(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CER")," "))}function yi(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Si(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function wi(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,yi,3,3,"span",50),t.YNc(2,Si,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canEditRoaster)("ngIfElse",o)}}function Ui(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CEE")," "))}function Di(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Li(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Ni(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Di,3,3,"span",50),t.YNc(2,Li,3,3,"ng-template",54,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canEditEnquiry)("ngIfElse",o)}}function Ei(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CASE")," "))}function Oi(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function ki(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function ji(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Oi,3,3,"span",50),t.YNc(2,ki,3,3,"ng-template",54,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canAddSurveyorToEnquiry)("ngIfElse",o)}}function Mi(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAPV")," "))}function Ri(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Pi(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Fi(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Ri,3,3,"span",50),t.YNc(2,Pi,3,3,"ng-template",54,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApprovePvReq)("ngIfElse",o)}}function Ii(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Yi(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",49),t.TgZ(1,"a",56),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",57),t.qZA(),t.qZA()}}function Ji(i,a){1&i&&t._UZ(0,"tr",58)}function Qi(i,a){1&i&&t._UZ(0,"tr",59)}const Bi=function(){return{standalone:!0}};let Hi=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.displayedColumns=["branchCode","appAuth","userName","canApproveEnquiry","canApproveSurvey","canApproveEstimation","canApproveProposal","canApproveContract","canModifyEstimation","canConvertEnqToProject","canConvertEstimationToProposal","canConvertProposalToContract","canCreateRoaster","canEditRoaster","canEditEnquiry","canAddSurveyorToEnquiry","canApprovePvReq","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadServices(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadServices(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("OpAuthorities/getAuthoritiesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,No);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Authority","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Authority","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("OpAuthorities",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-authorities"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:102,vars:38,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-4","col-lg-4"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-4","col-lg-4","text-center"],[3,"isLoading"],[1,"col-md-4","col-lg-4","text-right"],["data-toggle","modal","data-target","#addServiceUnitMap","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","branchCode","sticky",""],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appAuth","sticky",""],["matColumnDef","userName","sticky",""],["matColumnDef","canApproveEnquiry"],["matColumnDef","canApproveSurvey"],["matColumnDef","canApproveEstimation"],["matColumnDef","canApproveProposal"],["matColumnDef","canApproveContract"],["matColumnDef","canModifyEstimation"],["matColumnDef","canConvertEnqToProject"],["matColumnDef","canConvertEstimationToProposal"],["matColumnDef","canConvertProposalToContract"],["matColumnDef","canCreateRoaster"],["matColumnDef","canEditRoaster"],["matColumnDef","canEditEnquiry"],["matColumnDef","canAddSurveyorToEnquiry"],["matColumnDef","canApprovePvReq"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["stickyEnd",""],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"nav",5),t.TgZ(9,"ol",6),t.TgZ(10,"li",7),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"li",7),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"li",8),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",9),t.TgZ(20,"div",1),t.TgZ(21,"div",10),t.TgZ(22,"div",11),t.TgZ(23,"div",12),t.TgZ(24,"div",1),t.TgZ(25,"div",10),t.TgZ(26,"h4",13),t._uU(27),t.ALo(28,"translate"),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.TgZ(30,"div",14),t.TgZ(31,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.TgZ(33,"div",16),t._UZ(34,"spinner-loader",17),t.qZA(),t.TgZ(35,"div",18),t.TgZ(36,"a",19),t.NdJ("click",function(){return o.create()}),t._UZ(37,"i",20),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(40,"div",21),t.TgZ(41,"div",22),t.ynx(42),t.TgZ(43,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(44,24),t.YNc(45,Eo,3,3,"th",25),t.YNc(46,Oo,2,1,"td",26),t.BQk(),t.ynx(47,27),t.YNc(48,ko,3,3,"th",25),t.YNc(49,jo,2,1,"td",26),t.BQk(),t.ynx(50,28),t.YNc(51,Mo,3,3,"th",25),t.YNc(52,Ro,2,1,"td",26),t.BQk(),t.ynx(53,29),t.YNc(54,Po,3,3,"th",25),t.YNc(55,Yo,4,2,"td",26),t.BQk(),t.ynx(56,30),t.YNc(57,Jo,3,3,"th",25),t.YNc(58,Ho,4,2,"td",26),t.BQk(),t.ynx(59,31),t.YNc(60,$o,3,3,"th",25),t.YNc(61,Wo,4,2,"td",26),t.BQk(),t.ynx(62,32),t.YNc(63,zo,3,3,"th",25),t.YNc(64,ti,4,2,"td",26),t.BQk(),t.ynx(65,33),t.YNc(66,ei,3,3,"th",25),t.YNc(67,ni,4,2,"td",26),t.BQk(),t.ynx(68,34),t.YNc(69,ai,3,3,"th",25),t.YNc(70,li,4,2,"td",26),t.BQk(),t.ynx(71,35),t.YNc(72,ci,3,3,"th",25),t.YNc(73,di,4,2,"td",26),t.BQk(),t.ynx(74,36),t.YNc(75,_i,3,3,"th",25),t.YNc(76,hi,4,2,"td",26),t.BQk(),t.ynx(77,37),t.YNc(78,Zi,3,3,"th",25),t.YNc(79,Ci,4,2,"td",26),t.BQk(),t.ynx(80,38),t.YNc(81,Ti,3,3,"th",25),t.YNc(82,qi,4,2,"td",26),t.BQk(),t.ynx(83,39),t.YNc(84,bi,3,3,"th",25),t.YNc(85,wi,4,2,"td",26),t.BQk(),t.ynx(86,40),t.YNc(87,Ui,3,3,"th",25),t.YNc(88,Ni,4,2,"td",26),t.BQk(),t.ynx(89,41),t.YNc(90,Ei,3,3,"th",25),t.YNc(91,ji,4,2,"td",26),t.BQk(),t.ynx(92,42),t.YNc(93,Mi,3,3,"th",25),t.YNc(94,Fi,4,2,"td",26),t.BQk(),t.ynx(95,43),t.YNc(96,Ii,3,3,"th",44),t.YNc(97,Yi,3,0,"td",26),t.BQk(),t.YNc(98,Ji,1,0,"tr",45),t.YNc(99,Qi,1,0,"tr",46),t.qZA(),t.BQk(),t.qZA(),t.ynx(100),t.TgZ(101,"mat-paginator",47),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.AsE(" ",t.lcZ(5,19,"Operations")," ",t.lcZ(6,21,"Authorities")," "),t.xp6(7),t.hij(" ",t.lcZ(12,23,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(15,25,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(18,27,"Authorities")),t.xp6(10),t.AsE("",t.lcZ(28,29,"Authorities")," ",t.lcZ(29,31,"List")," "),t.xp6(4),t.MGl("placeholder","",t.lcZ(32,33,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(37,Bi)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(39,35,"Add_New_Authority")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(55),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function $i(i,a){1&i&&(t._UZ(0,"input",16),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}const zt=function(){return{standalone:!0}};let He=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0?this.setEditForm():this.elementData={clauseTitleEng:"",clauseTitleArb:"",clauseSubTitleEng:"",clauseSubTitleArb:"",DescriptionEng:"",DescriptionArb:""}}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({})}submit(){var e,o,n,s,r,c,p,u,d,_,h,A;null!=(null===(e=this.elementData)||void 0===e?void 0:e.clauseTitleEng)&&null!=(null===(o=this.elementData)||void 0===o?void 0:o.clauseTitleArb)&&""!=(null===(n=this.elementData)||void 0===n?void 0:n.clauseTitleEng)&&""!=(null===(s=this.elementData)||void 0===s?void 0:s.clauseTitleArb)||null!=(null===(r=this.elementData)||void 0===r?void 0:r.clauseSubTitleEng)&&null!=(null===(c=this.elementData)||void 0===c?void 0:c.clauseSubTitleArb)&&""!=(null===(p=this.elementData)||void 0===p?void 0:p.clauseSubTitleEng)&&""!=(null===(u=this.elementData)||void 0===u?void 0:u.clauseSubTitleArb)||null!=(null===(d=this.elementData)||void 0===d?void 0:d.clauseDescriptionEng)&&null!=(null===(_=this.elementData)||void 0===_?void 0:_.clauseDescriptionArb)&&""!=(null===(h=this.elementData)||void 0===h?void 0:h.clauseDescriptionEng)&&""!=(null===(A=this.elementData)||void 0===A?void 0:A.clauseDescriptionArb)?this.apiService.post("ContractFormTemplateElements",this.elementData).subscribe(C=>{C&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},C=>{console.error(C),this.utilService.ShowApiErrorMessage(C)}):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("ContractFormTemplateElements/getContractFormTemplateElementById",this.id).subscribe(e=>{this.elementData=e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-contract-form-elements"]],features:[t.qOj],decls:61,vars:71,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"scroll-sidebar"],[1,"outer"],[1,"col-md-12","col-lg-12"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%","padding","10px"],[2,"width","10%","padding","10px"],[2,"width","45%","padding","10px","vertical-align","top"],["type","text",1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"table",7),t.TgZ(11,"tr"),t.TgZ(12,"th",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"td",9),t.TgZ(16,"span"),t.TgZ(17,"input",10),t.NdJ("ngModelChange",function(s){return o.elementData.clauseTitleEng=s}),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"td",9),t.TgZ(21,"span"),t.TgZ(22,"input",10),t.NdJ("ngModelChange",function(s){return o.elementData.clauseTitleArb=s}),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"th",8),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td",9),t.TgZ(30,"span"),t.TgZ(31,"input",10),t.NdJ("ngModelChange",function(s){return o.elementData.clauseSubTitleEng=s}),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"td",9),t.TgZ(35,"span"),t.TgZ(36,"input",10),t.NdJ("ngModelChange",function(s){return o.elementData.clauseSubTitleArb=s}),t.ALo(37,"translate"),t.ALo(38,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"tr"),t.TgZ(40,"th",8),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"td",9),t.TgZ(44,"span"),t.TgZ(45,"textarea",11),t.NdJ("ngModelChange",function(s){return o.elementData.clauseDescriptionEng=s}),t.ALo(46,"translate"),t.ALo(47,"translate"),t._uU(48,"             "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"td",9),t.TgZ(50,"span"),t.TgZ(51,"textarea",11),t.NdJ("ngModelChange",function(s){return o.elementData.clauseDescriptionArb=s}),t.ALo(52,"translate"),t.ALo(53,"translate"),t._uU(54,"             "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",12),t.TgZ(56,"div",13),t.TgZ(57,"input",14),t.NdJ("click",function(){return o.closeModel()}),t.ALo(58,"translate"),t.qZA(),t._uU(59," \xa0 "),t.YNc(60,$i,2,3,"input",15),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,31,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(8),t.hij(" ",t.lcZ(14,33,"Title")," "),t.xp6(4),t.hYB("placeholder","",t.lcZ(18,35,"Please_Enter")," ",t.lcZ(19,37,"Title"),""),t.Q6J("ngModel",o.elementData.clauseTitleEng)("ngModelOptions",t.DdM(65,zt)),t.xp6(5),t.hYB("placeholder","",t.lcZ(23,39,"Please_Enter")," ",t.lcZ(24,41,"Title"),""),t.Q6J("ngModel",o.elementData.clauseTitleArb)("ngModelOptions",t.DdM(66,zt)),t.xp6(5),t.hij(" ",t.lcZ(28,43,"Sub_Title")," "),t.xp6(4),t.hYB("placeholder","",t.lcZ(32,45,"Please_Enter")," ",t.lcZ(33,47,"Sub Title"),""),t.Q6J("ngModel",o.elementData.clauseSubTitleEng)("ngModelOptions",t.DdM(67,zt)),t.xp6(5),t.hYB("placeholder","",t.lcZ(37,49,"Please_Enter")," ",t.lcZ(38,51,"Sub_Title"),""),t.Q6J("ngModel",o.elementData.clauseSubTitleArb)("ngModelOptions",t.DdM(68,zt)),t.xp6(5),t.hij(" ",t.lcZ(42,53,"Description")," "),t.xp6(4),t.hYB("placeholder","",t.lcZ(46,55,"Please_Enter")," ",t.lcZ(47,57,"Title"),""),t.Q6J("ngModel",o.elementData.clauseDescriptionEng)("ngModelOptions",t.DdM(69,zt)),t.xp6(6),t.hYB("placeholder","",t.lcZ(52,59,"Please_Enter")," ",t.lcZ(53,61,"Title"),""),t.Q6J("ngModel",o.elementData.clauseDescriptionArb)("ngModelOptions",t.DdM(70,zt)),t.xp6(6),t.s9C("value",t.lcZ(58,63,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.On,Z.O5],pipes:[f.X$],encapsulation:2}),i})();var Vi=X(205),$e=X(4945),Ve=X(5304);let W=(()=>{class i{constructor(e,o){this.http=e,this.authService=o,this.apiURL=""}set EnquiryNumber(e){this.enquiryNumber=e}get EnquiryNumber(){return this.enquiryNumber}set EnquiryID(e){this.enquiryID=e}get EnquiryID(){return this.enquiryID}set Input(e){this.input=e}get Input(){return this.input}set SurveyorCode(e){this.surveyorCode=e}get SurveyorCode(){return this.surveyorCode}verifyCode(e){return this.apiURL=this.authService.ApiEndPoint(),this.http.get(`${this.apiURL}/${e}`)}openApprovalDialog(e,o){return e.open(o,{disableClose:!0})}openAutoWidthDialog(e,o){return e.open(o,{disableClose:!0,width:"auto"})}openAutoWidthNHeightDialog(e,o){return e.open(o,{disableClose:!0,width:"auto",height:"auto"})}openAutoHeightWidthDialog(e,o){return e.open(o,{disableClose:!0,width:"100%",height:"100%",direction:this.isArabic()?"rtl":"ltr"})}openFullWidthDialog(e,o){return e.open(o,{disableClose:!0,width:"100%",height:"auto",direction:this.isArabic()?"rtl":"ltr"})}confirmationDialog(e,o){return e.open(o,{disableClose:!0,width:"auto",height:"auto"})}fullWindow(e,o){return e.open(o,{disableClose:!0,width:"100%",height:"100%",direction:this.isArabic()?"rtl":"ltr"})}isArabic(){return"ar"==this.selectedLanguage()}getByObj(e,o){return this.apiURL=this.authService.GetOprApiEndPoint(),this.http.get(`${this.apiURL}/${e}`,o)}selectedLanguage(){var e;return null!==(e=localStorage.getItem("language"))&&void 0!==e?e:"en-US"}getPaginationWithFilter(e,o,n){return this.apiURL=this.authService.GetOprApiEndPoint(),this.http.post(`${this.apiURL}/${e}?${o}`,n).pipe((0,$e.X)(1),(0,Ve.K)(this.handleError))}getWithFilter(e,o){return this.apiURL=this.authService.GetOprApiEndPoint(),this.http.post(`${this.apiURL}/${e}`,o).pipe((0,$e.X)(1),(0,Ve.K)(this.handleError))}handleError(e){return(0,Vi._)(e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(N.eN),t.LFG(v._))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Gi(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Title")," "))}function Wi(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.clauseTitleEng)}}function zi(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Title")," "))}function Xi(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.clauseTitleArb)}}function Ki(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Sub_Title")," "))}function tn(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.clauseSubTitleEng)}}function en(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Sub_Title")," "))}function on(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.clauseSubTitleArb)}}function nn(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function an(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",37),t.TgZ(1,"span",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().view(s.id)}),t._UZ(2,"i",39),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"span",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(5,"i",40),t._uU(6,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("View")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function sn(i,a){1&i&&t._UZ(0,"tr",41)}function rn(i,a){1&i&&t._UZ(0,"tr",42)}const ln=function(){return{standalone:!0}};let cn=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.translate=A,this.displayedColumns=["clauseTitleEng","clauseSubTitleEng","clauseTitleArb","clauseSubTitleArb","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ContractFormTemplateElements/getContractFormTemplateElementsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,He);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Contract_Form_Template_Element","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Contract_form_Template_Element","Update")}view(e){this.openDialogManage(e,g.Oi.update,"Contract_form_Template_Element","View")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ContractFormTemplateElements",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-contract-form-elements"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:56,vars:28,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","clauseTitleEng"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","clauseTitleArb"],["matColumnDef","clauseSubTitleEng"],["matColumnDef","clauseSubTitleArb"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click"],[1,"fa","fa-eye"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t.TgZ(28,"a",16),t.NdJ("click",function(){return o.create()}),t._UZ(29,"i",17),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(32,"div",18),t.TgZ(33,"div",19),t.TgZ(34,"div",20),t.ynx(35),t.TgZ(36,"table",21),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(37,22),t.YNc(38,Gi,3,3,"th",23),t.YNc(39,Wi,2,1,"td",24),t.BQk(),t.ynx(40,25),t.YNc(41,zi,3,3,"th",23),t.YNc(42,Xi,2,1,"td",24),t.BQk(),t.ynx(43,26),t.YNc(44,Ki,3,3,"th",23),t.YNc(45,tn,2,1,"td",24),t.BQk(),t.ynx(46,27),t.YNc(47,en,3,3,"th",23),t.YNc(48,on,2,1,"td",24),t.BQk(),t.ynx(49,28),t.YNc(50,nn,3,3,"th",29),t.YNc(51,an,7,2,"td",30),t.BQk(),t.YNc(52,sn,1,0,"tr",31),t.YNc(53,rn,1,0,"tr",32),t.qZA(),t.ynx(54),t.TgZ(55,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,15,"Contract_Form_Template_Elements")," "),t.xp6(6),t.hij(" ",t.lcZ(11,17,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,19,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,21,"Contract_Form_Template_Elements")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,23,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(27,ln)),t.xp6(5),t.hij("",t.lcZ(31,25,"Add_New")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();var Et=X(4376);function pn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.titleOfServiceEng," ")}}const Nt=function(){return{standalone:!0}};function un(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",25),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.titleOfServiceEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.titleOfServiceEng)("ngModelOptions",t.DdM(8,Nt))}}function dn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.titleOfServiceArb," ")}}function _n(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",25),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.titleOfServiceArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.titleOfServiceArb)("ngModelOptions",t.DdM(8,Nt))}}function mn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.companyDetailsEng," ")}}function gn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",26),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.companyDetailsEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Compnay_Details"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.companyDetailsEng)("ngModelOptions",t.DdM(8,Nt))}}function hn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.companyDetailsArb," ")}}function Zn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.companyDetailsArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Compnay_Details"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.companyDetailsArb)("ngModelOptions",t.DdM(8,Nt))}}function fn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.customerDetailsEng," ")}}function An(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.customerDetailsEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Customer_Details"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.customerDetailsEng)("ngModelOptions",t.DdM(8,Nt))}}function Cn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.customerDetailsArb," ")}}function Tn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.customerDetailsArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Customer_Details"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.customerDetailsArb)("ngModelOptions",t.DdM(8,Nt))}}function vn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.preambleEng," ")}}function xn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.preambleEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Preamble"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.preambleEng)("ngModelOptions",t.DdM(8,Nt))}}function qn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.preambleArb," ")}}function bn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.preambleArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Preamble"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.preambleArb)("ngModelOptions",t.DdM(8,Nt))}}function yn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.firstPartyEng," ")}}function Sn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.firstPartyEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"First_Party"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.firstPartyEng)("ngModelOptions",t.DdM(8,Nt))}}function wn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.firstPartyArb," ")}}function Un(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.firstPartyArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"First_Party"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.firstPartyArb)("ngModelOptions",t.DdM(8,Nt))}}function Dn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.secondPartyEng," ")}}function Ln(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.secondPartyEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Second_Party"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.secondPartyEng)("ngModelOptions",t.DdM(8,Nt))}}function Nn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.secondPartyArb," ")}}function En(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.secondPartyArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Second_Party"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.secondPartyArb)("ngModelOptions",t.DdM(8,Nt))}}function On(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",42),t.TgZ(1,"ng-select",43),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(3).editingClauseId=n})("change",function(){return t.CHM(e),t.oxw(3).afterSelectClause()}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("items",e.clausesTitleSelectionList)("ngModel",e.editingClauseId)("ngModelOptions",t.DdM(3,Nt))}}function kn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseTitleEng," ")}}function jn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"ng-select",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(3).editingClauseId=n})("change",function(){return t.CHM(e),t.oxw(3).afterSelectClause()}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("items",e.clausesSubTitleSelectionList)("ngModel",e.editingClauseId)("ngModelOptions",t.DdM(3,Nt))}}function Mn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseSubTitleEng," ")}}function Rn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"ng-select",45),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(3).editingClauseId=n})("change",function(){return t.CHM(e),t.oxw(3).afterSelectClause()}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("items",e.clausesDescriptionSelectionList)("ngModel",e.editingClauseId)("ngModelOptions",t.DdM(3,Nt))}}function Pn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseDescriptionEng," ")}}function Fn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).editClause(n)}),t._UZ(1,"i",15),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function In(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).moveUpClause(n)}),t._UZ(1,"i",46),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Move_Up"))}}function Yn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).moveDownClause(n)}),t._UZ(1,"i",47),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Move_Down"))}}function Jn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).insertNewClause(n)}),t._UZ(1,"i",48),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Insert_New"))}}function Qn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeClause(n)}),t._UZ(1,"i",49),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Remove"))}}function Bn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).cancel()}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Cancel"))}}function Hn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseTitleArb," ")}}function $n(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseSubTitleArb," ")}}function Vn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseDescriptionArb," ")}}function Gn(i,a){if(1&i&&(t.ynx(0,34),t.TgZ(1,"tr",35),t.TgZ(2,"td",36),t.YNc(3,On,2,4,"span",37),t.YNc(4,kn,2,1,"span",12),t.qZA(),t.TgZ(5,"td",38),t.YNc(6,jn,2,4,"span",12),t.YNc(7,Mn,2,1,"span",12),t.qZA(),t.TgZ(8,"td",39),t.YNc(9,Rn,2,4,"span",12),t.YNc(10,Pn,2,1,"span",12),t.qZA(),t.TgZ(11,"td",40),t.YNc(12,Fn,3,1,"span",41),t.YNc(13,In,3,1,"span",41),t.YNc(14,Yn,3,1,"span",41),t.YNc(15,Jn,3,1,"span",41),t.YNc(16,Qn,3,1,"span",41),t.YNc(17,Bn,3,1,"span",41),t.qZA(),t.qZA(),t.TgZ(18,"tr",35),t.TgZ(19,"td",36),t.YNc(20,Hn,2,1,"span",12),t.qZA(),t.TgZ(21,"td",38),t.YNc(22,$n,2,1,"span",12),t.qZA(),t.TgZ(23,"td",39),t.YNc(24,Vn,2,1,"span",12),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.s9C("id",o.getRowBackGroud(e)),t.xp6(2),t.Q6J("ngIf",(null==o.clausesTitleSelectionList?null:o.clausesTitleSelectionList.length)>0&&o.editClauseIndex==e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(2),t.Q6J("ngIf",(null==o.clausesSubTitleSelectionList?null:o.clausesSubTitleSelectionList.length)>0&&o.editClauseIndex==e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(2),t.Q6J("ngIf",(null==o.clausesDescriptionSelectionList?null:o.clausesDescriptionSelectionList.length)>0&&o.editClauseIndex==e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(2),t.Q6J("ngIf",-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",e>0&&-1==o.editClauseIndex&&-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",e<(null==o.contractTemplateData||null==o.contractTemplateData.clauses?null:o.contractTemplateData.clauses.length)-1&&-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",-1==o.editClauseIndex||o.editClauseIndex==e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(1),t.s9C("id",o.getRowBackGroud(e)),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e)}}function Wn(i,a){if(1&i&&(t.TgZ(0,"div",5),t.TgZ(1,"div",8),t.TgZ(2,"table",28),t.TgZ(3,"tr"),t.TgZ(4,"th",29),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",30),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",31),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",32),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.YNc(16,Gn,25,17,"ng-container",33),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,5,"Title")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"Sub_Title")," "),t.xp6(3),t.hij(" ",t.lcZ(12,9,"Description")," "),t.xp6(3),t.hij(" ",t.lcZ(15,11,"Action")," "),t.xp6(2),t.Q6J("ngForOf",null==e.contractTemplateData?null:e.contractTemplateData.clauses)}}let te=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(p),this.dialog=e,this.oprService=o,this.fb=n,this.http=s,this.router=r,this.apiService=c,this.authService=p,this.utilService=u,this.translate=d,this.notifyService=_,this.validationService=h,this.dialogRef=A,this.clausesSelectionList=[],this.clausesTitleSelectionList=[],this.clausesSubTitleSelectionList=[],this.clausesDescriptionSelectionList=[],this.isArabic=!1,this.clauses=[],this.editHeadItemNumber=-1,this.editClauseIndex=-1,this.editingClauseId=-1,this.type=""}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadClausesSelectionList(),this.id>0?this.apiService.get("ContractFormTemplates/getContractFormTemplateById",this.id).subscribe(e=>{console.log(e),null!=e&&(this.contractTemplateData.clauses=e.clauses.splice(0),this.contractTemplateData.templateHead=e.templateHead)}):(this.contractTemplateData.clauses=this.contractTemplateData.contractClauses.splice(0),this.contractTemplateData.templateHead=this.contractTemplateData.contractFormHead,console.log(this.contractTemplateData)),this.form=this.fb.group({}),console.log(this.contractTemplateData)}loadClausesSelectionList(){this.apiService.getall("contractFormTemplateElements/getAllContractFormTemplateElements").subscribe(e=>{console.log(e),this.clausesTitleSelectionList=[],this.clausesSubTitleSelectionList=[],this.clausesDescriptionSelectionList=[],null!=e&&(this.clausesSelectionList=e,this.clausesSelectionList.forEach(o=>{null!=o.clauseTitleEng&&null!=o.clauseTitleArb&&this.clausesTitleSelectionList.push(o),null!=o.clauseSubTitleEng&&null!=o.clauseSubTitleArb&&this.clausesSubTitleSelectionList.push(o),null!=o.clauseDescriptionEng&&null!=o.clauseDescriptionArb&&this.clausesDescriptionSelectionList.push(o)}))})}submit(){}closeModel(){this.dialogRef.close(!0)}translateToolTip(e){return`${this.translate.instant(e)}`}editClause(e){-1==this.editClauseIndex&&(this.editClauseIndex=e,this.editingClauseId=-1,document.getElementById("clauseSelection").scrollIntoView({block:"start",behavior:"smooth",inline:"nearest"}))}moveUpClause(e){let o=this.contractTemplateData.clauses[e];this.contractTemplateData.clauses[e]=this.contractTemplateData.clauses[e-1],this.contractTemplateData.clauses[e-1]=o}moveDownClause(e){let o=this.contractTemplateData.clauses[e];this.contractTemplateData.clauses[e]=this.contractTemplateData.clauses[e+1],this.contractTemplateData.clauses[e+1]=o}saveContractFormTemplate(){if(this.contractTemplateData.templateHead.isForProject||this.contractTemplateData.templateHead.isForAddingSite||this.contractTemplateData.templateHead.isForAddingResources||this.contractTemplateData.templateHead.isForRemovingResources){for(let e=0;e<this.contractTemplateData.clauses.length;e++)this.contractTemplateData.clauses[e].serialNumber=e+1;this.apiService.post("contractFormTemplates",this.contractTemplateData).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}else this.notifyService.showInfo(this.translate.instant("Select_Contract_Type"))}editHeadItem(e){this.editHeadItemNumber=this.editHeadItemNumber==e?-1:e}insertNewClause(e){this.contractTemplateData.clauses.splice(e+1,0,{clauseTitleEng:"",clauseTitleArb:"",clauseSubTitleEng:"",clauseSubTitleArb:"",clauseDescriptionEng:"",clauseDescriptionArb:"",id:0,serialNumber:0,mappingId:0,contractFormId:this.contractTemplateData.templateHead.id}),this.editClauseIndex=e+1}removeClause(e){this.contractTemplateData.clauses.length>2&&this.contractTemplateData.clauses.splice(e,1),this.editClauseIndex=-1}cancel(){0==this.contractTemplateData.clauses[this.editClauseIndex].id&&this.contractTemplateData.clauses.splice(this.editClauseIndex,1),this.editClauseIndex=-1,this.editingClauseId=-1,this.editHeadItemNumber=-1}afterSelectClause(){var e,o,n,s,r,c;if(-1!=this.editClauseIndex&&null!=this.editingClauseId&&-1!=this.editingClauseId){if(-1==this.editingClauseId&&0==this.contractTemplateData.clauses.mappingId)this.contractTemplateData.clauses.splice(this.editClauseIndex,1);else{let p=this.clausesSelectionList.findIndex(u=>u.id==this.editingClauseId);this.contractTemplateData.clauses[this.editClauseIndex].clauseTitleEng=null===(e=this.clausesSelectionList[p])||void 0===e?void 0:e.clauseTitleEng,this.contractTemplateData.clauses[this.editClauseIndex].clauseTitleArb=null===(o=this.clausesSelectionList[p])||void 0===o?void 0:o.clauseTitleArb,this.contractTemplateData.clauses[this.editClauseIndex].clauseSubTitleEng=null===(n=this.clausesSelectionList[p])||void 0===n?void 0:n.clauseSubTitleEng,this.contractTemplateData.clauses[this.editClauseIndex].clauseSubTitleArb=null===(s=this.clausesSelectionList[p])||void 0===s?void 0:s.clauseSubTitleArb,this.contractTemplateData.clauses[this.editClauseIndex].clauseDescriptionEng=null===(r=this.clausesSelectionList[p])||void 0===r?void 0:r.clauseDescriptionEng,this.contractTemplateData.clauses[this.editClauseIndex].clauseDescriptionArb=null===(c=this.clausesSelectionList[p])||void 0===c?void 0:c.clauseDescriptionArb,this.contractTemplateData.clauses[this.editClauseIndex].mappingId=this.contractTemplateData.clauses[this.editClauseIndex].mappingId>0?this.contractTemplateData.clauses[this.editClauseIndex].mappingId:0}this.editClauseIndex=-1,this.editingClauseId=-1}}getRowBackGroud(e){return this.editClauseIndex==e?"editRow":0==this.contractTemplateData.clauses[e].mappingId||null==this.contractTemplateData.clauses[e].mappingId?"newRow":"whiteBg"}createNewClause(){let e=this.oprService.fullWindow(this.dialog,He);e.componentInstance.modalTitle="Create_New_Contract_Clause",e.componentInstance.modalBtnTitle="New",e.componentInstance.id=0,e.afterClosed().subscribe(o=>{o&&!0===o&&this.loadClausesSelectionList()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.uw),t.Y36(W),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-contract-form-template"]],features:[t.qOj],decls:130,vars:89,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"scroll-sidebar"],[1,"outer"],[1,"col-md-12","col-lg-12",2,"text-align","right","padding-block","10px"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary",3,"value","click"],[1,"col-md-12","col-lg-12"],["border","1","cellpadding","0","cellspacing","0",2,"width","initial","padding","10px"],[2,"width","6%","padding","10px"],[2,"width","45%","padding","10px","vertical-align","top"],[4,"ngIf"],[2,"width","4%","padding","10px"],[3,"matTooltip","click"],[1,"fas","fa-edit"],[2,"text-align","center","padding","10px"],["class","outer",4,"ngIf"],[1,"row","mt-1",2,"text-align","center"],[1,"col-md-3","col-lg-3"],["type","checkbox",3,"ngModel","ngModelOptions","ngModelChange"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],["type","text",1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"height","max-content","max-height","stretch",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["border","1","cellpadding","0","cellspacing","0",2,"padding","10px"],[2,"width","10%","padding","10px"],[2,"width","20%","padding","10px"],[2,"padding","10px"],[2,"padding","10px","width","auto"],["style","background-color:#ffd800",4,"ngFor","ngForOf"],[2,"background-color","#ffd800"],[3,"id"],[2,"width","10%","text-align","left","padding","10px","vertical-align","top"],["style","height:auto;width:initial",4,"ngIf"],[2,"width","20%","text-align","left","padding","10px","vertical-align","top"],[2,"text-align","justify","padding","10px","white-space","pre-wrap","vertical-align","top"],["rowspan","2",2,"padding","10px","vertical-align","central","width","7%"],[3,"matTooltip","click",4,"ngIf"],[2,"height","auto","width","initial"],["id","clauseSelection","bindLabel","clauseTitleEng","bindValue","id",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["bindLabel","clauseSubTitleEng","bindValue","id",2,"height","auto",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["bindLabel","clauseDescriptionEng","bindValue","id",2,"height","auto",3,"items","ngModel","ngModelOptions","ngModelChange","change"],[1,"fas","fa-arrow-up"],[1,"fas","fa-arrow-down"],[1,"fas","fa-plus-circle"],[1,"fas","fa-minus-circle"],[1,"fas","fa","fa-stop-circle"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.saveContractFormTemplate()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div"),t.TgZ(11,"input",7),t.NdJ("click",function(){return o.createNewClause()}),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",8),t.TgZ(14,"table",9),t.TgZ(15,"tr"),t.TgZ(16,"th",10),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"td",11),t.YNc(20,pn,2,1,"span",12),t.YNc(21,un,4,9,"span",12),t.qZA(),t.TgZ(22,"td",11),t.YNc(23,dn,2,1,"span",12),t.YNc(24,_n,4,9,"span",12),t.qZA(),t.TgZ(25,"td",13),t.TgZ(26,"span",14),t.NdJ("click",function(){return o.editHeadItem(1)}),t._UZ(27,"i",15),t._uU(28,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"tr"),t.TgZ(30,"th",10),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"td",11),t.YNc(34,mn,2,1,"span",12),t.YNc(35,gn,4,9,"span",12),t.qZA(),t.TgZ(36,"td",11),t.YNc(37,hn,2,1,"span",12),t.YNc(38,Zn,4,9,"span",12),t.qZA(),t.TgZ(39,"td",13),t.TgZ(40,"span",14),t.NdJ("click",function(){return o.editHeadItem(2)}),t._UZ(41,"i",15),t._uU(42,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"tr"),t.TgZ(44,"th",10),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"td",11),t.YNc(48,fn,2,1,"span",12),t.YNc(49,An,4,9,"span",12),t.qZA(),t.TgZ(50,"td",11),t.YNc(51,Cn,2,1,"span",12),t.YNc(52,Tn,4,9,"span",12),t.qZA(),t.TgZ(53,"td",13),t.TgZ(54,"span",14),t.NdJ("click",function(){return o.editHeadItem(3)}),t._UZ(55,"i",15),t._uU(56,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"tr"),t.TgZ(58,"th",10),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"td",11),t.YNc(62,vn,2,1,"span",12),t.YNc(63,xn,4,9,"span",12),t.qZA(),t.TgZ(64,"td",11),t.YNc(65,qn,2,1,"span",12),t.YNc(66,bn,4,9,"span",12),t.qZA(),t.TgZ(67,"td",13),t.TgZ(68,"span",14),t.NdJ("click",function(){return o.editHeadItem(4)}),t._UZ(69,"i",15),t._uU(70,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(71,"tr"),t.TgZ(72,"th",10),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"td",11),t.YNc(76,yn,2,1,"span",12),t.YNc(77,Sn,4,9,"span",12),t.qZA(),t.TgZ(78,"td",11),t.YNc(79,wn,2,1,"span",12),t.YNc(80,Un,4,9,"span",12),t.qZA(),t.TgZ(81,"td",13),t.TgZ(82,"span",14),t.NdJ("click",function(){return o.editHeadItem(5)}),t._UZ(83,"i",15),t._uU(84,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"tr"),t.TgZ(86,"th",10),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"td",11),t.YNc(90,Dn,2,1,"span",12),t.YNc(91,Ln,4,9,"span",12),t.qZA(),t.TgZ(92,"td",11),t.YNc(93,Nn,2,1,"span",12),t.YNc(94,En,4,9,"span",12),t.qZA(),t.TgZ(95,"td",13),t.TgZ(96,"span",14),t.NdJ("click",function(){return o.editHeadItem(6)}),t._UZ(97,"i",15),t._uU(98,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(99,"div",16),t._UZ(100,"br"),t.TgZ(101,"b"),t._uU(102),t.ALo(103,"translate"),t.qZA(),t._UZ(104,"br"),t.qZA(),t.YNc(105,Wn,17,13,"div",17),t.TgZ(106,"div",18),t.TgZ(107,"div",19),t.TgZ(108,"input",20),t.NdJ("ngModelChange",function(s){return o.contractTemplateData.templateHead.isForProject=s}),t.qZA(),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"div",19),t.TgZ(112,"input",20),t.NdJ("ngModelChange",function(s){return o.contractTemplateData.templateHead.isForAddingSite=s}),t.qZA(),t._uU(113),t.ALo(114,"translate"),t.qZA(),t.TgZ(115,"div",19),t.TgZ(116,"input",20),t.NdJ("ngModelChange",function(s){return o.contractTemplateData.templateHead.isForAddingResources=s}),t.qZA(),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.TgZ(119,"div",19),t.TgZ(120,"input",20),t.NdJ("ngModelChange",function(s){return o.contractTemplateData.templateHead.isForRemovingResources=s}),t.qZA(),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.qZA(),t.TgZ(123,"div",21),t.TgZ(124,"div",22),t.TgZ(125,"input",23),t.NdJ("click",function(){return o.closeModel()}),t.ALo(126,"translate"),t.qZA(),t._uU(127," \xa0 "),t._UZ(128,"input",24),t.ALo(129,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,55,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(6),t.s9C("value",t.lcZ(12,57,"Create_New_Clause")),t.xp6(6),t.hij(" ",t.lcZ(18,59,"Title_Of_Service")," "),t.xp6(3),t.Q6J("ngIf",1!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",1==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",1!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",1==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(32,61,"Company_Details")," "),t.xp6(3),t.Q6J("ngIf",2!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",2==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",2!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",2==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(46,63,"Customer_Details")," "),t.xp6(3),t.Q6J("ngIf",3!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",3==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",3!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",3==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(60,65,"Preamble")," "),t.xp6(3),t.Q6J("ngIf",4!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",4==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",4!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",4==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(74,67,"First_Party")," "),t.xp6(3),t.Q6J("ngIf",5!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",5==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",5!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",5==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(88,69,"Second_Party")," "),t.xp6(3),t.Q6J("ngIf",6!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",6==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",6!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",6==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(6),t.Oqu(t.lcZ(103,71,"Contract_Clauses")),t.xp6(3),t.Q6J("ngIf",(null==o.contractTemplateData||null==o.contractTemplateData.clauses?null:o.contractTemplateData.clauses.length)>0),t.xp6(3),t.Q6J("ngModel",o.contractTemplateData.templateHead.isForProject)("ngModelOptions",t.DdM(85,Nt)),t.xp6(1),t.hij("",t.lcZ(110,73,"Is_For_Project_Contract")," "),t.xp6(3),t.Q6J("ngModel",o.contractTemplateData.templateHead.isForAddingSite)("ngModelOptions",t.DdM(86,Nt)),t.xp6(1),t.hij("",t.lcZ(114,75,"Is_For_Adding_Site_As_Addendum")," "),t.xp6(3),t.Q6J("ngModel",o.contractTemplateData.templateHead.isForAddingResources)("ngModelOptions",t.DdM(87,Nt)),t.xp6(1),t.Oqu(t.lcZ(118,77,"Is_For_Adding_Resources")),t.xp6(3),t.Q6J("ngModel",o.contractTemplateData.templateHead.isForRemovingResources)("ngModelOptions",t.DdM(88,Nt)),t.xp6(1),t.Oqu(t.lcZ(122,79,"Is_For_Removing_Resources")),t.xp6(4),t.s9C("value",t.lcZ(126,81,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(129,83,"Save")))},directives:[l._Y,l.JL,l.sg,Z.O5,ut.gM,l.Wl,l.JJ,l.On,l.Fj,Z.sg,Et.w9],pipes:[f.X$],styles:["#newRow[_ngcontent-%COMP%] {\n    background-color: palegreen;\n   \n  }\n  #whiteBg[_ngcontent-%COMP%] {\n    background-color: white;\n    \n  }\n  #editRow[_ngcontent-%COMP%] {\n    background-color: #fbc591;\n   \n  }"]}),i})();function zn(i,a){1&i&&(t.TgZ(0,"th",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Title Of Service")," "))}function Xn(i,a){if(1&i&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.titleOfServiceEng)}}function Kn(i,a){1&i&&(t.TgZ(0,"th",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Title_Of_Service")," "))}function ta(i,a){if(1&i&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.titleOfServiceArb)}}function ea(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function oa(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",39),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function ia(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",35),t.TgZ(1,"span",36),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().view(s.id)}),t._UZ(2,"i",37),t._uU(3,"\xa0"),t.qZA(),t.YNc(4,oa,3,1,"span",38),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View")),t.xp6(3),t.Q6J("ngIf",e.canEdit)}}function na(i,a){1&i&&t._UZ(0,"tr",40)}function aa(i,a){1&i&&t._UZ(0,"tr",41)}const sa=function(){return{standalone:!0}};let ra=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.translate=A,this.displayedColumns=["titleOfServiceEng","titleOfServiceArb","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ContractFormTemplates/getContractFormTemplatesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.oprService.fullWindow(this.dialog,te);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Contract_Form_Template","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Contract_form_Template","Update")}view(e){this.openDialogManage(e,g.Oi.update,"Contract_form_Template","View")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ContractFormTemplates",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}viewEnquiries(e){this.oprService.SurveyorCode=e}translateToolTip(e){return`${this.translate.instant(e)}`}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-contract-form-templates"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:50,vars:28,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","titleOfServiceEng"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titleOfServiceArb"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click"],[1,"fa","fa-eye"],[3,"matTooltip","click",4,"ngIf"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t.TgZ(28,"a",16),t.NdJ("click",function(){return o.create()}),t._UZ(29,"i",17),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(32,"div",18),t.TgZ(33,"div",19),t.TgZ(34,"div",20),t.ynx(35),t.TgZ(36,"table",21),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(37,22),t.YNc(38,zn,3,3,"th",23),t.YNc(39,Xn,2,1,"td",24),t.BQk(),t.ynx(40,25),t.YNc(41,Kn,3,3,"th",23),t.YNc(42,ta,2,1,"td",24),t.BQk(),t.ynx(43,26),t.YNc(44,ea,3,3,"th",27),t.YNc(45,ia,5,2,"td",28),t.BQk(),t.YNc(46,na,1,0,"tr",29),t.YNc(47,aa,1,0,"tr",30),t.qZA(),t.ynx(48),t.TgZ(49,"mat-paginator",31),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,15,"Contract_Form_Templates")," "),t.xp6(6),t.hij(" ",t.lcZ(11,17,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,19,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,21,"Contract_Form_Templates")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,23,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(27,sa)),t.xp6(5),t.hij("",t.lcZ(31,25,"Add_New_Surveyor")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,ut.gM,Z.O5,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();var jt=X(5396);function la(i,a){if(1&i&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.value," ")}}function ca(i,a){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}function pa(i,a){1&i&&(t.TgZ(0,"div",4),t.TgZ(1,"div",5),t.TgZ(2,"label",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",32),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.hij("",t.lcZ(4,3,"GST_VAT_Number")," "),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,5,"Please_Enter")," ",t.lcZ(7,7,"GST_VAT_Number"),""))}let Ce=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.readonly="",this.id=0,this.cityList=[],this.custCodeControl=new l.NI("",l.kI.required),this.isDataLoading=!1,this.isChildCustomer=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(""),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterCustCodes(h||""))))}ngOnInit(){this.loadCities(),this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({siteCode:["SITEXXXXXX"],siteName:["",l.kI.required],siteArbName:["",l.kI.required],customerCode:[""],siteAddress:["",l.kI.required],siteCityCode:["",l.kI.required],siteGeoLatitude:["",l.kI.required],siteGeoLongitude:["",l.kI.required],siteGeoGain:["",l.kI.required],isChildCustomer:[!1],vatNumber:[""],isActive:[!0]})}submit(){this.id>0&&(this.form.value.id=this.id);let e=this.custCodeControl.value;if(this.utilService.hasValue(e)?(this.form.value.customerCode=e,this.custCodeControl.setValue(e)):this.utilService.FillUpFields(),this.form.valid){if(this.isChildCustomer&&!this.utilService.hasValue(this.form.controls.vatNumber.value))return void this.notifyService.showError("Enter vatNumber");this.apiService.post("CustomerSite",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}else this.utilService.FillUpFields()}setEditForm(){this.apiService.get("CustomerSite/getSiteById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.custCodeControl.setValue(e.customerCode),this.isChildCustomer=e.isChildCustomer||!1,this.form.patchValue({id:0}))})}reset(){this.form.controls.siteCode.setValue(""),this.form.controls.siteName.setValue(""),this.form.controls.SiteArbName.setValue(""),this.form.controls.customerCode.setValue(""),this.form.controls.siteAddress.setValue(""),this.form.controls.siteCityCode.setValue(""),this.form.controls.siteGeoLatitude.setValue(""),this.form.controls.siteGeoLongitude.setValue(""),this.form.controls.siteGeoGain.setValue(""),this.form.controls.isChildCustomer.setValue(""),this.form.controls.vatNumber.setValue(""),this.form.controls.isActive.setValue(!0)}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadCities(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.cityList=e})}isChildCustomerChecked(e){this.isChildCustomer=e.checked}validate(e,o,n){let s="";"custCodeControl"===("change"==n&&(s=e.target.value),o)&&this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+s).subscribe(r=>{null!=r?(this.form.patchValue({customerCode:r.custCode}),this.form.value.customerCode=this.custCodeControl.value):(this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdatesites"]],features:[t.qOj],decls:110,vars:112,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","siteCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","siteName",1,"form-control",3,"placeholder"],[1,"form-group","mb-4"],["for","city",1,"mr-sm-2"],["type","text","formControlName","siteArbName",1,"form-control",3,"placeholder"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"readonly","placeholder","formControl","matAutocomplete"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","col-lg-12"],["type","text","formControlName","siteAddress",1,"form-control",3,"placeholder"],["formControlName","siteCityCode",1,"custom-select","mr-sm-2"],["value",""],["type","number","step","0.0001","formControlName","siteGeoLatitude",1,"form-control",3,"placeholder"],["type","number","step","0.0001","formControlName","siteGeoLongitude",1,"form-control",3,"placeholder"],[1,"mr-sm-2"],["type","number","step","0.0001","formControlName","siteGeoGain",1,"form-control",3,"placeholder"],["color","primary","formControlName","isChildCustomer",3,"change"],["class","col-md-6 col-lg-6",4,"ngIf"],[1,"row","customrow"],[1,"col-lg-12","col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[3,"value"],["for","GST/VAT Number",1,"mr-sm-2"],["id","GST","type","text","formControlName","vatNumber",1,"form-control",3,"placeholder"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",9),t.TgZ(27,"label",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",11),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"auto-loader",12),t._UZ(40,"input",13),t.ALo(41,"translate"),t.ALo(42,"translate"),t.TgZ(43,"mat-autocomplete",null,14),t.YNc(45,la,2,2,"mat-option",15),t.ALo(46,"async"),t.qZA(),t._UZ(47,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(48,"div",16),t.TgZ(49,"div",5),t.TgZ(50,"label"),t._uU(51),t.ALo(52,"translate"),t.qZA(),t._UZ(53,"input",17),t.ALo(54,"translate"),t.ALo(55,"translate"),t._UZ(56,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(57,"div",4),t.TgZ(58,"div",5),t.TgZ(59,"label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"select",18),t.TgZ(63,"option",19),t._uU(64),t.ALo(65,"translate"),t.ALo(66,"translate"),t.qZA(),t.YNc(67,ca,2,3,"option",15),t.qZA(),t._UZ(68,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(69,"div",4),t.TgZ(70,"div",5),t.TgZ(71,"label"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t._UZ(74,"input",20),t.ALo(75,"translate"),t.ALo(76,"translate"),t._UZ(77,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(78,"div",4),t.TgZ(79,"div",5),t.TgZ(80,"label"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t._UZ(83,"input",21),t.ALo(84,"translate"),t.ALo(85,"translate"),t._UZ(86,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(87,"div",4),t.TgZ(88,"div",5),t.TgZ(89,"label",22),t._uU(90),t.ALo(91,"translate"),t.qZA(),t._UZ(92,"input",23),t.ALo(93,"translate"),t.ALo(94,"translate"),t._UZ(95,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(96,"div",4),t.TgZ(97,"div",5),t.TgZ(98,"mat-slide-toggle",24),t.NdJ("change",function(s){return o.isChildCustomerChecked(s)}),t.qZA(),t.TgZ(99,"label",22),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(102,pa,8,9,"div",25),t.qZA(),t.TgZ(103,"div",26),t.TgZ(104,"div",27),t.TgZ(105,"input",28),t.NdJ("click",function(){return o.closeModel()}),t.ALo(106,"translate"),t.qZA(),t._uU(107," \xa0\xa0 "),t._UZ(108,"input",29),t.ALo(109,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(44);t.xp6(1),t.Oqu(t.lcZ(2,48,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,50,"Site_Id")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,52,"Please_Enter")," ",t.lcZ(14,54,"Site_Id"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(20,56,"Site_Eng_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,58,"Please_Enter")," ",t.lcZ(23,60,"Site_Eng_Name"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteName),t.xp6(4),t.Oqu(t.lcZ(29,62,"Site_Arb_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,64,"Please_Enter")," ",t.lcZ(32,66,"Site_Arb_Name"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteArbName),t.xp6(4),t.Oqu(t.lcZ(38,68,"Customer_Code")),t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.s9C("readonly",o.readonly),t.hYB("placeholder","",t.lcZ(41,70,"Please_Enter")," ",t.lcZ(42,72,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(46,74,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(4),t.Oqu(t.lcZ(52,76,"Address")),t.xp6(2),t.hYB("placeholder","",t.lcZ(54,78,"Please_Enter")," ",t.lcZ(55,80,"Address"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteAddress),t.xp6(4),t.Oqu(t.lcZ(61,82,"City")),t.xp6(4),t.AsE("",t.lcZ(65,84,"Select")," ",t.lcZ(66,86,"City")," "),t.xp6(3),t.Q6J("ngForOf",o.cityList),t.xp6(1),t.Q6J("control",o.form.controls.siteCityCode),t.xp6(4),t.Oqu(t.lcZ(73,88,"Geo_Location")),t.xp6(2),t.hYB("placeholder","",t.lcZ(75,90,"Please_Enter")," ",t.lcZ(76,92,"Geo_Location"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteGeoLatitude),t.xp6(4),t.Oqu(t.lcZ(82,94,"Geo_Location")),t.xp6(2),t.hYB("placeholder","",t.lcZ(84,96,"Please_Enter")," ",t.lcZ(85,98,"Geo_Location"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteGeoLongitude),t.xp6(4),t.Oqu(t.lcZ(91,100,"Gain_Height")),t.xp6(2),t.hYB("placeholder","",t.lcZ(93,102,"Please_Enter")," ",t.lcZ(94,104,"Gain_Height"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteGeoGain),t.xp6(5),t.hij(" \xa0 \xa0 ",t.lcZ(101,106,"Is_Child_Customer")," "),t.xp6(2),t.Q6J("ngIf",o.isChildCustomer),t.xp6(3),t.s9C("value",t.lcZ(106,108,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(109,110,"Save"))}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,At.z,lt.ZL,l.oH,lt.XC,Z.sg,l.EJ,l.YN,l.Kr,l.wV,jt.Rr,Z.O5,Ut.ey],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function ua(i,a){if(1&i&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}let Te=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.cityList=[],this.custCodeControl=new l.NI,this.isDataLoading=!1}ngOnInit(){this.loadCities(),this.setForm(),this.id>0&&this.setEditForm()}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({siteCode:["SITEXXXXXX"],siteName:["",l.kI.required],siteArbName:["",l.kI.required],customerCode:["",l.kI.required],siteAddress:["",l.kI.required],siteCityCode:["",l.kI.required],siteGeoLatitude:["",l.kI.required],siteGeoLongitude:["",l.kI.required],siteGeoGain:["",l.kI.required],isActive:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=0),this.apiService.post("CustomerSite",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("CustomerMaster",this.id).subscribe(e=>{this.form.value.id=0,e&&this.form.controls.customerCode.setValue(e.custCode)})}loadCities(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.cityList=e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-site-to-customer"]],features:[t.qOj],decls:89,vars:92,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","siteCode","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","siteName",1,"form-control",3,"placeholder"],[1,"form-group","mb-4"],["for","city",1,"mr-sm-2"],["type","text","formControlName","siteArbName",1,"form-control",3,"placeholder"],["type","text","formControlName","customerCode","readonly","readonly",1,"form-control",3,"placeholder"],["type","text","formControlName","siteAddress",1,"form-control",3,"placeholder"],["formControlName","siteCityCode",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","siteGeoLatitude",1,"form-control",3,"placeholder"],["type","text","formControlName","siteGeoLongitude",1,"form-control",3,"placeholder"],[1,"mr-sm-2"],["type","text","formControlName","siteGeoGain",1,"form-control",3,"placeholder"],[1,"row","customrow"],[1,"col-lg-12","col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"div",5),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",7),t.ALo(21,"translate"),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.TgZ(23,"div",4),t.TgZ(24,"div",8),t.TgZ(25,"label",9),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",10),t.ALo(29,"translate"),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",4),t.TgZ(32,"div",5),t.TgZ(33,"label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",11),t.ALo(37,"translate"),t.ALo(38,"translate"),t.qZA(),t.qZA(),t.TgZ(39,"div",4),t.TgZ(40,"div",5),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",12),t.ALo(45,"translate"),t.ALo(46,"translate"),t.qZA(),t.qZA(),t.TgZ(47,"div",4),t.TgZ(48,"div",5),t.TgZ(49,"label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"select",13),t.TgZ(53,"option",14),t._uU(54),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.YNc(57,ua,2,3,"option",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",4),t.TgZ(59,"div",5),t.TgZ(60,"label"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"input",16),t.ALo(64,"translate"),t.ALo(65,"translate"),t.qZA(),t.qZA(),t.TgZ(66,"div",4),t.TgZ(67,"div",5),t.TgZ(68,"label"),t._uU(69),t.ALo(70,"translate"),t.qZA(),t._UZ(71,"input",17),t.ALo(72,"translate"),t.ALo(73,"translate"),t.qZA(),t.qZA(),t.TgZ(74,"div",4),t.TgZ(75,"div",5),t.TgZ(76,"label",18),t._uU(77),t.ALo(78,"translate"),t.qZA(),t._UZ(79,"input",19),t.ALo(80,"translate"),t.ALo(81,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(82,"div",20),t.TgZ(83,"div",21),t.TgZ(84,"input",22),t.NdJ("click",function(){return o.closeModel()}),t.ALo(85,"translate"),t.qZA(),t._uU(86," \xa0\xa0 "),t._UZ(87,"input",23),t.ALo(88,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,32,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,34,"Site_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,36,"Please_Enter")," ",t.lcZ(14,38,"Site_ID"),""),t.xp6(6),t.Oqu(t.lcZ(19,40,"Site_Eng_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(21,42,"Please_Enter")," ",t.lcZ(22,44,"Site_Eng_Name"),""),t.xp6(6),t.Oqu(t.lcZ(27,46,"Site_Arb_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(29,48,"Please_Enter")," ",t.lcZ(30,50,"Site_Arb_Name"),""),t.xp6(6),t.Oqu(t.lcZ(35,52,"Customer_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(37,54,"Please_Enter")," ",t.lcZ(38,56,"Customer_Code"),""),t.xp6(6),t.Oqu(t.lcZ(43,58,"Address")),t.xp6(2),t.hYB("placeholder","",t.lcZ(45,60,"Please_Enter")," ",t.lcZ(46,62,"Address"),""),t.xp6(6),t.Oqu(t.lcZ(51,64,"City")),t.xp6(4),t.AsE("",t.lcZ(55,66,"Select")," ",t.lcZ(56,68,"City")," "),t.xp6(3),t.Q6J("ngForOf",o.cityList),t.xp6(4),t.Oqu(t.lcZ(62,70,"Geo_Location")),t.xp6(2),t.hYB("placeholder","",t.lcZ(64,72,"Please_Enter")," ",t.lcZ(65,74,"Geo_Location"),""),t.xp6(6),t.Oqu(t.lcZ(70,76,"Geo_Location")),t.xp6(2),t.hYB("placeholder","",t.lcZ(72,78,"Please_Enter")," ",t.lcZ(73,80,"Geo_Location"),""),t.xp6(6),t.Oqu(t.lcZ(78,82,"Gain_Height")),t.xp6(2),t.hYB("placeholder","",t.lcZ(80,84,"Please_Enter")," ",t.lcZ(81,86,"Gain(Height)"),""),t.xp6(5),t.s9C("value",t.lcZ(85,88,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(88,90,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,Z.sg],pipes:[f.X$],encapsulation:2}),i})();var mt=X(574);let da=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.readonly="",this.id=0,this.cityList=[],this.custCodeControl=new l.NI("",l.kI.required),this.isDataLoading=!1,this.isChildCustomer=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(""),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterCustCodes(h||""))))}ngOnInit(){this.loadCities(),this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({siteCode:["SITEXXXXXX"],siteName:["",l.kI.required],siteArbName:["",l.kI.required],customerCode:[""],siteAddress:["",l.kI.required],siteCityCode:["",l.kI.required],siteGeoLatitude:["",l.kI.required],siteGeoLongitude:["",l.kI.required],siteGeoGain:["",l.kI.required],isChildCustomer:[!1],vatNumber:[""],isActive:[!0],standardDeviation:[0]})}submit(){this.id>0&&(this.form.value.id=this.id);let e=this.custCodeControl.value;if(this.utilService.hasValue(e)?(this.form.value.customerCode=e,this.custCodeControl.setValue(e)):this.utilService.FillUpFields(),this.form.valid){if(this.isChildCustomer&&!this.utilService.hasValue(this.form.controls.vatNumber.value))return void this.notifyService.showError("Enter vatNumber");this.apiService.post("CustomerSite",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}else this.utilService.FillUpFields()}setEditForm(){this.apiService.get("CustomerSite/getSiteById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.custCodeControl.setValue(e.customerCode),this.isChildCustomer=e.isChildCustomer||!1,this.form.patchValue({id:0}))})}reset(){this.form.controls.siteCode.setValue(""),this.form.controls.siteName.setValue(""),this.form.controls.SiteArbName.setValue(""),this.form.controls.customerCode.setValue(""),this.form.controls.siteAddress.setValue(""),this.form.controls.siteCityCode.setValue(""),this.form.controls.siteGeoLatitude.setValue(""),this.form.controls.siteGeoLongitude.setValue(""),this.form.controls.siteGeoGain.setValue(""),this.form.controls.isChildCustomer.setValue(""),this.form.controls.vatNumber.setValue(""),this.form.controls.isActive.setValue(!0)}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadCities(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.cityList=e})}isChildCustomerChecked(e){this.isChildCustomer=e.checked}validate(e,o,n){let s="";"custCodeControl"===("change"==n&&(s=e.target.value),o)&&this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+s).subscribe(r=>{null!=r?(this.form.patchValue({customerCode:r.custCode}),this.form.value.customerCode=this.custCodeControl.value):(this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-updatestandarddevation"]],features:[t.qOj],decls:50,vars:50,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","siteCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","siteName","readonly","",1,"form-control",3,"placeholder"],[1,"form-group","mb-4"],["for","city",1,"mr-sm-2"],["type","text","formControlName","siteArbName","readonly","",1,"form-control",3,"placeholder"],[1,"mr-sm-2"],["type","number","step","1","formControlName","standardDeviation",1,"form-control",3,"placeholder"],[1,"row","customrow"],[1,"col-lg-12","col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",9),t.TgZ(27,"label",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",11),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label",12),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"input",13),t.ALo(40,"translate"),t.ALo(41,"translate"),t._UZ(42,"validation-message",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",14),t.TgZ(44,"div",15),t.TgZ(45,"input",16),t.NdJ("click",function(){return o.closeModel()}),t.ALo(46,"translate"),t.qZA(),t._uU(47," \xa0\xa0 "),t._UZ(48,"input",17),t.ALo(49,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,20,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,22,"Site_Id")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,24,"Please_Enter")," ",t.lcZ(14,26,"Site_Id"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(20,28,"Site_Eng_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,30,"Please_Enter")," ",t.lcZ(23,32,"Site_Eng_Name"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteName),t.xp6(4),t.Oqu(t.lcZ(29,34,"Site_Arb_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,36,"Please_Enter")," ",t.lcZ(32,38,"Site_Arb_Name"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteArbName),t.xp6(4),t.Oqu(t.lcZ(38,40,"Standard_deviation")),t.xp6(2),t.hYB("placeholder","",t.lcZ(40,42,"Please_Enter")," ",t.lcZ(41,44,"Standard_deviation"),""),t.xp6(3),t.Q6J("control",o.form.controls.standardDeviation),t.xp6(3),t.s9C("value",t.lcZ(46,46,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(49,48,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.wV],pipes:[f.X$],encapsulation:2}),i})();function _a(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateReport()}),t._uU(1," Generate Report "),t.qZA()}}function ma(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",47),t._uU(2," print "),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._uU(5,"ExportExcel"),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("useExistingCss",!0))}function ga(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function ha(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Za(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function fa(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Aa(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Eng_Name")," "))}function Ca(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteName)}}function Ta(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Arb_Name")," "))}function va(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteArbName)}}function xa(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Address")," "))}function qa(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteAddress)}}function ba(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"City")," "))}function ya(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCityCode)}}function Sa(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function wa(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function Ua(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function Da(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,wa,3,3,"span",50),t.YNc(2,Ua,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function La(i,a){1&i&&(t.TgZ(0,"th",54),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Na(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",49),t.TgZ(1,"div",55),t.TgZ(2,"a",56),t._UZ(3,"i",57),t.qZA(),t.TgZ(4,"div",58),t._uU(5," <<<<<<< HEAD "),t.TgZ(6,"a",59),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editSite(s.id)}),t._UZ(7,"i",60),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._uU(10,"\n======= "),t.TgZ(11,"a",59),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editSite(s.id)}),t._UZ(12,"i",60),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"a",59),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editStandardDeviation(s.id)}),t._UZ(16,"i",60),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._uU(19,"\n>>>>>>> 96bf9ddb8d6e38ae15a95460b4f79959d54e0741 "),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(8),t.hij(" ",t.lcZ(9,3,"Edit_Site")," "),t.xp6(5),t.hij(" ",t.lcZ(14,5,"Edit_Site")," "),t.xp6(4),t.hij(" ",t.lcZ(18,7,"Edit_SD")," "))}function Ea(i,a){1&i&&t._UZ(0,"tr",61)}function Oa(i,a){1&i&&t._UZ(0,"tr",62)}function ka(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.customerCode),t.xp6(2),t.Oqu(e.siteCode),t.xp6(2),t.Oqu(e.siteName),t.xp6(2),t.Oqu(e.siteArbName),t.xp6(2),t.Oqu(e.siteAddress),t.xp6(2),t.Oqu(e.siteCityCode),t.xp6(2),t.Oqu(e.isActive)}}function ja(i,a){if(1&i&&(t.TgZ(0,"div",63),t.TgZ(1,"div",64),t.TgZ(2,"table",65),t.TgZ(3,"tr"),t.TgZ(4,"td",66),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td",66),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(18,"br"),t.qZA(),t.TgZ(19,"table",67),t.TgZ(20,"tr"),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"th"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.YNc(42,ka,15,7,"tr",68),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,15,"Report_On_Customer_Sites")),t.xp6(4),t.AsE("",t.lcZ(10,17,"Customer_Code"),":",null==(null==e.filter?null:e.filter.customerCode)||""==e.filter.customerCode?"All":e.filter.customerCode,""),t.xp6(3),t.AsE("",t.lcZ(13,19,"Branch_Code"),":",null==(null==e.filter?null:e.filter.branchCode)||""==e.filter.branchCode?"All":e.filter.branchCode,""),t.xp6(4),t.AsE("",t.lcZ(17,21,"Search_Key"),":",e.searchValue,""),t.xp6(6),t.hij(" ",t.lcZ(23,23,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(26,25,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(29,27,"Site_Eng_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(32,29,"Site_Arb_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(35,31,"Address")," "),t.xp6(3),t.hij(" ",t.lcZ(38,33,"Branch_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(41,35,"Is_Active")," "),t.xp6(2),t.Q6J("ngForOf",e.reportData)}}const Ma=function(){return{standalone:!0}};let Ra=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.route=h,this.oprService=A,this.displayedColumns=["customerCode","siteCode","siteName","siteArbName","siteAddress","siteCityCode","isActive","Actions"],this.searchValue="",this.sortingOrder="customerCode desc",this.isLoading=!1,this.filter={customerCode:"",branchCode:""},this.reportData=[],this.isArab=!1,this.customerSelectionList=[],this.citySelectionList=[]}ngOnInit(){this.isArab=this.utilService.isArabic(),this.initialLoading()}refresh(){this.reportData=[],this.resetFilter()}resetFilter(){this.filter={customerCode:"",branchCode:""},this.applyFilter("")}initialLoading(){this.searchValue="",this.loadCitiesList(),this.loadCustomersList(),this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.reportData=[],this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.oprService.getPaginationWithFilter("CustomerSite/getSitesPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.reportData=[]}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Site","Add",Ce)}editSite(e){this.openDialogManage(e,g.Oi.update,"Updating_Site","Update",Ce)}editStandardDeviation(e){this.openDialogManage(e,g.Oi.update,"Updating_Standard_Deviation","Update",da)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("CustomerSite",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}cahngeEnquiryStatus(e,o){this.apiService.post("ServiceEnquiries/changeEnquiryStatus?enquiryID="+e+"&statusEnquiry="+o,null).subscribe(n=>{this.utilService.OkMessage(),this.ngOnInit()},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}addsitetocustomer(e){this.openDialogManage(e,g.Oi.create,"Adding_New_Site_to_Customer","Add",Te)}clearReport(){this.reportData=[]}generateReport(){this.reportData=[];for(let e=0;e<=Math.floor(this.totalItemsCount/100);e++){let o={pageIndex:e,pageSize:100,previousPageIndex:0==e?0:e-1,length:0};this.loadListReport(o.pageIndex,o.pageSize,this.searchValue,this.sortingOrder)}}loadListReport(e,o,n,s){this.isLoading=!0,this.oprService.getPaginationWithFilter("CustomerSite/getSitesPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.isLoading=!1,this.reportData=0==this.reportData.length?r.items:this.reportData.concat(r.items)},r=>this.utilService.ShowApiErrorMessage(r))}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArab?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("Branch/getBranchSelectListForUser").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}exportexcel(){let e=document.getElementById("printcontainer");const o=mt.P6.table_to_sheet(e),n=mt.P6.book_new();mt.P6.book_append_sheet(n,o,"Sheet1"),mt.NC(n,"CustomerSitesReport.xlsx")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(D.gz),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-customer-sites"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:85,vars:40,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],["align","right",1,"row"],["align","right",1,"col-md-12","col-lg-12","text-right"],["data-toggle","modal","data-target","#addnewcustomersite","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"col-md-4","col-lg-4"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-8","col-lg-8"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-6","col-lg-6",2,"align-content","flex-start"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary","icon-refresh",3,"click"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","siteName"],["matColumnDef","siteArbName"],["matColumnDef","siteAddress"],["matColumnDef","siteCityCode"],["matColumnDef","isActive"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["id","printcontainer","hidden","",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["printTitle","Customer Sites Report","printSectionId","printcontainer","ngxPrint","",1,"btn","btn-primary",3,"useExistingCss"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""],["id","printcontainer","hidden",""],["width","100%"],["id","attndTable"],["colspan","2"],["id","attndTable","width","100%"],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",9),t.TgZ(18,"div",1),t.TgZ(19,"div",10),t.TgZ(20,"div",11),t.TgZ(21,"div",12),t.TgZ(22,"div",13),t.TgZ(23,"div",14),t.TgZ(24,"a",15),t.NdJ("click",function(){return o.create()}),t._UZ(25,"i",16),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",1),t.TgZ(29,"div",17),t.TgZ(30,"div",18),t.TgZ(31,"label"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"ng-select",19),t.NdJ("ngModelChange",function(s){return o.filter.branchCode=s})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",20),t.TgZ(36,"div",18),t.TgZ(37,"label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"ng-select",19),t.NdJ("ngModelChange",function(s){return o.filter.customerCode=s})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",1),t.TgZ(42,"div",17),t.TgZ(43,"input",21),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(44,"translate"),t.qZA(),t.qZA(),t.TgZ(45,"div",22),t.YNc(46,_a,2,0,"button",23),t.YNc(47,ma,6,1,"span",24),t.TgZ(48,"span"),t._uU(49," \xa0 "),t.TgZ(50,"button",25),t.NdJ("click",function(){return o.refresh()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",26),t._UZ(52,"spinner-loader",27),t.qZA(),t.qZA(),t._UZ(53,"div",28),t.TgZ(54,"div",29),t.TgZ(55,"table",30),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(56,31),t.YNc(57,ga,3,3,"th",32),t.YNc(58,ha,2,1,"td",33),t.BQk(),t.ynx(59,34),t.YNc(60,Za,3,3,"th",32),t.YNc(61,fa,2,1,"td",33),t.BQk(),t.ynx(62,35),t.YNc(63,Aa,3,3,"th",32),t.YNc(64,Ca,2,1,"td",33),t.BQk(),t.ynx(65,36),t.YNc(66,Ta,3,3,"th",32),t.YNc(67,va,2,1,"td",33),t.BQk(),t.ynx(68,37),t.YNc(69,xa,3,3,"th",32),t.YNc(70,qa,2,1,"td",33),t.BQk(),t.ynx(71,38),t.YNc(72,ba,3,3,"th",32),t.YNc(73,ya,2,1,"td",33),t.BQk(),t.ynx(74,39),t.YNc(75,Sa,3,3,"th",32),t.YNc(76,Da,4,2,"td",33),t.BQk(),t.ynx(77,40),t.YNc(78,La,3,3,"th",41),t.YNc(79,Na,20,9,"td",33),t.BQk(),t.YNc(80,Ea,1,0,"tr",42),t.YNc(81,Oa,1,0,"tr",43),t.qZA(),t.qZA(),t.ynx(82),t.TgZ(83,"mat-paginator",44),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(84,ja,43,37,"div",45)),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,25,"Customer_Sites")," "),t.xp6(6),t.hij(" ",t.lcZ(11,27,"Operations")," "),t.xp6(3),t.hij(" ",t.lcZ(14,29,"Sites_List")," "),t.xp6(3),t.Oqu(o.customerCode),t.xp6(10),t.hij("",t.lcZ(27,31,"Add_New_Customer_Site")," "),t.xp6(6),t.Oqu(t.lcZ(33,33,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.filter.branchCode),t.xp6(4),t.Oqu(t.lcZ(39,35,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.filter.customerCode),t.xp6(3),t.MGl("placeholder","",t.lcZ(44,37,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(39,Ma)),t.xp6(3),t.Q6J("ngIf",0==o.reportData.length),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0),t.xp6(5),t.Q6J("isLoading",o.isLoading),t.xp6(3),t.Q6J("dataSource",o.data),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0))},directives:[Et.w9,l.JJ,l.On,l.Fj,Z.O5,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,m.XQ,m.Gk,Z.sg],pipes:[f.X$],styles:["#attndTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n    border: solid;\n    border-width: 1px;\n    padding: 5px 5px 5px 5px;\n    text-align: center;\n  }\n\n  #attndTable[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n\n  #printcontainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100%;\n    padding: 10px 10px 10px 10px;\n  }"]}),i})();function Pa(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"input",21),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw().index;return t.oxw(2).setEntryValue(n,s)}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(1),t.s9C("id",o),t.hYB("placeholder","",t.lcZ(2,4,"Enter")," ",t.lcZ(3,6,"Value"),""),t.s9C("value",n.entryValue)}}const Ge=function(){return{standalone:!0}};function Fa(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"select",22),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw().index;return t.oxw(2).setEntryValue(n,s)}),t.TgZ(2,"option",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"option",24),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"option",25),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(1),t.s9C("id",o),t.s9C("value",n.entryValue),t.Q6J("ngModelOptions",t.DdM(12,Ge)),t.xp6(2),t.Oqu(t.lcZ(4,6,"Select")),t.xp6(3),t.Oqu(t.lcZ(7,8,"Yes")),t.xp6(3),t.Oqu(t.lcZ(10,10,"No"))}}function Ia(i,a){if(1&i&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function Ya(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"select",26),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.entryValue=n})("change",function(n){t.CHM(e);const s=t.oxw().index;return t.oxw(2).setEntryValue(n,s)}),t.TgZ(2,"option",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,Ia,2,2,"option",27),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(1),t.s9C("id",o),t.Q6J("ngModel",n.entryValue)("ngModelOptions",t.DdM(7,Ge)),t.xp6(2),t.Oqu(t.lcZ(4,5,"Select")),t.xp6(2),t.Q6J("ngForOf",n.listValueString.split(","))}}function Ja(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"input",29),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw().index;return t.oxw(2).setEntryValue(n,s)}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(1),t.s9C("id",o),t.hYB("placeholder","",t.lcZ(2,4,"Enter")," ",t.lcZ(3,6,"Value"),""),t.s9C("value",n.entryValue)}}function Qa(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"input",30),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw().index;return t.oxw(2).setEntryValue(n,s)}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(1),t.s9C("id",o),t.hYB("placeholder","",t.lcZ(2,4,"Enter")," ",t.lcZ(3,6,"Value"),""),t.s9C("value",n.entryValue)}}function Ba(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td",19),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.YNc(7,Pa,4,8,"td",20),t.YNc(8,Fa,11,13,"td",20),t.YNc(9,Ya,6,8,"td",20),t.YNc(10,Ja,4,8,"td",20),t.YNc(11,Qa,4,8,"td",20),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.hij("",e.elementEngName," "),t.xp6(2),t.Oqu(e.elementArbName),t.xp6(1),t.Q6J("ngIf","Absolute"==e.elementType),t.xp6(1),t.Q6J("ngIf","Boolean"==e.elementType),t.xp6(1),t.Q6J("ngIf","List"==e.elementType),t.xp6(1),t.Q6J("ngIf","Scale"==e.elementType),t.xp6(1),t.Q6J("ngIf","Percentage"==e.elementType)}}function Ha(i,a){if(1&i&&(t.TgZ(0,"div",13),t.TgZ(1,"table",14),t.TgZ(2,"tr"),t.TgZ(3,"th",15),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",16),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"th",17),t.qZA(),t.YNc(10,Ba,12,8,"tr",18),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,3,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(8,5,"Form_Attribute")," "),t.xp6(3),t.Q6J("ngForOf",e.surveyFormDataEntries)}}function $a(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td",19),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.TgZ(7,"td",19),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.hij("",e.elementEngName," "),t.xp6(2),t.Oqu(e.elementArbName),t.xp6(2),t.Oqu(e.entryValue)}}function Va(i,a){if(1&i&&(t.TgZ(0,"div",13),t.TgZ(1,"table",31),t.TgZ(2,"tr"),t.TgZ(3,"th",15),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",32),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"th",19),t.qZA(),t.YNc(10,$a,9,4,"tr",18),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,3,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(8,5,"Form_Attribute")," "),t.xp6(3),t.Q6J("ngForOf",e.surveyFormDataEntries)}}function Ga(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit("Save")}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}function Wa(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit("Complete_Survey")}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Complete Survey"))}let Le=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.route=h,this.dialogRef=A,this.isLoading=!0,this.showElements=!0,this.entry="",this.surveyFormDataEntries=[],this.entryValues=[],this.elementOptions=[]}ngOnInit(){this.form=this.fb.group({}),this.enquiryID=this.inputData.enquiryID,this.loadData()}loadData(){this.isLoading=!0,this.apiService.get("SurveyFormData/getSurveyFormDataByEnquiryId",this.enquiryID).subscribe(e=>{this.enquiry=e.enquiry,this.customer=e.customer,this.enquiryHeader=e.enquiryHeader,this.site=e.site,this.surveyFormHeader=e.surveyFormHeader,this.surveyFormDataEntries=e.surveyFormDataEntries,this.surveyor=e.surveyor,this.service=e.service},e=>this.utilService.ShowApiErrorMessage(e)),this.isLoading=!1}printComponent(e){this.showElements=!1;const o=document.getElementById(e),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},5)}goBack(){window.history.back()}submit(e){this.form.value.enquiryID=this.enquiryID,this.form.value.surveyFormDataEntries=this.surveyFormDataEntries,this.form.value.action=e,this.apiService.post("SurveyFormData",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}setEntryValue(e,o){this.surveyFormDataEntries[o].entryValue=e.target.value}getValue(e){document.getElementById(e.toString()).value=this.surveyFormDataEntries[e].entryValue}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(D.gz),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-editable-survey-form"]],features:[t.qOj],decls:84,vars:60,consts:[["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"font-size","1rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["rowspan","2",2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","400"],["style","padding-bottom:5px;padding-top:5px","class","mat-elevation-z8",4,"ngIf"],[2,"padding-bottom","5px","padding-top","5px"],[1,"col-md-12","col-lg-12","text-center"],["type","button","class","btn waves-effect waves-light btn-rounded   btn-primary btn-midblock",3,"value","click",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],[1,"mat-elevation-z8",2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],["width","3%",2,"border","2px solid #878787","padding","2px 2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","75%",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngFor","ngForOf"],[2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["style","border:2px solid #878787;padding:5px;font-size:0.775rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight:400;",4,"ngIf"],["type","text",1,"form-control",3,"id","placeholder","value","change"],[1,"custom-select","mr-sm-2",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400",3,"id","ngModelOptions","value","change"],["value",""],["value","Yes"],["value","No"],[1,"custom-select","mr-sm-2",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400",3,"id","ngModel","ngModelOptions","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","number","min","row.minValue","max","row.maxValue",1,"form-control",3,"id","placeholder","value","change"],["type","number","min","1","max","100",1,"form-control",3,"id","placeholder","value","change"],[1,"table","table-bordered","no-wrap"],["width","75%",2,"border","2px solid #878787","padding","2px 2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"h4",2),t._uU(5),t.qZA(),t.TgZ(6,"table",3),t.TgZ(7,"tr"),t.TgZ(8,"th",4),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td",5),t._uU(12),t.qZA(),t.TgZ(13,"th",4),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"td",5),t._uU(17),t.qZA(),t.qZA(),t.TgZ(18,"tr"),t.TgZ(19,"th",4),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"td",5),t._uU(23),t.qZA(),t.TgZ(24,"th",4),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"td",5),t._uU(28),t.qZA(),t.qZA(),t.TgZ(29,"tr"),t.TgZ(30,"th",6),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"td",5),t._uU(34),t.qZA(),t.TgZ(35,"th",4),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"td",5),t._uU(39),t.qZA(),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td",5),t._uU(42),t.qZA(),t.TgZ(43,"th",4),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"td",5),t._uU(47),t.qZA(),t.qZA(),t.TgZ(48,"tr"),t.TgZ(49,"th",6),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"td",5),t._uU(53),t.qZA(),t.TgZ(54,"th",4),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"td",5),t._uU(58),t.qZA(),t.qZA(),t.TgZ(59,"tr"),t.TgZ(60,"td",5),t._uU(61),t.qZA(),t.TgZ(62,"th",4),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"td",5),t._uU(66),t.qZA(),t.qZA(),t.TgZ(67,"tr"),t.TgZ(68,"th",4),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"td",7),t._uU(72),t.qZA(),t.qZA(),t.qZA(),t.YNc(73,Ha,11,7,"div",8),t.YNc(74,Va,11,7,"div",8),t.qZA(),t.TgZ(75,"div",9),t.TgZ(76,"div",10),t.YNc(77,Ga,2,3,"input",11),t._uU(78," \xa0 "),t.YNc(79,Wa,2,3,"input",11),t._uU(80," \xa0 "),t.TgZ(81,"input",12),t.NdJ("click",function(){return o.closeModel()}),t.ALo(82,"translate"),t.qZA(),t._uU(83," \xa0 "),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,34,"Survey_Form"),": "),t.xp6(3),t.AsE(" ",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameArb,"(",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameEng,") "),t.xp6(4),t.Oqu(t.lcZ(10,36,"Enquiry_ID")),t.xp6(3),t.Oqu(o.inputData.enquiryID),t.xp6(2),t.Oqu(t.lcZ(15,38,"Enquiry_Number")),t.xp6(3),t.Oqu(o.inputData.enquiryNumber),t.xp6(3),t.Oqu(t.lcZ(21,40,"Service_Code")),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceCode),t.xp6(2),t.Oqu(t.lcZ(26,42,"Customer")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custCode),t.xp6(3),t.Oqu(t.lcZ(32,44,"Service_Name")),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceNameEng),t.xp6(2),t.Oqu(t.lcZ(37,46,"Name")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custName),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceNameArb),t.xp6(2),t.Oqu(t.lcZ(45,48,"Mobile")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custMobile1),t.xp6(3),t.Oqu(t.lcZ(51,50,"Site_Name")),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteName),t.xp6(2),t.Oqu(t.lcZ(56,52,"Address")),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteAddress),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteArbName),t.xp6(2),t.Oqu(t.lcZ(64,54,"City")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custCityCode1),t.xp6(3),t.Oqu(t.lcZ(70,56,"Geo_Location")),t.xp6(3),t.lnq("",null==o.site?null:o.site.siteGeoLatitude,"/",null==o.site?null:o.site.siteGeoLongitude,"/",null==o.site?null:o.site.siteGeoGain,""),t.xp6(1),t.Q6J("ngIf",!(null!=o.enquiry&&o.enquiry.isSurveyCompleted)&&o.showElements),t.xp6(1),t.Q6J("ngIf",(null==o.enquiry?null:o.enquiry.isSurveyCompleted)||!o.showElements),t.xp6(3),t.Q6J("ngIf",!(null!=o.enquiry&&o.enquiry.isSurveyCompleted)),t.xp6(2),t.Q6J("ngIf",!(null!=o.enquiry&&o.enquiry.isSurveyCompleted)),t.xp6(2),t.s9C("value",t.lcZ(82,58,"Cancel")))},directives:[Z.O5,Z.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On],pipes:[f.X$],encapsulation:2}),i})();function za(i,a){if(1&i&&(t.TgZ(0,"span",20),t._UZ(1,"validation-message",21),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.transferredDate)}}function Xa(i,a){1&i&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}let We=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.translate=A,this.dialogRef=C,this.data=[],this.isLoading=!1,this.employeePrimarySitesLogID=0,this.siteSelectionList=[]}ngOnInit(){this.setForm();var e=0;this.interval=setInterval(()=>{1==++e&&this.loadSiteSelectionList(),2==e&&this.initialLoading()},e>2?0:1e3)}refresh(){this.initialLoading()}initialLoading(){this.employeePrimarySitesLogID>0&&this.setEditForm()}setForm(){this.form=this.fb.group({employeeNumber:[this.employeePrimarySitesLogID>0?"":this.inputData.employeeNumber,l.kI.required],siteCode:["",l.kI.required],transferredDate:["",l.kI.required]})}setEditForm(){this.apiService.get("Employee/getPrimaryLogById",this.employeePrimarySitesLogID).subscribe(e=>{e&&this.form.patchValue(e)})}openDatePicker(e){e.open()}loadSiteSelectionList(){this.apiService.getall("ProjectSites/getSelectProjectSitesList2").subscribe(e=>{this.siteSelectionList=e})}submit(){if(this.form.valid){let e=new Date(this.form.controls.transferredDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.transferredDate=e,this.form.value.employeePrimarySitesLogID=this.employeePrimarySitesLogID,this.apiService.post("employee/addUpdatePrimarySiteLog",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{this.utilService.FillUpFields()})}else console.log(this.form)}cancel(){this.dialogRef.close()}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-employeeprimarysitelog"]],features:[t.qOj],decls:42,vars:33,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"row"],[1,"col-md-5","col-lg-5"],[1,"form-group"],[1,"form-control"],["bindLabel","text","bindValue","value","formControlName","siteCode",3,"items"],[1,"col-md-2","col-lg-2"],["formControlName","transferredDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","click"],["hidden",""],["matSuffix","",3,"for"],["data-date-format","yyyy/mm/dd"],["picker1",""],["style","color:red",4,"ngIf"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[2,"color","red"],[3,"control"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",7),t._uU(14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",5),t.TgZ(16,"div",6),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"ng-select",8),t.qZA(),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"div",6),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"input",10),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(32);return o.openDatePicker(r)}),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",11),t._UZ(30,"mat-datepicker-toggle",12),t._UZ(31,"mat-datepicker",13,14),t.qZA(),t.qZA(),t.YNc(33,za,2,1,"span",15),t.YNc(34,Xa,3,3,"span",15),t.qZA(),t.qZA(),t.TgZ(35,"div",16),t.TgZ(36,"div",17),t.TgZ(37,"input",18),t.NdJ("click",function(){return o.closeModel()}),t.ALo(38,"translate"),t.qZA(),t._uU(39," \xa0 "),t._UZ(40,"input",19),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(6),s=t.MAs(32);let r,c;t.xp6(1),t.Oqu(t.lcZ(2,17,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(6),t.Oqu(t.lcZ(12,19,"Employee")),t.xp6(3),t.lnq(" ",o.inputData.employeeNumber,"/",o.inputData.employeeName,"/",o.inputData.employeeNameAr," "),t.xp6(4),t.Oqu(t.lcZ(19,21,"Site")),t.xp6(2),t.Q6J("items",o.siteSelectionList),t.xp6(4),t.Oqu(t.lcZ(25,23,"Transfered_Date")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(27,25,"Please_Enter")," ",t.lcZ(28,27,"From_Date"),""),t.Q6J("matDatepicker",s),t.xp6(4),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",!(null!=(r=o.form.get("transferredDate"))&&r.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(c=o.form.get("transferredDate"))?null:c.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.s9C("value",t.lcZ(38,29,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(41,31,"Save"))}},directives:[l._Y,l.JL,l.sg,Et.w9,l.JJ,l.u,l.Fj,j.hl,j.nW,ft.R9,j.Mq,Z.O5,V.s],pipes:[f.X$],encapsulation:2}),i})();function Ka(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t.TgZ(11,"span"),t.TgZ(12,"a",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s)}),t.ALo(13,"translate"),t._UZ(14,"i",18),t.qZA(),t._uU(15,"\xa0 "),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.primarySiteCode," "),t.xp6(2),t.hij(" ",e.primarySiteName,""),t.xp6(2),t.hij(" ",e.primarySiteNameAr," "),t.xp6(2),t.hij(" ",e.primarySiteLogId>0?t.xi3(9,5,e.lastTransferDate,"dd/MM/yyyy"):"-"," "),t.xp6(4),t.s9C("matTooltip",t.lcZ(13,8,"edit"))}}let ts=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.translate=A,this.dialogRef=C,this.data=[],this.isLoading=!1,this.employeeName="",this.employeeNameAr=""}ngOnInit(){this.initialLoading()}refresh(){this.initialLoading()}initialLoading(){this.isLoading=!0,this.apiService.getall(`Employee/getEmployeesPrimarySiteLogs/${this.employeeNumber}`).subscribe(e=>{this.data=e,this.isLoading=!1},e=>this.utilService.ShowApiErrorMessage(e)),this.apiService.getall(`Employee/getEmployeeByEmployeeNumber/${this.employeeNumber}`).subscribe(e=>{this.employeeName=e.employeeName,this.employeeNameAr=e.employeeName_AR},e=>this.utilService.ShowApiErrorMessage(e))}add(e){}edit(e){this.isLoading||this.openDialogManage(e.primarySiteLogId,g.Oi.update,e.primarySiteLogId>0?"Updating_Primary_Site_Log":"Adding_Primary_Site_Log","Update",We)}closeModel(){this.dialogRef.close()}openDialogManage(e,o,n,s,r){let c=this.oprService.openFullWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.employeePrimarySitesLogID=e,c.componentInstance.inputData={employeeNumber:this.employeeNumber,employeeName:this.employeeName,employeeNameAr:this.employeeNameAr},c.afterClosed().subscribe(p=>{p&&!0===p&&this.dialogRef.close(!0)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-employeeprimarysitelogs"]],features:[t.qOj],decls:37,vars:17,consts:[[1,"card-body"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"cardtitle-divider"],[1,"col-md-12","col-lg-12",2,"text-align","center"],[1,"table","table-bordered","no-wrap"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-note"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3"),t._uU(2),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"nav",6),t.TgZ(10,"ol",7),t.TgZ(11,"li",8),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"li",8),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"li",9),t._uU(18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"div",3),t.TgZ(21,"div",11),t.TgZ(22,"div",0),t._UZ(23,"div",12),t.TgZ(24,"div",13),t.TgZ(25,"table",14),t.TgZ(26,"thead"),t.TgZ(27,"tr"),t.TgZ(28,"th",15),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"th"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"th"),t.qZA(),t.qZA(),t.TgZ(35,"tbody"),t.YNc(36,Ka,16,10,"tr",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij(" ",o.modalTitle," "),t.xp6(10),t.hij(" ",t.lcZ(13,9,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(16,11,"Primary_Site_Log")," "),t.xp6(3),t.lnq("",o.employeeNumber,"(",o.employeeName,"/",o.employeeNameAr,")"),t.xp6(11),t.hij(" ",t.lcZ(30,13,"Site")," "),t.xp6(3),t.hij(" ",t.lcZ(33,15,"Transfer_Date")," "),t.xp6(4),t.Q6J("ngForOf",o.data))},directives:[Z.sg,ut.gM],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function es(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Number")," "))}function os(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNumber)}}function is(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Name")," "))}function ns(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeName)}}function as(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Name")," "))}function ss(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNameAr)}}function rs(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function ls(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.primarySiteCode)}}function cs(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Name")," "))}function ps(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.primarySiteName)}}function us(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Name")," "))}function ds(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.primarySiteNameAr)}}function _s(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function ms(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().view(n)}),t.ALo(2,"translate"),t._UZ(3,"i",39),t.qZA(),t._uU(4,"\xa0 "),t.qZA()}2&i&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"view_logs")))}function gs(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().add(n)}),t.ALo(2,"translate"),t._UZ(3,"i",40),t._uU(4,"\xa0 "),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"add_new_log")))}function hs(i,a){if(1&i&&(t.TgZ(0,"td",35),t.YNc(1,ms,5,3,"span",37),t.YNc(2,gs,5,3,"span",37),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.primarySiteLogId>0),t.xp6(1),t.Q6J("ngIf",0==e.primarySiteLogId)}}function Zs(i,a){1&i&&t._UZ(0,"tr",41)}function fs(i,a){1&i&&t._UZ(0,"tr",42)}const As=function(){return{standalone:!0}};let Cs=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.translate=A,this.displayedColumns=["employeeNumber","employeeName","employeeNameAr","primarySiteCode","primarySiteName","primarySiteNameAr","Actions"],this.searchValue="",this.sortingOrder="primarySiteLogId desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Employee/getEmployeesPrimarySiteLogPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){(""==e||e.length>=3)&&e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}add(e){this.isLoading||this.openDialogManage2(e,0,g.Oi.update,e.primarySiteLogId>0?"Updating_Primary_Site_Log":"Adding_Primary_Site_Log","Update",We)}view(e){this.isLoading||this.openDialogManage(e,g.Oi.update,"Primary_Sites_Log","View",ts)}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.requestData=e,c.componentInstance.employeeNumber=e.employeeNumber,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openDialogManage2(e,o,n,s,r,c){let p=this.oprService.openFullWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.employeePrimarySitesLogID=o,p.componentInstance.inputData={employeeNumber:e.employeeNumber,employeeName:e.employeeName,employeeNameAr:e.employeeNameAr},p.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-employee-primarysitelogs"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:60,vars:26,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-4","col-lg-4"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-4","col-lg-4","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","employeeNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","employeeNameAr"],["matColumnDef","primarySiteCode"],["matColumnDef","primarySiteName"],["matColumnDef","primarySiteNameAr"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[4,"ngIf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-list"],[1,"fas","fa-plus-circle"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"nav",4),t.TgZ(5,"ol",5),t.TgZ(6,"li",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"li",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",8),t.TgZ(16,"div",1),t.TgZ(17,"div",9),t.TgZ(18,"div",10),t.TgZ(19,"div",11),t.TgZ(20,"div",1),t.TgZ(21,"div",9),t.TgZ(22,"h4",12),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.TgZ(25,"div",13),t.TgZ(26,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t._UZ(29,"spinner-loader",16),t.qZA(),t.qZA(),t._UZ(30,"div",17),t.TgZ(31,"div",18),t.TgZ(32,"div",19),t.ynx(33),t.TgZ(34,"table",20),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(35,21),t.YNc(36,es,3,3,"th",22),t.YNc(37,os,2,1,"td",23),t.BQk(),t.ynx(38,24),t.YNc(39,is,3,3,"th",22),t.YNc(40,ns,2,1,"td",23),t.BQk(),t.ynx(41,25),t.YNc(42,as,3,3,"th",22),t.YNc(43,ss,2,1,"td",23),t.BQk(),t.ynx(44,26),t.YNc(45,rs,3,3,"th",22),t.YNc(46,ls,2,1,"td",23),t.BQk(),t.ynx(47,27),t.YNc(48,cs,3,3,"th",22),t.YNc(49,ps,2,1,"td",23),t.BQk(),t.ynx(50,28),t.YNc(51,us,3,3,"th",22),t.YNc(52,ds,2,1,"td",23),t.BQk(),t.ynx(53,29),t.YNc(54,_s,3,3,"th",30),t.YNc(55,hs,3,2,"td",23),t.BQk(),t.YNc(56,Zs,1,0,"tr",31),t.YNc(57,fs,1,0,"tr",32),t.qZA(),t.ynx(58),t.TgZ(59,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,15,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(11,17,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,19,"Primary_Site_Log")),t.xp6(10),t.hij("",t.lcZ(24,21,"Primary_Site_Log")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(27,23,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(25,As)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})(),Ts=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.employeeID=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.employeeID>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({employeeNumber:["",l.kI.required],employeeName:["",l.kI.required],employeeID:["",l.kI.required]})}submit(){this.form.valid?(this.employeeID>0&&(this.form.value.employeeID=this.employeeID),this.apiService.post("Employee",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Employee/getEmployeeById",this.employeeID).subscribe(e=>{e&&this.form.patchValue(e)})}reset(){this.form.controls.employeeNumber.setValue(""),this.form.controls.employeeName.setValue(""),this.form.controls.employeeID.setValue("")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-employee"]],features:[t.qOj],decls:41,vars:42,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","number","formControlName","employeeID",1,"form-control",3,"placeholder","readonly"],[3,"control"],["type","text","formControlName","employeeNumber",1,"form-control",3,"placeholder","readonly"],["type","text","formControlName","employeeName",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",10),t.TgZ(35,"div",11),t.TgZ(36,"input",12),t.NdJ("click",function(){return o.closeModel()}),t.ALo(37,"translate"),t.qZA(),t._uU(38," \xa0 "),t._UZ(39,"input",13),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,18,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,20,"Employee_ID")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,22,"Please_Enter")," ",t.lcZ(14,24,"Employee_ID"),""),t.s9C("readonly",o.readonly),t.xp6(3),t.Q6J("control",o.form.controls.employeeID),t.xp6(4),t.Oqu(t.lcZ(20,26,"Employee_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,28,"Please_Enter")," ",t.lcZ(23,30,"Employee_Number"),""),t.s9C("readonly",o.readonly),t.xp6(3),t.Q6J("control",o.form.controls.employeeNumber),t.xp6(4),t.Oqu(t.lcZ(29,32,"Employee_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,34,"Please_Enter")," ",t.lcZ(32,36,"Employee_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.employeeName),t.xp6(3),t.s9C("value",t.lcZ(37,38,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(40,40,"Save")))},directives:[l._Y,l.JL,l.sg,l.wV,l.Fj,l.JJ,l.u,V.s],pipes:[f.X$],encapsulation:2}),i})();function vs(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Code")," "))}function xs(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNumber)}}function qs(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Name_English")," "))}function bs(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeName)}}function ys(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Ss(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",34),t.TgZ(1,"div",36),t.TgZ(2,"a",37),t._UZ(3,"i",38),t.qZA(),t.TgZ(4,"div",39),t.TgZ(5,"a",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.employeeID)}),t._UZ(6,"i",41),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().delete(s.employeeID)}),t._UZ(10,"i",42),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.Oqu(t.lcZ(8,2,"Edit_Employee")),t.xp6(4),t.Oqu(t.lcZ(12,4,"Delete_Employee")))}function ws(i,a){1&i&&t._UZ(0,"tr",43)}function Us(i,a){1&i&&t._UZ(0,"tr",44)}let Ds=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.displayedColumns=["employeeNumber","employeeName","Actions"],this.searchValue="",this.sortingOrder="employeeID desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Employee/getEmployeesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,setTimeout(()=>this.data.sort=this.sort,2e3),this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,Ts);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.employeeID=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Employee","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Employee","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Employee",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-employee"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:53,vars:26,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-6","col-lg-6"],[1,"card-title","pt6"],[1,"col-md-6","col-lg-6","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],[1,"input-group","mb-3"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","employeeNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],[1,"icon-trash"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"h4",14),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t.TgZ(29,"a",16),t.NdJ("click",function(){return o.create()}),t._UZ(30,"i",17),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(33,"div",18),t.TgZ(34,"div",19),t.TgZ(35,"div",20),t.TgZ(36,"div",21),t.TgZ(37,"input",22),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)}),t.qZA(),t.qZA(),t.ynx(38),t.TgZ(39,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(40,24),t.YNc(41,vs,3,3,"th",25),t.YNc(42,xs,2,1,"td",26),t.BQk(),t.ynx(43,27),t.YNc(44,qs,3,3,"th",25),t.YNc(45,bs,2,1,"td",26),t.BQk(),t.ynx(46,28),t.YNc(47,ys,3,3,"th",29),t.YNc(48,Ss,13,6,"td",26),t.BQk(),t.YNc(49,ws,1,0,"tr",30),t.YNc(50,Us,1,0,"tr",31),t.qZA(),t.ynx(51),t.TgZ(52,"mat-paginator",32),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,14,"Employees")," "),t.xp6(6),t.hij(" ",t.lcZ(11,16,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,18,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,20,"Employees")),t.xp6(10),t.hij("",t.lcZ(27,22,"Employee_List")," "),t.xp6(5),t.hij("",t.lcZ(32,24,"Add_New_Employee")," "),t.xp6(6),t.Q6J("ngModel",o.searchValue),t.xp6(2),t.Q6J("dataSource",o.data),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function Ls(i,a){if(1&i&&(t.TgZ(0,"mat-option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.AsE(" ",o.isArabic?null==e?null:e.textTwo:null==e?null:e.text,"-",null==e?null:e.value," ")}}function Ns(i,a){if(1&i&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.lnq("",e.value,"-",e.text,"-",e.textTwo,"")}}function Es(i,a){if(1&i&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",o.isArab?e.textTwo:e.text,"")}}function Os(i,a){if(1&i&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArab?e.textTwo:e.text)}}function ks(i,a){if(1&i&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function js(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw().removeEnquiry(n)}),t._UZ(2,"i",59),t.qZA(),t.qZA()}}function Ms(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",45),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.YNc(16,js,3,0,"span",58),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();let n,s;t.xp6(2),t.Oqu(o.isArab?null==(n=o.getSite(e.siteCode))?null:n.textTwo:null==(n=o.getSite(e.siteCode))?null:n.text),t.xp6(2),t.Oqu(o.isArab?null==(s=o.getService(e.serviceCode))?null:s.textTwo:null==(s=o.getService(e.serviceCode))?null:s.text),t.xp6(2),t.Oqu(e.unitCode),t.xp6(2),t.Oqu(e.pricePerUnit),t.xp6(2),t.Oqu(e.serviceQuantity),t.xp6(2),t.Oqu(e.unitQuantity),t.xp6(2),t.Oqu(e.estimatedPrice),t.xp6(2),t.Q6J("ngIf",0==e.enquiryID||!e.isApproved)}}const Gt=function(){return{standalone:!0}};let It=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.readonly="",this.showApprove=!0,this.id=0,this.siteCodeList=[],this.siteCodeListAll=[],this.unitCodeList=[],this.serviceCodeList=[],this.customerCode="",this.custCodeControl=new l.NI("",l.kI.required),this.branchCodeList=[],this.isDataLoading=!1,this.listOfEnquiries=[],this.sequence=1,this.editsequence=0,this.enquiryNumber="",this.serviceCode="",this.serviceQuantity=0,this.pricePerUnit=0,this.unitQuantity=0,this.estimatedPrice=0,this.totalEstPrice=0,this.statusEnquiry="Open",this.serviceNameArb="",this.serviceNameEng="",this.custAddress="",this.isActive=!0,this.stusEnquiryHead="Open",this.isOldEnquiryForm=!1,this.isArabic=!1,this.isAdednum=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(this.customerCode),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterCustCodes(h||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadBranchCodes(){this.apiService.getall("Branch/getSelectBranchCodeList").subscribe(e=>{console.log(e),this.apiService.getall("OpAuthorities/getOpAuthoritiesListByUserId").subscribe(o=>{if(console.log(o),0==o.length)this.utilService.ShowApiErrorMessage(this.translate.instant("You_Can_Not_Create_Enquiry")),this.dialogRef.close(!1);else{for(let n=0;n<o.length;n++){let s=e.find(r=>r.value==o[n].branchCode);null!=s&&-1==this.branchCodeList.findIndex(r=>r.value==s.branchCode)&&this.branchCodeList.push(s)}console.log(this.branchCodeList)}})})}loadSiteCodes(e){this.apiService.getall(`CustomerSite/getSelectSiteListByCustCode/${e}`).subscribe(o=>{this.siteCodeList=o,this.siteCodeListAll=o,this.id>0&&this.loadSiteListNotCovertedAsProject()})}loadServiceCodes(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceCodeList=e})}loadUnitCodes(e){this.apiService.getall("Units/getSelectUnitListByServiceCode/"+e).subscribe(o=>{this.unitCodeList=o,console.log(o)})}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.setForm(),null!=this.enquiryHead&&this.setEditForm(),this.readonly="readonly",this.loadBranchCodes()}setForm(){this.form=this.fb.group({sitecode:[""],enquiryNumber:["XXXXXXXXXX"],customerCode:["",l.kI.required],branchCode:["",l.kI.required],dateOfEnquiry:["",l.kI.required],estimateClosingDate:["",l.kI.required],userName:[""],totalEstPrice:[],remarks:[""],stusEnquiryHead:["Open"],isActive:[!0],saleRep:[""],custAddress:[""],serviceNameArb:[""],serviceNameEng:[""],serviceCode:[""],unitCode:[""]}),this.setToDefault()}submit(){let e=new Date(this.form.controls.dateOfEnquiry.value),o=new Date(this.form.controls.estimateClosingDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),o.setMinutes(o.getMinutes()-o.getTimezoneOffset()),this.form.value.dateOfEnquiry=e,this.form.value.estimateClosingDate=o,this.form.valid&&this.listOfEnquiries.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.enquiriesList=this.listOfEnquiries,this.form.value.custAddress=this.custAddress,this.form.value.estimatedPrice=this.estimatedPrice,this.form.value.serviceNameArb=this.serviceNameArb,this.form.value.serviceNameEng=this.serviceNameEng,this.apiService.post("ServiceEnquiryForm",this.form.value).subscribe(n=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})):this.utilService.FillUpFields()}setEditForm(){this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.apiService.getall(`ServiceEnquiryHeader/getEnquiryFormHeaderByEnquiryNumber/${this.enquiryHead.enquiryNumber}`).subscribe(e=>{e&&(this.custCodeControl.setValue(this.enquiryHead.customerCode),this.customerCode=this.enquiryHead.customerCode,this.form.controls.customerCode.setValue(this.enquiryHead.customerCode),this.form.patchValue(e),this.form.patchValue({id:e.id}),this.id=e.id,this.getEnquiriesList(),this.loadSiteCodes(this.enquiryHead.customerCode),this.totalEstPrice=e.totalEstPrice,this.onSelectionCustomerCode(this.enquiryHead.customerCode,3))})}getEnquiriesList(){this.apiService.getall(`ServiceEnquiries/getSevriceEnquiriesByEnquiryNumber/${this.enquiryHead.enquiryNumber}`).subscribe(e=>{e&&(this.listOfEnquiries=e,e.findIndex(o=>o.isApproved)>=0&&this.loadSiteListNotCovertedAsProject())})}loadSiteListNotCovertedAsProject(){this.enquiryNumber=this.form.value.enquiryNumber,this.apiService.getall(`projectSites/getSelectSiteListWhicAreNotConvertedAsProjectByEnquiryNumber/${this.enquiryNumber}`).subscribe(e=>{this.siteCodeList=e})}addEnquiry(){this.enquiryNumber=this.form.value.enquiryNumber,null!=this.siteCode&&""!=this.siteCode&&null!=this.serviceCode&&""!=this.serviceCode&&null!=this.unitCode&&""!=this.unitCode&&this.serviceQuantity>0&&this.unitQuantity>0&&this.pricePerUnit>0&&""!=this.statusEnquiry&&(this.estimatedPrice=this.pricePerUnit*this.serviceQuantity*this.unitQuantity,this.totalEstPrice=this.totalEstPrice+this.estimatedPrice,this.listOfEnquiries.push({sequence:this.getSequence(),enquiryID:0,enquiryNumber:this.enquiryNumber,siteCode:this.siteCode,serviceCode:this.serviceCode,unitCode:this.unitCode,serviceQuantity:this.serviceQuantity,unitQuantity:this.unitQuantity,estimatedPrice:this.estimatedPrice,statusEnquiry:this.statusEnquiry,serviceNameArb:this.serviceNameArb,serviceNameEng:this.serviceNameEng,pricePerUnit:this.pricePerUnit,totalEstPrice:this.totalEstPrice,isAssignedSurveyor:!1}),this.form.value.totalEstPrice=this.totalEstPrice,this.form.value.enquiriesList=this.listOfEnquiries,this.setToDefault())}removeEnquiry(e){this.totalEstPrice=this.totalEstPrice-this.listOfEnquiries[e].estimatedPrice,this.form.value.totalEstPrice=this.totalEstPrice,this.setToDefault(),this.listOfEnquiries.splice(e,1),this.downSequence()}setToDefault(){this.siteCode=this.serviceCode=this.serviceNameEng=this.serviceNameArb=this.unitCode="",this.estimatedPrice=this.serviceQuantity=this.pricePerUnit=this.unitQuantity=0,this.isActive=!0}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.enquiryNumber.setValue(""),this.form.controls.customerCode.setValue(""),this.form.controls.siteCode.setValue(""),this.form.controls.unitCode.setValue(""),this.form.controls.pricePerUnit.setValue(0),this.form.controls.dateOfEnquiry.setValue(""),this.form.controls.estimateClosingDate.setValue(""),this.form.controls.userName.setValue(""),this.form.controls.totalEstPrice.setValue(0),this.form.controls.stusEnquiryHead.setValue(""),this.form.controls.remarks.setValue(""),this.form.controls.isActive.setValue(!0),this.form.controls.saleRep.setValue(""),this.form.controls.custAddress.setValue("")}closeModel(){this.dialogRef.close()}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){this.form.patchValue({custAddress:s.custAddress1,saleRep:s.custSalesRep,customerCode:s.custCode});let r=this.custCodeControl.value;this.form.value.customerCode=r,this.loadSiteCodes(r),this.loadServiceCodes()}else this.form.controls.customerCode.setValue(""),this.form.controls.custAddress.setValue(""),this.form.controls.saleRep.setValue(""),this.custCodeControl.setValue(""),this.siteCodeList=[]})}getServiceDetails(e){if(""!=e.target.value){const o=e.target.value;this.apiService.getall("Services/getServiceByServiceCode/"+o).subscribe(n=>{this.serviceNameEng=n.serviceNameEng,this.serviceNameArb=n.serviceNameArb,this.serviceCode=o}),this.loadUnitCodes(o)}else this.unitCodeList=[];this.serviceQuantity=0,this.unitQuantity=0,this.pricePerUnit=0,this.estimatedPrice=0}getServiceUnitPrice(e){if(""!=e.target.value){const o=e.target.value;this.apiService.getall("ServiceUnitMap/getServiceUnitMapByServiceAndUnitCode?UnitCode="+o+"&ServiceCode="+this.serviceCode).subscribe(n=>{this.pricePerUnit=n.pricePerUnit,this.unitCode=o})}else this.serviceQuantity=0,this.unitQuantity=0,this.pricePerUnit=0,this.estimatedPrice=0}calculateEstimatePrice(e,o){if(null!==e){let n=e.target.value;this.estimatedPrice="serviceQuantity"==o?this.pricePerUnit*this.unitQuantity*n:"pricePerUnit"==o?n*this.serviceQuantity*this.unitQuantity:"unitQuantity"==o?n*this.serviceQuantity*this.pricePerUnit:0}else this.estimatedPrice=this.pricePerUnit*this.serviceQuantity*this.unitQuantity}getService(e){return this.serviceCodeList.find(o=>o.value==e)}getSite(e){return this.siteCodeListAll.find(o=>o.value==e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-enquiry-form"]],features:[t.qOj],decls:237,vars:217,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"col-sm-3"],[1,"mr-sm-2"],["formControlName","stusEnquiryHead",1,"custom-select","mr-sm-2"],["value","Open"],["value","Closed"],["value","InProgress"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","enquiryNumber","readonly","",1,"form-control",3,"placeholder"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","dateOfEnquiry",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["data-date-format","mm/yyyy"],["picker",""],["formControlName","estimateClosingDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],["picker2",""],["type","text","readonly","","formControlName","custAddress",1,"form-control",3,"placeholder"],["type","text","formControlName","saleRep","readonly","readonly",1,"form-control",3,"placeholder"],["type","text","formControlName","userName",1,"form-control",3,"placeholder"],["formControlName","branchCode",1,"custom-select","mr-sm-2"],["value",""],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","number",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],["type","number","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-right"],[1,"tableicons",3,"click"],[1,"fas","fa-plus-circle"],["colspan","8"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","5","rowspan","5",1,"text-right","bgcolor"],[1,"text-right","bgcolor"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[4,"ngIf"],[1,"fas","fa-minus-circle"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t.TgZ(12,"label",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"select",9),t.TgZ(16,"option",10),t._uU(17),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"option",10),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"option",11),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",13),t.TgZ(30,"div",5),t.TgZ(31,"div",14),t.TgZ(32,"div",15),t.TgZ(33,"div",16),t.TgZ(34,"div",17),t.TgZ(35,"label",8),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",18),t.ALo(39,"translate"),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.TgZ(41,"div",16),t.TgZ(42,"label",8),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"div",17),t.TgZ(46,"div",19),t._UZ(47,"auto-loader",20),t._UZ(48,"input",21),t.ALo(49,"translate"),t.ALo(50,"translate"),t.TgZ(51,"mat-autocomplete",22,23),t.NdJ("optionSelected",function(s){return o.onSelectionCustomerCode(s,1)}),t.YNc(53,Ls,2,3,"mat-option",24),t.ALo(54,"async"),t.qZA(),t.qZA(),t._UZ(55,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(56,"div",16),t.TgZ(57,"label",8),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"div",17),t.TgZ(61,"div",19),t._UZ(62,"input",26),t.ALo(63,"translate"),t.TgZ(64,"div",27),t._UZ(65,"mat-datepicker-toggle",28),t._UZ(66,"mat-datepicker",29,30),t.qZA(),t.qZA(),t.qZA(),t._UZ(68,"validation-message",25),t.qZA(),t.TgZ(69,"div",16),t.TgZ(70,"label",8),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"div",17),t.TgZ(74,"div",19),t._UZ(75,"input",31),t.ALo(76,"translate"),t.TgZ(77,"div",27),t._UZ(78,"mat-datepicker-toggle",28),t._UZ(79,"mat-datepicker",29,32),t.qZA(),t.qZA(),t.qZA(),t._UZ(81,"validation-message",25),t.qZA(),t.TgZ(82,"div",16),t.TgZ(83,"div",17),t.TgZ(84,"label",8),t._uU(85),t.ALo(86,"translate"),t.qZA(),t._UZ(87,"input",33),t.ALo(88,"translate"),t._UZ(89,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(90,"div",16),t.TgZ(91,"div",17),t.TgZ(92,"label",8),t._uU(93),t.ALo(94,"translate"),t.qZA(),t._UZ(95,"input",34),t.ALo(96,"translate"),t.ALo(97,"translate"),t.qZA(),t.qZA(),t.TgZ(98,"div",16),t.TgZ(99,"div",17),t.TgZ(100,"label",8),t._uU(101),t.ALo(102,"translate"),t.qZA(),t._UZ(103,"input",35),t.ALo(104,"translate"),t.ALo(105,"translate"),t.qZA(),t.qZA(),t.TgZ(106,"div",16),t.TgZ(107,"div",17),t.TgZ(108,"label"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t._UZ(111,"br"),t.TgZ(112,"select",36),t.TgZ(113,"option",37),t._uU(114),t.ALo(115,"translate"),t.ALo(116,"translate"),t.qZA(),t.YNc(117,Ns,2,4,"option",24),t.qZA(),t._UZ(118,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(119,"div",5),t.TgZ(120,"div",17),t.TgZ(121,"label",8),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"textarea",38),t.ALo(125,"translate"),t.ALo(126,"translate"),t._uU(127,"                    \n"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(128,"div",39),t.TgZ(129,"table",40),t.TgZ(130,"thead"),t.TgZ(131,"tr"),t.TgZ(132,"th"),t._uU(133),t.ALo(134,"translate"),t.qZA(),t.TgZ(135,"th"),t._uU(136),t.ALo(137,"translate"),t.qZA(),t.TgZ(138,"th"),t._uU(139),t.ALo(140,"translate"),t.qZA(),t.TgZ(141,"th"),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"th"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t.TgZ(147,"th"),t._uU(148),t.ALo(149,"translate"),t.qZA(),t.TgZ(150,"th"),t._uU(151),t.ALo(152,"translate"),t.qZA(),t._UZ(153,"th"),t.qZA(),t.qZA(),t.TgZ(154,"tbody"),t.TgZ(155,"tr"),t.TgZ(156,"td"),t.TgZ(157,"select",41),t.NdJ("ngModelChange",function(s){return o.siteCode=s}),t.TgZ(158,"option",37),t._uU(159),t.ALo(160,"translate"),t.ALo(161,"translate"),t.qZA(),t.YNc(162,Es,2,3,"option",24),t.qZA(),t.qZA(),t.TgZ(163,"td"),t.TgZ(164,"select",42),t.NdJ("ngModelChange",function(s){return o.serviceCode=s})("change",function(s){return o.getServiceDetails(s)}),t.TgZ(165,"option",37),t._uU(166),t.ALo(167,"translate"),t.ALo(168,"translate"),t.qZA(),t.YNc(169,Os,2,2,"option",24),t.qZA(),t.qZA(),t.TgZ(170,"td"),t.TgZ(171,"select",42),t.NdJ("ngModelChange",function(s){return o.unitCode=s})("change",function(s){return o.getServiceUnitPrice(s)}),t.TgZ(172,"option",37),t._uU(173),t.ALo(174,"translate"),t.ALo(175,"translate"),t.qZA(),t.YNc(176,ks,2,2,"option",24),t.qZA(),t.qZA(),t.TgZ(177,"td"),t.TgZ(178,"input",43),t.NdJ("ngModelChange",function(s){return o.pricePerUnit=s})("keyup",function(s){return o.calculateEstimatePrice(s,"pricePerUnit")}),t.ALo(179,"translate"),t.qZA(),t.qZA(),t.TgZ(180,"td"),t.TgZ(181,"input",43),t.NdJ("ngModelChange",function(s){return o.serviceQuantity=s})("keyup",function(s){return o.calculateEstimatePrice(s,"serviceQuantity")}),t.ALo(182,"translate"),t.qZA(),t.qZA(),t.TgZ(183,"td"),t.TgZ(184,"input",43),t.NdJ("ngModelChange",function(s){return o.unitQuantity=s})("keyup",function(s){return o.calculateEstimatePrice(s,"unitQuantity")}),t.ALo(185,"translate"),t.qZA(),t.qZA(),t.TgZ(186,"td"),t.TgZ(187,"input",44),t.NdJ("ngModelChange",function(s){return o.estimatedPrice=s}),t.ALo(188,"translate"),t.qZA(),t.qZA(),t.TgZ(189,"td",45),t.TgZ(190,"a",46),t.NdJ("click",function(){return o.addEnquiry()}),t._UZ(191,"i",47),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(192,"tr"),t._UZ(193,"td",48),t.qZA(),t.TgZ(194,"thead"),t.TgZ(195,"tr"),t.TgZ(196,"th"),t._uU(197),t.ALo(198,"translate"),t.qZA(),t.TgZ(199,"th"),t._uU(200),t.ALo(201,"translate"),t.qZA(),t.TgZ(202,"th"),t._uU(203),t.ALo(204,"translate"),t.qZA(),t.TgZ(205,"th"),t._uU(206),t.ALo(207,"translate"),t.qZA(),t.TgZ(208,"th"),t._uU(209),t.ALo(210,"translate"),t.qZA(),t.TgZ(211,"th"),t._uU(212),t.ALo(213,"translate"),t.qZA(),t.TgZ(214,"th"),t._uU(215),t.ALo(216,"translate"),t.qZA(),t._UZ(217,"th"),t.qZA(),t.qZA(),t.TgZ(218,"tbody"),t.YNc(219,Ms,17,8,"tr",49),t.qZA(),t.TgZ(220,"tfoot"),t.TgZ(221,"tr",50),t._UZ(222,"td",51),t.TgZ(223,"td",52),t._uU(224),t.ALo(225,"translate"),t.qZA(),t.TgZ(226,"td",52),t._uU(227),t.qZA(),t._UZ(228,"td",52),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(229,"div",53),t.TgZ(230,"div",13),t.TgZ(231,"div",54),t.TgZ(232,"input",55),t.NdJ("click",function(){return o.closeModel()}),t.ALo(233,"translate"),t.qZA(),t._uU(234," \xa0 "),t._UZ(235,"input",56),t.ALo(236,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(52),s=t.MAs(67),r=t.MAs(80);t.xp6(1),t.hij(" ",t.lcZ(2,92,"Create_New_Service_Enquiry")," "),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(8),t.Oqu(t.lcZ(14,94,"Enquiry_Status")),t.xp6(4),t.AsE("",t.lcZ(18,96,"Select ")," ",t.lcZ(19,98,"Enquiry_Status"),""),t.xp6(4),t.hij("",t.lcZ(22,100,"Open")," "),t.xp6(3),t.hij("",t.lcZ(25,102,"Closed")," "),t.xp6(3),t.hij("",t.lcZ(28,104,"InProgress")," "),t.xp6(9),t.Oqu(t.lcZ(37,106,"Enquiry_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(39,108,"Please_Enter")," ",t.lcZ(40,110,"Enquiry_Number"),""),t.xp6(5),t.Oqu(t.lcZ(44,112,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(49,114,"Please_Enter")," ",t.lcZ(50,116,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(54,118,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(3),t.Oqu(t.lcZ(59,120,"Date_of_Enquiry")),t.xp6(4),t.s9C("placeholder",t.lcZ(63,122,"Select_a_Date")),t.Q6J("matDatepicker",s),t.xp6(3),t.Q6J("for",s),t.xp6(3),t.Q6J("control",o.form.controls.dateOfEnquiry),t.xp6(3),t.Oqu(t.lcZ(72,124,"Estimate_Closing_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(76,126,"Estimate_Closing_Date")),t.Q6J("matDatepicker",r),t.xp6(3),t.Q6J("for",r),t.xp6(3),t.Q6J("control",o.form.controls.estimateClosingDate),t.xp6(4),t.Oqu(t.lcZ(86,128,"Customer_Address")),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(88,130,"Customer_Address"),""),t.xp6(2),t.Q6J("control",o.form.controls.custAddress),t.xp6(4),t.Oqu(t.lcZ(94,132,"Sales_Representative")),t.xp6(2),t.hYB("placeholder","",t.lcZ(96,134,"Please_Enter")," ",t.lcZ(97,136,"Sales_Representative"),""),t.xp6(6),t.Oqu(t.lcZ(102,138,"Enquiry_Created_By")),t.xp6(2),t.hYB("placeholder","",t.lcZ(104,140,"Please_Enter")," ",t.lcZ(105,142,"Enquiry_Created_By"),""),t.xp6(6),t.Oqu(t.lcZ(110,144,"Branch")),t.xp6(5),t.AsE("",t.lcZ(115,146,"Select")," ",t.lcZ(116,148,"Branch")," "),t.xp6(3),t.Q6J("ngForOf",o.branchCodeList),t.xp6(1),t.Q6J("control",o.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(123,150,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(125,152,"Please_Select")," ",t.lcZ(126,154,"Remarks"),""),t.xp6(9),t.Oqu(t.lcZ(134,156,"Site")),t.xp6(3),t.Oqu(t.lcZ(137,158,"Service_Name")),t.xp6(3),t.Oqu(t.lcZ(140,160,"Service_Unit")),t.xp6(3),t.Oqu(t.lcZ(143,162,"Price_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(146,164,"Service_Quantity")),t.xp6(3),t.Oqu(t.lcZ(149,166,"Unit_Quantity")),t.xp6(3),t.Oqu(t.lcZ(152,168,"Estimated_Price")),t.xp6(6),t.Q6J("ngModel",o.siteCode)("ngModelOptions",t.DdM(210,Gt)),t.xp6(2),t.AsE("",t.lcZ(160,170,"Select")," ",t.lcZ(161,172,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(2),t.Q6J("ngModel",o.serviceCode)("ngModelOptions",t.DdM(211,Gt)),t.xp6(2),t.AsE("",t.lcZ(167,174,"Select")," ",t.lcZ(168,176,"Service")," "),t.xp6(3),t.Q6J("ngForOf",o.serviceCodeList),t.xp6(2),t.Q6J("ngModel",o.unitCode)("ngModelOptions",t.DdM(212,Gt)),t.xp6(2),t.AsE("",t.lcZ(174,178,"Select")," ",t.lcZ(175,180,"Service_Unit")," "),t.xp6(3),t.Q6J("ngForOf",o.unitCodeList),t.xp6(2),t.s9C("placeholder",t.lcZ(179,182,"Price_Per_Unit")),t.Q6J("ngModel",o.pricePerUnit)("ngModelOptions",t.DdM(213,Gt)),t.xp6(3),t.s9C("placeholder",t.lcZ(182,184,"Service_Quantity")),t.Q6J("ngModel",o.serviceQuantity)("ngModelOptions",t.DdM(214,Gt)),t.xp6(3),t.s9C("placeholder",t.lcZ(185,186,"Unit_Quantity")),t.Q6J("ngModel",o.unitQuantity)("ngModelOptions",t.DdM(215,Gt)),t.xp6(3),t.s9C("placeholder",t.lcZ(188,188,"Estimated_Price")),t.Q6J("ngModel",o.estimatedPrice)("ngModelOptions",t.DdM(216,Gt)),t.xp6(10),t.Oqu(t.lcZ(198,190,"Site")),t.xp6(3),t.Oqu(t.lcZ(201,192,"Service_Name")),t.xp6(3),t.Oqu(t.lcZ(204,194,"Service_Unit")),t.xp6(3),t.Oqu(t.lcZ(207,196,"Price_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(210,198,"Service_Quantity")),t.xp6(3),t.Oqu(t.lcZ(213,200,"Unit_Quantity")),t.xp6(3),t.Oqu(t.lcZ(216,202,"Estimated_Price")),t.xp6(4),t.Q6J("ngForOf",o.listOfEnquiries),t.xp6(5),t.hij("",t.lcZ(225,204,"Total_Amount"),"-$"),t.xp6(3),t.Oqu(o.totalEstPrice),t.xp6(5),t.s9C("value",t.lcZ(233,206,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(236,208,"Save"))}},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,l.YN,l.Kr,l.Fj,At.z,lt.ZL,l.oH,lt.XC,Z.sg,V.s,j.hl,j.nW,ft.R9,j.Mq,l.On,l.wV,Ut.ey,Z.O5],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function Rs(i,a){if(1&i&&(t.TgZ(0,"option",15),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.surveyorCode),t.xp6(1),t.AsE("",e.surveyorCode,"-",null==e?null:e.userName,"")}}let ve=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.surveyorsList=[]}ngOnInit(){this.setForm(),this.loadSurveyors()}closeModel(){this.dialogRef.close()}submit(){this.form.valid?this.apiService.post("ServiceEnquiries/addSurveyorToEnquiry",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}setForm(){this.form=this.fb.group({enquiryID:[this.id],surveyorCode:["",l.kI.required]})}loadSurveyors(){this.apiService.getall(`Surveyors/getSelectSurveyorListForBranch/${this.branchCode}`).subscribe(e=>{this.surveyorsList=e,0==this.surveyorsList.length&&this.notifyService.showWarning("No SUrveyors Found For Branch:"+this.branchCode)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-surveyor-to-enquiry"]],features:[t.qOj],decls:34,vars:30,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","enquiryID","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["formControlName","surveyorCode",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","customrow"],[1,"col-lg-12","col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"select",8),t.TgZ(22,"option",9),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA(),t.YNc(26,Rs,2,3,"option",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",11),t.TgZ(28,"div",12),t.TgZ(29,"input",13),t.NdJ("click",function(){return o.closeModel()}),t.ALo(30,"translate"),t.qZA(),t._uU(31," \xa0\xa0 "),t._UZ(32,"input",14),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,12,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,14,"Enquiry_ID")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,16,"Please_Enter")," ",t.lcZ(14,18,"Enquiry_ID"),""),t.xp6(3),t.Q6J("control",o.form.controls.enquiryID),t.xp6(4),t.Oqu(t.lcZ(20,20,"Surveyor_Code")),t.xp6(4),t.AsE("",t.lcZ(24,22,"Select")," ",t.lcZ(25,24,"Surveyor_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.surveyorsList),t.xp6(3),t.s9C("value",t.lcZ(30,26,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(33,28,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg],pipes:[f.X$],encapsulation:2}),i})();function Ps(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enquiry_Number")," "))}function Fs(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.enquiryNumber)}}function Is(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enquiry_ID")," "))}function Ys(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.enquiryID)}}function Js(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Qs(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Bs(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Code")," "))}function Hs(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceCode)}}function $s(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Code")," "))}function Vs(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitCode)}}function Gs(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Price_Per_Unit")," "))}function Ws(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.pricePerUnit)}}function zs(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Quantity")," "))}function Xs(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceQuantity)}}function Ks(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Estimated_Price")," "))}function tr(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.estimatedPrice)}}function er(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Status")," "))}function or(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.statusEnquiry)}}function ir(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}const Ne=function(i){return{enquiryID:i}};function nr(i,a){if(1&i&&(t.TgZ(0,"a",47),t._UZ(1,"i",48),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ne,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"Fill_Survey_Form")," ")}}function ar(i,a){if(1&i&&(t.TgZ(0,"a",47),t._UZ(1,"i",48),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ne,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"Edit_Survey_Form")," ")}}function sr(i,a){if(1&i&&(t.TgZ(0,"a",47),t._UZ(1,"i",49),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ne,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"View_Survey_Form")," ")}}function rr(i,a){if(1&i&&(t.TgZ(0,"td",40),t.TgZ(1,"div",42),t.TgZ(2,"a",43),t._UZ(3,"i",44),t.qZA(),t.TgZ(4,"div",45),t.YNc(5,nr,4,6,"a",46),t.YNc(6,ar,4,6,"a",46),t.YNc(7,sr,4,6,"a",46),t.qZA(),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(5),t.Q6J("ngIf","Assigned_Surveyor"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Survey_In_Progress"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Survey_Completed"==e.statusEnquiry)}}function lr(i,a){1&i&&t._UZ(0,"tr",50)}function cr(i,a){1&i&&t._UZ(0,"tr",51)}const pr=function(){return{standalone:!0}};let ur=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.route=h,this.oprService=A,this.displayedColumns=["enquiryNumber","enquiryID","siteCode","serviceCode","unitCode","pricePerUnit","serviceQuantity","estimatedPrice","statusEnquiry","Actions"],this.searchValue="",this.sortingOrder="enquiryID desc",this.isLoading=!1}ngOnInit(){this.surveyorCode=this.oprService.SurveyorCode,null==this.surveyorCode&&(this.surveyorCode=localStorage.getItem("surveyorCode")),this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ServiceEnquiries/getSevriceEnquiriesBySurveyorCodePagedList",this.utilService.getQueryString(e,o,this.surveyorCode,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Enquiry","Add",It)}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Enquiry","Update",It)}addSuveyorToEnquiry(e){this.openDialogManage(e,g.Oi.create,"Adding_Surveyor_To_Enquiry","Save",ve)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceEnquiries",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(D.gz),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-enquiries-by-surveyor-code"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:75,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addEnquiries","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","enquiryNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","enquiryID"],["matColumnDef","siteCode"],["matColumnDef","serviceCode"],["matColumnDef","unitCode"],["matColumnDef","pricePerUnit"],["matColumnDef","serviceQuantity"],["matColumnDef","estimatedPrice"],["matColumnDef","statusEnquiry"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],["class","dropdown-item tableicons","routerLink","EditableSurveyForm",3,"queryParams",4,"ngIf"],["routerLink","EditableSurveyForm",1,"dropdown-item","tableicons",3,"queryParams"],[1,"icon-pencil"],[1,"icon-eye"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,Ps,3,3,"th",24),t.YNc(43,Fs,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,Is,3,3,"th",24),t.YNc(46,Ys,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,Js,3,3,"th",24),t.YNc(49,Qs,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,Bs,3,3,"th",24),t.YNc(52,Hs,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,$s,3,3,"th",24),t.YNc(55,Vs,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,Gs,3,3,"th",24),t.YNc(58,Ws,2,1,"td",25),t.BQk(),t.ynx(59,31),t.YNc(60,zs,3,3,"th",24),t.YNc(61,Xs,2,1,"td",25),t.BQk(),t.ynx(62,32),t.YNc(63,Ks,3,3,"th",24),t.YNc(64,tr,2,1,"td",25),t.BQk(),t.ynx(65,33),t.YNc(66,er,3,3,"th",24),t.YNc(67,or,2,1,"td",25),t.BQk(),t.ynx(68,34),t.YNc(69,ir,3,3,"th",35),t.YNc(70,rr,8,3,"td",25),t.BQk(),t.YNc(71,lr,1,0,"tr",36),t.YNc(72,cr,1,0,"tr",37),t.qZA(),t.ynx(73),t.TgZ(74,"mat-paginator",38),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Services_Enquiry")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Services_Enquiry")),t.xp6(10),t.hij("",t.lcZ(27,24,"Services_Enquiry_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,pr)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Services_Enquiry")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,D.yS,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function dr(i,a){if(1&i&&(t.TgZ(0,"mat-option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.value," ")}}function _r(i,a){if(1&i&&(t.TgZ(0,"option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",o.isArabic?e.textTwo:e.text,"")}}function mr(i,a){if(1&i&&(t.TgZ(0,"option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArabic?e.textTwo:e.text)}}function gr(i,a){if(1&i&&(t.TgZ(0,"option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArabic?e.textTwo:e.text)}}function hr(i,a){if(1&i&&(t.TgZ(0,"option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArabic?e.textTwo:e.text)}}function Zr(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td",47),t._uU(18),t.qZA(),t.TgZ(19,"td"),t.TgZ(20,"a",48),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeEnquiry(s)}),t._UZ(21,"i",60),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.siteCode),t.xp6(2),t.Oqu(e.serviceCode),t.xp6(2),t.Oqu(e.serviceNameEng),t.xp6(2),t.Oqu(e.serviceNameArb),t.xp6(2),t.Oqu(e.unitCode),t.xp6(2),t.Oqu(e.pricePerUnit),t.xp6(2),t.Oqu(e.serviceQuantity),t.xp6(2),t.Oqu(e.unitQuantity),t.xp6(2),t.Oqu(e.estimatedPrice)}}const Yt=function(){return{standalone:!0}};let ze=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.readonly="",this.showApprove=!0,this.id=0,this.siteCodeList=[],this.unitCodeList=[],this.serviceCodeList=[],this.customerCode="",this.custCodeControl=new l.NI("",l.kI.required),this.branchCodeList=[],this.isDataLoading=!1,this.listOfEnquiries=[],this.sequence=1,this.editsequence=0,this.enquiryNumber="",this.serviceCode="",this.serviceQuantity=0,this.pricePerUnit=0,this.unitQuantity=0,this.estimatedPrice=0,this.totalEstPrice=0,this.statusEnquiry="Open",this.serviceNameArb="",this.serviceNameEng="",this.custAddress="",this.isActive=!0,this.stusEnquiryHead="Open",this.isArabic=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(this.customerCode),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterCustCodes(h||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadBranchCodes(){this.apiService.getall("Branch/getSelectBranchCodeList").subscribe(e=>{this.branchCodeList=e})}loadSiteCodes(e){this.apiService.getall(`CustomerSite/getSelectSiteListByCustCode/${e}`).subscribe(o=>{this.siteCodeList=o})}loadServiceCodes(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceCodeList=e})}loadUnitCodes(e){this.apiService.getall("Units/getSelectUnitListByServiceCode/"+e).subscribe(o=>{this.unitCodeList=o})}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.setForm(),this.readonly="readonly",this.loadBranchCodes()}setForm(){this.form=this.fb.group({sitecode:[""],enquiryNumber:["XXXXXXXXXX"],customerCode:["",l.kI.required],branchCode:["",l.kI.required],dateOfEnquiry:["",l.kI.required],estimateClosingDate:["",l.kI.required],userName:[""],totalEstPrice:[],remarks:[""],stusEnquiryHead:["Open"],isActive:[!0],saleRep:[""],custAddress:[""],serviceNameArb:[""],serviceNameEng:[""],serviceCode:[""],unitCode:[""]}),this.setToDefault()}submit(){let e=new Date(this.form.controls.dateOfEnquiry.value),o=new Date(this.form.controls.estimateClosingDate.value);this.form.value.dateOfEnquiry=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),this.form.value.estimateClosingDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1),this.form.valid&&this.listOfEnquiries.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.enquiriesList=this.listOfEnquiries,this.form.value.custAddress=this.custAddress,this.form.value.estimatedPrice=this.estimatedPrice,this.form.value.serviceNameArb=this.serviceNameArb,this.form.value.serviceNameEng=this.serviceNameEng,this.apiService.post("ExistingProjects",this.form.value).subscribe(n=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})):this.utilService.FillUpFields()}addEnquiry(){this.enquiryNumber=this.form.value.enquiryNumber,null!=this.siteCode&&""!=this.siteCode&&null!=this.serviceCode&&""!=this.serviceCode&&null!=this.unitCode&&""!=this.unitCode&&this.serviceQuantity>0&&this.unitQuantity>0&&this.pricePerUnit>0&&""!=this.statusEnquiry&&(this.estimatedPrice=this.pricePerUnit*this.serviceQuantity*this.unitQuantity,this.totalEstPrice=this.totalEstPrice+this.estimatedPrice,this.listOfEnquiries.push({sequence:this.getSequence(),enquiryNumber:this.enquiryNumber,siteCode:this.siteCode,serviceCode:this.serviceCode,unitCode:this.unitCode,serviceQuantity:this.serviceQuantity,unitQuantity:this.unitQuantity,estimatedPrice:this.estimatedPrice,statusEnquiry:this.statusEnquiry,serviceNameArb:this.serviceNameArb,serviceNameEng:this.serviceNameEng,pricePerUnit:this.pricePerUnit,totalEstPrice:this.totalEstPrice}),this.form.value.totalEstPrice=this.totalEstPrice,this.form.value.enquiriesList=this.listOfEnquiries,this.setToDefault())}removeEnquiry(e){this.totalEstPrice=this.totalEstPrice-this.listOfEnquiries[e].estimatedPrice,this.form.value.totalEstPrice=this.totalEstPrice,this.setToDefault(),this.listOfEnquiries.splice(e,1),this.downSequence()}setToDefault(){this.siteCode=this.serviceCode=this.serviceNameEng=this.serviceNameArb=this.unitCode="",this.estimatedPrice=this.serviceQuantity=this.pricePerUnit=this.unitQuantity=0,this.isActive=!0}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.enquiryNumber.setValue(""),this.form.controls.customerCode.setValue(""),this.form.controls.siteCode.setValue(""),this.form.controls.unitCode.setValue(""),this.form.controls.pricePerUnit.setValue(0),this.form.controls.dateOfEnquiry.setValue(""),this.form.controls.estimateClosingDate.setValue(""),this.form.controls.userName.setValue(""),this.form.controls.totalEstPrice.setValue(0),this.form.controls.stusEnquiryHead.setValue(""),this.form.controls.remarks.setValue(""),this.form.controls.isActive.setValue(!0),this.form.controls.saleRep.setValue(""),this.form.controls.custAddress.setValue("")}closeModel(){this.dialogRef.close()}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o&&(n=e.target.value),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){this.form.patchValue({custAddress:s.custAddress1,saleRep:s.custSalesRep,customerCode:s.custCode});let r=this.custCodeControl.value;this.form.value.customerCode=r,this.loadSiteCodes(r),this.loadServiceCodes()}else this.form.controls.customerCode.setValue(""),this.form.controls.custAddress.setValue(""),this.form.controls.saleRep.setValue(""),this.custCodeControl.setValue(""),this.siteCodeList=[]})}getServiceDetails(e){if(""!=e.target.value){const o=e.target.value;this.apiService.getall("Services/getServiceByServiceCode/"+o).subscribe(n=>{this.serviceNameEng=n.serviceNameEng,this.serviceNameArb=n.serviceNameArb,this.serviceCode=o}),this.loadUnitCodes(o)}else this.unitCodeList=[];this.serviceQuantity=0,this.unitQuantity=0,this.pricePerUnit=0,this.estimatedPrice=0}getServiceUnitPrice(e){if(""!=e.target.value){const o=e.target.value;this.apiService.getall("ServiceUnitMap/getServiceUnitMapByServiceAndUnitCode?UnitCode="+o+"&ServiceCode="+this.serviceCode).subscribe(n=>{this.pricePerUnit=n.pricePerUnit,this.unitCode=o})}else this.serviceQuantity=0,this.unitQuantity=0,this.pricePerUnit=0,this.estimatedPrice=0}calculateEstimatePrice(e,o){if(null!==e){let n=e.target.value;this.estimatedPrice="serviceQuantity"==o?this.pricePerUnit*this.unitQuantity*n:"pricePerUnit"==o?n*this.serviceQuantity*this.unitQuantity:"unitQuantity"==o?n*this.serviceQuantity*this.pricePerUnit:0}else this.estimatedPrice=this.pricePerUnit*this.serviceQuantity*this.unitQuantity}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-existing-project"]],features:[t.qOj],decls:255,vars:241,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"col-sm-3"],[1,"mr-sm-2"],["formControlName","stusEnquiryHead",1,"custom-select","mr-sm-2"],["value","Open"],["value","Closed"],["value","InProgress"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","enquiryNumber","readonly","",1,"form-control",3,"placeholder"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","dateOfEnquiry",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["data-date-format","mm/yyyy"],["picker",""],["formControlName","estimateClosingDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],["picker2",""],["type","text","readonly","","formControlName","custAddress",1,"form-control",3,"placeholder"],["type","text","formControlName","saleRep","readonly","readonly",1,"form-control",3,"placeholder"],["type","text","formControlName","userName",1,"form-control",3,"placeholder"],["formControlName","branchCode",1,"custom-select","mr-sm-2"],["value",""],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2","custom-select180",3,"ngModel","ngModelOptions","ngModelChange"],[1,"custom-select","mr-sm-2","custom-select120",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","number",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],["type","number","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-right"],[1,"tableicons",3,"click"],[1,"fas","fa-plus-circle"],["colspan","12"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","6","rowspan","5",1,"text-right","bgcolor"],[1,"text-right","bgcolor"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[1,"fas","fa-minus-circle"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t.TgZ(12,"label",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"select",9),t.TgZ(16,"option",10),t._uU(17),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"option",10),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"option",11),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",13),t.TgZ(30,"div",5),t.TgZ(31,"div",14),t.TgZ(32,"div",15),t.TgZ(33,"div",16),t.TgZ(34,"div",17),t.TgZ(35,"label",8),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",18),t.ALo(39,"translate"),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.TgZ(41,"div",16),t.TgZ(42,"label",8),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"div",17),t.TgZ(46,"div",19),t._UZ(47,"auto-loader",20),t._UZ(48,"input",21),t.ALo(49,"translate"),t.ALo(50,"translate"),t.TgZ(51,"mat-autocomplete",22,23),t.NdJ("optionSelected",function(s){return o.onSelectionCustomerCode(s,1)}),t.YNc(53,dr,2,2,"mat-option",24),t.ALo(54,"async"),t.qZA(),t.qZA(),t._UZ(55,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(56,"div",16),t.TgZ(57,"label",8),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"div",17),t.TgZ(61,"div",19),t._UZ(62,"input",26),t.ALo(63,"translate"),t.TgZ(64,"div",27),t._UZ(65,"mat-datepicker-toggle",28),t._UZ(66,"mat-datepicker",29,30),t.qZA(),t.qZA(),t.qZA(),t._UZ(68,"validation-message",25),t.qZA(),t.TgZ(69,"div",16),t.TgZ(70,"label",8),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"div",17),t.TgZ(74,"div",19),t._UZ(75,"input",31),t.ALo(76,"translate"),t.TgZ(77,"div",27),t._UZ(78,"mat-datepicker-toggle",28),t._UZ(79,"mat-datepicker",29,32),t.qZA(),t.qZA(),t.qZA(),t._UZ(81,"validation-message",25),t.qZA(),t.TgZ(82,"div",16),t.TgZ(83,"div",17),t.TgZ(84,"label",8),t._uU(85),t.ALo(86,"translate"),t.qZA(),t._UZ(87,"input",33),t.ALo(88,"translate"),t._UZ(89,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(90,"div",16),t.TgZ(91,"div",17),t.TgZ(92,"label",8),t._uU(93),t.ALo(94,"translate"),t.qZA(),t._UZ(95,"input",34),t.ALo(96,"translate"),t.ALo(97,"translate"),t.qZA(),t.qZA(),t.TgZ(98,"div",16),t.TgZ(99,"div",17),t.TgZ(100,"label",8),t._uU(101),t.ALo(102,"translate"),t.qZA(),t._UZ(103,"input",35),t.ALo(104,"translate"),t.ALo(105,"translate"),t.qZA(),t.qZA(),t.TgZ(106,"div",16),t.TgZ(107,"div",17),t.TgZ(108,"label"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t._UZ(111,"br"),t.TgZ(112,"select",36),t.TgZ(113,"option",37),t._uU(114),t.ALo(115,"translate"),t.ALo(116,"translate"),t.qZA(),t.YNc(117,_r,2,3,"option",24),t.qZA(),t._UZ(118,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(119,"div",5),t.TgZ(120,"div",17),t.TgZ(121,"label",8),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"textarea",38),t.ALo(125,"translate"),t.ALo(126,"translate"),t._uU(127,"                    \n"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(128,"div",39),t.TgZ(129,"table",40),t.TgZ(130,"thead"),t.TgZ(131,"tr"),t.TgZ(132,"th"),t._uU(133),t.ALo(134,"translate"),t.qZA(),t.TgZ(135,"th"),t._uU(136),t.ALo(137,"translate"),t.qZA(),t.TgZ(138,"th"),t._uU(139),t.ALo(140,"translate"),t.qZA(),t.TgZ(141,"th"),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"th"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t.TgZ(147,"th"),t._uU(148),t.ALo(149,"translate"),t.qZA(),t.TgZ(150,"th"),t._uU(151),t.ALo(152,"translate"),t.qZA(),t.TgZ(153,"th"),t._uU(154),t.ALo(155,"translate"),t.qZA(),t.TgZ(156,"th"),t._uU(157),t.ALo(158,"translate"),t.qZA(),t._UZ(159,"th"),t.qZA(),t.qZA(),t.TgZ(160,"tbody"),t.TgZ(161,"tr"),t.TgZ(162,"td"),t.TgZ(163,"select",41),t.NdJ("ngModelChange",function(s){return o.siteCode=s}),t.TgZ(164,"option",37),t._uU(165),t.ALo(166,"translate"),t.ALo(167,"translate"),t.qZA(),t.YNc(168,mr,2,2,"option",24),t.qZA(),t.qZA(),t.TgZ(169,"td"),t.TgZ(170,"select",42),t.NdJ("ngModelChange",function(s){return o.serviceCode=s})("change",function(s){return o.getServiceDetails(s)}),t.TgZ(171,"option",37),t._uU(172),t.ALo(173,"translate"),t.ALo(174,"translate"),t.qZA(),t.YNc(175,gr,2,2,"option",24),t.qZA(),t.qZA(),t.TgZ(176,"td"),t.TgZ(177,"input",43),t.NdJ("ngModelChange",function(s){return o.serviceNameEng=s}),t.ALo(178,"translate"),t.qZA(),t.qZA(),t.TgZ(179,"td"),t.TgZ(180,"input",43),t.NdJ("ngModelChange",function(s){return o.serviceNameArb=s}),t.ALo(181,"translate"),t.qZA(),t.qZA(),t.TgZ(182,"td"),t.TgZ(183,"select",44),t.NdJ("ngModelChange",function(s){return o.unitCode=s})("change",function(s){return o.getServiceUnitPrice(s)}),t.TgZ(184,"option",37),t._uU(185),t.ALo(186,"translate"),t.ALo(187,"translate"),t.qZA(),t.YNc(188,hr,2,2,"option",24),t.qZA(),t.qZA(),t.TgZ(189,"td"),t.TgZ(190,"input",45),t.NdJ("ngModelChange",function(s){return o.pricePerUnit=s})("keyup",function(s){return o.calculateEstimatePrice(s,"pricePerUnit")}),t.ALo(191,"translate"),t.qZA(),t.qZA(),t.TgZ(192,"td"),t.TgZ(193,"input",45),t.NdJ("ngModelChange",function(s){return o.serviceQuantity=s})("keyup",function(s){return o.calculateEstimatePrice(s,"serviceQuantity")}),t.ALo(194,"translate"),t.qZA(),t.qZA(),t.TgZ(195,"td"),t.TgZ(196,"input",45),t.NdJ("ngModelChange",function(s){return o.unitQuantity=s})("keyup",function(s){return o.calculateEstimatePrice(s,"unitQuantity")}),t.ALo(197,"translate"),t.qZA(),t.qZA(),t.TgZ(198,"td"),t.TgZ(199,"input",46),t.NdJ("ngModelChange",function(s){return o.estimatedPrice=s}),t.ALo(200,"translate"),t.qZA(),t.qZA(),t.TgZ(201,"td",47),t.TgZ(202,"a",48),t.NdJ("click",function(){return o.addEnquiry()}),t._UZ(203,"i",49),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(204,"tr"),t._UZ(205,"td",50),t.qZA(),t.TgZ(206,"thead"),t.TgZ(207,"tr"),t.TgZ(208,"th"),t._uU(209),t.ALo(210,"translate"),t.qZA(),t.TgZ(211,"th"),t._uU(212),t.ALo(213,"translate"),t.qZA(),t.TgZ(214,"th"),t._uU(215),t.ALo(216,"translate"),t.qZA(),t.TgZ(217,"th"),t._uU(218),t.ALo(219,"translate"),t.qZA(),t.TgZ(220,"th"),t._uU(221),t.ALo(222,"translate"),t.qZA(),t.TgZ(223,"th"),t._uU(224),t.ALo(225,"translate"),t.qZA(),t.TgZ(226,"th"),t._uU(227),t.ALo(228,"translate"),t.qZA(),t.TgZ(229,"th"),t._uU(230),t.ALo(231,"translate"),t.qZA(),t.TgZ(232,"th"),t._uU(233),t.ALo(234,"translate"),t.qZA(),t._UZ(235,"th"),t.qZA(),t.qZA(),t.TgZ(236,"tbody"),t.YNc(237,Zr,22,9,"tr",51),t.qZA(),t.TgZ(238,"tfoot"),t.TgZ(239,"tr",52),t._UZ(240,"td",53),t.TgZ(241,"td",54),t._uU(242),t.ALo(243,"translate"),t.qZA(),t.TgZ(244,"td",54),t._uU(245),t.qZA(),t._UZ(246,"td",54),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(247,"div",55),t.TgZ(248,"div",13),t.TgZ(249,"div",56),t.TgZ(250,"input",57),t.NdJ("click",function(){return o.closeModel()}),t.ALo(251,"translate"),t.qZA(),t._uU(252," \xa0 "),t._UZ(253,"input",58),t.ALo(254,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(52),s=t.MAs(67),r=t.MAs(80);t.xp6(1),t.hij(" ",t.lcZ(2,102,"Create_New_Service_Enquiry_For_Existing_Project")," "),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(8),t.Oqu(t.lcZ(14,104,"Enquiry_Status")),t.xp6(4),t.AsE("",t.lcZ(18,106,"Select ")," ",t.lcZ(19,108,"Enquiry_Status"),""),t.xp6(4),t.hij("",t.lcZ(22,110,"Open")," "),t.xp6(3),t.hij("",t.lcZ(25,112,"Closed")," "),t.xp6(3),t.hij("",t.lcZ(28,114,"InProgress")," "),t.xp6(9),t.Oqu(t.lcZ(37,116,"Enquiry_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(39,118,"Please_Enter")," ",t.lcZ(40,120,"Enquiry_Number"),""),t.xp6(5),t.Oqu(t.lcZ(44,122,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(49,124,"Please_Enter")," ",t.lcZ(50,126,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(54,128,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(3),t.Oqu(t.lcZ(59,130,"Project_Start_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(63,132,"Select_a_Date")),t.Q6J("matDatepicker",s),t.xp6(3),t.Q6J("for",s),t.xp6(3),t.Q6J("control",o.form.controls.dateOfEnquiry),t.xp6(3),t.Oqu(t.lcZ(72,134,"Project_Closing_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(76,136,"Estimate_Closing_Date")),t.Q6J("matDatepicker",r),t.xp6(3),t.Q6J("for",r),t.xp6(3),t.Q6J("control",o.form.controls.estimateClosingDate),t.xp6(4),t.Oqu(t.lcZ(86,138,"Customer_Address")),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(88,140,"Customer_Address"),""),t.xp6(2),t.Q6J("control",o.form.controls.custAddress),t.xp6(4),t.Oqu(t.lcZ(94,142,"Sales_Representative")),t.xp6(2),t.hYB("placeholder","",t.lcZ(96,144,"Please_Enter")," ",t.lcZ(97,146,"Sales_Representative"),""),t.xp6(6),t.Oqu(t.lcZ(102,148,"Enquiry_Created_By")),t.xp6(2),t.hYB("placeholder","",t.lcZ(104,150,"Please_Enter")," ",t.lcZ(105,152,"Enquiry_Created_By"),""),t.xp6(6),t.Oqu(t.lcZ(110,154,"Branch")),t.xp6(5),t.AsE("",t.lcZ(115,156,"Select")," ",t.lcZ(116,158,"Branch")," "),t.xp6(3),t.Q6J("ngForOf",o.branchCodeList),t.xp6(1),t.Q6J("control",o.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(123,160,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(125,162,"Please_Select")," ",t.lcZ(126,164,"Remarks"),""),t.xp6(9),t.Oqu(t.lcZ(134,166,"Site")),t.xp6(3),t.Oqu(t.lcZ(137,168,"Service_Code")),t.xp6(3),t.Oqu(t.lcZ(140,170,"Service_Name_Eng")),t.xp6(3),t.Oqu(t.lcZ(143,172,"Service_Name_Arb")),t.xp6(3),t.Oqu(t.lcZ(146,174,"Service_Unit")),t.xp6(3),t.Oqu(t.lcZ(149,176,"Price_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(152,178,"Service_Quantity")),t.xp6(3),t.Oqu(t.lcZ(155,180,"Unit_Quantity")),t.xp6(3),t.Oqu(t.lcZ(158,182,"Estimated_Price")),t.xp6(6),t.Q6J("ngModel",o.siteCode)("ngModelOptions",t.DdM(232,Yt)),t.xp6(2),t.AsE("",t.lcZ(166,184,"Select")," ",t.lcZ(167,186,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(2),t.Q6J("ngModel",o.serviceCode)("ngModelOptions",t.DdM(233,Yt)),t.xp6(2),t.AsE("",t.lcZ(173,188,"Select")," ",t.lcZ(174,190,"Service_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.serviceCodeList),t.xp6(2),t.s9C("placeholder",t.lcZ(178,192,"Service_Name_Eng")),t.Q6J("ngModel",o.serviceNameEng)("ngModelOptions",t.DdM(234,Yt)),t.xp6(3),t.s9C("placeholder",t.lcZ(181,194,"Service_Name_Arb")),t.Q6J("ngModel",o.serviceNameArb)("ngModelOptions",t.DdM(235,Yt)),t.xp6(3),t.Q6J("ngModel",o.unitCode)("ngModelOptions",t.DdM(236,Yt)),t.xp6(2),t.AsE("",t.lcZ(186,196,"Select")," ",t.lcZ(187,198,"Service_Unit")," "),t.xp6(3),t.Q6J("ngForOf",o.unitCodeList),t.xp6(2),t.s9C("placeholder",t.lcZ(191,200,"Price_Per_Unit")),t.Q6J("ngModel",o.pricePerUnit)("ngModelOptions",t.DdM(237,Yt)),t.xp6(3),t.s9C("placeholder",t.lcZ(194,202,"Service_Quantity")),t.Q6J("ngModel",o.serviceQuantity)("ngModelOptions",t.DdM(238,Yt)),t.xp6(3),t.s9C("placeholder",t.lcZ(197,204,"Unit_Quantity")),t.Q6J("ngModel",o.unitQuantity)("ngModelOptions",t.DdM(239,Yt)),t.xp6(3),t.s9C("placeholder",t.lcZ(200,206,"Estimated_Price")),t.Q6J("ngModel",o.estimatedPrice)("ngModelOptions",t.DdM(240,Yt)),t.xp6(10),t.Oqu(t.lcZ(210,208,"Site")),t.xp6(3),t.Oqu(t.lcZ(213,210,"Service_Code")),t.xp6(3),t.Oqu(t.lcZ(216,212,"Service_Name_Eng")),t.xp6(3),t.Oqu(t.lcZ(219,214,"Service_Name_Arb")),t.xp6(3),t.Oqu(t.lcZ(222,216,"Service_Unit")),t.xp6(3),t.Oqu(t.lcZ(225,218,"Price_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(228,220,"Service_Quantity")),t.xp6(3),t.Oqu(t.lcZ(231,222,"Unit_Quantity")),t.xp6(3),t.Oqu(t.lcZ(234,224,"Estimated_Price")),t.xp6(4),t.Q6J("ngForOf",o.listOfEnquiries),t.xp6(5),t.hij("",t.lcZ(243,226,"Total_Amount"),"-$"),t.xp6(3),t.Oqu(o.totalEstPrice),t.xp6(5),t.s9C("value",t.lcZ(251,228,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(254,230,"Save"))}},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,l.YN,l.Kr,l.Fj,At.z,lt.ZL,l.oH,lt.XC,Z.sg,V.s,j.hl,j.nW,ft.R9,j.Mq,l.On,l.wV,Ut.ey],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function fr(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function Ar(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Cr(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Tr(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function vr(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name_English")," "))}function xr(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectNameEng)}}function qr(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name_Arab")," "))}function br(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectNameArb)}}function yr(i,a){1&i&&t._UZ(0,"tr",35)}function Sr(i,a){1&i&&t._UZ(0,"tr",36)}const wr=function(){return{standalone:!0}};let Ur=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=_,this.pageService=h,this.translate=A,this.displayedColumns=["customerCode","projectCode","projectNameEng","projectNameArb"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.form=this.fb.group({}),this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.searchValue="",this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Project/getProjectsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}submit(){}create(){this.openFullWindow(0,g.Oi.create,"Adding_New_Service_Enquiry_Form_For_Existing_Project","Add",ze)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(W),t.Y36(B.N),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-existing-projects"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:55,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[3,"isLoading"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addEnquiries","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","projectNameEng"],["matColumnDef","projectNameArb"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",1),t.TgZ(21,"div",10),t.TgZ(22,"h4",13),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"spinner-loader",14),t.qZA(),t.TgZ(26,"div",15),t.TgZ(27,"input",16),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.TgZ(36,"div",22),t.ynx(37),t.TgZ(38,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(39,24),t.YNc(40,fr,3,3,"th",25),t.YNc(41,Ar,2,1,"td",26),t.BQk(),t.ynx(42,27),t.YNc(43,Cr,3,3,"th",25),t.YNc(44,Tr,2,1,"td",26),t.BQk(),t.ynx(45,28),t.YNc(46,vr,3,3,"th",25),t.YNc(47,xr,2,1,"td",26),t.BQk(),t.ynx(48,29),t.YNc(49,qr,3,3,"th",25),t.YNc(50,br,2,1,"td",26),t.BQk(),t.YNc(51,yr,1,0,"tr",30),t.YNc(52,Sr,1,0,"tr",31),t.qZA(),t.ynx(53),t.TgZ(54,"mat-paginator",32),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Existing_Projects")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,20,"Existing_Projects")),t.xp6(10),t.hij("",t.lcZ(24,22,"Project_List")," "),t.xp6(2),t.Q6J("isLoading",o.isLoading),t.xp6(2),t.MGl("placeholder","",t.lcZ(28,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,wr)),t.xp6(5),t.hij("",t.lcZ(33,26,"Add_New_Services_Enquiry")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[Zt.r,l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();class xe{static isCodeExist(a,e){return o=>{let n=o.get(a),s=o.get(e);return""==n.value?(n.setErrors({required:!0}),{required:!0}):s.value?(n.setErrors({isExist:!0}),{isExist:!0}):null}}}function Dr(i,a){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Lr(i,a){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Code Already Exists")," "))}function Nr(i,a){if(1&i&&(t.TgZ(0,"div",28),t.YNc(1,Dr,3,3,"div",29),t.YNc(2,Lr,3,3,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.vehicleNumber.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.vehicleNumber.errors.isExist)}}const Er=function(i){return{"is-invalid":i}};let Or=(()=>{class i extends y{constructor(e,o,n,s,r,c){super(o),this.dialogRef=e,this.authService=o,this.fb=n,this.apiService=s,this.utilService=r,this.opservice=c,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({vehicleNumber:["",l.kI.required],vehicleNameInEnglish:["",l.kI.required],vehicleNameInArabic:["",l.kI.required],dailyFuelCost:["",l.kI.required],dailyMiscCost:["",l.kI.required],estimatedDailyMaintenanceCost:["",l.kI.required],otherDailyOperationCost:["",l.kI.required],totalDailyServiceCost:[0],dailyServicePrice:["",l.kI.required],valueofVehicle:["",l.kI.required],vehicletype:["",l.kI.required],minMargin:["",l.kI.required],isActive:[!0,l.kI.required],remarks:[""],isExist:[!1]},{validators:[xe.isCodeExist("vehicleNumber","isExist")]})}closeModel(){this.dialogRef.close()}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Logisticsandvehicle",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Logisticsandvehicle/getLogisticsandvehicleById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}reset(){this.form.reset()}verifyCode(e){let o=e.target.value.toUpperCase();""!=o&&this.opservice.verifyCode("Logisticsandvehicle/isExistCode/"+o).subscribe(n=>{this.form.controls.isExist.setValue(n),this.form.controls.vehicleNumber.setValue(o)})}get f(){return this.form.controls}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(v._),t.Y36(l.qu),t.Y36(q.s),t.Y36(b.t),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-updatelogisticsandvehicle"]],features:[t.qOj],decls:143,vars:145,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","vehicleNumber",1,"form-control",3,"ngClass","placeholder","readonly","keyup"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","vehicleNameInEnglish",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","vehicleNameInArabic",1,"form-control",3,"placeholder"],["type","number","formControlName","dailyFuelCost",1,"form-control",3,"placeholder"],["type","number","formControlName","dailyMiscCost",1,"form-control",3,"placeholder"],["type","number","formControlName","estimatedDailyMaintenanceCost",1,"form-control",3,"placeholder"],["type","number","formControlName","otherDailyOperationCost",1,"form-control",3,"placeholder"],["type","number","readonly","","formControlName","totalDailyServiceCost",1,"form-control",3,"placeholder"],["type","number","formControlName","dailyServicePrice",1,"form-control",3,"placeholder"],["type","text","formControlName","valueofVehicle",1,"form-control",3,"placeholder"],["formControlName","vehicletype",1,"form-control"],["value",""],["type","number","formControlName","minMargin",1,"form-control",3,"placeholder"],["color","primary","formControlName","isActive"],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," \xd7 "),t.qZA(),t.qZA(),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",7),t.NdJ("keyup",function(s){return o.verifyCode(s)}),t.ALo(14,"translate"),t.ALo(15,"translate"),t.qZA(),t.YNc(16,Nr,3,2,"div",8),t.qZA(),t.qZA(),t.TgZ(17,"div",5),t.TgZ(18,"div",6),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",9),t.ALo(23,"translate"),t.ALo(24,"translate"),t._UZ(25,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(26,"div",5),t.TgZ(27,"div",6),t.TgZ(28,"label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",11),t.ALo(32,"translate"),t.ALo(33,"translate"),t._UZ(34,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(35,"div",5),t.TgZ(36,"div",6),t.TgZ(37,"label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",12),t.ALo(41,"translate"),t.ALo(42,"translate"),t._UZ(43,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(44,"div",5),t.TgZ(45,"div",6),t.TgZ(46,"label"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"input",13),t.ALo(50,"translate"),t.ALo(51,"translate"),t._UZ(52,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(53,"div",5),t.TgZ(54,"div",6),t.TgZ(55,"label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t._UZ(58,"input",14),t.ALo(59,"translate"),t.ALo(60,"translate"),t._UZ(61,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(62,"div",5),t.TgZ(63,"div",6),t.TgZ(64,"label"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t._UZ(67,"input",15),t.ALo(68,"translate"),t.ALo(69,"translate"),t._UZ(70,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(71,"div",5),t.TgZ(72,"div",6),t.TgZ(73,"label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._UZ(76,"input",16),t.ALo(77,"translate"),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.TgZ(79,"div",5),t.TgZ(80,"div",6),t.TgZ(81,"label"),t._uU(82),t.ALo(83,"translate"),t.qZA(),t._UZ(84,"input",17),t.ALo(85,"translate"),t.ALo(86,"translate"),t._UZ(87,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(88,"div",5),t.TgZ(89,"div",6),t.TgZ(90,"label"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t._UZ(93,"input",18),t.ALo(94,"translate"),t.ALo(95,"translate"),t._UZ(96,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(97,"div",5),t.TgZ(98,"div",6),t.TgZ(99,"label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.TgZ(102,"select",19),t.TgZ(103,"option",20),t._uU(104),t.ALo(105,"translate"),t.ALo(106,"translate"),t.qZA(),t.TgZ(107,"option"),t._uU(108,"Passenger"),t.qZA(),t.TgZ(109,"option"),t._uU(110,"Goods"),t.qZA(),t.qZA(),t._UZ(111,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(112,"div",5),t.TgZ(113,"div",6),t.TgZ(114,"label"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t._UZ(117,"input",21),t.ALo(118,"translate"),t.ALo(119,"translate"),t._UZ(120,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(121,"div",5),t.TgZ(122,"div",6),t.TgZ(123,"label"),t._uU(124),t.ALo(125,"translate"),t.qZA(),t._UZ(126,"br"),t._UZ(127,"mat-slide-toggle",22),t.qZA(),t.qZA(),t.TgZ(128,"div",5),t.TgZ(129,"div",6),t.TgZ(130,"label"),t._uU(131),t.ALo(132,"translate"),t.qZA(),t._UZ(133,"textarea",23),t.ALo(134,"translate"),t.ALo(135,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(136,"div",24),t.TgZ(137,"div",25),t.TgZ(138,"input",26),t.NdJ("click",function(){return o.closeModel()}),t.ALo(139,"translate"),t.qZA(),t._uU(140," \xa0 "),t._UZ(141,"input",27),t.ALo(142,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij("",t.lcZ(3,57,"Add_Logistics_and_Vehicle")," "),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(12,59,"Vehicle_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(14,61,"Please_Enter")," ",t.lcZ(15,63,"Vehicle_Number"),""),t.s9C("readonly",o.readonly),t.Q6J("ngClass",t.VKq(143,Er,o.f.vehicleNumber.errors&&o.f.vehicleNumber.touched)),t.xp6(3),t.Q6J("ngIf",o.f.vehicleNumber.errors),t.xp6(4),t.Oqu(t.lcZ(21,65,"Vehicle_Name_In_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(23,67,"Please_Enter")," ",t.lcZ(24,69,"Name_In_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.vehicleNameInEnglish),t.xp6(4),t.Oqu(t.lcZ(30,71,"Vehicle_Name_In_Arabic")),t.xp6(2),t.hYB("placeholder","",t.lcZ(32,73,"Please_Enter")," ",t.lcZ(33,75,"Name_In_Arabic"),""),t.xp6(3),t.Q6J("control",o.form.controls.vehicleNameInArabic),t.xp6(4),t.Oqu(t.lcZ(39,77,"Daily_Fuel_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(41,79,"Please_Enter")," ",t.lcZ(42,81,"Daily_Fuel_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.dailyFuelCost),t.xp6(4),t.Oqu(t.lcZ(48,83,"Daily_Misc_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(50,85,"Please_Enter")," ",t.lcZ(51,87,"Daily_Misc_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.dailyMiscCost),t.xp6(4),t.Oqu(t.lcZ(57,89,"Estimated_Daily_Maintenance_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(59,91,"Please_Enter")," ",t.lcZ(60,93,"Estimated_Daily_Maintenance_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.estimatedDailyMaintenanceCost),t.xp6(4),t.Oqu(t.lcZ(66,95,"Other_Daily_Operation_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(68,97,"Please_Enter")," ",t.lcZ(69,99,"Other_Daily_Operation_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.otherDailyOperationCost),t.xp6(4),t.Oqu(t.lcZ(75,101,"Total_Daily_Service_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(77,103,"Please_Enter")," ",t.lcZ(78,105,"Total_Daily_Service_Cost"),""),t.xp6(6),t.Oqu(t.lcZ(83,107,"Daily_Service_Price")),t.xp6(2),t.hYB("placeholder","",t.lcZ(85,109,"Please_Enter")," ",t.lcZ(86,111,"Daily_Service_Price"),""),t.xp6(3),t.Q6J("control",o.form.controls.dailyServicePrice),t.xp6(4),t.Oqu(t.lcZ(92,113,"Value_of_Vehicle")),t.xp6(2),t.hYB("placeholder","",t.lcZ(94,115,"Please_Enter")," ",t.lcZ(95,117,"Value_of_Vehicle"),""),t.xp6(3),t.Q6J("control",o.form.controls.valueofVehicle),t.xp6(4),t.Oqu(t.lcZ(101,119,"Vehicle_type")),t.xp6(4),t.AsE("",t.lcZ(105,121,"Select")," ",t.lcZ(106,123,"Vehicle_type")," "),t.xp6(7),t.Q6J("control",o.form.controls.vehicletype),t.xp6(4),t.Oqu(t.lcZ(116,125,"Min_Margin")),t.xp6(2),t.hYB("placeholder","",t.lcZ(118,127,"Please_Enter")," ",t.lcZ(119,129,"Min_Margin_Required"),""),t.xp6(3),t.Q6J("control",o.form.controls.minMargin),t.xp6(4),t.Oqu(t.lcZ(125,131,"Is_Active")),t.xp6(7),t.Oqu(t.lcZ(132,133,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(134,135,"Please_Enter")," ",t.lcZ(135,137,"Remarks"),""),t.xp6(5),t.s9C("value",t.lcZ(139,139,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(142,141,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,Z.mk,Z.O5,V.s,l.wV,l.EJ,l.YN,l.Kr,jt.Rr],pipes:[f.X$],encapsulation:2}),i})();function kr(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vehicle_Number")," "))}function jr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.vehicleNumber)}}function Mr(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vehicle_Name_In_English")," "))}function Rr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.vehicleNameInEnglish)}}function Pr(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vehicle_Name_In_Arabic")," "))}function Fr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.vehicleNameInArabic)}}function Ir(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Cost")," "))}function Yr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.totalDailyServiceCost)}}function Jr(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function Qr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.isActive)}}function Br(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Hr(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"a",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",39),t.qZA(),t.qZA()}}function $r(i,a){1&i&&t._UZ(0,"tr",40)}function Vr(i,a){1&i&&t._UZ(0,"tr",41)}const Gr=function(){return{standalone:!0}};let Wr=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.notifyService=p,this.validationService=u,this.pageService=d,this.dialog=_,this.displayedColumns=["vehicleNumber","vehicleNameInEnglish","vehicleNameInArabic","totalDailyServiceCost","isActive","Actions"],this.searchValue="",this.isLoading=!1,this.sortingOrder="id desc"}ngOnInit(){this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Logisticsandvehicle/getLogisticsandvehiclesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,Or);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}setForm(){this.form=this.fb.group({})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Logisticandvehicle","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Logisticandvehicle","Update")}refresh(){this.searchValue="",this.initialLoading()}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Logisticsandvehicle",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(w.g),t.Y36(E.R),t.Y36(B.N),t.Y36(T.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-logisticsandvehicle"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addLogisticsandvehicle","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","vehicleNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","vehicleNameInEnglish"],["matColumnDef","vehicleNameInArabic"],["matColumnDef","totalDailyServiceCost"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,kr,3,3,"th",24),t.YNc(43,jr,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,Mr,3,3,"th",24),t.YNc(46,Rr,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,Pr,3,3,"th",24),t.YNc(49,Fr,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,Ir,3,3,"th",24),t.YNc(52,Yr,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,Jr,3,3,"th",24),t.YNc(55,Qr,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,Br,3,3,"th",31),t.YNc(58,Hr,3,0,"td",25),t.BQk(),t.YNc(59,$r,1,0,"tr",32),t.YNc(60,Vr,1,0,"tr",33),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Logistics_and_Vehicle")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Logistics_and_Vehicle")),t.xp6(10),t.hij("",t.lcZ(27,24,"Logistics_and_Vehicle_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,Gr)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Logistics_and_Vehicle")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})(),zr=(()=>{class i extends y{constructor(e,o,n,s,r,c){super(o),this.dialogRef=e,this.authService=o,this.fb=n,this.apiService=s,this.utilService=r,this.opservice=c,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({isExist:[!1],code:["MEXXXXXX",l.kI.required],category:["",l.kI.required],nameInEnglish:["",l.kI.required],nameInArabic:["",l.kI.required],type:["",l.kI.required],estimatedCostValue:["",l.kI.required],isDepreciationApplicable:[!1,l.kI.required],minimumCostPerUsage:["",l.kI.required],depreciationPerYear:["",l.kI.required],usageLifetermsYear:["",l.kI.required],isActive:[!0,l.kI.required],remarks:[""]},{validators:[xe.isCodeExist("code","isExist")]})}closeModel(){this.dialogRef.close()}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Materialequipment",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Materialequipment/getMaterialequipmentById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}reset(){this.form.controls.code.setValue(""),this.form.controls.category.setValue(""),this.form.controls.nameInEnglish.setValue(""),this.form.controls.nameInArabic.setValue(""),this.form.controls.type.setValue(""),this.form.controls.estimatedCostValue.setValue(""),this.form.controls.isDepreciationApplicable.setValue(!1),this.form.controls.minimumCostPerUsage.setValue(""),this.form.controls.depreciationPerYear.setValue(""),this.form.controls.usageLifetermsYear.setValue(""),this.form.controls.isActive.setValue(!0),this.form.controls.remarks.setValue("")}verifyCode(e){let o=e.target.value.toUpperCase();""!=o&&this.opservice.verifyCode("Materialequipment/isExistCode/"+o).subscribe(n=>{this.form.controls.isExist.setValue(n),this.form.controls.code.setValue(o)})}get f(){return this.form.controls}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(v._),t.Y36(l.qu),t.Y36(q.s),t.Y36(b.t),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-materialequipment"]],features:[t.qOj],decls:128,vars:114,consts:[[1,"modal-title"],["type","button","data-dismiss","modal","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","code","readonly","",1,"form-control",3,"placeholder"],["formControlName","category",1,"form-control"],["value",""],[3,"control"],["type","text","formControlName","nameInEnglish",1,"form-control",3,"placeholder"],["type","text","formControlName","nameInArabic",1,"form-control",3,"placeholder"],["formControlName","type",1,"form-control"],["type","number","formControlName","estimatedCostValue",1,"form-control",3,"placeholder"],["color","primary","formControlName","isDepreciationApplicable"],["type","number","formControlName","minimumCostPerUsage",1,"form-control",3,"placeholder"],["type","number","formControlName","depreciationPerYear",1,"form-control",3,"placeholder"],["type","number","formControlName","usageLifetermsYear",1,"form-control",3,"placeholder"],["color","primary","formControlName","isActive"],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7 "),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"div",5),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"select",7),t.TgZ(21,"option",8),t._uU(22),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"option"),t._uU(26,"Equipment"),t.qZA(),t.TgZ(27,"option"),t._uU(28,"Inventory"),t.qZA(),t.qZA(),t._UZ(29,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(30,"div",4),t.TgZ(31,"div",5),t.TgZ(32,"label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",10),t.ALo(36,"translate"),t.ALo(37,"translate"),t._UZ(38,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(39,"div",4),t.TgZ(40,"div",5),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",11),t.ALo(45,"translate"),t.ALo(46,"translate"),t._UZ(47,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(48,"div",4),t.TgZ(49,"div",5),t.TgZ(50,"label"),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"select",12),t.TgZ(54,"option",8),t._uU(55),t.ALo(56,"translate"),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"option"),t._uU(59,"Asset"),t.qZA(),t.TgZ(60,"option"),t._uU(61,"Consumable"),t.qZA(),t.qZA(),t._UZ(62,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(63,"div",4),t.TgZ(64,"div",5),t.TgZ(65,"label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t._UZ(68,"input",13),t.ALo(69,"translate"),t.ALo(70,"translate"),t._UZ(71,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(72,"div",4),t.TgZ(73,"div",5),t.TgZ(74,"label"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t._UZ(77,"br"),t._UZ(78,"mat-slide-toggle",14),t.qZA(),t.qZA(),t.TgZ(79,"div",4),t.TgZ(80,"div",5),t.TgZ(81,"label"),t._uU(82),t.ALo(83,"translate"),t.qZA(),t._UZ(84,"input",15),t.ALo(85,"translate"),t.ALo(86,"translate"),t._UZ(87,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(88,"div",4),t.TgZ(89,"div",5),t.TgZ(90,"label"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t._UZ(93,"input",16),t.ALo(94,"translate"),t.ALo(95,"translate"),t._UZ(96,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(97,"div",4),t.TgZ(98,"div",5),t.TgZ(99,"label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"input",17),t.ALo(103,"translate"),t.ALo(104,"translate"),t._UZ(105,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(106,"div",4),t.TgZ(107,"div",5),t.TgZ(108,"label"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t._UZ(111,"br"),t._UZ(112,"mat-slide-toggle",18),t.qZA(),t.qZA(),t.TgZ(113,"div",4),t.TgZ(114,"div",5),t.TgZ(115,"label"),t._uU(116),t.ALo(117,"translate"),t.qZA(),t._UZ(118,"textarea",19),t.ALo(119,"translate"),t.ALo(120,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(121,"div",20),t.TgZ(122,"div",21),t.TgZ(123,"input",22),t.NdJ("click",function(){return o.closeModel()}),t.ALo(124,"translate"),t.qZA(),t._uU(125," \xa0 "),t._UZ(126,"input",23),t.ALo(127,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,44,"Add_New_Material_Equipment_Master")," "),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,46,"Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,48,"Please_Enter")," ",t.lcZ(14,50,"Code"),""),t.xp6(6),t.Oqu(t.lcZ(19,52,"Category")),t.xp6(4),t.AsE("",t.lcZ(23,54,"Select")," ",t.lcZ(24,56,"Category")," "),t.xp6(7),t.Q6J("control",o.form.controls.category),t.xp6(4),t.Oqu(t.lcZ(34,58,"Name_In_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(36,60,"Please_Enter")," ",t.lcZ(37,62,"Name_In_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.nameInEnglish),t.xp6(4),t.Oqu(t.lcZ(43,64,"Name_In_Arabic")),t.xp6(2),t.hYB("placeholder","",t.lcZ(45,66,"Please_Enter")," ",t.lcZ(46,68,"Name_In_Arabic"),""),t.xp6(3),t.Q6J("control",o.form.controls.nameInArabic),t.xp6(4),t.Oqu(t.lcZ(52,70,"Type")),t.xp6(4),t.AsE("",t.lcZ(56,72,"Select")," ",t.lcZ(57,74,"Type")," "),t.xp6(7),t.Q6J("control",o.form.controls.type),t.xp6(4),t.Oqu(t.lcZ(67,76,"Estimated_Cost_Value")),t.xp6(2),t.hYB("placeholder","",t.lcZ(69,78,"Please_Enter")," ",t.lcZ(70,80,"Estimated_Cost_Value"),""),t.xp6(3),t.Q6J("control",o.form.controls.estimatedCostValue),t.xp6(4),t.Oqu(t.lcZ(76,82,"Is_Depreciation_Applicable")),t.xp6(7),t.Oqu(t.lcZ(83,84,"Minimum_Cost_Per_Usage")),t.xp6(2),t.hYB("placeholder","",t.lcZ(85,86,"Please_Enter")," ",t.lcZ(86,88,"Minimum_Cost_Per_Usage"),""),t.xp6(3),t.Q6J("control",o.form.controls.minimumCostPerUsage),t.xp6(4),t.Oqu(t.lcZ(92,90,"Depreciation_Per_Year")),t.xp6(2),t.hYB("placeholder","",t.lcZ(94,92,"Please_Enter")," ",t.lcZ(95,94,"Depreciation_Per_Year"),""),t.xp6(3),t.Q6J("control",o.form.controls.depreciationPerYear),t.xp6(4),t.Oqu(t.lcZ(101,96,"Usage_Life_terms_Year")),t.xp6(2),t.hYB("placeholder","",t.lcZ(103,98,"Please_Enter")," ",t.lcZ(104,100,"Usage_Life_terms_Year"),""),t.xp6(3),t.Q6J("control",o.form.controls.usageLifetermsYear),t.xp6(4),t.Oqu(t.lcZ(110,102,"Is_Active")),t.xp6(7),t.Oqu(t.lcZ(117,104,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(119,106,"Please_Enter")," ",t.lcZ(120,108,"Remarks"),""),t.xp6(5),t.s9C("value",t.lcZ(124,110,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(127,112,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,V.s,l.wV,jt.Rr],pipes:[f.X$],encapsulation:2}),i})();function Xr(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Code")," "))}function Kr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.code)}}function tl(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name_In_English")," "))}function el(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.nameInEnglish)}}function ol(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name_In_Arabic")," "))}function il(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.nameInArabic)}}function nl(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Category")," "))}function al(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.category)}}function sl(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Type")," "))}function rl(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.type)}}function ll(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function cl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"a",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",39),t.qZA(),t.qZA()}}function pl(i,a){1&i&&t._UZ(0,"tr",40)}function ul(i,a){1&i&&t._UZ(0,"tr",41)}const dl=function(){return{standalone:!0}};let _l=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.notifyService=p,this.validationService=u,this.pageService=d,this.dialog=_,this.displayedColumns=["code","nameInEnglish","nameInArabic","category","type","Actions"],this.searchValue="",this.isLoading=!1,this.sortingOrder="id desc"}ngOnInit(){this.initialLoading()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}setForm(){this.form=this.fb.group({})}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Materialequipment/getMaterialequipmentsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,zr);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Materialequipment","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Materialequipment","Update")}refresh(){this.searchValue="",this.initialLoading()}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Materialequipment",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(w.g),t.Y36(E.R),t.Y36(B.N),t.Y36(T.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-materialequipment"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addMaterialEquipment","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nameInEnglish"],["matColumnDef","nameInArabic"],["matColumnDef","category"],["matColumnDef","type"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,Xr,3,3,"th",24),t.YNc(43,Kr,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,tl,3,3,"th",24),t.YNc(46,el,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,ol,3,3,"th",24),t.YNc(49,il,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,nl,3,3,"th",24),t.YNc(52,al,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,sl,3,3,"th",24),t.YNc(55,rl,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,ll,3,3,"th",31),t.YNc(58,cl,3,0,"td",25),t.BQk(),t.YNc(59,pl,1,0,"tr",32),t.YNc(60,ul,1,0,"tr",33),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Material_Equipment_Master")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Material_Equipment_Master")),t.xp6(10),t.hij("",t.lcZ(27,24,"Material_Equipment_Master_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,dl)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Material_Equipment_Master")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function ml(i,a){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" ",e.value,"-",e.text," ")}}function gl(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(t.lcZ(2,2,e.value))}}function hl(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.index;t.xp6(1),t.Oqu(e+1)}}function Zl(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.dayText," ")}}function fl(i,a){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.employeeNumber),t.xp6(1),t.AsE(" ",e.employeeName,"-",e.employeeNumber," ")}}function Al(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Cl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"select",38),t.NdJ("change",function(n){const r=t.CHM(e).index;return t.oxw(2).onSelectShift(n,r)}),t.TgZ(2,"option",20),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,Al,2,2,"option",17),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("formControl",e),t.xp6(2),t.AsE("",t.lcZ(4,4,"Select")," ",t.lcZ(5,6,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.listOfShiftCodes)}}function Tl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",32),t.TgZ(1,"table",33),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t._UZ(4,"th"),t.YNc(5,hl,2,1,"th",34),t._UZ(6,"td"),t._UZ(7,"td"),t.qZA(),t.TgZ(8,"tr"),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,Zl,2,1,"th",34),t._UZ(13,"td"),t._UZ(14,"td"),t.qZA(),t.qZA(),t.TgZ(15,"tbody"),t.TgZ(16,"tr"),t.TgZ(17,"td"),t._UZ(18,"auto-loader",13),t._UZ(19,"input",35),t.ALo(20,"translate"),t.ALo(21,"translate"),t.TgZ(22,"mat-autocomplete",15,36),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().autoSelectionEmployeeNumber(n,"select")}),t.YNc(24,fl,2,3,"mat-option",17),t.ALo(25,"async"),t.qZA(),t.qZA(),t.YNc(26,Cl,7,8,"td",34),t.TgZ(27,"td"),t._uU(28),t.qZA(),t.TgZ(29,"td"),t.TgZ(30,"i",37),t.NdJ("click",function(){return t.CHM(e),t.oxw().addEntry()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(23),o=t.oxw();t.xp6(5),t.Q6J("ngForOf",o.listOfDays),t.xp6(5),t.hij(" ",t.lcZ(11,11,"Employee")," "),t.xp6(2),t.Q6J("ngForOf",o.listOfDays),t.xp6(6),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(20,13,"Please_Enter")," ",t.lcZ(21,15,"Employee"),""),t.Q6J("formControl",o.empCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(25,17,o.filteredEmployeeNumbers)),t.xp6(2),t.Q6J("ngForOf",o.shiftsFormControls.controls),t.xp6(2),t.Oqu(o.newTotalShifts)}}function vl(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.index;t.xp6(1),t.Oqu(e+1)}}function xl(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.dayText," ")}}function ql(i,a){if(1&i&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(),n=o.index,s=o.$implicit,r=t.oxw(2);t.s9C("matTooltip",r.getCellInfo(n,e)),t.xp6(1),t.hij(" ",s.s[e]," ")}}function bl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,ql,2,2,"td",40),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t.TgZ(7,"i",41),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).removeEntry(s)}),t.qZA(),t._uU(8," \xa0 "),t.TgZ(9,"i",42),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).editRoasterEntry(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",e.employeeNumber," "),t.xp6(1),t.Q6J("ngForOf",n.listOfDays),t.xp6(2),t.hij(" ",n.totalShiftsRow[o]," ")}}function yl(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.Oqu(o.totalShiftsCol[e])}}function Sl(i,a){if(1&i&&(t.TgZ(0,"div",39),t.TgZ(1,"table",33),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t._UZ(4,"th"),t.YNc(5,vl,2,1,"th",34),t._UZ(6,"td"),t._UZ(7,"td"),t.qZA(),t.TgZ(8,"tr"),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,xl,2,1,"th",34),t._UZ(13,"td"),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,bl,10,3,"tr",34),t.TgZ(16,"tr"),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.YNc(20,yl,2,1,"td",34),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.listOfDays),t.xp6(5),t.hij(" ",t.lcZ(11,7,"Employee")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(3),t.Q6J("ngForOf",e.listOfRoasters),t.xp6(3),t.Oqu(t.lcZ(19,9,"Total_Shifts")),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Oqu(e.grandTotalShifts)}}let wl=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfRoasters=[],this.listOfDays=[],this.sequence=1,this.editsequence=0,this.remarks="",this.shiftsFormControls=new l.Oe([new l.NI("")]),this.noOfDays=0,this.saveEnable=!1,this.editEnable=!1,this.monthYear="",this.employeeNumber="",this.employeeName="",this.s=[],this.custCodeControl=new l.NI("",l.kI.required),this.empCodeControl=new l.NI(""),this.siteCodeList=[],this.customerCode="",this.listOfShiftCodes=[],this.employeeList=[],this.siteCode="",this.projectCode="",this.month=0,this.year=0,this.shiftCode="",this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0,this.newTotalShifts=0,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(this.customerCode),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(_=>(""!==_.trim()&&(this.isDataLoading=!0),this.filterCustCodes(_||"")))),this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,ot.O)(this.employeeNumber),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(_=>(""!==_.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(_||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterEmployeeNumbers(e){return this.apiService.getall(`Employee/getAutoFillEmployeeList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadShiftCodes(){this.apiService.getall("ShiftMaster/getSelectShiftsToSiteBySiteCode/"+this.siteCode).subscribe(e=>{this.listOfShiftCodes=e,this.findNoOfShifts()})}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.employeeList=e})}ngOnInit(){let e=new Date(Date.now());this.year=e.getFullYear(),this.setForm(),this.readonly="readonly"}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],monthYear:[""],siteCode:["",l.kI.required],month:[0],year:[this.year],employeeNumber:[""],shiftCode:[""]})}submit(){this.saveEnable&&(this.form.controls.customerCode.setValue(this.customerCode),this.form.controls.siteCode.setValue(this.siteCode),this.form.controls.employeeNumber.setValue(this.employeeNumber),this.form.value.roastersList=this.listOfRoasters,this.form.value.s=this.s,this.form.value.month=this.month,this.form.value.year=this.year,this.form.value.employeeNumber=this.employeeNumber,this.form.value.employeeName=this.employeeName,this.form.value.customerCode=this.customerCode,this.form.value.siteCode=this.siteCode,this.listOfRoasters.length>0?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("MonthlyRoaster/createUpdateMonthlyRoaster",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.log(e),console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields())}addEntry(){if(""!=this.employeeNumber&&null!=this.employeeNumber&&0!=this.newTotalShifts){let e=this.listOfRoasters.findIndex(n=>n.employeeNumber==this.employeeNumber),o={employeeNumber:this.employeeNumber,employeeName:this.employeeName,s:this.s.slice()};-1!=e?(this.removeEntry(e),this.listOfRoasters.splice(e,0,o)):this.listOfRoasters.push(o),this.findNoOfShifts(),this.saveEnable=!0,this.employeeNumber="",this.form.controls.employeeNumber.setValue(""),this.empCodeControl.setValue(""),this.resetShiftsFormControls()}}removeEntry(e){this.listOfRoasters.splice(e,1),this.saveEnable=!0,this.findNoOfShifts()}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.employeeNumber.setValue(""),this.form.controls.employeeName.setValue("")}goBack(){window.history.back()}onSelectionCustomerCode(e,o){let n="";n="change"==o?e.target.value:e.option.value,this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){this.form.patchValue({customerCode:s.custCode});let r=this.custCodeControl.value;this.form.value.customerCode=r,this.customerCode=r,this.loadSiteCodes(r)}else this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""),this.customerCode="",this.siteCodeList=[]}),this.form.controls.siteCode.setValue(""),this.loadData()}autoSelectionEmployeeNumber(e,o){let n=this.empCodeControl.value,s=-1;this.employeeNumber=n,this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+n).subscribe(r=>{if(null!=r){this.employeeName=r.employeeName,this.form.value.employeeNumber=n,this.form.value.employeeName=r.employeeName,this.s=[];for(var c=1;c<=31;c++)this.s.push("");this.resetShiftsFormControls(),s=this.listOfRoasters.findIndex(p=>p.employeeNumber==this.employeeNumber),s>=0&&this.editRoasterEntry(s)}else this.empCodeControl.setValue(""),this.employeeNumber="",this.employeeName="",this.resetShiftsFormControls()})}onSelectSiteCode(e){let o="";o=e.target.value,this.form.value.siteCode=o,this.form.controls.siteCode.setValue(o),this.siteCode=o,this.loadData()}loadData(){if(""!=this.customerCode&&""!=this.siteCode&&0!=this.month&&0!=this.year){let o=new Date(this.year,this.month-1,1),n=new Date(this.year,this.month,0);this.listOfDays=[],this.noOfDays=n.getDate()-o.getDate()+1,this.apiService.getall(`MonthlyRoaster/getMonthlyRoaster/${this.customerCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(s=>{this.listOfRoasters=s,this.sequence=this.listOfRoasters.length+1}),this.loadWeekDays(),this.shiftsFormControls.clear();for(var e=1;e<=this.noOfDays;e++)this.shiftsFormControls.push(new l.NI(""));this.loadShiftCodes(),this.listOfShiftCodes=[]}else this.listOfRoasters=[]}loadWeekDays(){this.form.controls.monthYear.setValue(new Date(this.year,this.month-1,1));for(var e=1;e<=this.noOfDays;e++){let o=new Date(this.year,this.month-1,e),s={dayText:o.toDateString().substring(0,1),dayNumber:e,dayFullName:o.toDateString()};this.listOfDays.push(s)}}loadSiteCodes(e){this.apiService.getall(`CustomerSite/getSelectSiteListByCustCode/${e}`).subscribe(o=>{this.siteCodeList=o})}onSelectShift(e,o){if(0!=this.newTotalShifts)this.s[o]=e.target.value,this.shiftsFormControls.controls[o].setValue(e.target.value);else for(var n=1;n<=this.noOfDays;n++)this.s[n-1]=e.target.value,this.shiftsFormControls.controls[n-1].setValue(e.target.value);this.findTotalNewShifts()}resetShiftsFormControls(){this.shiftsFormControls.clear();for(var e=1;e<=this.noOfDays;e++)this.shiftsFormControls.push(new l.NI("")),this.s[e-1]="";this.findTotalNewShifts()}openDatePicker(e){e.open()}closeDatePicker(e,o){let s=Ae(e).format("YYYY-MM");this.month=parseInt(s.toString().substring(5,7)),this.year=Number(s.toString().substring(0,4)),""!=this.customerCode&&""!=this.siteCode&&this.loadData(),o.close()}findNoOfShifts(){this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0;for(var e=0;e<this.noOfDays;e++){let s=0;for(var o=0;o<this.listOfRoasters.length;o++){let r=0,c=this.listOfRoasters[o];for(var n=0;n<c.s.length;n++)r+=this.shiftValue(c.s[n]),n==e&&(s+=this.shiftValue(c.s[n]));this.totalShiftsRow.push(r)}this.totalShiftsCol.push(s),this.grandTotalShifts=this.grandTotalShifts+this.totalShiftsCol[e]}}findTotalNewShifts(){let e=0;for(var o=0;o<this.noOfDays;o++)e+=this.shiftValue(this.s[o]);this.newTotalShifts=e}shiftValue(e){let o=this.listOfShiftCodes.find(n=>n.value==e);return null==o||""==e?0:"False"==o.textTwo?1:0}RoastersCount(){return this.listOfRoasters.length}getCellInfo(e,o){return`Date:${new Date(this.year,this.month-1,o+1).toDateString()}\nShift: ${this.getShiftInfo(e,o)}`}getShiftInfo(e,o){return`Shift Name: ${this.listOfRoasters[e].s[o]}`}editRoasterEntry(e){let o=this.listOfRoasters[e];this.employeeNumber=o.employeeNumber,this.employeeName=o.employeeName,this.empCodeControl.setValue(this.employeeNumber),this.s=o.s.slice();for(var n=1;n<=this.noOfDays;n++)this.shiftsFormControls.controls[n-1].setValue(this.s[n-1]),this.empCodeControl.setValue(this.employeeNumber);this.findTotalNewShifts(),document.getElementById("inputEntry").scrollIntoView()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-monthly-roaster"]],features:[t.qOj],decls:59,vars:45,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete","change"],[3,"optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],["formControlName","monthYear",1,"form-control","datapickerinput",3,"matDatepicker","placeholder","click"],["matSuffix","",3,"for"],["startView","year","data-date-format","mm/yyyy",3,"monthSelected"],["dp2",""],["class","table-responsive","id","inputEntry",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],["id","inputEntry",1,"table-responsive"],["id","zero_config1",1,"table","table-bordered","no-wrap"],[4,"ngFor","ngForOf"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],["auto_emp","matAutocomplete"],[1,"fas","fa-plus-circle",3,"click"],[1,"custom-select","mr-sm-2",3,"formControl","change"],[1,"table-responsive"],[3,"matTooltip",4,"ngFor","ngForOf"],[1,"fas","icon-trash",3,"click"],[1,"fas","icon-note",3,"click"],[3,"matTooltip"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._UZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",4),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"label",10),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t._UZ(16,"auto-loader",13),t.TgZ(17,"input",14),t.NdJ("change",function(r){return o.onSelectionCustomerCode(r,"change")}),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,"select")}),t.YNc(22,ml,2,3,"mat-option",17),t.ALo(23,"async"),t.qZA(),t.qZA(),t._UZ(24,"validation-message",18),t.qZA(),t.qZA(),t.TgZ(25,"div",9),t.TgZ(26,"div",11),t.TgZ(27,"label",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"select",19),t.NdJ("change",function(r){return o.onSelectSiteCode(r)}),t.TgZ(31,"option",20),t._uU(32),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.YNc(35,gl,3,4,"option",17),t.qZA(),t._UZ(36,"validation-message",18),t.qZA(),t.qZA(),t.TgZ(37,"div",9),t.TgZ(38,"div",11),t.TgZ(39,"label",10),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",11),t.TgZ(43,"div",12),t.TgZ(44,"input",21),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(48);return o.openDatePicker(r)}),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"mat-datepicker-toggle",22),t.TgZ(47,"mat-datepicker",23,24),t.NdJ("monthSelected",function(r){t.CHM(n);const c=t.MAs(48);return o.closeDatePicker(r,c)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(49,Tl,31,19,"div",25),t.YNc(50,Sl,23,11,"div",26),t.TgZ(51,"div",27),t.TgZ(52,"div",6),t.TgZ(53,"div",28),t.TgZ(54,"input",29),t.NdJ("click",function(){return o.goBack()}),t.ALo(55,"translate"),t.qZA(),t._uU(56," \xa0 "),t._UZ(57,"input",30),t.ALo(58,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(21),s=t.MAs(48);t.Q6J("formGroup",o.form),t.xp6(12),t.Oqu(t.lcZ(13,23,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(18,25,"Please_Enter")," ",t.lcZ(19,27,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(23,29,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(4),t.Oqu(t.lcZ(29,31,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(33,33,"Select")," ",t.lcZ(34,35,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(41,37,"Year_Month")),t.xp6(4),t.hYB("placeholder","",t.lcZ(45,39,"Select")," ","Year_Month",""),t.Q6J("matDatepicker",s),t.xp6(2),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",0!=o.noOfDays),t.xp6(1),t.Q6J("ngIf",0!=o.RoastersCount()),t.xp6(4),t.s9C("value",t.lcZ(55,41,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(58,43,"Save"))}},directives:[l._Y,l.JL,l.sg,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,V.s,l.EJ,l.u,l.YN,l.Kr,j.hl,j.nW,ft.R9,j.Mq,Z.O5,Ut.ey,ut.gM],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function Ul(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Id")," "))}function Dl(i,a){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Ll(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Eng_Name")," "))}function Nl(i,a){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteName)}}function El(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Arb_Name")," "))}function Ol(i,a){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteArbName)}}function kl(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Address")," "))}function jl(i,a){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteAddress)}}function Ml(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"City")," "))}function Rl(i,a){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCityCode)}}function Pl(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Customer_Active")," "))}function Fl(i,a){1&i&&(t.TgZ(0,"span",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function Il(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function Yl(i,a){if(1&i&&(t.TgZ(0,"td",38),t.YNc(1,Fl,3,3,"span",39),t.YNc(2,Il,3,3,"ng-template",null,40,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function Jl(i,a){1&i&&(t.TgZ(0,"th",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Ql(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",38),t.TgZ(1,"div",44),t.TgZ(2,"a",45),t._UZ(3,"i",46),t.qZA(),t.TgZ(4,"div",47),t.TgZ(5,"a",48),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editSite(s.id)}),t._UZ(6,"i",49),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"Edit_Site")," "))}function Bl(i,a){1&i&&t._UZ(0,"tr",50)}function Hl(i,a){1&i&&t._UZ(0,"tr",51)}const $l=function(){return{standalone:!0}};let Xe=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.route=h,this.oprService=A,this.dialogRef=C,this.displayedColumns=["siteCode","siteName","siteArbName","siteAddress","siteCityCode","isActive","Actions"],this.searchValue="",this.sortingOrder="customerCode desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("CustomerSite/getCustomerSitesByCustCodePagedList",this.utilService.getQueryString(e,o,this.customerCode,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(e){this.openDialogManage(e,g.Oi.create,"Adding_New_Enquiry","Add",Te)}editSite(e){this.openDialogManage(e,g.Oi.update,"Updating_Site","Update",Ce)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("CustomerSite",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}addsitetocustomer(e){this.openDialogManage(e,g.Oi.create,"Adding_New_Site_to_Customer","Add",Te)}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(D.gz),t.Y36(W),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sites-list-by-customer-code"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:26,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],["align","right",1,"row"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],["align","right",1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addnewcustomersite","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","siteCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteName"],["matColumnDef","siteArbName"],["matColumnDef","siteAddress"],["matColumnDef","siteCityCode"],["matColumnDef","isActive"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"nav",6),t.TgZ(10,"ol",7),t.TgZ(11,"li",8),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"li",8),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"li",9),t._uU(18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"div",3),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",13),t.TgZ(24,"div",14),t.TgZ(25,"div",15),t.TgZ(26,"input",16),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",17),t.TgZ(29,"a",18),t.NdJ("click",function(){return o.create(o.custId)}),t._UZ(30,"i",19),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(33,"div",20),t.TgZ(34,"div",21),t.TgZ(35,"div",22),t.ynx(36),t.TgZ(37,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(38,24),t.YNc(39,Ul,3,3,"th",25),t.YNc(40,Dl,2,1,"td",26),t.BQk(),t.ynx(41,27),t.YNc(42,Ll,3,3,"th",25),t.YNc(43,Nl,2,1,"td",26),t.BQk(),t.ynx(44,28),t.YNc(45,El,3,3,"th",25),t.YNc(46,Ol,2,1,"td",26),t.BQk(),t.ynx(47,29),t.YNc(48,kl,3,3,"th",25),t.YNc(49,jl,2,1,"td",26),t.BQk(),t.ynx(50,30),t.YNc(51,Ml,3,3,"th",25),t.YNc(52,Rl,2,1,"td",26),t.BQk(),t.ynx(53,31),t.YNc(54,Pl,3,3,"th",25),t.YNc(55,Yl,4,2,"td",26),t.BQk(),t.ynx(56,32),t.YNc(57,Jl,3,3,"th",33),t.YNc(58,Ql,9,3,"td",26),t.BQk(),t.YNc(59,Bl,1,0,"tr",34),t.YNc(60,Hl,1,0,"tr",35),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",36),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,15,o.modalTitle)),t.xp6(11),t.hij(" ",t.lcZ(13,17,"Operations")," "),t.xp6(3),t.hij(" ",t.lcZ(16,19,"Sites_List")," "),t.xp6(3),t.Oqu(o.customerCode),t.xp6(8),t.MGl("placeholder","",t.lcZ(27,21,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(25,$l)),t.xp6(5),t.hij("",t.lcZ(32,23,"Add_New_Customer_Site")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();var Ke=X(4536),Vl=X(137);function Gl(i,a){1&i&&(t.TgZ(0,"span",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function Wl(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function zl(i,a){if(1&i&&t.YNc(0,Wl,3,3,"span",52),2&i){const e=t.oxw(),o=t.MAs(47);t.Q6J("ngIf",null==e.filter?null:e.filter.isActive)("ngIfElse",o)}}function Xl(i,a){1&i&&(t.TgZ(0,"span",54),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"All"),""))}function Kl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateReport()}),t._uU(1," Generate Report "),t.qZA()}}function tc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",56),t._uU(2," print "),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._uU(5,"ExportExcel"),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("useExistingCss",!0))}function ec(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function oc(i,a){if(1&i&&(t.TgZ(0,"td",58),t.TgZ(1,"div",59),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngClass",e.isActive?"":"circle-color-red"),t.xp6(1),t.hij(" \xa0\xa0\xa0\xa0\xa0\xa0 ",e.custCode,"")}}function ic(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name")," "))}function nc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArabic?e.custArbName:e.custName)}}function ac(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Category")," "))}function sc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.custCatCode)}}function rc(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"City")," "))}function lc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.custCityCode1)}}function cc(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Mobile")," "))}function pc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.custMobile1)}}function uc(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Phone")," "))}function dc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.custPhone1)}}function _c(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Contact_Person")," "))}function mc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.custSalesRep)}}function gc(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No_Of_Sites")," "))}function hc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.numberOfSites)}}function Zc(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function fc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",58),t.TgZ(1,"a",61),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t.ALo(2,"translate"),t._UZ(3,"i",62),t.qZA(),t.TgZ(4,"a",61),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewCustomerSites(s.custCode,s.id)}),t.ALo(5,"translate"),t._UZ(6,"i",63),t.qZA(),t.TgZ(7,"a",64),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().addsitetocustomer(s.id)}),t.ALo(8,"translate"),t._UZ(9,"i",15),t.qZA(),t.TgZ(10,"a",65),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().uploadFile(s.custCode)}),t.ALo(11,"translate"),t._UZ(12,"i",66),t.qZA(),t._uU(13," \xa0 "),t.qZA()}2&i&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"Edit_Customer")),t.xp6(3),t.MGl("matTooltip"," ",t.lcZ(5,6,"View_Customer_Sites"),""),t.xp6(3),t.s9C("matTooltip",t.lcZ(8,8,"Add_New_Site")),t.xp6(3),t.s9C("matTooltip",t.lcZ(11,10,"Document_Upload")))}function Ac(i,a){1&i&&t._UZ(0,"tr",67)}function Cc(i,a){1&i&&t._UZ(0,"tr",68)}function Tc(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.custCode),t.xp6(2),t.Oqu(o.isArabic?e.custArbName:e.custName),t.xp6(2),t.Oqu(e.custCatCode),t.xp6(2),t.Oqu(e.custCityCode1),t.xp6(2),t.Oqu(e.custMobile1),t.xp6(2),t.Oqu(e.custPhone1),t.xp6(2),t.Oqu(e.custSalesRep),t.xp6(2),t.Oqu(e.numberOfSites)}}function vc(i,a){if(1&i&&(t.TgZ(0,"div",69),t.TgZ(1,"div",70),t.TgZ(2,"table",71),t.TgZ(3,"tr"),t.TgZ(4,"td",72),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td",72),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(14,"br"),t.qZA(),t.TgZ(15,"table",73),t.TgZ(16,"tr"),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.YNc(41,Tc,17,8,"tr",74),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,14,"Report_On_Customers")),t.xp6(4),t.AsE("",t.lcZ(10,16,"Branch_Code"),":",null==(null==e.filter?null:e.filter.branchCode)||""==e.filter.branchCode?"All":e.filter.branchCode,""),t.xp6(3),t.AsE("",t.lcZ(13,18,"Search_Key"),":",e.searchValue,""),t.xp6(6),t.hij(" ",t.lcZ(19,20,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(22,22,"Name")," "),t.xp6(3),t.hij(" ",t.lcZ(25,24,"Category")," "),t.xp6(3),t.hij(" ",t.lcZ(28,26,"City")," "),t.xp6(3),t.hij(" ",t.lcZ(31,28,"Mobile")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"Phone")," "),t.xp6(3),t.hij(" ",t.lcZ(37,32,"Contact_Person")," "),t.xp6(3),t.hij(" ",t.lcZ(40,34,"No_Of_Sites")," "),t.xp6(2),t.Q6J("ngForOf",e.reportData)}}const xc=function(){return{standalone:!0}};let qc=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.translate=A,this.displayedColumns=["custCode","custName","custCatCode","custCityCode1","custMobile1","custPhone1","custSalesRep","numberOfSites","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isArabic=!1,this.filter={branchCode:""},this.reportData=[],this.isArab=!1,this.citySelectionList=[]}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.initialLoading()}refresh(){this.reportData=[],this.resetFilter()}resetFilter(){this.filter={branchCode:""},this.applyFilter("")}initialLoading(){this.searchValue="",this.loadCitiesList(),this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}loadCitiesList(){this.apiService.getall("Branch/getBranchSelectListForUser").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}onSortOrder(e){this.reportData=[],this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.oprService.getPaginationWithFilter("CustomerMaster/getCustomersPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.reportData=[]}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&location.reload(),this.isLoading=!1})}openFullWindow(e,o,n,s,r,c){let p=this.oprService.fullWindow(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.customerCode=o,p.componentInstance.custId=e,p.componentInstance.custId=e,p.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}createCust(){this.openDialogManage(0,g.Oi.create,"Adding_New_Customer","Add",Ke.L)}createSite(){this.openDialogManage(0,g.Oi.create,"Adding_New_Site","Add",Ce)}addsitetocustomer(e){this.openDialogManage(e,g.Oi.create,"Adding_New_Site_to_Customer","Add",Te)}edit(e){console.log("id="+e),this.openDialogManage(e,g.Oi.update,"Updating_Customer","Update",Ke.L)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("CustomerMaster",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}viewCustomerSites(e,o){this.openFullWindow(o,e,g.Oi.create,"Customer_Sites","",Xe)}clearReport(){this.reportData=[]}loadListReport(e,o,n,s){this.isLoading=!0,this.oprService.getPaginationWithFilter("CustomerMaster/getCustomersPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.isLoading=!1,this.reportData=0==this.reportData.length?r.items:this.reportData.concat(r.items)},r=>this.utilService.ShowApiErrorMessage(r))}generateReport(){this.reportData=[];for(let e=0;e<=Math.floor(this.totalItemsCount/100);e++){let o={pageIndex:e,pageSize:100,previousPageIndex:0==e?0:e-1,length:0};this.loadListReport(o.pageIndex,o.pageSize,this.searchValue,this.sortingOrder)}}exportexcel(){let e=document.getElementById("printcontainer");const o=mt.P6.table_to_sheet(e),n=mt.P6.book_new();mt.P6.book_append_sheet(n,o,"Sheet1"),mt.NC(n,"CustomersReport.xlsx")}openFileUploadDialogManage(e="",o,n,s=80){let r=this.utilService.openDialogCongif(this.dialog,o,s);r.componentInstance.modalTitle=e,r.componentInstance.moduleFile=n,r.afterClosed().subscribe(c=>{})}uploadFile(e){this.openFileUploadDialogManage(this.translate.instant("Document_Upload"),Vl.Y,{module:"OPR",action:"OPR_CUST",id:e,sourceId:e})}CustomerActiveChecked(e){this.filter.isActive=e.checked,this.applyFilter(this.searchValue)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-opcustomer"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:95,vars:40,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],["align","right",1,"col-md-12","col-lg-12","text-right"],["data-toggle","modal","data-target","#addnewcustomer","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],["data-toggle","modal","data-target","#addnewcustomersite","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"col-md-4","col-lg-4"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],["class","badge badge-pill badge-light",4,"ngIf","ngIfElse"],["Active",""],["All",""],["color","primary",3,"ngModel","ngModelChange","change"],[1,"col-md-4","col-lg-4",2,"align-content","flex-start"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary","icon-refresh",3,"click"],[1,"col-md-1","col-lg-1","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","custCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","custName"],["matColumnDef","custCatCode"],["matColumnDef","custCityCode1"],["matColumnDef","custMobile1"],["matColumnDef","custPhone1"],["matColumnDef","custSalesRep"],["matColumnDef","numberOfSites"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["id","printcontainer","hidden","",4,"ngIf"],[1,"badge","badge-pill","badge-light"],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-warning"],[1,"btn","btn-primary",3,"click"],["printTitle","Customer Sites Report","printSectionId","printcontainer","ngxPrint","",1,"btn","btn-primary",3,"useExistingCss"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"circle-color",3,"ngClass"],["mat-header-cell",""],[1,"tableicons",3,"matTooltip","click"],[1,"icon-note"],[1,"icon-eye"],["data-target","#addsitetocustomer",1,"tableicons",3,"matTooltip","click"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-cloud-upload"],["mat-header-row",""],["mat-row",""],["id","printcontainer","hidden",""],["width","100%"],["id","attndTable"],["colspan","2"],["id","attndTable","width","100%"],[4,"ngFor","ngForOf"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",1),t.TgZ(21,"div",13),t.TgZ(22,"a",14),t.NdJ("click",function(){return o.createCust()}),t._UZ(23,"i",15),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._uU(26," \xa0\xa0 "),t.TgZ(27,"a",16),t.NdJ("click",function(){return o.createSite()}),t._UZ(28,"i",15),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",1),t.TgZ(32,"div",17),t.TgZ(33,"div",18),t.TgZ(34,"label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"ng-select",19),t.NdJ("ngModelChange",function(s){return o.filter.branchCode=s})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",1),t.TgZ(39,"div",17),t.TgZ(40,"input",20),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.TgZ(42,"div",17),t.YNc(43,Gl,3,3,"span",21),t.YNc(44,zl,1,2,"ng-template",null,22,t.W1O),t.YNc(46,Xl,3,3,"ng-template",null,23,t.W1O),t._uU(48," \xa0\xa0\xa0\xa0 "),t.TgZ(49,"mat-slide-toggle",24),t.NdJ("ngModelChange",function(s){return o.filter.isActive=s})("change",function(s){return o.CustomerActiveChecked(s)}),t.qZA(),t._uU(50," \xa0\xa0\xa0\xa0 "),t.qZA(),t.TgZ(51,"div",25),t.YNc(52,Kl,2,0,"button",26),t.YNc(53,tc,6,1,"span",27),t.TgZ(54,"span"),t._uU(55," \xa0 "),t.TgZ(56,"button",28),t.NdJ("click",function(){return o.refresh()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"div",29),t._UZ(58,"spinner-loader",30),t.qZA(),t.qZA(),t._UZ(59,"div",31),t.TgZ(60,"div",32),t.TgZ(61,"div",33),t.TgZ(62,"table",34),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(63,35),t.YNc(64,ec,3,3,"th",36),t.YNc(65,oc,3,2,"td",37),t.BQk(),t.ynx(66,38),t.YNc(67,ic,3,3,"th",36),t.YNc(68,nc,2,1,"td",37),t.BQk(),t.ynx(69,39),t.YNc(70,ac,3,3,"th",36),t.YNc(71,sc,2,1,"td",37),t.BQk(),t.ynx(72,40),t.YNc(73,rc,3,3,"th",36),t.YNc(74,lc,2,1,"td",37),t.BQk(),t.ynx(75,41),t.YNc(76,cc,3,3,"th",36),t.YNc(77,pc,2,1,"td",37),t.BQk(),t.ynx(78,42),t.YNc(79,uc,3,3,"th",36),t.YNc(80,dc,2,1,"td",37),t.BQk(),t.ynx(81,43),t.YNc(82,_c,3,3,"th",36),t.YNc(83,mc,2,1,"td",37),t.BQk(),t.ynx(84,44),t.YNc(85,gc,3,3,"th",36),t.YNc(86,hc,2,1,"td",37),t.BQk(),t.ynx(87,45),t.YNc(88,Zc,3,3,"th",46),t.YNc(89,fc,14,12,"td",37),t.BQk(),t.YNc(90,Ac,1,0,"tr",47),t.YNc(91,Cc,1,0,"tr",48),t.qZA(),t.qZA(),t.qZA(),t.ynx(92),t.TgZ(93,"mat-paginator",49),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(94,vc,42,36,"div",50)),2&e){const n=t.MAs(45);t.xp6(4),t.hij(" ",t.lcZ(5,25,"Customers")," "),t.xp6(6),t.hij(" ",t.lcZ(11,27,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,29,"Customers_List")),t.xp6(11),t.hij("",t.lcZ(25,31,"Add_New_Customer")," "),t.xp6(5),t.hij("",t.lcZ(30,33,"Add_New_Customer_Site")," "),t.xp6(6),t.Oqu(t.lcZ(36,35,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.filter.branchCode),t.xp6(3),t.MGl("placeholder","",t.lcZ(41,37,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(39,xc)),t.xp6(3),t.Q6J("ngIf",!o.filter.isActive&&null!=(null==o.filter?null:o.filter.isActive))("ngIfElse",n),t.xp6(6),t.Q6J("ngModel",o.filter.isActive),t.xp6(3),t.Q6J("ngIf",0==o.reportData.length),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0),t.xp6(5),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.Q6J("dataSource",o.data),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0)}},directives:[Et.w9,l.JJ,l.On,l.Fj,Z.O5,jt.Rr,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.mk,ut.gM,m.XQ,m.Gk,Z.sg],pipes:[f.X$],styles:["#attndTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n    border: solid;\n    border-width: 1px;\n    padding: 5px 5px 5px 5px;\n    text-align: center;\n  }\n\n  #attndTable[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n\n  #printcontainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100%;\n    padding: 10px 10px 10px 10px;\n  }"]}),i})(),bc=(()=>{class i extends y{constructor(e,o,n,s,r,c){super(o),this.dialogRef=e,this.authService=o,this.fb=n,this.apiService=s,this.utilService=r,this.opservice=c,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({isExist:[!1],costHead:["CHXXXXXX",l.kI.required],costType:["",l.kI.required],costNameInEnglish:["",l.kI.required],costNameInArabic:["",l.kI.required],minServiceCosttoCompany:["",l.kI.required],minServicePrice:["",l.kI.required],grossMargin:["",l.kI.required],isActive:[!0,l.kI.required],isApplicableForMaterial:[!0],isApplicableForSkillset:[!0],isApplicableForVehicle:[!0],isApplicableForFinancialExpense:[!0],remarks:[""]},{validators:[xe.isCodeExist("costHead","isExist")]})}closeModel(){this.dialogRef.close()}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("OperationExpenseHead",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("OperationExpenseHead/getOperationExpenseHeadById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}reset(){this.form.reset()}verifyCode(e){let o=e.target.value.toUpperCase();""!=o&&this.opservice.verifyCode("OperationExpenseHead/isExistCode/"+o).subscribe(n=>{this.form.controls.isExist.setValue(n),this.form.controls.costHead.setValue(o)})}get f(){return this.form.controls}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(v._),t.Y36(l.qu),t.Y36(q.s),t.Y36(b.t),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-operationexpenseheads"]],features:[t.qOj],decls:126,vars:103,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","costHead","readonly","",1,"form-control",3,"placeholder"],["formControlName","costType",1,"form-control"],["value",""],[3,"control"],["type","text","formControlName","costNameInEnglish",1,"form-control",3,"placeholder"],["type","text","formControlName","costNameInArabic",1,"form-control",3,"placeholder"],["type","number","formControlName","minServiceCosttoCompany",1,"form-control",3,"placeholder"],["type","number","formControlName","minServicePrice",1,"form-control",3,"placeholder"],["type","number","formControlName","grossMargin",1,"form-control",3,"placeholder"],["color","primary","formControlName","isApplicableForMaterial"],["color","primary","formControlName","isApplicableForSkillset"],["color","primary","formControlName","isApplicableForVehicle"],["color","primary","formControlName","isApplicableForFinancialExpense"],["color","primary","formControlName","isActive"],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," \xd7 "),t.qZA(),t.qZA(),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",7),t.ALo(14,"translate"),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.TgZ(16,"div",5),t.TgZ(17,"div",6),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"select",8),t.TgZ(22,"option",9),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option"),t._uU(27,"Fixed"),t.qZA(),t.TgZ(28,"option"),t._uU(29,"Operation"),t.qZA(),t.qZA(),t._UZ(30,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(31,"div",5),t.TgZ(32,"div",6),t.TgZ(33,"label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",11),t.ALo(37,"translate"),t.ALo(38,"translate"),t._UZ(39,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(40,"div",5),t.TgZ(41,"div",6),t.TgZ(42,"label"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"input",12),t.ALo(46,"translate"),t.ALo(47,"translate"),t._UZ(48,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(49,"div",5),t.TgZ(50,"div",6),t.TgZ(51,"label"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._UZ(54,"input",13),t.ALo(55,"translate"),t.ALo(56,"translate"),t._UZ(57,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(58,"div",5),t.TgZ(59,"div",6),t.TgZ(60,"label"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"input",14),t.ALo(64,"translate"),t.ALo(65,"translate"),t._UZ(66,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(67,"div",5),t.TgZ(68,"div",6),t.TgZ(69,"label"),t._uU(70),t.ALo(71,"translate"),t.qZA(),t._UZ(72,"input",15),t.ALo(73,"translate"),t.ALo(74,"translate"),t._UZ(75,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(76,"div",5),t.TgZ(77,"div",6),t.TgZ(78,"label"),t._uU(79),t.ALo(80,"translate"),t.qZA(),t._UZ(81,"br"),t._UZ(82,"mat-slide-toggle",16),t.qZA(),t.qZA(),t.TgZ(83,"div",5),t.TgZ(84,"div",6),t.TgZ(85,"label"),t._uU(86),t.ALo(87,"translate"),t.qZA(),t._UZ(88,"br"),t._UZ(89,"mat-slide-toggle",17),t.qZA(),t.qZA(),t.TgZ(90,"div",5),t.TgZ(91,"div",6),t.TgZ(92,"label"),t._uU(93),t.ALo(94,"translate"),t.qZA(),t._UZ(95,"br"),t._UZ(96,"mat-slide-toggle",18),t.qZA(),t.qZA(),t.TgZ(97,"div",5),t.TgZ(98,"div",6),t.TgZ(99,"label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"br"),t._UZ(103,"mat-slide-toggle",19),t.qZA(),t.qZA(),t.TgZ(104,"div",5),t.TgZ(105,"div",6),t.TgZ(106,"label"),t._uU(107),t.ALo(108,"translate"),t.qZA(),t._UZ(109,"br"),t._UZ(110,"mat-slide-toggle",20),t.qZA(),t.qZA(),t.TgZ(111,"div",5),t.TgZ(112,"div",6),t.TgZ(113,"label"),t._uU(114),t.ALo(115,"translate"),t.qZA(),t._UZ(116,"textarea",21),t.ALo(117,"translate"),t.ALo(118,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(119,"div",22),t.TgZ(120,"div",23),t.TgZ(121,"input",24),t.NdJ("click",function(){return o.closeModel()}),t.ALo(122,"translate"),t.qZA(),t._uU(123," \xa0 "),t._UZ(124,"input",25),t.ALo(125,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij("",t.lcZ(3,39,"Add_Operation_Expense_Heads")," "),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(12,41,"Cost_Head")),t.xp6(2),t.hYB("placeholder","",t.lcZ(14,43,"Please_Enter")," ",t.lcZ(15,45,"Cost_Head"),""),t.xp6(6),t.Oqu(t.lcZ(20,47,"Cost_Type")),t.xp6(4),t.AsE("",t.lcZ(24,49,"Select")," ",t.lcZ(25,51,"Cost_Type")," "),t.xp6(7),t.Q6J("control",o.form.controls.costType),t.xp6(4),t.Oqu(t.lcZ(35,53,"Cost_Name_In_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(37,55,"Please_Enter")," ",t.lcZ(38,57,"Cost_Name_In_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.costNameInEnglish),t.xp6(4),t.Oqu(t.lcZ(44,59,"Cost_Name_In_Arabic")),t.xp6(2),t.hYB("placeholder","",t.lcZ(46,61,"Please_Enter")," ",t.lcZ(47,63,"Cost_Name_In_Arabic"),""),t.xp6(3),t.Q6J("control",o.form.controls.costNameInArabic),t.xp6(4),t.Oqu(t.lcZ(53,65,"Min_Service_Cost_to_Company")),t.xp6(2),t.hYB("placeholder","",t.lcZ(55,67,"Please_Enter")," ",t.lcZ(56,69,"Min_Service_Cost_to_Company"),""),t.xp6(3),t.Q6J("control",o.form.controls.minServiceCosttoCompany),t.xp6(4),t.Oqu(t.lcZ(62,71,"Min_Service_Price")),t.xp6(2),t.hYB("placeholder","",t.lcZ(64,73,"Please_Enter")," ",t.lcZ(65,75,"Min_Service_Price"),""),t.xp6(3),t.Q6J("control",o.form.controls.minServicePrice),t.xp6(4),t.Oqu(t.lcZ(71,77,"Gross_Margin")),t.xp6(2),t.hYB("placeholder","",t.lcZ(73,79,"Please_Enter")," ",t.lcZ(74,81,"Gross_Margin"),""),t.xp6(3),t.Q6J("control",o.form.controls.grossMargin),t.xp6(4),t.Oqu(t.lcZ(80,83,"Is_Applicable_For_Material")),t.xp6(7),t.Oqu(t.lcZ(87,85,"Is_Applicable_For_Skillset")),t.xp6(7),t.Oqu(t.lcZ(94,87,"Is_Applicable_For_Vehicle")),t.xp6(7),t.Oqu(t.lcZ(101,89,"Is_Applicable_For_Financial_Expense")),t.xp6(7),t.Oqu(t.lcZ(108,91,"Is_Active")),t.xp6(7),t.Oqu(t.lcZ(115,93,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(117,95,"Please_Enter")," ",t.lcZ(118,97,"Remarks"),""),t.xp6(5),t.s9C("value",t.lcZ(122,99,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(125,101,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,V.s,l.wV,jt.Rr],pipes:[f.X$],encapsulation:2}),i})();function yc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Cost_Head")," "))}function Sc(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.costHead)}}function wc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Cost_Name_In_English")," "))}function Uc(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.costNameInEnglish)}}function Dc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Cost_Name_In_Arabic")," "))}function Lc(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.costNameInArabic)}}function Nc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Price")," "))}function Ec(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.minServicePrice)}}function Oc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Cost")," "))}function kc(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.minServiceCosttoCompany)}}function jc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function Mc(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.isActive)}}function Rc(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Pc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",37),t.TgZ(1,"a",39),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",40),t.qZA(),t.qZA()}}function Fc(i,a){1&i&&t._UZ(0,"tr",41)}function Ic(i,a){1&i&&t._UZ(0,"tr",42)}const Yc=function(){return{standalone:!0}};let Jc=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.notifyService=p,this.validationService=u,this.pageService=d,this.dialog=_,this.displayedColumns=["costHead","costNameInEnglish","costNameInArabic","minServicePrice","minServiceCosttoCompany","isActive","Actions"],this.searchValue="",this.isLoading=!1,this.sortingOrder="id desc"}ngOnInit(){this.initialLoading()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}setForm(){this.form=this.fb.group({})}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("OperationExpenseHead/getOperationExpenseHeadsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,bc);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Operationexpensehead","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Operationexpensehead","Update")}refresh(){this.searchValue="",this.initialLoading()}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("OperationExpenseHead",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(w.g),t.Y36(E.R),t.Y36(B.N),t.Y36(T.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-operationexpenseheads"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:66,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addOperationExpenseHead","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","costHead"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","costNameInEnglish"],["matColumnDef","costNameInArabic"],["matColumnDef","minServicePrice"],["matColumnDef","minServiceCosttoCompany"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,yc,3,3,"th",24),t.YNc(43,Sc,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,wc,3,3,"th",24),t.YNc(46,Uc,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,Dc,3,3,"th",24),t.YNc(49,Lc,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,Nc,3,3,"th",24),t.YNc(52,Ec,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,Oc,3,3,"th",24),t.YNc(55,kc,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,jc,3,3,"th",24),t.YNc(58,Mc,2,1,"td",25),t.BQk(),t.ynx(59,31),t.YNc(60,Rc,3,3,"th",32),t.YNc(61,Pc,3,0,"td",25),t.BQk(),t.YNc(62,Fc,1,0,"tr",33),t.YNc(63,Ic,1,0,"tr",34),t.qZA(),t.ynx(64),t.TgZ(65,"mat-paginator",35),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Operation_Expense_Heads")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Operation_Expense_Heads")),t.xp6(10),t.hij("",t.lcZ(27,24,"Operation_Expense_Heads_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,Yc)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Operation_Expense_Heads")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})(),Qc=(()=>{class i extends y{constructor(e,o,n){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.currentDate=new Date,this.currentMonth="",this.currentYear=""}ngOnInit(){this.initialLoading()}initialLoading(){this.currentMonth=this.currentDate.toString().substr(4,3)+","+this.currentDate.toString().substr(11,4),this.currentYear=this.currentDate.toString().substr(11,4),this.apiService.getall("OperationsDashboard/getOpeartionsDashboard").subscribe(e=>{this.data=e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.s),t.Y36(v._),t.Y36(b.t))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-opr-dash-board"]],features:[t.qOj],decls:99,vars:6,consts:[[1,"container-fluid"],[1,"card-group"],[1,"card","border-right"],[1,"card-body"],[1,"d-flex","d-lg-flex","d-md-block","align-items-center"],[1,"d-inline-flex","align-items-center"],[1,"text-dark","mb-1","font-weight-medium"],[1,"text-muted","font-weight-normal","mb-0","w-100","text-truncate"],[1,"ml-auto","mt-md-3","mt-lg-0"],[1,"opacity-7","text-muted"],[1,"fab","fa-wpforms",2,"font-size","25px"],[1,"text-dark","mb-1","w-100","text-truncate","font-weight-medium"],[1,"icon-calender",2,"font-size","25px"],[1,"icon-user",2,"font-size","25px"],[1,"card"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-globe"],["cx","12","cy","12","r","10"],["x1","2","y1","12","x2","22","y2","12"],["d","M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"],[1,"row"],[1,"col-lg-6"],[1,"card-title"],["id","pie-chart","height","150"],[1,"table-responsive"],[1,"table","no-wrap","v-middle","mb-0"],[1,"border-0"],[1,"border-0","font-14","font-weight-medium","text-muted"],[1,"border-0","font-14","font-weight-medium","text-muted","px-2"],[1,"border-0","font-14","font-weight-medium","text-muted","text-center"],[1,"border-top-0","px-2","py-4"],[1,"border-top-0","text-muted","px-2","py-4","font-14"],[1,"border-top-0","text-center","px-2","py-4","text-success","font-14"],["data-toggle","tooltip","data-placement","top","title","","data-original-title","Active",1,"fa","fa-circle","text-success","font-12"],[1,"border-top-0","text-center","px-2","py-4","text-danger","font-14"],["data-toggle","tooltip","data-placement","top","title","","data-original-title","Active",1,"fa","fa-circle","text-danger","font-12"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div"),t.TgZ(6,"div",5),t.TgZ(7,"h2",6),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"h6",7),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"div",8),t.TgZ(12,"span",9),t._UZ(13,"i",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",2),t.TgZ(15,"div",3),t.TgZ(16,"div",4),t.TgZ(17,"div"),t.TgZ(18,"h2",11),t._uU(19),t.qZA(),t.TgZ(20,"h6",7),t._uU(21),t.qZA(),t.qZA(),t.TgZ(22,"div",8),t.TgZ(23,"span",9),t._UZ(24,"i",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",2),t.TgZ(26,"div",3),t.TgZ(27,"div",4),t.TgZ(28,"div"),t.TgZ(29,"div",5),t.TgZ(30,"h2",6),t._uU(31),t.qZA(),t.qZA(),t.TgZ(32,"h6",7),t._uU(33,"Customers"),t.qZA(),t.qZA(),t.TgZ(34,"div",8),t.TgZ(35,"span",9),t._UZ(36,"i",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",14),t.TgZ(38,"div",3),t.TgZ(39,"div",4),t.TgZ(40,"div"),t.TgZ(41,"h2",6),t._uU(42),t.qZA(),t.TgZ(43,"h6",7),t._uU(44,"Sites"),t.qZA(),t.qZA(),t.TgZ(45,"div",8),t.TgZ(46,"span",9),t.O4$(),t.TgZ(47,"svg",15),t._UZ(48,"circle",16),t._UZ(49,"line",17),t._UZ(50,"path",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.kcU(),t.TgZ(51,"div",19),t.TgZ(52,"div",20),t.TgZ(53,"div",14),t.TgZ(54,"div",3),t.TgZ(55,"h4",21),t._uU(56,"Approved Status"),t.qZA(),t.TgZ(57,"div"),t._UZ(58,"canvas",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",20),t.TgZ(60,"div",14),t.TgZ(61,"div",3),t.TgZ(62,"h4",21),t._uU(63,"Current Active Sites"),t.qZA(),t.TgZ(64,"div",23),t.TgZ(65,"table",24),t.TgZ(66,"thead"),t.TgZ(67,"tr",25),t.TgZ(68,"th",26),t._uU(69," Site Name "),t.qZA(),t.TgZ(70,"th",27),t._uU(71," Project "),t.qZA(),t.TgZ(72,"th",28),t._uU(73," Status "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(74,"tbody"),t.TgZ(75,"tr"),t.TgZ(76,"td",29),t._uU(77," Site 1 "),t.qZA(),t.TgZ(78,"td",30),t._uU(79,"Project1"),t.qZA(),t.TgZ(80,"td",31),t._UZ(81,"i",32),t._uU(82," Active"),t.qZA(),t.qZA(),t.TgZ(83,"tr"),t.TgZ(84,"td",29),t._uU(85," Site 1 "),t.qZA(),t.TgZ(86,"td",30),t._uU(87,"Project2"),t.qZA(),t.TgZ(88,"td",33),t._UZ(89,"i",34),t._uU(90," Inactive"),t.qZA(),t.qZA(),t.TgZ(91,"tr"),t.TgZ(92,"td",29),t._uU(93," Site 1 "),t.qZA(),t.TgZ(94,"td",30),t._uU(95,"Project2"),t.qZA(),t.TgZ(96,"td",33),t._UZ(97,"i",34),t._uU(98," Inactive"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Oqu(null==o.data?null:o.data.enquiriesCurentMonth),t.xp6(2),t.hij("Enquiries this month ",o.currentMonth,""),t.xp6(9),t.Oqu(null==o.data?null:o.data.enquiriesCurentYear),t.xp6(2),t.hij(" Enquiries this year ",o.currentYear," "),t.xp6(10),t.Oqu(null==o.data?null:o.data.noOfCustomers),t.xp6(11),t.Oqu(null==o.data?null:o.data.noOfSites))},encapsulation:2}),i})(),Bc=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.payrollGroupID=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.payrollGroupID=this.id,this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({payrollGroupID:[0],payrollGroupName_EN:["",l.kI.required],payrollGroupName_AR:["",l.kI.required],companyID:[""],siteID:[""],projectId:[""],businessUnitID:[""],divisionID:[""],branchID:[""],countryID:[""],startPayRollDate:[""],currentPayRollMonth:[""],endPayRollDate:[""],currentPayRollYear:[""],remarks:[""],isForFutureEmployee:[!0],isForAllEmployee:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.payrollGroupID=this.payrollGroupID),this.apiService.post("PayRollGroup",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("PayRollGroup/getPayRollGroupById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({payrollGroupID:0}))})}reset(){this.form.controls.payrollGroupID.setValue(0),this.form.controls.payrollGroupName_EN.setValue(""),this.form.controls.payrollGroupName_AR.setValue(""),this.form.controls.companyID.setValue(""),this.form.controls.siteID.setValue(""),this.form.controls.projectId.setValue(""),this.form.controls.businessUnitID.setValue(""),this.form.controls.divisionID.setValue(""),this.form.controls.branchID.setValue(""),this.form.controls.countryID.setValue(""),this.form.controls.startPayRollDate.setValue(""),this.form.controls.currentPayRollMonth.setValue(""),this.form.controls.endPayRollDate.setValue(""),this.form.controls.currentPayRollYear.setValue(""),this.form.controls.remarks.setValue(""),this.form.controls.isForFutureEmployee.setValue(!0),this.form.controls.isForAllEmployee.setValue(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-payroll-group"]],features:[t.qOj],decls:163,vars:160,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","payrollGroupName_EN",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","payrollGroupName_AR",1,"form-control",3,"placeholder"],["type","number","formControlName","companyID",1,"form-control",3,"placeholder"],["type","number","formControlName","siteID",1,"form-control",3,"placeholder"],["type","number","formControlName","projectId",1,"form-control",3,"placeholder"],["type","number","formControlName","businessUnitID",1,"form-control",3,"placeholder"],["type","number","formControlName","divisionID",1,"form-control",3,"placeholder"],["type","number","formControlName","branchID",1,"form-control",3,"placeholder"],["type","number","formControlName","countryID",1,"form-control",3,"placeholder"],["formControlName","startPayRollDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["type","number","min","1","max","12","formControlName","currentPayRollMonth",1,"form-control",3,"placeholder"],["formControlName","endPayRollDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],["picker2",""],["type","number","formControlName","currentPayRollYear",1,"form-control",3,"placeholder"],["type","text","formControlName","remarks",1,"form-control",3,"placeholder"],["color","primary","formControlName","isForAllEmployee"],["color","primary","formControlName","isForFutureEmployee"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," \xd7"),t.qZA(),t.qZA(),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",7),t.ALo(14,"translate"),t.ALo(15,"translate"),t._UZ(16,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(17,"div",5),t.TgZ(18,"div",6),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",9),t.ALo(23,"translate"),t.ALo(24,"translate"),t._UZ(25,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(26,"div",5),t.TgZ(27,"div",6),t.TgZ(28,"label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",10),t.ALo(32,"translate"),t.ALo(33,"translate"),t._UZ(34,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(35,"div",5),t.TgZ(36,"div",6),t.TgZ(37,"label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",11),t.ALo(41,"translate"),t.ALo(42,"translate"),t._UZ(43,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(44,"div",5),t.TgZ(45,"div",6),t.TgZ(46,"label"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"input",12),t.ALo(50,"translate"),t.ALo(51,"translate"),t._UZ(52,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(53,"div",5),t.TgZ(54,"div",6),t.TgZ(55,"label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t._UZ(58,"input",13),t.ALo(59,"translate"),t.ALo(60,"translate"),t._UZ(61,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(62,"div",5),t.TgZ(63,"div",6),t.TgZ(64,"label"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t._UZ(67,"input",14),t.ALo(68,"translate"),t.ALo(69,"translate"),t._UZ(70,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(71,"div",5),t.TgZ(72,"div",6),t.TgZ(73,"label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._UZ(76,"input",15),t.ALo(77,"translate"),t.ALo(78,"translate"),t._UZ(79,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(80,"div",5),t.TgZ(81,"div",6),t.TgZ(82,"label"),t._uU(83),t.ALo(84,"translate"),t.qZA(),t._UZ(85,"input",16),t.ALo(86,"translate"),t.ALo(87,"translate"),t._UZ(88,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(89,"div",5),t.TgZ(90,"div",6),t.TgZ(91,"label"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t._UZ(94,"input",17),t.ALo(95,"translate"),t.ALo(96,"translate"),t._UZ(97,"validation-message",8),t.TgZ(98,"div",18),t._UZ(99,"mat-datepicker-toggle",19),t._UZ(100,"mat-datepicker",null,20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(102,"div",5),t.TgZ(103,"div",6),t.TgZ(104,"label"),t._uU(105),t.ALo(106,"translate"),t.qZA(),t._UZ(107,"input",21),t.ALo(108,"translate"),t.ALo(109,"translate"),t._UZ(110,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(111,"div",5),t.TgZ(112,"div",6),t.TgZ(113,"label"),t._uU(114),t.ALo(115,"translate"),t.qZA(),t._UZ(116,"input",22),t.ALo(117,"translate"),t.ALo(118,"translate"),t._UZ(119,"validation-message",8),t.TgZ(120,"div",18),t._UZ(121,"mat-datepicker-toggle",19),t._UZ(122,"mat-datepicker",null,23),t.qZA(),t.qZA(),t.qZA(),t.TgZ(124,"div",5),t.TgZ(125,"div",6),t.TgZ(126,"label"),t._uU(127),t.ALo(128,"translate"),t.qZA(),t._UZ(129,"input",24),t.ALo(130,"translate"),t.ALo(131,"translate"),t._UZ(132,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(133,"div",5),t.TgZ(134,"div",6),t.TgZ(135,"label"),t._uU(136),t.ALo(137,"translate"),t.qZA(),t._UZ(138,"input",25),t.ALo(139,"translate"),t.ALo(140,"translate"),t._UZ(141,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(142,"div",5),t.TgZ(143,"div",6),t.TgZ(144,"label"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t._UZ(147,"br"),t._UZ(148,"mat-slide-toggle",26),t.qZA(),t.qZA(),t.TgZ(149,"div",5),t.TgZ(150,"div",6),t.TgZ(151,"label"),t._uU(152),t.ALo(153,"translate"),t.qZA(),t._UZ(154,"br"),t._UZ(155,"mat-slide-toggle",27),t.qZA(),t.qZA(),t.qZA(),t.TgZ(156,"div",28),t.TgZ(157,"div",29),t.TgZ(158,"input",30),t.NdJ("click",function(){return o.closeModel()}),t.ALo(159,"translate"),t.qZA(),t._uU(160," \xa0 "),t._UZ(161,"input",31),t.ALo(162,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(101),s=t.MAs(123);t.xp6(2),t.Oqu(t.lcZ(3,66,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(12,68,"payrollGroupName_EN")),t.xp6(2),t.hYB("placeholder","",t.lcZ(14,70,"Please_Enter")," ",t.lcZ(15,72,"payrollGroupName_EN"),""),t.xp6(3),t.Q6J("control",o.form.controls.payrollGroupName_EN),t.xp6(4),t.Oqu(t.lcZ(21,74,"payrollGroupName_AR")),t.xp6(2),t.hYB("placeholder","",t.lcZ(23,76,"Please_Enter")," ",t.lcZ(24,78,"payrollGroupName_AR"),""),t.xp6(3),t.Q6J("control",o.form.controls.payrollGroupName_AR),t.xp6(4),t.Oqu(t.lcZ(30,80,"Company_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(32,82,"Please_Enter")," ",t.lcZ(33,84,"companyID"),""),t.xp6(3),t.Q6J("control",o.form.controls.companyID),t.xp6(4),t.Oqu(t.lcZ(39,86,"Site_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(41,88,"Please_Enter")," ",t.lcZ(42,90,"siteID"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteID),t.xp6(4),t.Oqu(t.lcZ(48,92,"Project_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(50,94,"Please_Enter")," ",t.lcZ(51,96,"projectId"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectId),t.xp6(4),t.Oqu(t.lcZ(57,98,"businessUnitID")),t.xp6(2),t.hYB("placeholder","",t.lcZ(59,100,"Please_Enter")," ",t.lcZ(60,102,"businessUnitID"),""),t.xp6(3),t.Q6J("control",o.form.controls.businessUnitID),t.xp6(4),t.Oqu(t.lcZ(66,104,"divisionID")),t.xp6(2),t.hYB("placeholder","",t.lcZ(68,106,"Please_Enter")," ",t.lcZ(69,108,"divisionID"),""),t.xp6(3),t.Q6J("control",o.form.controls.divisionID),t.xp6(4),t.Oqu(t.lcZ(75,110,"branchID")),t.xp6(2),t.hYB("placeholder","",t.lcZ(77,112,"Please_Enter")," ",t.lcZ(78,114,"branchID"),""),t.xp6(3),t.Q6J("control",o.form.controls.branchID),t.xp6(4),t.Oqu(t.lcZ(84,116,"Country_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(86,118,"Please_Enter")," ",t.lcZ(87,120,"countryID"),""),t.xp6(3),t.Q6J("control",o.form.controls.countryID),t.xp6(4),t.Oqu(t.lcZ(93,122,"startPayRollDate")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(95,124,"Please_Enter")," ",t.lcZ(96,126,"startPayRollDate"),""),t.Q6J("matDatepicker",n),t.xp6(3),t.Q6J("control",o.form.controls.startPayRollDate),t.xp6(2),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(106,128,"currentPayRollMonth")),t.xp6(2),t.hYB("placeholder","",t.lcZ(108,130,"Please_Enter")," ",t.lcZ(109,132,"currentPayRollMonth"),""),t.xp6(3),t.Q6J("control",o.form.controls.currentPayRollMonth),t.xp6(4),t.Oqu(t.lcZ(115,134,"endPayRollDate")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(117,136,"Please_Enter")," ",t.lcZ(118,138,"endPayRollDate"),""),t.Q6J("matDatepicker",s),t.xp6(3),t.Q6J("control",o.form.controls.endPayRollDate),t.xp6(2),t.Q6J("for",s),t.xp6(6),t.Oqu(t.lcZ(128,140,"currentPayRollYear")),t.xp6(2),t.hYB("placeholder","",t.lcZ(130,142,"Please_Enter")," ",t.lcZ(131,144,"currentPayRollYear"),""),t.xp6(3),t.Q6J("control",o.form.controls.currentPayRollYear),t.xp6(4),t.Oqu(t.lcZ(137,146,"remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(139,148,"Please_Enter")," ",t.lcZ(140,150,"Remarks"),""),t.xp6(3),t.Q6J("control",o.form.controls.remarks),t.xp6(4),t.Oqu(t.lcZ(146,152,"isForAllEmployee")),t.xp6(7),t.Oqu(t.lcZ(153,154,"isForFutureEmployee")),t.xp6(6),t.s9C("value",t.lcZ(159,156,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(162,158,"Save"))}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.wV,j.hl,j.nW,ft.R9,j.Mq,l.qQ,l.Fd,jt.Rr],pipes:[f.X$],encapsulation:2}),i})();function Hc(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"payrollGroupID")," "))}function $c(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.payrollGroupID)}}function Vc(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"payrollGroupName_EN")," "))}function Gc(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.payrollGroupName_EN)}}function Wc(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"payrollGroupName_AR")," "))}function zc(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.payrollGroupName_AR)}}function Xc(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Company_ID")," "))}function Kc(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.companyID)}}function tp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function ep(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteID)}}function op(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function ip(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectId)}}function np(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"businessUnitID")," "))}function ap(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.businessUnitID)}}function sp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"divisionID")," "))}function rp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.divisionID)}}function lp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"branchID")," "))}function cp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchID)}}function pp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Country_Code")," "))}function up(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.countryID)}}function dp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"startPayRollDate")," "))}function _p(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.startPayRollDate)}}function mp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"isForFutureEmployee")," "))}function gp(i,a){1&i&&(t.TgZ(0,"span",50),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function hp(i,a){1&i&&(t.TgZ(0,"span",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Zp(i,a){if(1&i&&(t.TgZ(0,"td",47),t.YNc(1,gp,3,3,"span",48),t.YNc(2,hp,3,3,"ng-template",null,49,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isForFutureEmployee)("ngIfElse",o)}}function fp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"isForAllEmployee")," "))}function Ap(i,a){1&i&&(t.TgZ(0,"span",50),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Cp(i,a){1&i&&(t.TgZ(0,"span",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Tp(i,a){if(1&i&&(t.TgZ(0,"td",47),t.YNc(1,Ap,3,3,"span",48),t.YNc(2,Cp,3,3,"ng-template",null,49,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isForAllEmployee)("ngIfElse",o)}}function vp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"currentPayRollMonth")," "))}function xp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.currentPayRollMonth)}}function qp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"endPayRollDate")," "))}function bp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.endPayRollDate)}}function yp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"currentPayRollYear")," "))}function Sp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.currentPayRollYear)}}function wp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Remarks")," "))}function Up(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.remarks)}}function Dp(i,a){1&i&&(t.TgZ(0,"th",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Lp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",47),t.TgZ(1,"div",53),t.TgZ(2,"a",54),t._UZ(3,"i",55),t.qZA(),t.TgZ(4,"div",56),t.TgZ(5,"a",57),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.payrollGroupID)}),t._UZ(6,"i",58),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",57),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().delete(s.payrollGroupID)}),t._UZ(10,"i",59),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.Oqu(t.lcZ(8,2,"Edit_Project")),t.xp6(4),t.Oqu(t.lcZ(12,4,"Delete_Project")))}function Np(i,a){1&i&&t._UZ(0,"tr",60)}function Ep(i,a){1&i&&t._UZ(0,"tr",61)}let Op=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.displayedColumns=["payrollGroupID","payrollGroupName_EN","payrollGroupName_AR","companyID","siteID","projectId","businessUnitID","divisionID","branchID","countryID","startPayRollDate","isForFutureEmployee","isForAllEmployee","currentPayRollMonth","endPayRollDate","currentPayRollYear","remarks","Actions"],this.searchValue="",this.sortingOrder="payrollGroupID desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PayRollGroup/getPayRollGroupsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,setTimeout(()=>this.data.sort=this.sort,2e3),this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,Bc);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_PayrollGroup","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_PayrollGroup","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PayRollGroup",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-payroll-group"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:96,vars:25,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-6","col-lg-6"],[1,"card-title","pt6"],[1,"col-md-6","col-lg-6","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","payrollGroupID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","payrollGroupName_EN"],["matColumnDef","payrollGroupName_AR"],["matColumnDef","companyID"],["matColumnDef","siteID"],["matColumnDef","projectId"],["matColumnDef","businessUnitID"],["matColumnDef","divisionID"],["matColumnDef","branchID"],["matColumnDef","countryID"],["matColumnDef","startPayRollDate"],["matColumnDef","isForFutureEmployee"],["matColumnDef","isForAllEmployee"],["matColumnDef","currentPayRollMonth"],["matColumnDef","endPayRollDate"],["matColumnDef","currentPayRollYear"],["matColumnDef","remarks"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],[1,"icon-trash"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"h4",14),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t.TgZ(29,"a",16),t.NdJ("click",function(){return o.create()}),t._UZ(30,"i",17),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(33,"div",18),t.TgZ(34,"div",19),t.TgZ(35,"div",20),t.ynx(36),t.TgZ(37,"table",21),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(38,22),t.YNc(39,Hc,3,3,"th",23),t.YNc(40,$c,2,1,"td",24),t.BQk(),t.ynx(41,25),t.YNc(42,Vc,3,3,"th",23),t.YNc(43,Gc,2,1,"td",24),t.BQk(),t.ynx(44,26),t.YNc(45,Wc,3,3,"th",23),t.YNc(46,zc,2,1,"td",24),t.BQk(),t.ynx(47,27),t.YNc(48,Xc,3,3,"th",23),t.YNc(49,Kc,2,1,"td",24),t.BQk(),t.ynx(50,28),t.YNc(51,tp,3,3,"th",23),t.YNc(52,ep,2,1,"td",24),t.BQk(),t.ynx(53,29),t.YNc(54,op,3,3,"th",23),t.YNc(55,ip,2,1,"td",24),t.BQk(),t.ynx(56,30),t.YNc(57,np,3,3,"th",23),t.YNc(58,ap,2,1,"td",24),t.BQk(),t.ynx(59,31),t.YNc(60,sp,3,3,"th",23),t.YNc(61,rp,2,1,"td",24),t.BQk(),t.ynx(62,32),t.YNc(63,lp,3,3,"th",23),t.YNc(64,cp,2,1,"td",24),t.BQk(),t.ynx(65,33),t.YNc(66,pp,3,3,"th",23),t.YNc(67,up,2,1,"td",24),t.BQk(),t.ynx(68,34),t.YNc(69,dp,3,3,"th",23),t.YNc(70,_p,2,1,"td",24),t.BQk(),t.ynx(71,35),t.YNc(72,mp,3,3,"th",23),t.YNc(73,Zp,4,2,"td",24),t.BQk(),t.ynx(74,36),t.YNc(75,fp,3,3,"th",23),t.YNc(76,Tp,4,2,"td",24),t.BQk(),t.ynx(77,37),t.YNc(78,vp,3,3,"th",23),t.YNc(79,xp,2,1,"td",24),t.BQk(),t.ynx(80,38),t.YNc(81,qp,3,3,"th",23),t.YNc(82,bp,2,1,"td",24),t.BQk(),t.ynx(83,39),t.YNc(84,yp,3,3,"th",23),t.YNc(85,Sp,2,1,"td",24),t.BQk(),t.ynx(86,40),t.YNc(87,wp,3,3,"th",23),t.YNc(88,Up,2,1,"td",24),t.BQk(),t.ynx(89,41),t.YNc(90,Dp,3,3,"th",42),t.YNc(91,Lp,13,6,"td",24),t.BQk(),t.YNc(92,Np,1,0,"tr",43),t.YNc(93,Ep,1,0,"tr",44),t.qZA(),t.ynx(94),t.TgZ(95,"mat-paginator",45),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,13,"PayrollGroups")," "),t.xp6(6),t.hij(" ",t.lcZ(11,15,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,17,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,19,"PayrollGroups")),t.xp6(10),t.hij("",t.lcZ(27,21,"PayrollGroups_List")," "),t.xp6(5),t.hij("",t.lcZ(32,23,"Add_New_PayrollGroup")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(55),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function kp(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td",12),t._uU(4),t.qZA(),t.TgZ(5,"td",12),t._uU(6),t.qZA(),t.TgZ(7,"td",12),t._uU(8),t.qZA(),t.TgZ(9,"td",12),t._uU(10),t.qZA(),t.TgZ(11,"td",12),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",12),t._uU(15),t.qZA(),t.TgZ(16,"td",12),t._uU(17),t.qZA(),t.TgZ(18,"td",12),t._uU(19),t.ALo(20,"number"),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.enquiryID),t.xp6(2),t.Oqu(e.siteCode),t.xp6(2),t.Oqu(e.serviceCode),t.xp6(2),t.Oqu(e.unitCode),t.xp6(2),t.Oqu(t.xi3(13,9,e.pricePerUnit,"3.2-5")),t.xp6(3),t.Oqu(e.unitQuantity),t.xp6(2),t.Oqu(e.serviceQuantity),t.xp6(2),t.Oqu(t.xi3(20,12,e.estimatedPrice,"3.2-5"))}}let to=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.route=h,this.oprService=A,this.dialogRef=C,this.displayedColumns=["enquiryID","siteCode","serviceCode","unitCode","pricePerUnit","serviceQuantity","estimatedPrice"],this.searchValue="",this.sortingOrder="enquiryID desc",this.isLoading=!1,this.enquiries=[]}ngOnInit(){this.LoadEnquiries(),this.LoadFormHeaderData()}refresh(){this.searchValue=""}LoadFormHeaderData(){this.isLoading=!0,this.apiService.getall("ServiceEnquiryForm/getEnquiryFormByEnquiryNumber/"+this.enquiryNumber).subscribe(e=>{this.customerCode=e.customerCode,this.dateOfEnquiry=e.dateOfEnquiry,this.estimateClosingDate=e.estimateClosingDate,this.custAddress=e.custAddress,this.saleRep=e.saleRep,this.userName=e.userName,this.remarks=e.remarks,this.totalEstPrice=e.totalEstPrice,""!=this.customerCode&&(this.isLoading=!0,this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+e.customerCode).subscribe(o=>{null!=o?(this.custAddress=o.custAddress1,this.saleRep=o.custSalesRep,this.isLoading=!1):(this.custAddress="",this.saleRep="",this.isLoading=!1)})),this.isLoading=!1},e=>this.utilService.ShowApiErrorMessage(e))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Enquiry","Add",It)}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Enquiry","Update",It)}addSuveyorToEnquiry(e){this.openDialogManage(e,g.Oi.create,"Adding_Surveyor_To_Enquiry","Save",ve)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceEnquiries",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}cahngeEnquiryStatus(e,o){this.apiService.post("ServiceEnquiries/changeEnquiryStatus?enquiryID="+e+"&statusEnquiry="+o,null).subscribe(n=>{this.utilService.OkMessage(),this.ngOnInit()},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}printComponent(e){const o=document.getElementById(e),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}goBack(){window.history.back()}closeModel(){this.dialogRef.close()}printEnquiryForm(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}LoadEnquiries(){this.isLoading=!0,this.apiService.getall(`ServiceEnquiries/getSevriceEnquiriesByEnquiryNumber/${this.enquiryNumber}`).subscribe(e=>{this.enquiries=e},e=>this.utilService.ShowApiErrorMessage(e)),this.isLoading=!1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(D.gz),t.Y36(W),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-print-enquiries-by-enquiry-number"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:96,vars:70,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","1050px","padding-top","5px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],[2,"padding-bottom","5px","padding-top","5px"],["width","5%",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngFor","ngForOf"],[2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printEnquiryForm()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"h4",4),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"table",5),t.TgZ(14,"tr"),t.TgZ(15,"th",6),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"td",7),t._uU(19),t.qZA(),t.TgZ(20,"th",6),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"td",7),t._uU(24),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"th",6),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td",7),t._uU(30),t.qZA(),t.TgZ(31,"th",6),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"td",7),t._uU(35),t.qZA(),t.qZA(),t.TgZ(36,"tr"),t.TgZ(37,"th",6),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"td",7),t._uU(41),t.qZA(),t.TgZ(42,"th",6),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"td",7),t._uU(46),t.qZA(),t.qZA(),t.TgZ(47,"tr"),t.TgZ(48,"th",6),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"td",7),t._uU(52),t.qZA(),t.TgZ(53,"th",6),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"td",7),t._uU(57),t.qZA(),t.qZA(),t.TgZ(58,"tr"),t.TgZ(59,"th",6),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"td",7),t._uU(63),t.ALo(64,"number"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"div",8),t.TgZ(66,"table",5),t.TgZ(67,"tr"),t.TgZ(68,"th",9),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"th",10),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"th",10),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th",10),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"th",10),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"th",10),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"th",10),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"th",10),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"th",10),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.qZA(),t.YNc(95,kp,21,15,"tr",11),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(11),t.hij(" ",t.lcZ(12,29,"Survices_Enquiry_Form")," "),t.xp6(5),t.Oqu(t.lcZ(17,31,"Enquiry_Number")),t.xp6(3),t.hij(" ",o.enquiryNumber,""),t.xp6(2),t.Oqu(t.lcZ(22,33,"Customer_Code")),t.xp6(3),t.Oqu(o.customerCode),t.xp6(3),t.Oqu(t.lcZ(28,35,"Date_of_Enquiry")),t.xp6(3),t.Oqu(o.dateOfEnquiry),t.xp6(2),t.Oqu(t.lcZ(33,37,"Estimate_Closing_Date")),t.xp6(3),t.Oqu(o.estimateClosingDate),t.xp6(3),t.Oqu(t.lcZ(39,39,"Customer_Address")),t.xp6(3),t.Oqu(o.custAddress),t.xp6(2),t.Oqu(t.lcZ(44,41,"Sales_Representative")),t.xp6(3),t.Oqu(o.saleRep),t.xp6(3),t.Oqu(t.lcZ(50,43,"User_Name")),t.xp6(3),t.Oqu(o.userName),t.xp6(2),t.Oqu(t.lcZ(55,45,"Remarks")),t.xp6(3),t.Oqu(o.remarks),t.xp6(3),t.Oqu(t.lcZ(61,47,"Total_Price")),t.xp6(3),t.Oqu(t.xi3(64,49,o.totalEstPrice,"3.2-5")),t.xp6(6),t.hij(" ",t.lcZ(70,52,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(73,54,"Enquiry_ID")," "),t.xp6(3),t.hij(" ",t.lcZ(76,56,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(79,58,"Service_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(82,60,"Unit_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(85,62,"Price_Per_Unit")," "),t.xp6(3),t.hij(" ",t.lcZ(88,64,"Unit_Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(91,66,"Service_Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(94,68,"Estimated_Price")," "),t.xp6(2),t.Q6J("ngForOf",o.enquiries))},directives:[Z.sg],pipes:[f.X$,Z.JJ],encapsulation:2}),i})();function jp(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",17),t._uU(2),t.qZA(),t.TgZ(3,"td",17),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.TgZ(7,"td",17),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.hij("",e.elementEngName," "),t.xp6(2),t.Oqu(e.elementArbName),t.xp6(2),t.Oqu(e.entryValue)}}let Ee=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.route=h,this.dialogRef=A,this.isLoading=!1,this.surveyFormElements=[],this.elementOptions=[],this.surveyFormDataEntries=[],this.showElements=!0}ngOnInit(){this.enquiryID=this.inputData.enquiryID,this.enquiryNumber=this.inputData.enquiryNumber,this.loadData()}loadData(){this.isLoading=!0,this.apiService.get("SurveyFormData/getSurveyFormDataByEnquiryId",this.enquiryID).subscribe(e=>{this.customer=e.customer,this.enquiryHeader=e.enquiryHeader,this.site=e.site,this.surveyFormHeader=e.surveyFormHeader,this.surveyFormElements=e.surveyFormElements,this.surveyor=e.surveyor,this.service=e.service,this.enquiry=e.enquiry,this.surveyFormDataEntries=e.surveyFormDataEntries,this.surveyor=e.surveyor,this.service=e.service},e=>this.utilService.ShowApiErrorMessage(e)),this.isLoading=!1}printComponent(e){const o=document.getElementById(e),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}goBack(){window.history.back()}printSurveyForm(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}printInvoice(){this.openPrint()}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(D.gz),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-print-survey-form"]],features:[t.qOj],decls:93,vars:60,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"font-size","1rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["rowspan","2",2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","400"],[2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],["width","5%",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","75%",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","20%",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngFor","ngForOf"],[2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printSurveyForm()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"h4",4),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"h4",5),t._uU(14),t.qZA(),t.TgZ(15,"table",6),t.TgZ(16,"tr"),t.TgZ(17,"th",7),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"td",8),t._uU(21),t.qZA(),t.TgZ(22,"th",7),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"td",8),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"tr"),t.TgZ(28,"th",7),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"td",8),t._uU(32),t.qZA(),t.TgZ(33,"th",7),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"td",8),t._uU(37),t.qZA(),t.qZA(),t.TgZ(38,"tr"),t.TgZ(39,"th",9),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"td",8),t._uU(43),t.qZA(),t.TgZ(44,"th",7),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"td",8),t._uU(48),t.qZA(),t.qZA(),t.TgZ(49,"tr"),t.TgZ(50,"td",8),t._uU(51),t.qZA(),t.TgZ(52,"th",7),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"td",8),t._uU(56),t.qZA(),t.qZA(),t.TgZ(57,"tr"),t.TgZ(58,"th",9),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"td",8),t._uU(62),t.qZA(),t.TgZ(63,"th",7),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"td",8),t._uU(67),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t.TgZ(69,"td",8),t._uU(70),t.qZA(),t.TgZ(71,"th",7),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"td",8),t._uU(75),t.qZA(),t.qZA(),t.TgZ(76,"tr"),t.TgZ(77,"th",7),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"td",10),t._uU(81),t.qZA(),t.qZA(),t.qZA(),t.TgZ(82,"div",11),t.TgZ(83,"table",12),t.TgZ(84,"tr"),t.TgZ(85,"th",13),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"th",14),t._uU(89),t.ALo(90,"translate"),t.qZA(),t._UZ(91,"th",15),t.qZA(),t.YNc(92,jp,9,4,"tr",16),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(11),t.hij(" ",t.lcZ(12,32,"Survey_Form"),": "),t.xp6(3),t.AsE(" ",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameArb,"(",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameEng,") "),t.xp6(4),t.Oqu(t.lcZ(19,34,"Enquiry_ID")),t.xp6(3),t.Oqu(o.inputData.enquiryID),t.xp6(2),t.Oqu(t.lcZ(24,36,"Enquiry_Number")),t.xp6(3),t.Oqu(o.inputData.enquiryNumber),t.xp6(3),t.Oqu(t.lcZ(30,38,"Service_Code")),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceCode),t.xp6(2),t.Oqu(t.lcZ(35,40,"Customer")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custCode),t.xp6(3),t.Oqu(t.lcZ(41,42,"Service_Name")),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceNameEng),t.xp6(2),t.Oqu(t.lcZ(46,44,"Name")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custName),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceNameArb),t.xp6(2),t.Oqu(t.lcZ(54,46,"Mobile")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custMobile1),t.xp6(3),t.Oqu(t.lcZ(60,48,"Site_Name")),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteName),t.xp6(2),t.Oqu(t.lcZ(65,50,"Address")),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteAddress),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteArbName),t.xp6(2),t.Oqu(t.lcZ(73,52,"City")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custCityCode1),t.xp6(3),t.Oqu(t.lcZ(79,54,"Geo_Location")),t.xp6(3),t.lnq("",null==o.site?null:o.site.siteGeoLatitude,"/",null==o.site?null:o.site.siteGeoLongitude,"/",null==o.site?null:o.site.siteGeoGain,""),t.xp6(5),t.hij(" ",t.lcZ(87,56,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(90,58,"Form_Attribute")," "),t.xp6(3),t.Q6J("ngForOf",o.surveyFormDataEntries))},directives:[Z.sg],pipes:[f.X$],encapsulation:2}),i})();function Mp(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function Rp(i,a){if(1&i&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function Pp(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.customerCode)}}function Fp(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Ip(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Yp(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.projectCode)}}function Jp(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Qp(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Bp(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function Hp(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function $p(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArabic?null==e?null:e.textTwo:null==e?null:e.text)}}function Vp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",36),t.TgZ(14,"span",37),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).edit(s)}),t._UZ(15,"i",47),t._uU(16,"\xa0"),t.qZA(),t.TgZ(17,"span",37),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).delete(s)}),t._UZ(18,"i",48),t._uU(19,"\xa0"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(o.getSkillSet(null==e?null:e.skillsetCode).text),t.xp6(2),t.Oqu(null==e?null:e.qty),t.xp6(2),t.Oqu(o.ToDateString(null==e?null:e.fromDate)),t.xp6(2),t.Oqu(o.ToDateString(null==e?null:e.toDate)),t.xp6(2),t.Oqu(null==e?null:e.pricePerUnit),t.xp6(2),t.Oqu((null==e?null:e.pricePerUnit)*(null==e?null:e.qty)),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(3),t.Q6J("matTooltip",o.translateToolTip("Delete"))}}function Gp(i,a){if(1&i&&(t.TgZ(0,"div",25),t.TgZ(1,"div",26),t.TgZ(2,"div",27),t.TgZ(3,"table",28),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.YNc(26,Vp,20,8,"tr",46),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(6),t.hij(" ",t.lcZ(7,8,"Skillset")," "),t.xp6(3),t.hij(" ",t.lcZ(10,10,"Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(13,12,"From_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(16,14,"To_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(19,16,"Price_Per_Unit")," "),t.xp6(3),t.hij(" ",t.lcZ(22,18,"Total_Price")," "),t.xp6(3),t.hij(" ",t.lcZ(25,20,"Action")," "),t.xp6(2),t.Q6J("ngForOf",e.resourceList)}}function Wp(i,a){1&i&&(t.TgZ(0,"span"),t._UZ(1,"input",49),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.s9C("value",t.lcZ(2,1,"Save")))}const ee=function(){return{standalone:!0}};let Ht=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u){super(r),this.notifyService=e,this.datepipe=o,this.translate=n,this.fb=s,this.authService=r,this.utilService=c,this.apiService=p,this.dialogRef=u,this.resourceList=[],this.editResource={id:"",skillsetCode:"",qty:"",pricePerUnit:"",toDate:"",fromDate:""},this.emptyResource={id:"",skillsetCode:"",qty:"",pricePerUnit:"",toDate:"",fromDate:""},this.readonly="",this.siteCodeList=[],this.skillSetsList=[],this.customerCode="",this.isDataLoading=!1,this.custCodeControl=new l.NI("",l.kI.required),this.isArabic=!1,this.isUpdating=!1,this.projectsList=[],this.isFromProjectsAction=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(this.customerCode),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(d=>(""!==d.trim()&&(this.isDataLoading=!0),this.filterCustCodes(d||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.loadSkillSetsList(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],projectCode:["",l.kI.required],siteCode:["",l.kI.required],id:[this.id],resourceList:[this.resourceList]}),this.isFromProjectsAction&&(this.custCodeControl.setValue(this.projectData.customerCode),this.form.controls.siteCode.setValue(this.projectData.siteCode),this.form.controls.projectCode.setValue(this.projectData.projectCode),this.form.controls.customerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode),this.onSelectionSiteCode())}loadSkillSetsList(){this.apiService.getall("Skillset/GetSelectSkillsetList/").subscribe(e=>{this.skillSetsList=e})}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){let r=this.custCodeControl.value;this.form.controls.customerCode.setValue(r),this.loadProjectsList(r)}else this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""),this.projectsList=[]}),this.form.controls.projectCode.setValue(""),this.form.controls.siteCode.setValue(""),this.siteCodeList=[],this.resourceList=[]}onSelectionProjectCode(){this.loadSiteCodes(this.form.controls.projectCode.value),this.form.controls.siteCode.setValue(""),this.resourceList=[]}getProjectData(){""!=this.form.controls.siteCode.value&&(this.isDataLoading=!0,this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectData=e}),this.isDataLoading=!1)}loadSiteCodes(e){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(o=>{this.siteCodeList=o}),this.isDataLoading=!1}loadProjectsList(e){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(o=>{this.projectsList=o}),this.isDataLoading=!1}editForm(){this.apiService.get("PvAddResource/getPvAddResourceReqById",this.id).subscribe(e=>{null!=e&&(this.requestData=e,this.resourceList=e.resourceList,this.custCodeControl.setValue(e.customerCode),this.form.controls.projectCode.setValue(e.projectCode),this.form.controls.customerCode.setValue(e.customerCode),this.form.controls.siteCode.setValue(e.siteCode),this.getProjectData(),this.form.controls.resourceList.setValue(e.resourceList),this.loadProjectsList(e.customerCode),this.loadSiteCodes(e.projectCode),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.resourceList.length>0&&(this.resourceList.forEach(e=>{let o=new Date(e.fromDate);o.setMinutes(o.getMinutes()-o.getTimezoneOffset()),e.fromDate=o;let n=new Date(e.toDate);n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),e.toDate=n}),this.form.controls.resourceList.setValue(this.resourceList)),this.form.valid&&this.resourceList.length>0?(this.isUpdating=!0,this.apiService.post("PvAddResource",this.form.value).subscribe(e=>{this.isUpdating=!1,e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e),this.isUpdating=!1})):this.utilService.FillUpFields())}onSelectionSiteCode(){this.getProjectData(),this.resourceList=[],this.editResource.fromDate=""}edit(e){this.editResource=this.resourceList[e],0==this.resourceList[e].id&&(this.editResource.id=-1),document.getElementById("inputEntry").scrollIntoView()}delete(e){this.resourceList.splice(e,1)}translateToolTip(e){return this.translate.instant(e)}openDatePicker(e){e.open()}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}addUpdate(){""!=this.editResource.skillsetCode&&this.editResource.qty*this.editResource.pricePerUnit>0&&""!=this.editResource.fromDate&&""!=this.editResource.toDate&&new Date(this.editResource.fromDate)<new Date(this.editResource.toDate)&&((0==this.editResource.id||""==this.editResource.id)&&(this.editResource.id=0,this.resourceList.push(this.editResource)),this.editResource={id:"",skillsetCode:"",qty:"",pricePerUnit:"",toDate:"",fromDate:""})}getSkillSet(e){let o=this.skillSetsList.find(n=>n.value==e);return this.isArabic&&(o.text=o.textTwo),o}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w.g),t.Y36(Z.uU),t.Y36(f.sK),t.Y36(l.qu),t.Y36(v._),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-add-resource"]],features:[t.qOj],decls:129,vars:114,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto3","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","projectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],[1,"col-md-12","col-lg-12",2,"padding-top","5px"],[1,"row","mt-2"],[1,"table-responsive"],[1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"form-control","datapickerinput",3,"ngModel","ngModelOptions","matDatepicker","placeholder","min","max","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],[1,"clickaction","clickicons"],[3,"matTooltip","click"],[1,"fas","fa-plus-circle"],["class","col-md-12 col-lg-12","style","padding-top:5px",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],[4,"ngFor","ngForOf"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,Mp,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"auto-loader",15),t._UZ(22,"input",16),t.ALo(23,"translate"),t.ALo(24,"translate"),t.TgZ(25,"mat-autocomplete",17,18),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1)}),t.YNc(27,Rp,2,2,"mat-option",19),t.ALo(28,"async"),t.qZA(),t.qZA(),t.YNc(29,Pp,2,1,"span",20),t.YNc(30,Fp,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(31,"div",11),t.TgZ(32,"label",12),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",13),t.TgZ(36,"div",14),t.TgZ(37,"select",21),t.NdJ("change",function(){return o.onSelectionProjectCode()}),t.TgZ(38,"option",22),t._uU(39),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.YNc(42,Ip,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(43,Yp,2,1,"span",20),t.YNc(44,Jp,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(45,"div",11),t.TgZ(46,"label",12),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",13),t.TgZ(50,"div",14),t.TgZ(51,"select",24),t.NdJ("change",function(){return o.onSelectionSiteCode()}),t.TgZ(52,"option",22),t._uU(53),t.ALo(54,"translate"),t.ALo(55,"translate"),t.qZA(),t.YNc(56,Qp,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(57,Bp,2,1,"span",20),t.YNc(58,Hp,3,3,"span",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",25),t.TgZ(60,"div",26),t.TgZ(61,"div",27),t.TgZ(62,"table",28),t.TgZ(63,"tr"),t.TgZ(64,"th"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"th"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"th"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"th"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"th"),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"th"),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"th"),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.qZA(),t.TgZ(85,"tr"),t.TgZ(86,"td"),t.TgZ(87,"select",29),t.NdJ("ngModelChange",function(r){return o.editResource.skillsetCode=r}),t.TgZ(88,"option",22),t._uU(89),t.ALo(90,"translate"),t.ALo(91,"translate"),t.qZA(),t.YNc(92,$p,2,2,"option",23),t.qZA(),t.qZA(),t.TgZ(93,"td"),t.TgZ(94,"input",30),t.NdJ("ngModelChange",function(r){return o.editResource.qty=r}),t.qZA(),t.qZA(),t.TgZ(95,"td"),t.TgZ(96,"div",14),t.TgZ(97,"input",31),t.NdJ("ngModelChange",function(r){return o.editResource.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(103);return o.openDatePicker(r)}),t.ALo(98,"translate"),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"div",32),t._UZ(101,"mat-datepicker-toggle",33),t._UZ(102,"mat-datepicker",null,34),t.qZA(),t.qZA(),t.qZA(),t.TgZ(104,"td"),t.TgZ(105,"div",14),t.TgZ(106,"input",31),t.NdJ("ngModelChange",function(r){return o.editResource.toDate=r})("click",function(){t.CHM(n);const r=t.MAs(112);return o.openDatePicker(r)}),t.ALo(107,"translate"),t.ALo(108,"translate"),t.qZA(),t.TgZ(109,"div",32),t._UZ(110,"mat-datepicker-toggle",33),t._UZ(111,"mat-datepicker",null,35),t.qZA(),t.qZA(),t.qZA(),t.TgZ(113,"td"),t.TgZ(114,"input",30),t.NdJ("ngModelChange",function(r){return o.editResource.pricePerUnit=r}),t.qZA(),t.qZA(),t.TgZ(115,"td"),t._uU(116),t.qZA(),t.TgZ(117,"td",36),t.TgZ(118,"span",37),t.NdJ("click",function(){return o.addUpdate()}),t._UZ(119,"i",38),t._uU(120,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(121,Gp,27,22,"div",39),t.qZA(),t.qZA(),t.TgZ(122,"div",7),t.TgZ(123,"div",8),t.TgZ(124,"div",40),t.TgZ(125,"input",41),t.NdJ("click",function(){return o.closeModel()}),t.ALo(126,"translate"),t.qZA(),t._uU(127," \xa0 "),t.YNc(128,Wp,3,3,"span",4),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(26),r=t.MAs(103),c=t.MAs(112);let p,u,d,_,h,A;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(10),t.Oqu(t.lcZ(18,61,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(23,63,"Please_Enter")," ",t.lcZ(24,65,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(28,67,o.filteredCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(p=o.form.get("customerCode"))&&p.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(u=o.form.get("customerCode"))?null:u.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(34,69,"Project")),t.xp6(6),t.AsE("",t.lcZ(40,71,"Select")," ",t.lcZ(41,73,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.projectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(d=o.form.get("projectCode"))&&d.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(_=o.form.get("projectCode"))?null:_.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(48,75,"Site")),t.xp6(6),t.AsE("",t.lcZ(54,77,"Select")," ",t.lcZ(55,79,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(h=o.form.get("siteCode"))&&h.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(A=o.form.get("siteCode"))?null:A.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(7),t.hij(" ",t.lcZ(66,81,"Skillset")," "),t.xp6(3),t.hij(" ",t.lcZ(69,83,"Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(72,85,"From_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(75,87,"To_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(78,89,"Price_Per_Unit")," "),t.xp6(3),t.hij(" ",t.lcZ(81,91,"Total_Price")," "),t.xp6(3),t.hij(" ",t.lcZ(84,93,"Action")," "),t.xp6(4),t.Q6J("ngModel",o.editResource.skillsetCode)("ngModelOptions",t.DdM(109,ee)),t.xp6(2),t.AsE("",t.lcZ(90,95,"Select")," ",t.lcZ(91,97,"Skillset_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.skillSetsList),t.xp6(2),t.Q6J("ngModel",o.editResource.qty)("ngModelOptions",t.DdM(110,ee)),t.xp6(3),t.hYB("placeholder","",t.lcZ(98,99,"Please_Enter")," ",t.lcZ(99,101,"Project_End_Date"),""),t.Q6J("ngModel",o.editResource.fromDate)("ngModelOptions",t.DdM(111,ee))("matDatepicker",r)("min",null==o.projectData?null:o.projectData.startDate)("max",null==o.projectData?null:o.projectData.endDate),t.xp6(4),t.Q6J("for",r),t.xp6(5),t.hYB("placeholder","",t.lcZ(107,103,"Please_Enter")," ",t.lcZ(108,105,"Project_End_Date"),""),t.Q6J("ngModel",o.editResource.toDate)("ngModelOptions",t.DdM(112,ee))("matDatepicker",c)("min",null==o.projectData?null:o.projectData.startDate)("max",null==o.projectData?null:o.projectData.endDate),t.xp6(4),t.Q6J("for",c),t.xp6(4),t.Q6J("ngModel",o.editResource.pricePerUnit)("ngModelOptions",t.DdM(113,ee)),t.xp6(2),t.Oqu(o.editResource.qty*o.editResource.pricePerUnit),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Add")),t.xp6(3),t.Q6J("ngIf",0!=o.resourceList.length),t.xp6(4),t.s9C("value",t.lcZ(126,107,"Cancel")),t.xp6(3),t.Q6J("ngIf",0!=o.resourceList.length&&"View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,Z.O5,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,l.EJ,l.u,l.YN,l.Kr,l.On,l.wV,j.hl,j.nW,ft.R9,j.Mq,ut.gM,Ut.ey,V.s],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function zp(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Leave_Type"),"\xa0 : ",e.leaveType," ")}}function Xp(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Transfered"),"?\xa0 "))}function Kp(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Resigned"),"?\xa0 "))}function tu(i,a){if(1&i&&(t.TgZ(0,"span"),t._UZ(1,"br"),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.AsE(" ",t.lcZ(3,2,"No.Of_Updates"),"\xa0 :",e.noOfUpdates," ")}}const eu=function(){return{standalone:!0}};function ou(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"label",8),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"textarea",9),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().remarks=n}),t.ALo(6,"translate"),t.ALo(7,"translate"),t._uU(8,"        \n"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"Project_Details")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,7,"Enter")," ",t.lcZ(7,9,"Remarks"),""),t.Q6J("ngModel",e.remarks)("ngModelOptions",t.DdM(11,eu))}}let xt=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d){super(p),this.translate=e,this.notifyService=o,this.utilService=n,this.dialog=s,this.apiService=r,this.dialogRef=c,this.authService=p,this.fb=u,this.oprService=d,this.confirmType="",this.leaveType="",this.remarks=""}ngOnInit(){this.setForm()}setForm(){this.form=this.fb.group({})}closeModel(e){"true"==e&&("transResign"==this.confirmType&&"TR"==this.leaveType&&""!=this.remarks||"transResign"==this.confirmType&&"R"==this.leaveType||"leave"==this.confirmType)?this.dialogRef.close({res:!0,remarks:this.remarks}):"true"==e&&"transResign"==this.confirmType&&"TR"==this.leaveType?this.notifyService.showError(this.translate.instant("Enter_Remarks")):this.dialogRef.close("true"==e&&"cancelLeave"==this.confirmType||"true"==e&&"postAttendance"==this.confirmType||"true"==e&&"general"==this.confirmType||"true"==e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.sK),t.Y36(w.g),t.Y36(b.t),t.Y36(T.uw),t.Y36(q.s),t.Y36(T.so),t.Y36(v._),t.Y36(l.qu),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-confirm-dialog-window"]],features:[t.qOj],decls:17,vars:15,consts:[["novalidate","",1,"mt-4",3,"formGroup"],[1,"col-md-12","col-lg-12","text-center"],[4,"ngIf"],["class","row",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-success","btn-midblock",3,"value","click"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-danger","btn-midblock",3,"value","click"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"mr-sm-2"],[1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t._uU(2),t.ALo(3,"translate"),t.YNc(4,zp,3,4,"span",2),t.YNc(5,Xp,3,3,"span",2),t.YNc(6,Kp,3,3,"span",2),t.YNc(7,tu,4,4,"span",2),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"div",1),t.YNc(10,ou,9,12,"div",3),t.TgZ(11,"input",4),t.NdJ("click",function(){return o.closeModel("true")}),t.ALo(12,"translate"),t.qZA(),t._uU(13," \xa0 "),t.TgZ(14,"input",5),t.NdJ("click",function(){return o.closeModel("false")}),t.ALo(15,"translate"),t.qZA(),t._uU(16," \xa0 "),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(2),t.hij(" ",t.lcZ(3,9,"Are_You_Sure?"),"\xa0 "),t.xp6(2),t.Q6J("ngIf","leave"==o.confirmType),t.xp6(1),t.Q6J("ngIf","transResign"==o.confirmType&&"TR"==o.leaveType),t.xp6(1),t.Q6J("ngIf","transResign"==o.confirmType&&"R"==o.leaveType),t.xp6(1),t.Q6J("ngIf","postAttendance"==o.confirmType),t.xp6(3),t.Q6J("ngIf","transResign"==o.confirmType&&"TR"==o.leaveType),t.xp6(1),t.s9C("value",t.lcZ(12,11,"Yes")),t.xp6(3),t.s9C("value",t.lcZ(15,13,"No")))},directives:[l._Y,l.JL,l.sg,Z.O5,l.Fj,l.JJ,l.On],pipes:[f.X$],encapsulation:2}),i})();function iu(i,a){1&i&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Action")," "))}function nu(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.employeeNumber," ")}}function au(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);let n;t.xp6(1),t.hij(" ",null==(n=o.getEmployee(null==e?null:e.employeeNumber))?null:n.text," ")}}function su(i,a){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(4);t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.text,"-",o.isArab?e.textAr:e.textTwo," ")}}function ru(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",17),t._UZ(1,"auto-loader",25),t._UZ(2,"input",26),t.ALo(3,"translate"),t.ALo(4,"translate"),t.TgZ(5,"mat-autocomplete",27,28),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw(3).autoSelectionEmployeeNumber(n)}),t.YNc(7,su,2,3,"mat-option",29),t.ALo(8,"async"),t.qZA(),t._UZ(9,"validation-message",30),t.qZA()}if(2&i){const e=t.MAs(6),o=t.oxw(3);t.xp6(1),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(3,7,"Enter")," ",t.lcZ(4,9,"Employee"),""),t.Q6J("formControl",o.empCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(8,11,o.filteredEmployeeNumbers)),t.xp6(2),t.Q6J("control",o.empCodeControl)}}function lu(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.defShift," ")}}function cu(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.shiftCode),t.xp6(1),t.Oqu(e.shiftCode)}}const eo=function(){return{standalone:!0}};function pu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"select",32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.defShift=n}),t.TgZ(2,"option",33),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,cu,2,2,"option",29),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.defShift)("ngModelOptions",t.DdM(6,eo)),t.xp6(2),t.Oqu(t.lcZ(4,4,"Select")),t.xp6(2),t.Q6J("ngForOf",o.shiftCodesForProjectSite)}}function uu(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.getOffDay(null==e?null:e.offDay)," ")}}function du(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"select",32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.offDay=n}),t.TgZ(2,"option",34),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"option",35),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"option",36),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"option",37),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"option",38),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"option",39),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"option",40),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"option",41),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",e.offDay)("ngModelOptions",t.DdM(26,eo)),t.xp6(2),t.Oqu(t.lcZ(4,10,"Select")),t.xp6(3),t.Oqu(t.lcZ(7,12,"Sunday")),t.xp6(3),t.Oqu(t.lcZ(10,14,"Monday")),t.xp6(3),t.Oqu(t.lcZ(13,16,"Tuesday")),t.xp6(3),t.Oqu(t.lcZ(16,18,"Wednesday")),t.xp6(3),t.Oqu(t.lcZ(19,20,"Thursday")),t.xp6(3),t.Oqu(t.lcZ(22,22,"Friday")),t.xp6(3),t.Oqu(t.lcZ(25,24,"Saturday"))}}function _u(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",42),t.TgZ(1,"i",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).editMap(n)}),t.qZA(),t.qZA()}}function mu(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,nu,2,1,"td",11),t.YNc(4,au,2,1,"td",11),t.YNc(5,ru,10,13,"td",23),t.YNc(6,lu,2,1,"td",11),t.YNc(7,pu,6,7,"td",11),t.YNc(8,uu,2,1,"td",11),t.YNc(9,du,26,27,"td",11),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.YNc(14,_u,2,0,"td",24),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.Oqu(n.getSkillSet(null==e?null:e.skillSet).text),t.xp6(1),t.Q6J("ngIf",n.editRow!=o),t.xp6(1),t.Q6J("ngIf",n.editRow!=o),t.xp6(1),t.Q6J("ngIf",n.editRow==o),t.xp6(1),t.Q6J("ngIf",n.editRow!=o),t.xp6(1),t.Q6J("ngIf",n.editRow==o),t.xp6(1),t.Q6J("ngIf",n.editRow!=o),t.xp6(1),t.Q6J("ngIf",n.editRow==o),t.xp6(2),t.Oqu(n.ToDateString(null==e?null:e.fromDate)),t.xp6(2),t.Oqu(n.ToDateString(null==e?null:e.toDate)),t.xp6(1),t.Q6J("ngIf","View"!=n.modalBtnTitle)}}function gu(i,a){if(1&i&&(t.TgZ(0,"div",12),t.TgZ(1,"div",13),t.TgZ(2,"table",14),t.TgZ(3,"tr",15),t.TgZ(4,"th",16),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",17),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",18),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",19),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.YNc(22,iu,3,3,"th",20),t.qZA(),t.YNc(23,mu,15,11,"tr",21),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,8,"Skillset")," "),t.xp6(3),t.hij(" ",t.lcZ(9,10,"Employee")," "),t.xp6(3),t.hij(" ",t.lcZ(12,12,"Default_Shift")," "),t.xp6(3),t.hij(" ",t.lcZ(15,14,"OffDay")," "),t.xp6(3),t.hij(" ",t.lcZ(18,16,"From_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(21,18,"To_Date")," "),t.xp6(2),t.Q6J("ngIf","View"!=e.modalBtnTitle),t.xp6(1),t.Q6J("ngForOf",e.mappingsList)}}function hu(i,a){1&i&&(t._UZ(0,"input",45),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}function Zu(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,hu,2,3,"input",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf","View"!=e.modalBtnTitle)}}let Jt=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u){super(r),this.notifyService=e,this.datepipe=o,this.translate=n,this.fb=s,this.authService=r,this.utilService=c,this.apiService=p,this.dialogRef=u,this.isDataLoading=!1,this.mappingsList=[],this.skillSetsList=[],this.isArabic=!1,this.editRow=-1,this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeesForProjectSite=[],this.employeeNumber="",this.offDay="-1",this.shiftCodesForProjectSite=[],this.isUpdating=!1,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,ot.O)(""),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(d=>(""!==d.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(d||""))))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.loadSkillSetsList(),this.apiService.get("PvAddResource/getPvAddResourceEmpToResMapsByReqIdById",this.id).subscribe(e=>{null!=e&&(this.mappingsList=e,this.loadEmployeesForProjectSite(),this.loadShiftCodesForProjectSite())})}setForm(){this.form=this.fb.group({})}submit(){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):this.mappingsList.findIndex(e=>""==e.employeeNumber||""==e.defShift)>=0?this.notifyService.showInfo(this.translate.instant("Empty EMployee_Number Or Shift Code")):(this.isUpdating=!0,this.apiService.post("PvAddResource/CreateUpdatePvAddResourceEmployeeToResourceMap",{mappingsList:this.mappingsList}).subscribe(e=>{this.isUpdating=!1,e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e),this.isUpdating=!1}))}closeModel(){this.dialogRef.close()}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}getSkillSet(e){let o=this.skillSetsList.find(n=>n.value==e);return this.isArabic&&(o.text=o.textTwo),o}loadSkillSetsList(){this.apiService.getall("Skillset/GetSelectSkillsetList/").subscribe(e=>{this.skillSetsList=e})}filterEmployeeNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.mappingsList[0].projectCode}/${this.mappingsList[0].siteCode}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}editMap(e){-1==this.editRow?(this.editRow=e,this.empCodeControl.setValue(this.mappingsList[this.editRow].employeeNumber)):this.editRow=-1}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.employeeList=e},e=>this.utilService.ShowApiErrorMessage(e))}loadEmployeesForProjectSite(){this.apiService.getall(`EmployeesToProjectSite/getEmployeesOfProjectSite/${this.mappingsList[0].projectCode}/${this.mappingsList[0].siteCode}`).subscribe(e=>{this.employeesForProjectSite=e,0==this.employeesForProjectSite.length&&this.notifyService.showError(this.translate.instant("Employees_Not_Assigned_To_Site"))},e=>this.utilService.ShowApiErrorMessage(e))}autoSelectionEmployeeNumber(e){this.mappingsList.findIndex(o=>o.employeeNumber==e.option.value.text)<0?(this.mappingsList[this.editRow].employeeID=e.option.value.value,this.mappingsList[this.editRow].employeeNumber=e.option.value.text,this.mappingsList[this.editRow].empName=e.option.value.textTwo,this.mappingsList[this.editRow].empNameAr=e.option.value.textAr,this.empCodeControl.setValue(e.option.value.text)):(this.empCodeControl.setValue(""),this.mappingsList[this.editRow].employeeNumber="")}canSave(){return this.mappingsList.findIndex(e=>""==e.employeeNumber)<0}getEmployee(e){if(""==e)return{text:""};let o=this.employeesForProjectSite.find(n=>n.employeeNumber==e);return o.text=this.isArabic?o.employeeNameAr:o.employeeName,o}getOffDay(e){switch(e.toString()){case"0":return this.isArabic?"SundayAr":"Sunday";case"1":return this.isArabic?"MondayAr":"Monday";case"2":return this.isArabic?"TuesdayAr":"Tuesday";case"3":return this.isArabic?"WednesdayAr":"Wednesday";case"4":return this.isArabic?"ThursdayAr":"Thursday";case"5":return this.isArabic?"FridayAr":"Friday";case"6":return this.isArabic?"SaturdayAr":"Saturday";default:return this.isArabic?"No Off Day Ar":"No Off Day"}}loadShiftCodesForProjectSite(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.mappingsList[0].projectCode}/${this.mappingsList[0].siteCode}`).subscribe(e=>{this.shiftCodesForProjectSite=e},e=>this.utilService.ShowApiErrorMessage(e))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w.g),t.Y36(Z.uU),t.Y36(f.sK),t.Y36(l.qu),t.Y36(v._),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-pv-emp-to-res-map"]],features:[t.qOj],decls:19,vars:7,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],["class","col-md-12 col-lg-12","style","padding-top:5px",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],[4,"ngIf"],[1,"col-md-12","col-lg-12",2,"padding-top","5px"],[1,"row","mt-2"],[1,"table","table-bordered","no-wrap"],["width","100%"],["width","10%"],["colspan","2"],["width","15%"],["width","20%"],["width","5%",4,"ngIf"],[4,"ngFor","ngForOf"],["width","5%"],["colspan","2",4,"ngIf"],["class","clickaction clickicons",4,"ngIf"],[3,"isLoading"],["type","text","matInput","",1,"form-control",2,"width","inherit",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto_emp","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],[3,"value"],[1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["value",""],["value","-1"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],[1,"clickaction","clickicons"],[1,"icon-note",3,"click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.YNc(11,gu,24,20,"div",8),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.TgZ(13,"div",7),t.TgZ(14,"div",9),t.TgZ(15,"input",10),t.NdJ("click",function(){return o.closeModel()}),t.ALo(16,"translate"),t.qZA(),t._uU(17," \xa0 "),t.YNc(18,Zu,2,1,"span",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(7),t.Q6J("ngIf",0!=o.mappingsList.length),t.xp6(4),t.s9C("value",t.lcZ(16,5,"Cancel")),t.xp6(3),t.Q6J("ngIf",0!=o.mappingsList.length))},directives:[l._Y,l.JL,l.sg,Z.O5,Z.sg,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,V.s,Ut.ey,l.EJ,l.On,l.YN,l.Kr],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function fu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploadFile()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Upload"))}let oe=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_}ngOnInit(){console.log(this.requestData),this.requestType="ProjectVariations"==this.requestData.requestType?this.requestData.requestSubType.replace("(","").replace(")",""):this.requestData.requestType}submit(){}closeModel(){this.dialogRef.close()}onFileChanged(e,o){let n=new FileReader;if(e.target.files&&e.target.files.length>0){let s=e.target.files[0];n.readAsDataURL(s),n.onload=()=>{1===o&&(this.requestData.fileIForm=s,this.requestData.fileName=n.result)}}}uploadFile(){const e=new FormData;e.append("id",this.requestData.requestNumber),e.append("requestType",this.requestData.requestType),e.append("requestSubType",this.requestData.requestSubType),e.append("fileIForm",this.requestData.fileIForm),e.append("fileName",this.authService.ApiEndPoint().replace("api","")+"Uploads/Adendums/"),null!=this.requestData.fileIForm?this.apiService.post("pvAllRequests/fileUpload",e).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)}):this.utilService.ShowApiErrorMessage(this.translate.instant("Select_File"))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-upload-adendum"]],features:[t.qOj],decls:44,vars:24,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"row",2,"text-align","center"],[1,"col-md-12","col-lg-12"],[1,"table","table-bordered","no-wrap"],[1,"col-md-8","col-lg-8"],[1,"form-group"],["accept",".pdf","type","file",3,"change"],[1,"col-md-4","col-lg-4","align-content-center"],["type","button","class","btn waves-effect waves- active btn-rounded   btn-primary btn-midblock",3,"value","click",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-","active","btn-rounded","btn-primary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"table",4),t.TgZ(9,"thead"),t.TgZ(10,"tr"),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"tbody"),t.TgZ(27,"tr"),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.qZA(),t.TgZ(32,"td"),t._uU(33),t.qZA(),t.TgZ(34,"td"),t._uU(35),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",5),t.TgZ(39,"div",6),t.TgZ(40,"input",7),t.NdJ("change",function(s){return o.onFileChanged(s,1)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",8),t.YNc(42,fu,2,3,"input",9),t._uU(43," \xa0 "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,12,"Uploading_Addendum")),t.xp6(11),t.hij(" ",t.lcZ(13,14,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(16,16,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(19,18,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(22,20,"Request_Type")," "),t.xp6(3),t.hij(" ",t.lcZ(25,22,"Request_Number")," "),t.xp6(5),t.hij(" ",o.requestData.customerCode," "),t.xp6(2),t.hij(" ",o.requestData.projectCode," "),t.xp6(2),t.hij(" ",o.requestData.siteCode," "),t.xp6(2),t.hij(" ",o.requestType," "),t.xp6(2),t.hij(" ",o.requestData.requestNumber," "),t.xp6(5),t.Q6J("ngIf",null!=(null==o.requestData?null:o.requestData.fileIForm)))},directives:[Z.O5],pipes:[f.X$],encapsulation:2}),i})();function Au(i,a){if(1&i&&(t.TgZ(0,"option",6),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text,"")}}function Cu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"select",3),t.NdJ("change",function(n){return t.CHM(e),t.oxw().OnTemplateSelection(n)}),t.TgZ(2,"option",4),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,Au,2,2,"option",5),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.AsE("",t.lcZ(4,3,"Select")," ",t.lcZ(5,5,"SelectTemplate")," "),t.xp6(3),t.Q6J("ngForOf",e.templatesSelectionList)}}function Tu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().createContractTemplate()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Create_Template")))}function vu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().editContractTemplate()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit_Template")))}function xu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().printInvoice()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Print")))}function qu(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",27),t._uU(2),t.qZA(),t.TgZ(3,"td",27),t._uU(4),t.qZA(),t.TgZ(5,"td",27),t._uU(6),t.qZA(),t.TgZ(7,"td",27),t._uU(8),t.qZA(),t.TgZ(9,"td",27),t._uU(10),t.qZA(),t.TgZ(11,"td",27),t._uU(12),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(8);t.xp6(2),t.Oqu(o.getSkillSet(null==e?null:e.skillsetCode).text),t.xp6(2),t.Oqu(null==e?null:e.qty),t.xp6(2),t.Oqu(o.ToDateString(null==e?null:e.fromDate)),t.xp6(2),t.Oqu(o.ToDateString(null==e?null:e.toDate)),t.xp6(2),t.Oqu(null==e?null:e.pricePerUnit),t.xp6(2),t.Oqu((null==e?null:e.pricePerUnit)*(null==e?null:e.qty))}}function bu(i,a){if(1&i&&(t.TgZ(0,"div",23),t.TgZ(1,"table",11),t.TgZ(2,"tr"),t.TgZ(3,"th",24),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",24),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",24),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",24),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",24),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",24),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.YNc(21,qu,13,6,"tr",20),t.TgZ(22,"tr"),t.TgZ(23,"th",25),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th",26),t._uU(27),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(7);t.xp6(4),t.hij(" ",t.lcZ(5,9,"Skillset")," "),t.xp6(3),t.hij(" ",t.lcZ(8,11,"Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(11,13,"From_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(14,15,"To_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(17,17,"Price_Per_Unit")," "),t.xp6(3),t.hij(" ",t.lcZ(20,19,"Total_Price")," "),t.xp6(2),t.Q6J("ngForOf",null==e.resourceCostings?null:e.resourceCostings.resourceList),t.xp6(3),t.hij(" ",t.lcZ(25,21,"Total")," "),t.xp6(3),t.hij(" ",null==e.resourceCostings?null:e.resourceCostings.totalCost," ")}}function yu(i,a){if(1&i&&(t.TgZ(0,"ng-contaier"),t.YNc(1,bu,28,23,"div",22),t.qZA()),2&i){const e=t.oxw(6);t.xp6(1),t.Q6J("ngIf",(null==e.resourceCostings?null:e.resourceCostings.resourceList.length)>0)}}function Su(i,a){if(1&i&&(t.TgZ(0,"div",23),t.TgZ(1,"table",11),t.TgZ(2,"tr"),t.TgZ(3,"th",24),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",24),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.TgZ(9,"tr"),t.TgZ(10,"td",27),t._uU(11),t.qZA(),t.TgZ(12,"td",27),t._uU(13),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(7);t.xp6(4),t.hij(" ",t.lcZ(5,4,"Skillset")," "),t.xp6(3),t.hij(" ",t.lcZ(8,6,"From_Date")," "),t.xp6(4),t.Oqu(e.isArabic?null==e.pvRequest?null:e.pvRequest.nameInArabic:null==e.pvRequest?null:e.pvRequest.nameInEnglish),t.xp6(2),t.Oqu(e.ToDateString(null==e.pvRequest?null:e.pvRequest.fromDate))}}function wu(i,a){if(1&i&&(t.TgZ(0,"ng-contaier"),t.YNc(1,Su,14,8,"div",22),t.qZA()),2&i){const e=t.oxw(6);t.xp6(1),t.Q6J("ngIf",null!=e.pvRequest)}}function Uu(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",21),t.YNc(3,yu,2,1,"ng-contaier",0),t.YNc(4,wu,2,1,"ng-contaier",0),t.qZA(),t.qZA(),t.BQk()),2&i){const e=t.oxw(5);t.xp6(3),t.Q6J("ngIf","ForAddingResources"==e.type),t.xp6(1),t.Q6J("ngIf","ForRemovingResources"==e.type)}}function Du(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",28),t.TgZ(2,"b"),t.TgZ(3,"u"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td",28),t.TgZ(6,"b"),t.TgZ(7,"u"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.clauseTitleEng),t.xp6(4),t.hij(" ",e.clauseTitleArb,"")}}function Lu(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",29),t.TgZ(2,"b"),t.TgZ(3,"u"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td",30),t.TgZ(6,"b"),t.TgZ(7,"u"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",e.clauseSubTitleEng,""),t.xp6(4),t.Oqu(e.clauseSubTitleArb)}}function Nu(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",31),t._uU(2),t.qZA(),t.TgZ(3,"td",31),t._uU(4),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.clauseDescriptionEng," "),t.xp6(2),t.hij(" ",e.clauseDescriptionArb," ")}}function Eu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Uu,5,2,"ng-container",0),t.YNc(2,Du,9,2,"tr",0),t.YNc(3,Lu,9,2,"tr",0),t.YNc(4,Nu,5,2,"tr",0),t.BQk()),2&i){const e=a.$implicit,o=a.index;t.xp6(1),t.Q6J("ngIf",2==o),t.xp6(1),t.Q6J("ngIf",null!=e.clauseTitleEng),t.xp6(1),t.Q6J("ngIf",null!=e.clauseSubTitleEng),t.xp6(1),t.Q6J("ngIf",null!=e.clauseDescriptionEng)}}function Ou(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Eu,5,4,"ng-container",20),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.contractFormData.contractClauses)}}function ku(i,a){if(1&i&&(t.TgZ(0,"div",9),t.TgZ(1,"div",10),t._UZ(2,"br"),t.TgZ(3,"table",11),t.TgZ(4,"tr"),t.TgZ(5,"td",12),t._uU(6),t.qZA(),t.TgZ(7,"td",13),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"tr"),t.TgZ(10,"td",14),t.TgZ(11,"b"),t.TgZ(12,"u"),t._uU(13,"Addendum of providing Security Guarding Services"),t._UZ(14,"br"),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"td",14),t.TgZ(17,"b"),t.TgZ(18,"u"),t._uU(19,"\u0645\u0644\u062d\u0642 \u062a\u0642\u062f\u064a\u0645 \u062e\u062f\u0645\u0627\u062a \u0627\u0644\u062d\u0631\u0627\u0633\u0629 \u0627\u0644\u0623\u0645\u0646\u064a\u0629"),t._UZ(20,"br"),t._uU(21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"tr"),t.TgZ(23,"td",15),t._uU(24),t.qZA(),t.TgZ(25,"td",15),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"tr"),t.TgZ(28,"td",16),t.TgZ(29,"u"),t._uU(30," (Referred to it from here on as first party)"),t.qZA(),t.qZA(),t.TgZ(31,"td",17),t.TgZ(32,"u"),t._uU(33,"(\u0648\u064a\u0634\u0627\u0631 \u0625\u0644\u064a\u0647\u0627 \u0641\u064a\u0645\u0627 \u0628\u0639\u062f \u0628\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u0623\u0648\u0644)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"tr"),t.TgZ(35,"td",15),t._uU(36),t.qZA(),t.TgZ(37,"td",15),t._uU(38),t.qZA(),t.qZA(),t.TgZ(39,"tr"),t.TgZ(40,"td",16),t.TgZ(41,"u"),t._uU(42," (Referred to it from here on as Second party)"),t.qZA(),t.qZA(),t.TgZ(43,"td",17),t.TgZ(44,"u"),t._uU(45,"( \u0648 \u064a\u0634\u0627\u0631 \u0625\u0644\u064a\u0647\u0627 \u0641\u064a\u0645\u0627 \u0628\u0639\u062f \u0628\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u062b\u0627\u0646\u064a)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"tr"),t.TgZ(47,"td",14),t.TgZ(48,"b"),t.TgZ(49,"u"),t._uU(50," Preamble"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"td",14),t.TgZ(52,"b"),t.TgZ(53,"u"),t._uU(54,"\u0627\u0644\u0628\u0646\u062f \u0627\u0644\u062a\u0645\u0647\u064a\u062f\u064a"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"tr"),t.TgZ(56,"td",15),t._uU(57),t.qZA(),t.TgZ(58,"td",15),t._uU(59),t.qZA(),t.qZA(),t.YNc(60,Ou,2,1,"ng-container",0),t.TgZ(61,"tr"),t.TgZ(62,"td",16),t.TgZ(63,"b"),t._uU(64," First party:"),t.qZA(),t.qZA(),t.TgZ(65,"td",17),t.TgZ(66,"b"),t._uU(67," :\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u0623\u0648"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t.TgZ(69,"td",18),t._uU(70),t.qZA(),t.TgZ(71,"td",19),t._uU(72),t.qZA(),t.qZA(),t._UZ(73,"br"),t.TgZ(74,"tr"),t.TgZ(75,"td",16),t.TgZ(76,"b"),t._uU(77," Second party:"),t.qZA(),t.qZA(),t.TgZ(78,"td",17),t.TgZ(79,"b"),t._uU(80," :\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u062b\u0627\u0646\u064a"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(81,"tr"),t.TgZ(82,"td",18),t._uU(83),t.qZA(),t.TgZ(84,"td",19),t._uU(85),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.hij(" (Reference No.",e.referenceNumber,") "),t.xp6(2),t.hij(" (",e.referenceNumber,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639) "),t.xp6(7),t.hij("(",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.titleOfServiceEng,")"),t.xp6(6),t.hij("(",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.titleOfServiceArb,")"),t.xp6(3),t.hij(" ",e.TranslateTaggedDataEng(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.companyDetailsEng)," "),t.xp6(2),t.hij(" ",e.TranslateTaggedDataArb(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.companyDetailsArb)," "),t.xp6(10),t.hij(" ",e.TranslateTaggedDataEng(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.customerDetailsEng)," "),t.xp6(2),t.hij(" ",e.TranslateTaggedDataArb(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.customerDetailsArb)," "),t.xp6(19),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.preambleEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.preambleArb," "),t.xp6(1),t.Q6J("ngIf",(null==e.contractFormData?null:e.contractFormData.contractClauses.length)>0),t.xp6(10),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.firstPartyEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.firstPartyArb," "),t.xp6(11),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.secondPartyEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.secondPartyArb," ")}}function ju(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ku,86,15,"div",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=(null==e.contractFormData?null:e.contractFormData.contractClauses.length)&&null!=e.contractFormData)}}let qe=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(u),this.datepipe=e,this.oprService=o,this.fb=n,this.http=s,this.router=r,this.apiService=c,this.dialog=p,this.authService=u,this.utilService=d,this.translate=_,this.notifyService=h,this.validationService=A,this.dialogRef=C,this.referenceNumber="000/0000",this.grandTotal=0,this.siteCodeSelectList=[],this.type="",this.templatesSelectionList=[],this.skillSetsList=[],this.contractFormData={contractClauses:[],contractFormHead:""},this.isArabic=!1,this.date=new Date}ngOnInit(){this.loadInitialData()}loadCosting(){switch(this.type){case"ForAddingResources":this.loadAddResourceCosting();break;case"ForRemovingResources":this.getSkillsetOfEmployee(this.pvRequest.employeeNumber)}}loadAddResourceCosting(){this.apiService.get("PvAddResource/getPvAddResourceReqById",this.pvRequest.id).subscribe(e=>{if(null!=e){e.totalCost=0;for(let o=0;o<(null==e?void 0:e.resourceList.length);o++)e.totalCost+=(null==e?void 0:e.resourceList[o].pricePerUnit)*(null==e?void 0:e.resourceList[o].qty);this.resourceCostings=e}})}loadSkillSetsList(){this.apiService.getall("Skillset/GetSelectSkillsetList/").subscribe(e=>{this.skillSetsList=e})}loadContractTemplates(){this.apiService.getall(`ContractFormTemplates/getSelectionContractFormTemplates/${this.type}`).subscribe(e=>{null!=e&&(this.templatesSelectionList=e)})}OnTemplateSelection(e){if(""!=e.target.value){let o=Number(e.target.value);this.apiService.get("ContractFormTemplates/getContractFormTemplateById",o).subscribe(n=>{if(null!=n){this.templateData=n;for(let r=0;r<n.clauses.length;r++)n.clauses[r].id=0;this.contractFormData.contractClauses=n.clauses.slice(),this.contractFormData.contractFormHead=n.templateHead,this.contractFormData.contractFormHead.id=this.contractFormData.contractFormHead.id}})}else this.templateData=null}submit(){}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.pvRequest.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}loadDefaultContractForm(){this.apiService.post("ContractForm/getContractForm",{projectCode:this.pvRequest.projectCode,siteCode:this.pvRequest.siteCode,customerCode:this.pvRequest.customerCode,isAdendum:!0}).subscribe(o=>{null!=o&&(this.contractFormData=o)})}loadCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.pvRequest.customerCode}`).subscribe(e=>{null!=e&&(this.customerData=e,console.log(e),this.apiService.getall(`Company/getCompanyByCityCode/${e.custCityCode1}`).subscribe(o=>{null!=o&&(this.companyData=o,console.log(o))}),this.getCity(e.custCityCode1))})}loadInitialData(){this.loadDefaultContractForm(),this.templateData=null,this.isArabic=this.utilService.isArabic(),this.loadSkillSetsList(),this.loadProjectData(),this.loadCustomerData(),this.loadContractTemplates(),this.loadCosting(),this.getReferenceNumber()}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o,console.log(o)})}printComponent(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}closeModel(){this.dialogRef.close(!0)}createContractTemplate(){let e=this.utilService.openCrudDialog(this.dialog,te);e.componentInstance.modalTitle="Create Template",e.componentInstance.modalBtnTitle="Add",e.componentInstance.contractTemplateData=this.contractFormData,e.componentInstance.id=0,e.componentInstance.type=this.type,e.afterClosed().subscribe(o=>{o&&!0===o&&this.loadInitialData()})}editContractTemplate(){let e=this.utilService.openCrudDialog(this.dialog,te);e.componentInstance.modalTitle="Update Template",e.componentInstance.modalBtnTitle="Update",e.componentInstance.contractTemplateData=this.templateData,e.componentInstance.id=this.templateData.templateId,e.componentInstance.type=this.type,e.afterClosed().subscribe(o=>{o&&!0===o&&this.loadInitialData()})}getReferenceNumber(){this.referenceNumber=this.pvRequest.projectCode+"/"+this.pvRequest.siteCode+"/"+("ForAddingResources"==this.type?"AR":"ForRemovingResources"==this.type?"RR":"XX")+"/"+this.pvRequest.id}TranslateTaggedDataEng(e){var o,n,s,r,c,p;let u="Second: "+this.customerData.custName+" Commercial Register "+this.referenceNumber+", Whose address -"+this.customerData.custAddress1+","+(null===(o=this.city)||void 0===o?void 0:o.cityName)+", Kingdom of Saudi Arabia, Phone: "+(null===(n=this.customerData)||void 0===n?void 0:n.custPhone1)+", email:"+this.customerData.custEmail1+" represented in signing this contract by "+this.customerData.custSalesRep+".",d=e.replace(/<<customer>>/gi,u),_="Thanks God alone and then: On "+this.referenceNumber+" - Corresponding to "+this.translate.instant(this.date.toLocaleDateString())+" A.D. Agreement in city of "+(null===(s=this.city)||void 0===s?void 0:s.cityName)+" between both: First: "+(null===(r=this.companyData)||void 0===r?void 0:r.companyName)+", address: "+(null===(c=this.companyData)||void 0===c?void 0:c.companyAddress)+", Kingdom of Saudi Arabia, Phone: "+(null===(p=this.companyData)||void 0===p?void 0:p.phone)+"  represented in signing this contract by Mohammed Abdullah Al Mansaky as being COO STS Group.";return d.replace(/<<company>>/gi,_)}TranslateTaggedDataArb(e){var o,n,s,r,c,p,u;let d="\u062b\u0627\u0646\u064a\u0627: - \u0634\u0631\u0643\u0629 "+this.customerData.custArbName+" \u0633\u062c\u0644 \u062a\u062c\u0627\u0631\u064a "+this.referenceNumber+",\u0639\u0646\u0648\u0627\u0646\u0647\u0627"+this.customerData.custAddress1+","+(null===(o=this.city)||void 0===o?void 0:o.cityNameAr)+", \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629 \u060c \u0627\u0644\u0647\u0627\u062a\u0641  "+(null===(n=this.customerData)||void 0===n?void 0:n.custPhone1)+", \u0627\u064a\u0645\u064a\u0644"+this.customerData.custEmail1+" \u0648\u064a\u0645\u062b\u0644\u0647\u0627 \u0641\u064a \u0627\u0644\u062a\u0648\u0642\u064a\u0639 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0639\u0642\u062f \u0627\u0644\u0623\u0633\u062a\u0627\u0630 "+(null===(s=this.customerData)||void 0===s?void 0:s.custSalesRep)+".",_=e.replace(/<<customer>>/gi,d),h="\u0627\u0647\u0640 \u0627\u0644\u0645\u0648\u0627\u0641\u0642 \u0644\u062d\u0645\u062f \u0644\u0644\u0647 \u0648\u062d\u062f\u0647 \u0648\u0628\u0639\u062f: - \u0641\u064a \u064a\u0648\u0645"+this.referenceNumber+"\u0645 \u062a\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642"+this.translate.instant(this.date.toLocaleDateString())+" A.D. \u0627\u062a\u0641\u0627\u0642\u064a\u0629 \u0641\u064a \u0645\u062f\u064a\u0646\u0629 "+(null===(r=this.city)||void 0===r?void 0:r.cityName)+"\u0628\u064a\u0646 \u0627\u0644\u0627\u062b\u0646\u064a\u0646: \u0623\u0648\u0644\u0627:"+(null===(c=this.companyData)||void 0===c?void 0:c.companyName)+", \u0639\u0646\u0648\u0627\u0646: "+(null===(p=this.companyData)||void 0===p?void 0:p.companyAddress)+", \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629\u060c \u0647\u0627\u062a\u0641: "+(null===(u=this.companyData)||void 0===u?void 0:u.phone)+"  \u0645\u0645\u062b\u0644\u0629 \u0641\u064a \u062a\u0648\u0642\u064a\u0639 \u0647\u0630\u0627 \u0627\u0644\u0639\u0642\u062f \u0645\u0646 \u0642\u0628\u0644 Mohammed Abdullah Al Mansaky \u0643\u0645\u0627 \u064a\u062c\u0631\u064a  COO STS Group.";return _.replace(/<<company>>/gi,h)}getSkillSet(e){let o=this.skillSetsList.find(n=>n.value==e);return this.isArabic&&(o.text=o.textTwo),o}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}getSkillsetOfEmployee(e){this.apiService.post("skillset/employeeSkillsetForMonth",{employeeNumber:e,projectCode:this.pvRequest.projectCode,siteCode:this.pvRequest.siteCode,date:this.pvRequest.fromDate}).subscribe(n=>{this.pvRequest.nameInEnglish=null==n?void 0:n.nameInEnglish,this.pvRequest.nameInArabic=null==n?void 0:n.nameInArabic})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(W),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(T.uw),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addendum-form"]],features:[t.qOj],decls:15,vars:5,consts:[[4,"ngIf"],[3,"click",4,"ngIf"],["type","button","aria-hidden","true",1,"",3,"click"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"click"],["class","container-fluid invoice-container print-container","style"," width:850px; padding-top:5px;","id","printcontainer",4,"ngIf"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"page-break-after","always"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","50%","font-style","italic","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","font-style","italic","text-align","right","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","text-align","center","padding","10px"],[2,"width","50%","text-align","justify","padding","10px","vertical-align","top"],[2,"width","50%","text-align","left","padding","10px"],[2,"width","50%","text-align","right","padding","10px"],[2,"width","50%","text-align","left","padding","10px","white-space","pre-wrap","vertical-align","top"],[2,"width","50%","text-align","right","padding","10px","white-space","pre-wrap","vertical-align","top"],[4,"ngFor","ngForOf"],["colspan","2"],["class","col-md-12 col-lg-12","style","padding-top:5px",4,"ngIf"],[1,"col-md-12","col-lg-12",2,"padding-top","5px"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","5",2,"border","1px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","text-align","center","padding","10px","vertical-align","top"],[2,"width","50%","text-align","left","padding","10px","vertical-align","top"],[2,"width","50%","text-align","right","padding","10px","vertical-align","top"],[2,"width","50%","text-align","justify","padding","10px","white-space","pre-wrap","vertical-align","top"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,Cu,7,7,"span",0),t.TgZ(2,"span"),t._UZ(3,"br"),t.qZA(),t.YNc(4,Tu,5,3,"span",0),t.YNc(5,vu,5,3,"span",0),t.TgZ(6,"span"),t.YNc(7,xu,3,3,"button",1),t._uU(8,"\xa0 "),t.TgZ(9,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(10," Close"),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"br"),t._UZ(12,"br"),t._UZ(13,"br"),t.YNc(14,ju,2,1,"div",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",0!=o.templatesSelectionList.length),t.xp6(3),t.Q6J("ngIf",0==o.templatesSelectionList.length||0==(null==o.contractFormData||null==o.contractFormData.contractFormHead?null:o.contractFormData.contractFormHead.id)),t.xp6(1),t.Q6J("ngIf",null!=o.templateData),t.xp6(2),t.Q6J("ngIf",(null==o.contractFormData||null==o.contractFormData.contractFormHead?null:o.contractFormData.contractFormHead.id)>0||null!=o.templateData),t.xp6(7),t.Q6J("ngIf",(null==o.contractFormData||null==o.contractFormData.contractFormHead?null:o.contractFormData.contractFormHead.id)>0||null!=o.templateData))},directives:[Z.O5,l.YN,l.Kr,Z.sg],pipes:[f.X$],encapsulation:2}),i})();function Mu(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function Ru(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Pu(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Fu(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Iu(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Yu(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function Ju(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function Qu(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Bu(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Hu(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,Qu,3,3,"span",40),t.YNc(2,Bu,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function $u(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_EmpMapped")," "))}function Vu(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Gu(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Wu(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,Vu,3,3,"span",40),t.YNc(2,Gu,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isEmpMapped)("ngIfElse",o)}}function zu(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Merged")," "))}function Xu(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Ku(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function td(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,Xu,3,3,"span",40),t.YNc(2,Ku,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isMerged)("ngIfElse",o)}}function ed(i,a){1&i&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function od(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",49),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function id(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function nd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function ad(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,od,3,1,"span",47),t.YNc(2,id,3,1,"span",47),t.YNc(3,nd,3,1,"span",47),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)&&!e.isMerged)}}function sd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().mapEmpToRes(n.id)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Mapp_Employee_To_Resource"))}}function rd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().mergeRequest(n.id)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Merge_Resources"))}}function ld(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,sd,3,1,"span",47),t.YNc(2,rd,3,1,"span",47),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(e.canEditReq||e.isAdmin)&&e.isEmpMapped)}}function cd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewRequest(n.id)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_Request"))}}function pd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewMappings(n.id)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_Resource_Mapping"))}}function ud(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendumForm(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Generate_Addendum"))}}function dd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function _d(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",57),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function md(i,a){if(1&i&&(t.TgZ(0,"td",45),t.YNc(1,ad,4,3,"span",46),t.YNc(2,ld,3,2,"span",46),t.YNc(3,cd,3,1,"span",47),t.YNc(4,pd,3,1,"span",47),t.YNc(5,ud,3,1,"span",47),t.YNc(6,dd,3,1,"span",47),t.YNc(7,_d,3,1,"span",47),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isApproved&&!e.isMerged),t.xp6(1),t.Q6J("ngIf",!e.isEmpMapped),t.xp6(1),t.Q6J("ngIf",e.isEmpMapped),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&e.fileUrl)}}function gd(i,a){1&i&&t._UZ(0,"tr",58)}function hd(i,a){1&i&&t._UZ(0,"tr",59)}const Zd=function(){return{standalone:!0}};let fd=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.translate=A,this.displayedColumns=["customerCode","siteCode","projectCode","isApproved","isEmpMapped","isMerged","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUdpating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvAddResource/getPvAddResourceReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?"Confirming_Approve_Request"==n?this.apiService.get("PvAddResource/ApproveReqPvAddResourceReqById",e).subscribe(d=>{this.isUdpating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUdpating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)}):"Confirming_Merge_Request"==n&&this.apiService.get("PvAddResource/mergePvAddResourceReqById",e).subscribe(d=>{this.isUdpating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUdpating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)}):(this.notifyService.showError(this.translate.instant("Something_Went_Wrong")),this.isUdpating=!1)})}create(){this.openDialogManage(0,g.Oi.create,"New_Request_For_Adding_Resources","Add",Ht)}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Request_For_Adding_Resources","Update",Ht)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvAddResource",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.Oi.create,"Request_For_Add_Resource","View",Ht)}viewAddendumForm(e){let o=this.utilService.openCrudDialog(this.dialog,qe);o.componentInstance.modalTitle=this.translate.instant("Addendum_For_Adding_Resources"),o.componentInstance.pvRequest=e,o.componentInstance.type="ForAddingResources",o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewMappings(e){this.openDialogManage(e,g.Oi.create,"Employee_Mapping_For_Add_Resources","View",Jt)}approveRequest(e){this.isUdpating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUdpating=!0,this.openConfirmationDialogManage(e,g.Oi.update,"Confirming_Approve_Request","Approve",xt,"general"))}mergeRequest(e){this.isUdpating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUdpating=!0,this.openConfirmationDialogManage(e,g.Oi.update,"Confirming_Merge_Request","Merge",xt,"general"))}mapEmpToRes(e){this.openDialogManage(e,g.Oi.create,"Employee_To_Resource_Mapping","Add",Jt)}viewAddendum(e){window.open(e.fileUrl)}uploadAdendum(e){let o=this.oprService.openAutoWidthDialog(this.dialog,oe);o.componentInstance.requestData=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-resource"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:64,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","isApproved"],["matColumnDef","isEmpMapped"],["matColumnDef","isMerged"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-users"],[1,"fas","fa-redo"],[1,"fas","fa-eye"],[1,"far","fa-arrow-alt-circle-down"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.TgZ(36,"div",22),t.ynx(37),t.TgZ(38,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(39,24),t.YNc(40,Mu,3,3,"th",25),t.YNc(41,Ru,2,1,"td",26),t.BQk(),t.ynx(42,27),t.YNc(43,Pu,3,3,"th",25),t.YNc(44,Fu,2,1,"td",26),t.BQk(),t.ynx(45,28),t.YNc(46,Iu,3,3,"th",25),t.YNc(47,Yu,2,1,"td",26),t.BQk(),t.ynx(48,29),t.YNc(49,Ju,3,3,"th",25),t.YNc(50,Hu,4,2,"td",26),t.BQk(),t.ynx(51,30),t.YNc(52,$u,3,3,"th",25),t.YNc(53,Wu,4,2,"td",26),t.BQk(),t.ynx(54,31),t.YNc(55,zu,3,3,"th",25),t.YNc(56,td,4,2,"td",26),t.BQk(),t.ynx(57,32),t.YNc(58,ed,3,3,"th",33),t.YNc(59,md,8,7,"td",34),t.BQk(),t.YNc(60,gd,1,0,"tr",35),t.YNc(61,hd,1,0,"tr",36),t.qZA(),t.ynx(62),t.TgZ(63,"mat-paginator",37),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Adding_Resources")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,Zd)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function Ad(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function Cd(i,a){if(1&i&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function Td(i,a){if(1&i&&(t.TgZ(0,"span",35),t._UZ(1,"validation-message",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.customerCode)}}function vd(i,a){1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function xd(i,a){if(1&i&&(t.TgZ(0,"option",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function qd(i,a){if(1&i&&(t.TgZ(0,"span",35),t._UZ(1,"validation-message",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.projectCode)}}function bd(i,a){1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function yd(i,a){if(1&i&&(t.TgZ(0,"option",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Sd(i,a){if(1&i&&(t.TgZ(0,"span",35),t._UZ(1,"validation-message",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function wd(i,a){1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Ud(i,a){if(1&i&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function Dd(i,a){if(1&i&&(t.TgZ(0,"span",35),t._UZ(1,"validation-message",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.employeeNumber)}}function Ld(i,a){1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Nd(i,a){if(1&i&&(t.TgZ(0,"span",35),t._UZ(1,"validation-message",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.fromDate)}}function Ed(i,a){1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Od(i,a){1&i&&(t._UZ(0,"input",38),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Rt=(()=>{class i extends y{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.readonly="",this.siteCodeList=[],this.customerCode="",this.empNumber="",this.isDataLoading=!1,this.custCodeControl=new l.NI("",l.kI.required),this.empNumberControl=new l.NI("",l.kI.required),this.isArabic=!1,this.isFromProjectsAction=!1,this.projectsList=[],this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(this.customerCode),(0,it.b)(r.autoDelay()),(0,nt.x)(),(0,at.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterCustCodes(u||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],projectCode:["",l.kI.required],siteCode:["",l.kI.required],id:[this.id],fromDate:["",l.kI.required],employeeNumber:["",l.kI.required]}),this.isFromProjectsAction&&(this.custCodeControl.setValue(this.projectData.customerCode),this.form.controls.siteCode.setValue(this.projectData.siteCode),this.form.controls.projectCode.setValue(this.projectData.projectCode),this.form.controls.customerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode),this.onSelectionSiteCode())}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){let r=this.custCodeControl.value;this.form.controls.customerCode.setValue(r),this.loadProjectsList(r)}else this.form.controls.customerCode.setValue("");this.form.controls.projectCode.setValue(""),this.form.controls.siteCode.setValue(""),this.form.controls.employeeNumber.setValue(""),this.form.controls.fromDate.setValue(""),this.empNumberControl.setValue(""),this.projectsList=[],this.siteCodeList=[]})}onSelectionEmployee(e,o){let n="";1==o?n=e.option.value.toString():2==o?n=e.target.value.toString():3==o&&(n=e),this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+n).subscribe(s=>{this.form.controls.employeeNumber.setValue(null!=s?this.empNumberControl.value:"")})}onSelectionProjectCode(){this.loadSiteCodes(this.form.controls.projectCode.value),""!=this.form.controls.projectCode.value&&(this.isDataLoading=!0,this.form.controls.siteCode.setValue(""),this.form.controls.employeeNumber.setValue(""),this.form.controls.fromDate.setValue(""),this.empNumberControl.setValue("")),this.isDataLoading=!1}getProjectData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectData=e})}loadSiteCodes(e){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(o=>{this.siteCodeList=o,this.isDataLoading=!1})}loadProjectsList(e){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(o=>{this.projectsList=o,this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.apiService.get("PvRemoveResource/getPvRemoveResourceReqById",this.id).subscribe(e=>{null!=e&&(this.requestData=e,this.custCodeControl.setValue(e.customerCode),this.empNumberControl.setValue(e.employeeNumber),this.loadProjectsList(e.customerCode),this.loadSiteCodes(e.projectCode),this.form.controls.projectCode.setValue(e.projectCode),this.form.controls.customerCode.setValue(e.customerCode),this.form.controls.siteCode.setValue(e.siteCode),this.form.controls.employeeNumber.setValue(e.employeeNumber),this.form.controls.fromDate.setValue(e.fromDate),this.getProjectData(),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){this.form.value.projectCode=this.form.controls.projectCode.value,this.form.value.siteCode=this.form.controls.siteCode.value;let e=new Date(this.form.controls.fromDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.fromDate=e,this.form.valid?this.apiService.post("PvRemoveResource",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)}):this.utilService.FillUpFields()}onSelectionSiteCode(){""!=this.form.controls.siteCode.value&&(this.form.controls.fromDate.setValue(""),this.filteredEmployees=this.empNumberControl.valueChanges.pipe((0,ot.O)(this.empNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(e||"")))),this.getProjectData(),this.form.controls.employeeNumber.setValue(""),this.form.controls.fromDate.setValue(""),this.empNumberControl.setValue(""))}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(f.sK),t.Y36(l.qu),t.Y36(v._),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-req-remove-resource"]],features:[t.qOj],decls:98,vars:80,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","projectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["auto3","matAutocomplete"],[1,"input-group"],["formControlName","fromDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,Ad,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"auto-loader",15),t._UZ(22,"input",16),t.ALo(23,"translate"),t.ALo(24,"translate"),t.TgZ(25,"mat-autocomplete",17,18),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1)}),t.YNc(27,Cd,2,2,"mat-option",19),t.ALo(28,"async"),t.qZA(),t.qZA(),t.YNc(29,Td,2,1,"span",20),t.YNc(30,vd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(31,"div",11),t.TgZ(32,"label",12),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",13),t.TgZ(36,"div",14),t.TgZ(37,"select",21),t.NdJ("change",function(){return o.onSelectionProjectCode()}),t.TgZ(38,"option",22),t._uU(39),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.YNc(42,xd,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(43,qd,2,1,"span",20),t.YNc(44,bd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(45,"div",11),t.TgZ(46,"label",12),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",13),t.TgZ(50,"div",14),t.TgZ(51,"select",24),t.NdJ("change",function(){return o.onSelectionSiteCode()}),t.TgZ(52,"option",22),t._uU(53),t.ALo(54,"translate"),t.ALo(55,"translate"),t.qZA(),t.YNc(56,yd,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(57,Sd,2,1,"span",20),t.YNc(58,wd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(59,"div",11),t.TgZ(60,"label",12),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"div",13),t.TgZ(64,"div",14),t._UZ(65,"auto-loader",15),t._UZ(66,"input",16),t.ALo(67,"translate"),t.ALo(68,"translate"),t.TgZ(69,"mat-autocomplete",17,25),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1)}),t.YNc(71,Ud,2,3,"mat-option",19),t.ALo(72,"async"),t.qZA(),t.qZA(),t.YNc(73,Dd,2,1,"span",20),t.YNc(74,Ld,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(75,"div",11),t.TgZ(76,"div",13),t.TgZ(77,"label",12),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"div",13),t.TgZ(81,"div",26),t.TgZ(82,"input",27),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(88);return o.openDatePicker(r)}),t.ALo(83,"translate"),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"div",28),t._UZ(86,"mat-datepicker-toggle",29),t._UZ(87,"mat-datepicker",null,30),t.qZA(),t.qZA(),t.YNc(89,Nd,2,1,"span",20),t.YNc(90,Ed,3,3,"span",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(91,"div",7),t.TgZ(92,"div",8),t.TgZ(93,"div",31),t.TgZ(94,"input",32),t.NdJ("click",function(){return o.closeModel()}),t.ALo(95,"translate"),t.qZA(),t._uU(96," \xa0 "),t.YNc(97,Od,2,3,"input",33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(26),r=t.MAs(70),c=t.MAs(88);let p,u,d,_,h,A,C,S,L,U;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(10),t.Oqu(t.lcZ(18,44,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(23,46,"Please_Enter")," ",t.lcZ(24,48,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(28,50,o.filteredCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(p=o.form.get("customerCode"))&&p.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(u=o.form.get("customerCode"))?null:u.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(34,52,"Project")),t.xp6(6),t.AsE("",t.lcZ(40,54,"Select")," ",t.lcZ(41,56,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.projectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(d=o.form.get("projectCode"))&&d.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(_=o.form.get("projectCode"))?null:_.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(48,58,"Site")),t.xp6(6),t.AsE("",t.lcZ(54,60,"Select")," ",t.lcZ(55,62,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(h=o.form.get("siteCode"))&&h.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(A=o.form.get("siteCode"))?null:A.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(62,64,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(67,66,"Please_Enter")," ",t.lcZ(68,68,"Employee"),""),t.Q6J("formControl",o.empNumberControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(72,70,o.filteredEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(C=o.form.get("employeeNumber"))&&C.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(S=o.form.get("employeeNumber"))?null:S.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.hij(" ",t.lcZ(79,72,"From_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(83,74,"Please_Enter")," ",t.lcZ(84,76,"From_Date"),""),t.Q6J("matDatepicker",c)("min",null==o.projectData?null:o.projectData.startDate)("max",null==o.projectData?null:o.projectData.endDate),t.xp6(4),t.Q6J("for",c),t.xp6(3),t.Q6J("ngIf",!(null!=(L=o.form.get("fromDate"))&&L.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(U=o.form.get("fromDate"))?null:U.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.s9C("value",t.lcZ(95,78,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,Z.O5,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,l.EJ,l.u,l.YN,l.Kr,j.hl,j.nW,ft.R9,j.Mq,Ut.ey,V.s],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function kd(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function jd(i,a){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function Md(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcCustomerCode)}}function Rd(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Pd(i,a){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Fd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcProjectCode)}}function Id(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Yd(i,a){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Jd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcSiteCode)}}function Qd(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Bd(i,a){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function Hd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.employeeNumber)}}function $d(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Vd(i,a){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function Gd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destCustomerCode)}}function Wd(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function zd(i,a){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Xd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destProjectCode)}}function Kd(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function t_(i,a){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function e_(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destSiteCode)}}function o_(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function i_(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.fromDate)}}function n_(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function a_(i,a){1&i&&(t._UZ(0,"input",43),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Pt=(()=>{class i extends y{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.readonly="",this.srcSiteCodeList=[],this.destSiteCodeList=[],this.srcCustomerCode="",this.destCustomerCode="",this.empNumber="",this.isDataLoading=!1,this.srcCustCodeControl=new l.NI("",l.kI.required),this.destCustCodeControl=new l.NI("",l.kI.required),this.empNumberControl=new l.NI("",l.kI.required),this.isArabic=!1,this.srcProjectsList=[],this.destProjectsList=[],this.isFromProjectsAction=!1,this.filteredSrcCustCodes=this.srcCustCodeControl.valueChanges.pipe((0,ot.O)(this.srcCustomerCode),(0,it.b)(r.autoDelay()),(0,nt.x)(),(0,at.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterSrcCustCodes(u||"")))),this.filteredDestCustCodes=this.destCustCodeControl.valueChanges.pipe((0,ot.O)(this.destCustomerCode),(0,it.b)(r.autoDelay()),(0,nt.x)(),(0,at.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterDestCustCodes(u||""))))}filterSrcCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterDestCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({srcCustomerCode:["",l.kI.required],destCustomerCode:["",l.kI.required],srcProjectCode:["",l.kI.required],destProjectCode:["",l.kI.required],srcSiteCode:["",l.kI.required],destSiteCode:["",l.kI.required],id:[this.id,l.kI.required],fromDate:["",l.kI.required],employeeNumber:["",l.kI.required]}),this.isFromProjectsAction&&(this.srcCustCodeControl.setValue(this.projectData.customerCode),this.form.controls.srcSiteCode.setValue(this.projectData.siteCode),this.form.controls.srcProjectCode.setValue(this.projectData.projectCode),this.form.controls.srcCustomerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode,"src"),this.loadSiteCodes(this.projectData.projectCode,"src"),this.onSelectionSiteCode("src"))}onSelectionCustomerCode(e,o,n){let s="";1==o?s=e.option.value:2==o?s=e.target.value:3==o&&(s=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+s).subscribe(r=>{null!=r?("src"==n&&(this.form.controls.srcCustomerCode.setValue(s),this.loadProjectsList(s,"src"),this.form.controls.srcSiteCode.setValue(""),this.form.controls.srcProjectCode.setValue(""),this.srcSiteCodeList=[],this.empNumberControl.setValue(""),this.form.controls.employeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(s),this.loadProjectsList(s,"dest"),this.form.controls.destSiteCode.setValue(""),this.form.controls.destProjectCode.setValue(""),this.destSiteCodeList=[])):("src"==n&&(this.form.controls.srcCustomerCode.setValue(""),this.srcCustCodeControl.setValue(""),this.srcProjectsList=[],this.srcSiteCodeList=[],this.form.controls.srcProjectCode.setValue(""),this.form.controls.srcSiteCode.setValue(""),this.empNumberControl.setValue(""),this.form.controls.employeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(""),this.destCustCodeControl.setValue(""),this.destProjectsList=[],this.destSiteCodeList=[],this.form.controls.destProjectCode.setValue(""),this.form.controls.destSiteCode.setValue("")))})}onSelectionEmployee(e,o){let n="";1==o?n=e.option.value.toString():2==o?n=e.target.value.toString():3==o&&(n=e),this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+n).subscribe(s=>{this.form.controls.employeeNumber.setValue(null!=s?this.empNumberControl.value:"")})}onSelectionProjectCode(e){"src"==e&&(this.form.controls.srcSiteCode.setValue(""),this.srcSiteCodeList=[],this.loadSiteCodes(this.form.controls.srcProjectCode.value,e),this.form.controls.fromDate.setValue(""),this.empNumberControl.setValue(""),this.form.controls.employeeNumber.setValue("")),"dest"==e&&(this.form.controls.destSiteCode.setValue(""),this.destSiteCodeList=[],this.loadSiteCodes(this.form.controls.destProjectCode.value,e)),this.isDataLoading=!1}getProjectData(e){"src"==e?this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}`).subscribe(o=>{this.srcProjectData=o}):this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.destProjectCode.value}/${this.form.controls.destSiteCode.value}`).subscribe(o=>{this.destProjectData=o})}loadSiteCodes(e,o){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(n=>{"src"==o&&(this.srcSiteCodeList=n),"dest"==o&&(this.destSiteCodeList=n),this.isDataLoading=!1})}loadProjectsList(e,o){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(n=>{"src"==o&&(this.srcProjectsList=n),"dest"==o&&(this.destProjectsList=n),this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.apiService.get("PvTransferResource/getPvTransferResourceReqById",this.id).subscribe(e=>{null!=e&&(console.log(e),this.requestData=e,this.srcCustCodeControl.setValue(e.srcCustomerCode),this.destCustCodeControl.setValue(e.destCustomerCode),this.empNumberControl.setValue(e.employeeNumber),this.loadProjectsList(e.srcCustomerCode,"src"),this.loadProjectsList(e.destCustomerCode,"dest"),this.form.controls.srcProjectCode.setValue(e.srcProjectCode),this.form.controls.destProjectCode.setValue(e.destProjectCode),this.loadSiteCodes(e.srcProjectCode,"src"),this.loadSiteCodes(e.destProjectCode,"dest"),this.form.controls.srcCustomerCode.setValue(e.srcCustomerCode),this.form.controls.destCustomerCode.setValue(e.destCustomerCode),this.form.controls.srcSiteCode.setValue(e.srcSiteCode),this.form.controls.destSiteCode.setValue(e.destSiteCode),this.form.controls.employeeNumber.setValue(e.employeeNumber),this.form.controls.fromDate.setValue(e.fromDate),this.getProjectData("dest"),this.getProjectData("src"),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){if(this.form.valid){this.form.value.srcCustomerCode=this.srcCustCodeControl.value,this.form.value.destCustomerCode=this.destCustCodeControl.value;let e=new Date(this.form.controls.fromDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.fromDate=e,this.apiService.post("PvTransferResource",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}else this.utilService.FillUpFields()}onSelectionSiteCode(e){"src"==e&&(""!=this.form.controls.srcSiteCode.value&&(this.isDataLoading=!0,this.getProjectData("src"),this.form.controls.fromDate.setValue("")),this.empNumberControl.setValue(""),this.filteredEmployees=this.empNumberControl.valueChanges.pipe((0,ot.O)(this.empNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(o||"")))))}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(f.sK),t.Y36(l.qu),t.Y36(v._),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-transfer-resource-req"]],features:[t.qOj],decls:144,vars:121,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","srcProjectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","srcSiteCode",1,"custom-select","mr-sm-2",3,"change"],["auto3","matAutocomplete"],[1,"col-md-12","col-lg-12",2,"padding","5px","text-align","center","font-size","xx-large"],[1,"fas","fa-arrow-alt-circle-down"],["auto2","matAutocomplete"],["formControlName","destProjectCode",1,"custom-select","mr-sm-2",3,"change"],["formControlName","destSiteCode",1,"custom-select","mr-sm-2",3,"change"],[1,"input-group"],["formControlName","fromDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,kd,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"auto-loader",15),t._UZ(22,"input",16),t.ALo(23,"translate"),t.ALo(24,"translate"),t.TgZ(25,"mat-autocomplete",17,18),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"src")}),t.YNc(27,jd,2,2,"mat-option",19),t.ALo(28,"async"),t.qZA(),t.qZA(),t.YNc(29,Md,2,1,"span",20),t.YNc(30,Rd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(31,"div",11),t.TgZ(32,"label",12),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",13),t.TgZ(36,"div",14),t.TgZ(37,"select",21),t.NdJ("change",function(){return o.onSelectionProjectCode("src")}),t.TgZ(38,"option",22),t._uU(39),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.YNc(42,Pd,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(43,Fd,2,1,"span",20),t.YNc(44,Id,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(45,"div",11),t.TgZ(46,"label",12),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",13),t.TgZ(50,"div",14),t.TgZ(51,"select",24),t.NdJ("change",function(){return o.onSelectionSiteCode("src")}),t.TgZ(52,"option",22),t._uU(53),t.ALo(54,"translate"),t.ALo(55,"translate"),t.qZA(),t.YNc(56,Yd,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(57,Jd,2,1,"span",20),t.YNc(58,Qd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(59,"div",11),t.TgZ(60,"label",12),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"div",13),t.TgZ(64,"div",14),t._UZ(65,"auto-loader",15),t._UZ(66,"input",16),t.ALo(67,"translate"),t.ALo(68,"translate"),t.TgZ(69,"mat-autocomplete",17,25),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1)}),t.YNc(71,Bd,2,3,"mat-option",19),t.ALo(72,"async"),t.qZA(),t.qZA(),t.YNc(73,Hd,2,1,"span",20),t.YNc(74,$d,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(75,"div",26),t._UZ(76,"i",27),t.qZA(),t.TgZ(77,"div",11),t.TgZ(78,"label",12),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"div",13),t.TgZ(82,"div",14),t._UZ(83,"auto-loader",15),t._UZ(84,"input",16),t.ALo(85,"translate"),t.ALo(86,"translate"),t.TgZ(87,"mat-autocomplete",17,28),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"dest")}),t.YNc(89,Vd,2,2,"mat-option",19),t.ALo(90,"async"),t.qZA(),t.qZA(),t.YNc(91,Gd,2,1,"span",20),t.YNc(92,Wd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(93,"div",11),t.TgZ(94,"label",12),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"div",13),t.TgZ(98,"div",14),t.TgZ(99,"select",29),t.NdJ("change",function(){return o.onSelectionProjectCode("dest")}),t.TgZ(100,"option",22),t._uU(101),t.ALo(102,"translate"),t.ALo(103,"translate"),t.qZA(),t.YNc(104,zd,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(105,Xd,2,1,"span",20),t.YNc(106,Kd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(107,"div",11),t.TgZ(108,"label",12),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"div",13),t.TgZ(112,"div",14),t.TgZ(113,"select",30),t.NdJ("change",function(){return o.onSelectionSiteCode("dest")}),t.TgZ(114,"option",22),t._uU(115),t.ALo(116,"translate"),t.ALo(117,"translate"),t.qZA(),t.YNc(118,t_,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(119,e_,2,1,"span",20),t.YNc(120,o_,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(121,"div",11),t.TgZ(122,"div",13),t.TgZ(123,"label",12),t._uU(124),t.ALo(125,"translate"),t.qZA(),t.TgZ(126,"div",13),t.TgZ(127,"div",31),t.TgZ(128,"input",32),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(134);return o.openDatePicker(r)}),t.ALo(129,"translate"),t.ALo(130,"translate"),t.qZA(),t.TgZ(131,"div",33),t._UZ(132,"mat-datepicker-toggle",34),t._UZ(133,"mat-datepicker",null,35),t.qZA(),t.qZA(),t.YNc(135,i_,2,1,"span",20),t.YNc(136,n_,3,3,"span",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(137,"div",7),t.TgZ(138,"div",8),t.TgZ(139,"div",36),t.TgZ(140,"input",37),t.NdJ("click",function(){return o.closeModel()}),t.ALo(141,"translate"),t.qZA(),t._uU(142," \xa0 "),t.YNc(143,a_,2,3,"input",38),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(26),r=t.MAs(70),c=t.MAs(88),p=t.MAs(134);let u,d,_,h,A,C,S,L,U,M,O,F,P,st,H,z;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(10),t.Oqu(t.lcZ(18,65,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(23,67,"Please_Enter")," ",t.lcZ(24,69,"Customer_Code"),""),t.Q6J("formControl",o.srcCustCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(28,71,o.filteredSrcCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(u=o.form.get("srcCustomerCode"))&&u.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(d=o.form.get("srcCustomerCode"))?null:d.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(34,73,"Project")),t.xp6(6),t.AsE("",t.lcZ(40,75,"Select")," ",t.lcZ(41,77,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.srcProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(_=o.form.get("srcProjectCode"))&&_.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(h=o.form.get("srcProjectCode"))?null:h.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(48,79,"Site")),t.xp6(6),t.AsE("",t.lcZ(54,81,"Select")," ",t.lcZ(55,83,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.srcSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(A=o.form.get("srcSiteCode"))&&A.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(C=o.form.get("srcSiteCode"))?null:C.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(62,85,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(67,87,"Please_Enter")," ",t.lcZ(68,89,"Employee"),""),t.Q6J("formControl",o.empNumberControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(72,91,o.filteredEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(S=o.form.get("employeeNumber"))&&S.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(L=o.form.get("employeeNumber"))?null:L.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(5),t.Oqu(t.lcZ(80,93,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(85,95,"Please_Enter")," ",t.lcZ(86,97,"Customer_Code"),""),t.Q6J("formControl",o.destCustCodeControl)("matAutocomplete",c),t.xp6(5),t.Q6J("ngForOf",t.lcZ(90,99,o.filteredDestCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(U=o.form.get("destCustomerCode"))&&U.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(M=o.form.get("destCustomerCode"))?null:M.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(96,101,"Project")),t.xp6(6),t.AsE("",t.lcZ(102,103,"Select")," ",t.lcZ(103,105,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.destProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(O=o.form.get("destProjectCode"))&&O.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(F=o.form.get("destProjectCode"))?null:F.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(110,107,"Site")),t.xp6(6),t.AsE("",t.lcZ(116,109,"Select")," ",t.lcZ(117,111,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.destSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(P=o.form.get("destSiteCode"))&&P.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(st=o.form.get("destSiteCode"))?null:st.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.hij(" ",t.lcZ(125,113,"From_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(129,115,"Please_Enter")," ",t.lcZ(130,117,"From_Date"),""),t.Q6J("matDatepicker",p)("min",null==o.srcProjectData?null:o.srcProjectData.startDate)("max",null==o.srcProjectData?null:o.srcProjectData.endDate),t.xp6(4),t.Q6J("for",p),t.xp6(3),t.Q6J("ngIf",!(null!=(H=o.form.get("fromDate"))&&H.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(z=o.form.get("fromDate"))?null:z.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.s9C("value",t.lcZ(141,119,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,Z.O5,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,l.EJ,l.u,l.YN,l.Kr,j.hl,j.nW,ft.R9,j.Mq,Ut.ey,V.s],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function s_(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function r_(i,a){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function l_(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.customerCode)}}function c_(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function p_(i,a){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function u_(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.projectCode)}}function d_(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function __(i,a){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function m_(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function g_(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function h_(i,a){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function Z_(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.resignedEmployeeNumber)}}function f_(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function A_(i,a){1&i&&t._UZ(0,"i",43)}function C_(i,a){1&i&&t._UZ(0,"i",44)}function T_(i,a){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function v_(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.replacedEmployeeNumber)}}function x_(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function q_(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.fromDate)}}function b_(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function y_(i,a){1&i&&(t._UZ(0,"input",45),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Mt=(()=>{class i extends y{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.readonly="",this.siteCodeList=[],this.customerCode="",this.empNumber="",this.isDataLoading=!1,this.custCodeControl=new l.NI("",l.kI.required),this.resEmpNumberControl=new l.NI("",l.kI.required),this.repEmpNumberControl=new l.NI("",l.kI.required),this.isArabic=!1,this.projectsList=[],this.isFromProjectsAction=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(this.customerCode),(0,it.b)(r.autoDelay()),(0,nt.x)(),(0,at.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterCustCodes(u||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.isDataLoading=!0,this.setForm(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],projectCode:["",l.kI.required],siteCode:["",l.kI.required],id:[this.id],fromDate:["",l.kI.required],resignedEmployeeNumber:["",l.kI.required],replacedEmployeeNumber:["",l.kI.required]}),this.isFromProjectsAction&&(this.custCodeControl.setValue(this.projectData.customerCode),this.form.controls.siteCode.setValue(this.projectData.siteCode),this.form.controls.projectCode.setValue(this.projectData.projectCode),this.form.controls.customerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode),this.onSelectionSiteCode())}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){let r=this.custCodeControl.value;this.form.controls.customerCode.setValue(r),this.loadProjectsList(r)}else this.form.controls.customerCode.setValue("");this.form.controls.projectCode.setValue(""),this.form.controls.siteCode.setValue(""),this.form.controls.resignedEmployeeNumber.setValue(""),this.form.controls.replacedEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue(""),this.resEmpNumberControl.setValue(""),this.repEmpNumberControl.setValue(""),this.projectsList=[],this.siteCodeList=[]})}onSelectionEmployee(e,o,n){let s="";1==o?s=e.option.value.toString():2==o?s=e.target.value.toString():3==o&&(s=e),this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+s).subscribe(r=>{null!=r?("resigned"==n&&this.form.controls.resignedEmployeeNumber.setValue(this.resEmpNumberControl.value),"replaced"==n&&this.form.controls.replacedEmployeeNumber.setValue(this.repEmpNumberControl.value)):("resigned"==n&&this.form.controls.resignedEmployeeNumber.setValue(""),"replaced"==n&&this.form.controls.replacedEmployeeNumber.setValue(""))})}onSelectionProjectCode(){this.loadSiteCodes(this.form.controls.projectCode.value),""!=this.form.controls.projectCode.value&&(this.isDataLoading=!0,this.form.controls.siteCode.setValue(""),this.form.controls.resignedEmployeeNumber.setValue(""),this.form.controls.replacedEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue(""),this.resEmpNumberControl.setValue(""),this.repEmpNumberControl.setValue("")),this.isDataLoading=!1}getProjectData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectData=e})}loadSiteCodes(e){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(o=>{this.siteCodeList=o,this.isDataLoading=!1})}loadProjectsList(e){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(o=>{this.projectsList=o,this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.filteredResEmployees=this.resEmpNumberControl.valueChanges.pipe((0,ot.O)(""),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(e||"")))),this.filteredRepEmployees=this.repEmpNumberControl.valueChanges.pipe((0,ot.O)(""),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(e||"")))),this.apiService.get("PvReplaceResource/getPvReplaceResourceReqById",this.id).subscribe(e=>{null!=e&&(this.requestData=e,this.custCodeControl.setValue(e.customerCode),this.resEmpNumberControl.setValue(e.resignedEmployeeNumber),this.repEmpNumberControl.setValue(e.replacedEmployeeNumber),this.loadProjectsList(e.customerCode),this.loadSiteCodes(e.projectCode),this.form.controls.projectCode.setValue(e.projectCode),this.form.controls.customerCode.setValue(e.customerCode),this.form.controls.siteCode.setValue(e.siteCode),this.form.controls.resignedEmployeeNumber.setValue(e.resignedEmployeeNumber),this.form.controls.replacedEmployeeNumber.setValue(e.replacedEmployeeNumber),this.form.controls.fromDate.setValue(e.fromDate),this.getProjectData(),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){let e=new Date(this.form.controls.fromDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.fromDate=e,this.form.valid?this.apiService.post("PvReplaceResource",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)}):this.utilService.FillUpFields()}onSelectionSiteCode(){this.form.controls.fromDate.setValue(""),this.form.controls.replacedEmployeeNumber.setValue(""),this.form.controls.resignedEmployeeNumber.setValue(""),this.resEmpNumberControl.setValue(""),this.repEmpNumberControl.setValue(""),this.filteredResEmployees=this.resEmpNumberControl.valueChanges.pipe((0,ot.O)(""),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(e||"")))),this.filteredRepEmployees=this.repEmpNumberControl.valueChanges.pipe((0,ot.O)(""),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(e||"")))),this.getProjectData()}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(f.sK),t.Y36(l.qu),t.Y36(v._),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-req-replace-employee"]],features:[t.qOj],decls:117,vars:99,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","projectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],[1,"col-md-3","col-lg-3"],["auto3","matAutocomplete"],[1,"col-md-2","col-lg-2",2,"text-align","center","vertical-align","central","font-size","xx-large"],["class","fas fa-arrow-alt-circle-left",4,"ngIf"],["class","fas fa-arrow-alt-circle-right",4,"ngIf"],["auto2","matAutocomplete"],[1,"input-group"],["formControlName","fromDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],[1,"fas","fa-arrow-alt-circle-left"],[1,"fas","fa-arrow-alt-circle-right"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,s_,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"auto-loader",15),t._UZ(22,"input",16),t.ALo(23,"translate"),t.ALo(24,"translate"),t.TgZ(25,"mat-autocomplete",17,18),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1)}),t.YNc(27,r_,2,2,"mat-option",19),t.ALo(28,"async"),t.qZA(),t.qZA(),t.YNc(29,l_,2,1,"span",20),t.YNc(30,c_,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(31,"div",11),t.TgZ(32,"label",12),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",13),t.TgZ(36,"div",14),t.TgZ(37,"select",21),t.NdJ("change",function(){return o.onSelectionProjectCode()}),t.TgZ(38,"option",22),t._uU(39),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.YNc(42,p_,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(43,u_,2,1,"span",20),t.YNc(44,d_,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(45,"div",11),t.TgZ(46,"label",12),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",13),t.TgZ(50,"div",14),t.TgZ(51,"select",24),t.NdJ("change",function(){return o.onSelectionSiteCode()}),t.TgZ(52,"option",22),t._uU(53),t.ALo(54,"translate"),t.ALo(55,"translate"),t.qZA(),t.YNc(56,__,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(57,m_,2,1,"span",20),t.YNc(58,g_,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(59,"div",25),t.TgZ(60,"label",12),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"div",13),t.TgZ(64,"div",14),t._UZ(65,"auto-loader",15),t._UZ(66,"input",16),t.ALo(67,"translate"),t.ALo(68,"translate"),t.TgZ(69,"mat-autocomplete",17,26),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"resigned")}),t.YNc(71,h_,2,3,"mat-option",19),t.ALo(72,"async"),t.qZA(),t.qZA(),t.YNc(73,Z_,2,1,"span",20),t.YNc(74,f_,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(75,"div",27),t.YNc(76,A_,1,0,"i",28),t.YNc(77,C_,1,0,"i",29),t.qZA(),t.TgZ(78,"div",25),t.TgZ(79,"label",12),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"div",13),t.TgZ(83,"div",14),t._UZ(84,"auto-loader",15),t._UZ(85,"input",16),t.ALo(86,"translate"),t.ALo(87,"translate"),t.TgZ(88,"mat-autocomplete",17,30),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"replaced")}),t.YNc(90,T_,2,3,"mat-option",19),t.ALo(91,"async"),t.qZA(),t.qZA(),t.YNc(92,v_,2,1,"span",20),t.YNc(93,x_,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(94,"div",11),t.TgZ(95,"div",13),t.TgZ(96,"label",12),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.TgZ(99,"div",13),t.TgZ(100,"div",31),t.TgZ(101,"input",32),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(107);return o.openDatePicker(r)}),t.ALo(102,"translate"),t.ALo(103,"translate"),t.qZA(),t.TgZ(104,"div",33),t._UZ(105,"mat-datepicker-toggle",34),t._UZ(106,"mat-datepicker",null,35),t.qZA(),t.qZA(),t.YNc(108,q_,2,1,"span",20),t.YNc(109,b_,3,3,"span",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(110,"div",7),t.TgZ(111,"div",8),t.TgZ(112,"div",36),t.TgZ(113,"input",37),t.NdJ("click",function(){return o.closeModel()}),t.ALo(114,"translate"),t.qZA(),t._uU(115," \xa0 "),t.YNc(116,y_,2,3,"input",38),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(26),r=t.MAs(70),c=t.MAs(89),p=t.MAs(107);let u,d,_,h,A,C,S,L,U,M,O,F;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(10),t.Oqu(t.lcZ(18,55,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(23,57,"Please_Enter")," ",t.lcZ(24,59,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(28,61,o.filteredCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(u=o.form.get("customerCode"))&&u.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(d=o.form.get("customerCode"))?null:d.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(34,63,"Project")),t.xp6(6),t.AsE("",t.lcZ(40,65,"Select")," ",t.lcZ(41,67,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.projectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(_=o.form.get("projectCode"))&&_.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(h=o.form.get("projectCode"))?null:h.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(48,69,"Site")),t.xp6(6),t.AsE("",t.lcZ(54,71,"Select")," ",t.lcZ(55,73,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(A=o.form.get("siteCode"))&&A.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(C=o.form.get("siteCode"))?null:C.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(62,75,"Resigned_Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(67,77,"Please_Enter")," ",t.lcZ(68,79,"Employee"),""),t.Q6J("formControl",o.resEmpNumberControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(72,81,o.filteredResEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(S=o.form.get("resEmpNumberControl"))&&S.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(L=o.form.get("resEmpNumberControl"))?null:L.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(2),t.Q6J("ngIf",!o.isArabic),t.xp6(1),t.Q6J("ngIf",o.isArabic),t.xp6(3),t.Oqu(t.lcZ(81,83,"Replaced_Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(86,85,"Please_Enter")," ",t.lcZ(87,87,"Employee"),""),t.Q6J("formControl",o.repEmpNumberControl)("matAutocomplete",c),t.xp6(5),t.Q6J("ngForOf",t.lcZ(91,89,o.filteredRepEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(U=o.form.get("repEmpNumberControl"))&&U.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(M=o.form.get("repEmpNumberControl"))?null:M.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.hij(" ",t.lcZ(98,91,"From_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(102,93,"Please_Enter")," ",t.lcZ(103,95,"From_Date"),""),t.Q6J("matDatepicker",p)("min",null==o.projectData?null:o.projectData.startDate)("max",null==o.projectData?null:o.projectData.endDate),t.xp6(4),t.Q6J("for",p),t.xp6(3),t.Q6J("ngIf",!(null!=(O=o.form.get("fromDate"))&&O.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(F=o.form.get("fromDate"))?null:F.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.s9C("value",t.lcZ(114,97,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,Z.O5,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,l.EJ,l.u,l.YN,l.Kr,j.hl,j.nW,ft.R9,j.Mq,Ut.ey,V.s],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function S_(i,a){if(1&i&&(t.TgZ(0,"span",23),t._UZ(1,"validation-message",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.effectiveDate)}}function w_(i,a){1&i&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function U_(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"div",12),t.TgZ(2,"label",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",12),t.TgZ(6,"div",17),t.TgZ(7,"input",18),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(13);return t.oxw().openDatePicker(n)}),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",19),t._UZ(11,"mat-datepicker-toggle",20),t._UZ(12,"mat-datepicker",null,21),t.qZA(),t.qZA(),t.YNc(14,S_,2,1,"span",22),t.YNc(15,w_,3,3,"span",22),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(13),o=t.oxw(),n=t.MAs(5);let s,r;t.xp6(3),t.hij(" ",t.lcZ(4,9,"Effective_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(8,11,"Please_Enter")," ",t.lcZ(9,13,"From_Date"),""),t.Q6J("matDatepicker",e)("min",o.min1)("max",o.max1),t.xp6(4),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",!(null!=(s=o.form.get("effectiveDate"))&&s.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(r=o.form.get("effectiveDate"))?null:r.hasError("required"))&&(null==n?null:n.submitted))}}function D_(i,a){if(1&i&&(t.TgZ(0,"span",23),t._UZ(1,"validation-message",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.extensionDate)}}function L_(i,a){1&i&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function N_(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"div",12),t.TgZ(2,"label",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",12),t.TgZ(6,"div",17),t.TgZ(7,"input",25),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(13);return t.oxw().openDatePicker(n)}),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",19),t._UZ(11,"mat-datepicker-toggle",20),t._UZ(12,"mat-datepicker",null,26),t.qZA(),t.qZA(),t.YNc(14,D_,2,1,"span",22),t.YNc(15,L_,3,3,"span",22),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(13),o=t.oxw(),n=t.MAs(5);let s,r;t.xp6(3),t.hij(" ",t.lcZ(4,8,"To_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(8,10,"Please_Enter")," ",t.lcZ(9,12,"To_Date"),""),t.Q6J("matDatepicker",e)("min",o.min2),t.xp6(4),t.Q6J("for",o.picker1),t.xp6(3),t.Q6J("ngIf",!(null!=(s=o.form.get("extensionDate"))&&s.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(r=o.form.get("extensionDate"))?null:r.hasError("required"))&&(null==n?null:n.submitted))}}function E_(i,a){1&i&&(t._UZ(0,"input",27),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let kt=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u){super(r),this.notifyService=e,this.datepipe=o,this.translate=n,this.fb=s,this.authService=r,this.utilService=c,this.apiService=p,this.dialogRef=u,this.readonly="",this.currentDate=new Date,this.isUpdating=!1,this.isArabic=!1,this.min1=new Date,this.min2=new Date,this.max1=new Date,this.max2=new Date,this.recentAttendanceDate=new Date}ngOnInit(){this.setForm(),this.isArabic=this.utilService.isArabic()}getRecentAttendanceDate(){null!=this.requestData&&(this.apiService.getall(`ProjectSites/getRecenetAttendanceDate/${this.requestData.projectCode}/${this.requestData.siteCode}`).subscribe(e=>{this.recentAttendanceDate=e,this.min1=e}),this.interval=setInterval(()=>{},1e3))}setForm(){var e,o,n,s,r,c,p;if(this.form=this.fb.group({effectiveDate:[this.requestData.id>0?null===(e=this.requestData)||void 0===e?void 0:e.effectiveDate:""],extensionDate:[this.requestData.id>0?null===(o=this.requestData)||void 0===o?void 0:o.extensionDate:""]}),0==this.requestData.id&&(this.requestData.effectiveDate="",this.requestData.extensionDate=""),(null===(n=this.requestData)||void 0===n?void 0:n.isExtendProjReq)||(null===(s=this.requestData)||void 0===s?void 0:s.isReOpenReq)){this.form.controls.extensionDate.addValidators(l.kI.required);let u=new Date(this.requestData.endDate);if(this.min2=new Date(u.setDate(u.getDate()+1)),null===(r=this.requestData)||void 0===r?void 0:r.isReOpenReq){this.form.controls.effectiveDate.addValidators(l.kI.required);let d=new Date(this.requestData.endDate);this.min1=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1),this.max1.setUTCFullYear(this.currentDate.getUTCFullYear()+1)}}else((null===(c=this.requestData)||void 0===c?void 0:c.isCloseReq)||(null===(p=this.requestData)||void 0===p?void 0:p.isSuspendReq)||this.requestData.isCancelReq)&&(this.form.controls.effectiveDate.addValidators(l.kI.required),this.getRecentAttendanceDate(),this.max1=new Date(this.requestData.endDate))}closeModel(){this.dialogRef.close()}submit(){var e,o,n,s,r,c,p,u,d;if(this.isUpdating)this.notifyService.showError(this.translate.instant("Please wait..."));else if(this.isUpdating=!0,this.form.valid){if(this.requestData.isRevokeSuspReq)this.requestData.extensionDate=null,this.requestData.effectiveDate=null;else if(null===(e=this.requestData)||void 0===e?void 0:e.isExtendProjReq){let _=new Date(this.form.controls.extensionDate.value);_.setMinutes(_.getMinutes()-_.getTimezoneOffset()),this.form.value.extensionDate=_,this.requestData.extensionDate=_,this.requestData.effectiveDate=null}else if((null===(o=this.requestData)||void 0===o?void 0:o.isCloseReq)||(null===(n=this.requestData)||void 0===n?void 0:n.isSuspendReq)||this.requestData.isCancelReq){let _=new Date(this.form.controls.effectiveDate.value);_.setMinutes(_.getMinutes()-_.getTimezoneOffset()),this.form.value.effectiveDate=_,this.requestData.effectiveDate=_,this.requestData.extensionDate=null}else if(this.requestData.isReOpenReq){let _=new Date(this.form.controls.extensionDate.value);_.setMinutes(_.getMinutes()-_.getTimezoneOffset()),this.form.value.extensionDate=_,this.requestData.extensionDate=_;let h=new Date(this.form.controls.effectiveDate.value);h.setMinutes(h.getMinutes()-h.getTimezoneOffset()),this.form.value.effectiveDate=h,this.requestData.effectiveDate=h}this.requestData.isCloseReq=!!(null===(s=this.requestData)||void 0===s?void 0:s.isCloseReq),this.requestData.isSuspendReq=!!(null===(r=this.requestData)||void 0===r?void 0:r.isSuspendReq),this.requestData.isCancelReq=!!(null===(c=this.requestData)||void 0===c?void 0:c.isCancelReq),this.requestData.isReOpenReq=!!(null===(p=this.requestData)||void 0===p?void 0:p.isReOpenReq),this.requestData.isRevokeSuspReq=!!(null===(u=this.requestData)||void 0===u?void 0:u.isRevokeSuspReq),this.requestData.isExtendProjReq=!!(null===(d=this.requestData)||void 0===d?void 0:d.isExtendProjReq),this.requestData.id=this.requestData.id>0?this.requestData.id:0,this.isUpdating=!0,this.apiService.post("PvOpenCloseReq",this.requestData).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},_=>{this.isUpdating=!1,console.error(_),this.utilService.ShowApiErrorMessage(_)})}else this.isUpdating=!1,this.utilService.FillUpFields()}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w.g),t.Y36(Z.uU),t.Y36(f.sK),t.Y36(l.qu),t.Y36(v._),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-pv-open-close-req"]],features:[t.qOj],decls:42,vars:22,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],["class","col-md-4 col-lg-4",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[1,"input-group"],["formControlName","effectiveDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["style","color:red",4,"ngIf"],[2,"color","red"],[3,"control"],["formControlName","extensionDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","click"],["picker2",""],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t._uU(7),t.TgZ(8,"div",4),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t.TgZ(12,"div",6),t.TgZ(13,"div",8),t.TgZ(14,"div",9),t.TgZ(15,"div",10),t.TgZ(16,"label",11),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",12),t._uU(20),t.qZA(),t.qZA(),t.TgZ(21,"div",10),t.TgZ(22,"label",11),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",12),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"div",10),t.TgZ(28,"label",11),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"div",12),t._uU(32),t.qZA(),t.qZA(),t.YNc(33,U_,16,15,"div",13),t.YNc(34,N_,16,14,"div",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",6),t.TgZ(36,"div",7),t.TgZ(37,"div",14),t.TgZ(38,"input",15),t.NdJ("click",function(){return o.closeModel()}),t.ALo(39,"translate"),t.qZA(),t._uU(40," \xa0 "),t.YNc(41,E_,2,3,"input",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.AsE(" ",null==o.requestData?null:o.requestData.requestSubType,"/",(null==o.requestData?null:o.requestData.id)>0?null==o.requestData?null:o.requestData.id:"new"," "),t.xp6(10),t.Oqu(t.lcZ(18,14,"Customer_Code")),t.xp6(3),t.hij(" ",o.requestData.customerCode," "),t.xp6(3),t.Oqu(t.lcZ(24,16,"Project")),t.xp6(3),t.hij(" ",o.requestData.projectCode," "),t.xp6(3),t.Oqu(t.lcZ(30,18,"Site")),t.xp6(3),t.hij(" ",o.requestData.siteCode," "),t.xp6(1),t.Q6J("ngIf",(null==o.requestData?null:o.requestData.isCloseReq)||(null==o.requestData?null:o.requestData.isSuspendReq)||(null==o.requestData?null:o.requestData.isCancelReq)||(null==o.requestData?null:o.requestData.isReOpenReq)),t.xp6(1),t.Q6J("ngIf",(null==o.requestData?null:o.requestData.isExtendProjReq)||(null==o.requestData?null:o.requestData.isReOpenReq)),t.xp6(4),t.s9C("value",t.lcZ(39,20,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle))},directives:[l._Y,l.JL,l.sg,Z.O5,l.Fj,j.hl,l.JJ,l.u,j.nW,ft.R9,j.Mq,V.s],pipes:[f.X$],encapsulation:2}),i})();function O_(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function k_(i,a){if(1&i&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function j_(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcCustomerCode)}}function M_(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function R_(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function P_(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcProjectCode)}}function F_(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function I_(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Y_(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcSiteCode)}}function J_(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Q_(i,a){if(1&i&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function B_(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcEmployeeNumber)}}function H_(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function $_(i,a){if(1&i&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function V_(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destCustomerCode)}}function G_(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function W_(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function z_(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destProjectCode)}}function X_(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function K_(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function tm(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destSiteCode)}}function em(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function om(i,a){if(1&i&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function im(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destEmployeeNumber)}}function nm(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function am(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.fromDate)}}function sm(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function rm(i,a){1&i&&(t._UZ(0,"input",46),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Xt=(()=>{class i extends y{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.id=0,this.readonly="",this.srcSiteCodeList=[],this.destSiteCodeList=[],this.srcCustomerCode="",this.destCustomerCode="",this.srcEmpNumber="",this.destEmpNumber="",this.isDataLoading=!1,this.srcCustCodeControl=new l.NI("",l.kI.required),this.destCustCodeControl=new l.NI("",l.kI.required),this.srcEmpNumberControl=new l.NI("",l.kI.required),this.destEmpNumberControl=new l.NI("",l.kI.required),this.isArabic=!1,this.srcProjectsList=[],this.destProjectsList=[],this.isFromProjectsAction=!1,this.filteredSrcCustCodes=this.srcCustCodeControl.valueChanges.pipe((0,ot.O)(this.srcCustomerCode),(0,it.b)(r.autoDelay()),(0,nt.x)(),(0,at.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterSrcCustCodes(u||"")))),this.filteredDestCustCodes=this.destCustCodeControl.valueChanges.pipe((0,ot.O)(this.destCustomerCode),(0,it.b)(r.autoDelay()),(0,nt.x)(),(0,at.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterDestCustCodes(u||""))))}filterSrcCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterDestCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filtersrcEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterdestEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.destProjectCode.value}/${this.form.controls.destSiteCode.value}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({srcCustomerCode:["",l.kI.required],destCustomerCode:["",l.kI.required],srcProjectCode:["",l.kI.required],destProjectCode:["",l.kI.required],srcSiteCode:["",l.kI.required],destSiteCode:["",l.kI.required],id:[this.id,l.kI.required],fromDate:["",l.kI.required],srcEmployeeNumber:["",l.kI.required],destEmployeeNumber:["",l.kI.required]}),this.isFromProjectsAction&&(this.srcProjectData=this.projectData,this.srcCustCodeControl.setValue(this.srcProjectData.customerCode),this.form.controls.srcSiteCode.setValue(this.projectData.siteCode),this.form.controls.srcProjectCode.setValue(this.projectData.projectCode),this.form.controls.srcCustomerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode,"src"),this.loadSiteCodes(this.projectData.projectCode,"src"),this.onSelectionSiteCode("src"))}onSelectionCustomerCode(e,o,n){let s="";1==o?s=e.option.value:2==o?s=e.target.value:3==o&&(s=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+s).subscribe(r=>{null!=r?("src"==n&&(this.form.controls.srcCustomerCode.setValue(s),this.loadProjectsList(s,"src"),this.form.controls.srcSiteCode.setValue(""),this.form.controls.srcProjectCode.setValue(""),this.srcSiteCodeList=[],this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(s),this.loadProjectsList(s,"dest"),this.form.controls.destSiteCode.setValue(""),this.form.controls.destProjectCode.setValue(""),this.form.controls.destEmployeeNumber.setValue(""),this.destEmpNumberControl.setValue(""),this.destSiteCodeList=[])):("src"==n&&(this.form.controls.srcCustomerCode.setValue(""),this.srcCustCodeControl.setValue(""),this.srcProjectsList=[],this.srcSiteCodeList=[],this.form.controls.srcProjectCode.setValue(""),this.form.controls.srcSiteCode.setValue(""),this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(""),this.destCustCodeControl.setValue(""),this.destProjectsList=[],this.destSiteCodeList=[],this.form.controls.destProjectCode.setValue(""),this.form.controls.destSiteCode.setValue(""),this.destEmpNumberControl.setValue(""),this.form.controls.destEmployeeNumber.setValue("")))})}onSelectionEmployee(e,o,n){let s="";1==o?s=e.option.value.toString():2==o?s=e.target.value.toString():3==o&&(s=e),"src"==n?this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+s).subscribe(r=>{this.form.controls.srcEmployeeNumber.setValue(null!=r?this.srcEmpNumberControl.value:"")}):"dest"==n&&this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+s).subscribe(r=>{this.form.controls.destEmployeeNumber.setValue(null!=r?this.destEmpNumberControl.value:"")})}onSelectionProjectCode(e){"src"==e?(this.form.controls.srcSiteCode.setValue(""),this.srcSiteCodeList=[],this.loadSiteCodes(this.form.controls.srcProjectCode.value,e),this.form.controls.fromDate.setValue(""),this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue("")):"dest"==e&&(this.form.controls.destSiteCode.setValue(""),this.destSiteCodeList=[],this.loadSiteCodes(this.form.controls.destProjectCode.value,e),this.destEmpNumberControl.setValue(""),this.form.controls.destEmployeeNumber.setValue("")),this.isDataLoading=!1}getProjectData(e){"src"==e?this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}`).subscribe(o=>{this.srcProjectData=o}):this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.destProjectCode.value}/${this.form.controls.destSiteCode.value}`).subscribe(o=>{this.destProjectData=o})}loadSiteCodes(e,o){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(n=>{"src"==o&&(this.srcSiteCodeList=n),"dest"==o&&(this.destSiteCodeList=n),this.isDataLoading=!1})}loadProjectsList(e,o){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(n=>{"src"==o&&(this.srcProjectsList=n),"dest"==o&&(this.destProjectsList=n),this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.apiService.get("PvSwapEmployees/getPvSwapEmployeesReqById",this.id).subscribe(e=>{null!=e&&(console.log(e),this.requestData=e,this.srcCustCodeControl.setValue(e.srcCustomerCode),this.destCustCodeControl.setValue(e.destCustomerCode),this.srcEmpNumberControl.setValue(e.srcEmployeeNumber),this.destEmpNumberControl.setValue(e.destEmployeeNumber),this.loadProjectsList(e.srcCustomerCode,"src"),this.loadProjectsList(e.destCustomerCode,"dest"),this.form.controls.srcProjectCode.setValue(e.srcProjectCode),this.form.controls.destProjectCode.setValue(e.destProjectCode),this.loadSiteCodes(e.srcProjectCode,"src"),this.loadSiteCodes(e.destProjectCode,"dest"),this.form.controls.srcCustomerCode.setValue(e.srcCustomerCode),this.form.controls.destCustomerCode.setValue(e.destCustomerCode),this.form.controls.srcSiteCode.setValue(e.srcSiteCode),this.form.controls.destSiteCode.setValue(e.destSiteCode),this.form.controls.srcEmployeeNumber.setValue(e.srcEmployeeNumber),this.form.controls.destEmployeeNumber.setValue(e.destEmployeeNumber),this.form.controls.fromDate.setValue(e.fromDate),this.getProjectData("dest"),this.getProjectData("src"),this.id>0&&(this.filteredSrcEmployees=this.srcEmpNumberControl.valueChanges.pipe((0,ot.O)(this.srcEmpNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filtersrcEmpNumbers(o||"")))),this.filteredDestEmployees=this.destEmpNumberControl.valueChanges.pipe((0,ot.O)(this.destEmpNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filterdestEmpNumbers(o||""))))),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){if(this.form.valid){this.form.value.srcCustomerCode=this.srcCustCodeControl.value,this.form.value.destCustomerCode=this.destCustCodeControl.value;let e=new Date(this.form.controls.fromDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.fromDate=e,this.apiService.post("PvSwapEmployees",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}else this.utilService.FillUpFields()}onSelectionSiteCode(e){"src"==e?(""!=this.form.controls.srcSiteCode.value&&(this.isDataLoading=!0,this.getProjectData("src"),this.form.controls.fromDate.setValue("")),this.srcEmpNumberControl.setValue(""),this.filteredSrcEmployees=this.srcEmpNumberControl.valueChanges.pipe((0,ot.O)(this.srcEmpNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filtersrcEmpNumbers(o||""))))):"dest"==e&&(""!=this.form.controls.destSiteCode.value&&(this.isDataLoading=!0,this.getProjectData("dest"),this.form.controls.fromDate.setValue("")),this.destEmpNumberControl.setValue(""),this.filteredDestEmployees=this.destEmpNumberControl.valueChanges.pipe((0,ot.O)(this.destEmpNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filterdestEmpNumbers(o||"")))))}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(f.sK),t.Y36(l.qu),t.Y36(v._),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-swap-employees"]],features:[t.qOj],decls:162,vars:138,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-12","col-lg-12",2,"border","1px solid #f4f4f4","padding-bottom","5px"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","srcProjectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","srcSiteCode",1,"custom-select","mr-sm-2",3,"change"],["auto3","matAutocomplete"],[1,"col-md-12","col-lg-12",2,"padding","5px","text-align","center","font-size","xx-large"],[1,"fas","fa-sync-alt"],[1,"col-md-12","col-lg-12",2,"border","1px solid #f4f4f4","padding-top","5px"],["auto2","matAutocomplete"],["formControlName","destProjectCode",1,"custom-select","mr-sm-2",3,"change"],["formControlName","destSiteCode",1,"custom-select","mr-sm-2",3,"change"],["auto4","matAutocomplete"],[1,"col-md-4","col-lg-4"],[1,"input-group"],["formControlName","fromDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,O_,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"label",10),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t._UZ(19,"auto-loader",13),t._UZ(20,"input",14),t.ALo(21,"translate"),t.ALo(22,"translate"),t.TgZ(23,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"src")}),t.YNc(25,k_,2,2,"mat-option",17),t.ALo(26,"async"),t.qZA(),t.qZA(),t.YNc(27,j_,2,1,"span",18),t.YNc(28,M_,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(29,"div",9),t.TgZ(30,"label",10),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"div",12),t.TgZ(35,"select",19),t.NdJ("change",function(){return o.onSelectionProjectCode("src")}),t.TgZ(36,"option",20),t._uU(37),t.ALo(38,"translate"),t.ALo(39,"translate"),t.qZA(),t.YNc(40,R_,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(41,P_,2,1,"span",18),t.YNc(42,F_,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(43,"div",9),t.TgZ(44,"label",10),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"div",12),t.TgZ(49,"select",22),t.NdJ("change",function(){return o.onSelectionSiteCode("src")}),t.TgZ(50,"option",20),t._uU(51),t.ALo(52,"translate"),t.ALo(53,"translate"),t.qZA(),t.YNc(54,I_,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(55,Y_,2,1,"span",18),t.YNc(56,J_,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(57,"div",9),t.TgZ(58,"label",10),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"div",11),t.TgZ(62,"div",12),t._UZ(63,"auto-loader",13),t._UZ(64,"input",14),t.ALo(65,"translate"),t.ALo(66,"translate"),t.TgZ(67,"mat-autocomplete",15,23),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"src")}),t.YNc(69,Q_,2,3,"mat-option",17),t.ALo(70,"async"),t.qZA(),t.qZA(),t.YNc(71,B_,2,1,"span",18),t.YNc(72,H_,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",24),t._UZ(74,"i",25),t.qZA(),t.TgZ(75,"div",26),t.TgZ(76,"div",7),t.TgZ(77,"div",9),t.TgZ(78,"label",10),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"div",11),t.TgZ(82,"div",12),t._UZ(83,"auto-loader",13),t._UZ(84,"input",14),t.ALo(85,"translate"),t.ALo(86,"translate"),t.TgZ(87,"mat-autocomplete",15,27),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"dest")}),t.YNc(89,$_,2,2,"mat-option",17),t.ALo(90,"async"),t.qZA(),t.qZA(),t.YNc(91,V_,2,1,"span",18),t.YNc(92,G_,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(93,"div",9),t.TgZ(94,"label",10),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"div",11),t.TgZ(98,"div",12),t.TgZ(99,"select",28),t.NdJ("change",function(){return o.onSelectionProjectCode("dest")}),t.TgZ(100,"option",20),t._uU(101),t.ALo(102,"translate"),t.ALo(103,"translate"),t.qZA(),t.YNc(104,W_,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(105,z_,2,1,"span",18),t.YNc(106,X_,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(107,"div",9),t.TgZ(108,"label",10),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"div",11),t.TgZ(112,"div",12),t.TgZ(113,"select",29),t.NdJ("change",function(){return o.onSelectionSiteCode("dest")}),t.TgZ(114,"option",20),t._uU(115),t.ALo(116,"translate"),t.ALo(117,"translate"),t.qZA(),t.YNc(118,K_,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(119,tm,2,1,"span",18),t.YNc(120,em,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(121,"div",9),t.TgZ(122,"label",10),t._uU(123),t.ALo(124,"translate"),t.qZA(),t.TgZ(125,"div",11),t.TgZ(126,"div",12),t._UZ(127,"auto-loader",13),t._UZ(128,"input",14),t.ALo(129,"translate"),t.ALo(130,"translate"),t.TgZ(131,"mat-autocomplete",15,30),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"dest")}),t.YNc(133,om,2,3,"mat-option",17),t.ALo(134,"async"),t.qZA(),t.qZA(),t.YNc(135,im,2,1,"span",18),t.YNc(136,nm,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(137,"div",24),t.TgZ(138,"div",26),t.TgZ(139,"div",31),t.TgZ(140,"div",11),t.TgZ(141,"label",10),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"div",11),t.TgZ(145,"div",32),t.TgZ(146,"input",33),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(152);return o.openDatePicker(r)}),t.ALo(147,"translate"),t.ALo(148,"translate"),t.qZA(),t.TgZ(149,"div",34),t._UZ(150,"mat-datepicker-toggle",35),t._UZ(151,"mat-datepicker",null,36),t.qZA(),t.qZA(),t.YNc(153,am,2,1,"span",18),t.YNc(154,sm,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(155,"div",37),t.TgZ(156,"div",38),t.TgZ(157,"div",39),t.TgZ(158,"input",40),t.NdJ("click",function(){return o.closeModel()}),t.ALo(159,"translate"),t.qZA(),t._uU(160," \xa0 "),t.YNc(161,rm,2,3,"input",41),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(24),r=t.MAs(68),c=t.MAs(88),p=t.MAs(132),u=t.MAs(152);let d,_,h,A,C,S,L,U,M,O,F,P,st,H,z,et,ht,ct;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(8),t.Oqu(t.lcZ(16,74,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(21,76,"Please_Enter")," ",t.lcZ(22,78,"Customer_Code"),""),t.Q6J("formControl",o.srcCustCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(26,80,o.filteredSrcCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(d=o.form.get("srcCustomerCode"))&&d.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(_=o.form.get("srcCustomerCode"))?null:_.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(32,82,"Project")),t.xp6(6),t.AsE("",t.lcZ(38,84,"Select")," ",t.lcZ(39,86,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.srcProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(h=o.form.get("srcProjectCode"))&&h.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(A=o.form.get("srcProjectCode"))?null:A.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(46,88,"Site")),t.xp6(6),t.AsE("",t.lcZ(52,90,"Select")," ",t.lcZ(53,92,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.srcSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(C=o.form.get("srcSiteCode"))&&C.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(S=o.form.get("srcSiteCode"))?null:S.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(60,94,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(65,96,"Please_Enter")," ",t.lcZ(66,98,"Employee"),""),t.Q6J("formControl",o.srcEmpNumberControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(70,100,o.filteredSrcEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(L=o.form.get("srcEmployeeNumber"))&&L.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(U=o.form.get("srcEmployeeNumber"))?null:U.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(7),t.Oqu(t.lcZ(80,102,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(85,104,"Please_Enter")," ",t.lcZ(86,106,"Customer_Code"),""),t.Q6J("formControl",o.destCustCodeControl)("matAutocomplete",c),t.xp6(5),t.Q6J("ngForOf",t.lcZ(90,108,o.filteredDestCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(M=o.form.get("destCustomerCode"))&&M.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(O=o.form.get("destCustomerCode"))?null:O.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(96,110,"Project")),t.xp6(6),t.AsE("",t.lcZ(102,112,"Select")," ",t.lcZ(103,114,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.destProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(F=o.form.get("destProjectCode"))&&F.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(P=o.form.get("destProjectCode"))?null:P.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(110,116,"Site")),t.xp6(6),t.AsE("",t.lcZ(116,118,"Select")," ",t.lcZ(117,120,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.destSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(st=o.form.get("destSiteCode"))&&st.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(H=o.form.get("destSiteCode"))?null:H.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(124,122,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(129,124,"Please_Enter")," ",t.lcZ(130,126,"Employee"),""),t.Q6J("formControl",o.destEmpNumberControl)("matAutocomplete",p),t.xp6(5),t.Q6J("ngForOf",t.lcZ(134,128,o.filteredDestEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(z=o.form.get("destEmployeeNumber"))&&z.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(et=o.form.get("destEmployeeNumber"))?null:et.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(6),t.hij(" ",t.lcZ(143,130,"From_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(147,132,"Please_Enter")," ",t.lcZ(148,134,"From_Date"),""),t.Q6J("matDatepicker",u)("min",null==o.srcProjectData?null:o.srcProjectData.startDate)("max",null==o.srcProjectData?null:o.srcProjectData.endDate),t.xp6(4),t.Q6J("for",u),t.xp6(3),t.Q6J("ngIf",!(null!=(ht=o.form.get("fromDate"))&&ht.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(ct=o.form.get("fromDate"))?null:ct.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.s9C("value",t.lcZ(159,136,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,Z.O5,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,l.EJ,l.u,l.YN,l.Kr,j.hl,j.nW,ft.R9,j.Mq,Ut.ey,V.s],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function lm(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function cm(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcCustomerCode)}}function pm(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function um(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcSiteCode)}}function dm(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function _m(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcProjectCode)}}function mm(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function gm(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destCustomerCode)}}function hm(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Zm(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destSiteCode)}}function fm(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Am(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destProjectCode)}}function Cm(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Source_Employee")," "))}function Tm(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcEmployeeNumber)}}function vm(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Destination_Employee")," "))}function xm(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destEmployeeNumber)}}function qm(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"From_Date")," "))}function bm(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.ToDateString(e.fromDate))}}function ym(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function Sm(i,a){1&i&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function wm(i,a){1&i&&(t.TgZ(0,"span",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Um(i,a){if(1&i&&(t.TgZ(0,"td",42),t.YNc(1,Sm,3,3,"span",43),t.YNc(2,wm,3,3,"ng-template",null,44,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function Dm(i,a){1&i&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Lm(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Nm(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function Em(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function Om(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function km(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function jm(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",48),t.YNc(1,Lm,3,1,"span",49),t.YNc(2,Nm,3,1,"span",49),t.YNc(3,Em,3,1,"span",49),t.TgZ(4,"span",50),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s.id)}),t._UZ(5,"i",51),t.qZA(),t.YNc(6,Om,3,1,"span",49),t.YNc(7,km,3,1,"span",49),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request")),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin))}}function Mm(i,a){1&i&&t._UZ(0,"tr",57)}function Rm(i,a){1&i&&t._UZ(0,"tr",58)}const Pm=function(){return{standalone:!0}};let Kt=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=_,this.pageService=h,this.oprService=A,this.translate=C,this.displayedColumns=["srcCustomerCode","srcSiteCode","srcProjectCode","destCustomerCode","destSiteCode","destProjectCode","srcEmployeeNumber","destEmployeeNumber","fromDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUpdating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvSwapEmployees/getPvSwapEmployeesReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u&&this.apiService.get("PvSwapEMployees/ApproveReqPvSwapEmployeesReqById",e).subscribe(d=>{this.isUpdating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUpdating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)})})}create(){this.openDialogManage(0,g.Oi.create,"New_Request_For_Swap_Employees","Add",Xt)}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Request_For_Swap_Employees","Update",Xt)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvSwapEmployees",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.Oi.create,"Request_For_Swap_Employees","View",Xt)}mergeRequest(e){}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(e,g.Oi.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}uploadAdendum(e){}viewAddendum(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-swap-employees"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:75,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","srcCustomerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","srcSiteCode"],["matColumnDef","srcProjectCode"],["matColumnDef","destCustomerCode"],["matColumnDef","destSiteCode"],["matColumnDef","destProjectCode"],["matColumnDef","srcEmployeeNumber"],["matColumnDef","destEmployeeNumber"],["matColumnDef","fromDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.ynx(36),t.TgZ(37,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(38,23),t.YNc(39,lm,3,3,"th",24),t.YNc(40,cm,2,1,"td",25),t.BQk(),t.ynx(41,26),t.YNc(42,pm,3,3,"th",24),t.YNc(43,um,2,1,"td",25),t.BQk(),t.ynx(44,27),t.YNc(45,dm,3,3,"th",24),t.YNc(46,_m,2,1,"td",25),t.BQk(),t.ynx(47,28),t.YNc(48,mm,3,3,"th",24),t.YNc(49,gm,2,1,"td",25),t.BQk(),t.ynx(50,29),t.YNc(51,hm,3,3,"th",24),t.YNc(52,Zm,2,1,"td",25),t.BQk(),t.ynx(53,30),t.YNc(54,fm,3,3,"th",24),t.YNc(55,Am,2,1,"td",25),t.BQk(),t.ynx(56,31),t.YNc(57,Cm,3,3,"th",24),t.YNc(58,Tm,2,1,"td",25),t.BQk(),t.ynx(59,32),t.YNc(60,vm,3,3,"th",24),t.YNc(61,xm,2,1,"td",25),t.BQk(),t.ynx(62,33),t.YNc(63,qm,3,3,"th",24),t.YNc(64,bm,2,1,"td",25),t.BQk(),t.ynx(65,34),t.YNc(66,ym,3,3,"th",24),t.YNc(67,Um,4,2,"td",25),t.BQk(),t.ynx(68,35),t.YNc(69,Dm,3,3,"th",36),t.YNc(70,jm,8,6,"td",37),t.BQk(),t.YNc(71,Mm,1,0,"tr",38),t.YNc(72,Rm,1,0,"tr",39),t.qZA(),t.BQk(),t.qZA(),t.ynx(73),t.TgZ(74,"mat-paginator",40),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Swap_Employees")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,Pm)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(34),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function Fm(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function Im(i,a){if(1&i&&(t.TgZ(0,"mat-option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function Ym(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcCustomerCode)}}function Jm(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Qm(i,a){if(1&i&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Bm(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcProjectCode)}}function Hm(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function $m(i,a){if(1&i&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Vm(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcSiteCode)}}function Gm(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Wm(i,a){if(1&i&&(t.TgZ(0,"mat-option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function zm(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcEmployeeNumber)}}function Xm(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Km(i,a){if(1&i&&(t.TgZ(0,"mat-option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function tg(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destCustomerCode)}}function eg(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function og(i,a){if(1&i&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function ig(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destProjectCode)}}function ng(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function ag(i,a){if(1&i&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function sg(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destSiteCode)}}function rg(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function lg(i,a){if(1&i&&(t.TgZ(0,"mat-option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function cg(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destEmployeeNumber)}}function pg(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function ug(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.fromDate)}}function dg(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function _g(i,a){1&i&&(t._UZ(0,"input",47),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Ft=(()=>{class i extends y{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.id=0,this.readonly="",this.srcSiteCodeList=[],this.destSiteCodeList=[],this.srcCustomerCode="",this.destCustomerCode="",this.srcEmpNumber="",this.destEmpNumber="",this.isDataLoading=!1,this.srcCustCodeControl=new l.NI("",l.kI.required),this.destCustCodeControl=new l.NI("",l.kI.required),this.srcEmpNumberControl=new l.NI("",l.kI.required),this.destEmpNumberControl=new l.NI("",l.kI.required),this.isArabic=!1,this.srcProjectsList=[],this.destProjectsList=[],this.isFromProjectsAction=!1,this.filteredSrcCustCodes=this.srcCustCodeControl.valueChanges.pipe((0,ot.O)(this.srcCustomerCode),(0,it.b)(r.autoDelay()),(0,nt.x)(),(0,at.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterSrcCustCodes(u||"")))),this.filteredDestCustCodes=this.destCustCodeControl.valueChanges.pipe((0,ot.O)(this.destCustomerCode),(0,it.b)(r.autoDelay()),(0,nt.x)(),(0,at.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterDestCustCodes(u||""))))}filterSrcCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterDestCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filtersrcEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterdestEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.destProjectCode.value}/${this.form.controls.destSiteCode.value}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({srcCustomerCode:["",l.kI.required],destCustomerCode:["",l.kI.required],srcProjectCode:["",l.kI.required],destProjectCode:["",l.kI.required],srcSiteCode:["",l.kI.required],destSiteCode:["",l.kI.required],id:[this.id,l.kI.required],fromDate:["",l.kI.required],srcEmployeeNumber:["",l.kI.required],destEmployeeNumber:["",l.kI.required]}),this.isFromProjectsAction&&(this.srcCustCodeControl.setValue(this.projectData.customerCode),this.form.controls.srcSiteCode.setValue(this.projectData.siteCode),this.form.controls.srcProjectCode.setValue(this.projectData.projectCode),this.form.controls.srcCustomerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode,"src"),this.loadSiteCodes(this.projectData.projectCode,"src"),this.onSelectionSiteCode("src"))}onSelectionCustomerCode(e,o,n){let s="";1==o?s=e.option.value:2==o?s=e.target.value:3==o&&(s=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+s).subscribe(r=>{null!=r?("src"==n&&(this.form.controls.srcCustomerCode.setValue(s),this.loadProjectsList(s,"src"),this.form.controls.srcSiteCode.setValue(""),this.form.controls.srcProjectCode.setValue(""),this.srcSiteCodeList=[],this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(s),this.loadProjectsList(s,"dest"),this.form.controls.destSiteCode.setValue(""),this.form.controls.destProjectCode.setValue(""),this.form.controls.destEmployeeNumber.setValue(""),this.destEmpNumberControl.setValue(""),this.destSiteCodeList=[])):("src"==n&&(this.form.controls.srcCustomerCode.setValue(""),this.srcCustCodeControl.setValue(""),this.srcProjectsList=[],this.srcSiteCodeList=[],this.form.controls.srcProjectCode.setValue(""),this.form.controls.srcSiteCode.setValue(""),this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(""),this.destCustCodeControl.setValue(""),this.destProjectsList=[],this.destSiteCodeList=[],this.form.controls.destProjectCode.setValue(""),this.form.controls.destSiteCode.setValue(""),this.destEmpNumberControl.setValue(""),this.form.controls.destEmployeeNumber.setValue("")))})}onSelectionEmployee(e,o,n){let s="";1==o?s=e.option.value.toString():2==o?s=e.target.value.toString():3==o&&(s=e),"src"==n?this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+s).subscribe(r=>{this.form.controls.srcEmployeeNumber.setValue(null!=r?this.srcEmpNumberControl.value:"")}):"dest"==n&&this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+s).subscribe(r=>{this.form.controls.destEmployeeNumber.setValue(null!=r?this.destEmpNumberControl.value:"")})}onSelectionProjectCode(e){"src"==e?(this.form.controls.srcSiteCode.setValue(""),this.srcSiteCodeList=[],this.loadSiteCodes(this.form.controls.srcProjectCode.value,e),this.form.controls.fromDate.setValue(""),this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue("")):"dest"==e&&(this.form.controls.destSiteCode.setValue(""),this.destSiteCodeList=[],this.loadSiteCodes(this.form.controls.destProjectCode.value,e),this.destEmpNumberControl.setValue(""),this.form.controls.destEmployeeNumber.setValue("")),this.isDataLoading=!1}getProjectData(e){"src"==e?this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}`).subscribe(o=>{this.srcProjectData=o}):this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.destProjectCode.value}/${this.form.controls.destSiteCode.value}`).subscribe(o=>{this.destProjectData=o})}loadSiteCodes(e,o){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(n=>{"src"==o&&(this.srcSiteCodeList=n),"dest"==o&&(this.destSiteCodeList=n),this.isDataLoading=!1})}loadProjectsList(e,o){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(n=>{"src"==o&&(this.srcProjectsList=n),"dest"==o&&(this.destProjectsList=n),this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.apiService.get("PvTransferWithReplacement/getPvTransferWithReplacementReqById",this.id).subscribe(e=>{null!=e&&(console.log(e),this.requestData=e,this.srcCustCodeControl.setValue(e.srcCustomerCode),this.destCustCodeControl.setValue(e.destCustomerCode),this.srcEmpNumberControl.setValue(e.srcEmployeeNumber),this.destEmpNumberControl.setValue(e.destEmployeeNumber),this.loadProjectsList(e.srcCustomerCode,"src"),this.loadProjectsList(e.destCustomerCode,"dest"),this.form.controls.srcProjectCode.setValue(e.srcProjectCode),this.form.controls.destProjectCode.setValue(e.destProjectCode),this.loadSiteCodes(e.srcProjectCode,"src"),this.loadSiteCodes(e.destProjectCode,"dest"),this.form.controls.srcCustomerCode.setValue(e.srcCustomerCode),this.form.controls.destCustomerCode.setValue(e.destCustomerCode),this.form.controls.srcSiteCode.setValue(e.srcSiteCode),this.form.controls.destSiteCode.setValue(e.destSiteCode),this.form.controls.srcEmployeeNumber.setValue(e.srcEmployeeNumber),this.form.controls.destEmployeeNumber.setValue(e.destEmployeeNumber),this.form.controls.fromDate.setValue(e.fromDate),this.getProjectData("src"),this.getProjectData("dest"),this.id>0&&(this.filteredSrcEmployees=this.srcEmpNumberControl.valueChanges.pipe((0,ot.O)(this.srcEmpNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filtersrcEmpNumbers(o||"")))),this.filteredDestEmployees=this.destEmpNumberControl.valueChanges.pipe((0,ot.O)(this.destEmpNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filterdestEmpNumbers(o||""))))),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){if(this.form.valid){this.form.value.srcCustomerCode=this.srcCustCodeControl.value,this.form.value.destCustomerCode=this.destCustCodeControl.value;let e=new Date(this.form.controls.fromDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.fromDate=e,this.apiService.post("PvTransferWithReplacement",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}else this.utilService.FillUpFields()}onSelectionSiteCode(e){"src"==e?(""!=this.form.controls.srcSiteCode.value&&(this.isDataLoading=!0,this.getProjectData("src"),this.form.controls.fromDate.setValue("")),this.srcEmpNumberControl.setValue(""),this.filteredSrcEmployees=this.srcEmpNumberControl.valueChanges.pipe((0,ot.O)(this.srcEmpNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filtersrcEmpNumbers(o||""))))):"dest"==e&&(""!=this.form.controls.destSiteCode.value&&(this.isDataLoading=!0,this.getProjectData("dest"),this.form.controls.fromDate.setValue("")),this.destEmpNumberControl.setValue(""),this.filteredDestEmployees=this.destEmpNumberControl.valueChanges.pipe((0,ot.O)(this.destEmpNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filterdestEmpNumbers(o||"")))))}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(f.sK),t.Y36(l.qu),t.Y36(v._),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-transfer-with-replacement"]],features:[t.qOj],decls:162,vars:138,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-12","col-lg-12",2,"border","1px solid #f4f4f4","padding-bottom","5px"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","srcProjectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","srcSiteCode",1,"custom-select","mr-sm-2",3,"change"],["auto3","matAutocomplete"],[1,"col-md-12","col-lg-12",2,"padding","5px","text-align","center","font-size","xx-large"],[1,"fas","fa-arrow-alt-circle-down"],[1,"col-md-12","col-lg-12",2,"border","1px solid #f4f4f4","padding-top","5px"],["auto2","matAutocomplete"],["formControlName","destProjectCode",1,"custom-select","mr-sm-2",3,"change"],["formControlName","destSiteCode",1,"custom-select","mr-sm-2",3,"change"],["auto4","matAutocomplete"],[1,"col-md-12","col-lg-12",2,"padding","15px","text-align","center","font-size","xx-large"],[1,"col-md-4","col-lg-4"],[1,"input-group"],["formControlName","fromDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,Fm,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"label",10),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t._UZ(19,"auto-loader",13),t._UZ(20,"input",14),t.ALo(21,"translate"),t.ALo(22,"translate"),t.TgZ(23,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"src")}),t.YNc(25,Im,2,2,"mat-option",17),t.ALo(26,"async"),t.qZA(),t.qZA(),t.YNc(27,Ym,2,1,"span",18),t.YNc(28,Jm,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(29,"div",9),t.TgZ(30,"label",10),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"div",12),t.TgZ(35,"select",19),t.NdJ("change",function(){return o.onSelectionProjectCode("src")}),t.TgZ(36,"option",20),t._uU(37),t.ALo(38,"translate"),t.ALo(39,"translate"),t.qZA(),t.YNc(40,Qm,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(41,Bm,2,1,"span",18),t.YNc(42,Hm,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(43,"div",9),t.TgZ(44,"label",10),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"div",12),t.TgZ(49,"select",22),t.NdJ("change",function(){return o.onSelectionSiteCode("src")}),t.TgZ(50,"option",20),t._uU(51),t.ALo(52,"translate"),t.ALo(53,"translate"),t.qZA(),t.YNc(54,$m,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(55,Vm,2,1,"span",18),t.YNc(56,Gm,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(57,"div",9),t.TgZ(58,"label",10),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"div",11),t.TgZ(62,"div",12),t._UZ(63,"auto-loader",13),t._UZ(64,"input",14),t.ALo(65,"translate"),t.ALo(66,"translate"),t.TgZ(67,"mat-autocomplete",15,23),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"src")}),t.YNc(69,Wm,2,3,"mat-option",17),t.ALo(70,"async"),t.qZA(),t.qZA(),t.YNc(71,zm,2,1,"span",18),t.YNc(72,Xm,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",24),t._UZ(74,"i",25),t.qZA(),t.TgZ(75,"div",26),t.TgZ(76,"div",7),t.TgZ(77,"div",9),t.TgZ(78,"label",10),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"div",11),t.TgZ(82,"div",12),t._UZ(83,"auto-loader",13),t._UZ(84,"input",14),t.ALo(85,"translate"),t.ALo(86,"translate"),t.TgZ(87,"mat-autocomplete",15,27),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"dest")}),t.YNc(89,Km,2,2,"mat-option",17),t.ALo(90,"async"),t.qZA(),t.qZA(),t.YNc(91,tg,2,1,"span",18),t.YNc(92,eg,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(93,"div",9),t.TgZ(94,"label",10),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"div",11),t.TgZ(98,"div",12),t.TgZ(99,"select",28),t.NdJ("change",function(){return o.onSelectionProjectCode("dest")}),t.TgZ(100,"option",20),t._uU(101),t.ALo(102,"translate"),t.ALo(103,"translate"),t.qZA(),t.YNc(104,og,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(105,ig,2,1,"span",18),t.YNc(106,ng,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(107,"div",9),t.TgZ(108,"label",10),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"div",11),t.TgZ(112,"div",12),t.TgZ(113,"select",29),t.NdJ("change",function(){return o.onSelectionSiteCode("dest")}),t.TgZ(114,"option",20),t._uU(115),t.ALo(116,"translate"),t.ALo(117,"translate"),t.qZA(),t.YNc(118,ag,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(119,sg,2,1,"span",18),t.YNc(120,rg,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(121,"div",9),t.TgZ(122,"label",10),t._uU(123),t.ALo(124,"translate"),t.qZA(),t.TgZ(125,"div",11),t.TgZ(126,"div",12),t._UZ(127,"auto-loader",13),t._UZ(128,"input",14),t.ALo(129,"translate"),t.ALo(130,"translate"),t.TgZ(131,"mat-autocomplete",15,30),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"dest")}),t.YNc(133,lg,2,3,"mat-option",17),t.ALo(134,"async"),t.qZA(),t.qZA(),t.YNc(135,cg,2,1,"span",18),t.YNc(136,pg,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(137,"div",31),t.TgZ(138,"div",26),t.TgZ(139,"div",32),t.TgZ(140,"div",11),t.TgZ(141,"label",10),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"div",11),t.TgZ(145,"div",33),t.TgZ(146,"input",34),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(152);return o.openDatePicker(r)}),t.ALo(147,"translate"),t.ALo(148,"translate"),t.qZA(),t.TgZ(149,"div",35),t._UZ(150,"mat-datepicker-toggle",36),t._UZ(151,"mat-datepicker",null,37),t.qZA(),t.qZA(),t.YNc(153,ug,2,1,"span",18),t.YNc(154,dg,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(155,"div",38),t.TgZ(156,"div",39),t.TgZ(157,"div",40),t.TgZ(158,"input",41),t.NdJ("click",function(){return o.closeModel()}),t.ALo(159,"translate"),t.qZA(),t._uU(160," \xa0 "),t.YNc(161,_g,2,3,"input",42),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(24),r=t.MAs(68),c=t.MAs(88),p=t.MAs(132),u=t.MAs(152);let d,_,h,A,C,S,L,U,M,O,F,P,st,H,z,et,ht,ct;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(8),t.Oqu(t.lcZ(16,74,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(21,76,"Please_Enter")," ",t.lcZ(22,78,"Customer_Code"),""),t.Q6J("formControl",o.srcCustCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(26,80,o.filteredSrcCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(d=o.form.get("srcCustomerCode"))&&d.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(_=o.form.get("srcCustomerCode"))?null:_.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(32,82,"Project")),t.xp6(6),t.AsE("",t.lcZ(38,84,"Select")," ",t.lcZ(39,86,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.srcProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(h=o.form.get("srcProjectCode"))&&h.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(A=o.form.get("srcProjectCode"))?null:A.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(46,88,"Site")),t.xp6(6),t.AsE("",t.lcZ(52,90,"Select")," ",t.lcZ(53,92,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.srcSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(C=o.form.get("srcSiteCode"))&&C.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(S=o.form.get("srcSiteCode"))?null:S.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(60,94,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(65,96,"Please_Enter")," ",t.lcZ(66,98,"Employee"),""),t.Q6J("formControl",o.srcEmpNumberControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(70,100,o.filteredSrcEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(L=o.form.get("srcEmployeeNumber"))&&L.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(U=o.form.get("srcEmployeeNumber"))?null:U.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(7),t.Oqu(t.lcZ(80,102,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(85,104,"Please_Enter")," ",t.lcZ(86,106,"Customer_Code"),""),t.Q6J("formControl",o.destCustCodeControl)("matAutocomplete",c),t.xp6(5),t.Q6J("ngForOf",t.lcZ(90,108,o.filteredDestCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(M=o.form.get("destCustomerCode"))&&M.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(O=o.form.get("destCustomerCode"))?null:O.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(96,110,"Project")),t.xp6(6),t.AsE("",t.lcZ(102,112,"Select")," ",t.lcZ(103,114,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.destProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(F=o.form.get("destProjectCode"))&&F.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(P=o.form.get("destProjectCode"))?null:P.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(110,116,"Site")),t.xp6(6),t.AsE("",t.lcZ(116,118,"Select")," ",t.lcZ(117,120,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.destSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(st=o.form.get("destSiteCode"))&&st.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(H=o.form.get("destSiteCode"))?null:H.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(124,122,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(129,124,"Please_Enter")," ",t.lcZ(130,126,"Employee"),""),t.Q6J("formControl",o.destEmpNumberControl)("matAutocomplete",p),t.xp6(5),t.Q6J("ngForOf",t.lcZ(134,128,o.filteredDestEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(z=o.form.get("destEmployeeNumber"))&&z.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(et=o.form.get("destEmployeeNumber"))?null:et.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(6),t.hij(" ",t.lcZ(143,130,"From_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(147,132,"Please_Enter")," ",t.lcZ(148,134,"From_Date"),""),t.Q6J("matDatepicker",u)("min",null==o.srcProjectData?null:o.srcProjectData.startDate)("max",null==o.srcProjectData?null:o.srcProjectData.endDate),t.xp6(4),t.Q6J("for",u),t.xp6(3),t.Q6J("ngIf",!(null!=(ht=o.form.get("fromDate"))&&ht.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(ct=o.form.get("fromDate"))?null:ct.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.s9C("value",t.lcZ(159,136,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,Z.O5,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,l.EJ,l.u,l.YN,l.Kr,j.hl,j.nW,ft.R9,j.Mq,Ut.ey,V.s],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function mg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",55),t.TgZ(1,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().createNew()}),t._UZ(2,"i",57),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.hij("",t.lcZ(4,1,"New_Request")," "))}function gg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function hg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Zg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function fg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Ag(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Cg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function Tg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Request_Type")," "))}function vg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.AsE("",e.requestType,"","ProjectVariations"==e.requestType?"/"+e.requestSubType:"","")}}function xg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Request_Number")," "))}function qg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.requestNumber)}}function bg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Requested_By")," "))}function yg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.requestedBy)}}function Sg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Requested_Date")," "))}function wg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.requestedDate,"dd/MM/yyyy"))}}function Ug(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Effective_Date")," "))}function Dg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.effectiveDate,"dd/MM/yyyy"))}}function Lg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function Ng(i,a){1&i&&(t.TgZ(0,"span",62),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Eg(i,a){1&i&&(t.TgZ(0,"span",63),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Og(i,a){if(1&i&&(t.TgZ(0,"td",59),t.YNc(1,Ng,3,3,"span",60),t.YNc(2,Eg,3,3,"ng-template",null,61,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function kg(i,a){1&i&&(t.TgZ(0,"th",64),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function jg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().edit(n)}),t._UZ(1,"i",70),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Mg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().delete(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function Rg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveRequest(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function Pg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.YNc(1,jg,3,1,"span",67),t.YNc(2,Mg,3,1,"span",67),t.YNc(3,Rg,3,1,"span",67),t.TgZ(4,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewRequest(n)}),t._UZ(5,"i",69),t._uU(6,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request"))}}function Fg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().edit(n)}),t._UZ(1,"i",70),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Ig(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().delete(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function Yg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().approveRequest(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function Jg(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Fg,3,1,"span",67),t.YNc(2,Ig,3,1,"span",67),t.YNc(3,Yg,3,1,"span",67),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)&&!e.isMerged)}}function Qg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().mapEmpToRes(n)}),t._UZ(1,"i",73),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Mapp_Employee_To_Resource"))}}function Bg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().mergeRequest(n.requestNumber)}),t._UZ(1,"i",74),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Merge_Resources"))}}function Hg(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Qg,3,1,"span",67),t.YNc(2,Bg,3,1,"span",67),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(e.canEditReq||e.isAdmin)&&e.isMappedResources)}}function $g(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewRequest(n)}),t._UZ(1,"i",69),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Request"))}}function Vg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewMappings(n.requestNumber)}),t._UZ(1,"i",69),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Resource_Mapping"))}}function Gg(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Jg,4,3,"span",66),t.YNc(2,Hg,3,2,"span",66),t.YNc(3,$g,3,1,"span",67),t.YNc(4,Vg,3,1,"span",67),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isApproved&&!e.isMerged),t.xp6(1),t.Q6J("ngIf",!e.isMappedResources),t.xp6(1),t.Q6J("ngIf",e.isMappedResources)}}function Wg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendumForm(n)}),t._UZ(1,"i",75),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Generate_Addendum"))}}function zg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",76),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function Xg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",77),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function Kg(i,a){if(1&i&&(t.TgZ(0,"td",65),t.YNc(1,Pg,7,4,"span",66),t.YNc(2,Gg,5,4,"span",66),t.YNc(3,Wg,3,1,"span",67),t.YNc(4,zg,3,1,"span",67),t.YNc(5,Xg,3,1,"span",67),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","AddResource"!=e.requestType),t.xp6(1),t.Q6J("ngIf","AddResource"==e.requestType),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&e.fileUrl)}}function t1(i,a){1&i&&t._UZ(0,"tr",78)}function e1(i,a){1&i&&t._UZ(0,"tr",79)}const oo=function(){return{standalone:!0}};let o1=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=_,this.pageService=h,this.oprService=A,this.translate=C,this.displayedColumns=["customerCode","siteCode","projectCode","requestType","requestNumber","requestedBy","requestedDate","effectiveDate","isApproved","Actions"],this.totalItemsCount=0,this.searchValue="",this.sortingOrder="requestedDate asc",this.isLoading=!1,this.isUpdating=!1,this.listType="",this.approvedStatus=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,"","")}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadList(e,o,n,s,r="",c){this.isLoading=!0,this.apiService.getPagination("PvAllRequests/getPvAllRequestsPagedList",this.utilService.getOprQueryString(e,o,n,s,this.approvedStatus,"",0,"",this.listType)).subscribe(p=>{this.isLoading=!1,this.totalItemsCount=0,this.data=new m.by(p.items),this.totalItemsCount=p.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount,this.isLoading=!1}),this.data.sort=this.sort},p=>{this.utilService.ShowApiErrorMessage(p),this.isLoading=!1})}applyFilter(e,o){(e||o)&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType))}openConfirmationDialogManage(e,o,n,s,r,c,p){let u=this.oprService.confirmationDialog(this.dialog,c);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.id=e,u.componentInstance.confirmType="general",u.afterClosed().subscribe(d=>{d?"SwapEmployees"==o?this.apiService.get("PvSwapEmployees/ApproveReqPvSwapEmployeesReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"RemoveResource"==o?this.apiService.get("PvRemoveResource/ApproveReqPvRemoveResourceReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"AddResource"==o?this.apiService.get("PvAddResource/ApproveReqPvAddResourceReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"TransferResource"==o?this.apiService.get("PvTransferResource/ApproveReqPvTransferResourceReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"TransferWithReplacement"==o?this.apiService.get("PvTransferWithReplacement/ApproveReqPvTransferWithReplacementReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"ReplaceResource"==o?this.apiService.get("PvReplaceResource/ApproveReqPvReplaceResourceReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"ProjectVariations"==o?this.apiService.get("PvOpenCloseReq/ApproveReqPvOpenCloseReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):this.isUpdating=!1:this.isUpdating=!1})}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openDialogManage2(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.requestData=e,c.componentInstance.id=e.id,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(null==e?void 0:e.requestNumber,null==e?void 0:e.requestType,g.Oi.update,"Conforming_Approve_Request","Approve",xt,"general"))}edit(e){let o=e.requestType,n=e.requestNumber;"SwapEmployees"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Swap_Employees","Update",Kt):"RemoveResource"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Remove_Resource","Update",Rt):"AddResource"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Adding_Resources","Update",Ht):"TransferResource"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Transfer_Resource","Update",Pt):"ReplaceResource"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Replace_Employee","Update",Mt):"TransferWithReplacement"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Transfer_With_Replacement","Update",Mt):"ProjectVariations"==o&&this.apiService.get("PvOpenCloseReq/getPvOpenCloseReqById",n).subscribe(s=>{this.openDialogManage2(s,g.Oi.update,"Updating_Request_For_Open_Close","Update",kt)})}delete(e){let o=e.requestType,n=e.requestNumber;this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(r=>{r&&n>0&&("SwapEmployees"==o?this.apiService.delete("PvSwapEmployees",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"RemoveResource"==o?this.apiService.delete("PvRemoveResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"AddResource"==o?this.apiService.delete("PvAddResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"TransferResource"==o?this.apiService.delete("PvTransferResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"ReplaceResource"==o?this.apiService.delete("PvReplaceResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"TransferWithReplacement"==o?this.apiService.delete("PvTransferWithReplacement",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"ProjectVariations"==o&&this.apiService.delete("PvOpenCloseReq",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}))},r=>this.utilService.ShowApiErrorMessage(r))}viewRequest(e){let o=e.requestType;"SwapEmployees"==o?this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Swap_Employees","View",Xt):"RemoveResource"==o?this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Remove_Resource","View",Rt):"AddResource"==o?this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Add_Resource","View",Ht):"TransferResource"==o?this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Transfer_Employee","View",Pt):"ReplaceResource"==o?this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Replace_Resource","View",Mt):"ProjectVariations"==o?this.apiService.get("PvOpenCloseReq/getPvOpenCloseReqById",e.requestNumber).subscribe(n=>{this.openDialogManage2(n,g.Oi.create,"Request_For_Open_Close_Project_Site","View",kt)}):"TransferWithReplacement"==o&&this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Transfer_With_Replacement","View",Ft)}translateToolTip(e){return`${this.translate.instant(e)}`}mapEmpToRes(e){this.openDialogManage(e.requestNumber,g.Oi.create,"Employee_To_Resource_Mapping","Add",Jt)}viewMappings(e){this.openDialogManage(e,g.Oi.create,"Employee_Mapping_For_Add_Resources","View",Jt)}mergeRequest(e){this.openConfirmationDialogManage2(e,g.Oi.update,"Confirming_Merge_Request","Merge",xt,"general")}openConfirmationDialogManage2(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?"Confirming_Merge_Request"==n&&this.apiService.get("PvAddResource/mergePvAddResourceReqById",e).subscribe(d=>{d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d)}):this.notifyService.showError(this.translate.instant("Something_Went_Wrong"))})}refresh(){this.searchValue="",this.sortingOrder="requestedDate desc",this.approvedStatus="",this.listType="",this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadApprovals(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}viewAddendum(e){window.open(e.fileUrl)}uploadAdendum(e){let o=this.oprService.openAutoWidthDialog(this.dialog,oe);o.componentInstance.requestData=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewAddendumForm(e){let o=this.utilService.openCrudDialog(this.dialog,qe);o.componentInstance.pvRequest=e,o.componentInstance.type="AddResource"==e.requestType?"ForAddingResources":"RemoveResource"==e.requestType?"ForRemovingResources":"",o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-all-requests"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:119,vars:67,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-2"],[1,"mr-sm-2"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","change","ngModelChange"],["value",""],["value","addResource"],["value","removeResource"],["value","replaceResource"],["value","swapEmployees"],["value","transferResource"],["value","transferWithReplacement"],["value","projectVariations"],["value","approved"],["value","unapproved"],[1,"col-md-3"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[3,"click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-1"],[3,"isLoading"],["class","col-md-2 text-right",4,"ngIf"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","requestType"],["matColumnDef","requestNumber"],["matColumnDef","requestedBy"],["matColumnDef","requestedDate"],["matColumnDef","effectiveDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[1,"col-md-2","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-users"],[1,"fas","fa-redo"],[1,"far","fa-arrow-alt-circle-down"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"label",14),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"select",15),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.listType=s}),t.TgZ(29,"option",16),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"option",17),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"option",18),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"option",19),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"option",20),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"option",21),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"option",22),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"option",23),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"div",13),t.TgZ(54,"label",14),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"select",15),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.approvedStatus=s}),t.TgZ(58,"option",16),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"option",24),t._uU(62,"Approved"),t.qZA(),t.TgZ(63,"option",25),t._uU(64,"UnApproved"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"div",26),t._UZ(66,"label",14),t.TgZ(67,"input",27),t.NdJ("ngModelChange",function(s){return o.searchValue=s}),t.ALo(68,"translate"),t.qZA(),t.qZA(),t.TgZ(69,"div",13),t.TgZ(70,"button",28),t.NdJ("click",function(){return o.applyFilter(o.searchValue,o.listType)}),t._uU(71),t.ALo(72,"translate"),t.qZA(),t._uU(73," \xa0 "),t.TgZ(74,"a",29),t.NdJ("click",function(){return o.refresh()}),t._UZ(75,"i",30),t.qZA(),t._uU(76," \xa0 "),t.qZA(),t.TgZ(77,"div",31),t._UZ(78,"spinner-loader",32),t.qZA(),t.YNc(79,mg,5,3,"div",33),t.qZA(),t._UZ(80,"div",34),t.TgZ(81,"div",35),t.TgZ(82,"div",36),t.ynx(83),t.TgZ(84,"table",37),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(85,38),t.YNc(86,gg,3,3,"th",39),t.YNc(87,hg,2,1,"td",40),t.BQk(),t.ynx(88,41),t.YNc(89,Zg,3,3,"th",39),t.YNc(90,fg,2,1,"td",40),t.BQk(),t.ynx(91,42),t.YNc(92,Ag,3,3,"th",39),t.YNc(93,Cg,2,1,"td",40),t.BQk(),t.ynx(94,43),t.YNc(95,Tg,3,3,"th",39),t.YNc(96,vg,2,2,"td",40),t.BQk(),t.ynx(97,44),t.YNc(98,xg,3,3,"th",39),t.YNc(99,qg,2,1,"td",40),t.BQk(),t.ynx(100,45),t.YNc(101,bg,3,3,"th",39),t.YNc(102,yg,2,1,"td",40),t.BQk(),t.ynx(103,46),t.YNc(104,Sg,3,3,"th",39),t.YNc(105,wg,3,4,"td",40),t.BQk(),t.ynx(106,47),t.YNc(107,Ug,3,3,"th",39),t.YNc(108,Dg,3,4,"td",40),t.BQk(),t.ynx(109,48),t.YNc(110,Lg,3,3,"th",39),t.YNc(111,Og,4,2,"td",40),t.BQk(),t.ynx(112,49),t.YNc(113,kg,3,3,"th",50),t.YNc(114,Kg,6,5,"td",51),t.BQk(),t.YNc(115,t1,1,0,"tr",52),t.YNc(116,e1,1,0,"tr",53),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.ynx(117),t.TgZ(118,"mat-paginator",54),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,31,"Project_Management_Requests")," "),t.xp6(6),t.hij(" ",t.lcZ(11,33,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,35,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,37,"Requests")),t.xp6(10),t.Oqu(t.lcZ(27,39,"RequestType")),t.xp6(2),t.Q6J("ngModel",o.listType)("ngModelOptions",t.DdM(65,oo)),t.xp6(2),t.Oqu(t.lcZ(31,41,"Select")),t.xp6(3),t.Oqu(t.lcZ(34,43,"AddResource")),t.xp6(3),t.Oqu(t.lcZ(37,45,"RemoveResource")),t.xp6(3),t.Oqu(t.lcZ(40,47,"ReplaceResource")),t.xp6(3),t.Oqu(t.lcZ(43,49,"SwapEmployees")),t.xp6(3),t.Oqu(t.lcZ(46,51,"TransferResource")),t.xp6(3),t.Oqu(t.lcZ(49,53,"TransferWithReplacement")),t.xp6(3),t.Oqu(t.lcZ(52,55,"ProjectVariations")),t.xp6(4),t.Oqu(t.lcZ(56,57,"Approval_Status")),t.xp6(2),t.Q6J("ngModel",o.approvedStatus)("ngModelOptions",t.DdM(66,oo)),t.xp6(2),t.Oqu(t.lcZ(60,59,"Select")),t.xp6(8),t.MGl("placeholder","",t.lcZ(68,61,"Search"),"..."),t.Q6J("ngModel",o.searchValue),t.xp6(4),t.Oqu(t.lcZ(72,63,"Search")),t.xp6(7),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",""!=o.listType&&"projectVariations"!=o.listType),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.EJ,l.JJ,l.On,l.YN,l.Kr,l.Fj,Zt.r,Z.O5,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,ut.gM,m.XQ,m.Gk],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function i1(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function n1(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function a1(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function s1(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function r1(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function l1(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function c1(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Request_Type")," "))}function p1(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reqType)}}function u1(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function d1(i,a){1&i&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function _1(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function m1(i,a){if(1&i&&(t.TgZ(0,"td",35),t.YNc(1,d1,3,3,"span",36),t.YNc(2,_1,3,3,"ng-template",null,37,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function g1(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function h1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n)}),t._UZ(1,"i",45),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Z1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",46),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function f1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",47),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function A1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",48),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function C1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",49),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function T1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.YNc(1,h1,3,1,"span",42),t.YNc(2,Z1,3,1,"span",42),t.YNc(3,f1,3,1,"span",42),t.TgZ(4,"span",43),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s)}),t._UZ(5,"i",44),t.qZA(),t.YNc(6,A1,3,1,"span",42),t.YNc(7,C1,3,1,"span",42),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&e.canEditReq),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&e.canEditReq),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request")),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin))}}function v1(i,a){1&i&&t._UZ(0,"tr",50)}function x1(i,a){1&i&&t._UZ(0,"tr",51)}const q1=function(){return{standalone:!0}};let b1=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=_,this.pageService=h,this.oprService=A,this.translate=C,this.displayedColumns=["customerCode","siteCode","projectCode","reqType","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvOpenCloseReq/getPvOpenCloseReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.isLoading=!1,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.requestData=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?(this.isLoading=!0,this.apiService.get("PvOpenCloseReq/ApproveReqPvOpenCloseReqById",e).subscribe(d=>{this.isLoading=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isLoading=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)})):this.isLoading=!1})}edit(e){this.isLoading||this.openDialogManage(e,g.Oi.update,"Updating_Request_For_Open_Close","Update",kt)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvOpenCloseReq",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.Oi.create,"Request_For_Open_Close_Project_Site","View",kt)}mergeRequest(e){}approveRequest(e){this.isLoading?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isLoading=!0,this.openConfirmationDialogManage(e,g.Oi.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}viewAddendum(e){window.open(e.fileUrl)}uploadAdendum(e){let o=this.oprService.openAutoWidthDialog(this.dialog,oe);o.componentInstance.requestData=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-pv-open-close-reqs"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:56,vars:26,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","reqType"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.qZA(),t._UZ(29,"div",17),t.TgZ(30,"div",18),t.TgZ(31,"div",19),t.ynx(32),t.TgZ(33,"table",20),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(34,21),t.YNc(35,i1,3,3,"th",22),t.YNc(36,n1,2,1,"td",23),t.BQk(),t.ynx(37,24),t.YNc(38,a1,3,3,"th",22),t.YNc(39,s1,2,1,"td",23),t.BQk(),t.ynx(40,25),t.YNc(41,r1,3,3,"th",22),t.YNc(42,l1,2,1,"td",23),t.BQk(),t.ynx(43,26),t.YNc(44,c1,3,3,"th",22),t.YNc(45,p1,2,1,"td",23),t.BQk(),t.ynx(46,27),t.YNc(47,u1,3,3,"th",22),t.YNc(48,m1,4,2,"td",23),t.BQk(),t.ynx(49,28),t.YNc(50,g1,3,3,"th",29),t.YNc(51,T1,8,6,"td",30),t.BQk(),t.YNc(52,v1,1,0,"tr",31),t.YNc(53,x1,1,0,"tr",32),t.qZA(),t.ynx(54),t.TgZ(55,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,15,"Requests_For_Open_Close_Project_Sites")," "),t.xp6(6),t.hij(" ",t.lcZ(11,17,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,19,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,21,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,23,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(25,q1)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function y1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function S1(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function w1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function U1(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function D1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function L1(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function N1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee")," "))}function E1(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNumber)}}function O1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"From_Date")," "))}function k1(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.ToDateString(e.fromDate))}}function j1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function M1(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function R1(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function P1(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,M1,3,3,"span",40),t.YNc(2,R1,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function F1(i,a){1&i&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function I1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",49),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Y1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function J1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function Q1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendumForm(n)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Generate_Addendum"))}}function B1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function H1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function $1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",45),t.YNc(1,I1,3,1,"span",46),t.YNc(2,Y1,3,1,"span",46),t.YNc(3,J1,3,1,"span",46),t.YNc(4,Q1,3,1,"span",46),t.YNc(5,B1,3,1,"span",46),t.YNc(6,H1,3,1,"span",46),t.TgZ(7,"span",47),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s)}),t._UZ(8,"i",48),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&e.fileUrl),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request"))}}function V1(i,a){1&i&&t._UZ(0,"tr",55)}function G1(i,a){1&i&&t._UZ(0,"tr",56)}const W1=function(){return{standalone:!0}};let z1=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=_,this.pageService=h,this.oprService=A,this.translate=C,this.displayedColumns=["customerCode","siteCode","projectCode","employeeNumber","fromDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUpdating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvRemoveResource/getPvRemoveResourceReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,console.log(r.items),this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?this.apiService.get("PvRemoveResource/ApproveReqPvRemoveResourceReqById",e).subscribe(d=>{this.isUpdating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d),this.isUpdating=!1}):this.isUpdating=!1})}create(){!this.isUpdating&&!this.isLoading&&this.openDialogManage(0,g.Oi.create,"New_Request_For_Remove_Resource","Add",Rt)}edit(e){!this.isUpdating&&!this.isLoading&&this.openDialogManage(e,g.Oi.update,"Updating_Request_For_Remove_Resource","Update",Rt)}delete(e){!this.isUpdating&&!this.isUpdating&&this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&(this.isUpdating=!0,this.apiService.delete("PvRemoveResource",e).subscribe(s=>{this.isUpdating=!1,this.utilService.OkMessage(),this.ngOnInit()}))},n=>{this.isUpdating=!1,this.utilService.ShowApiErrorMessage(n)})}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e.id,g.Oi.create,"Request_For_Remove_Resource","View",Rt)}mergeRequest(e){}approveRequest(e){this.isUpdating||this.isLoading?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(e,g.Oi.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}viewAddendum(e){window.open(e.fileUrl)}uploadAdendum(e){let o=this.oprService.openAutoWidthDialog(this.dialog,oe);o.componentInstance.requestData=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewAddendumForm(e){let o=this.utilService.openCrudDialog(this.dialog,qe);o.componentInstance.pvRequest=e,o.componentInstance.type="AddResource"==e.requestType?"ForAddingResources":"RemoveResource"==e.requestType?"ForRemovingResources":"",o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-remove-resource"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:64,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","employeeNumber"],["matColumnDef","fromDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"far","fa-arrow-alt-circle-down"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.TgZ(36,"div",22),t.ynx(37),t.TgZ(38,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(39,24),t.YNc(40,y1,3,3,"th",25),t.YNc(41,S1,2,1,"td",26),t.BQk(),t.ynx(42,27),t.YNc(43,w1,3,3,"th",25),t.YNc(44,U1,2,1,"td",26),t.BQk(),t.ynx(45,28),t.YNc(46,D1,3,3,"th",25),t.YNc(47,L1,2,1,"td",26),t.BQk(),t.ynx(48,29),t.YNc(49,N1,3,3,"th",25),t.YNc(50,E1,2,1,"td",26),t.BQk(),t.ynx(51,30),t.YNc(52,O1,3,3,"th",25),t.YNc(53,k1,2,1,"td",26),t.BQk(),t.ynx(54,31),t.YNc(55,j1,3,3,"th",25),t.YNc(56,P1,4,2,"td",26),t.BQk(),t.ynx(57,32),t.YNc(58,F1,3,3,"th",33),t.YNc(59,$1,9,7,"td",34),t.BQk(),t.YNc(60,V1,1,0,"tr",35),t.YNc(61,G1,1,0,"tr",36),t.qZA(),t.ynx(62),t.TgZ(63,"mat-paginator",37),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Remove_Resource")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,W1)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function X1(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function K1(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function th(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function eh(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function oh(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function ih(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function nh(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Resigned_Employee")," "))}function ah(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.resignedEmployeeNumber)}}function sh(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Replaced_Employee")," "))}function rh(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.replacedEmployeeNumber)}}function lh(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"From_Date")," "))}function ch(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.ToDateString(e.fromDate))}}function ph(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function uh(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function dh(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function _h(i,a){if(1&i&&(t.TgZ(0,"td",40),t.YNc(1,uh,3,3,"span",41),t.YNc(2,dh,3,3,"ng-template",null,42,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function mh(i,a){1&i&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function gh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function hh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function Zh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function fh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function Ah(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function Ch(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",46),t.YNc(1,gh,3,1,"span",47),t.YNc(2,hh,3,1,"span",47),t.YNc(3,Zh,3,1,"span",47),t.TgZ(4,"span",48),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s.id)}),t._UZ(5,"i",49),t.qZA(),t.YNc(6,fh,3,1,"span",47),t.YNc(7,Ah,3,1,"span",47),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.isApproved&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!e.isApproved&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request")),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&!e.fileUrl&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&!e.fileUrl&&(e.canApproveReq||e.isAdmin))}}function Th(i,a){1&i&&t._UZ(0,"tr",55)}function vh(i,a){1&i&&t._UZ(0,"tr",56)}const xh=function(){return{standalone:!0}};let qh=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=_,this.pageService=h,this.oprService=A,this.translate=C,this.displayedColumns=["customerCode","siteCode","projectCode","resignedEmployeeNumber","replacedEmployeeNumber","fromDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUpdating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvReplaceResource/getPvReplaceResourceReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?this.apiService.get("PvReplaceResource/ApproveReqPvReplaceResourceReqById",e).subscribe(d=>{this.isUpdating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUpdating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)}):this.isUpdating=!1})}create(){this.openDialogManage(0,g.Oi.create,"New_Request_For_Replace_Employee","Add",Mt)}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Request_For_Replace_Employee","Update",Mt)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvReplaceResource",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.Oi.create,"Add_Resource_Request","View",Mt)}mergeRequest(e){}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(e,g.Oi.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}uploadAdendum(e){}viewAddendum(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-replace-employee"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:67,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","resignedEmployeeNumber"],["matColumnDef","replacedEmployeeNumber"],["matColumnDef","fromDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.TgZ(36,"div",22),t.ynx(37),t.TgZ(38,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(39,24),t.YNc(40,X1,3,3,"th",25),t.YNc(41,K1,2,1,"td",26),t.BQk(),t.ynx(42,27),t.YNc(43,th,3,3,"th",25),t.YNc(44,eh,2,1,"td",26),t.BQk(),t.ynx(45,28),t.YNc(46,oh,3,3,"th",25),t.YNc(47,ih,2,1,"td",26),t.BQk(),t.ynx(48,29),t.YNc(49,nh,3,3,"th",25),t.YNc(50,ah,2,1,"td",26),t.BQk(),t.ynx(51,30),t.YNc(52,sh,3,3,"th",25),t.YNc(53,rh,2,1,"td",26),t.BQk(),t.ynx(54,31),t.YNc(55,lh,3,3,"th",25),t.YNc(56,ch,2,1,"td",26),t.BQk(),t.ynx(57,32),t.YNc(58,ph,3,3,"th",25),t.YNc(59,_h,4,2,"td",26),t.BQk(),t.ynx(60,33),t.YNc(61,mh,3,3,"th",34),t.YNc(62,Ch,8,6,"td",35),t.BQk(),t.YNc(63,Th,1,0,"tr",36),t.YNc(64,vh,1,0,"tr",37),t.qZA(),t.ynx(65),t.TgZ(66,"mat-paginator",38),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Replace_Employee")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,xh)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function bh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function yh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcCustomerCode)}}function Sh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function wh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcSiteCode)}}function Uh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Dh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcProjectCode)}}function Lh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function Nh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destCustomerCode)}}function Eh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Oh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destSiteCode)}}function kh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function jh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destProjectCode)}}function Mh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee")," "))}function Rh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNumber)}}function Ph(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"From_Date")," "))}function Fh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.ToDateString(e.fromDate))}}function Ih(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function Yh(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Jh(i,a){1&i&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Qh(i,a){if(1&i&&(t.TgZ(0,"td",41),t.YNc(1,Yh,3,3,"span",42),t.YNc(2,Jh,3,3,"ng-template",null,43,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function Bh(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Hh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function $h(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function Vh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function Gh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function Wh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function zh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",47),t.YNc(1,Hh,3,1,"span",48),t.YNc(2,$h,3,1,"span",48),t.YNc(3,Vh,3,1,"span",48),t.TgZ(4,"span",49),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s.id)}),t._UZ(5,"i",50),t.qZA(),t.YNc(6,Gh,3,1,"span",48),t.YNc(7,Wh,3,1,"span",48),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request")),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin))}}function Xh(i,a){1&i&&t._UZ(0,"tr",56)}function Kh(i,a){1&i&&t._UZ(0,"tr",57)}const tZ=function(){return{standalone:!0}};let eZ=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=_,this.pageService=h,this.oprService=A,this.translate=C,this.displayedColumns=["srcCustomerCode","srcSiteCode","srcProjectCode","destCustomerCode","destSiteCode","destProjectCode","employeeNumber","fromDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUpdating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvTransferResource/getPvTransferResourceReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u&&this.apiService.getall(`PvTransferResource/ApproveReqPvTransferResourceReqById/${e}`).subscribe(d=>{this.isUpdating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUpdating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)})})}create(){this.openDialogManage(0,g.Oi.create,"New_Request_For_Transfer_Resource","Add",Pt)}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Request_For_Transfer_Resource","Update",Pt)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvTransferResource",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.Oi.create,"Request_For_Transfer_Employee","View",Pt)}mergeRequest(e){}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(e,g.Oi.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}uploadAdendum(e){}viewAddendum(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-transfer-employee"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:72,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","srcCustomerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","srcSiteCode"],["matColumnDef","srcProjectCode"],["matColumnDef","destCustomerCode"],["matColumnDef","destSiteCode"],["matColumnDef","destProjectCode"],["matColumnDef","employeeNumber"],["matColumnDef","fromDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.ynx(36),t.TgZ(37,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(38,23),t.YNc(39,bh,3,3,"th",24),t.YNc(40,yh,2,1,"td",25),t.BQk(),t.ynx(41,26),t.YNc(42,Sh,3,3,"th",24),t.YNc(43,wh,2,1,"td",25),t.BQk(),t.ynx(44,27),t.YNc(45,Uh,3,3,"th",24),t.YNc(46,Dh,2,1,"td",25),t.BQk(),t.ynx(47,28),t.YNc(48,Lh,3,3,"th",24),t.YNc(49,Nh,2,1,"td",25),t.BQk(),t.ynx(50,29),t.YNc(51,Eh,3,3,"th",24),t.YNc(52,Oh,2,1,"td",25),t.BQk(),t.ynx(53,30),t.YNc(54,kh,3,3,"th",24),t.YNc(55,jh,2,1,"td",25),t.BQk(),t.ynx(56,31),t.YNc(57,Mh,3,3,"th",24),t.YNc(58,Rh,2,1,"td",25),t.BQk(),t.ynx(59,32),t.YNc(60,Ph,3,3,"th",24),t.YNc(61,Fh,2,1,"td",25),t.BQk(),t.ynx(62,33),t.YNc(63,Ih,3,3,"th",24),t.YNc(64,Qh,4,2,"td",25),t.BQk(),t.ynx(65,34),t.YNc(66,Bh,3,3,"th",35),t.YNc(67,zh,8,6,"td",36),t.BQk(),t.YNc(68,Xh,1,0,"tr",37),t.YNc(69,Kh,1,0,"tr",38),t.qZA(),t.BQk(),t.qZA(),t.ynx(70),t.TgZ(71,"mat-paginator",39),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Transfer_Resource")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,tZ)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function oZ(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function iZ(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcCustomerCode)}}function nZ(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function aZ(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcSiteCode)}}function sZ(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function rZ(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcProjectCode)}}function lZ(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function cZ(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destCustomerCode)}}function pZ(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function uZ(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destSiteCode)}}function dZ(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function _Z(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destProjectCode)}}function mZ(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Source_Employee")," "))}function gZ(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcEmployeeNumber)}}function hZ(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Destination_Employee")," "))}function ZZ(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destEmployeeNumber)}}function fZ(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"From_Date")," "))}function AZ(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.ToDateString(e.fromDate))}}function CZ(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function TZ(i,a){1&i&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function vZ(i,a){1&i&&(t.TgZ(0,"span",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function xZ(i,a){if(1&i&&(t.TgZ(0,"td",42),t.YNc(1,TZ,3,3,"span",43),t.YNc(2,vZ,3,3,"ng-template",null,44,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function qZ(i,a){1&i&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function bZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function yZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function SZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function wZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function UZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function DZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",48),t.YNc(1,bZ,3,1,"span",49),t.YNc(2,yZ,3,1,"span",49),t.YNc(3,SZ,3,1,"span",49),t.TgZ(4,"span",50),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s.id)}),t._UZ(5,"i",51),t.qZA(),t.YNc(6,wZ,3,1,"span",49),t.YNc(7,UZ,3,1,"span",49),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request")),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin))}}function LZ(i,a){1&i&&t._UZ(0,"tr",57)}function NZ(i,a){1&i&&t._UZ(0,"tr",58)}const EZ=function(){return{standalone:!0}};let OZ=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=_,this.pageService=h,this.oprService=A,this.translate=C,this.displayedColumns=["srcCustomerCode","srcSiteCode","srcProjectCode","destCustomerCode","destSiteCode","destProjectCode","srcEmployeeNumber","destEmployeeNumber","fromDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUpdating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvTransferWithReplacement/getPvTransferWithReplacementReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u&&this.apiService.get("PvTransferWithReplacement/ApproveReqPvTransferWithReplacementReqById",e).subscribe(d=>{this.isUpdating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUpdating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)})})}create(){this.openDialogManage(0,g.Oi.create,"New_Request_For_Transfer_Resource","Add",Ft)}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Request_For_Transfer_Resource","Update",Ft)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvTransferWithReplacement",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.Oi.create,"Request_For_Transfer_Employee","View",Ft)}mergeRequest(e){}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(e,g.Oi.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}uploadAdendum(e){}viewAddendum(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-transfer-with-replacement"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:75,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","srcCustomerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","srcSiteCode"],["matColumnDef","srcProjectCode"],["matColumnDef","destCustomerCode"],["matColumnDef","destSiteCode"],["matColumnDef","destProjectCode"],["matColumnDef","srcEmployeeNumber"],["matColumnDef","destEmployeeNumber"],["matColumnDef","fromDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.ynx(36),t.TgZ(37,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(38,23),t.YNc(39,oZ,3,3,"th",24),t.YNc(40,iZ,2,1,"td",25),t.BQk(),t.ynx(41,26),t.YNc(42,nZ,3,3,"th",24),t.YNc(43,aZ,2,1,"td",25),t.BQk(),t.ynx(44,27),t.YNc(45,sZ,3,3,"th",24),t.YNc(46,rZ,2,1,"td",25),t.BQk(),t.ynx(47,28),t.YNc(48,lZ,3,3,"th",24),t.YNc(49,cZ,2,1,"td",25),t.BQk(),t.ynx(50,29),t.YNc(51,pZ,3,3,"th",24),t.YNc(52,uZ,2,1,"td",25),t.BQk(),t.ynx(53,30),t.YNc(54,dZ,3,3,"th",24),t.YNc(55,_Z,2,1,"td",25),t.BQk(),t.ynx(56,31),t.YNc(57,mZ,3,3,"th",24),t.YNc(58,gZ,2,1,"td",25),t.BQk(),t.ynx(59,32),t.YNc(60,hZ,3,3,"th",24),t.YNc(61,ZZ,2,1,"td",25),t.BQk(),t.ynx(62,33),t.YNc(63,fZ,3,3,"th",24),t.YNc(64,AZ,2,1,"td",25),t.BQk(),t.ynx(65,34),t.YNc(66,CZ,3,3,"th",24),t.YNc(67,xZ,4,2,"td",25),t.BQk(),t.ynx(68,35),t.YNc(69,qZ,3,3,"th",36),t.YNc(70,DZ,8,6,"td",37),t.BQk(),t.YNc(71,LZ,1,0,"tr",38),t.YNc(72,NZ,1,0,"tr",39),t.qZA(),t.BQk(),t.qZA(),t.ynx(73),t.TgZ(74,"mat-paginator",40),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Transfer_Resource")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,EZ)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(34),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function kZ(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArab?e.siteArbName:e.siteName)}}function jZ(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.costPerUnit+e.margin)}}function MZ(i,a){1&i&&(t.TgZ(0,"td"),t._uU(1,"-"),t.qZA())}function RZ(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.quantity)}}function PZ(i,a){1&i&&(t.TgZ(0,"td"),t._uU(1,"-"),t.qZA())}function FZ(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.quantity*(e.costPerUnit+e.margin))}}function IZ(i,a){1&i&&(t.TgZ(0,"td",37),t._uU(1,"-"),t.qZA())}function YZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",42),t.TgZ(1,"button",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),s=n.$implicit,r=n.index;return t.oxw(2).getResourceSubCostingList(s,r)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit")))}function JZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",42),t.TgZ(1,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).cancelEditCosting()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Cancel")))}function QZ(i,a){if(1&i&&(t.TgZ(0,"tr",38),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,jZ,2,1,"td",39),t.YNc(4,MZ,2,0,"td",39),t.YNc(5,RZ,2,1,"td",39),t.YNc(6,PZ,2,0,"td",39),t.YNc(7,FZ,2,1,"td",40),t.YNc(8,IZ,2,0,"td",40),t.TgZ(9,"td"),t.YNc(10,YZ,4,3,"span",41),t.YNc(11,JZ,4,3,"span",41),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.Oqu(n.isArab?e.nameInArabic:e.nameInEnglish),t.xp6(1),t.Q6J("ngIf",0!=e.costPerUnit),t.xp6(1),t.Q6J("ngIf",0==e.costPerUnit),t.xp6(1),t.Q6J("ngIf",0!=e.quantity),t.xp6(1),t.Q6J("ngIf",0==e.quantity),t.xp6(1),t.Q6J("ngIf",0!=e.quantity),t.xp6(1),t.Q6J("ngIf",0==e.quantity),t.xp6(2),t.Q6J("ngIf",-1==n.activeResourceIndex),t.xp6(1),t.Q6J("ngIf",n.activeResourceIndex==o&&(null==n.projectBudgetCosting.resourceCostingsList[n.activeResourceIndex]?null:n.projectBudgetCosting.resourceCostingsList[n.activeResourceIndex].costPerUnit)+(null==n.projectBudgetCosting.resourceCostingsList[n.activeResourceIndex]?null:n.projectBudgetCosting.resourceCostingsList[n.activeResourceIndex].margin)==0)}}function BZ(i,a){if(1&i&&(t.TgZ(0,"table",34),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"th"),t.qZA(),t.qZA(),t.TgZ(16,"tbody"),t.YNc(17,QZ,12,9,"tr",35),t.TgZ(18,"tr"),t.TgZ(19,"th",36),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",37),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,7,"Resource")," "),t.xp6(3),t.Oqu(t.lcZ(8,9,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(11,11,"Count")),t.xp6(3),t.Oqu(t.lcZ(14,13,"Amount")),t.xp6(4),t.Q6J("ngForOf",e.projectBudgetCosting.resourceCostingsList),t.xp6(3),t.hij(" ",t.lcZ(21,15,"Total")," "),t.xp6(3),t.hij(" ",e.grandTotal," ")}}function HZ(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.costHead),t.xp6(1),t.Oqu(o.isArab?null==e?null:e.costNameInArabic:null==e?null:e.costNameInEnglish)}}function $Z(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",54),t._uU(2),t.qZA(),t.TgZ(3,"td",55),t._uU(4),t.qZA(),t.TgZ(5,"td",56),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(3).removeSubCostings(s)}),t.TgZ(6,"a",57),t._UZ(7,"i",58),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(3);let n;t.xp6(2),t.Oqu(o.isArab?null==(n=o.getCostHead(e.costHead))?null:n.costNameInArabic:null==(n=o.getCostHead(e.costHead))?null:n.costNameInEnglish),t.xp6(2),t.Oqu(e.amount)}}function VZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).SubCostingOK()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"OK")))}const GZ=function(){return{standalone:!0}};function WZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"table",49),t.TgZ(1,"tbody"),t.TgZ(2,"tr"),t.TgZ(3,"th",50),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",51),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"th"),t.qZA(),t.YNc(10,$Z,8,2,"tr",52),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",37),t._uU(16),t.qZA(),t._UZ(17,"th"),t.qZA(),t.TgZ(18,"tr"),t.TgZ(19,"td",37),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"td"),t.TgZ(23,"input",53),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return s.projectBudgetCosting.resourceCostingsList[s.activeResourceIndex].margin=n})("keyup",function(){return t.CHM(e),t.oxw(2).changeMargin()}),t.ALo(24,"translate"),t.qZA(),t.qZA(),t._UZ(25,"td"),t.qZA(),t.TgZ(26,"tr"),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th",37),t._uU(31),t.qZA(),t.TgZ(32,"th"),t.YNc(33,VZ,4,3,"span",39),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,12,"Costing_Head")," "),t.xp6(3),t.Oqu(t.lcZ(8,14,"Amount")),t.xp6(3),t.Q6J("ngForOf",e.resourceSubCostingList),t.xp6(3),t.Oqu(t.lcZ(14,16,"Sub_Total")),t.xp6(3),t.hij(" ",null==e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex]?null:e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].costPerUnit," "),t.xp6(4),t.Oqu(t.lcZ(21,18,"Margin")),t.xp6(3),t.s9C("placeholder",t.lcZ(24,20,"Margin")),t.Q6J("ngModel",e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].margin)("ngModelOptions",t.DdM(24,GZ)),t.xp6(5),t.Oqu(t.lcZ(29,22,"Cost_Per_Unit")),t.xp6(3),t.hij(" ",(null==e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex]?null:e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].costPerUnit)+(null==e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex]?null:e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].margin)," "),t.xp6(2),t.Q6J("ngIf",(null==e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex]?null:e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].costPerUnit)+(null==e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex]?null:e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].margin)>0)}}function zZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"div",23),t.TgZ(2,"div",3),t.TgZ(3,"div",24),t.TgZ(4,"select",44),t.NdJ("change",function(n){return t.CHM(e),t.oxw().selectCostHead(n)}),t.TgZ(5,"option",20),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.YNc(9,HZ,2,2,"option",21),t.qZA(),t.qZA(),t.TgZ(10,"div",25),t._UZ(11,"input",45),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",26),t.TgZ(15,"a",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateSubCostings()}),t._UZ(16,"i",47),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,WZ,34,25,"table",48),t.qZA()}if(2&i){const e=t.oxw();t.xp6(6),t.AsE("",t.lcZ(7,6,"Select")," ",t.lcZ(8,8,"Costing_Head")," "),t.xp6(3),t.Q6J("ngForOf",e.resourceExpenceHeadSelectList),t.xp6(2),t.hYB("placeholder","",t.lcZ(12,10,"Enter")," ",t.lcZ(13,12,"Amount"),""),t.xp6(6),t.Q6J("ngIf",-1!=e.activeResourceIndex)}}function XZ(i,a){1&i&&t._UZ(0,"input",59)}function KZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().skippEstimationType()}),t.qZA()}}let ie=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.skillSetsList=[],this.numberRegEx=/\-?\d*\.?\d{1,2}/,this.isArab=!1,this.canSave=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.getAllSkillSetList(),this.setForm()}getAllSkillSetList(){this.apiService.getall("Skillset/GetAllSkillsetList").subscribe(e=>{this.skillSetsList=e,console.log(e)})}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null==(null===(e=this.project)||void 0===e?void 0:e.siteCode)?"":this.project.siteCode,l.kI.required],subCostAmount:[""],subCostCostHead:[""],margin:[0,l.kI.pattern(this.numberRegEx)]}),this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{var n;null!=o?(this.siteCodeSelectList=o,null!=(null===(n=this.project)||void 0===n?void 0:n.siteCode)&&(this.loadInitialData(),this.form.controls.siteCode.disable({onlySelf:!0}))):this.siteCodeSelectList=[]})}closeModel(){this.dialogRef.close()}submit(){this.form.valid&&0!=this.grandTotal?this.apiService.post("projectBudgetCosting/createProjectResourceCostingForSite",this.projectBudgetCosting).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.log(e),console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}loadInitialData(){this.apiService.getall(`projectBudgetCosting/getProjectResourceCostingForSite/${this.project.customerCode}/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{if(null!=e.resourceCostingsList){console.log(e.resourceCostingsList);for(let o=0;o<e.resourceCostingsList.length;o++)e.resourceCostingsList[o].nameInEnglish=this.skillSetsList.find(n=>n.skillSetCode==e.resourceCostingsList[o].skillsetCode).nameInEnglish,e.resourceCostingsList[o].nameInArabic=this.skillSetsList.find(n=>n.skillSetCode==e.resourceCostingsList[o].skillsetCode).nameInArabic}this.projectBudgetCosting=e,0==this.projectBudgetCosting.status?this.createNewProjectBudgetCosting():3!=this.projectBudgetCosting.status&&this.createNewResourceBudgetCostingList(),this.findTotalsCosts()}),this.apiService.getall("OperationExpenseHead/getOperationExpenseHeadsForResources").subscribe(e=>{this.resourceExpenceHeadSelectList=e})}createNewProjectBudgetCosting(){this.projectBudgetCosting.customerCode=this.project.customerCode,this.projectBudgetCosting.projectCode=this.project.projectCode,this.projectBudgetCosting.siteCode=this.form.controls.siteCode.value,this.projectBudgetCosting.serviceType="SKILLSET",this.createNewResourceBudgetCostingList()}createNewResourceBudgetCostingList(){this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectBudgetCosting.resourceCostingsList=[];let o=[];for(let n=0;n<(null==e?void 0:e.length);n++){let s={costPerUnit:0,projectBudgetCostingId:0,quantity:e[n].quantity,margin:0,resourceCostingId:0,resourceSubCostingList:o.slice(),skillSetCode:e[n].skillSetCode,nameInEnglish:e[n].nameInEnglish,nameInArabic:e[n].nameInArabic,totResourceCost:0,siteCode:this.form.controls.siteCode.value};this.projectBudgetCosting.resourceCostingsList.push(s)}})}getResourceSubCostingList(e,o){this.activeResourceIndex=o,this.resourceSubCostingList=e.resourceSubCostingList.slice(),this.totalForResourceUnit=e.costPerUnit,this.findTotalsCosts()}findTotalsCosts(){var e,o;this.grandTotal=0,0!=(null===(e=this.projectBudgetCosting.resourceCostingsList)||void 0===e?void 0:e.length)&&(null===(o=this.projectBudgetCosting.resourceCostingsList)||void 0===o||o.forEach(n=>{n.costPerUnit=0,n.resourceSubCostingList.forEach(s=>{n.costPerUnit+=s.amount}),n.totResourceCost=(n.costPerUnit+n.margin)*n.quantity,this.grandTotal=this.grandTotal+n.totResourceCost}))}onSelectSiteCode(e){this.totalForResourceUnit=0,this.form.controls.siteCode.setValue(e.target.value),this.loadInitialData()}addUpdateSubCostings(){var e;let o=this.form.controls.subCostAmount.value,n=this.form.controls.subCostCostHead.value;if(o>0&&""!=o&&""!=n){let s={amount:o,costHead:n};if(null==this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList.find(c=>c.costHead==n))null===(e=this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList)||void 0===e||e.push(s);else{let c=this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList.findIndex(p=>p.costHead==n);this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList[c].amount=o}this.findTotalsCosts(),this.getResourceSubCostingList(this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex],this.activeResourceIndex),this.resetSubCosting()}this.canSave=!this.projectBudgetCosting.resourceCostingsList.find(s=>s.totResourceCost<=0)}removeSubCostings(e){this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList.splice(e,1),this.findTotalsCosts(),this.getResourceSubCostingList(this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex],this.activeResourceIndex)}resetSubCosting(){this.form.controls.subCostAmount.setValue(""),this.form.controls.subCostCostHead.setValue("")}selectCostHead(e){let o=e.target.value;if(-1!=this.activeResourceIndex){this.form.controls.subCostCostHead.setValue(e.target.value);let n=this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList.find(s=>s.costHead==o);this.form.controls.subCostAmount.setValue(null!=n?n.amount:"")}else this.form.controls.subCostCostHead.setValue(""),this.form.controls.subCostAmount.setValue("")}changeMargin(){this.getResourceSubCostingList(this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex],this.activeResourceIndex),this.findTotalsCosts()}getCostHead(e){return this.resourceExpenceHeadSelectList.find(o=>o.costHead==e)}getSkillSet(e){return this.skillSetsList.find(o=>o.skillSetCode==e)}SubCostingOK(){this.activeResourceIndex=-1,this.canSave=!this.projectBudgetCosting.resourceCostingsList.find(e=>e.totResourceCost<=0)}cancelEditCosting(){this.activeResourceIndex=-1,this.canSave=!this.projectBudgetCosting.resourceCostingsList.find(e=>e.totResourceCost<=0)}skippEstimationType(){this.apiService.post("projectBudgetCosting/skippEstimationType",{projectCode:this.project.projectCode,siteCode:this.project.siteCode,type:"resource"}).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-resource-costing"]],features:[t.qOj],decls:65,vars:39,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-6",2,"padding-right","0"],[1,"paddingtop15"],[1,"col-md-6","col-lg-6"],[1,"col-md-5","col-lg-4"],[1,"col-md-2","col-lg-1"],["class","table  table-bordered table-borderedcustom no-wrap","id","table",4,"ngIf"],["class","col-md-6 col-lg-6",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button","value","CLOSE",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SAVE",4,"ngIf"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SKIP",3,"click",4,"ngIf"],[3,"value"],["id","table",1,"table","table-bordered","table-borderedcustom","no-wrap"],["class","selected",4,"ngFor","ngForOf"],["colspan","3",2,"text-align","right"],[2,"text-align","right"],[1,"selected"],[4,"ngIf"],["style","text-align: right;",4,"ngIf"],["style","font-size:smaller",4,"ngIf"],[2,"font-size","smaller"],["type","button",1,"btn","waves-effect","waves-light","btn-outline-primary",3,"click"],["formControlName","subCostCostHead",1,"custom-select","mr-sm-2",3,"change"],["type","number","formControlName","subCostAmount",1,"form-control",3,"placeholder"],[2,"font-size","30px",3,"click"],[1,"icon-plus"],["class","table tablecolor  table-bordered no-wrap",4,"ngIf"],[1,"table","tablecolor","table-bordered","no-wrap"],["width","60%"],["width","30%"],[4,"ngFor","ngForOf"],["type","number",1,"form-control",2,"text-align","right",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],[2,"width","60%"],[2,"width","30%","text-align","right"],[2,"width","10%","text-align","right",3,"click"],[1,"tableicons"],[1,"icon-trash"],["type","submit","value","SAVE",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock"],["type","button","value","SKIP",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1," \xd7"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",3),t.TgZ(9,"div",7),t.TgZ(10,"h4",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(13,"div",9),t.TgZ(14,"div"),t.TgZ(15,"div",4),t.TgZ(16,"div",10),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t.TgZ(19,"label",13),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t._UZ(24,"input",16),t.ALo(25,"translate"),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(28,"div",12),t.TgZ(29,"label",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",14),t.TgZ(33,"div",15),t._UZ(34,"input",18),t.ALo(35,"translate"),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(38,"div",12),t.TgZ(39,"div",14),t.TgZ(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(44,"option",20),t._uU(45),t.ALo(46,"translate"),t.ALo(47,"translate"),t.qZA(),t.YNc(48,kZ,2,2,"option",21),t.qZA(),t._UZ(49,"validation-message",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",3),t.TgZ(51,"div",22),t.TgZ(52,"div",23),t.TgZ(53,"div",3),t._UZ(54,"div",24),t._UZ(55,"div",25),t._UZ(56,"div",26),t.qZA(),t.qZA(),t.YNc(57,BZ,24,17,"table",27),t.qZA(),t.YNc(58,zZ,18,14,"div",28),t.qZA(),t.qZA(),t.TgZ(59,"div",3),t.TgZ(60,"div",29),t.TgZ(61,"input",30),t.NdJ("click",function(){return o.closeModel()}),t.qZA(),t._uU(62," \xa0 "),t.YNc(63,XZ,1,0,"input",31),t.YNc(64,KZ,1,0,"input",32),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(9),t.hij("",t.lcZ(12,19,"Resource_Costing")," "),t.xp6(9),t.Oqu(t.lcZ(21,21,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(25,23,"Please_Enter")," ",t.lcZ(26,25,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(31,27,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(35,29,"Please_Enter")," ",t.lcZ(36,31,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(42,33,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(46,35,"Select")," ",t.lcZ(47,37,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeSelectList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(8),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(5),t.Q6J("ngIf",o.canSave&&o.grandTotal>0&&-1==o.activeResourceIndex),t.xp6(1),t.Q6J("ngIf",0==o.grandTotal))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg,Z.O5,l.wV,l.On],pipes:[f.X$],encapsulation:2}),i})();function tf(i,a){if(1&i&&(t.TgZ(0,"option",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"(",o.isArab?e.siteArbName:e.siteName,")")}}function ef(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",42),t._uU(2),t.qZA(),t.TgZ(3,"td",42),t._uU(4),t.qZA(),t.TgZ(5,"td",43),t._uU(6),t.qZA(),t.TgZ(7,"td",43),t._uU(8),t.qZA(),t.TgZ(9,"td",43),t._uU(10),t.qZA(),t.TgZ(11,"td",43),t._uU(12),t.qZA(),t.TgZ(13,"td",43),t._uU(14),t.qZA(),t.TgZ(15,"td",43),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",n.isArab?n.getSkillset(e.position).textTwo:n.getSkillset(e.position).text," "),t.xp6(2),t.hij(" ",e.dailyShifts," "),t.xp6(2),t.hij(" ",e.dailyHrs," "),t.xp6(2),t.hij(" ",e.monthlyHrs," "),t.xp6(2),t.hij(" ",e.monthlyShiftsSchedulled," "),t.xp6(2),t.hij(" ",e.monthlyShiftsAssigned," "),t.xp6(2),t.hij(" ",e.monthlyOffs," ")}}function of(i,a){if(1&i&&(t.TgZ(0,"div",3),t.TgZ(1,"div",4),t.TgZ(2,"table",39),t.TgZ(3,"tr"),t.TgZ(4,"th",40),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",40),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",40),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",40),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",40),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th",40),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",40),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th",40),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.YNc(28,ef,17,8,"tr",41),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,9,"S.N")," "),t.xp6(3),t.hij(" ",t.lcZ(9,11,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(12,13,"Qty_Of_Manpower")," "),t.xp6(3),t.hij(" ",t.lcZ(15,15,"Daily_Hrs")," "),t.xp6(3),t.hij(" ",t.lcZ(18,17,"Monthly_Hrs")," "),t.xp6(3),t.hij(" ",t.lcZ(21,19,"Monthly_Shifts_Schedulled")," "),t.xp6(3),t.hij(" ",t.lcZ(24,21,"Monthly_Shifts_Assigned")," "),t.xp6(3),t.hij(" ",t.lcZ(27,23,"Offs")," "),t.xp6(2),t.Q6J("ngForOf",e.shiftsReport)}}function nf(i,a){if(1&i&&(t.TgZ(0,"th",48),t._uU(1),t.qZA()),2&i){const e=a.index;t.xp6(1),t.Oqu(e+1)}}function af(i,a){if(1&i&&(t.TgZ(0,"th",48),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.dayText," ")}}function sf(i,a){if(1&i&&(t.TgZ(0,"option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.shiftCode),t.xp6(1),t.Oqu(e.shiftCode)}}function rf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",55),t.TgZ(1,"select",56),t.NdJ("change",function(n){const r=t.CHM(e).index;return t.oxw(2).onSelectShift(n,r)}),t._UZ(2,"option",57),t.YNc(3,sf,2,2,"option",58),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("formControl",e),t.xp6(2),t.Q6J("ngForOf",o.listOfShiftCodes)}}function lf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",44),t.TgZ(1,"table",45),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th",46),t._uU(5),t.qZA(),t.YNc(6,nf,2,1,"th",47),t._UZ(7,"td"),t._UZ(8,"td"),t._UZ(9,"td"),t.qZA(),t.TgZ(10,"tr"),t.TgZ(11,"th",48),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",48),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,af,2,1,"th",47),t._UZ(18,"td"),t._UZ(19,"td"),t._UZ(20,"td"),t.qZA(),t.qZA(),t.TgZ(21,"tbody",49),t.TgZ(22,"tr"),t.TgZ(23,"td",50),t._uU(24),t.qZA(),t.TgZ(25,"td",50),t._uU(26),t.qZA(),t.YNc(27,rf,4,2,"td",51),t.TgZ(28,"td",52),t._uU(29),t.qZA(),t.TgZ(30,"td",52),t.TgZ(31,"i",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().addEntry()}),t.qZA(),t.qZA(),t.TgZ(32,"td",52),t.TgZ(33,"i",54),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearEntry()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.selectedMonth),t.xp6(1),t.Q6J("ngForOf",e.listOfDays),t.xp6(6),t.hij(" ",t.lcZ(13,9,"Employee")," "),t.xp6(3),t.hij(" ",t.lcZ(16,11,"Position")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(7),t.hij(" ",e.employeeNumber," "),t.xp6(2),t.hij(" ",e.skillsetCode," "),t.xp6(1),t.Q6J("ngForOf",e.shiftsFormControls.controls),t.xp6(2),t.Oqu(e.newTotalShifts)}}function cf(i,a){if(1&i&&(t.TgZ(0,"th",48),t._uU(1),t.qZA()),2&i){const e=a.index;t.xp6(1),t.Oqu(e+1)}}function pf(i,a){if(1&i&&(t.TgZ(0,"th",48),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.dayText," ")}}function uf(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().index,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.shiftCodesForMonth[e],"")}}function df(i,a){if(1&i&&(t.TgZ(0,"td",64),t.YNc(1,uf,2,1,"span",67),t.qZA()),2&i){const e=a.index,o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","x"!=o.shiftCodesForMonth[e])}}function _f(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",64),t._uU(2),t.qZA(),t.TgZ(3,"td",64),t._uU(4),t.qZA(),t.TgZ(5,"td",64),t._uU(6),t.qZA(),t.YNc(7,df,2,1,"td",65),t.TgZ(8,"td",64),t._uU(9),t.qZA(),t.TgZ(10,"td",64),t.TgZ(11,"i",66),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).editRoasterEntry(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);let s;t.xp6(2),t.hij(" ",e.employeeNumber," "),t.xp6(2),t.hij(" ",n.isArab?null==(s=n.getEmployee(e.employeeNumber))?null:s.textAr:null==(s=n.getEmployee(e.employeeNumber))?null:s.text," "),t.xp6(2),t.hij(" ",n.isArab?n.getSkillset(e.skillsetCode).textTwo:n.getSkillset(e.skillsetCode).text," "),t.xp6(1),t.Q6J("ngForOf",n.listOfDays),t.xp6(2),t.hij(" ",n.totalShiftsRow[o]," ")}}function mf(i,a){if(1&i&&(t.TgZ(0,"th",48),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.Oqu(o.totalShiftsCol[e])}}function gf(i,a){if(1&i&&(t.TgZ(0,"div",60),t.TgZ(1,"table",61),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th",62),t._uU(5),t.qZA(),t.YNc(6,cf,2,1,"th",47),t._UZ(7,"td"),t.qZA(),t.TgZ(8,"tr"),t.TgZ(9,"th",48),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",48),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",48),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,pf,2,1,"th",47),t._UZ(19,"td"),t.qZA(),t.qZA(),t.TgZ(20,"tbody",49),t.YNc(21,_f,12,5,"tr",41),t.TgZ(22,"tr"),t.TgZ(23,"th",63),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.YNc(26,mf,2,1,"th",47),t.TgZ(27,"th",64),t._uU(28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",e.selectedMonth,""),t.xp6(1),t.Q6J("ngForOf",e.listOfDays),t.xp6(4),t.hij(" ",t.lcZ(11,10,"Employee_Number")," "),t.xp6(3),t.hij(" ",t.lcZ(14,12,"Employee_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(17,14,"Position")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(3),t.Q6J("ngForOf",e.listOfRoasters),t.xp6(3),t.Oqu(t.lcZ(25,16,"Total_Shifts")),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Oqu(e.grandTotalShifts)}}let ne=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(c),this.dialogRef=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.utilService=p,this.translate=u,this.notifyService=d,this.validationService=_,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfRoasters=[],this.listOfDays=[],this.sequence=1,this.editsequence=0,this.remarks="",this.shiftsFormControls=new l.Oe([new l.NI("")]),this.noOfDays=0,this.saveEnable=!1,this.editEnable=!1,this.monthYear="",this.skillsetCode="",this.skillsetName="",this.shiftCodesForMonth=[],this.inActiveDays=0,this.siteCodeList=[],this.customerCode="",this.listOfShiftCodes=[],this.siteCode="",this.month=0,this.year=0,this.shiftCode="",this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0,this.newTotalShifts=0,this.shiftsReport=[],this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeeNumber="",this.isLoading=!1,this.isArab=!1,this.canSave=!1,this.workingHoursInSite=0,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,ot.O)(this.employeeNumber),(0,it.b)(p.autoDelay()),(0,nt.x)(),(0,at.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(h||""))))}filterEmployeeNumbers(e){return this.apiService.getall(`Employee/getAutoFillEmployeeList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.project.projectCode}/${this.siteCode}`).subscribe(e=>{this.listOfShiftCodes=e,this.findNoOfShifts()})}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.readonly="readonly",this.loadSiteCodes(this.project.customerCode),this.loadSkillsetSelectionList()}setForm(){var e,o;this.form=this.fb.group({startDate:[""],endDate:[""],customerCode:[this.project.customerCode],monthYear:[""],siteCode:[null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)?this.project.siteCode:""],projectCode:[this.project.projectCode],month:[0],year:[this.year],skillsetCode:[""],shiftCode:[""]}),null!=(null===(o=this.project)||void 0===o?void 0:o.siteCode)&&(this.siteCode=this.project.siteCode,this.form.controls.siteCode.disable({onlySelf:!0}),this.minDate=this.project.startDate,this.maxDate=this.project.endDate,this.form.controls.startDate.setValue(this.project.startDate.toString().substring(0,10)),this.form.controls.endDate.setValue(this.project.endDate.toString().substring(0,10)),this.onSelectSiteCode({target:{value:this.project.siteCode}}))}submit(){if(this.saveEnable&&!this.isLoading){this.isLoading=!0,this.canSave=!0;for(var e=0;e<this.listOfRoasters.length;e++)if(this.listOfRoasters[e].shiftCodesForMonth.findIndex(o=>""==o)>=0){this.canSave=!1;break}this.form.value.roastersList=this.listOfRoasters,this.listOfRoasters.length>0&&this.canSave?this.apiService.post("MonthlyRoaster/updateShiftsForMonthlyRoaster",this.listOfRoasters).subscribe(o=>{this.utilService.OkMessage(),this.isLoading=!1,this.closeModel()},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o),this.isLoading=!1}):this.canSave?this.utilService.FillUpFields():this.notifyService.showError(this.translate.instant("InComplete_Shifts_Assignment"))}else this.isLoading&&this.notifyService.showError(this.translate.instant("Please_Wait"))}getSkillset(e){return this.skillsetSelectionList.find(o=>o.value==e)}loadSkillsetSelectionList(){this.apiService.getall("Skillset/getSelectSkillsetList").subscribe(e=>{this.skillsetSelectionList=e})}addEntry(){if(0!=this.newTotalShifts){let e=this.listOfRoasters.findIndex(n=>n.employeeNumber==this.employeeNumber),o={id:this.id,customerCode:this.project.customerCode,siteCode:this.siteCode,projectCode:this.project.projectCode,month:this.month,year:this.year,skillsetCode:this.skillsetCode,skillsetName:this.skillsetName,employeeNumber:this.employeeNumber,shiftCodesForMonth:this.shiftCodesForMonth.slice(),employeeID:this.employeeID,mapId:this.mapId,isPrimaryResource:this.isPrimaryResource};-1!=e?(this.removeEntry(e),this.listOfRoasters.splice(e,0,o)):this.listOfRoasters.push(o),this.findNoOfShifts(),this.saveEnable=!0,this.skillsetCode="",this.employeeNumber="",this.resetShiftsFormControls()}}clearEntry(){for(var e=1;e<=this.noOfDays;e++)"x"!=this.shiftsFormControls.value[e-1]&&this.shiftsFormControls.controls[e-1].setValue("");this.newTotalShifts=0}removeEntry(e){this.listOfRoasters.splice(e,1),this.saveEnable=!0,this.findNoOfShifts()}onSelectSiteCode(e){if(""!=e.target.value){let o=e.target.value;this.form.controls.monthYear.setValue(""),this.month=0,this.year=0,this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.project.projectCode}/${o}`).subscribe(n=>{this.project=n,this.workingHoursInSite=n.siteWorkingHours,this.loadEmployees();let s=new Date(Date.now());this.year=s.getFullYear(),this.form.value.siteCode=o,this.form.controls.siteCode.setValue(o),this.siteCode=o,this.loadData()})}else this.listOfRoasters=[]}loadData(){if(""!=this.project.customerCode&&""!=this.siteCode&&0!=this.month&&0!=this.year){let o=new Date(this.year,this.month-1,1),n=new Date(this.year,this.month,0);this.listOfDays=[],this.noOfDays=n.getDate()-o.getDate()+1,this.listOfRoasters=[],this.apiService.getall(`MonthlyRoaster/getMonthlyRoasterForSite/${this.project.customerCode}/${this.project.projectCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(s=>{if(this.listOfRoasters=s,0==this.listOfRoasters.length)this.notifyService.showError(this.translate.instant("Roaster_Not_Generated"));else for(let r=0;r<this.listOfRoasters.length;r++)this.listOfRoasters[r].isPrimaryResource||(this.listOfRoasters.splice(r,1),r--);this.sequence=this.listOfRoasters.length+1}),this.loadWeekDays(),this.shiftsFormControls.clear();for(var e=1;e<=this.noOfDays;e++)this.shiftsFormControls.push(new l.NI("")),this.shiftsFormControls.controls[e-1].disable({onlySelf:!0});this.loadShiftCodes(),this.listOfShiftCodes=[]}else this.listOfRoasters=[]}loadWeekDays(){this.form.controls.monthYear.setValue(new Date(this.year,this.month-1,1));for(var e=1;e<=this.noOfDays;e++){let o=new Date(this.year,this.month-1,e),s={dayText:o.toDateString().substring(0,1),dayNumber:e,dayFullName:o.toDateString()};this.listOfDays.push(s)}}loadSiteCodes(e){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.siteCodeList=o})}onSelectShift(e,o){let n=this.listOfShiftCodes.find(r=>r.shiftCode==e.target.value);if(0!=this.newTotalShifts&&""!=e.target.value)if(n.isOff)for(var s=1;s<=this.noOfDays;s++)"x"!=this.shiftCodesForMonth[s-1]&&(s-1)%7==o%7&&(this.shiftCodesForMonth[s-1]=e.target.value,this.shiftsFormControls.controls[s-1].setValue(e.target.value));else this.shiftCodesForMonth[o]=e.target.value,this.shiftsFormControls.controls[o].setValue(e.target.value);else if(""!=e.target.value)if(this.listOfShiftCodes.find(c=>c.shiftCode==e.target.value).isOff)for(s=1;s<=this.noOfDays;s++)"x"!=this.shiftCodesForMonth[s-1]&&(s-1)%7==o%7&&(this.shiftCodesForMonth[s-1]=e.target.value,this.shiftsFormControls.controls[s-1].setValue(e.target.value));else for(s=1;s<=this.noOfDays;s++)"x"!=this.shiftCodesForMonth[s-1]&&(this.shiftCodesForMonth[s-1]=e.target.value,this.shiftsFormControls.controls[s-1].setValue(e.target.value));this.findTotalNewShifts()}resetShiftsFormControls(){this.shiftsFormControls.clear();for(var e=1;e<=this.noOfDays;e++)this.shiftsFormControls.push(new l.NI("")),this.shiftCodesForMonth[e-1]="",this.shiftsFormControls.controls[e-1].disable({onlySelf:!0});this.findTotalNewShifts()}openDatePicker(e){e.open()}closeDatePicker(e,o){let s=Ae(e).format("YYYY-MM");this.selectedMonth=e.toString().substring(4,7)+"-"+e.toString().substring(11,15),this.month=parseInt(s.toString().substring(5,7)),this.year=Number(s.toString().substring(0,4)),""!=this.project.customerCode&&""!=this.siteCode&&this.loadData(),o.close()}findNoOfShifts(){this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0;for(var e=0;e<this.noOfDays;e++){let s=0;for(var o=0;o<this.listOfRoasters.length;o++){let r=0,c=this.listOfRoasters[o];for(var n=0;n<c.shiftCodesForMonth.length;n++)r+=this.shiftValue(c.shiftCodesForMonth[n]),n==e&&(s+=this.shiftValue(c.shiftCodesForMonth[n]));this.listOfRoasters[o].totShifts=r,this.totalShiftsRow.push(r)}this.totalShiftsCol.push(s),this.grandTotalShifts=this.grandTotalShifts+this.totalShiftsCol[e]}this.getShiftsReport()}findTotalNewShifts(){let e=0;for(var o=0;o<this.noOfDays;o++)e+=this.shiftValue(this.shiftCodesForMonth[o]);this.newTotalShifts=e}shiftValue(e){let o=this.listOfShiftCodes.find(n=>n.shiftCode==e);return null==o||""==e||null==e||""==e?0:0==o.isOff?1:0}RoastersCount(){return this.listOfRoasters.length}getCellInfo(e,o){return`Date:${new Date(this.year,this.month-1,o+1).toDateString()}\nShift: ${this.getShiftInfo(e,o)}`}getShiftInfo(e,o){return`Shift Name: ${this.listOfRoasters[e].shiftCodesForMonth[o]}`}editRoasterEntry(e){let o=this.listOfRoasters[e];this.id=o.id,this.skillsetName=o.skillsetName,this.skillsetCode=o.skillsetCode,this.employeeNumber=o.employeeNumber,this.employeeID=o.employeeID,this.mapId=o.mapId,this.isPrimaryResource=o.isPrimaryResource,this.shiftCodesForMonth=o.shiftCodesForMonth.slice();for(var n=1;n<=this.noOfDays;n++)this.shiftsFormControls.controls[n-1].setValue(this.shiftCodesForMonth[n-1]),"x"==this.shiftCodesForMonth[n-1]?this.shiftsFormControls.controls[n-1].disable({onlySelf:!0}):this.shiftsFormControls.controls[n-1].enable({onlySelf:!0});this.findTotalNewShifts(),document.getElementById("inputEntry").scrollIntoView()}closeModel(){this.dialogRef.close()}canAddShifftCode(e){return"x"!=this.listOfRoasters[0].shiftCodesForMonth[e]}groupBy(e,o){const n=new Map;return e.forEach(s=>{const r=o(s),c=n.get(r);c?c.push(s):n.set(r,[s])}),n}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.employeeList=e})}getEmployee(e){return this.employeeList.find(o=>o.value==e)}getShiftsReport(){this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${this.siteCode}`).subscribe(e=>{this.shiftsReport=[],e.forEach(o=>{let n=0,s=0;this.listOfRoasters.filter(c=>c.skillsetCode==o.skillSetCode).forEach(c=>{c.shiftCodesForMonth.forEach(p=>{var u;let d=null===(u=this.listOfShiftCodes.find(_=>_.shiftCode==p))||void 0===u?void 0:u.isOff;this.listOfShiftCodes.findIndex(_=>"x"!=p&&_.shiftCode==p)>=0&&d?s++:this.listOfShiftCodes.findIndex(_=>_.shiftCode==p)>=0&&!d&&"x"!=p&&""!=p&&n++})}),this.shiftsReport.push({position:o.skillSetCode,dailyShifts:o.quantity,dailyHrs:o.quantity*this.workingHoursInSite,monthlyHrs:this.workingHoursInSite*(o.quantity*this.noOfDays),monthlyOffs:s,monthlyReplacements:n+s-this.noOfDays*o.quantity,monthlyShiftsSchedulled:o.quantity*this.noOfDays,monthlyShiftsAssigned:n})})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-monthyl-roaster-for-project"]],features:[t.qOj],decls:85,vars:63,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],[3,"isLoading"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","monthYear",1,"form-control","datapickerinput",3,"matDatepicker","min","max","placeholder","click"],["matSuffix","",3,"for"],["startView","year","data-date-format","mm/yyyy",3,"monthSelected"],["dp2",""],["class","modal-body",4,"ngIf"],["class","table-responsive","id","inputEntry",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"row","mt-12","text-right"],[1,"col-md-9","col-lg-9","text-center",2,"padding-top","15px"],[1,"col-md-1","col-lg-1","text-center",2,"padding-top","15px"],[1,"col-md-1col-lg-1","text-center",2,"padding-top","15px"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],["border","0","cellpadding","0","cellspacing","0","width","100%",1,"table","table-bordered","no-wrap",2,"width","100%"],[2,"padding","3px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","center"],[4,"ngFor","ngForOf"],[2,"padding","2px","text-align","left","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","text-align","center"],[2,"padding","2px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","text-align","center"],["id","inputEntry",1,"table-responsive"],["id","zero_config1",1,"table","table-bordered"],["colspan","2",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","font-size:0.775rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight:600;padding: 2px",4,"ngFor","ngForOf"],[2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],[2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300"],[2,"width","auto","padding","1px 1px 1px 1px","text-align","center","padding","1px 1px 1px 1px"],["style","text-align: center; width: auto; padding: 1px 1px 1px 1px; ",4,"ngFor","ngForOf"],[2,"width","auto","padding","1px 1px 1px 1px","text-align","center"],[1,"fas","fa-plus-circle",3,"click"],[1,"fas","fa-eraser",3,"click"],[2,"text-align","center","width","auto","padding","1px 1px 1px 1px"],[2,"text-align","center","font-size","small","color","#000000","padding","3px 1px 3px 1px",3,"formControl","change"],["value","",2,"width","auto","padding","1px 1px 1px 1px","text-align","center","color","#000000"],["style","width: auto; padding: 3px 1px 3px 1px; text-align: center; color: #000000",3,"value",4,"ngFor","ngForOf"],[2,"width","auto","padding","3px 1px 3px 1px","text-align","center","color","#000000",3,"value"],[1,"table-responsive"],["id","zero_config1",1,"table","table-bordered","no-wrap"],["colspan","3",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["colspan","3",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","padding","2px"],[2,"padding","3px"],["style","padding: 3px",4,"ngFor","ngForOf"],[1,"fas","icon-note",3,"click"],[4,"ngIf"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"input",15),t.ALo(22,"translate"),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"label",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",13),t.TgZ(30,"div",14),t._UZ(31,"auto-loader",17),t._UZ(32,"input",18),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(36,"div",19),t.TgZ(37,"div",13),t.TgZ(38,"label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t._UZ(41,"input",20),t.qZA(),t.qZA(),t.TgZ(42,"div",19),t.TgZ(43,"div",13),t.TgZ(44,"label"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"input",21),t.qZA(),t.qZA(),t.TgZ(48,"div",11),t.TgZ(49,"div",13),t.TgZ(50,"label",12),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"select",22),t.NdJ("change",function(r){return o.onSelectSiteCode(r)}),t.TgZ(54,"option",23),t._uU(55),t.ALo(56,"translate"),t.ALo(57,"translate"),t.qZA(),t.YNc(58,tf,2,3,"option",24),t.qZA(),t._UZ(59,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(60,"div",11),t.TgZ(61,"div",13),t.TgZ(62,"label",12),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"div",13),t.TgZ(66,"div",14),t.TgZ(67,"input",25),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(71);return o.openDatePicker(r)}),t.ALo(68,"translate"),t.qZA(),t._UZ(69,"mat-datepicker-toggle",26),t.TgZ(70,"mat-datepicker",27,28),t.NdJ("monthSelected",function(r){t.CHM(n);const c=t.MAs(71);return o.closeDatePicker(r,c)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(72,of,29,25,"div",29),t.YNc(73,lf,34,13,"div",30),t.YNc(74,gf,29,18,"div",31),t.TgZ(75,"div",32),t._UZ(76,"div",33),t.TgZ(77,"div",34),t._UZ(78,"auto-loader",17),t.qZA(),t.TgZ(79,"div",35),t.TgZ(80,"input",36),t.NdJ("click",function(){return o.closeModel()}),t.ALo(81,"translate"),t.qZA(),t.qZA(),t.TgZ(82,"div",34),t._UZ(83,"input",37),t.ALo(84,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(71);t.xp6(1),t.Oqu(t.lcZ(2,31,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(12),t.Oqu(t.lcZ(18,33,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(22,35,"Please_Enter")," ",t.lcZ(23,37,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(28,39,"Project_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(33,41,"Please_Enter")," ",t.lcZ(34,43,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(40,45,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(46,47,"Project_End_Date")),t.xp6(6),t.Oqu(t.lcZ(52,49,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(56,51,"Select")," ",t.lcZ(57,53,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(64,55,"Year_Month")),t.xp6(4),t.hYB("placeholder","",t.lcZ(68,57,"Select")," ","Year_Month",""),t.Q6J("matDatepicker",n)("min",o.minDate)("max",o.maxDate),t.xp6(2),t.Q6J("for",n),t.xp6(3),t.Q6J("ngIf",0!=o.shiftsReport.length),t.xp6(1),t.Q6J("ngIf",0!=o.noOfDays),t.xp6(1),t.Q6J("ngIf",0!=o.RoastersCount()),t.xp6(4),t.Q6J("isLoading",o.isLoading),t.xp6(2),t.s9C("value",t.lcZ(81,59,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(84,61,"Save"))}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,At.z,l.EJ,l.YN,l.Kr,Z.sg,j.hl,j.nW,ft.R9,j.Mq,Z.O5,l.oH],pipes:[f.X$],encapsulation:2}),i})();function hf(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArab?e.siteArbName:e.siteName)}}function Zf(i,a){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.vehicleNumber),t.xp6(1),t.hij(" ",e.vehicleNumber," ")}}function ff(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"div",32),t._UZ(2,"auto-loader",33),t._UZ(3,"input",34),t.ALo(4,"translate"),t.TgZ(5,"mat-autocomplete",35,36),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().onSelectionVehicleNumber(n)}),t.YNc(7,Zf,2,2,"mat-option",21),t.ALo(8,"async"),t.qZA(),t.qZA(),t.TgZ(9,"div",37),t._UZ(10,"input",38),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",39),t.TgZ(13,"a",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateVehicle()}),t._UZ(14,"i",41),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(6),o=t.oxw();t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.s9C("placeholder",t.lcZ(4,6,"Vehicle_Code")),t.Q6J("formControl",o.vehicleNumberControl)("matAutocomplete",e),t.xp6(4),t.Q6J("ngForOf",t.lcZ(8,8,o.filteredVehicleNumbers)),t.xp6(3),t.s9C("placeholder",t.lcZ(11,10,"Qty"))}}function Af(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.costPerUnit+e.margin)}}function Cf(i,a){1&i&&(t.TgZ(0,"td",45),t._uU(1,"-"),t.qZA())}function Tf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",51),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeVehicle(n)}),t._UZ(2,"i",52),t.qZA(),t.qZA()}}function vf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",53),t.TgZ(1,"button",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),s=n.$implicit,r=n.index;return t.oxw(2).getLogisticsSubCostingList(s,r)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit")))}function xf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",53),t.TgZ(1,"button",54),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).cancelEditCosting()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Cancel")))}function qf(i,a){if(1&i&&(t.TgZ(0,"tr",46),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,Af,2,1,"td",47),t.YNc(6,Cf,2,0,"td",47),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",48),t.YNc(10,Tf,3,0,"span",49),t.YNc(11,vf,4,3,"span",50),t.YNc(12,xf,4,3,"span",50),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.Oqu(e.vehicleNumber),t.xp6(2),t.hij("",e.qty," "),t.xp6(1),t.Q6J("ngIf",0!=e.costPerUnit),t.xp6(1),t.Q6J("ngIf",0==e.costPerUnit),t.xp6(2),t.hij("",e.qty*(e.costPerUnit+e.margin)," "),t.xp6(2),t.Q6J("ngIf",-1==n.activeLogisticsIndex),t.xp6(1),t.Q6J("ngIf",-1==n.activeLogisticsIndex),t.xp6(1),t.Q6J("ngIf",n.activeLogisticsIndex==o&&(null==n.projectBudgetCosting.logisticsCostingsList[n.activeLogisticsIndex]?null:n.projectBudgetCosting.logisticsCostingsList[n.activeLogisticsIndex].costPerUnit)+(null==n.projectBudgetCosting.logisticsCostingsList[n.activeLogisticsIndex]?null:n.projectBudgetCosting.logisticsCostingsList[n.activeLogisticsIndex].margin)==0)}}function bf(i,a){if(1&i&&(t.TgZ(0,"table",42),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"th"),t.qZA(),t.qZA(),t.TgZ(16,"tbody"),t.YNc(17,qf,13,8,"tr",43),t.TgZ(18,"tr"),t.TgZ(19,"th",44),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",45),t._uU(23),t.qZA(),t._UZ(24,"th",45),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,7,"Logistics")," "),t.xp6(3),t.hij(" ",t.lcZ(8,9,"Qty")," "),t.xp6(3),t.Oqu(t.lcZ(11,11,"Cost_Per_Unit")),t.xp6(3),t.hij(" ",t.lcZ(14,13,"Total")," "),t.xp6(4),t.Q6J("ngForOf",e.projectBudgetCosting.logisticsCostingsList),t.xp6(3),t.hij(" ",t.lcZ(21,15,"Total")," "),t.xp6(3),t.hij(" ",e.grandTotal," ")}}function yf(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.costHead),t.xp6(1),t.Oqu(o.isArab?e.costNameInArabic:e.costNameInEnglish)}}function Sf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",65),t._uU(2),t.qZA(),t.TgZ(3,"td",66),t._uU(4),t.qZA(),t.TgZ(5,"td",48),t.TgZ(6,"span"),t.TgZ(7,"a",51),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(3).removeSubCostings(s)}),t._UZ(8,"i",52),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(3);let n;t.xp6(2),t.Oqu(o.isArab?null==(n=o.getCostHead(e.costHead))?null:n.costNameInArabic:null==(n=o.getCostHead(e.costHead))?null:n.costNameInEnglish),t.xp6(2),t.Oqu(e.amount)}}function wf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",54),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).SubCostingOK()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"OK")))}const Uf=function(){return{standalone:!0}};function Df(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"table",60),t.TgZ(1,"tbody"),t.TgZ(2,"tr"),t.TgZ(3,"th",61),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",62),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"th"),t.qZA(),t.YNc(10,Sf,9,2,"tr",63),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",45),t._uU(16),t.qZA(),t._UZ(17,"th"),t.qZA(),t.TgZ(18,"tr"),t.TgZ(19,"td",45),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"td"),t.TgZ(23,"input",64),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return s.projectBudgetCosting.logisticsCostingsList[s.activeLogisticsIndex].margin=n})("keyup",function(){return t.CHM(e),t.oxw(2).changeMargin()}),t.ALo(24,"translate"),t.qZA(),t.qZA(),t._UZ(25,"td"),t.qZA(),t.TgZ(26,"tr"),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th",45),t._uU(31),t.qZA(),t.TgZ(32,"th"),t.YNc(33,wf,4,3,"span",49),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,12,"Costing_Head")," "),t.xp6(3),t.Oqu(t.lcZ(8,14,"Amount")),t.xp6(3),t.Q6J("ngForOf",e.logisticsSubCostingList),t.xp6(3),t.Oqu(t.lcZ(14,16,"Sub_Total")),t.xp6(3),t.hij(" ",null==e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex]?null:e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].costPerUnit," "),t.xp6(4),t.Oqu(t.lcZ(21,18,"Margin")),t.xp6(3),t.s9C("placeholder",t.lcZ(24,20,"Margin")),t.Q6J("ngModel",e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].margin)("ngModelOptions",t.DdM(24,Uf)),t.xp6(5),t.Oqu(t.lcZ(29,22,"Cost_Per_Unit")),t.xp6(3),t.hij(" ",(null==e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex]?null:e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].costPerUnit)+(null==e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex]?null:e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].margin)," "),t.xp6(2),t.Q6J("ngIf",(null==e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex]?null:e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].costPerUnit)+(null==e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex]?null:e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].margin)>0)}}function Lf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",32),t.TgZ(1,"div",23),t.TgZ(2,"div",3),t.TgZ(3,"div",32),t.TgZ(4,"select",55),t.NdJ("change",function(n){return t.CHM(e),t.oxw().selectCostHead(n)}),t.TgZ(5,"option",20),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.YNc(9,yf,2,2,"option",21),t.qZA(),t.qZA(),t.TgZ(10,"div",56),t._UZ(11,"input",57),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",58),t.TgZ(15,"a",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateSubCostings()}),t._UZ(16,"i",41),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,Df,34,25,"table",59),t.qZA()}if(2&i){const e=t.oxw();t.xp6(6),t.AsE("",t.lcZ(7,6,"Select")," ",t.lcZ(8,8,"Costing_Head")," "),t.xp6(3),t.Q6J("ngForOf",e.logisticsExpenceHeadSelectList),t.xp6(2),t.hYB("placeholder","",t.lcZ(12,10,"Enter")," ",t.lcZ(13,12,"Amount"),""),t.xp6(6),t.Q6J("ngIf",-1!=e.activeLogisticsIndex)}}function Nf(i,a){1&i&&t._UZ(0,"input",67)}function Ef(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",68),t.NdJ("click",function(){return t.CHM(e),t.oxw().skippEstimationType()}),t.qZA()}}let ae=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.logisticsSubCostingList=[],this.logisticsCostingList=[],this.grandTotal=0,this.totalForLogisticsUnit=-1,this.logisticsExpenceHeadSelectList=[],this.logisticsCode="",this.activeLogisticsIndex=-1,this.siteCodeSelectList=[],this.logisticsSelectionList=[],this.isDataLoading=!1,this.vehicleNumber="",this.margin=0,this.vehicleNumberControl=new l.NI(""),this.isArab=!1,this.canSave=!1,this.filteredVehicleNumbers=this.vehicleNumberControl.valueChanges.pipe((0,ot.O)(this.vehicleNumber),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterVehicleNumbers(h||""))))}filterVehicleNumbers(e){return this.apiService.getall(`Logisticsandvehicle/getAutoSelectLogisticsandvehicleList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm()}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null==(null===(e=this.project)||void 0===e?void 0:e.siteCode)?"":this.project.siteCode,l.kI.required],subCostAmount:[""],subCostCostHead:[""],vehicleNumber:[""],qty:[""]}),this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{var n;this.siteCodeSelectList=null!=o?o:[],null!=(null===(n=this.project)||void 0===n?void 0:n.siteCode)&&(this.loadInitialData(),this.form.controls.siteCode.disable({onlySelf:!0}))})}closeModel(){this.dialogRef.close()}submit(){var e,o;0!=this.projectBudgetCosting.logisticsCostingsList.length&&0!=(null===(o=null===(e=this.projectBudgetCosting)||void 0===e?void 0:e.logisticsCostingsList[0])||void 0===o?void 0:o.logisticsSubCostingList.length)?this.apiService.post("projectBudgetCosting/createProjectLogisticsCostingForSite",this.projectBudgetCosting).subscribe(n=>{n&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},n=>{console.log(n),console.error(n),this.utilService.ShowApiErrorMessage(n)}):this.utilService.FillUpFields()}loadInitialData(){this.apiService.getall(`projectBudgetCosting/getProjectLogisticsCostingForSite/${this.project.customerCode}/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectBudgetCosting=e,0==this.projectBudgetCosting.status?this.createNewProjectBudgetCosting():3!=this.projectBudgetCosting.status&&this.createNewLogisticsBudgetCostingList(),this.findTotalsCosts()}),this.apiService.getall("OperationExpenseHead/getOperationExpenseHeadsForLogistics").subscribe(e=>{this.logisticsExpenceHeadSelectList=e})}createNewProjectBudgetCosting(){this.projectBudgetCosting.customerCode=this.project.customerCode,this.projectBudgetCosting.projectCode=this.project.projectCode,this.projectBudgetCosting.siteCode=this.form.controls.siteCode.value,this.projectBudgetCosting.serviceType="LOGISTICS",this.createNewLogisticsBudgetCostingList()}createNewLogisticsBudgetCostingList(){this.projectBudgetCosting.logisticsCostingsList=[]}getLogisticsSubCostingList(e,o){this.activeLogisticsIndex=o,this.logisticsSubCostingList=e.logisticsSubCostingList.slice(),this.totalForLogisticsUnit=e.costPerUnit,this.findTotalsCosts()}findTotalsCosts(){this.grandTotal=0,0!=this.projectBudgetCosting.logisticsCostingsList.length&&this.projectBudgetCosting.logisticsCostingsList.forEach(e=>{e.costPerUnit=0,e.logisticsSubCostingList.forEach(o=>{e.costPerUnit+=o.amount}),e.totLogisticsCost=(e.costPerUnit+e.margin)*e.qty,this.grandTotal=this.grandTotal+e.totLogisticsCost})}onSelectSiteCode(e){this.totalForLogisticsUnit=0,this.form.controls.siteCode.setValue(e.target.value),this.loadInitialData(),this.activeLogisticsIndex=-1}addUpdateSubCostings(){var e;let o=this.form.controls.subCostAmount.value,n=this.form.controls.subCostCostHead.value;if(""!=o&&""!=n&&null!=this.form.controls.subCostAmount.value){let s={amount:o,costHead:n};if(null==this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList.find(c=>c.costHead==n))null===(e=this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList)||void 0===e||e.push(s);else{let c=this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList.findIndex(p=>p.costHead==n);this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList[c].amount=o}this.findTotalsCosts(),this.getLogisticsSubCostingList(this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex],this.activeLogisticsIndex),this.resetSubCosting()}}removeSubCostings(e){this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList.splice(e,1),this.findTotalsCosts(),this.getLogisticsSubCostingList(this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex],this.activeLogisticsIndex)}resetSubCosting(){this.form.controls.subCostAmount.setValue(""),this.form.controls.subCostCostHead.setValue("")}selectCostHead(e){let o=e.target.value;if(-1!=this.activeLogisticsIndex){this.form.controls.subCostCostHead.setValue(e.target.value);let n=this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList.find(s=>s.costHead==o);this.form.controls.subCostAmount.setValue(null!=n?n.amount:"")}else this.form.controls.subCostCostHead.setValue(""),this.form.controls.subCostAmount.setValue("")}onSelectionVehicleNumber(e){this.form.controls.vehicleNumber.setValue(e.option.value),this.vehicleNumberControl.setValue(e.option.value),this.vehicleNumber=e.option.value}addUpdateVehicle(){if(""!=this.vehicleNumber){let o={costPerUnit:0,projectBudgetCostingId:this.projectBudgetCosting.projectBudgetCostingId,logisticsCostingId:0,logisticsSubCostingList:[].splice(0,1),vehicleNumber:this.vehicleNumber,qty:this.form.controls.qty.value,totLogisticCost:0,siteCode:this.projectBudgetCosting.siteCode,margin:0};this.projectBudgetCosting.logisticsCostingsList.push(o)}else this.notifyService.showError("Incorrect Vehicle Data");this.vehicleNumber="",this.vehicleNumberControl.setValue(""),this.form.controls.qty.setValue(0),this.canSave=!1}removeVehicle(e){this.projectBudgetCosting.logisticsCostingsList.splice(e,1),this.findTotalsCosts(),this.activeLogisticsIndex=-1}changeMargin(){this.getLogisticsSubCostingList(this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex],this.activeLogisticsIndex),this.findTotalsCosts()}getCostHead(e){return this.logisticsExpenceHeadSelectList.find(o=>o.costHead==e)}SubCostingOK(){console.log(this.projectBudgetCosting.logisticsCostingsList),this.activeLogisticsIndex=-1,this.canSave=!this.projectBudgetCosting.logisticsCostingsList.find(e=>e.totLogisticsCost<=0)}cancelEditCosting(){this.activeLogisticsIndex=-1,this.canSave=!this.projectBudgetCosting.logisticsCostingsList.find(e=>e.totLogisticsCost<=0)}skippEstimationType(){this.apiService.post("projectBudgetCosting/skippEstimationType",{projectCode:this.project.projectCode,siteCode:this.project.siteCode,type:"logistics"}).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-logistics-costing"]],features:[t.qOj],decls:62,vars:40,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-6",2,"padding-right","0"],[1,"paddingtop15"],["class","row",4,"ngIf"],["class","table  table-bordered table-borderedcustom no-wrap","id","table",4,"ngIf"],["class","col-md-6 col-lg-6",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button","value","CLOSE",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SAVE",4,"ngIf"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SKIP",3,"click",4,"ngIf"],[3,"value"],[1,"col-md-6","col-lg-6"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],[1,"col-md-4","col-lg-4"],["type","number","formControlName","qty",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],[2,"font-size","30px",3,"click"],[1,"icon-plus"],["id","table",1,"table","table-bordered","table-borderedcustom","no-wrap"],["class","selected",4,"ngFor","ngForOf"],["colspan","3",2,"text-align","right"],[2,"text-align","right"],[1,"selected"],["style","text-align:right",4,"ngIf"],[2,"width","10%","text-align","right"],[4,"ngIf"],["style","font-size:smaller",4,"ngIf"],[1,"tableicons",3,"click"],[1,"icon-trash"],[2,"font-size","smaller"],["type","button",1,"btn","waves-effect","waves-light","btn-outline-primary",3,"click"],["formControlName","subCostCostHead",1,"custom-select","mr-sm-2",3,"change"],[1,"col-md-5","col-lg-4"],["type","number","formControlName","subCostAmount",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-1"],["class","table tablecolor  table-bordered no-wrap",4,"ngIf"],[1,"table","tablecolor","table-bordered","no-wrap"],["width","60%"],["width","40%"],[4,"ngFor","ngForOf"],["type","number",1,"form-control",2,"text-align","right",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],[2,"width","60%"],[2,"width","30%","text-align","right"],["type","submit","value","SAVE",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock"],["type","button","value","SKIP",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1," \xd7"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",3),t.TgZ(9,"div",7),t.TgZ(10,"h4",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(13,"div",9),t.TgZ(14,"div"),t.TgZ(15,"div",4),t.TgZ(16,"div",10),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t.TgZ(19,"label",13),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t._UZ(24,"input",16),t.ALo(25,"translate"),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(28,"div",12),t.TgZ(29,"label",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",14),t.TgZ(33,"div",15),t._UZ(34,"input",18),t.ALo(35,"translate"),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(38,"div",12),t.TgZ(39,"div",14),t.TgZ(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(44,"option",20),t._uU(45),t.ALo(46,"translate"),t.ALo(47,"translate"),t.qZA(),t.YNc(48,hf,2,2,"option",21),t.qZA(),t._UZ(49,"validation-message",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",3),t.TgZ(51,"div",22),t.TgZ(52,"div",23),t.YNc(53,ff,15,12,"div",24),t.qZA(),t.YNc(54,bf,25,17,"table",25),t.qZA(),t.YNc(55,Lf,18,14,"div",26),t.qZA(),t.qZA(),t.TgZ(56,"div",3),t.TgZ(57,"div",27),t.TgZ(58,"input",28),t.NdJ("click",function(){return o.closeModel()}),t.qZA(),t._uU(59," \xa0 "),t.YNc(60,Nf,1,0,"input",29),t.YNc(61,Ef,1,0,"input",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(9),t.hij("",t.lcZ(12,20,"Logistics_Costing")," "),t.xp6(9),t.Oqu(t.lcZ(21,22,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(25,24,"Please_Enter")," ",t.lcZ(26,26,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(31,28,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(35,30,"Please_Enter")," ",t.lcZ(36,32,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(42,34,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(46,36,"Select")," ",t.lcZ(47,38,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeSelectList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(5),t.Q6J("ngIf",o.canSave&&o.grandTotal>0&&-1==o.activeLogisticsIndex),t.xp6(1),t.Q6J("ngIf",0==o.grandTotal))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg,Z.O5,At.z,lt.ZL,l.oH,lt.XC,l.wV,Ut.ey,l.On],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function Of(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArab?e.siteArbName:e.siteName)}}function kf(i,a){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.hij(" ",o.isArab?e.nameInArabic:e.nameInEnglish," ")}}function jf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"div",32),t._UZ(2,"auto-loader",33),t._UZ(3,"input",34),t.ALo(4,"translate"),t.ALo(5,"translate"),t.TgZ(6,"mat-autocomplete",35,36),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().onSelectionMaterialEquipment(n)}),t.YNc(8,kf,2,2,"mat-option",21),t.ALo(9,"async"),t.qZA(),t.qZA(),t.TgZ(10,"div",12),t._UZ(11,"input",37),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",38),t.TgZ(15,"a",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateMaterialEquipment()}),t._UZ(16,"i",40),t.qZA(),t.qZA(),t._UZ(17,"div",41),t.qZA()}if(2&i){const e=t.MAs(7),o=t.oxw();t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(4,8,"Please_Enter")," ",t.lcZ(5,10,"Material_Equipment"),""),t.Q6J("formControl",o.materialEquipmentCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(9,12,o.filteredMaterialEquipments)),t.xp6(3),t.hYB("placeholder","",t.lcZ(12,14,"Enter")," ",t.lcZ(13,16,"Quantity"),"")}}function Mf(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.costPerUnit)}}function Rf(i,a){1&i&&(t.TgZ(0,"td",45),t._uU(1,"-"),t.qZA())}function Pf(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.quantity)}}function Ff(i,a){1&i&&(t.TgZ(0,"td"),t._uU(1,"-"),t.qZA())}function If(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.quantity*e.costPerUnit)}}function Yf(i,a){1&i&&(t.TgZ(0,"td",45),t._uU(1,"-"),t.qZA())}function Jf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",53),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeMaterial(n)}),t.TgZ(1,"a",54),t._UZ(2,"i",55),t.qZA(),t.qZA()}}function Qf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",56),t.TgZ(1,"button",57),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),s=n.$implicit,r=n.index;return t.oxw(2).getMaterialEquipmentSubCostingList(s,r)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit")))}function Bf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",56),t.TgZ(1,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).cancelEditCosting()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Cancel")))}function Hf(i,a){if(1&i&&(t.TgZ(0,"tr",46),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,Mf,2,1,"td",47),t.YNc(4,Rf,2,0,"td",47),t.YNc(5,Pf,2,1,"td",48),t.YNc(6,Ff,2,0,"td",48),t.YNc(7,If,2,1,"td",49),t.YNc(8,Yf,2,0,"td",49),t.TgZ(9,"td",50),t.YNc(10,Jf,3,0,"span",51),t.YNc(11,Qf,4,3,"span",52),t.YNc(12,Bf,4,3,"span",52),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);let s;t.xp6(2),t.Oqu(n.isArab?null==(s=n.getMaterialEquipment(e.materialEquipmentCode))?null:s.textTwo:null==(s=n.getMaterialEquipment(e.materialEquipmentCode))?null:s.text),t.xp6(1),t.Q6J("ngIf",0!=e.costPerUnit),t.xp6(1),t.Q6J("ngIf",0==e.costPerUnit),t.xp6(1),t.Q6J("ngIf",0!=e.quantity),t.xp6(1),t.Q6J("ngIf",0==e.quantity),t.xp6(1),t.Q6J("ngIf",0!=e.quantity),t.xp6(1),t.Q6J("ngIf",0==e.quantity),t.xp6(2),t.Q6J("ngIf",-1==n.activeMaterialEquipmentIndex),t.xp6(1),t.Q6J("ngIf",-1==n.activeMaterialEquipmentIndex),t.xp6(1),t.Q6J("ngIf",n.activeMaterialEquipmentIndex==o&&(null==n.projectBudgetCosting.materialEquipmentCostingsList[n.activeMaterialEquipmentIndex]?null:n.projectBudgetCosting.materialEquipmentCostingsList[n.activeMaterialEquipmentIndex].costPerUnit)+(null==n.projectBudgetCosting.materialEquipmentCostingsList[n.activeMaterialEquipmentIndex]?null:n.projectBudgetCosting.materialEquipmentCostingsList[n.activeMaterialEquipmentIndex].margin)==0)}}function $f(i,a){if(1&i&&(t.TgZ(0,"table",42),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"th"),t.qZA(),t.qZA(),t.TgZ(16,"tbody"),t.YNc(17,Hf,13,10,"tr",43),t.TgZ(18,"tr"),t.TgZ(19,"th",44),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",45),t._uU(23),t.qZA(),t._UZ(24,"th"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,7,"Material_Equipment")," "),t.xp6(3),t.Oqu(t.lcZ(8,9,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(11,11,"Count")),t.xp6(3),t.Oqu(t.lcZ(14,13,"Amount")),t.xp6(4),t.Q6J("ngForOf",e.projectBudgetCosting.materialEquipmentCostingsList),t.xp6(3),t.hij(" ",t.lcZ(21,15,"Total")," "),t.xp6(3),t.hij(" ",e.grandTotal," ")}}function Vf(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.costHead),t.xp6(1),t.Oqu(o.isArab?e.costNameInArabic:e.costNameInEnglish)}}function Gf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).SubCostingOK()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"OK")))}function Wf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",66),t._uU(2),t.qZA(),t.TgZ(3,"td",67),t._uU(4),t.qZA(),t.TgZ(5,"td",68),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(3).removeSubCostings(s)}),t.TgZ(6,"a",54),t._UZ(7,"i",55),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(2),t.Oqu(o.isArab?o.getCostHead(e.costHead).costNameInArabic:o.getCostHead(e.costHead).costNameInEnglish),t.xp6(2),t.Oqu(e.amount)}}function zf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).SubCostingOK()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"OK")))}function Xf(i,a){if(1&i&&(t.TgZ(0,"table",62),t.TgZ(1,"tbody"),t.TgZ(2,"tr"),t.TgZ(3,"th",63),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",64),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t.YNc(10,Gf,4,3,"span",48),t.qZA(),t.qZA(),t.YNc(11,Wf,8,2,"tr",65),t.TgZ(12,"tr"),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",45),t._uU(17),t.qZA(),t.TgZ(18,"th"),t.YNc(19,zf,4,3,"span",48),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,7,"Costing_Head")," "),t.xp6(3),t.Oqu(t.lcZ(8,9,"Amount")),t.xp6(3),t.Q6J("ngIf",(null==e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex]?null:e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex].costPerUnit)+(null==e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex]?null:e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex].margin)>0),t.xp6(1),t.Q6J("ngForOf",e.materialEquipmentSubCostingList),t.xp6(3),t.Oqu(t.lcZ(15,11,"Total")),t.xp6(3),t.hij(" ",e.totalForMaterialEquipmentUnit," "),t.xp6(2),t.Q6J("ngIf",(null==e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex]?null:e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex].costPerUnit)>0)}}function Kf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",32),t.TgZ(1,"div",23),t.TgZ(2,"div",3),t.TgZ(3,"div",32),t.TgZ(4,"select",58),t.NdJ("change",function(n){return t.CHM(e),t.oxw().selectCostHead(n)}),t.TgZ(5,"option",20),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Vf,2,2,"option",21),t.qZA(),t.qZA(),t.TgZ(10,"div",59),t._UZ(11,"input",60),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",41),t.TgZ(15,"a",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateSubCostings()}),t._UZ(16,"i",40),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,Xf,20,13,"table",61),t.qZA()}if(2&i){const e=t.oxw();t.xp6(6),t.AsE("",t.lcZ(7,6,"Select")," ",t.lcZ(8,8,"Costing_Head")," "),t.xp6(3),t.Q6J("ngForOf",e.materialEquipmentExpenceHeadSelectList),t.xp6(2),t.hYB("placeholder","",t.lcZ(12,10,"Enter")," ",t.lcZ(13,12,"Amount"),""),t.xp6(6),t.Q6J("ngIf",-1!=e.activeMaterialEquipmentIndex)}}function t2(i,a){1&i&&t._UZ(0,"input",69)}function e2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",70),t.NdJ("click",function(){return t.CHM(e),t.oxw().skippEstimationType()}),t.qZA()}}let se=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.materialEquipmentSubCostingList=[],this.materialEquipmentCostingList=[],this.grandTotal=0,this.totalForMaterialEquipmentUnit=-1,this.materialEquipmentExpenceHeadSelectList=[],this.materialEquipmentCode="",this.activeMaterialEquipmentIndex=-1,this.siteCodeSelectList=[],this.materialEquipmentSelectionList=[],this.isDataLoading=!1,this.quantity=0,this.isArab=!1,this.canSave=!1,this.materialEquipmentCodeControl=new l.NI(""),this.filteredMaterialEquipments=this.materialEquipmentCodeControl.valueChanges.pipe((0,ot.O)(this.materialEquipmentCode),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterMaterialEquipments(h||""))))}filterMaterialEquipments(e){return this.apiService.getall(`MaterialEquipment/getAutoSelectMaterialEquipmentList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.getAllMaterialEquipmentsList()}getAllMaterialEquipmentsList(){this.apiService.getall("Materialequipment/GetSelectMaterialequipmentList").subscribe(e=>{this.materialEquipmentSelectionList=e})}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null==(null===(e=this.project)||void 0===e?void 0:e.siteCode)?"":this.project.siteCode,l.kI.required],subCostAmount:[],subCostCostHead:[""],materialEquipmentCode:[""],quantity:[0]}),this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{var n;null!=o?(this.siteCodeSelectList=o,null!=(null===(n=this.project)||void 0===n?void 0:n.siteCode)&&(this.loadInitialData(),this.form.controls.siteCode.disable({onlySelf:!0}))):this.siteCodeSelectList=[]})}closeModel(){this.dialogRef.close()}submit(){0!=this.projectBudgetCosting.materialEquipmentCostingsList.length&&0!=this.projectBudgetCosting.materialEquipmentCostingsList[0].materialEquipmentSubCostingList.length?this.apiService.post("projectBudgetCosting/createProjectMaterialEquipmentCostingForSite",this.projectBudgetCosting).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.log(e),console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}loadInitialData(){this.apiService.getall(`ProjectBudgetCosting/getProjectMaterialEquipmentCostingForSite/${this.project.customerCode}/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectBudgetCosting=e,0==this.projectBudgetCosting.status?this.createNewProjectBudgetCosting():3!=this.projectBudgetCosting.status&&this.createNewMaterialEquipmentBudgetCostingList(),this.findTotalsCosts()}),this.apiService.getall("OperationExpenseHead/getOperationExpenseHeadsForMaterialEquipment").subscribe(e=>{this.materialEquipmentExpenceHeadSelectList=e})}createNewProjectBudgetCosting(){this.projectBudgetCosting.customerCode=this.project.customerCode,this.projectBudgetCosting.projectCode=this.project.projectCode,this.projectBudgetCosting.siteCode=this.form.controls.siteCode.value,this.projectBudgetCosting.serviceType="MATERIALEQUIPMENT",this.createNewMaterialEquipmentBudgetCostingList()}createNewMaterialEquipmentBudgetCostingList(){this.projectBudgetCosting.materialEquipmentCostingsList=[]}getMaterialEquipmentSubCostingList(e,o){this.activeMaterialEquipmentIndex=o,this.materialEquipmentSubCostingList=e.materialEquipmentSubCostingList.slice(),this.totalForMaterialEquipmentUnit=e.costPerUnit,this.findTotalsCosts()}findTotalsCosts(){this.grandTotal=0,0!=this.projectBudgetCosting.materialEquipmentCostingsList.length&&this.projectBudgetCosting.materialEquipmentCostingsList.forEach(e=>{e.costPerUnit=0,e.materialEquipmentSubCostingList.forEach(o=>{e.costPerUnit+=o.amount}),e.totMaterialEquipmentCost=e.costPerUnit*e.quantity,this.grandTotal=this.grandTotal+e.totMaterialEquipmentCost})}onSelectSiteCode(e){this.totalForMaterialEquipmentUnit=0,this.form.controls.siteCode.setValue(e.target.value),this.loadInitialData(),this.activeMaterialEquipmentIndex=-1}addUpdateSubCostings(){var e;if(-1!=this.activeMaterialEquipmentIndex){let o=this.form.controls.subCostAmount.value,n=this.form.controls.subCostCostHead.value;if(""!=n&&""!=o){let s={amount:o,costHead:n};if(null==this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList.find(c=>c.costHead==n))null===(e=this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList)||void 0===e||e.push(s);else{let c=this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList.findIndex(p=>p.costHead==n);this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList[c].amount=o}this.findTotalsCosts(),this.getMaterialEquipmentSubCostingList(this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex],this.activeMaterialEquipmentIndex),this.resetSubCosting()}}else this.notifyService.showError(`${this.translate.instant("Please Select Material Equipment")}`)}removeSubCostings(e){this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList.splice(e,1),this.findTotalsCosts(),this.getMaterialEquipmentSubCostingList(this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex],this.activeMaterialEquipmentIndex)}resetSubCosting(){this.form.controls.subCostAmount.setValue(""),this.form.controls.subCostCostHead.setValue("")}selectCostHead(e){let o=e.target.value;if(-1!=this.activeMaterialEquipmentIndex){this.form.controls.subCostCostHead.setValue(e.target.value);let n=this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList.find(s=>s.costHead==o);this.form.controls.subCostAmount.setValue(null!=n?n.amount:"")}else this.form.controls.subCostCostHead.setValue(""),this.form.controls.subCostAmount.setValue("")}totalPerMaterialEquipment(e){return e.costPerUnit}onSelectionMaterialEquipment(e){let o=this.isArab?e.option.value.nameInArabic:e.option.value.nameInEnglish;this.form.controls.materialEquipmentCode.setValue(o),this.materialEquipmentCodeControl.setValue(o),this.materialEquipmentCode=e.option.value.code}addUpdateMaterialEquipment(){if(""!=this.materialEquipmentCode&&""!=this.form.controls.quantity.value){let o={costPerUnit:0,quantity:this.form.controls.quantity.value,projectBudgetCostingId:this.projectBudgetCosting.projectBudgetCostingId,materialEquipmentCostingId:0,materialEquipmentSubCostingList:[].slice(),materialEquipmentCode:this.materialEquipmentCode,siteCode:this.projectBudgetCosting.siteCode};this.projectBudgetCosting.materialEquipmentCostingsList.push(o)}else this.notifyService.showError(`${this.translate.instant("Incorrect Material Data")}`);this.materialEquipmentCode="",this.materialEquipmentCodeControl.setValue(""),this.quantity=0,this.form.controls.quantity.setValue(""),this.canSave=!1}removeMaterial(e){this.projectBudgetCosting.materialEquipmentCostingsList.splice(e,1),this.findTotalsCosts(),this.activeMaterialEquipmentIndex=-1}getCostHead(e){return this.materialEquipmentExpenceHeadSelectList.find(o=>o.costHead==e)}getMaterialEquipment(e){return this.materialEquipmentSelectionList.find(o=>o.value==e)}SubCostingOK(){console.log(this.projectBudgetCosting.materialEquipmentCostingsList),this.activeMaterialEquipmentIndex=-1,this.canSave=!this.projectBudgetCosting.materialEquipmentCostingsList.find(e=>e.totLogisticsCost<=0)}cancelEditCosting(){this.activeMaterialEquipmentIndex=-1,this.canSave=!this.projectBudgetCosting.materialEquipmentCostingsList.find(e=>e.totLogisticsCost<=0)}skippEstimationType(){this.apiService.post("projectBudgetCosting/skippEstimationType",{projectCode:this.project.projectCode,siteCode:this.project.siteCode,type:"material"}).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-material-costing"]],features:[t.qOj],decls:62,vars:40,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-6",2,"padding-right","0"],[1,"paddingtop15"],["class","row",4,"ngIf"],["class","table  table-bordered table-borderedcustom no-wrap","id","table",4,"ngIf"],["class","col-md-6 col-lg-6",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button","value","CANCEL",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SAVE",4,"ngIf"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SKIP",3,"click",4,"ngIf"],[3,"value"],[1,"col-md-6","col-lg-6"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["type","number","formControlName","quantity",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],[2,"font-size","30px",3,"click"],[1,"icon-plus"],[1,"col-md-2","col-lg-1"],["id","table",1,"table","table-bordered","table-borderedcustom","no-wrap"],["class","selected",4,"ngFor","ngForOf"],["colspan","3",2,"text-align","right"],[2,"text-align","right"],[1,"selected"],["style","text-align:right",4,"ngIf"],[4,"ngIf"],["style","text-align: right;",4,"ngIf"],[2,"width","10%","text-align","right"],[3,"click",4,"ngIf"],["style","font-size:smaller",4,"ngIf"],[3,"click"],[1,"tableicons"],[1,"icon-trash"],[2,"font-size","smaller"],["type","button",1,"btn","waves-effect","waves-light","btn-outline-primary",3,"click"],["formControlName","subCostCostHead",1,"custom-select","mr-sm-2",3,"change"],[1,"col-md-5","col-lg-4"],["type","number","formControlName","subCostAmount",1,"form-control",3,"placeholder"],["class","table tablecolor  table-bordered no-wrap",4,"ngIf"],[1,"table","tablecolor","table-bordered","no-wrap"],["width","60%"],["width","40%"],[4,"ngFor","ngForOf"],[2,"width","60%"],[2,"width","30%","text-align","right"],[2,"width","10%","text-align","right",3,"click"],["type","submit","value","SAVE",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock"],["type","button","value","SKIP",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1," \xd7"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",3),t.TgZ(9,"div",7),t.TgZ(10,"h4",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(13,"div",9),t.TgZ(14,"div"),t.TgZ(15,"div",4),t.TgZ(16,"div",10),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t.TgZ(19,"label",13),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t._UZ(24,"input",16),t.ALo(25,"translate"),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(28,"div",12),t.TgZ(29,"label",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",14),t.TgZ(33,"div",15),t._UZ(34,"input",18),t.ALo(35,"translate"),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(38,"div",12),t.TgZ(39,"div",14),t.TgZ(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(44,"option",20),t._uU(45),t.ALo(46,"translate"),t.ALo(47,"translate"),t.qZA(),t.YNc(48,Of,2,2,"option",21),t.qZA(),t._UZ(49,"validation-message",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",3),t.TgZ(51,"div",22),t.TgZ(52,"div",23),t.YNc(53,jf,18,18,"div",24),t.qZA(),t.YNc(54,$f,25,17,"table",25),t.qZA(),t.YNc(55,Kf,18,14,"div",26),t.qZA(),t.qZA(),t.TgZ(56,"div",3),t.TgZ(57,"div",27),t.TgZ(58,"input",28),t.NdJ("click",function(){return o.closeModel()}),t.qZA(),t._uU(59," \xa0 "),t.YNc(60,t2,1,0,"input",29),t.YNc(61,e2,1,0,"input",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(9),t.hij("",t.lcZ(12,20,"MaterialEquipment_Costing")," "),t.xp6(9),t.Oqu(t.lcZ(21,22,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(25,24,"Please_Enter")," ",t.lcZ(26,26,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(31,28,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(35,30,"Please_Enter")," ",t.lcZ(36,32,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(42,34,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(46,36,"Select")," ",t.lcZ(47,38,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeSelectList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(5),t.Q6J("ngIf",o.canSave&&o.grandTotal>0&&-1==o.activeMaterialEquipmentIndex),t.xp6(1),t.Q6J("ngIf",0==o.grandTotal))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg,Z.O5,At.z,lt.ZL,l.oH,lt.XC,l.wV,Ut.ey],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function o2(i,a){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArab?e.siteArbName:e.siteName)}}function i2(i,a){if(1&i&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.hij(" ",o.isArab?e.costNameInArabic:e.costNameInEnglish," ")}}function n2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"div",31),t._UZ(2,"auto-loader",32),t._UZ(3,"input",33),t.ALo(4,"translate"),t.ALo(5,"translate"),t.TgZ(6,"mat-autocomplete",34,35),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().onSelectionFinancialExpense(n)}),t.YNc(8,i2,2,2,"mat-option",21),t.ALo(9,"async"),t.qZA(),t.qZA(),t.TgZ(10,"div",12),t._UZ(11,"input",36),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",37),t.TgZ(15,"a",38),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateFinancialExpense()}),t._UZ(16,"i",39),t.qZA(),t.qZA(),t._UZ(17,"div",40),t.qZA()}if(2&i){const e=t.MAs(7),o=t.oxw();t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(4,8,"Please_Enter")," ",t.lcZ(5,10,"Financial_Expense_Overhead"),""),t.Q6J("formControl",o.financialExpenseCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(9,12,o.filteredFinancialExpenses)),t.xp6(3),t.hYB("placeholder","",t.lcZ(12,14,"Enter")," ",t.lcZ(13,16,"Amount"),"")}}function a2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",44),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",43),t._uU(4),t.qZA(),t.TgZ(5,"td",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.removeFinExpense(n.j)}),t.TgZ(6,"a",46),t._UZ(7,"i",47),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);let n;t.xp6(2),t.Oqu(o.isArab?null==(n=o.getFinExpence(e.financialExpenseCode))?null:n.costNameInArabic:null==(n=o.getFinExpence(e.financialExpenseCode))?null:n.costNameInEnglish),t.xp6(2),t.Oqu(e.costPerUnit)}}function s2(i,a){if(1&i&&(t.TgZ(0,"table",41),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"th"),t.qZA(),t.qZA(),t.TgZ(10,"tbody"),t.YNc(11,a2,8,2,"tr",42),t.TgZ(12,"tr"),t.TgZ(13,"th",43),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",43),t._uU(17),t.qZA(),t._UZ(18,"th"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,5,"Material_Equipment")," "),t.xp6(3),t.Oqu(t.lcZ(8,7,"Amount")),t.xp6(4),t.Q6J("ngForOf",e.projectBudgetCosting.financialExpenseCostingsList),t.xp6(3),t.hij(" ",t.lcZ(15,9,"Total")," "),t.xp6(3),t.hij(" ",e.grandTotal," ")}}function r2(i,a){1&i&&t._UZ(0,"input",48)}function l2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().skippEstimationType()}),t.qZA()}}let re=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.financialExpenseCostingList=[],this.grandTotal=0,this.totalForFinancialExpenseUnit=-1,this.financialExpenseCode="",this.activeFinancialExpenseIndex=-1,this.siteCodeSelectList=[],this.financialExpenseSelectionList=[],this.isDataLoading=!1,this.financialExpenseCodeControl=new l.NI(""),this.isArab=!1,this.filteredFinancialExpenses=this.financialExpenseCodeControl.valueChanges.pipe((0,ot.O)(this.financialExpenseCode),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterFinancialExpenses(h||""))))}filterFinancialExpenses(e){return this.apiService.getall(`OperationExpenseHead/getAutoSelectListForFinancialExpense?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.getFinancialExpenseSelectionList()}getFinancialExpenseSelectionList(){this.apiService.getall("OperationExpenseHead/getOperationExpenseHeadsForFinancialExpence").subscribe(e=>{this.financialExpenseCostingList=e})}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null==(null===(e=this.project)||void 0===e?void 0:e.siteCode)?"":this.project.siteCode,l.kI.required],financialExpenseCode:[""],costPerUnit:[""]}),this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{var n;null!=o?(this.siteCodeSelectList=o,null!=(null===(n=this.project)||void 0===n?void 0:n.siteCode)&&(this.loadInitialData(),this.form.controls.siteCode.disable({onlySelf:!0}))):this.siteCodeSelectList=[]})}closeModel(){this.dialogRef.close()}submit(){0!=this.projectBudgetCosting.financialExpenseCostingsList.length?this.apiService.post("projectBudgetCosting/createProjectFinancialExpenseCostingForSite",this.projectBudgetCosting).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.log(e),console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}loadInitialData(){this.apiService.getall(`ProjectBudgetCosting/getProjectFinancialExpenseCostingForSite/${this.project.customerCode}/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectBudgetCosting=e,0==this.projectBudgetCosting.status&&this.createNewProjectBudgetCosting(),this.findTotalsCosts()})}createNewProjectBudgetCosting(){this.projectBudgetCosting.customerCode=this.project.customerCode,this.projectBudgetCosting.projectCode=this.project.projectCode,this.projectBudgetCosting.siteCode=this.form.controls.siteCode.value,this.projectBudgetCosting.serviceType="MATERIALEQUIPMENT",this.createNewFinancialExpenseBudgetCostingList()}createNewFinancialExpenseBudgetCostingList(){this.projectBudgetCosting.financialExpenseCostingsList=[]}findTotalsCosts(){this.grandTotal=0,0!=this.projectBudgetCosting.financialExpenseCostingsList.length&&this.projectBudgetCosting.financialExpenseCostingsList.forEach(e=>{this.grandTotal=this.grandTotal+e.costPerUnit})}onSelectSiteCode(e){this.totalForFinancialExpenseUnit=0,this.form.controls.siteCode.setValue(e.target.value),this.loadInitialData(),this.activeFinancialExpenseIndex=-1}totalPerFinancialExpense(e){return e.costPerUnit}onSelectionFinancialExpense(e){let o=this.isArab?e.option.value.costNameInArabic:e.option.value.costNameInEnglish;this.form.controls.financialExpenseCode.setValue(o),this.financialExpenseCodeControl.setValue(o),this.financialExpenseCode=e.option.value.costHead;let n=this.projectBudgetCosting.financialExpenseCostingsList.findIndex(s=>s.financialExpenseCode==e.option.value.costHead);this.form.controls.costPerUnit.setValue(n>=0?this.projectBudgetCosting.financialExpenseCostingsList[n].costPerUnit:"")}addUpdateFinancialExpense(){if(""!=this.form.controls.financialExpenseCode.value&&""!=this.financialExpenseCodeControl.value&&""!=this.form.controls.costPerUnit.value){let e={costPerUnit:this.form.controls.costPerUnit.value,projectBudgetCostingId:this.projectBudgetCosting.projectBudgetCostingId,financialExpenseCostingId:0,financialExpenseCode:this.financialExpenseCode},o=this.projectBudgetCosting.financialExpenseCostingsList.findIndex(n=>n.financialExpenseCode==this.financialExpenseCode);o>=0?this.projectBudgetCosting.financialExpenseCostingsList[o].costPerUnit=this.form.controls.costPerUnit.value:this.projectBudgetCosting.financialExpenseCostingsList.push(e),this.findTotalsCosts()}else this.notifyService.showError(`${this.translate.instant("Incomplete Data")}`);this.financialExpenseCode="",this.financialExpenseCodeControl.setValue(""),this.form.controls.costPerUnit.setValue("")}removeFinExpense(e){this.projectBudgetCosting.financialExpenseCostingsList.splice(e,1),this.findTotalsCosts()}getFinExpence(e){return this.financialExpenseCostingList.find(o=>o.costHead==e)}skippEstimationType(){this.apiService.post("projectBudgetCosting/skippEstimationType",{projectCode:this.project.projectCode,siteCode:this.project.siteCode,type:"financeExpence"}).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-financial-expense-costing"]],features:[t.qOj],decls:61,vars:39,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-6",2,"padding-right","0"],[1,"paddingtop15"],["class","row",4,"ngIf"],["class","table  table-bordered table-borderedcustom no-wrap","id","table",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button","value","CANCEL",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SAVE",4,"ngIf"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SKIP",3,"click",4,"ngIf"],[3,"value"],[1,"col-md-6","col-lg-6"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["type","number","formControlName","costPerUnit",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],[2,"font-size","30px",3,"click"],[1,"icon-plus"],[1,"col-md-2","col-lg-1"],["id","table",1,"table","table-bordered","table-borderedcustom","no-wrap"],["class","selected",4,"ngFor","ngForOf"],[2,"text-align","right"],[1,"selected"],[2,"width","10%","text-align","right",3,"click"],[1,"tableicons"],[1,"icon-trash"],["type","submit","value","SAVE",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock"],["type","button","value","SKIP",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1," \xd7"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",3),t.TgZ(9,"div",7),t.TgZ(10,"h4",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(13,"div",9),t.TgZ(14,"div"),t.TgZ(15,"div",4),t.TgZ(16,"div",10),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t.TgZ(19,"label",13),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t._UZ(24,"input",16),t.ALo(25,"translate"),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(28,"div",12),t.TgZ(29,"label",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",14),t.TgZ(33,"div",15),t._UZ(34,"input",18),t.ALo(35,"translate"),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(38,"div",12),t.TgZ(39,"div",14),t.TgZ(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(44,"option",20),t._uU(45),t.ALo(46,"translate"),t.ALo(47,"translate"),t.qZA(),t.YNc(48,o2,2,2,"option",21),t.qZA(),t._UZ(49,"validation-message",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",3),t.TgZ(51,"div",22),t.TgZ(52,"div",23),t.YNc(53,n2,18,18,"div",24),t.qZA(),t.YNc(54,s2,19,11,"table",25),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",3),t.TgZ(56,"div",26),t.TgZ(57,"input",27),t.NdJ("click",function(){return o.closeModel()}),t.qZA(),t._uU(58," \xa0 "),t.YNc(59,r2,1,0,"input",28),t.YNc(60,l2,1,0,"input",29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(9),t.hij("",t.lcZ(12,19,"FinancialExpense_Costing")," "),t.xp6(9),t.Oqu(t.lcZ(21,21,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(25,23,"Please_Enter")," ",t.lcZ(26,25,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(31,27,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(35,29,"Please_Enter")," ",t.lcZ(36,31,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(42,33,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(46,35,"Select")," ",t.lcZ(47,37,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeSelectList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(5),t.Q6J("ngIf",o.grandTotal>0),t.xp6(1),t.Q6J("ngIf",0==o.grandTotal))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg,Z.O5,At.z,lt.ZL,l.oH,lt.XC,l.wV,Ut.ey],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function c2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.skillsetCode)}}function p2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);let n;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(o.isArab?null==(n=o.getSkillset(e.skillsetCode))?null:n.nameInArabic:null==(n=o.getSkillset(e.skillsetCode))?null:n.nameInEnglish)}}function u2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.costPerUnit)}}function d2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.quantity)}}function _2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.totResourceCost)}}function m2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,c2,2,2,"td",5),t.YNc(2,p2,2,2,"td",5),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.YNc(7,u2,2,2,"td",12),t.YNc(8,d2,2,2,"td",5),t.YNc(9,_2,2,2,"td",12),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(e.amount),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function g2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,m2,10,7,"tr",3),t.TgZ(2,"tr"),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.resourceSubCostingList),t.xp6(3),t.Oqu(t.lcZ(5,3,"Margin")),t.xp6(3),t.Oqu(e.margin)}}function h2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.materialEquipmentCode)}}function Z2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);let n;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(o.isArab?null==(n=o.getMaterialEquipments(e.materialEquipmentCode))?null:n.textTwo:null==(n=o.getMaterialEquipments(e.materialEquipmentCode))?null:n.text)}}function f2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.costPerUnit)}}function A2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.quantity)}}function C2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.totMaterialEquipmentCost)}}function T2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,h2,2,2,"td",5),t.YNc(2,Z2,2,2,"td",5),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.YNc(7,f2,2,2,"td",12),t.YNc(8,A2,2,2,"td",5),t.YNc(9,C2,2,2,"td",12),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(e.amount),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function v2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,T2,10,7,"tr",3),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.materialEquipmentSubCostingList)}}function x2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(e.vehicleNumber)}}function q2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(o.isArab?o.getLogisticsVehicle(e.vehicleNumber).textTwo:o.getLogisticsVehicle(e.vehicleNumber).text)}}function b2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(e.qty)}}function y2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(e.costPerUnit)}}function S2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(e.totLogisticsCost)}}function w2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,x2,2,2,"td",5),t.YNc(2,q2,2,2,"td",5),t.YNc(3,b2,2,2,"td",5),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.YNc(8,y2,2,2,"td",12),t.YNc(9,S2,2,2,"td",12),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(e.amount),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function U2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,w2,10,7,"tr",3),t.TgZ(2,"tr"),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.logisticsSubCostingList),t.xp6(3),t.Oqu(t.lcZ(5,3,"Margin")),t.xp6(3),t.Oqu(e.margin)}}function D2(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",10),t._uU(7),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit,o=t.oxw(2);let n;t.xp6(3),t.Oqu(e.financialExpenseCode),t.xp6(2),t.Oqu(o.isArab?null==(n=o.getopeartionsExpenseHead(e.financialExpenseCode))?null:n.textTwo:null==(n=o.getopeartionsExpenseHead(e.financialExpenseCode))?null:n.text),t.xp6(2),t.Oqu(e.costPerUnit)}}function L2(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"h5"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"h5"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"div"),t.TgZ(9,"h5"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"table",7),t.TgZ(13,"tr"),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th",8),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.YNc(29,g2,8,5,"ng-container",3),t.TgZ(30,"tfoot"),t.TgZ(31,"tr"),t.TgZ(32,"th",9),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th",10),t._uU(36),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",6),t.TgZ(38,"div"),t.TgZ(39,"h5"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"table",7),t.TgZ(43,"tr"),t.TgZ(44,"th"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"th",8),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"th"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"th"),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.qZA(),t.YNc(59,v2,2,1,"ng-container",3),t.TgZ(60,"tfoot"),t.TgZ(61,"tr"),t.TgZ(62,"th",9),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"th",10),t._uU(66),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"div",6),t.TgZ(68,"div"),t.TgZ(69,"h5"),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"table",7),t.TgZ(73,"tr"),t.TgZ(74,"th"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"th"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"th",8),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"th"),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.qZA(),t.YNc(89,U2,8,5,"ng-container",3),t.TgZ(90,"tfoot"),t.TgZ(91,"tr"),t.TgZ(92,"th",9),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.TgZ(95,"th",10),t._uU(96),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(97,"div",6),t.TgZ(98,"div"),t.TgZ(99,"h5"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.TgZ(102,"table",7),t.TgZ(103,"tr"),t.TgZ(104,"th"),t._uU(105),t.ALo(106,"translate"),t.qZA(),t.TgZ(107,"th"),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.TgZ(110,"th"),t._uU(111),t.ALo(112,"translate"),t.qZA(),t.qZA(),t.YNc(113,D2,8,3,"ng-container",3),t.TgZ(114,"tfoot"),t.TgZ(115,"tr"),t.TgZ(116,"th",11),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.TgZ(119,"th",10),t._uU(120),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,42,"Site_Code"),":",e.siteData.siteCode,""),t.xp6(3),t.AsE("",t.lcZ(6,44,"Site_Name"),":",o.isArab?e.siteData.siteArbName:e.siteData.siteName,""),t.xp6(5),t.Oqu(t.lcZ(11,46,"Resource_Costing_Details")),t.xp6(5),t.Oqu(t.lcZ(16,48,"SkillSet_Code")),t.xp6(3),t.Oqu(t.lcZ(19,50,"Name")),t.xp6(3),t.Oqu(t.lcZ(22,52,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(25,54,"Qty")),t.xp6(3),t.Oqu(t.lcZ(28,56,"Amount")),t.xp6(2),t.Q6J("ngForOf",e.prcListForSite),t.xp6(4),t.AsE("",t.lcZ(34,58,"Total_Cost_For_Resources")," ",o.isArab?e.siteData.siteArbName:e.siteData.siteName," "),t.xp6(3),t.hij(" ",e.totRcForSite,""),t.xp6(4),t.hij(" ",t.lcZ(41,60,"Material_Equipment_Costing_Details")," "),t.xp6(5),t.Oqu(t.lcZ(46,62,"Material_Equipment_Code")),t.xp6(3),t.Oqu(t.lcZ(49,64,"Name")),t.xp6(3),t.Oqu(t.lcZ(52,66,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(55,68,"Qty")),t.xp6(3),t.Oqu(t.lcZ(58,70,"Amount")),t.xp6(2),t.Q6J("ngForOf",e.pmcListForSite),t.xp6(4),t.AsE("",t.lcZ(64,72,"Total_Material_Cost_For")," ",o.isArab?e.siteData.siteArbName:e.siteData.siteName," "),t.xp6(3),t.hij(" ",e.totMcForSite,""),t.xp6(4),t.hij(" ",t.lcZ(71,74,"Logistics_Vehicle_Costing_Details")," "),t.xp6(5),t.Oqu(t.lcZ(76,76,"Vehicle_Code")),t.xp6(3),t.Oqu(t.lcZ(79,78,"Vehicle_Name")),t.xp6(3),t.Oqu(t.lcZ(82,80,"Qty")),t.xp6(3),t.Oqu(t.lcZ(85,82,"Amount_For_Vehicle")),t.xp6(3),t.Oqu(t.lcZ(88,84,"Amount")),t.xp6(2),t.Q6J("ngForOf",e.plcListForSite),t.xp6(4),t.AsE("",t.lcZ(94,86,"Total_Logistics_Cost_for")," ",o.isArab?e.siteData.siteArbName:e.siteData.siteName," "),t.xp6(3),t.hij(" ",e.totLcForSite,""),t.xp6(4),t.Oqu(t.lcZ(101,88,"Financial_Expense_Costing_Details")),t.xp6(5),t.Oqu(t.lcZ(106,90,"Code")),t.xp6(3),t.Oqu(t.lcZ(109,92,"Name")),t.xp6(3),t.Oqu(t.lcZ(112,94,"Amount")),t.xp6(2),t.Q6J("ngForOf",e.pfcListForSite),t.xp6(4),t.AsE("",t.lcZ(118,96,"Total_Expense_Overheads_Cost_For")," ",o.isArab?e.siteData.siteArbName:e.siteData.siteName," "),t.xp6(3),t.hij(" ",e.totFcForSite,"")}}function N2(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Total_Estimation_For_Project")," : ",null==e.projectBudgetEstimation?null:e.projectBudgetEstimation.grandTotalCostForProject," ")}}function E2(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Total_Estimation_For_Site")," : ",null==e.projectBudgetEstimation?null:e.projectBudgetEstimation.grandTotalCostForProject," ")}}let le=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.isArab=!1}ngOnInit(){console.log(this.project),this.isArab=this.utilService.isArabic(),this.loadSkillSetsList(),this.loadOperationsExpenseHeads(),this.loadMaterialEquipments(),this.loadLogisticsVehicles(),this.loadInitialData(),this.getCustomerData()}closeModel(){this.dialogRef.close()}submit(){}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1),"Print"==this.modalBtnTitle&&this.printComponent()}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1),"Print"==this.modalBtnTitle&&this.printComponent()})}printComponent(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=o.margin,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=o.margin,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit*o.qty),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite})}loadSkillSetsList(){this.apiService.getall("Skillset/getAllSkillsetList").subscribe(e=>{this.skillsetList=e})}getSkillset(e){return this.skillsetList.find(n=>n.skillSetCode==e)}loadOperationsExpenseHeads(){this.apiService.getall("OperationExpenseHead/getSelectOperationExpenseHeadList").subscribe(e=>{this.opeartionsExpenseHeadsList=e})}getopeartionsExpenseHead(e){return this.opeartionsExpenseHeadsList.find(n=>n.value==e)}loadMaterialEquipments(){this.apiService.getall("Materialequipment/getSelectMaterialequipmentList").subscribe(e=>{this.materialEquipmentList=e})}getMaterialEquipments(e){return this.materialEquipmentList.find(n=>n.value==e)}loadLogisticsVehicles(){this.apiService.getall("Logisticsandvehicle/getSelectLogisticsandvehicleList").subscribe(e=>{this.logisticsVehicleList=e})}getLogisticsVehicle(e){return this.logisticsVehicleList.find(n=>n.value==e)}getCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e?this.customerData=e:(this.notifyService.showError(this.translate.instant("Error")),console.log("No Customer Found"))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-estimation-consol-report"]],features:[t.qOj],decls:10,vars:6,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["id","printableArea",1,"container-fluid"],[4,"ngFor","ngForOf"],[2,"text-align","right"],[4,"ngIf"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["colspan","3"],["colspan","6",1,"text-right"],[1,"text-right"],["colspan","2",1,"text-right"],["class","text-right",4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,L2,121,98,"ng-container",3),t.TgZ(7,"h5",4),t.YNc(8,N2,3,4,"span",5),t.YNc(9,E2,3,4,"span",5),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,4,o.modalTitle)),t.xp6(5),t.Q6J("ngForOf",null==o.projectBudgetEstimation?null:o.projectBudgetEstimation.siteWisePBCListForProject),t.xp6(2),t.Q6J("ngIf",!(null!=o.project&&o.project.isAdendum)),t.xp6(1),t.Q6J("ngIf",null==o.project?null:o.project.isAdendum))},directives:[Z.sg,Z.O5],pipes:[f.X$],encapsulation:2}),i})();function O2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",14),t._uU(2),t.qZA(),t.TgZ(3,"td",14),t._uU(4),t.qZA(),t.TgZ(5,"td",14),t._uU(6),t.qZA(),t.TgZ(7,"td",14),t._uU(8),t.qZA(),t.TgZ(9,"td",14),t._uU(10),t.qZA(),t.TgZ(11,"td",14),t._uU(12),t.qZA(),t.TgZ(13,"td",14),t._uU(14),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.siteData.siteCode),t.xp6(2),t.Oqu(o.isArab?e.siteData.siteArbName:e.siteData.siteName),t.xp6(2),t.Oqu(e.totRcForSite),t.xp6(2),t.Oqu(e.totMcForSite),t.xp6(2),t.Oqu(e.totLcForSite),t.xp6(2),t.Oqu(e.totFcForSite),t.xp6(2),t.Oqu(e.grandTotalCostForSite)}}function k2(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Total_Estimation_For_Project")," : ",null==e.projectBudgetEstimation?null:e.projectBudgetEstimation.grandTotalCostForProject," ")}}function j2(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Total_Estimation_For_Site")," : ",null==e.projectBudgetEstimation?null:e.projectBudgetEstimation.grandTotalCostForProject," ")}}let ce=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.loadInitialData(),this.getCustomerData(),this.loadProjectData()}closeModel(){this.dialogRef.close()}submit(){}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)})}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=o.margin,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=0,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit*o.qty),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite})}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}getCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e?(this.customerData=e,this.getCity(e.custCityCode1),console.log(e)):(this.notifyService.showError(this.translate.instant("Error")),console.log("No Customer Found"))})}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o,console.log(o)})}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-estimation-summary-report"]],features:[t.qOj],decls:91,vars:60,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"padding-bottom","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","text-align","left"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[4,"ngFor","ngForOf"],[2,"text-align","right"],[4,"ngIf"],[2,"border","2px solid #878787","padding","5px","text-align","left","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printInvoice()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"div",4),t.TgZ(11,"table",5),t.TgZ(12,"tr"),t.TgZ(13,"th",6),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",7),t._uU(17),t.qZA(),t.TgZ(18,"th",6),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",8),t._uU(22),t.qZA(),t.qZA(),t.TgZ(23,"tr"),t.TgZ(24,"th",8),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th",9),t._uU(28),t.qZA(),t.qZA(),t.TgZ(29,"tr"),t.TgZ(30,"th",8),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th",8),t._uU(34),t.qZA(),t.TgZ(35,"th",8),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",8),t._uU(39),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",4),t.TgZ(41,"table",5),t.TgZ(42,"tr"),t.TgZ(43,"th",6),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"th",7),t._uU(47),t.qZA(),t.TgZ(48,"th",6),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"th",8),t._uU(52),t.qZA(),t.qZA(),t.TgZ(53,"tr"),t.TgZ(54,"th",6),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"th",6),t._uU(58),t.qZA(),t.TgZ(59,"th",6),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"th",8),t._uU(63),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(64,"table",10),t.TgZ(65,"tr"),t.TgZ(66,"th",8),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"th",8),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"th",8),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"th",8),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"th",8),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"th",8),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"th",8),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.qZA(),t.YNc(87,O2,15,7,"tr",11),t.qZA(),t.TgZ(88,"h5",12),t.YNc(89,k2,3,4,"span",13),t.YNc(90,j2,3,4,"span",13),t.qZA(),t.qZA()),2&e&&(t.xp6(14),t.hij(" ",t.lcZ(15,28,"Customer_Code")," "),t.xp6(3),t.hij(" #",null==o.project?null:o.project.customerCode," "),t.xp6(2),t.hij(" ",t.lcZ(20,30,"Customer_Name")," "),t.xp6(3),t.hij(" ",o.isArab?null==o.customerData?null:o.customerData.custArbName:null==o.customerData?null:o.customerData.custName," "),t.xp6(3),t.hij(" ",t.lcZ(26,32,"Address")," "),t.xp6(3),t.hij(" #",null==o.customerData?null:o.customerData.custAddress1," "),t.xp6(3),t.hij(" ",t.lcZ(32,34,"City")," "),t.xp6(3),t.hij(" ",o.isArab?null==o.city?null:o.city.cityNameAr:null==o.city?null:o.city.cityName," "),t.xp6(2),t.hij(" ",t.lcZ(37,36,"Phone")," "),t.xp6(3),t.hij(" ",null==o.customerData?null:o.customerData.custPhone1," "),t.xp6(5),t.hij(" ",t.lcZ(45,38,"Project_Code")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.projectCode," "),t.xp6(2),t.hij(" ",t.lcZ(50,40,"Est_Starting_Date")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.startDate.substring(0,10)," "),t.xp6(3),t.hij(" ",t.lcZ(56,42,"Project_Details")," "),t.xp6(3),t.hij(" ",o.isArab?null==o.projectData?null:o.projectData.projectNameArb:null==o.projectData?null:o.projectData.projectNameEng," "),t.xp6(2),t.hij(" ",t.lcZ(61,44,"Est_Closing_Date")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.endDate.substring(0,10)," "),t.xp6(4),t.Oqu(t.lcZ(68,46,"Site_Code")),t.xp6(3),t.Oqu(t.lcZ(71,48,"Site_Name")),t.xp6(3),t.Oqu(t.lcZ(74,50,"Total_SkillSet_Cost")),t.xp6(3),t.Oqu(t.lcZ(77,52,"Total_Material_cost")),t.xp6(3),t.Oqu(t.lcZ(80,54,"Total_Logistics_Cost")),t.xp6(3),t.Oqu(t.lcZ(83,56,"Total_Finacial_Expense_Cost")),t.xp6(3),t.Oqu(t.lcZ(86,58,"Total_Cost")),t.xp6(2),t.Q6J("ngForOf",null==o.projectBudgetEstimation?null:o.projectBudgetEstimation.siteWisePBCListForProject),t.xp6(2),t.Q6J("ngIf",!(null!=o.project&&o.project.isAdendum)),t.xp6(1),t.Q6J("ngIf",null==o.project?null:o.project.isAdendum))},directives:[Z.sg,Z.O5],pipes:[f.X$],encapsulation:2}),i})(),Wt=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.readonly=""}ngOnInit(){this.setForm()}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({serviceCode:[this.serviceCode],branchCode:[this.branchCode],serviceType:[this.serviceType],isApproved:[!1],appRemarks:["",l.kI.required]})}submit(){}postApproval(e){console.log(this.form.value),this.form.value.isApproved="True"==e,this.form.valid?this.apiService.post("OpApprovals",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)}):this.utilService.FillUpFields()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-approval-dialog-window"]],features:[t.qOj],decls:25,vars:22,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"mr-sm-2"],["formControlName","appRemarks",1,"form-control",3,"placeholder"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"label",5),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"textarea",6),t.ALo(12,"translate"),t.ALo(13,"translate"),t._uU(14,'        <validation-message [control]="form.controls.appRemarks"></validation-message>\n'),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",7),t.TgZ(16,"input",8),t.NdJ("click",function(){return o.postApproval("True")}),t.ALo(17,"translate"),t.qZA(),t._uU(18," \xa0 "),t.TgZ(19,"input",8),t.NdJ("click",function(){return o.postApproval("False")}),t.ALo(20,"translate"),t.qZA(),t._uU(21," \xa0 "),t.TgZ(22,"input",9),t.NdJ("click",function(){return o.closeModel()}),t.ALo(23,"translate"),t.qZA(),t._uU(24," \xa0 "),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,8,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(4),t.Oqu(t.lcZ(10,10,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(12,12,"Enter")," ",t.lcZ(13,14,"Remarks"),""),t.xp6(5),t.s9C("value",t.lcZ(17,16,"Approve")),t.xp6(3),t.s9C("value",t.lcZ(20,18,"Not_Approve")),t.xp6(3),t.s9C("value",t.lcZ(23,20,"Cancel")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],pipes:[f.X$],encapsulation:2}),i})();function M2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",36),t._uU(2),t.qZA(),t.TgZ(3,"td",37),t._uU(4),t.qZA(),t.TgZ(5,"td",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeLiabilityAndInsuranceTerm(n)}),t.TgZ(6,"a",39),t._UZ(7,"i",40),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.Oqu(n.contractTerm)}}function R2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,M2,8,2,"tr",28),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isLiabilityAndInsurance)}}function P2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,R2,2,1,"ng-container",35),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.liabilityInsuranceTerms)}}function F2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",36),t._uU(2),t.qZA(),t.TgZ(3,"td",37),t._uU(4),t.qZA(),t.TgZ(5,"td",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeTerminationClauseTerm(n)}),t.TgZ(6,"a",39),t._UZ(7,"i",40),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.Oqu(n.contractTerm)}}function I2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,F2,8,2,"tr",28),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isTerminationClause)}}function Y2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,I2,2,1,"ng-container",35),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.terminationClauseTerms)}}function J2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",44),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",n.convertDateToString(e.instDate).toString().substring(0,15)," "),t.xp6(2),t.hij(" ",e.particular," "),t.xp6(2),t.hij(" ",e.amount," ")}}function Q2(i,a){if(1&i&&(t.TgZ(0,"div",41),t.TgZ(1,"table",42),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",43),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.qZA(),t.ynx(16),t.YNc(17,J2,9,4,"tr",35),t.BQk(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,5,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"Payment_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(12,9,"Particular")," "),t.xp6(3),t.hij(" ",t.lcZ(15,11,"Amount")," "),t.xp6(3),t.Q6J("ngForOf",e.paymentTermsList)}}function B2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"div",47),t.TgZ(2,"div",48),t.TgZ(3,"input",49),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(8);return t.oxw(2).openDatePicker(n)}),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",50),t._UZ(6,"mat-datepicker-toggle",51),t._UZ(7,"mat-datepicker",52,53),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",9),t._UZ(10,"input",54),t.ALo(11,"translate"),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",47),t._UZ(14,"input",55),t.ALo(15,"translate"),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",56),t.TgZ(18,"a",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addUpdatePaymentTerm()}),t._UZ(19,"i",23),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(8),o=t.oxw(2);t.xp6(3),t.hYB("placeholder","",t.lcZ(4,11,"Select")," ","Payment_Date",""),t.Q6J("matDatepicker",e)("min",o.minDate)("max",o.maxDate),t.xp6(3),t.Q6J("for",e)("matDatepickerFilter",o.myDateFilter),t.xp6(4),t.hYB("placeholder","",t.lcZ(11,13,"Enter")," ",t.lcZ(12,15,"Amount"),""),t.xp6(4),t.hYB("placeholder","",t.lcZ(15,17,"Enter")," ",t.lcZ(16,19,"Particular"),"")}}function H2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",36),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",44),t._uU(8),t.qZA(),t.TgZ(9,"td",38),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).removPaymentTerm(s)}),t.TgZ(10,"a",39),t._UZ(11,"i",40),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.Oqu(e.instDate.toString().substring(0,15)),t.xp6(2),t.Oqu(e.particular),t.xp6(2),t.Oqu(e.amount)}}function $2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",58),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",44),t._uU(5),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"Balance_Amount")),t.xp6(3),t.Oqu(e.balance)}}function V2(i,a){if(1&i&&(t.TgZ(0,"div",45),t.YNc(1,B2,20,21,"div",46),t.TgZ(2,"div",24),t.TgZ(3,"table",25),t.TgZ(4,"tr",26),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",43),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"th"),t.qZA(),t.ynx(18),t.YNc(19,H2,12,4,"tr",35),t.YNc(20,$2,6,4,"tr",28),t.BQk(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=e.balance),t.xp6(5),t.hij(" ",t.lcZ(7,7,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(10,9,"Payment_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(13,11,"Particular")," "),t.xp6(3),t.hij(" ",t.lcZ(16,13,"Amount")," "),t.xp6(4),t.Q6J("ngForOf",e.paymentTerms),t.xp6(1),t.Q6J("ngIf",0!=e.balance)}}function G2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeAutoPayment()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Auto_Generate_PaymentTerms"))}function W2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeAutoPayment()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Manual_Payment Terms"))}let z2=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u){super(c),this.translate=e,this.notifyService=o,this.dialog=n,this.utilService=s,this.apiService=r,this.authService=c,this.fb=p,this.dialogRef=u,this.shiftsForSite=[],this.siteCode="",this.siteCodeList=[],this.tableData=[],this.footerData=[],this.monthsDataList=[],this.skillsetsListForSite=[],this.monthlyRoasterForSite=[],this.isRoasterGenerated=!1,this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.contractTermsList=[],this.paymentTermsList=[],this.paymentTerms=[],this.balance=0,this.autoPayment=!0,this.liabilityInsuranceTerms=[],this.terminationClauseTerms=[]}ngOnInit(){this.calculateDates(),this.loadContractData()}loadContractData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`ProjectContracts/getContractByProjectAndSiteCode/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{this.contractDto=o,this.contractTermsList=o.contractTerms.slice(),this.paymentTermsList=o.paymentTerms.slice(),this.liabilityInsuranceTerms=this.contractTermsList.filter(n=>n.isLiabilityAndInsurance),this.terminationClauseTerms=this.contractTermsList.filter(n=>n.isTerminationClause)}):this.apiService.getall(`ProjectContracts/getContractByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.contractDto=o,this.contractTermsList=o.contractTerms.slice(),this.paymentTermsList=o.paymentTerms.slice(),this.liabilityInsuranceTerms=this.contractTermsList.filter(n=>n.isLiabilityAndInsurance),this.terminationClauseTerms=this.contractTermsList.filter(n=>n.isTerminationClause)})}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null===(e=this.project)||void 0===e?void 0:e.siteCode],startDate:[this.project.startDate.toString().substring(0,10)],endDate:[this.project.endDate.toString().substring(0,10)],noOfDays:[this.noOfDays],liabilityAndInsurance:[""],terminationClause:[""],instDate:[""],amount:[""],particular:[""]}),this.loadInitialData()}closeModel(){this.dialogRef.close()}submit(){}calculateDates(){this.monthsDataList=[];let e=new Date(this.project.startDate),o=new Date(this.project.endDate);this.minDate=new Date>e?e:new Date,this.maxDate=o,this.noOfDays=(o.getTime()-e.getTime())/864e5+1;for(let n=e.getFullYear();n<=o.getFullYear();n++){let s=n==e.getFullYear()?e.getMonth():1,r=n==o.getFullYear()?o.getMonth():12;for(let c=s;c<=r;c++){let p=c==s&&n==e.getFullYear()?e.getDate():1,u=c==r&&n==o.getFullYear()?o.getDate():new Date(n,c+1,0).getDate(),d=(new Date(n,c,u).getTime()-new Date(n,c,p).getTime())/864e5+1,_={sd:p,ed:u,mStartDate:new Date(n,c,p).toDateString(),mEndDate:new Date(n,c,u).toDateString(),mNoOfDays:d};this.monthsDataList.push(_)}}this.setForm()}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1),this.loadTableData()}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1),this.loadTableData()})}loadTableData(){var e;this.tableData=[];for(let n=0;n<this.monthsDataList.length;n++){let s={sd:this.monthsDataList[n].sd,ed:this.monthsDataList[n].ed,startDate:this.monthsDataList[n].mStartDate,endDate:this.monthsDataList[n].mEndDate,noOfDays:this.monthsDataList[n].mNoOfDays,amount:(this.projectBudgetEstimation.grandTotalCostForProject/this.noOfDays*this.monthsDataList[n].mNoOfDays).toFixed(0)};this.tableData.push(s)}this.paymentTermsList=[];for(var o=0;o<this.tableData.length;o++){let n={customerCode:this.project.customerCode,projectCode:this.project.projectCode,siteCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,branchCode:this.project.branchCode,instDate:this.convertStrToDate(this.tableData[o].startDate),particular:"Payment-"+(o+1),amount:this.tableData[o].amount,noOfDays:this.tableData[o].noOfDays};this.paymentTermsList.push(n)}}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=0,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=0,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite}),this.balance=this.remainingBalance()}removeContractTerm(e){this.contractTermsList.splice(e,1)}removeLiabilityAndInsuranceTerm(e){this.liabilityInsuranceTerms.splice(e,1)}removeTerminationClauseTerm(e){this.terminationClauseTerms.splice(e,1)}addUpdateContractTerm(){var e;if(""!=this.form.controls.liabilityAndInsurance.value||""!=this.form.controls.terminationClause.value){let o={contractTerm:""!=this.form.controls.liabilityAndInsurance.value?this.form.controls.liabilityAndInsurance.value:this.form.controls.terminationClause.value,customerCode:this.project.customerCode,projectCode:this.project.projectCode,siteCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,branchCode:this.project.branchCode,isLiabilityAndInsurance:""!=this.form.controls.liabilityAndInsurance.value,isTerminationClause:""!=this.form.controls.terminationClause.value};this.contractTermsList.push(o),this.form.controls.liabilityAndInsurance.setValue(""),this.form.controls.terminationClause.setValue("")}else this.notifyService.showWarning(`${this.translate.instant("Enter_Contract_Terms")}`,`${this.translate.instant("Warning")}`)}addUpdateLiabilityAndInsuranceTerm(){var e;if(""!=this.form.controls.liabilityAndInsurance.value){let o={contractTerm:this.form.controls.liabilityAndInsurance.value,customerCode:this.project.customerCode,projectCode:this.project.projectCode,sitCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,branchCode:this.project.branchCode,isLiabilityAndInsurance:!0,isTerminationClause:!1};this.liabilityInsuranceTerms.push(o),this.form.controls.liabilityAndInsurance.setValue(""),this.form.controls.terminationClause.setValue("")}else this.notifyService.showWarning(`${this.translate.instant("Enter_Contract_Terms")}`,`${this.translate.instant("Warning")}`)}addUpdateTerminationClauseTerm(){var e;if(""!=this.form.controls.terminationClause.value){let o={contractTerm:this.form.controls.terminationClause.value,customerCode:this.project.customerCode,projectCode:this.project.projectCode,siteCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,branchCode:this.project.branchCode,isLiabilityAndInsurance:!1,isTerminationClause:!0};this.terminationClauseTerms.push(o),this.form.controls.liabilityAndInsurance.setValue(""),this.form.controls.terminationClause.setValue("")}else this.notifyService.showWarning(`${this.translate.instant("Enter_Contract_Terms")}`,`${this.translate.instant("Warning")}`)}generateContractForProject(){var e,o;if(this.contractTermsList=[],this.contractTermsList=this.liabilityInsuranceTerms.concat(this.terminationClauseTerms).slice(),0==this.contractTermsList.length)this.notifyService.showWarning(`${this.translate.instant("Enter_Contract_Terms")}`,`${this.translate.instant("Warning")}`);else if(this.autoPayment||0!=this.paymentTerms.length){let n={customerCode:this.project.customerCode,projectCode:this.project.projectCode,siteCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,paymentTerms:this.autoPayment?this.paymentTermsList:this.paymentTerms,contractTerms:this.contractTermsList,branchCode:this.project.branchCode};this.contractDto=n,(null===(o=this.project)||void 0===o?void 0:o.isAdendum)?this.apiService.post("ProjectContracts/CreateSiteContract",this.contractDto).subscribe(s=>{s&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},s=>{console.log(s),console.error(s),this.utilService.ShowApiErrorMessage(s)}):this.apiService.post("ProjectContracts",this.contractDto).subscribe(s=>{s&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},s=>{console.log(s),console.error(s),this.utilService.ShowApiErrorMessage(s)})}else this.notifyService.showWarning(`${this.translate.instant("Enter")} ${this.translate.instant("Payment_Terms")}`,`${this.translate.instant("Warning")}`)}convertStrToDate(e){var o=new Date(e),n=("0"+(o.getMonth()+1)).slice(-2),s=("0"+o.getDate()).slice(-2);return[o.getFullYear(),n,s].join("-")}convertDateToString(e){return new Date(e)}openDatePicker(e){e.open()}addUpdatePaymentTerm(){var e;if(""!=this.form.controls.instDate.value&&""!=this.form.controls.amount.value&&""!=this.form.controls.particular.value){if(this.form.controls.amount.value<=this.balance){let o={customerCode:this.project.customerCode,projectCode:this.project.projectCode,siteCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,branchCode:this.project.branchCode,instDate:this.form.controls.instDate.value,particular:this.form.controls.particular.value,amount:this.form.controls.amount.value};this.paymentTerms.push(o),this.balance=this.remainingBalance(),this.form.controls.particular.setValue(""),this.form.controls.amount.setValue("")}else this.notifyService.showWarning(`${this.translate.instant("Payment_Exceeding_Balance")}`,`${this.translate.instant("Warning")}`);this.form.controls.amount.setValue("")}else this.notifyService.showWarning(`${this.translate.instant("Enter_Payment_Terms")}`,`${this.translate.instant("Warning")}`);this.balance=this.remainingBalance()}removPaymentTerm(e){this.paymentTerms.splice(e,1),this.balance=this.remainingBalance()}remainingBalance(){let e=0,o=0;return 0==this.paymentTerms.length?this.projectBudgetEstimation.grandTotalCostForProject:(this.paymentTerms.forEach(n=>{e+=n.amount}),o=this.projectBudgetEstimation.grandTotalCostForProject-e,o)}changeAutoPayment(){return this.autoPayment=!this.autoPayment,this.autoPayment}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.sK),t.Y36(w.g),t.Y36(T.uw),t.Y36(b.t),t.Y36(q.s),t.Y36(v._),t.Y36(l.qu),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-convert-to-contract"]],features:[t.qOj],decls:96,vars:52,consts:[["novalidate","",1,"mt-4",2,"margin-top","0!important",3,"formGroup","ngSubmit"],[1,"modal-body",2,"padding","0"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",2,"position","absolute","right","0","top","-8px","font-size","40px","font-weight","normal",3,"click"],[1,"outer"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","customerCode","readonly","",1,"form-control"],["type","text","formControlName","projectCode","readonly","",1,"form-control"],[1,"col-md-2","col-lg-2"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["type","text","formControlName","noOfDays","readonly","",1,"form-control"],[1,"col-md-6","col-lg-6"],[1,"row"],[1,"col-md-10","col-lg-11"],["formControlName","liabilityAndInsurance",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-1"],[2,"font-size","24px","margin-left","-18px","position","relative","margin-top","18px","display","block",3,"click"],[1,"icon-plus"],[1,"col-md-12","col-lg-12","mt-2"],[1,"table","tablecolor","table-bordered",2,"font-size","12px"],[2,"font-size","14px"],[2,"width","10%"],[4,"ngIf"],["formControlName","terminationClause",1,"form-control",3,"placeholder"],["class","col-md-7 col-lg-7","style","padding-right:0",4,"ngIf"],["class","col-md-7 col-lg-7",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value","click",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],[4,"ngFor","ngForOf"],[2,"width","5%"],[2,"width","85%"],[2,"width","10%","text-align","right",3,"click"],[1,"tableicons"],[1,"icon-trash"],[1,"col-md-7","col-lg-7",2,"padding-right","0"],["id","zero_config1",1,"table","table-bordered",2,"font-size","14px"],[2,"width","45%"],[2,"text-align","right"],[1,"col-md-7","col-lg-7"],["class","row",4,"ngIf"],[1,"col-md-4","col-lg-4"],[1,"input-group","mb-2"],["formControlName","instDate",1,"form-control","datapickerinput",3,"matDatepicker","min","max","placeholder","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for","matDatepickerFilter"],["startView","month"],["dp",""],["type","number","formControlName","amount",1,"form-control",3,"placeholder"],["type","text","formControlName","particular",1,"form-control",3,"placeholder"],[1,"col-md-1","col-lg-1"],[2,"font-size","24px","margin-left","-18px","position","relative","margin-top","5px","display","block",3,"click"],["colspan","3",2,"text-align","right"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.TgZ(14,"label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",11),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",10),t.TgZ(20,"label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",12),t.qZA(),t.qZA(),t.TgZ(24,"div",13),t.TgZ(25,"div",10),t.TgZ(26,"label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"input",14),t.qZA(),t.qZA(),t.TgZ(30,"div",13),t.TgZ(31,"div",10),t.TgZ(32,"label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",15),t.qZA(),t.qZA(),t.TgZ(36,"div",13),t.TgZ(37,"div",10),t.TgZ(38,"label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t._UZ(41,"input",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",5),t.TgZ(43,"div",17),t.TgZ(44,"div",18),t.TgZ(45,"div",19),t._UZ(46,"textarea",20),t.ALo(47,"translate"),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",21),t.TgZ(50,"a",22),t.NdJ("click",function(){return o.addUpdateLiabilityAndInsuranceTerm()}),t._UZ(51,"i",23),t.qZA(),t.qZA(),t.TgZ(52,"div",24),t.TgZ(53,"table",25),t.TgZ(54,"tr",26),t.TgZ(55,"th",27),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"th"),t._uU(59),t.ALo(60,"translate"),t.qZA(),t._UZ(61,"th"),t.qZA(),t.YNc(62,P2,2,1,"ng-container",28),t.qZA(),t._UZ(63,"div"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(64,"div",17),t.TgZ(65,"div",18),t.TgZ(66,"div",19),t._UZ(67,"textarea",29),t.ALo(68,"translate"),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"div",21),t.TgZ(71,"a",22),t.NdJ("click",function(){return o.addUpdateTerminationClauseTerm()}),t._UZ(72,"i",23),t.qZA(),t.qZA(),t.TgZ(73,"div",24),t.TgZ(74,"table",25),t.TgZ(75,"tr",26),t.TgZ(76,"th",27),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"th"),t._uU(80),t.ALo(81,"translate"),t.qZA(),t._UZ(82,"th"),t.qZA(),t.YNc(83,Y2,2,1,"ng-container",28),t.qZA(),t._UZ(84,"div"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"div",5),t.YNc(86,Q2,18,13,"div",30),t.YNc(87,V2,21,15,"div",31),t.qZA(),t.TgZ(88,"div",5),t.TgZ(89,"div",32),t.YNc(90,G2,2,3,"input",33),t._uU(91," \xa0 "),t.YNc(92,W2,2,3,"input",33),t._uU(93," \xa0 "),t.TgZ(94,"input",34),t.NdJ("click",function(){return o.generateContractForProject()}),t.ALo(95,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,22,o.modalTitle)),t.xp6(12),t.Oqu(t.lcZ(16,24,"Customer_Code")),t.xp6(6),t.Oqu(t.lcZ(22,26,"Project_Code")),t.xp6(6),t.Oqu(t.lcZ(28,28,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(34,30,"Project_End_Date")),t.xp6(6),t.Oqu(t.lcZ(40,32,"No_Of_Days")),t.xp6(7),t.hYB("placeholder","",t.lcZ(47,34,"Enter")," ",t.lcZ(48,36,"Contract_Term"),""),t.xp6(10),t.hij(" ",t.lcZ(57,38,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(60,40,"Liability_and_Insurances")," "),t.xp6(3),t.Q6J("ngIf",0!=o.liabilityInsuranceTerms.length),t.xp6(5),t.hYB("placeholder","",t.lcZ(68,42,"Enter")," ",t.lcZ(69,44,"Contract_Term"),""),t.xp6(10),t.hij(" ",t.lcZ(78,46,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(81,48,"Termination_Clause")," "),t.xp6(3),t.Q6J("ngIf",0!=o.terminationClauseTerms.length),t.xp6(3),t.Q6J("ngIf",o.autoPayment),t.xp6(1),t.Q6J("ngIf",!o.autoPayment),t.xp6(3),t.Q6J("ngIf",!o.autoPayment),t.xp6(2),t.Q6J("ngIf",o.autoPayment),t.xp6(2),t.s9C("value",t.lcZ(95,50,"Generate_Contract")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,Z.O5,Z.sg,j.hl,j.nW,ft.R9,j.Mq,l.wV],pipes:[f.X$],encapsulation:2}),i})();function X2(i,a){if(1&i&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"-",o.isArab?e.siteArbName:e.siteName,"")}}function K2(i,a){if(1&i&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function t6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"i",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw().removeElement(n)}),t.qZA(),t.qZA()}}function e6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t.YNc(8,t6,2,0,"span",35),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.shiftCode),t.xp6(2),t.Oqu(e.shiftName_EN),t.xp6(2),t.Oqu(e.shiftName_AR),t.xp6(2),t.Q6J("ngIf",0==e.shiftId||e.canDelete)}}const Oe=function(){return{standalone:!0}};let pe=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfShifts=[],this.sequence=1,this.editsequence=0,this.remarks="",this.shiftCode="",this.shiftName_EN="",this.shiftName_AR="",this.shiftId=0,this.siteCodeList=[],this.listOfShiftCodes=[],this.isArab=!1,this.isRoasterGenerated=!1}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getSelectShiftMasterListForProjectSite/${this.project.projectCode}/${this.project.siteCode}`).subscribe(e=>{this.listOfShiftCodes=e})}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.loadSiteCodes(this.project.customerCode),this.readonly="readonly"}setForm(){this.form=this.fb.group({shiftCode:[""],projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null!=this.project.siteCode?this.project.siteCode:"",l.kI.required],shiftId:[0]}),null!=this.project.siteCode&&(this.form.controls.siteCode.disable({onlySelf:!0}),this.onSelectSiteCode({target:{value:this.project.siteCode}})),this.setToDefault()}submit(){this.form.valid&&this.listOfShifts.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.shiftsList=this.listOfShifts,this.form.value.projectCode=this.project.projectCode,this.form.value.siteCode=this.project.siteCode,this.apiService.post("ShiftMaster/CreateUpdateShiftsPlanForProject",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}addShift(){if(""!=this.shiftCode){let e={sequence:this.getSequence(),shiftCode:this.shiftCode,shiftName_AR:this.shiftName_AR,shiftName_EN:this.shiftName_EN,shiftId:0};this.listOfShifts.find(o=>o.shiftCode==this.shiftCode)||this.listOfShifts.push(e)}this.setToDefault()}removeElement(e){this.listOfShifts.splice(e,1),this.downSequence()}setToDefault(){this.shiftCode="",this.shiftName_AR="",this.shiftName_EN="",this.shiftId=0}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.shiftName_AR.setValue(""),this.form.controls.shiftName_EN.setValue(""),this.form.controls.shiftCode.setValue(""),this.form.controls.shiftId.setValue(0)}getShiftDetails(e){this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e.target.value).subscribe(n=>{this.shiftName_AR=n.shiftName_AR,this.shiftName_EN=n.shiftName_EN})}onSelectSiteCode(e){let o=e.target.value;this.project.siteCode=o,this.form.value.siteCode=o,""!=o?(this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.project.projectCode}/${o}`).subscribe(n=>{this.listOfShifts=n,console.log(n),this.sequence=this.listOfShifts.length+1,this.apiService.getall(`MonthlyRoaster/isExistMonthlyRoasterForProjectSite/${this.project.projectCode}/${o}`).subscribe(s=>{this.isRoasterGenerated=s})}),this.loadShiftCodes()):(this.listOfShifts=[],this.listOfShiftCodes=[],this.isRoasterGenerated=!1)}loadSiteCodes(e){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.siteCodeList=o})}closeModel(){this.dialogRef.close()}GetFirstChar(e){return e.substring(0,1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-shiftplan-for-project"]],features:[t.qOj],decls:104,vars:84,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-center"],[1,"fas","fa-plus-circle",3,"click"],["colspan","10"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[4,"ngIf"],[1,"fas","fa-minus-circle",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"auto-loader",15),t._UZ(22,"input",16),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(26,"div",11),t.TgZ(27,"label",12),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",13),t.TgZ(31,"div",14),t._UZ(32,"auto-loader",15),t._UZ(33,"input",18),t.ALo(34,"translate"),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(37,"div",11),t.TgZ(38,"div",13),t.TgZ(39,"label",12),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(43,"option",20),t._uU(44),t.ALo(45,"translate"),t.ALo(46,"translate"),t.qZA(),t.YNc(47,X2,2,3,"option",21),t.qZA(),t._UZ(48,"validation-message",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",22),t.TgZ(50,"table",23),t.TgZ(51,"thead"),t.TgZ(52,"tr"),t.TgZ(53,"th"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"th"),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"th"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t._UZ(62,"th"),t.qZA(),t.qZA(),t.TgZ(63,"tbody"),t.TgZ(64,"tr"),t.TgZ(65,"td"),t.TgZ(66,"select",24),t.NdJ("ngModelChange",function(s){return o.shiftCode=s})("change",function(s){return o.getShiftDetails(s)}),t.TgZ(67,"option",20),t._uU(68),t.ALo(69,"translate"),t.ALo(70,"translate"),t.qZA(),t.YNc(71,K2,2,2,"option",21),t.qZA(),t.qZA(),t.TgZ(72,"td"),t.TgZ(73,"input",25),t.NdJ("ngModelChange",function(s){return o.shiftName_EN=s}),t.ALo(74,"translate"),t.qZA(),t.qZA(),t.TgZ(75,"td"),t.TgZ(76,"input",25),t.NdJ("ngModelChange",function(s){return o.shiftName_AR=s}),t.ALo(77,"translate"),t.qZA(),t.qZA(),t.TgZ(78,"td",26),t.TgZ(79,"i",27),t.NdJ("click",function(){return o.addShift()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(80,"tr"),t._UZ(81,"td",28),t.qZA(),t.TgZ(82,"thead"),t.TgZ(83,"tr"),t.TgZ(84,"th"),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"th"),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.TgZ(90,"th"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t._UZ(93,"th"),t.qZA(),t.qZA(),t.TgZ(94,"tbody"),t.YNc(95,e6,9,4,"tr",29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"div",30),t.TgZ(97,"div",8),t.TgZ(98,"div",31),t.TgZ(99,"input",32),t.NdJ("click",function(){return o.closeModel()}),t.ALo(100,"translate"),t.qZA(),t._uU(101," \xa0 "),t._UZ(102,"input",33),t.ALo(103,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,37,o.modalTitle)),t.xp6(14),t.Oqu(t.lcZ(18,39,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(23,41,"Please_Enter")," ",t.lcZ(24,43,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(29,45,"Project_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(34,47,"Please_Enter")," ",t.lcZ(35,49,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(4),t.Oqu(t.lcZ(41,51,"Site")),t.xp6(4),t.AsE("",t.lcZ(45,53,"Select")," ",t.lcZ(46,55,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(6),t.Oqu(t.lcZ(55,57,"Shift_Code")),t.xp6(3),t.Oqu(t.lcZ(58,59,"Shift_Name_English")),t.xp6(3),t.Oqu(t.lcZ(61,61,"Shift_Name_Arab")),t.xp6(6),t.Q6J("ngModel",o.shiftCode)("ngModelOptions",t.DdM(81,Oe)),t.xp6(2),t.AsE("",t.lcZ(69,63,"Select")," ",t.lcZ(70,65,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.listOfShiftCodes),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(74,67,"Shift_Name_English"),""),t.Q6J("ngModel",o.shiftName_EN)("ngModelOptions",t.DdM(82,Oe)),t.xp6(3),t.MGl("placeholder","  ",t.lcZ(77,69,"Shift_Name_Arab"),""),t.Q6J("ngModel",o.shiftName_AR)("ngModelOptions",t.DdM(83,Oe)),t.xp6(9),t.Oqu(t.lcZ(86,71,"Shift_Code")),t.xp6(3),t.Oqu(t.lcZ(89,73,"Shift_Name_English")),t.xp6(3),t.Oqu(t.lcZ(92,75,"Shift_Name_Arab")),t.xp6(4),t.Q6J("ngForOf",o.listOfShifts),t.xp6(4),t.s9C("value",t.lcZ(100,77,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(103,79,"Save")))},directives:[l._Y,l.JL,l.sg,At.z,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg,l.On,Z.O5],pipes:[f.X$],encapsulation:2}),i})();function o6(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"-",o.isArab?e.siteArbName:e.siteName,"")}}function i6(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArab?e.textTwo:e.text)}}function n6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"span",34),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeElement(s)}),t._UZ(7,"i",35),t.qZA(),t._uU(8,"\xa0 "),t.TgZ(9,"span",34),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().editElement(s)}),t._UZ(10,"i",36),t.qZA(),t._uU(11,"\xa0 "),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Oqu(o.isArab?e.nameInArabic:e.nameInEnglish),t.xp6(2),t.Oqu(e.quantity)}}const io=function(){return{standalone:!0}};let ue=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfSkillsets=[],this.sequence=1,this.editsequence=0,this.remarks="",this.skillSetCode="",this.nameInEnglish="",this.nameInArabic="",this.quantity=0,this.siteCodeList=[],this.listOfSkillsetCodes=[],this.isArab=!1}loadSkillsetCodes(){this.apiService.getall("Skillset/getSelectSkillsetList").subscribe(e=>{this.listOfSkillsetCodes=e})}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.loadSiteCodes(this.project.customerCode),this.readonly="readonly"}setForm(){this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null!=this.project.siteCode?this.project.siteCode:"",l.kI.required]}),null!=this.project.siteCode&&(this.form.controls.siteCode.disable({onlySelf:!0}),this.onSelectSiteCode({target:{value:this.project.siteCode}})),this.setToDefault()}submit(){this.form.valid&&this.listOfSkillsets.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.siteCode=this.project.siteCode,this.form.value.skillsetList=this.listOfSkillsets,this.apiService.post("Skillset/CreateUpdateSkillsetPlanForProject",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}addSkillset(){if(""!=this.skillSetCode&&0!=this.quantity){let e={sequence:this.getSequence(),skillSetCode:this.skillSetCode,nameInEnglish:this.nameInEnglish,nameInArabic:this.nameInArabic,quantity:this.quantity},o=this.listOfSkillsets.findIndex(n=>n.skillSetCode==this.skillSetCode);o>=0&&this.listOfSkillsets.splice(o,1),this.listOfSkillsets.push(e),this.setToDefault()}}editElement(e){this.skillSetCode=this.listOfSkillsets[e].skillSetCode,this.nameInEnglish=this.listOfSkillsets[e].nameInEnglish,this.nameInArabic=this.listOfSkillsets[e].nameInArabic,this.quantity=this.listOfSkillsets[e].quantity}removeElement(e){this.listOfSkillsets.splice(e,1),this.downSequence()}setToDefault(){this.skillSetCode="",this.quantity=0,this.nameInEnglish="",this.nameInArabic=""}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.nameInEnglish.setValue(""),this.form.controls.nameInArabic.setValue(""),this.form.controls.skillSetCode.setValue(""),this.form.controls.quantity.setValue("")}getSkillsetDetails(e){const o=e.target.value;let n=this.listOfSkillsets.findIndex(s=>s.skillSetCode==o);n>=0?(this.nameInArabic=this.listOfSkillsets[n].nameInArabic,this.nameInEnglish=this.listOfSkillsets[n].nameInEnglish,this.quantity=this.listOfSkillsets[n].quantity):this.apiService.getall("Skillset/getSkillsetBySkillsetCode/"+o).subscribe(s=>{this.nameInArabic=s.nameInArabic,this.nameInEnglish=s.nameInEnglish,this.quantity=0})}onSelectSiteCode(e){let o=e.target.value;this.form.value.siteCode=o,""!=o?(this.project.siteCode=o,this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${o}`).subscribe(n=>{this.listOfSkillsets=n,this.sequence=this.listOfSkillsets.length+1}),this.loadSkillsetCodes()):(this.listOfSkillsets=[],this.listOfSkillsetCodes=[]),this.setToDefault()}loadSiteCodes(e){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.siteCodeList=o})}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-skillset-plan-for-project"]],features:[t.qOj],decls:93,vars:70,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","number",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-center"],[1,"fas","fa-plus-circle",3,"click"],["colspan","10"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[3,"click"],[1,"fas","fa-minus-circle"],[1,"fas","fa-edit"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"input",15),t.ALo(22,"translate"),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"label",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",13),t.TgZ(30,"div",14),t._UZ(31,"input",17),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(35,"div",11),t.TgZ(36,"div",13),t.TgZ(37,"label",12),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"select",18),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(41,"option",19),t._uU(42),t.ALo(43,"translate"),t.ALo(44,"translate"),t.qZA(),t.YNc(45,o6,2,3,"option",20),t.qZA(),t._UZ(46,"validation-message",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",21),t.TgZ(48,"table",22),t.TgZ(49,"thead"),t.TgZ(50,"tr"),t.TgZ(51,"th"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"th"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"th"),t.qZA(),t.qZA(),t.TgZ(58,"tbody"),t.TgZ(59,"tr"),t.TgZ(60,"td"),t.TgZ(61,"select",23),t.NdJ("ngModelChange",function(s){return o.skillSetCode=s})("change",function(s){return o.getSkillsetDetails(s)}),t.TgZ(62,"option",19),t._uU(63),t.ALo(64,"translate"),t.ALo(65,"translate"),t.qZA(),t.YNc(66,i6,2,2,"option",20),t.qZA(),t.qZA(),t.TgZ(67,"td"),t.TgZ(68,"input",24),t.NdJ("ngModelChange",function(s){return o.quantity=s}),t.ALo(69,"translate"),t.qZA(),t.qZA(),t.TgZ(70,"td",25),t.TgZ(71,"i",26),t.NdJ("click",function(){return o.addSkillset()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(72,"tr"),t._UZ(73,"td",27),t.qZA(),t.TgZ(74,"thead"),t.TgZ(75,"tr"),t.TgZ(76,"th"),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"th"),t._uU(80),t.ALo(81,"translate"),t.qZA(),t._UZ(82,"th"),t.qZA(),t.qZA(),t.TgZ(83,"tbody"),t.YNc(84,n6,12,2,"tr",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"div",29),t.TgZ(86,"div",8),t.TgZ(87,"div",30),t.TgZ(88,"input",31),t.NdJ("click",function(){return o.closeModel()}),t.ALo(89,"translate"),t.qZA(),t._uU(90," \xa0 "),t._UZ(91,"input",32),t.ALo(92,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,30,o.modalTitle)),t.xp6(14),t.Oqu(t.lcZ(18,32,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(22,34,"Please_Enter")," ",t.lcZ(23,36,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(28,38,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(32,40,"Please_Enter")," ",t.lcZ(33,42,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(39,44,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(43,46,"Select")," ",t.lcZ(44,48,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(6),t.Oqu(t.lcZ(53,50,"SkillSet")),t.xp6(3),t.Oqu(t.lcZ(56,52,"Quantity")),t.xp6(6),t.Q6J("ngModel",o.skillSetCode)("ngModelOptions",t.DdM(68,io)),t.xp6(2),t.AsE("",t.lcZ(64,54,"Select")," ",t.lcZ(65,56,"SkillSet")," "),t.xp6(3),t.Q6J("ngForOf",o.listOfSkillsetCodes),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(69,58,"Quantity"),""),t.Q6J("ngModel",o.quantity)("ngModelOptions",t.DdM(69,io)),t.xp6(9),t.Oqu(t.lcZ(78,60,"Name")),t.xp6(3),t.Oqu(t.lcZ(81,62,"Quantity")),t.xp6(4),t.Q6J("ngForOf",o.listOfSkillsets),t.xp6(4),t.s9C("value",t.lcZ(89,64,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(92,66,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg,l.On,l.wV],pipes:[f.X$],encapsulation:2}),i})();function a6(i,a){if(1&i&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArab?e.siteArbName:e.siteName)}}function s6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"div",11),t.TgZ(2,"div",12),t.TgZ(3,"label",27),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"select",28),t.NdJ("change",function(n){return t.CHM(e),t.oxw().onSelectSiteCode(n)}),t.TgZ(7,"option",29),t._uU(8),t.ALo(9,"translate"),t.ALo(10,"translate"),t.qZA(),t.YNc(11,a6,2,2,"option",30),t.qZA(),t._UZ(12,"validation-message",31),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,5,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(9,7,"Select")," ",t.lcZ(10,9,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",e.siteCodeList),t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function r6(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(3);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.startDate," ")}}function l6(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(3);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.endDate," ")}}function c6(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(3);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.noOfDays," ")}}function p6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,r6,2,2,"td",34),t.YNc(2,l6,2,2,"td",34),t.YNc(3,c6,2,2,"td",34),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(2),t.hij(" ",e.skillSet," "),t.xp6(2),t.hij(" ",n.isArab?null==(s=n.getSkillSet(e.skillSet))?null:s.nameInArabic:null==(s=n.getSkillSet(e.skillSet))?null:s.nameInEnglish," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.totShifts," ")}}function u6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,p6,12,7,"tr",35),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.tableData)}}function d6(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(4);t.uIk("rowspan",e.skillsetsListForSite.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"Total"))}}function _6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,d6,3,4,"td",36),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.hij(" ",n.noOfDays,""),t.xp6(2),t.hij(" ",e.skillSet,""),t.xp6(2),t.hij(" ",n.isArab?null==(s=n.getSkillSet(e.skillSet))?null:s.nameInArabic:null==(s=n.getSkillSet(e.skillSet))?null:s.nameInEnglish,""),t.xp6(2),t.hij(" ",e.quantity,""),t.xp6(2),t.hij(" ",e.quantity*n.noOfDays,"")}}function m6(i,a){if(1&i&&(t.TgZ(0,"tfoot"),t.YNc(1,_6,12,6,"tr",35),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.footerData)}}function g6(i,a){if(1&i&&(t.TgZ(0,"table",33),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(25,u6,2,1,"ng-container",34),t.YNc(26,m6,2,1,"tfoot",34),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,10,"Month_Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(8,12,"Month_End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(11,14,"No_Of_Days")," "),t.xp6(3),t.hij(" ",t.lcZ(14,16,"SkillSet_Code")," "),t.xp6(3),t.AsE(" ",t.lcZ(17,18,"SkillSet")," ",t.lcZ(18,20,"Name")," "),t.xp6(4),t.hij(" ",t.lcZ(21,22,"Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(24,24,"Total_Shifts")," "),t.xp6(2),t.Q6J("ngIf",e.tableData.length>0),t.xp6(1),t.Q6J("ngIf",e.footerData.length>0&&e.skillsetsListForSite.length>0)}}function h6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1,""),t.xp6(2),t.hij(" ",null==e?null:e.skillSet,""),t.xp6(2),t.hij(" ",n.isArab?null==e?null:e.skillSetNameArb:null==e?null:e.skillSetNameEng,""),t.xp6(2),t.Oqu(null==e?null:e.empNumber),t.xp6(2),t.hij(" ",n.isArab?null==e?null:e.empNameAr:null==e?null:e.empName,"")}}function Z6(i,a){if(1&i&&(t.TgZ(0,"div",20),t.TgZ(1,"table",33),t.TgZ(2,"tr"),t.TgZ(3,"th",38),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",39),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",40),t._uU(10),t.ALo(11,"translate"),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",39),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.YNc(19,h6,11,5,"tr",35),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,7,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(8,9,"SkillSet")," "),t.xp6(3),t.AsE(" ",t.lcZ(11,11,"SkillSet")," ",t.lcZ(12,13,"Name")," "),t.xp6(4),t.hij(" ",t.lcZ(15,15,"Employee_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(18,17,"Name")," "),t.xp6(2),t.Q6J("ngForOf",e.empToResMapData)}}function f6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateRoasterForSite()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Generate_Roaster"))}let de=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u){super(c),this.translate=e,this.notifyService=o,this.dialog=n,this.utilService=s,this.apiService=r,this.authService=c,this.fb=p,this.dialogRef=u,this.noOfDays=0,this.shiftsForSite=[],this.siteCodeList=[],this.tableData=[],this.footerData=[],this.monthsDataList=[],this.skillsetsListForSite=[],this.monthlyRoasterForSite=[],this.monthlyRoasterForSiteMonth=[],this.isRoasterGenerated=!0,this.isMonthlyRoasterGenerated=[],this.empToResMapData=[],this.employeeList=[],this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.isLoading=!0,this.setForm();var e=0;this.interval=setInterval(()=>{1==++e?this.calculateDates():2==e?this.getSitesList():3==e?this.loadEmployees():4==e?this.loadTableData():5==e?this.loadFooterData():6==e&&this.getSkillsetsForSite(this.project.siteCode)},e>6?0:1e3)}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)?this.project.siteCode:"",l.kI.required],startDate:[this.project.startDate.toString().substring(0,10)],endDate:[this.project.endDate.toString().substring(0,10)],noOfDays:[this.noOfDays],dto:[this.monthlyRoasterForSite.slice()]}),null!=this.project.siteCode&&(this.form.controls.siteCode.disable({onlySelf:!0}),this.getSkillsetsForSite(this.project.siteCode))}closeModel(){this.dialogRef.close()}submit(){}calculateDates(){this.monthsDataList=[],this.isMonthlyRoasterGenerated=[];let e=new Date(this.project.startDate),o=new Date(this.project.endDate);this.noOfDays=(o.getTime()-e.getTime())/864e5+1;for(let n=e.getFullYear();n<=o.getFullYear();n++){let s=n==e.getFullYear()?e.getMonth():1,r=n==o.getFullYear()?o.getMonth():12;for(let c=s;c<=r;c++){let p=c==s&&n==e.getFullYear()?e.getDate():1,u=c==r&&n==o.getFullYear()?o.getDate():new Date(n,c+1,0).getDate(),d=(new Date(n,c,u).getTime()-new Date(n,c,p).getTime())/864e5+1,_={sd:p,ed:u,mStartDate:new Date(n,c,p).toDateString(),mEndDate:new Date(n,c,u).toDateString(),mNoOfDays:d,month:c+1,year:n};this.monthsDataList.push(_),this.isMonthlyRoasterGenerated.push(!0)}}}getSitesList(){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(e=>{this.siteCodeList=e})}getSkillsetsForSite(e){""!=e?this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${e}`).subscribe(o=>{this.skillsetsListForSite=o,console.log(o),this.getShiftsForSite(e)}):(this.shiftsForSite=[],this.skillsetsListForSite=[],this.loadTableData())}getShiftsForSite(e){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.project.projectCode}/${e}`).subscribe(o=>{this.shiftsForSite=o,this.loadEmpToResourceMap(e)})}onSelectSiteCode(e){this.getSkillsetsForSite(e.target.value)}loadTableData(){var e;this.tableData=[],this.footerData=[];for(let o=0;o<this.monthsDataList.length;o++){let n=this.monthsDataList[o];for(let s=0;s<this.skillsetsListForSite.length;s++){let r={sd:this.monthsDataList[o].sd,ed:this.monthsDataList[o].ed,startDate:this.monthsDataList[o].mStartDate,endDate:this.monthsDataList[o].mEndDate,noOfDays:this.monthsDataList[o].mNoOfDays,noOfShifts:null===(e=this.shiftsForSite)||void 0===e?void 0:e.length,skillSet:this.skillsetsListForSite[s].skillSetCode,quantity:this.skillsetsListForSite[s].quantity,totShifts:n.mNoOfDays*this.skillsetsListForSite[s].quantity};this.tableData.push(r)}}this.loadFooterData(),this.checkRoasterForSite()}loadFooterData(){for(let e=0;e<this.skillsetsListForSite.length;e++)this.footerData.push({skillSet:this.skillsetsListForSite[e].skillSetCode,quantity:this.skillsetsListForSite[e].quantity})}checkRoasterForSite(){this.apiService.getall(`MonthlyRoaster/isExistMonthlyRoasterForProjectSite/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.isRoasterGenerated=e})}checkMonthlyRoasterForSite(e){this.apiService.getall(`MonthlyRoaster/isExistMonthlyRoasterForProjectSiteMonth/${this.project.projectCode}/${this.form.controls.siteCode.value}/${this.monthsDataList[e].month}/${this.monthsDataList[e].year}`).subscribe(s=>{this.isMonthlyRoasterGenerated[e]=s})}generateRoasterForSite(){if(this.isLoading)this.notifyService.showInfo(this.translate.instant("Please_Wait"));else{this.isLoading=!0,this.monthlyRoasterForSite=[];for(let n=0;n<this.tableData.length;n++){let s=[],r=new Date(new Date(this.tableData[n].startDate).toISOString().slice(0,10)),c=new Date(new Date(this.tableData[n].endDate).toISOString().slice(0,10)),p=new Date(r.getFullYear(),r.getMonth(),r.getDate()+2).toISOString().slice(8,10),u=new Date(r.getFullYear(),c.getMonth(),c.getDate()+2).toISOString().slice(8,10);for(var e=1;e<=31;e++)e<parseInt(p)||e>parseInt(u)?s.push("x"):s.push("");for(let d=1;d<=this.tableData[n].quantity;d++){let _=new Date(this.tableData[n].startDate);_.setMinutes(_.getMinutes()-_.getTimezoneOffset());let h=new Date(this.tableData[n].endDate);h.setMinutes(h.getMinutes()-h.getTimezoneOffset());let A={id:0,customerCode:this.project.customerCode,siteCode:this.form.controls.siteCode.value,projectCode:this.project.projectCode,month:new Date(this.tableData[n].startDate).getMonth()+1,year:new Date(this.tableData[n].endDate).getFullYear(),skillsetName:this.skillsetsListForSite.find(C=>C.skillSetCode==this.tableData[n].skillSet).nameInEnglish,monthStartDate:_,monthEndDate:h,shiftCodesForMonth:s.slice(),employeeID:0,employeeNumber:"",mapId:0,skillsetCode:""};this.monthlyRoasterForSite.push(A)}}let o=0;for(let n=0;n<this.monthsDataList.length;n++)for(let s=0;s<this.empToResMapData.length;s++)this.monthlyRoasterForSite[o].employeeID=this.empToResMapData[s].employeeID,this.monthlyRoasterForSite[o].employeeNumber=this.empToResMapData[s].empNumber,this.monthlyRoasterForSite[o].mapId=this.empToResMapData[s].mapId,this.monthlyRoasterForSite[o].skillsetCode=this.empToResMapData[s].skillSet,o++;this.apiService.post("MonthlyRoaster/generateMonthlyRoastersForSite",this.monthlyRoasterForSite.slice()).subscribe(n=>{this.utilService.OkMessage(),this.checkRoasterForSite(),this.dialogRef.close(!0),this.isLoading=!1},n=>{console.log(n),console.error(n),this.utilService.ShowApiErrorMessage(n),this.isLoading=!1})}}getSkillSet(e){return this.skillsetsListForSite.find(o=>o.skillSetCode==e)}generateMonthlyRoasterForSite(e){if(this.isLoading)this.notifyService.showInfo(this.translate.instant("Please_Wait"));else{this.isLoading=!0,this.monthlyRoasterForSite=[];for(let s=e*this.skillsetsListForSite.length;s<(e+1)*this.skillsetsListForSite.length;s++){let r=[],c=new Date(new Date(this.tableData[s].startDate).toISOString().slice(0,10)),p=new Date(new Date(this.tableData[s].endDate).toISOString().slice(0,10)),u=new Date(c.getFullYear(),c.getMonth(),c.getDate()+2).toISOString().slice(8,10),d=new Date(c.getFullYear(),p.getMonth(),p.getDate()+2).toISOString().slice(8,10);for(var o=1;o<=31;o++)o<parseInt(u)||o>parseInt(d)?r.push("x"):r.push("");for(let _=1;_<=this.tableData[s].quantity;_++){let h={id:0,customerCode:this.project.customerCode,siteCode:this.form.controls.siteCode.value,projectCode:this.project.projectCode,month:new Date(this.tableData[s].startDate).getMonth()+1,year:new Date(this.tableData[s].endDate).getFullYear(),skillsetName:this.skillsetsListForSite.find(A=>A.skillSetCode==this.tableData[s].skillSet).nameInEnglish,monthStartDate:new Date(c.getFullYear(),c.getMonth(),c.getDate()+2),monthEndDate:new Date(c.getFullYear(),p.getMonth(),p.getDate()+2),shiftCodesForMonth:r.slice(),employeeID:0,employeeNumber:"",mapId:0,skillsetCode:""};this.monthlyRoasterForSite.push(h)}}let n=0;for(let s=0;s<this.empToResMapData.length;s++)this.monthlyRoasterForSite[n].employeeID=this.empToResMapData[s].employeeID,this.monthlyRoasterForSite[n].employeeNumber=this.empToResMapData[s].empNumber,this.monthlyRoasterForSite[n].mapId=this.empToResMapData[s].mapId,this.monthlyRoasterForSite[n].skillsetCode=this.empToResMapData[s].skillSet,n++;this.isLoading=!0,this.apiService.post("MonthlyRoaster/generateMonthlyRoastersForSite",this.monthlyRoasterForSite.slice()).subscribe(s=>{this.utilService.OkMessage(),this.checkRoasterForSite(),this.dialogRef.close(!0),this.isLoading=!1},s=>{console.log(s),console.error(s),this.utilService.ShowApiErrorMessage(s),this.isLoading=!1})}}getJvalue(e){return e%this.skillsetsListForSite.length}loadEmpToResourceMap(e){this.isLoading=!0,this.apiService.getall(`EmployeesToResorceMap/getEmployeesToResourcesMapForProjectSite/${this.project.projectCode}/${e}`).subscribe(o=>{this.empToResMapData=o,this.isLoading=!1;for(var n=0;n<this.empToResMapData.length;n++){let s=this.empToResMapData[n];s.empNumber=this.employeeList.find(r=>r.value==s.employeeNumber).value,s.empName=this.employeeList.find(r=>r.value==s.employeeNumber).text,s.empNameAr=this.employeeList.find(r=>r.value==s.employeeNumber).textAr,s.skillSetNameEng=this.skillsetsListForSite.find(r=>r.skillSetCode==s.skillSet).nameInEnglish,s.skillSetNameArb=this.skillsetsListForSite.find(r=>r.skillSetCode==s.skillSet).nameInArabic}0==this.empToResMapData.length?this.notifyService.showError(this.translate.instant("Employees_Not_Mapped")):this.loadTableData()})}loadEmployees(){this.isLoading=!0,this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.isLoading=!1,this.employeeList=e},e=>{this.utilService.ShowApiErrorMessage(e),this.isLoading=!1})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.sK),t.Y36(w.g),t.Y36(T.uw),t.Y36(b.t),t.Y36(q.s),t.Y36(v._),t.Y36(l.qu),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-calendar-days"]],features:[t.qOj],decls:56,vars:25,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","customerCode","readonly","",1,"form-control"],["type","text","formControlName","projectCode","readonly","",1,"form-control"],[1,"col-md-2","col-lg-2"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["type","text","formControlName","noOfDays","readonly","",1,"form-control",3,"value"],["class","row  mt-2",4,"ngIf"],[1,"table-responsive"],["id","zero_config1","class","table  table-bordered no-wrap",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value","click",4,"ngIf"],[3,"isLoading"],[1,"mr-sm-2"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],[3,"value"],["id","zero_config1",1,"table","table-bordered","no-wrap"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2","class","text-right",4,"ngIf"],["colspan","2",1,"text-right"],[2,"width","5%"],[2,"width","10%"],[2,"width","35%"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"div",12),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",13),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",14),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t.TgZ(28,"div",12),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"input",16),t.qZA(),t.qZA(),t.TgZ(33,"div",15),t.TgZ(34,"div",12),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",17),t.qZA(),t.qZA(),t.TgZ(39,"div",15),t.TgZ(40,"div",12),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",18),t.qZA(),t.qZA(),t.qZA(),t.YNc(45,s6,13,11,"div",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",20),t.YNc(47,g6,27,26,"table",21),t.qZA(),t.qZA(),t.YNc(48,Z6,20,19,"div",22),t.TgZ(49,"div",23),t.TgZ(50,"div",8),t.TgZ(51,"div",24),t.YNc(52,f6,2,3,"input",25),t.qZA(),t.qZA(),t.TgZ(53,"div",8),t.TgZ(54,"div",24),t._UZ(55,"spinner-loader",26),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,13,o.modalTitle)),t.xp6(15),t.Oqu(t.lcZ(19,15,"Customer_Code")),t.xp6(6),t.Oqu(t.lcZ(25,17,"Project_Code")),t.xp6(6),t.Oqu(t.lcZ(31,19,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(37,21,"Project_End_Date")),t.xp6(6),t.Oqu(t.lcZ(43,23,"No_Of_Days")),t.xp6(2),t.s9C("value",o.noOfDays),t.xp6(1),t.Q6J("ngIf",(null==o.siteCodeList?null:o.siteCodeList.length)>0),t.xp6(2),t.Q6J("ngIf",o.tableData.length>0&&o.skillsetsListForSite.length>0),t.xp6(1),t.Q6J("ngIf",o.empToResMapData.length>0&&o.tableData.length>0),t.xp6(4),t.Q6J("ngIf",!o.isRoasterGenerated&&0!=o.empToResMapData.length),t.xp6(3),t.Q6J("isLoading",o.isLoading))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,Z.O5,Zt.r,l.EJ,l.YN,l.Kr,Z.sg,V.s],pipes:[f.X$],encapsulation:2}),i})();function A6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",15),t._uU(2),t.qZA(),t.TgZ(3,"td",15),t._uU(4),t.qZA(),t.qZA()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.Oqu(n.contractTerm)}}function C6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,A6,5,2,"tr",21),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isLiabilityAndInsurance)}}function T6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,C6,2,1,"ng-container",22),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.liabilityInsuranceTerms)}}function v6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",15),t._uU(2),t.qZA(),t.TgZ(3,"td",15),t._uU(4),t.qZA(),t.qZA()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.Oqu(n.contractTerm)}}function x6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,v6,5,2,"tr",21),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isTerminationClause)}}function q6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,x6,2,1,"ng-container",22),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.terminationClauseTerms)}}function b6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",15),t._uU(2),t.qZA(),t.TgZ(3,"td",15),t._uU(4),t.qZA(),t.TgZ(5,"td",23),t._uU(6),t.qZA(),t.TgZ(7,"td",23),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw();t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",n.dateFormat(e.instDate)," "),t.xp6(2),t.hij(" ",e.particular," "),t.xp6(2),t.hij(" ",e.amount," ")}}let y6=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u){super(c),this.translate=e,this.notifyService=o,this.dialog=n,this.utilService=s,this.apiService=r,this.authService=c,this.fb=p,this.dialogRef=u,this.contractTermsList=[],this.paymentTermsList=[],this.liabilityInsuranceTerms=[],this.terminationClauseTerms=[],this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.getCustomerData(),this.loadProjectData()}setForm(){this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],branchCode:[this.project.branchCode],startDate:[this.project.startDate.toString().substring(0,10)],endDate:[this.project.endDate.toString().substring(0,10)]}),this.loadContractData()}getCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e?(this.customerData=e,this.getCity(e.custCityCode1),console.log(e)):(this.notifyService.showError(this.translate.instant("Error")),console.log("No Customer Found"))})}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o})}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}loadContractData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`ProjectContracts/getContractByProjectAndSiteCode/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{this.contractDto=o,this.contractTermsList=o.contractTerms.slice(),this.paymentTermsList=o.paymentTerms.slice(),this.liabilityInsuranceTerms=this.contractTermsList.filter(n=>n.isLiabilityAndInsurance),this.terminationClauseTerms=this.contractTermsList.filter(n=>n.isTerminationClause)}):this.apiService.getall(`ProjectContracts/getContractByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.contractDto=o,this.contractTermsList=o.contractTerms.slice(),this.paymentTermsList=o.paymentTerms.slice(),this.liabilityInsuranceTerms=this.contractTermsList.filter(n=>n.isLiabilityAndInsurance),this.terminationClauseTerms=this.contractTermsList.filter(n=>n.isTerminationClause)})}closeModel(){this.dialogRef.close()}submit(){}noOfdays(e){return(Date.parse(e.monthEndDate)-Date.parse(e.monthStartDate))/864e5+1}dateFormat(e){return e.slice(0,10)}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.sK),t.Y36(w.g),t.Y36(T.uw),t.Y36(b.t),t.Y36(q.s),t.Y36(v._),t.Y36(l.qu),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-project-contract"]],features:[t.qOj],decls:122,vars:66,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"padding-bottom","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[2,"text-align","left","width","60%"],[2,"font-size","1rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"text-align","right","vertical-align","middle"],["id","logo","src","assets/images/LOGOPRINT.png","title","Project_Estimation","alt","Terms_And_Conditions",2,"width","120px"],["colspan","3",2,"text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","text-align","left"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["colspan","3",2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","5%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"text-align","left","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printInvoice()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"div",4),t.TgZ(11,"table",5),t.TgZ(12,"tr"),t.TgZ(13,"td",6),t.TgZ(14,"h4",7),t._uU(15," International Ideal Development Gen. Cont. Est. "),t.qZA(),t.TgZ(16,"h4",8),t._uU(17," .\u0627\u0644\u0645\u0624\u0633\u0633\u0629 \u0627\u0644\u0639\u0627\u0644\u0645\u064a\u0629 \u0644\u0644\u062a\u0646\u0645\u064a\u0629 \u0627\u0644\u0645\u062b\u0627\u0644\u064a\u0629 \u0644\u0644\u0645\u0642\u0627\u0648\u0644\u0627\u062a \u0627\u0644\u0639\u0627\u0645\u0629 , "),t.qZA(),t.TgZ(18,"h4",7),t._uU(19," Al Khobar "),t.qZA(),t.TgZ(20,"h4",7),t._uU(21," Saudi Arabia "),t.qZA(),t.qZA(),t.TgZ(22,"td",9),t._UZ(23,"img",10),t.qZA(),t.qZA(),t.TgZ(24,"tr"),t.TgZ(25,"td",11),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",4),t.TgZ(29,"table",12),t.TgZ(30,"tr"),t.TgZ(31,"th",13),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"td",14),t._uU(35),t.qZA(),t.TgZ(36,"th",13),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"td",15),t._uU(40),t.qZA(),t.qZA(),t.TgZ(41,"tr"),t.TgZ(42,"th",16),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"td",17),t._uU(46),t.qZA(),t.qZA(),t.TgZ(47,"tr"),t.TgZ(48,"th",18),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"th",15),t._uU(52),t.qZA(),t.TgZ(53,"th",18),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"th",15),t._uU(57),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",4),t.TgZ(59,"table",12),t.TgZ(60,"tr"),t.TgZ(61,"th",13),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"td",14),t._uU(65),t.qZA(),t.TgZ(66,"th",13),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"td",15),t._uU(70),t.qZA(),t.qZA(),t.TgZ(71,"tr"),t.TgZ(72,"th",13),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"td",19),t._uU(76),t.qZA(),t.TgZ(77,"th",13),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"td",15),t._uU(81),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(82,"div",4),t.TgZ(83,"table",12),t.TgZ(84,"thead"),t.TgZ(85,"tr"),t.TgZ(86,"th",20),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"th",18),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(92,T6,2,1,"ng-container",21),t.qZA(),t.qZA(),t.TgZ(93,"div",4),t.TgZ(94,"table",12),t.TgZ(95,"thead"),t.TgZ(96,"tr"),t.TgZ(97,"th",20),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"th",18),t._uU(101),t.ALo(102,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(103,q6,2,1,"ng-container",21),t.qZA(),t.qZA(),t.TgZ(104,"div",4),t.TgZ(105,"table",12),t.TgZ(106,"thead"),t.TgZ(107,"tr"),t.TgZ(108,"th",20),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"th",13),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"th",18),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"th",13),t._uU(118),t.ALo(119,"translate"),t.qZA(),t.qZA(),t.qZA(),t.ynx(120),t.YNc(121,b6,9,4,"tr",22),t.BQk(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(26),t.Oqu(t.lcZ(27,30,"Terms_And_Conditions")),t.xp6(6),t.hij(" ",t.lcZ(33,32,"Customer_Code")," "),t.xp6(3),t.hij(" #",null==o.project?null:o.project.customerCode," "),t.xp6(2),t.hij(" ",t.lcZ(38,34,"Customer_Name")," "),t.xp6(3),t.hij(" ",o.isArab?null==o.customerData?null:o.customerData.custArbName:null==o.customerData?null:o.customerData.custName," "),t.xp6(3),t.hij(" ",t.lcZ(44,36,"Address")," "),t.xp6(3),t.hij(" #",null==o.customerData?null:o.customerData.custAddress1," "),t.xp6(3),t.hij(" ",t.lcZ(50,38,"City")," "),t.xp6(3),t.hij(" ",o.isArab?null==o.city?null:o.city.cityNameAr:null==o.city?null:o.city.cityName," "),t.xp6(2),t.hij(" ",t.lcZ(55,40,"Phone")," "),t.xp6(3),t.hij(" ",null==o.customerData?null:o.customerData.custPhone1," "),t.xp6(5),t.hij(" ",t.lcZ(63,42,"Project_Code")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.projectCode," "),t.xp6(2),t.hij(" ",t.lcZ(68,44,"Est_Starting_Date")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.startDate.substring(0,10)," "),t.xp6(3),t.hij(" ",t.lcZ(74,46,"Project_Details")," "),t.xp6(3),t.hij(" ",o.isArab?o.projectData.projectNameArb:null==o.projectData?null:o.projectData.projectNameEng," "),t.xp6(2),t.hij(" ",t.lcZ(79,48,"Est_Closing_Date")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.endDate.substring(0,10)," "),t.xp6(6),t.hij(" ",t.lcZ(88,50,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(91,52,"Liability_and_Insurances")," "),t.xp6(2),t.Q6J("ngIf",0!=o.liabilityInsuranceTerms.length),t.xp6(6),t.hij(" ",t.lcZ(99,54,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(102,56,"Termination_Clause")," "),t.xp6(2),t.Q6J("ngIf",0!=o.terminationClauseTerms.length),t.xp6(6),t.hij(" ",t.lcZ(110,58,"S.N")," "),t.xp6(3),t.hij(" ",t.lcZ(113,60,"Payment_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(116,62,"Perticular")," "),t.xp6(3),t.hij(" ",t.lcZ(119,64,"Amount")," "),t.xp6(3),t.Q6J("ngForOf",o.paymentTermsList))},directives:[Z.O5,Z.sg],pipes:[f.X$],encapsulation:2}),i})(),S6=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0}ngOnInit(){var e;this.setForm(),this.id=null===(e=this.inputData)||void 0===e?void 0:e.id,this.id>0&&this.setEditForm()}setEditForm(){this.apiService.get("proposalTemplates/getProposalTemplateById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:e.id}))})}setForm(){this.form=this.fb.group({titleOfService:["",l.kI.required],coveringLetter:["",l.kI.required],commercial:["",l.kI.required],notes:["",l.kI.required],issuingAuthority:["",l.kI.required],titleOfServiceArb:["",l.kI.required],coveringLetterArb:["",l.kI.required],commercialArb:["",l.kI.required],notesArb:["",l.kI.required],issuingAuthorityArb:["",l.kI.required]})}submit(){this.form.value.id=this.id,this.form.value.projectCode=this.inputData.projectCode,this.form.value.siteCode=this.inputData.siteCode,this.form.value.customerCode=this.inputData.customerCode,this.form.valid?this.apiService.post("proposalTemplates",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.notifyService.showError(this.translate.instant("Incomplete_Data"))}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-proposal-template"]],features:[t.qOj],decls:104,vars:100,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"outer"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","titleOfService",1,"form-control",3,"placeholder"],["type","text","formControlName","titleOfServiceArb",1,"form-control",3,"placeholder"],[1,"form-group",2,"padding-right","5px"],["name","text","cols","75","rows","5","formControlName","coveringLetter",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","coveringLetterArb",3,"placeholder"],[1,"form-group",2,"padding-left","5px","width","100%"],["name","text","cols","75","rows","5","formControlName","commercial",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","commercialArb",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","notes",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","notesArb",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","issuingAuthority",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","issuingAuthorityArb",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",8),t.ALo(15,"translate"),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.TgZ(17,"div",6),t.TgZ(18,"div",7),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",9),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.TgZ(25,"div",6),t.TgZ(26,"div",10),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"br"),t._UZ(31,"textarea",11),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.TgZ(34,"div",6),t.TgZ(35,"div",10),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"br"),t._UZ(40,"textarea",12),t.ALo(41,"translate"),t.ALo(42,"translate"),t.qZA(),t.qZA(),t.TgZ(43,"div",6),t.TgZ(44,"div",13),t.TgZ(45,"label"),t._uU(46),t.ALo(47,"translate"),t.qZA(),t._UZ(48,"br"),t._UZ(49,"textarea",14),t.ALo(50,"translate"),t.ALo(51,"translate"),t.qZA(),t.qZA(),t.TgZ(52,"div",6),t.TgZ(53,"div",10),t.TgZ(54,"label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"br"),t._UZ(58,"textarea",15),t.ALo(59,"translate"),t.ALo(60,"translate"),t.qZA(),t.qZA(),t.TgZ(61,"div",6),t.TgZ(62,"div",13),t.TgZ(63,"label"),t._uU(64),t.ALo(65,"translate"),t.qZA(),t._UZ(66,"br"),t._UZ(67,"textarea",16),t.ALo(68,"translate"),t.ALo(69,"translate"),t.qZA(),t.qZA(),t.TgZ(70,"div",6),t.TgZ(71,"div",10),t.TgZ(72,"label"),t._uU(73),t.ALo(74,"translate"),t.qZA(),t._UZ(75,"br"),t._UZ(76,"textarea",17),t.ALo(77,"translate"),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.TgZ(79,"div",6),t.TgZ(80,"div",13),t.TgZ(81,"label"),t._uU(82),t.ALo(83,"translate"),t.qZA(),t._UZ(84,"br"),t._UZ(85,"textarea",18),t.ALo(86,"translate"),t.ALo(87,"translate"),t.qZA(),t.qZA(),t.TgZ(88,"div",6),t.TgZ(89,"div",13),t.TgZ(90,"label"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t._UZ(93,"br"),t._UZ(94,"textarea",19),t.ALo(95,"translate"),t.ALo(96,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(97,"div",20),t.TgZ(98,"div",21),t.TgZ(99,"input",22),t.NdJ("click",function(){return o.closeModel()}),t.ALo(100,"translate"),t.qZA(),t._uU(101," \xa0 "),t._UZ(102,"input",23),t.ALo(103,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,34,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(7),t.Oqu(t.lcZ(13,36,"Title Of Service")),t.xp6(2),t.hYB("placeholder","",t.lcZ(15,38,"Please_Enter")," ",t.lcZ(16,40,"Title Of Service"),""),t.xp6(6),t.Oqu(t.lcZ(21,42,"Title_Of_Service")),t.xp6(2),t.hYB("placeholder","",t.lcZ(23,44,"Please_Enter")," ",t.lcZ(24,46,"Title_Of_Service"),""),t.xp6(6),t.hij("",t.lcZ(29,48,"Covering Letter")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(32,50,"Please_Enter")," ",t.lcZ(33,52,"Covering Letter"),""),t.xp6(6),t.hij("",t.lcZ(38,54,"Covering_Letter")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(41,56,"Please_Enter")," ",t.lcZ(42,58,"Covering Letter"),""),t.xp6(6),t.hij("",t.lcZ(47,60,"Commercial Terms")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(50,62,"Please_Enter")," ",t.lcZ(51,64,"Commercial Terms"),""),t.xp6(6),t.hij("",t.lcZ(56,66,"Commercial_Terms")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(59,68,"Please_Enter")," ",t.lcZ(60,70,"Commercial_Terms"),""),t.xp6(6),t.hij("",t.lcZ(65,72,"Notes")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(68,74,"Please_Enter")," ",t.lcZ(69,76,"Notes"),""),t.xp6(6),t.hij("",t.lcZ(74,78,"Notes")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(77,80,"Please_Enter")," ",t.lcZ(78,82,"Notes"),""),t.xp6(6),t.hij("",t.lcZ(83,84,"Issuing Authority")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(86,86,"Please_Enter")," ",t.lcZ(87,88,"Issuing_Authority"),""),t.xp6(6),t.hij("",t.lcZ(92,90,"Issuing_Authority")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(95,92,"Please_Enter")," ",t.lcZ(96,94,"Issuing_Authority"),""),t.xp6(5),t.s9C("value",t.lcZ(100,96,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(103,98,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],pipes:[f.X$],encapsulation:2}),i})();function w6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).index;return t.oxw().edit(n)}),t._UZ(1,"i",18),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function U6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).index;return t.oxw().delete(n)}),t._UZ(1,"i",19),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Delete"))}}function D6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",17),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).add_new()}),t._UZ(1,"i",20),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Add_New"))}}function L6(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",10),t._uU(8),t.qZA(),t.TgZ(9,"td",10),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.YNc(12,w6,3,1,"span",16),t.YNc(13,U6,3,1,"span",16),t.YNc(14,D6,3,1,"span",16),t.qZA(),t.BQk()),2&i){const e=t.oxw(),o=e.$implicit,n=e.index,s=t.oxw();t.xp6(2),t.hij(" ",o.qty," "),t.xp6(2),t.hij(" ",o.itemEng," "),t.xp6(2),t.hij(" ",o.itemArab," "),t.xp6(2),t.hij(" ",o.price," "),t.xp6(2),t.hij(" ",o.total," "),t.xp6(2),t.Q6J("ngIf",-1==s.editRowNumber),t.xp6(1),t.Q6J("ngIf",-1==s.editRowNumber),t.xp6(1),t.Q6J("ngIf",n==s.inputData.proposalCosting.length-1&&-1==s.editRowNumber)}}const be=function(){return{standalone:!0}};function N6(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"td"),t.TgZ(2,"input",21),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editRowItem.qty=n})("keyup",function(){return t.CHM(e),t.oxw(2).updateTotal()}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"input",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editRowItem.itemEng=n}),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"input",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editRowItem.itemArab=n}),t.qZA(),t.qZA(),t.TgZ(7,"td",10),t.TgZ(8,"input",21),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editRowItem.price=n})("keyup",function(){return t.CHM(e),t.oxw(2).updateTotal()}),t.qZA(),t.qZA(),t.TgZ(9,"td",10),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.TgZ(12,"span",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw().save(n)}),t._UZ(13,"i",23),t._uU(14,"\xa0"),t.qZA(),t.TgZ(15,"span",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw().delete(n)}),t._UZ(16,"i",19),t._uU(17,"\xa0"),t.qZA(),t.TgZ(18,"span",17),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cancelEdit()}),t._UZ(19,"i",24),t._uU(20,"\xa0"),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("ngModel",e.editRowItem.qty)("ngModelOptions",t.DdM(12,be)),t.xp6(2),t.Q6J("ngModel",e.editRowItem.itemEng)("ngModelOptions",t.DdM(13,be)),t.xp6(2),t.Q6J("ngModel",e.editRowItem.itemArab)("ngModelOptions",t.DdM(14,be)),t.xp6(2),t.Q6J("ngModel",e.editRowItem.price)("ngModelOptions",t.DdM(15,be)),t.xp6(2),t.hij(" ",e.editRowItem.total," "),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Save")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Delete")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Cancel"))}}function E6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,L6,15,8,"ng-container",15),t.YNc(2,N6,21,16,"ng-container",15),t.qZA()),2&i){const e=a.index,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.editRowNumber!=e),t.xp6(1),t.Q6J("ngIf",o.editRowNumber==e)}}function O6(i,a){1&i&&(t._UZ(0,"input",25),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let no=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.total=0,this.editRowNumber=-1,this.editRowItem={id:0,qty:0,itemEng:"",itemArab:"",price:0,total:0,projectBudgetEstimationId:0}}ngOnInit(){this.form=this.fb.group({}),0==this.inputData.proposalCosting.length&&(this.notifyService.showError(this.translate.instant("No_Costings_Found")),this.closeModel()),this.getTotal()}submit(){this.apiService.post("proposalCosting",this.inputData.proposalCosting).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}closeModel(){this.dialogRef.close()}edit(e){this.editRowNumber=e,this.editRowItem=this.inputData.proposalCosting[e]}delete(e){this.inputData.proposalCosting.length>1&&(this.inputData.proposalCosting.splice(e,1),this.editRowNumber=-1,this.getTotal())}translateToolTip(e){return this.translate.instant(e)}getTotal(){this.total=0,this.inputData.proposalCosting.forEach(e=>{e.total=e.price*e.qty,this.total+=e.total})}add_new(){let e={id:0,qty:0,itemEng:"",itemArab:"",price:0,total:0,projectBudgetEstimationId:this.inputData.proposalCosting[0].projectBudgetEstimationId};this.inputData.proposalCosting.push(e),this.editRowItem=e,this.editRowNumber=this.inputData.proposalCosting.length-1}save(e){this.editRowItem.qty>0&&""!=this.editRowItem.itemEng&&""!=this.editRowItem.itemArab&&this.editRowItem.price>=0&&(this.inputData.proposalCosting[e]=this.editRowItem,this.editRowNumber=-1,this.getTotal(),this.editRowItem={id:0,qty:0,itemEng:"",itemArab:"",price:0,total:0,projectBudgetEstimationId:this.inputData.proposalCosting[0].projectBudgetEstimationId})}cancelEdit(){console.log(this.inputData.proposalCosting),this.editRowNumber=-1}updateTotal(){this.editRowItem.total=this.editRowItem.price*this.editRowItem.qty}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-proposal-costings"]],features:[t.qOj],decls:40,vars:28,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"outer"],[1,"row"],["id","zero_config",1,"table","table-bordered","no-wrap"],["colspan","2",2,"text-align","center"],[4,"ngFor","ngForOf"],["colspan","4",2,"text-align","right"],[2,"text-align","right"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"fas","fa-plus"],["type","number",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","keyup"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"fas","fa-save"],[1,"fas","fa-window-close"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"form",2,3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(8,"div",4),t.TgZ(9,"div",5),t.TgZ(10,"table",6),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",7),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.YNc(27,E6,3,2,"tr",8),t.TgZ(28,"tr"),t.TgZ(29,"td",9),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"td",10),t._uU(33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",11),t.TgZ(35,"div",12),t.TgZ(36,"input",13),t.NdJ("click",function(){return o.closeModel()}),t.ALo(37,"translate"),t.qZA(),t._uU(38," \xa0 "),t.YNc(39,O6,2,3,"input",14),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,12,o.modalTitle)),t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(7),t.hij(" ",t.lcZ(14,14,"Qty")," "),t.xp6(3),t.hij(" ",t.lcZ(17,16,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(20,18,"Unit_Rate")," "),t.xp6(3),t.hij(" ",t.lcZ(23,20,"Total")," "),t.xp6(3),t.hij(" ",t.lcZ(26,22,"Action")," "),t.xp6(2),t.Q6J("ngForOf",o.inputData.proposalCosting),t.xp6(3),t.hij(" ",t.lcZ(31,24,"Total")," "),t.xp6(3),t.hij(" ",o.total," "),t.xp6(3),t.s9C("value",t.lcZ(37,26,"Cancel")),t.xp6(3),t.Q6J("ngIf",-1==o.editRowNumber))},directives:[l._Y,l.JL,l.sg,Z.sg,Z.O5,ut.gM,l.wV,l.Fj,l.JJ,l.On],pipes:[f.X$],encapsulation:2}),i})();function k6(i,a){if(1&i&&(t.TgZ(0,"option",7),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text,"")}}function j6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"select",4),t.NdJ("change",function(n){return t.CHM(e),t.oxw().OnTemplateSelection(n)}),t.TgZ(2,"option",5),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,k6,2,2,"option",6),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.AsE("",t.lcZ(4,3,"Select")," ",t.lcZ(5,5,"SelectTemplate")," "),t.xp6(3),t.Q6J("ngForOf",e.templatesSelectionList)}}function M6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().printInvoice()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Print")))}function R6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().editProposalTemplate()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Edit_Proposal_Template")))}function P6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().editProposalCosting()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Edit_Proposal_Costing")))}function F6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",32),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",34),t._uU(9),t.ALo(10,"number"),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",e.itemEng," "),t.xp6(2),t.hij(" ",t.xi3(7,4,e.price,"3.2-5")," "),t.xp6(3),t.hij(" ",t.xi3(10,7,e.total,"3.2-5")," ")}}function I6(i,a){if(1&i&&(t.TgZ(0,"div",9),t.TgZ(1,"div",10),t._UZ(2,"br"),t.TgZ(3,"table",11),t.TgZ(4,"tr"),t.TgZ(5,"td",12),t.TgZ(6,"h5",13),t.TgZ(7,"strong"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"td",14),t._UZ(10,"img",15),t.qZA(),t.TgZ(11,"td",12),t.TgZ(12,"h5",16),t.TgZ(13,"strong"),t._uU(14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"tr"),t.TgZ(16,"td"),t._UZ(17,"br"),t._UZ(18,"br"),t._UZ(19,"br"),t._UZ(20,"br"),t._UZ(21,"br"),t._UZ(22,"br"),t._UZ(23,"br"),t._UZ(24,"br"),t._UZ(25,"br"),t._UZ(26,"br"),t._UZ(27,"br"),t.qZA(),t.qZA(),t.TgZ(28,"tr"),t.TgZ(29,"td",17),t.TgZ(30,"h4"),t._uU(31),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"tr"),t.TgZ(33,"td",17),t.TgZ(34,"h4"),t._uU(35,"For"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"tr"),t.TgZ(37,"td",17),t.TgZ(38,"h4"),t._uU(39),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td"),t._UZ(42,"br"),t._UZ(43,"br"),t._UZ(44,"br"),t._UZ(45,"br"),t._UZ(46,"br"),t._UZ(47,"br"),t.qZA(),t.qZA(),t.TgZ(48,"tr"),t.TgZ(49,"td",17),t.TgZ(50,"h5"),t._uU(51,"By"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"tr"),t.TgZ(53,"td",17),t.TgZ(54,"h5"),t._uU(55),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"td",18),t.TgZ(58,"h5"),t._uU(59),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"div",19),t.TgZ(61,"table",20),t.TgZ(62,"tr"),t._UZ(63,"td"),t.qZA(),t.TgZ(64,"tr"),t.TgZ(65,"td",12),t.TgZ(66,"h5",13),t.TgZ(67,"strong"),t._uU(68),t.qZA(),t.qZA(),t.qZA(),t.TgZ(69,"td"),t._UZ(70,"img",15),t.qZA(),t.TgZ(71,"td",12),t.TgZ(72,"h5",16),t.TgZ(73,"strong"),t._uU(74),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(75,"br"),t._UZ(76,"br"),t._UZ(77,"br"),t._UZ(78,"br"),t._UZ(79,"br"),t._UZ(80,"br"),t._UZ(81,"br"),t._UZ(82,"br"),t._UZ(83,"br"),t._UZ(84,"br"),t.TgZ(85,"table",20),t.TgZ(86,"tr"),t.TgZ(87,"td"),t.TgZ(88,"h5",13),t.TgZ(89,"strong"),t._uU(90),t.qZA(),t.qZA(),t.qZA(),t.TgZ(91,"td"),t.TgZ(92,"h5",16),t.TgZ(93,"strong"),t._uU(94),t.ALo(95,"date"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"tr"),t.TgZ(97,"td",21),t.TgZ(98,"h5"),t._uU(99," Attention : "),t._uU(100),t.qZA(),t.qZA(),t.qZA(),t.TgZ(101,"tr"),t.TgZ(102,"td",21),t.TgZ(103,"h5"),t._uU(104," Email : "),t._uU(105),t.qZA(),t.qZA(),t.qZA(),t.TgZ(106,"tr"),t.TgZ(107,"td"),t._UZ(108,"br"),t._UZ(109,"br"),t._UZ(110,"br"),t._UZ(111,"br"),t.qZA(),t.qZA(),t.TgZ(112,"tr"),t.TgZ(113,"td",21),t.TgZ(114,"h5"),t._uU(115,"Respected Sir / Madam"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(116,"tr"),t.TgZ(117,"td"),t._UZ(118,"br"),t._UZ(119,"br"),t._UZ(120,"br"),t.qZA(),t.qZA(),t.TgZ(121,"tr"),t.TgZ(122,"td",22),t.TgZ(123,"h5"),t._uU(124),t.qZA(),t.qZA(),t.qZA(),t.TgZ(125,"tr"),t.TgZ(126,"td"),t._UZ(127,"br"),t._UZ(128,"br"),t._UZ(129,"br"),t.qZA(),t.qZA(),t.TgZ(130,"tr"),t.TgZ(131,"td",23),t.TgZ(132,"h5"),t._uU(133),t.qZA(),t.qZA(),t.qZA(),t.TgZ(134,"tr"),t.TgZ(135,"td"),t._UZ(136,"br"),t.qZA(),t.qZA(),t.TgZ(137,"tr"),t.TgZ(138,"td",24),t.TgZ(139,"h5"),t._uU(140," Your's Sincerely "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(141,"tr"),t.TgZ(142,"td"),t._UZ(143,"br"),t.qZA(),t.qZA(),t.TgZ(144,"tr"),t.TgZ(145,"td",25),t.TgZ(146,"h5"),t._uU(147),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(148,"div",26),t.TgZ(149,"table",20),t.TgZ(150,"tr"),t.TgZ(151,"td"),t._UZ(152,"br"),t._UZ(153,"br"),t._UZ(154,"br"),t._UZ(155,"br"),t._UZ(156,"br"),t._UZ(157,"br"),t.qZA(),t.qZA(),t.TgZ(158,"tr"),t.TgZ(159,"td",12),t.TgZ(160,"h5",13),t.TgZ(161,"strong"),t._uU(162),t.qZA(),t.qZA(),t.qZA(),t.TgZ(163,"td"),t._UZ(164,"img",15),t.qZA(),t.TgZ(165,"td",12),t.TgZ(166,"h5",16),t.TgZ(167,"strong"),t._uU(168),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(169,"table",20),t.TgZ(170,"tr"),t.TgZ(171,"td"),t.TgZ(172,"h5"),t._uU(173),t.qZA(),t.qZA(),t.qZA(),t.TgZ(174,"tr"),t.TgZ(175,"td"),t.TgZ(176,"p",27),t._uU(177),t.qZA(),t.qZA(),t.qZA(),t.TgZ(178,"tr"),t.TgZ(179,"td"),t._UZ(180,"br"),t.TgZ(181,"h5"),t._uU(182),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(183,28),t.TgZ(184,"table",20),t.TgZ(185,"tr"),t.TgZ(186,"th",29),t._uU(187),t.ALo(188,"translate"),t.qZA(),t.TgZ(189,"th",29),t._uU(190),t.ALo(191,"translate"),t.qZA(),t.TgZ(192,"th",29),t._uU(193),t.ALo(194,"translate"),t.qZA(),t.TgZ(195,"th",29),t._uU(196),t.ALo(197,"translate"),t.qZA(),t.qZA(),t.YNc(198,F6,11,10,"tr",30),t.qZA(),t.BQk(),t.TgZ(199,"table",20),t._UZ(200,"tr"),t.TgZ(201,"tr"),t.TgZ(202,"td"),t._UZ(203,"br"),t.qZA(),t.qZA(),t.TgZ(204,"tr"),t.TgZ(205,"td"),t.TgZ(206,"h5"),t._uU(207," NOTES: "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(208,"tr"),t.TgZ(209,"td",31),t._uU(210),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(8),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(17),t.hij("Provision Of Manned ",e.templateData.titleOfService," "),t.xp6(8),t.Oqu(e.customerData.custName),t.xp6(16),t.hij(" ",e.companyData.companyName," "),t.xp6(4),t.hij("",e.companyData.companyAddress," "),t.xp6(9),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(16),t.hij(" Reference Number: ",e.referenceNumber," "),t.xp6(4),t.hij(" Date:",t.xi3(95,29,e.date,"dd/MM/YYYY")," "),t.xp6(6),t.hij(" ",e.customerData.custContact1," "),t.xp6(5),t.hij(" ",e.customerData.custEmail1," "),t.xp6(19),t.hij(" Proposal to Provide Security Services to ",e.customerData.custName,""),t.xp6(9),t.hij(" ",e.templateData.coveringLetter," "),t.xp6(14),t.hij(" ",e.templateData.issuingAuthority," "),t.xp6(15),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(5),t.hij(" ",e.templateData.titleOfService," "),t.xp6(4),t.hij(" ",e.templateData.commercial," "),t.xp6(5),t.hij(" ",e.templateData.titleOfService,""),t.xp6(5),t.hij(" ",t.lcZ(188,32,"Qty")," "),t.xp6(3),t.hij(" ",t.lcZ(191,34,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(194,36,"Unit_Rate")," "),t.xp6(3),t.hij(" ",t.lcZ(197,38,"Total")," "),t.xp6(2),t.Q6J("ngForOf",e.proposalCosting),t.xp6(12),t.hij(" ",e.templateData.notes," ")}}function Y6(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,I6,211,40,"div",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=e.templatesSelectionList.length&&null!=e.templateData)}}function J6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",32),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",e.itemArab," "),t.xp6(2),t.hij(" ",e.price," "),t.xp6(2),t.hij(" ",e.total," ")}}function Q6(i,a){if(1&i&&(t.TgZ(0,"div",9),t.TgZ(1,"div",10),t._UZ(2,"br"),t.TgZ(3,"table",20),t.TgZ(4,"tr"),t.TgZ(5,"td",12),t.TgZ(6,"h5",13),t.TgZ(7,"strong"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"td",14),t._UZ(10,"img",15),t.qZA(),t.TgZ(11,"td",12),t.TgZ(12,"h5",16),t.TgZ(13,"strong"),t._uU(14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"tr"),t.TgZ(16,"td"),t._UZ(17,"br"),t._UZ(18,"br"),t._UZ(19,"br"),t._UZ(20,"br"),t._UZ(21,"br"),t._UZ(22,"br"),t._UZ(23,"br"),t._UZ(24,"br"),t._UZ(25,"br"),t._UZ(26,"br"),t._UZ(27,"br"),t.qZA(),t.qZA(),t.TgZ(28,"tr"),t.TgZ(29,"td",35),t.TgZ(30,"h4",14),t._uU(31),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"tr"),t.TgZ(33,"td",17),t.TgZ(34,"h4",14),t._uU(35,"\u0645\u0646 \u0623\u062c\u0644"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"tr"),t.TgZ(37,"td",17),t.TgZ(38,"h4",14),t._uU(39),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td"),t._UZ(42,"br"),t._UZ(43,"br"),t._UZ(44,"br"),t._UZ(45,"br"),t._UZ(46,"br"),t._UZ(47,"br"),t.qZA(),t.qZA(),t.TgZ(48,"tr"),t.TgZ(49,"td",17),t.TgZ(50,"h5"),t._uU(51," \u0628"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"tr"),t.TgZ(53,"td",17),t.TgZ(54,"h5"),t._uU(55),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"td",18),t.TgZ(58,"h5"),t._uU(59),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"div",19),t.TgZ(61,"table",20),t.TgZ(62,"tr"),t._UZ(63,"td"),t.qZA(),t.TgZ(64,"tr"),t.TgZ(65,"td",12),t.TgZ(66,"h5",13),t.TgZ(67,"strong"),t._uU(68),t.qZA(),t.qZA(),t.qZA(),t.TgZ(69,"td"),t._UZ(70,"img",15),t.qZA(),t.TgZ(71,"td",12),t.TgZ(72,"h5",16),t.TgZ(73,"strong"),t._uU(74),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(75,"br"),t._UZ(76,"br"),t._UZ(77,"br"),t._UZ(78,"br"),t._UZ(79,"br"),t._UZ(80,"br"),t._UZ(81,"br"),t._UZ(82,"br"),t._UZ(83,"br"),t._UZ(84,"br"),t.TgZ(85,"table",20),t.TgZ(86,"tr"),t.TgZ(87,"td"),t.TgZ(88,"h5",16),t.TgZ(89,"strong"),t._uU(90),t.ALo(91,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(92,"td"),t.TgZ(93,"h5",13),t.TgZ(94,"strong"),t._uU(95),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"tr"),t.TgZ(97,"td",36),t.TgZ(98,"h5"),t._uU(99),t.qZA(),t.qZA(),t.qZA(),t.TgZ(100,"tr"),t.TgZ(101,"td",36),t.TgZ(102,"h5"),t._uU(103),t.qZA(),t.qZA(),t.qZA(),t.TgZ(104,"tr"),t.TgZ(105,"td"),t._UZ(106,"br"),t._UZ(107,"br"),t._UZ(108,"br"),t._UZ(109,"br"),t.qZA(),t.qZA(),t.TgZ(110,"tr"),t.TgZ(111,"td",36),t.TgZ(112,"h5"),t._uU(113," \u0633\u064a\u062f\u064a \u0627\u0644\u0645\u062d\u062a\u0631\u0645 / \u0633\u064a\u062f\u062a\u064a"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(114,"tr"),t.TgZ(115,"td"),t._UZ(116,"br"),t._UZ(117,"br"),t._UZ(118,"br"),t.qZA(),t.qZA(),t.TgZ(119,"tr"),t.TgZ(120,"td",22),t.TgZ(121,"h5"),t._uU(122),t.qZA(),t.qZA(),t.qZA(),t.TgZ(123,"tr"),t.TgZ(124,"td"),t._UZ(125,"br"),t._UZ(126,"br"),t._UZ(127,"br"),t.qZA(),t.qZA(),t.TgZ(128,"tr"),t.TgZ(129,"td",23),t.TgZ(130,"h5"),t._uU(131),t.qZA(),t.qZA(),t.qZA(),t.TgZ(132,"tr"),t.TgZ(133,"td"),t._UZ(134,"br"),t.qZA(),t.qZA(),t.TgZ(135,"tr"),t.TgZ(136,"td",36),t.TgZ(137,"h5"),t._uU(138,"\u0645\u0639 \u062e\u0627\u0644\u0635 \u0627\u0644\u062a\u0642\u062f\u064a\u0631 \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(139,"tr"),t.TgZ(140,"td"),t._UZ(141,"br"),t.qZA(),t.qZA(),t.TgZ(142,"tr"),t.TgZ(143,"td",37),t.TgZ(144,"h5"),t._uU(145),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(146,"div",26),t.TgZ(147,"table",20),t.TgZ(148,"tr"),t.TgZ(149,"td"),t._UZ(150,"br"),t._UZ(151,"br"),t._UZ(152,"br"),t._UZ(153,"br"),t._UZ(154,"br"),t._UZ(155,"br"),t.qZA(),t.qZA(),t.TgZ(156,"tr"),t.TgZ(157,"td",12),t.TgZ(158,"h5",13),t.TgZ(159,"strong"),t._uU(160),t.qZA(),t.qZA(),t.qZA(),t.TgZ(161,"td"),t._UZ(162,"img",15),t.qZA(),t.TgZ(163,"td",12),t.TgZ(164,"h5",16),t.TgZ(165,"strong"),t._uU(166),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(167,"table",20),t.TgZ(168,"tr"),t.TgZ(169,"td"),t.TgZ(170,"h5"),t._uU(171),t.qZA(),t.qZA(),t.qZA(),t.TgZ(172,"tr"),t.TgZ(173,"td"),t.TgZ(174,"p",27),t._uU(175),t.qZA(),t.qZA(),t.qZA(),t.TgZ(176,"tr"),t.TgZ(177,"td"),t._UZ(178,"br"),t.TgZ(179,"h5"),t._uU(180),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(181,28),t.TgZ(182,"table",38),t.TgZ(183,"tr"),t.TgZ(184,"th",29),t._uU(185),t.ALo(186,"translate"),t.qZA(),t.TgZ(187,"th",29),t._uU(188),t.ALo(189,"translate"),t.qZA(),t.TgZ(190,"th",29),t._uU(191),t.ALo(192,"translate"),t.qZA(),t.TgZ(193,"th",29),t._uU(194),t.ALo(195,"translate"),t.qZA(),t.qZA(),t.YNc(196,J6,9,4,"tr",30),t.qZA(),t.BQk(),t.TgZ(197,"table",20),t._UZ(198,"tr"),t.TgZ(199,"tr"),t.TgZ(200,"td"),t._UZ(201,"br"),t.qZA(),t.qZA(),t.TgZ(202,"tr"),t.TgZ(203,"td",16),t.TgZ(204,"h5"),t._uU(205,": \u062a\u0644\u0627\u062d\u0638"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(206,"tr"),t.TgZ(207,"td",31),t._uU(208),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(8),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(17),t.hij(" ",e.templateData.titleOfService," \u062a\u0648\u0641\u064a\u0631 \u0627\u0644\u0645\u0623\u0647\u0648\u0644\u0629 "),t.xp6(8),t.Oqu(e.customerData.custName),t.xp6(16),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(4),t.hij("",e.companyData.companyAddressAr," "),t.xp6(9),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(16),t.hij("",t.xi3(91,29,e.date,"dd/MM/YYYY"),":\u062a\u0627\u0631\u064a\u062e "),t.xp6(5),t.hij(" ",e.referenceNumber,": \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639\u064a "),t.xp6(4),t.hij(" ",e.customerData.custContact1," : \u0627\u0644\u0634\u062e\u0635 \u0627\u0644\u0630\u064a \u064a\u0645\u0643\u0646 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0647 "),t.xp6(4),t.hij(" ",e.customerData.custEmail1,": \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a "),t.xp6(19),t.hij(" ",e.customerData.custName," \u0645\u0642\u062a\u0631\u062d \u062a\u0642\u062f\u064a\u0645 \u062e\u062f\u0645\u0627\u062a \u0623\u0645\u0646\u064a\u0629 \u0644"),t.xp6(9),t.hij(" ",e.templateData.coveringLetter," "),t.xp6(14),t.hij(" ",e.templateData.issuingAuthority," "),t.xp6(15),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(5),t.hij(" ",e.templateData.titleOfServiceAr," "),t.xp6(4),t.hij(" ",e.templateData.commercialAr," "),t.xp6(5),t.hij(" ",e.templateData.titleOfServiceAr,""),t.xp6(5),t.hij(" ",t.lcZ(186,32,"Qty")," "),t.xp6(3),t.hij(" ",t.lcZ(189,34,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(192,36,"Unit_Rate")," "),t.xp6(3),t.hij(" ",t.lcZ(195,38,"Total")," "),t.xp6(2),t.Q6J("ngForOf",e.proposalCosting),t.xp6(12),t.hij(" ",e.templateData.notesArb," ")}}function B6(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Q6,209,40,"div",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=e.templatesSelectionList.length&&null!=e.templateData)}}let _e=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h){super(c),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.dialog=r,this.authService=c,this.utilService=p,this.translate=u,this.notifyService=d,this.validationService=_,this.dialogRef=h,this.referenceNumber="000/0000",this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.templatesSelectionList=[],this.isArabic=!1,this.date=new Date}ngOnInit(){this.loadData()}loadData(){this.templateData=null,this.isArabic=this.utilService.isArabic(),this.loadProjectData(),this.loadCustomerData(),this.loadSkillSetsList(),this.loadOperationsExpenseHeads(),this.loadMaterialEquipments(),this.loadLogisticsVehicles(),this.loadProposalCostingData(),this.loadProposalTemplates()}loadProposalTemplates(){this.apiService.post("ProposalTemplates/getSelectionProposalTemplates",{projectCode:this.project.projectCode,siteCode:this.project.siteCode,customerCode:this.project.customerCode}).subscribe(o=>{null!=o&&(this.templatesSelectionList=o)})}OnTemplateSelection(e){if(""!=e.target.value){let o=Number(e.target.value);this.apiService.get("proposalTemplates/getProposalTemplateById",o).subscribe(n=>{null!=n&&(n.coveringLetter=n.coveringLetter.replace(/<<customer>>/gi,this.customerData.custName),this.templateData=n,console.log(this.templateData.coveringLetter))})}}submit(){}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}loadCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e&&(this.customerData=e,this.apiService.getall(`Company/getCompanyByCityCode/${e.custCityCode1}`).subscribe(o=>{null!=o&&(this.companyData=o)}),this.getCity(e.custCityCode1))})}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)})}loadProposalCostingData(){var e,o;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)||(this.project.siteCode=null);let n={customerCode:this.project.customerCode,siteCode:this.project.siteCode,projectCode:this.project.projectCode,isAdendum:null===(o=this.project)||void 0===o?void 0:o.isAdendum};this.apiService.post("proposalCosting/getProposalCosting",n).subscribe(s=>{this.proposalCosting=s,console.log(s),this.getReferenceNumber()})}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o})}printComponent(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=o.margin,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=o.margin,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit*o.qty),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite})}openDialogManage(e,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,S6);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.inputData=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.loadData()})}openDialogManage2(e,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,no);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.inputData=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.loadData()})}loadSkillSetsList(){this.apiService.getall("Skillset/getAllSkillsetList").subscribe(e=>{this.skillsetList=e})}getSkillset(e){return this.skillsetList.find(n=>n.skillSetCode==e)}loadOperationsExpenseHeads(){this.apiService.getall("OperationExpenseHead/getSelectOperationExpenseHeadList").subscribe(e=>{this.opeartionsExpenseHeadsList=e})}getopeartionsExpenseHead(e){return this.opeartionsExpenseHeadsList.find(n=>n.value==e)}loadMaterialEquipments(){this.apiService.getall("Materialequipment/getSelectMaterialequipmentList").subscribe(e=>{this.materialEquipmentList=e})}getMaterialEquipments(e){return this.materialEquipmentList.find(n=>n.value==e)}loadLogisticsVehicles(){this.apiService.getall("Logisticsandvehicle/getSelectLogisticsandvehicleList").subscribe(e=>{this.logisticsVehicleList=e})}getLogisticsVehicle(e){return this.logisticsVehicleList.find(n=>n.value==e)}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}closeModel(){this.dialogRef.close(!0)}createProposalTemplate(){this.openDialogManage({projectCode:this.project.projectCode,customerCode:this.project.customerCode,siteCode:null==this.project.siteCode?"":this.project.siteCode,id:0},g.Oi.create,"Create_New_Proposal_Template","Add")}editProposalCosting(){this.openDialogManage2({projectCode:this.project.projectCode,customerCode:this.project.customerCode,siteCode:null==this.project.siteCode?"":this.project.siteCode,proposalCosting:this.proposalCosting},g.Oi.create,"Edit_Proposal_Costing","Edit")}editProposalTemplate(){this.openDialogManage({projectCode:this.project.projectCode,customerCode:this.project.customerCode,siteCode:this.project.siteCode,id:this.templateData.id},g.Oi.create,"Update_Proposal_Template","Update")}getReferenceNumber(){this.proposalCosting.length>0&&(this.referenceNumber=this.project.customerCode+"/"+this.proposalCosting[0].projectBudgetEstimationId.toString(),0==this.proposalCosting[0].id&&this.editProposalCosting())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(T.uw),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-print-proposal"]],features:[t.qOj],decls:21,vars:9,consts:[[4,"ngIf"],[3,"click"],[3,"click",4,"ngIf"],["type","button","aria-hidden","true",1,"",3,"click"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","container-fluid invoice-container print-container","style"," width:850px; padding-top:5px;","id","printcontainer",4,"ngIf"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],["id","ProposalPage1",2,"page-break-after","always"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","35%"],[2,"text-align","left"],[2,"text-align","center"],[1,"float-center",2,"width","200px","height","150px",3,"src"],[2,"text-align","right"],["colspan","3",2,"text-align","center"],["colspan","3",2,"text-align","center","white-space","pre-wrap"],["id","ProposalPage2",2,"page-break-after","always"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],["colspan","2",2,"text-align","Left"],["colspan","2",2,"text-align","center"],["colspan","2",2,"text-align","justify"],["colspan","2",2,"text-align","left"],["colspan","2",2,"text-align","Left","white-space","pre-wrap"],["id","ProposalPage3",1,"p-3",2,"page-break-after","always"],[2,"text-align","justify"],[2,"padding-bottom","5px","padding-top","5px"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngFor","ngForOf"],[2,"text-align","justify","white-space","pre-line"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","1px solid #878787","padding","5px","text-align","left","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","1px solid #878787","padding","5px","text-align","right","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["colspan","3"],["colspan","2",2,"text-align","right"],["colspan","2",2,"text-align","right","white-space","pre-wrap"],["border","0","cellpadding","0","cellspacing","0","width","100%",1,"arabicright",2,"width","100%"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,j6,7,7,"span",0),t._uU(2,"\xa0 "),t._UZ(3,"br"),t.TgZ(4,"button",1),t.NdJ("click",function(){return o.createProposalTemplate()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._uU(7," \xa0 "),t.YNc(8,M6,3,3,"button",2),t._uU(9," \xa0 "),t.YNc(10,R6,3,3,"button",2),t._uU(11," \xa0 "),t.YNc(12,P6,3,3,"button",2),t._uU(13," \xa0 "),t.TgZ(14,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(15," Close"),t.qZA(),t.qZA(),t._UZ(16,"br"),t._UZ(17,"br"),t._UZ(18,"br"),t.YNc(19,Y6,2,1,"div",0),t.YNc(20,B6,2,1,"div",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",0!=o.templatesSelectionList.length),t.xp6(4),t.Oqu(t.lcZ(6,7,"Create_Template")),t.xp6(3),t.Q6J("ngIf",o.templatesSelectionList.length>0&&null!=o.templateData),t.xp6(2),t.Q6J("ngIf",o.templatesSelectionList.length>0&&null!=o.templateData),t.xp6(2),t.Q6J("ngIf",o.templatesSelectionList.length>0&&null!=o.templateData),t.xp6(7),t.Q6J("ngIf",!o.isArabic),t.xp6(1),t.Q6J("ngIf",o.isArabic))},directives:[Z.O5,l.YN,l.Kr,Z.sg],pipes:[f.X$,Z.uU,Z.JJ],encapsulation:2}),i})();function H6(i,a){if(1&i&&(t.TgZ(0,"div",15),t.TgZ(1,"table",16),t.TgZ(2,"tr"),t.TgZ(3,"th",17),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",40),t._uU(7),t.qZA(),t.TgZ(8,"th",17),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",18),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"tr"),t.TgZ(14,"th",18),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th",41),t._uU(18),t.qZA(),t.qZA(),t.TgZ(19,"tr"),t.TgZ(20,"th",18),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th",18),t._uU(24),t.qZA(),t.TgZ(25,"th",18),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"th",18),t._uU(29),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,10,"Customer_Code")," "),t.xp6(3),t.hij(" #",e.project.customerCode," "),t.xp6(2),t.hij(" ",t.lcZ(10,12,"Customer_Name")," "),t.xp6(3),t.hij(" ",e.isArab?e.customerData.custArbName:e.customerData.custName," "),t.xp6(3),t.hij(" ",t.lcZ(16,14,"Address")," "),t.xp6(3),t.hij(" #",e.customerData.custAddress1," "),t.xp6(3),t.hij(" ",t.lcZ(22,16,"City")," "),t.xp6(3),t.hij(" ",e.isArab?null==e.city?null:e.city.cityNameAr:null==e.city?null:e.city.cityName," "),t.xp6(2),t.hij(" ",t.lcZ(27,18,"Phone")," "),t.xp6(3),t.hij(" ",e.customerData.custPhone1," ")}}function $6(i,a){if(1&i&&(t.TgZ(0,"div",15),t.TgZ(1,"table",42),t.TgZ(2,"tr"),t.TgZ(3,"th",17),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",40),t._uU(7),t.qZA(),t.TgZ(8,"th",17),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",18),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"tr"),t.TgZ(14,"th",17),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th",17),t._uU(18),t.qZA(),t.TgZ(19,"th",17),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",18),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,8,"Project_Code")," "),t.xp6(3),t.hij(" ",null==e.projectData?null:e.projectData.projectCode," "),t.xp6(2),t.hij(" ",t.lcZ(10,10,"Est_Starting_Date")," "),t.xp6(3),t.hij(" ",null==e.projectData?null:e.projectData.startDate.substring(0,10)," "),t.xp6(3),t.hij(" ",t.lcZ(16,12,"Project_Details")," "),t.xp6(3),t.hij(" ",e.isArab?e.projectData.projectNameArb:null==e.projectData?null:e.projectData.projectNameEng," "),t.xp6(2),t.hij(" ",t.lcZ(21,14,"Est_Closing_Date")," "),t.xp6(3),t.hij(" ",null==e.projectData?null:e.projectData.endDate.substring(0,10)," ")}}function V6(i,a){1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",43),t._uU(3,"-Nil-"),t.qZA(),t.qZA(),t.BQk())}function G6(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.skillsetCode)}}function W6(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);let n;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(o.isArab?null==(n=o.getSkillset(e.skillsetCode))?null:n.nameInArabic:null==(n=o.getSkillset(e.skillsetCode))?null:n.nameInEnglish)}}function z6(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(t.xi3(2,2,e.costPerUnit,"3.2-5"))}}function X6(i,a){if(1&i&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.quantity)}}function K6(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(t.xi3(2,2,e.totResourceCost,"3.2-5"))}}function t0(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,G6,2,2,"td",46),t.YNc(2,W6,2,2,"td",46),t.TgZ(3,"td",47),t._uU(4),t.qZA(),t.TgZ(5,"td",48),t._uU(6),t.ALo(7,"number"),t.qZA(),t.YNc(8,z6,3,5,"td",49),t.YNc(9,X6,2,2,"td",50),t.YNc(10,K6,3,5,"td",49),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(t.xi3(7,7,e.amount,"3.2-5")),t.xp6(2),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function e0(i,a){if(1&i&&(t.ynx(0),t.YNc(1,t0,11,10,"tr",25),t.TgZ(2,"tr"),t.TgZ(3,"td",44),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"td",45),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.resourceSubCostingList),t.xp6(3),t.Oqu(t.lcZ(5,3,"Margin")),t.xp6(3),t.Oqu(t.xi3(8,5,e.margin,"3.2-5"))}}function o0(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",52),t._uU(2,"-Nil-"),t.qZA(),t.qZA())}function i0(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(e.vehicleNumber)}}function n0(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(o.isArab?o.getLogisticsVehicle(e.vehicleNumber).textTwo:o.getLogisticsVehicle(e.vehicleNumber).text)}}function a0(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(t.xi3(2,2,e.costPerUnit,"3.2-5"))}}function s0(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(t.xi3(2,2,e.totLogisticsCost,"3.2-5"))}}function r0(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,i0,2,2,"td",46),t.YNc(2,n0,2,2,"td",46),t.TgZ(3,"td",47),t._uU(4),t.qZA(),t.TgZ(5,"td",48),t._uU(6),t.ALo(7,"number"),t.qZA(),t.YNc(8,a0,3,5,"td",49),t.YNc(9,s0,3,5,"td",49),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(t.xi3(7,6,e.amount,"3.2-5")),t.xp6(2),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function l0(i,a){if(1&i&&(t.ynx(0),t.YNc(1,r0,10,9,"tr",25),t.TgZ(2,"tr"),t.TgZ(3,"td",47),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"td",47),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.logisticsSubCostingList),t.xp6(3),t.hij("",t.lcZ(5,3,"Margin")," "),t.xp6(3),t.Oqu(t.xi3(8,5,e.margin,"3.2-5"))}}function c0(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",43),t._uU(2,"-Nil-"),t.qZA(),t.qZA())}function p0(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.materialEquipmentCode)}}function u0(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);let n;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(o.isArab?null==(n=o.getMaterialEquipments(e.materialEquipmentCode))?null:n.textTwo:null==(n=o.getMaterialEquipments(e.materialEquipmentCode))?null:n.text)}}function d0(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(t.xi3(2,2,e.costPerUnit,"3.2-5"))}}function _0(i,a){if(1&i&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.quantity)}}function m0(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(t.xi3(2,2,e.totMaterialEquipmentCost,"3.2-5"))}}function g0(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,p0,2,2,"td",46),t.YNc(2,u0,2,2,"td",46),t.TgZ(3,"td",47),t._uU(4),t.qZA(),t.TgZ(5,"td",48),t._uU(6),t.ALo(7,"number"),t.qZA(),t.YNc(8,d0,3,5,"td",49),t.YNc(9,_0,2,2,"td",50),t.YNc(10,m0,3,5,"td",49),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(t.xi3(7,7,e.amount,"3.2-5")),t.xp6(2),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function h0(i,a){if(1&i&&(t.ynx(0),t.YNc(1,g0,11,10,"tr",25),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.materialEquipmentSubCostingList)}}function Z0(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",53),t._uU(2,"-Nil-"),t.qZA(),t.qZA())}function f0(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",47),t._uU(3),t.qZA(),t.TgZ(4,"td",47),t._uU(5),t.qZA(),t.TgZ(6,"td",48),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit,o=t.oxw(2);let n;t.xp6(3),t.Oqu(e.financialExpenseCode),t.xp6(2),t.Oqu(o.isArab?null==(n=o.getopeartionsExpenseHead(e.financialExpenseCode))?null:n.textTwo:null==(n=o.getopeartionsExpenseHead(e.financialExpenseCode))?null:n.text),t.xp6(2),t.Oqu(t.xi3(8,3,e.costPerUnit,"3.2-5"))}}function A0(i,a){if(1&i&&(t.ynx(0,12),t.YNc(1,H6,30,20,"div",13),t.YNc(2,$6,24,16,"div",14),t.TgZ(3,"div",15),t.TgZ(4,"table",16),t.TgZ(5,"tr"),t.TgZ(6,"th",17),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",18),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"th",18),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",18),t._uU(16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"table",4),t.TgZ(18,"tr"),t.TgZ(19,"td",19),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",15),t.TgZ(23,"table",4),t.TgZ(24,"tr"),t.TgZ(25,"th",20),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"th",21),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"th",22),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"th",23),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"th",20),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.YNc(40,V6,4,0,"ng-container",24),t.YNc(41,e0,9,8,"ng-container",25),t.TgZ(42,"tfoot"),t.TgZ(43,"tr"),t.TgZ(44,"th",26),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th",27),t._uU(48),t.ALo(49,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"table",4),t.TgZ(51,"tr"),t.TgZ(52,"td",19),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",15),t.TgZ(56,"table",4),t.TgZ(57,"tr"),t.TgZ(58,"th",20),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"th",28),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"th",29),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"th",30),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.qZA(),t.YNc(70,o0,3,0,"tr",24),t.YNc(71,l0,9,8,"ng-container",25),t.TgZ(72,"tfoot"),t.TgZ(73,"tr"),t.TgZ(74,"th",31),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th",27),t._uU(78),t.ALo(79,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(80,"table",4),t.TgZ(81,"tr"),t.TgZ(82,"td",19),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"div",15),t.TgZ(86,"table",4),t.TgZ(87,"tr"),t.TgZ(88,"th",32),t._uU(89),t.ALo(90,"translate"),t.qZA(),t.TgZ(91,"th",28),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.TgZ(94,"th",22),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"th",33),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"th",32),t._uU(101),t.ALo(102,"translate"),t.qZA(),t.qZA(),t.YNc(103,c0,3,0,"tr",24),t.YNc(104,h0,2,1,"ng-container",25),t.TgZ(105,"tfoot"),t.TgZ(106,"tr"),t.TgZ(107,"th",26),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.TgZ(110,"th",34),t._uU(111),t.ALo(112,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(113,"table",4),t.TgZ(114,"tr"),t.TgZ(115,"td",19),t._uU(116),t.ALo(117,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(118,"div",15),t.TgZ(119,"table",4),t.TgZ(120,"tr"),t.TgZ(121,"th",21),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"th",21),t._uU(125),t.ALo(126,"translate"),t.qZA(),t.TgZ(127,"th",21),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.qZA(),t.YNc(130,Z0,3,0,"tr",24),t.YNc(131,f0,9,6,"ng-container",25),t.TgZ(132,"tfoot"),t.TgZ(133,"tr"),t.TgZ(134,"th",35),t._uU(135),t.ALo(136,"translate"),t.qZA(),t.TgZ(137,"th",36),t._uU(138),t.ALo(139,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(140,"div",37),t.TgZ(141,"table",4),t.TgZ(142,"tr"),t.TgZ(143,"td",38),t._uU(144),t.ALo(145,"translate"),t.qZA(),t.TgZ(146,"td",39),t._uU(147),t.ALo(148,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(149,"br"),t.BQk()),2&i){const e=a.$implicit,o=a.index,n=t.oxw();t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(5),t.hij(" ",t.lcZ(8,45,"Site_Code")," "),t.xp6(3),t.hij(" ",e.siteData.siteCode," "),t.xp6(3),t.hij(" ",t.lcZ(14,47,"Site_Details")," "),t.xp6(3),t.hij(" ",n.isArab?n.isArab?e.siteData.siteAddress:e.siteData.siteArbName:e.siteData.siteName," "),t.xp6(4),t.hij(" ",t.lcZ(21,49,"Resource_Costing")," "),t.xp6(6),t.Oqu(t.lcZ(27,51,"SkillSet_Code")),t.xp6(3),t.Oqu(t.lcZ(30,53,"Name")),t.xp6(3),t.Oqu(t.lcZ(33,55,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(36,57,"Qty")),t.xp6(3),t.Oqu(t.lcZ(39,59,"Total")),t.xp6(2),t.Q6J("ngIf",0==e.prcListForSite.length),t.xp6(1),t.Q6J("ngForOf",e.prcListForSite),t.xp6(4),t.hij("",t.lcZ(46,61,"Total")," "),t.xp6(3),t.hij(" ",t.xi3(49,63,e.totRcForSite,"3.2-5"),""),t.xp6(5),t.hij(" ",t.lcZ(54,66,"Vehicle_Costing")," "),t.xp6(6),t.Oqu(t.lcZ(60,68,"Vehicle_Number")),t.xp6(3),t.Oqu(t.lcZ(63,70,"Vehicle_Name")),t.xp6(3),t.Oqu(t.lcZ(66,72,"Amount_For_Vehicle")),t.xp6(3),t.Oqu(t.lcZ(69,74,"Total")),t.xp6(2),t.Q6J("ngIf",0==e.plcListForSite.length),t.xp6(1),t.Q6J("ngForOf",e.plcListForSite),t.xp6(4),t.hij("",t.lcZ(76,76,"Total")," "),t.xp6(3),t.hij(" ",t.xi3(79,78,e.totLcForSite,"3.2-5"),""),t.xp6(5),t.hij(" ",t.lcZ(84,81,"Material_Costing")," "),t.xp6(6),t.Oqu(t.lcZ(90,83,"Material_Equipment_Code")),t.xp6(3),t.Oqu(t.lcZ(93,85,"Material_Equipment_Name")),t.xp6(3),t.Oqu(t.lcZ(96,87,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(99,89,"Qty")),t.xp6(3),t.Oqu(t.lcZ(102,91,"Total")),t.xp6(2),t.Q6J("ngIf",0==e.pmcListForSite.length),t.xp6(1),t.Q6J("ngForOf",e.pmcListForSite),t.xp6(4),t.hij("",t.lcZ(109,93,"Total")," "),t.xp6(3),t.hij(" ",t.xi3(112,95,e.totMcForSite,"3.2-5"),""),t.xp6(5),t.hij(" ",t.lcZ(117,98,"Financial_Costing")," "),t.xp6(6),t.Oqu(t.lcZ(123,100,"Code")),t.xp6(3),t.Oqu(t.lcZ(126,102,"Name")),t.xp6(3),t.Oqu(t.lcZ(129,104,"Amount")),t.xp6(2),t.Q6J("ngIf",0==e.pfcListForSite.length),t.xp6(1),t.Q6J("ngForOf",e.pfcListForSite),t.xp6(4),t.hij("",t.lcZ(136,106,"Total")," "),t.xp6(3),t.hij(" ",t.xi3(139,108,e.totFcForSite,"3.2-5"),""),t.xp6(6),t.hij(" ",t.lcZ(145,111,"Total_Costof_the_site"),": "),t.xp6(3),t.hij(" ",t.xi3(148,113,e.grandTotalCostForSite,"3.2-5")," ")}}function C0(i,a){if(1&i&&(t.TgZ(0,"div",54),t.TgZ(1,"table",4),t.TgZ(2,"tr"),t.TgZ(3,"td",38),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"td",39),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,2,"Total_Cost_Of_The_Project"),": "),t.xp6(3),t.hij(" ",t.xi3(8,4,null==e.projectBudgetEstimation?null:e.projectBudgetEstimation.grandTotalCostForProject,"3.2-5")," ")}}let me=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.loadProjectData(),this.loadCustomerData(),this.loadSkillSetsList(),this.loadOperationsExpenseHeads(),this.loadMaterialEquipments(),this.loadLogisticsVehicles(),this.loadInitialData()}submit(){}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}loadCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e&&(this.customerData=e,this.getCity(e.custCityCode1))})}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)})}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o})}printComponent(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=o.margin,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=o.margin,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit*o.qty),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite})}loadSkillSetsList(){this.apiService.getall("Skillset/getAllSkillsetList").subscribe(e=>{this.skillsetList=e})}getSkillset(e){return this.skillsetList.find(n=>n.skillSetCode==e)}loadOperationsExpenseHeads(){this.apiService.getall("OperationExpenseHead/getSelectOperationExpenseHeadList").subscribe(e=>{this.opeartionsExpenseHeadsList=e})}getopeartionsExpenseHead(e){return this.opeartionsExpenseHeadsList.find(n=>n.value==e)}loadMaterialEquipments(){this.apiService.getall("Materialequipment/getSelectMaterialequipmentList").subscribe(e=>{this.materialEquipmentList=e})}getMaterialEquipments(e){return this.materialEquipmentList.find(n=>n.value==e)}loadLogisticsVehicles(){this.apiService.getall("Logisticsandvehicle/getSelectLogisticsandvehicleList").subscribe(e=>{this.logisticsVehicleList=e})}getLogisticsVehicle(e){return this.logisticsVehicleList.find(n=>n.value==e)}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-print-estimation"]],features:[t.qOj],decls:25,vars:2,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[2,"text-align","left","width","60%"],[2,"font-size","1rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"text-align","right","vertical-align","middle"],["id","logo","src","assets/images/LOGOPRINT.png","title","Project_Estimation","alt","Project_Estimation_Report",2,"width","120px"],["style","padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],["style","padding-top: 5px; padding-bottom:5px",4,"ngIf"],[2,"padding-bottom","5px","padding-top","5px"],["style","padding-bottom:5px",4,"ngIf"],["style","padding-bottom:5px;",4,"ngIf"],[2,"padding-bottom","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"background-color","lightgray","width","100%","text-align","left"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"font-size","1.5rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","15px","text-align","center"],[2,"width","15%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"width","30%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","7%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"text-right",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[1,"text-right",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","40%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"width","25%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","20%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","5",1,"text-right",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","10%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","5%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[1,"text-right",2,"border","2px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","2",2,"border","2px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"padding-top","5px"],[2,"text-align","right","vertical-align","top","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","20%","text-align","right","vertical-align","top","border","2px solid #878787","border-left","0","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"background-color","lightgrey","width","100%","text-align","left"],["colspan","7",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[1,"text-left",2,"border","2px solid #878787","padding","5px","text-align","left","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[1,"text-right",2,"border","2px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["style"," border:2px solid #878787;padding:5px;text-align: left;font-size:0.675rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight: 500;",4,"ngIf"],[2,"border","2px solid #878787","padding","5px","text-align","left","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","2px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["style"," border:2px solid #878787;padding:5px;text-align: right;font-size:0.675rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight: 500;","class","text-right",4,"ngIf"],["style"," border:2px solid #878787;padding:5px;text-align: center;font-size:0.675rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight: 500;",4,"ngIf"],[2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["colspan","6",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["colspan","3",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"padding-top","5px","padding-bottom","5px"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printInvoice()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"table",4),t.TgZ(11,"tr"),t.TgZ(12,"td",5),t.TgZ(13,"h4",6),t._uU(14," International Ideal Development Gen. Cont. Est. "),t.qZA(),t.TgZ(15,"h4",7),t._uU(16," .\u0627\u0644\u0645\u0624\u0633\u0633\u0629 \u0627\u0644\u0639\u0627\u0644\u0645\u064a\u0629 \u0644\u0644\u062a\u0646\u0645\u064a\u0629 \u0627\u0644\u0645\u062b\u0627\u0644\u064a\u0629 \u0644\u0644\u0645\u0642\u0627\u0648\u0644\u0627\u062a \u0627\u0644\u0639\u0627\u0645\u0629 , "),t.qZA(),t.TgZ(17,"h4",6),t._uU(18," Al Khobar "),t.qZA(),t.TgZ(19,"h4",6),t._uU(20," Saudi Arabia "),t.qZA(),t.qZA(),t.TgZ(21,"td",8),t._UZ(22,"img",9),t.qZA(),t.qZA(),t.qZA(),t.YNc(23,A0,150,116,"ng-container",10),t.YNc(24,C0,9,7,"div",11),t.qZA()),2&e&&(t.xp6(23),t.Q6J("ngForOf",null==o.projectBudgetEstimation?null:o.projectBudgetEstimation.siteWisePBCListForProject),t.xp6(1),t.Q6J("ngIf",!(null!=o.project&&o.project.isAdendum)))},directives:[Z.sg,Z.O5],pipes:[f.X$,Z.JJ],encapsulation:2}),i})();function T0(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"(",o.isArab?e.siteArbName:e.siteName,")")}}function v0(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.startDate," ")}}function x0(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.endDate," ")}}function q0(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.noOfDays," ")}}function b0(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,v0,2,2,"td",26),t.YNc(2,x0,2,2,"td",26),t.YNc(3,q0,2,2,"td",26),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(2),t.hij(" ",n.isArab?e.skillSetNameArb:e.skillSetNameEng," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.totShifts," ")}}function y0(i,a){if(1&i&&(t.ynx(0),t.YNc(1,b0,10,6,"tr",32),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.tableData)}}function S0(i,a){if(1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(3);t.uIk("rowspan",e.skillsetsListForSite.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"Total"))}}function w0(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,S0,3,4,"th",33),t.TgZ(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.hij(" ",n.noOfDays,""),t.xp6(2),t.hij(" ",n.isArab?e.skillSetNameArb:e.skillSetNameEng," "),t.xp6(2),t.hij(" ",e.quantity,""),t.xp6(2),t.hij(" ",e.quantity*n.noOfDays,"")}}function U0(i,a){if(1&i&&(t.TgZ(0,"tfoot"),t.YNc(1,w0,10,5,"tr",32),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.footerData)}}function D0(i,a){1&i&&(t.TgZ(0,"th",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Code")," "))}function L0(i,a){if(1&i&&(t.TgZ(0,"td",62),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNumber)}}function N0(i,a){1&i&&(t.TgZ(0,"th",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Name")," "))}function E0(i,a){if(1&i&&(t.TgZ(0,"td",62),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Oqu(o.isArab?e.employeeName_AR:e.employeeName)}}function O0(i,a){1&i&&(t.TgZ(0,"th",63),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function k0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw(2).addEmployee(n)}),t._UZ(1,"i",66),t.qZA()}}function j0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw(2).removeEmployee(n)}),t._UZ(1,"i",67),t.qZA()}}function M0(i,a){if(1&i&&(t.TgZ(0,"td",62),t.YNc(1,k0,2,0,"a",64),t.YNc(2,j0,2,0,"a",64),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!o.isSelected(e)),t.xp6(1),t.Q6J("ngIf",o.isSelected(e))}}function R0(i,a){1&i&&t._UZ(0,"tr",68)}function P0(i,a){1&i&&t._UZ(0,"tr",69)}function F0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"a",65),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).removeEmployee(s)}),t._UZ(7,"i",67),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);let n;t.xp6(2),t.hij(" ",e.employeeNumber," "),t.xp6(2),t.hij(" ",o.isArab?null==(n=o.getEmployeeData(e.employeeNumber))?null:n.textAr:null==(n=o.getEmployeeData(e.employeeNumber))?null:n.text," ")}}const I0=function(){return{standalone:!0}};function Y0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",35),t.TgZ(2,"div",36),t.TgZ(3,"div",6),t.TgZ(4,"div",37),t.TgZ(5,"div",38),t.TgZ(6,"div",36),t.TgZ(7,"div",39),t.TgZ(8,"h4",40),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"div",41),t.TgZ(12,"div",42),t.TgZ(13,"div",43),t.TgZ(14,"input",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().searchValue=n})("keyup",function(){t.CHM(e);const n=t.oxw();return n.applyFilter(n.searchValue)})("keydown",function(){t.CHM(e);const n=t.oxw();return n.applyFilter(n.searchValue)}),t.qZA(),t.qZA(),t.TgZ(15,"div",45),t.TgZ(16,"div",46),t.ynx(17),t.TgZ(18,"table",47),t.NdJ("matSortChange",function(n){return t.CHM(e),t.oxw().onSortOrder(n)}),t.ynx(19,48),t.YNc(20,D0,3,3,"th",49),t.YNc(21,L0,2,1,"td",50),t.BQk(),t.ynx(22,51),t.YNc(23,N0,3,3,"th",49),t.YNc(24,E0,2,1,"td",50),t.BQk(),t.ynx(25,52),t.YNc(26,O0,3,3,"th",53),t.YNc(27,M0,3,2,"td",50),t.BQk(),t.YNc(28,R0,1,0,"tr",54),t.YNc(29,P0,1,0,"tr",55),t.qZA(),t.ynx(30,56),t.TgZ(31,"mat-paginator",57),t.NdJ("page",function(n){return t.CHM(e),t.oxw().onPageSwitch(n)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.TgZ(32,"div",58),t.TgZ(33,"div",59),t.TgZ(34,"table",42),t.TgZ(35,"tr"),t.TgZ(36,"th"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"th"),t.qZA(),t.YNc(43,F0,8,2,"tr",32),t.TgZ(44,"tr"),t.TgZ(45,"th",60),t._uU(46),t.ALo(47,"translate"),t._UZ(48,"br"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"th"),t._uU(52),t._UZ(53,"br"),t._uU(54),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(9),t.hij("",t.lcZ(10,17,"Employee_List")," "),t.xp6(5),t.Q6J("ngModel",e.searchValue)("ngModelOptions",t.DdM(27,I0)),t.xp6(4),t.Q6J("dataSource",e.data),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("length",e.totalItemsCount)("pageSize",e.pageService.pageCount)("pageSizeOptions",e.pageService.selectItemsPerPage),t.xp6(6),t.hij(" ",t.lcZ(38,19,"Employee_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(41,21,"Employee_Name")," "),t.xp6(3),t.Q6J("ngForOf",e.selectedEmployeesList),t.xp6(3),t.hij(" ",t.lcZ(47,23,"Total_Employees")," :"),t.xp6(3),t.hij(" ",t.lcZ(50,25,"Selected_Employees")," : "),t.xp6(3),t.hij(" ",e.employeesList.length,""),t.xp6(2),t.hij(" ",e.selectedEmployeesList.length," ")}}function J0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",70),t.NdJ("click",function(){return t.CHM(e),t.oxw().assignEmployees()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"SAVE"))}let ge=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.dialogRef=h,this.displayedColumns=["employeeNumber","employeeName","Actions"],this.searchValue="",this.sortingOrder="employeeID desc",this.isLoading=!1,this.employeesList=[],this.selectedEmployeesList=[],this.skillsetsListForSite=[],this.shiftsForSite=[],this.siteCodeList=[],this.tableData=[],this.footerData=[],this.monthsDataList=[],this.monthlyRoasterForSite=[],this.isRoasterGenerated=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.initialLoading(),this.calculateDates(),this.setForm(),this.getSitesList()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){var e;this.loadList(0,this.pageService.pageCount,"",this.sortingOrder),this.loadEmployees(),null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)&&(this.getSkillsetsForSite(this.project.siteCode),this.getEmployeesOfProjectSite(this.project.siteCode))}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){console.log(e),this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Employee/getEmployeesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,setTimeout(()=>this.data.sort=this.sort,2e3),this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.employeesList=e},e=>this.utilService.ShowApiErrorMessage(e))}addEmployee(e){this.selectedEmployeesList.findIndex(o=>o.employeeID==e.employeeID)<0&&(e.id=0,this.selectedEmployeesList.push(e))}removeEmployee(e){let o=this.selectedEmployeesList.findIndex(n=>n.employeeID==e.employeeID);this.selectedEmployeesList.splice(o,1)}isSelected(e){return this.selectedEmployeesList.findIndex(o=>o.employeeNumber==e.employeeNumber)>=0}setForm(){var e,o;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)?this.project.siteCode:"",l.kI.required],startDate:[this.project.startDate.toString().substring(0,10)],endDate:[this.project.endDate.toString().substring(0,10)],noOfDays:[this.noOfDays]}),null!=(null===(o=this.project)||void 0===o?void 0:o.siteCode)&&this.form.controls.siteCode.disable({onlySelf:!0})}closeModel(){this.dialogRef.close()}submit(){}calculateDates(){this.monthsDataList=[];let e=new Date(this.project.startDate),o=new Date(this.project.endDate);this.noOfDays=(o.getTime()-e.getTime())/864e5+1;for(let n=e.getFullYear();n<=o.getFullYear();n++){let s=n==e.getFullYear()?e.getMonth():1,r=n==o.getFullYear()?o.getMonth():12;for(let c=s;c<=r;c++){let p=c==s&&n==e.getFullYear()?e.getDate():1,u=c==r&&n==o.getFullYear()?o.getDate():new Date(n,c+1,0).getDate(),d=(new Date(n,c,u).getTime()-new Date(n,c,p).getTime())/864e5+1,_={sd:p,ed:u,mStartDate:new Date(n,c,p).toDateString(),mEndDate:new Date(n,c,u).toDateString(),mNoOfDays:d};this.monthsDataList.push(_)}}}getSitesList(){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(e=>{this.siteCodeList=e})}getSkillsetsForSite(e){""!=e?this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${e}`).subscribe(o=>{this.skillsetsListForSite=o,this.getShiftsForSite(e)}):(this.shiftsForSite=[],this.skillsetsListForSite=[],this.loadTableData())}getShiftsForSite(e){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.project.projectCode}/${e}`).subscribe(o=>{this.shiftsForSite=o,console.log(o),this.loadTableData()})}onSelectSiteCode(e){this.getSkillsetsForSite(e.target.value),this.getEmployeesOfProjectSite(e.target.value)}loadTableData(){var e,o,n,s,r,c,p,u;this.tableData=[],this.footerData=[];for(let d=0;d<this.monthsDataList.length;d++){let _=this.monthsDataList[d];for(let h=0;h<this.skillsetsListForSite.length;h++){let A={sd:null===(e=this.monthsDataList[d])||void 0===e?void 0:e.sd,ed:null===(o=this.monthsDataList[d])||void 0===o?void 0:o.ed,startDate:null===(n=this.monthsDataList[d])||void 0===n?void 0:n.mStartDate,endDate:null===(s=this.monthsDataList[d])||void 0===s?void 0:s.mEndDate,noOfDays:this.monthsDataList[d].mNoOfDays,noOfShifts:this.shiftsForSite.length,skillSet:null===(r=this.skillsetsListForSite[h])||void 0===r?void 0:r.skillSetCode,skillSetNameEng:null===(c=this.skillsetsListForSite[h])||void 0===c?void 0:c.nameInEnglish,skillSetNameArb:null===(p=this.skillsetsListForSite[h])||void 0===p?void 0:p.nameInArabic,quantity:this.skillsetsListForSite[h].quantity,totShifts:_.mNoOfDays*(null===(u=this.skillsetsListForSite[h])||void 0===u?void 0:u.quantity)};this.tableData.push(A)}}this.loadFooterData(),this.checkRoasterForSite()}loadFooterData(){var e,o,n,s;for(let r=0;r<this.skillsetsListForSite.length;r++){let c={skillSet:null===(e=this.skillsetsListForSite[r])||void 0===e?void 0:e.skillSetCode,skillSetNameEng:null===(o=this.skillsetsListForSite[r])||void 0===o?void 0:o.nameInEnglish,skillSetNameArb:null===(n=this.skillsetsListForSite[r])||void 0===n?void 0:n.nameInArabic,quantity:null===(s=this.skillsetsListForSite[r])||void 0===s?void 0:s.quantity};this.footerData.push(c)}}checkRoasterForSite(){this.apiService.getall(`MonthlyRoaster/isExistMonthlyRoasterForProjectSite/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.isRoasterGenerated=e})}getJvalue(e){return e%this.skillsetsListForSite.length}assignEmployees(){let e=[];this.selectedEmployeesList.forEach(o=>{e.push({id:o.id,employeeNumber:o.employeeNumber,employeeID:o.employeeID,employeeName:o.employeeName,employeeNameAr:o.employeeName_AR,projectCode:this.project.projectCode,siteCode:this.form.controls.siteCode.value})}),0!=this.selectedEmployeesList.length&&this.apiService.post("EmployeesToProjectSite/assignEmployeesToProjectSite",e).subscribe(o=>{this.utilService.OkMessage(),this.checkRoasterForSite(),this.dialogRef.close(!0)},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o)})}getEmployeesOfProjectSite(e){""!=e?this.apiService.getall(`EmployeesToProjectSite/getEmployeesOfProjectSite/${this.project.projectCode}/${e}`).subscribe(o=>{this.selectedEmployeesList=o,this.getShiftsForSite(e)}):(this.shiftsForSite=[],this.skillsetsListForSite=[],this.loadTableData())}getEmployeeData(e){return this.employeesList.find(o=>o.value==e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-assign-employees-to-project-site"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:90,vars:55,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","customerCode","readonly","",1,"form-control"],["type","text","formControlName","projectCode","readonly","",1,"form-control"],[1,"col-md-2","col-lg-2"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["type","text","formControlName","noOfDays","readonly","",1,"form-control"],[1,"mr-sm-2"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],[1,"table-responsive"],["id","zero_config1",1,"table","table-bordered","no-wrap"],[4,"ngIf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value","click",4,"ngIf"],[3,"value"],[4,"ngFor","ngForOf"],["colspan","2","class","text-right",4,"ngIf"],["colspan","2",1,"text-right"],[1,"container-fluid"],[1,"row"],[1,"card"],[1,"card-body"],[1,"col-md-6","col-lg-6"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"table","table-bordered","no-wrap"],[1,"input-group","mb-3",2,"width","25%","padding-top","5px","padding-left","5px"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"input-group","mb-3",2,"width","100%"],[1,"input-group","mb-3",2,"width","50%","padding-right","5px","height","fit-content"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",2,"height","fit-content",3,"dataSource","matSortChange"],["matColumnDef","employeeNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"height","fit-content"],[3,"length","pageSize","pageSizeOptions","page"],[1,"input-group","mb-3",2,"width","50%","padding-right","5px"],[2,"width","100%"],["colspan","2",2,"text-align","right"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"click",4,"ngIf"],[3,"click"],[1,"fas","fa-plus-circle",2,"color","green"],[1,"fas","fa-minus-circle",2,"color","red"],["mat-header-row",""],["mat-row",""],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"div",12),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",13),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",14),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t.TgZ(28,"div",12),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"input",16),t.qZA(),t.qZA(),t.TgZ(33,"div",15),t.TgZ(34,"div",12),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",17),t.qZA(),t.qZA(),t.TgZ(39,"div",15),t.TgZ(40,"div",12),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",10),t.TgZ(46,"div",11),t.TgZ(47,"div",12),t.TgZ(48,"label",19),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"select",20),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(52,"option",21),t._uU(53),t.ALo(54,"translate"),t.ALo(55,"translate"),t.qZA(),t.YNc(56,T0,2,3,"option",22),t.qZA(),t._UZ(57,"validation-message",23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",24),t.TgZ(59,"table",25),t.TgZ(60,"thead"),t.TgZ(61,"tr"),t.TgZ(62,"th"),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"th"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"th"),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"th"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"th"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(80,y0,2,1,"ng-container",26),t.YNc(81,U0,2,1,"tfoot",26),t.qZA(),t.qZA(),t.qZA(),t.YNc(82,Y0,55,28,"div",26),t.TgZ(83,"div",27),t.TgZ(84,"div",8),t.TgZ(85,"div",28),t.TgZ(86,"input",29),t.NdJ("click",function(){return o.closeModel()}),t.ALo(87,"translate"),t.qZA(),t._uU(88," \xa0 "),t.YNc(89,J0,2,3,"input",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,23,o.modalTitle)),t.xp6(15),t.Oqu(t.lcZ(19,25,"Customer_Code")),t.xp6(6),t.Oqu(t.lcZ(25,27,"Project_Code")),t.xp6(6),t.Oqu(t.lcZ(31,29,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(37,31,"Project_End_Date")),t.xp6(6),t.Oqu(t.lcZ(43,33,"No_Of_Days")),t.xp6(7),t.Oqu(t.lcZ(50,35,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(54,37,"Select")," ",t.lcZ(55,39,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(6),t.hij(" ",t.lcZ(64,41,"Month_Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(67,43,"Month_End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(70,45,"No_Of_Days")," "),t.xp6(3),t.hij(" ",t.lcZ(73,47,"SkillSet")," "),t.xp6(3),t.hij(" ",t.lcZ(76,49,"Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(79,51,"Total_Shifts")," "),t.xp6(2),t.Q6J("ngIf",(null==o.tableData?null:o.tableData.length)>0),t.xp6(1),t.Q6J("ngIf",(null==o.footerData?null:o.footerData.length)>0),t.xp6(1),t.Q6J("ngIf",0!=o.tableData.length),t.xp6(4),t.s9C("value",t.lcZ(87,53,"Cancel")),t.xp6(3),t.Q6J("ngIf",0!=o.selectedEmployeesList.length))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,Z.sg,V.s,Z.O5,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();var Q0=X(1289);function B0(i,a){if(1&i&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"(",o.isArab?e.siteArbName:e.siteName,")")}}function H0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"div",11),t.TgZ(2,"div",12),t.TgZ(3,"label",23),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"select",24),t.NdJ("change",function(n){return t.CHM(e),t.oxw().onSelectSiteCode(n)}),t.TgZ(7,"option",25),t._uU(8),t.ALo(9,"translate"),t.ALo(10,"translate"),t.qZA(),t.YNc(11,B0,2,3,"option",26),t.qZA(),t._UZ(12,"validation-message",27),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,5,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(9,7,"Select")," ",t.lcZ(10,9,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",e.siteCodeList),t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function $0(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.employeeNumber,"")}}function V0(i,a){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(4);t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.text,"-",o.isArab?e.textAr:e.textTwo," ")}}function G0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t._UZ(1,"auto-loader",37),t._UZ(2,"input",38),t.ALo(3,"translate"),t.ALo(4,"translate"),t.TgZ(5,"mat-autocomplete",39,40),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw(3).autoSelectionEmployeeNumber(n)}),t.YNc(7,V0,2,3,"mat-option",26),t.ALo(8,"async"),t.qZA(),t._UZ(9,"validation-message",27),t.qZA()}if(2&i){const e=t.MAs(6),o=t.oxw(3);t.xp6(1),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(3,7,"Enter")," ",t.lcZ(4,9,"Employee"),""),t.Q6J("formControl",o.empCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(8,11,o.filteredEmployeeNumbers)),t.xp6(2),t.Q6J("control",o.empCodeControl)}}function W0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.YNc(7,$0,2,1,"td",33),t.YNc(8,G0,10,13,"td",34),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.TgZ(12,"i",35),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).editMap(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1,""),t.xp6(2),t.hij(" ",e.skillSet,""),t.xp6(2),t.hij(" ",n.isArab?e.skillSetNameArb:e.skillSetNameEng,""),t.xp6(1),t.Q6J("ngIf",n.editRow!=o),t.xp6(1),t.Q6J("ngIf",n.editRow==o),t.xp6(2),t.hij(" ",n.isArab?e.empNameAr:e.empName,"")}}function z0(i,a){if(1&i&&(t.TgZ(0,"div",29),t.TgZ(1,"table",30),t.TgZ(2,"tr"),t.TgZ(3,"th",31),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.YNc(23,W0,13,6,"tr",32),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,9,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(8,11,"SkillSet")," "),t.xp6(3),t.AsE(" ",t.lcZ(11,13,"SkillSet")," ",t.lcZ(12,15,"Name")," "),t.xp6(4),t.hij(" ",t.lcZ(15,17,"Employee_Code")," "),t.xp6(3),t.AsE(" ",t.lcZ(18,19,"Employee")," ",t.lcZ(19,21,"Name")," "),t.xp6(4),t.hij(" ",t.lcZ(22,23,"Edit")," "),t.xp6(2),t.Q6J("ngForOf",e.empToResMapData)}}function X0(i,a){1&i&&(t._UZ(0,"input",41),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let he=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.skillsetData=[],this.empToResMapData=[],this.skillsetsListForSite=[],this.monthsDataList=[],this.shiftsForSite=[],this.siteCodeList=[],this.editRow=-1,this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeesForProjectSite=[],this.employeeNumber="",this.isDataLoading=!1,this.isArab=!1,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,ot.O)(""),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(h||""))))}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm();var e=0;this.interval=setInterval(()=>{1==++e?this.calculateDates():2==e?this.loadEmployees():3==e?this.getSitesList():4==e&&this.getSkillsetsForSite(this.project.siteCode)},e>4?0:1e3)}closeModel(){this.dialogRef.close()}setForm(){var e,o;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)?this.project.siteCode:"",l.kI.required],startDate:[this.project.startDate.toString().substring(0,10)],endDate:[this.project.endDate.toString().substring(0,10)],noOfDays:[this.noOfDays]}),null!=(null===(o=this.project)||void 0===o?void 0:o.siteCode)&&(this.form.controls.siteCode.disable({onlySelf:!0}),this.loadEmployeesForProjectSite(this.project.siteCode),this.getSkillsetsForSite(this.project.siteCode),this.loadEmpToResourceMap(this.project.siteCode))}getSitesList(){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(e=>{this.siteCodeList=e})}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.employeeList=e},e=>this.utilService.ShowApiErrorMessage(e))}loadEmployeesForProjectSite(e){this.apiService.getall(`EmployeesToProjectSite/getEmployeesOfProjectSite/${this.project.projectCode}/${e}`).subscribe(o=>{this.employeesForProjectSite=o,0==this.employeesForProjectSite.length?this.notifyService.showError(this.translate.instant("Employees_Not_Assigned_To_Site")):this.loadEmpToResourceMap(e)},o=>this.utilService.ShowApiErrorMessage(o))}calculateDates(){this.monthsDataList=[];let e=new Date(this.project.startDate),o=new Date(this.project.endDate);this.noOfDays=(o.getTime()-e.getTime())/864e5+1;for(let n=e.getFullYear();n<=o.getFullYear();n++){let s=n==e.getFullYear()?e.getMonth():1,r=n==o.getFullYear()?o.getMonth():12;for(let c=s;c<=r;c++){let p=c==s&&n==e.getFullYear()?e.getDate():1,u=c==r&&n==o.getFullYear()?o.getDate():new Date(n,c+1,0).getDate(),d=(new Date(n,c,u).getTime()-new Date(n,c,p).getTime())/864e5+1,_={sd:p,ed:u,mStartDate:new Date(n,c,p).toDateString(),mEndDate:new Date(n,c,u).toDateString(),mNoOfDays:d};this.monthsDataList.push(_)}}}loadskillsetData(){this.skillsetData=[],this.empToResMapData=[];for(let e=0;e<this.skillsetsListForSite.length;e++)this.skillsetData.push({skillSet:this.skillsetsListForSite[e].skillSetCode,skillSetNameEng:this.skillsetsListForSite[e].nameInEnglish,skillSetNameArb:this.skillsetsListForSite[e].nameInArabic,quantity:this.skillsetsListForSite[e].quantity})}loadEmpToResourceMap(e){this.isDataLoading=!0,this.apiService.getall(`EmployeesToResorceMap/getEmployeesToResourcesMapForProjectSite/${this.project.projectCode}/${e}`).subscribe(o=>{var n,s,r,c,p,u,d;this.empToResMapData=o,console.log(o),this.isDataLoading=!1,console.log(this.skillsetsListForSite);for(var _=0;_<this.empToResMapData.length;_++){let h=this.empToResMapData[_];h.empNumber=null===(n=this.employeeList.find(A=>(null==A?void 0:A.value)==(null==h?void 0:h.employeeNumber)))||void 0===n?void 0:n.value,h.empName=null===(s=this.employeeList.find(A=>(null==A?void 0:A.value)==(null==h?void 0:h.employeeNumber)))||void 0===s?void 0:s.text,h.empNameAr=null===(r=this.employeeList.find(A=>(null==A?void 0:A.value)==(null==h?void 0:h.employeeNumber)))||void 0===r?void 0:r.textAr,h.skillSetNameEng=null===(c=this.skillsetsListForSite.find(A=>A.skillSetCode==(null==h?void 0:h.skillSet)))||void 0===c?void 0:c.nameInEnglish,h.skillSetNameArb=null===(p=this.skillsetsListForSite.find(A=>A.skillSetCode==(null==h?void 0:h.skillSet)))||void 0===p?void 0:p.nameInArabic}if(0==this.empToResMapData.length)for(let h=0;h<this.skillsetsListForSite.length;h++)for(let A=1;A<=this.skillsetsListForSite[h].quantity;A++){let C={projectCode:this.project.projectCode,siteCode:this.form.controls.siteCode.value,skillSet:this.skillsetsListForSite[h].skillSetCode,skillSetNameEng:null===(u=this.skillsetsListForSite[h])||void 0===u?void 0:u.nameInEnglish,skillSetNameArb:null===(d=this.skillsetsListForSite[h])||void 0===d?void 0:d.nameInArabic,employeeNumber:"",employeeID:0,mapId:0};this.empToResMapData.push(C)}},o=>{this.isDataLoading=!1})}getJvalue(e){return e%this.skillsetsListForSite.length}getSkillsetsForSite(e){this.isDataLoading=!0,""!=e?this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${e}`).subscribe(o=>{this.skillsetsListForSite=o,this.loadEmployeesForProjectSite(e),this.isDataLoading=!1},o=>{this.isDataLoading=!1}):(this.isDataLoading=!1,this.shiftsForSite=[],this.skillsetsListForSite=[])}getShiftsForSite(e){this.isDataLoading=!0,this.apiService.getall(`ShiftMaster/getShiftsToSiteBySiteCode/${e}`).subscribe(o=>{this.shiftsForSite=o,this.isDataLoading=!1})}onSelectSiteCode(e){this.loadEmployeesForProjectSite(e.target.value),(0,Q0.g)(1e3),this.getSkillsetsForSite(e.target.value)}filterEmployeeNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.project.projectCode}/${this.form.controls.siteCode.value}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}editMap(e){-1==this.editRow?(this.editRow=e,this.empCodeControl.setValue(this.empToResMapData[this.editRow].employeeNumber)):this.editRow=-1}autoSelectionEmployeeNumber(e){this.empToResMapData.findIndex(o=>o.employeeNumber==e.option.value.text)<0&&(this.empToResMapData[this.editRow].employeeID=e.option.value.value,this.empToResMapData[this.editRow].employeeNumber=e.option.value.text,this.empToResMapData[this.editRow].empName=e.option.value.textTwo,this.empToResMapData[this.editRow].empNameAr=e.option.value.textAr),this.editRow=-1}submit(){0==this.empToResMapData.length||this.isDataLoading?this.isDataLoading?this.notifyService.showInfo("Please Wait..."):this.notifyService.showWarning("No_mapping_Data_Founds"):(this.isDataLoading=!0,this.apiService.post("EmployeesToResorceMap/mapEmployeesToResources",this.empToResMapData).subscribe(e=>{this.utilService.OkMessage(),this.isDataLoading=!1,this.dialogRef.close(!0)},e=>{console.log(e),console.error(e),this.utilService.ShowApiErrorMessage(e),this.isDataLoading=!1}))}canSave(){return this.empToResMapData.findIndex(e=>""==e.employeeNumber)<0}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-mapping-emp-to-resource-for-project-site"]],features:[t.qOj],decls:48,vars:22,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","customerCode","readonly","",1,"form-control"],["type","text","formControlName","projectCode","readonly","",1,"form-control"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["class","row  mt-2",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[1,"mr-sm-2"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],[3,"value"],[1,"table-responsive"],["id","zero_config1",1,"table","table-bordered","no-wrap"],[2,"width","3%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["width","100%",4,"ngIf"],[1,"icon-note",3,"click"],["width","100%"],[3,"isLoading"],["type","text","matInput","",1,"form-control",2,"width","inherit",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto_emp","matAutocomplete"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"div",12),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",13),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",14),t.qZA(),t.qZA(),t.TgZ(27,"div",11),t.TgZ(28,"div",12),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"input",15),t.qZA(),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"div",12),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",16),t.qZA(),t.qZA(),t.qZA(),t.YNc(39,H0,13,11,"div",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(40,z0,24,25,"div",18),t.qZA(),t.TgZ(41,"div",19),t.TgZ(42,"div",8),t.TgZ(43,"div",20),t.TgZ(44,"input",21),t.NdJ("click",function(){return o.closeModel()}),t.ALo(45,"translate"),t.qZA(),t._uU(46," \xa0 "),t.YNc(47,X0,2,3,"input",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,10,o.modalTitle)),t.xp6(15),t.Oqu(t.lcZ(19,12,"Customer_Code")),t.xp6(6),t.Oqu(t.lcZ(25,14,"Project_Code")),t.xp6(6),t.Oqu(t.lcZ(31,16,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(37,18,"Project_End_Date")),t.xp6(3),t.Q6J("ngIf",o.siteCodeList.length>0),t.xp6(1),t.Q6J("ngIf",o.empToResMapData.length>0),t.xp6(4),t.s9C("value",t.lcZ(45,20,"Cancel")),t.xp6(3),t.Q6J("ngIf",o.canSave()&&0!=o.empToResMapData.length))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,Z.O5,l.EJ,l.YN,l.Kr,Z.sg,V.s,At.z,lt.ZL,l.oH,lt.XC,Ut.ey],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function K0(i,a){if(1&i&&(t.TgZ(0,"option",13),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.shiftCode),t.xp6(1),t.AsE("",e.shiftCode,"(",o.isArabic?e.shiftName_AR:e.shiftName_EN,")")}}function tA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}const eA=function(){return{standalone:!0}};let oA=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d){super(p),this.translate=e,this.notifyService=o,this.utilService=n,this.dialog=s,this.apiService=r,this.dialogRef=c,this.authService=p,this.fb=u,this.oprService=d,this.inputShift="",this.updatedShift="",this.isArabic=!1}ngOnInit(){var e,o;this.isArabic=this.utilService.isArabic(),this.inputShift=null===(e=this.inputData)||void 0===e?void 0:e.shiftCode,this.updatedShift=null===(o=this.inputData)||void 0===o?void 0:o.shiftCode,this.getEmployee(this.inputData.roasterData.employeeNumber),console.log(this.inputData)}getEmployee(e){this.apiService.getall(`Employee/getEmployeeByEmployeeNumber/${e}`).subscribe(o=>{o.name=this.isArabic?o.employeeName_AR:o.employeeName,this.employeeData=o})}closeModel(){this.dialogRef.close(!1)}save(){""!=this.updatedShift&&this.updatedShift!=this.inputShift&&this.apiService.post("monthlyRoaster/updateShiftCodeForDay",{day:this.inputData.c,roasterId:this.inputData.roasterData.id,shiftCode:this.updatedShift}).subscribe(o=>{this.dialogRef.close(o>0?{result:o,res:!0,r:this.inputData.r,c:this.inputData.c,isShiftUpdated:!0,updatedShift:this.updatedShift}:{result:o,res:!1})},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o),this.dialogRef.close({result:-4,res:!1})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.sK),t.Y36(w.g),t.Y36(b.t),t.Y36(T.uw),t.Y36(q.s),t.Y36(T.so),t.Y36(v._),t.Y36(l.qu),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-update-employee-shift"]],features:[t.qOj],decls:43,vars:34,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["id","zero_config",1,"table","table-bordered","no-wrap"],["colspan","8"],[1,"row",2,"align-content","center"],[1,"col-md-3","col-lg-3"],[1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"col2-md-12","col-lg-12"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","button","class","btn waves-effect waves-light btn-rounded btn-success   btn-secondary btn-midblock",3,"value","click",4,"ngIf"],[3,"value"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-success","btn-secondary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.qZA(),t.TgZ(2,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.TgZ(4,"table",2),t.TgZ(5,"tr"),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"date"),t.qZA(),t.TgZ(22,"th"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"tr"),t.TgZ(28,"td",3),t.TgZ(29,"div",4),t.TgZ(30,"div",5),t.TgZ(31,"select",6),t.NdJ("ngModelChange",function(s){return o.updatedShift=s}),t.TgZ(32,"option",7),t._uU(33),t.ALo(34,"translate"),t.ALo(35,"translate"),t.qZA(),t.YNc(36,K0,2,3,"option",8),t.qZA(),t.qZA(),t.TgZ(37,"div",9),t.TgZ(38,"div",10),t.TgZ(39,"input",11),t.NdJ("click",function(){return o.closeModel()}),t.ALo(40,"translate"),t.qZA(),t._uU(41," \xa0 "),t.YNc(42,tA,2,3,"input",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Update_Shift"),t.xp6(6),t.Oqu(t.lcZ(8,16,"Employee_ID")),t.xp6(3),t.Oqu(null==o.employeeData?null:o.employeeData.employeeID),t.xp6(2),t.Oqu(t.lcZ(13,18,"Name")),t.xp6(3),t.Oqu(null==o.employeeData?null:o.employeeData.name),t.xp6(2),t.Oqu(t.lcZ(18,20,"Date")),t.xp6(3),t.Oqu(t.xi3(21,22,null==o.inputData?null:o.inputData.attnDate,"dd-MM-YYYY")),t.xp6(3),t.Oqu(t.lcZ(24,25,"Actual_Shift")),t.xp6(3),t.Oqu(null==o.inputData?null:o.inputData.shiftCode),t.xp6(5),t.Q6J("ngModel",o.updatedShift)("ngModelOptions",t.DdM(33,eA)),t.xp6(2),t.AsE("",t.lcZ(34,27,"Select")," ",t.lcZ(35,29,"Shift")," "),t.xp6(3),t.Q6J("ngForOf",o.inputData.shiftCodesSelectionList),t.xp6(3),t.s9C("value",t.lcZ(40,31,"Cancel")),t.xp6(3),t.Q6J("ngIf",o.updatedShift!=o.inputShift&&""!=o.updatedShift))},directives:[l.EJ,l.JJ,l.On,l.YN,l.Kr,Z.sg,Z.O5],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function iA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.employee?null:e.employee.employeeNumber," ")}}function nA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.altEmployee?null:e.altEmployee.employeeNumber," ")}}function aA(i,a){if(1&i&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.text,"-",e.textTwo," ")}}const ye=function(){return{standalone:!0}};function sA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"span"),t._UZ(2,"auto-loader",14),t._UZ(3,"input",15),t.ALo(4,"translate"),t.ALo(5,"translate"),t.TgZ(6,"mat-autocomplete",16,17),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().autoSelectionEmployeeNumber(n)}),t.YNc(8,aA,2,3,"mat-option",18),t.ALo(9,"async"),t.qZA(),t.qZA(),t.TgZ(10,"span"),t.TgZ(11,"input",19),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().canShowAllEmployees=n})("change",function(){return t.CHM(e),t.oxw().changeEmployeeFilter()}),t.qZA(),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(7),o=t.oxw();t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(4,9,"Enter")," ",t.lcZ(5,11,"Employee"),""),t.Q6J("formControl",o.empCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(9,13,o.filteredEmployeeNumbers)),t.xp6(3),t.Q6J("ngModel",o.canShowAllEmployees)("ngModelOptions",t.DdM(17,ye)),t.xp6(1),t.hij(" ",t.lcZ(13,15,"Show_All_Employees")," ")}}function rA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().editEmployee()}),t._UZ(1,"i",22),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("matTooltip",e.translateToolTip("edit_employee"))}}function lA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().editEmployee()}),t._UZ(1,"i",24),t.qZA()}}function cA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.employee?null:e.employee.employeeName," ")}}function pA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.altEmployee?null:e.altEmployee.employeeName," ")}}function uA(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.shift?null:e.shift.shiftCode," ")}}function dA(i,a){if(1&i&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.shiftCode),t.xp6(1),t.Oqu(e.shiftCode)}}function _A(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",25),t.TgZ(1,"select",26),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().altShift.shiftCode=n})("change",function(n){return t.CHM(e),t.oxw().onSelectShift(n)}),t.TgZ(2,"option",27),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,dA,2,2,"option",18),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.altShift.shiftCode)("ngModelOptions",t.DdM(9,ye)),t.xp6(2),t.AsE("",t.lcZ(4,5,"Select")," ",t.lcZ(5,7,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",e.listOfShiftCodes)}}function mA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateShift()}),t._UZ(1,"i",22),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("matTooltip",e.translateToolTip("Change_Shift"))}}function gA(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.inputData.altShiftCode," ")}}function hA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterAttendance()}),t.TgZ(2,"i"),t._uU(3,"P-"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6," \xa0 "),t.qZA()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Present")))}function ZA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterAbsent()}),t.TgZ(2,"i"),t._uU(3,"A-"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6,"\xa0 "),t.qZA()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Absent")))}function fA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("AL")}),t._uU(2,"AL"),t.qZA(),t._uU(3,"\xa0 "),t.TgZ(4,"button",35),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("EL")}),t._uU(5,"EL"),t.qZA(),t._uU(6,"\xa0 "),t.TgZ(7,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("SL")}),t._uU(8,"SL"),t.qZA(),t._uU(9,"\xa0 "),t.TgZ(10,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("UL")}),t._uU(11,"UL"),t.qZA(),t._uU(12,"\xa0 "),t.TgZ(13,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("STL")}),t._uU(14,"STL"),t.qZA(),t._uU(15,"\xa0 "),t.qZA()}}function AA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return n.cancelEmployeeLeave(n.inputData.leavesData.id)}),t.TgZ(2,"i"),t._uU(3,"CL-"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6,"\xa0 "),t.qZA()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Cancel_Leave")))}function CA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return n.cancelEmployeeLeave(n.inputData.leavesData.id)}),t.TgZ(2,"i"),t._uU(3,"CW-"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6,"\xa0 "),t.qZA()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Cancel_Withdrawal")))}function TA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return n.cancelEmployeeTRX(null==n.inputData||null==n.inputData.transORresignData?null:n.inputData.transORresignData.id)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4,"\xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Cancel_Transfer")))}function vA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return n.cancelEmployeeTRX(null==n.inputData||null==n.inputData.transORresignData?null:n.inputData.transORresignData.id)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4,"\xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Cancel_Resign")))}function xA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return n.cancelEmployeeTRX(null==n.inputData||null==n.inputData.transORresignData?null:n.inputData.transORresignData.id)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4,"\xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Cancel_Termination")))}function qA(i,a){if(1&i&&(t.TgZ(0,"td",28),t.YNc(1,fA,16,0,"span",6),t.YNc(2,AA,7,3,"span",6),t.YNc(3,CA,7,3,"span",6),t.YNc(4,TA,5,3,"span",6),t.YNc(5,vA,5,3,"span",6),t.YNc(6,xA,5,3,"span",6),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!(e.inputData.isWithDrawn||e.inputData.isTransfered||e.inputData.isResigned||e.inputData.isTerminated||e.inputData.isOnLeave)),t.xp6(1),t.Q6J("ngIf",e.inputData.isOnLeave),t.xp6(1),t.Q6J("ngIf",e.inputData.isWithDrawn),t.xp6(1),t.Q6J("ngIf",null==e.inputData?null:e.inputData.isTransfered),t.xp6(1),t.Q6J("ngIf",null==e.inputData?null:e.inputData.isResigned),t.xp6(1),t.Q6J("ngIf",null==e.inputData?null:e.inputData.isTerminated)}}function bA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",38),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("W")}),t.TgZ(2,"i"),t._uU(3,"W-"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6,"\xa0 "),t.qZA()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Withdraw")))}function yA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",28),t.YNc(2,bA,7,3,"span",6),t.TgZ(3,"span"),t.TgZ(4,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterEmployeeTransResign("TR")}),t.TgZ(5,"i"),t._uU(6,"TR-"),t.qZA(),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._uU(9,"\xa0 "),t.qZA(),t.TgZ(10,"span"),t.TgZ(11,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterEmployeeTransResign("R")}),t.TgZ(12,"i"),t._uU(13,"R-"),t.qZA(),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._uU(16,"\xa0 "),t.qZA(),t.TgZ(17,"span"),t.TgZ(18,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterEmployeeTransResign("X")}),t.TgZ(19,"i"),t._uU(20,"X-"),t.qZA(),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._uU(23,"\xa0 "),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!e.inputData.isDefShiftOff),t.xp6(5),t.Oqu(t.lcZ(8,4,"Transfer")),t.xp6(7),t.Oqu(t.lcZ(15,6,"Resigned")),t.xp6(7),t.Oqu(t.lcZ(22,8,"Terminated"))}}function SA(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",39),t._uU(2),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",null==e.inputData||null==e.inputData.transORresignData?null:e.inputData.transORresignData.remarks," ")}}function wA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"table",4),t.TgZ(1,"tr"),t.TgZ(2,"td",28),t.YNc(3,hA,7,3,"span",6),t.YNc(4,ZA,7,3,"span",6),t.TgZ(5,"span"),t.TgZ(6,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._UZ(7,"i",30),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._uU(10," \xa0 "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.YNc(12,qA,7,6,"td",31),t.qZA(),t.YNc(13,yA,24,10,"tr",6),t.YNc(14,SA,3,1,"tr",6),t.TgZ(15,"tr"),t.TgZ(16,"td"),t._uU(17," AL = Anuual Leave \u0627\u0644\u0639\u0637\u0644\u0629 \u0627\u0644\u0633\u0646\u0648\u064a\u0629 SL = Sick Leave \u0625\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629 EL = Emergrncy Leave \u0625\u062c\u0627\u0632\u0629 \u062e\u0627\u0635\u0629/\u0637\u0627\u0631\u0626\u0629 UL= Unpaid Leave \u0625\u062c\u0627\u0632\u0629 \u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0629 W = Withdraw \u0627\u0646\u0633\u062d\u0627\u0628 "),t.qZA(),t.qZA(),t.TgZ(18,"tr"),t.TgZ(19,"td"),t._uU(20," TR = Transferred \u0646\u0642\u0644 R = Resigned \u0645\u0633\u062a\u0642\u064a\u0644 X = Terminated \u0625\u0646\u0647\u0627\u0621 \u062e\u062f\u0645\u0627\u062a \u0627\u0644\u0645\u0648\u0638\u0641/\u0625\u0646\u0647\u0627\u0621 \u0641\u062a\u0631\u0629 \u062a\u062c\u0631\u0628\u0629/\u0641\u0635\u0644 "),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",!((0!=e.inputData.id||(null!=e.inputData&&e.inputData.isOnLeave||null!=e.inputData&&e.inputData.isWithDrawn||null!=e.inputData&&e.inputData.isTransfered||null!=e.inputData&&e.inputData.isResigned||null!=e.inputData&&e.inputData.isTerminated)&&(e.inputData.isDefShiftOff||e.inputData.isDefaultEmployee))&&(null==e.employee?null:e.employee.employeeNumber)==(null==e.altEmployee?null:e.altEmployee.employeeNumber))),t.xp6(1),t.Q6J("ngIf",!(!(e.inputData.id>0||0==e.inputData.id&&!e.inputData.isDefShiftOff&&!e.inputData.isPosted)||null!=e.inputData&&e.inputData.isOnLeave||null!=e.inputData&&e.inputData.isWithDrawn||null!=e.inputData&&e.inputData.isTransfered||null!=e.inputData&&e.inputData.isTerminated||null!=e.inputData&&e.inputData.isResigned||null!=e.inputData&&e.inputData.isDefShiftOff)),t.xp6(4),t.hij(" ",t.lcZ(9,6,"Cancel")," "),t.xp6(4),t.Q6J("ngIf",!e.inputData.isDefShiftOff),t.xp6(1),t.Q6J("ngIf",!(e.inputData.isWithDrawn||e.inputData.isTransfered||e.inputData.isResigned||e.inputData.isTerminated||e.inputData.isOnLeave)),t.xp6(1),t.Q6J("ngIf",(e.inputData.isTransfered||e.inputData.isResigned||e.inputData.isTerminated)&&e.inputData.isDefaultEmployee)}}let ke=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d){super(p),this.translate=e,this.notifyService=o,this.utilService=n,this.dialog=s,this.apiService=r,this.dialogRef=c,this.authService=p,this.fb=u,this.oprService=d,this.editEmp=!0,this.shift={shiftCode:""},this.altShift={shiftCode:""},this.listOfShiftCodes=[],this.editInTime=0,this.editOutTime=0,this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeesForProjectSite=[],this.employeeNumber="",this.isDataLoading=!1,this.inTime="11:00",this.canShowAllEmployees=!1,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,ot.O)(this.employeeNumber),(0,it.b)(n.autoDelay()),(0,nt.x)(),(0,at.w)(_=>(""!==_.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(_||""))))}ngOnInit(){console.log(this.inputData),this.inputData.isPrimarySite||(this.inputData.isDefaultEmployee=!0),this.loadShiftCodes(),this.getEmployee(this.inputData.employeeNumber),""!=this.inputData.altEmployeeNumber&&this.getAltEmployee(this.inputData.altEmployeeNumber),this.getShift(this.inputData.shiftCode),""!=this.inputData.altShiftCode&&this.getAltShift(this.inputData.altShiftCode),this.setForm()}setForm(){this.form=this.fb.group({})}closeModel(){this.dialogRef.close()}submit(){}editEmployee(){this.editEmp=!this.editEmp}getEmployee(e){this.apiService.get("Employee/getEmployeeByEmployeeNumber/",e).subscribe(o=>{o&&(this.employee=o)})}getAltEmployee(e){this.apiService.get("Employee/getEmployeeByEmployeeNumber/",e).subscribe(o=>{o&&(this.altEmployee=o)})}getShift(e){""!=e&&this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e).subscribe(o=>{o&&(this.shift=o,this.inputData.id>0&&(this.shift.inTime=o.inTime.toString().substring(0,5),this.shift.outTime=o.outTime.toString().substring(0,5)))})}getAltShift(e){""!=e&&this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e).subscribe(o=>{o&&(this.altShift=o,this.altShift.isOff&&(this.altShift.shiftCode=""))})}changeTime(e,o){let n=Number(this.shift.inTime.split(":")[0]),s=Number(this.shift.outTime.split(":")[0]),r=Number(this.shift.inTime.split(":")[1]),c=Number(this.shift.outTime.split(":")[1]);"intime"==e?this.shift.inTime=this.minsToTimeString(60*n+this.editInTime+r):this.shift.outTime=this.minsToTimeString(60*s+c+this.editOutTime),this.editOutTime=0,this.editInTime=0}minsToTimeString(e){let o=e>0?Math.floor(e/60)%24:Math.floor((e+1440)/60)%24,n=e>0?Math.floor(e%60):e+60;return this.padLeft(o.toString(),"0",2)+":"+this.padLeft(n.toString(),"0",2)}padLeft(e,o,n){return(String(o).repeat(n)+e).substr(-1*n,n)}onSelectShift(e){this.getAltShift(e.target.value),this.getShift(e.target.value)}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.inputData.projectCode}/${this.inputData.siteCode}`).subscribe(e=>{this.listOfShiftCodes=e})}enterAttendance(){if(this.inputData.altShiftCode=this.inputData.isDefShiftOff?this.altShift.shiftCode:"",this.inputData.isDefShiftOff||this.inputData.isDefaultEmployee?this.inputData.isDefShiftOff?(this.inputData.attendance="P",this.inputData.altEmployeeNumber=this.altEmployee.employeeNumber):this.inputData.altEmployeeNumber="":(this.inputData.attendance="S",this.inputData.altEmployeeNumber=this.altEmployee.employeeNumber),(this.inputData.altEmployeeNumber==this.inputData.employeeNumber||""==this.inputData.altEmployeeNumber)&&(this.inputData.isDefaultEmployee=!0),this.inputData.inTime=this.shift.inTime,this.inputData.outTime=this.shift.outTime,this.inputData.isDefShiftOff&&""!=this.inputData.altShiftCode||!this.inputData.isDefShiftOff&&this.inputData.altShiftCode!=this.inputData.shiftCode){let e=Number(this.inputData.inTime.substr(0,2)),o=Number(this.inputData.inTime.substr(3,2)),c=60*Number(this.inputData.outTime.substr(0,2))+Number(this.inputData.outTime.substr(3,2))-60*e-o;c<0&&(c+=1440),60*this.inputData.daywiseConsolidateData.tch+this.inputData.daywiseConsolidateData.tch_min-this.inputData.daywiseConsolidateData.mins-60*this.inputData.daywiseConsolidateData.hours<c?this.notifyService.showError(this.translate.instant("Daily_Shift_Hours_Exceeding")):this.apiService.post("EmployeesAttendance/enterEmployeeAttendance",this.inputData).subscribe(p=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData})},p=>{console.error(p),this.utilService.ShowApiErrorMessage(p)})}else this.notifyService.showError(this.translate.instant("Please")+" "+this.translate.instant("Select")+" "+this.translate.instant("Shift_Code"))}filterEmployeeNumbers(e){return this.canShowAllEmployees?this.apiService.getall(`Employee/getAutoSelectEmployeeList/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n})):this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.inputData.projectCode}/${this.inputData.siteCode}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}autoSelectionEmployeeNumber(e){this.inputData.employeeNumber!=e.option.value.text||this.inputData.isDefShiftOff?(this.altEmployee.employeeNumber=e.option.value.text,this.altEmployee.employeeID=e.option.value.value,this.altEmployee.employeeName=e.option.value.textTwo,this.inputData.isDefaultEmployee=!1):(this.altEmployee.employeeNumber="",this.altEmployee.employeeName="",this.inputData.isDefaultEmployee=!0),this.empCodeControl.setValue(""),this.editEmp=!0}enterAbsent(){!this.inputData.isDefShiftOff&&this.inputData.isDefaultEmployee&&(this.inputData.attendance="A",this.inputData.isDefaultEmployee=!0,this.inputData.inTime=this.shift.inTime,this.inputData.outTime=this.shift.outTime,this.apiService.post("EmployeesAttendance/enterEmployeeAbsent",this.inputData).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData})},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}))}enterEmployeeLeave(e){let o={employeeNumber:this.inputData.employeeNumber,attnDate:this.inputData.attnDate,al:!1,el:!1,ul:!1,sl:!1,stl:!1,w:!1,projectCode:this.inputData.projectCode,siteCode:this.inputData.siteCode,shiftCode:this.inputData.shiftCode};switch(e){case"AL":o.al=!0;break;case"EL":o.el=!0;break;case"UL":o.ul=!0;break;case"SL":o.sl=!0;break;case"STL":o.stl=!0;break;case"W":o.w=!0;break;default:console.log("Default")}this.openConfirmationDialog(g.Oi.create,"Are_You_Sure?",e,xt,this.inputCellData,this.inputData,o,"leave")}openConfirmationDialog(e,o,n,s,r,c,p,u){let d=this.oprService.confirmationDialog(this.dialog,s);d.componentInstance.dbops=e,d.componentInstance.modalTitle=o,d.componentInstance.leaveType=n,d.componentInstance.cellData=r,d.componentInstance.outputData=c,d.componentInstance.leaveData=p,d.componentInstance.confirmType=u,d.afterClosed().subscribe(_=>{(_&&1==_||_.res)&&("leave"==u?this.apiService.post("EmployeeLeaves/enterEmployeeLeave",p).subscribe(h=>{console.log(h),this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,leaveData:p,isConfirmedLeave:!0})},h=>{console.error(h),this.utilService.ShowApiErrorMessage(h)}):"transResign"==u?(p.remarks=_.remarks,this.apiService.post("EmployeeTransResign/enterEmployeeTransResign",p).subscribe(h=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,leaveData:p,confirmType:u})},h=>{console.error(h),this.utilService.ShowApiErrorMessage(h)})):"cancelLeave"==u?(console.log(p),this.apiService.get("EmployeeLeaves/cancelLeave",p.id).subscribe(h=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,leaveData:p,confirmType:u})},h=>{console.error(h),this.utilService.ShowApiErrorMessage(h)})):"cancelEmployeeTRX"==u&&this.apiService.get("EmployeeTransResign/cancelEmployeeTRX",p.id).subscribe(h=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,leaveData:p,confirmType:u})},h=>{console.error(h),this.utilService.ShowApiErrorMessage(h)}))})}openUpdateShiftWindow(e,o){let n=this.oprService.openAutoWidthDialog(this.dialog,o);n.componentInstance.inputData=e,n.afterClosed().subscribe(s=>{(null==s?void 0:s.result)>0?(this.dialogRef.close({res:!0,isUpdatedShift:!0,r:this.inputData.r,c:this.inputData.c,updatedShift:s.updatedShift}),this.notifyService.showSuccess("Success")):0==s||(this.notifyService.showError("Failed"),this.dialogRef.close(!1))})}enterEmployeeTransResign(e){let o={employeeNumber:this.inputData.employeeNumber,attnDate:this.inputData.attnDate,projectCode:this.inputData.projectCode,siteCode:this.inputData.siteCode,r:!1,tr:!1};switch(e){case"R":o.r=!0;break;case"TR":o.tr=!0;break;case"X":o.r=!1,o.tr=!1;break;default:console.log("Default")}this.openConfirmationDialog(g.Oi.create,"Are_You_Sure?",e,xt,this.inputCellData,this.inputData,o,"transResign")}cancelEmployeeLeave(e){this.openConfirmationDialog(g.Oi.create,"Are_You_Sure?","",xt,this.inputCellData,this.inputData,{id:e},"cancelLeave")}cancelEmployeeTRX(e){this.openConfirmationDialog(g.Oi.create,"Are_You_Sure?","",xt,this.inputCellData,this.inputData,{id:e},"cancelEmployeeTRX")}updateShift(){this.inputData.c=this.inputData.attnDate.toString().split("-")[2]-1,this.openUpdateShiftWindow(this.inputData,oA)}translateToolTip(e){return`${this.translate.instant(e)}`}changeEmployeeFilter(){this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,ot.O)(this.employeeNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(e||""))))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.sK),t.Y36(w.g),t.Y36(b.t),t.Y36(T.uw),t.Y36(q.s),t.Y36(T.so),t.Y36(v._),t.Y36(l.qu),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-manual-attendance-popup"]],features:[t.qOj],decls:53,vars:41,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"col-md-12","col-lg-12"],[2,"width","100%"],[2,"padding-right","5px","width","auto"],[4,"ngIf"],["class","clickaction clickicons",3,"matTooltip","click",4,"ngIf"],["class","clickaction clickicons",3,"click",4,"ngIf"],[2,"padding-right","5px"],["style","width:80%",4,"ngIf"],["type","time","id","inTimeNew",3,"ngModel","ngModelOptions","ngModelChange"],["type","time","id","outTimeNew",3,"ngModel","ngModelOptions","ngModelChange"],["style","width:100%",4,"ngIf"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto_emp","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"value"],[1,"clickaction","clickicons",3,"matTooltip","click"],[1,"fas","fa-pencil-alt"],[1,"clickaction","clickicons",3,"click"],[1,"far","fa-times-circle"],[2,"width","80%"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],["align","center",2,"padding-bottom","10px"],["type","button",1,"btn","btn-dark",3,"click"],[1,"icon-close"],["align","center","style","padding-bottom:10px",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-light","btn-success",3,"click"],["type","button",1,"btn","waves-effect","btn-danger",3,"click"],["type","button",1,"btn","waves-effect","waves-light","btn-warning",3,"click"],["type","button",1,"btn","waves-effect","btn-warning",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","waves-effect","waves-light","btn-info",3,"click"],["type","button",1,"btn","waves-effect","waves-light","btn-dark",3,"click"],["align","center",2,"padding-bottom","10px","color","red"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"table",4),t.TgZ(8,"tr"),t.TgZ(9,"td",5),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"td"),t.YNc(13,iA,2,1,"span",6),t.YNc(14,nA,2,1,"span",6),t.qZA(),t.YNc(15,sA,14,18,"td",6),t.TgZ(16,"td"),t.YNc(17,rA,2,1,"span",7),t.YNc(18,lA,2,0,"span",8),t.qZA(),t.qZA(),t.TgZ(19,"tr"),t._UZ(20,"td"),t.TgZ(21,"td",9),t.YNc(22,cA,2,1,"span",6),t.YNc(23,pA,2,1,"span",6),t.qZA(),t.qZA(),t.TgZ(24,"tr"),t.TgZ(25,"td",9),t._uU(26),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.qZA(),t.qZA(),t.TgZ(31,"tr"),t.TgZ(32,"td"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.YNc(35,uA,2,1,"td",6),t.YNc(36,_A,7,10,"td",10),t.TgZ(37,"td"),t.YNc(38,mA,2,1,"span",7),t.qZA(),t.YNc(39,gA,2,1,"td",6),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td",9),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"td"),t.TgZ(45,"input",11),t.NdJ("ngModelChange",function(s){return o.shift.inTime=s}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"tr"),t.TgZ(47,"td",9),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"td"),t.TgZ(51,"input",12),t.NdJ("ngModelChange",function(s){return o.shift.outTime=s}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(52,wA,21,8,"table",13),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,25,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.hij(" ",t.lcZ(11,27,"Employee")," "),t.xp6(3),t.Q6J("ngIf",o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.editEmp),t.xp6(2),t.Q6J("ngIf",o.editEmp&&0==o.inputData.id),t.xp6(1),t.Q6J("ngIf",!o.editEmp),t.xp6(4),t.Q6J("ngIf",null==o.inputData?null:o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.inputData.isDefaultEmployee),t.xp6(3),t.AsE("",t.lcZ(27,29,"Attendance")," ",t.lcZ(28,31,"Date"),""),t.xp6(4),t.Oqu(null==o.inputData?null:o.inputData.attnDate.toString().substring(0,10)),t.xp6(3),t.hij(" ",t.lcZ(34,33,"Shift")," "),t.xp6(2),t.Q6J("ngIf",!(null!=o.inputData&&o.inputData.isDefShiftOff)),t.xp6(1),t.Q6J("ngIf",(null==o.inputData?null:o.inputData.isDefShiftOff)&&0==(null==o.inputData?null:o.inputData.id)&&o.inputData.isPrimarySite),t.xp6(2),t.Q6J("ngIf",!(0!=(null==o.inputData?null:o.inputData.id)||null!=o.inputData&&o.inputData.isOnLeave||null!=o.inputData&&o.inputData.isWithDrawn)),t.xp6(1),t.Q6J("ngIf",(null==o.inputData?null:o.inputData.isDefShiftOff)&&(null==o.inputData?null:o.inputData.id)>0),t.xp6(3),t.Oqu(t.lcZ(43,35,"IN_Time")),t.xp6(3),t.Q6J("ngModel",o.shift.inTime)("ngModelOptions",t.DdM(39,ye)),t.xp6(3),t.Oqu(t.lcZ(49,37,"OUT_Time")),t.xp6(3),t.Q6J("ngModel",o.shift.outTime)("ngModelOptions",t.DdM(40,ye)),t.xp6(1),t.Q6J("ngIf",o.inputData.isPrimarySite&&!(null!=o.inputData&&o.inputData.isPosted)))},directives:[l._Y,l.JL,l.sg,Z.O5,l.Fj,l.JJ,l.On,At.z,lt.ZL,l.oH,lt.XC,Z.sg,l.Wl,Ut.ey,ut.gM,l.EJ,l.YN,l.Kr],pipes:[f.X$,Z.Ov],encapsulation:2}),i})();function UA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.employee?null:e.employee.employeeNumber," ")}}function DA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.altEmployee?null:e.altEmployee.employeeNumber," ")}}function LA(i,a){if(1&i&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.text,"-",e.textTwo," ")}}const je=function(){return{standalone:!0}};function NA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"span"),t._UZ(2,"auto-loader",13),t._UZ(3,"input",14),t.ALo(4,"translate"),t.ALo(5,"translate"),t.TgZ(6,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().autoSelectionEmployeeNumber(n)}),t.YNc(8,LA,2,3,"mat-option",17),t.ALo(9,"async"),t.qZA(),t.qZA(),t.TgZ(10,"span"),t.TgZ(11,"input",18),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().canShowAllEmployees=n})("change",function(){return t.CHM(e),t.oxw().changeEmployeeFilter()}),t.qZA(),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(7),o=t.oxw();t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(4,9,"Enter")," ",t.lcZ(5,11,"Employee"),""),t.Q6J("formControl",o.empCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(9,13,o.filteredEmployeeNumbers)),t.xp6(3),t.Q6J("ngModel",o.canShowAllEmployees)("ngModelOptions",t.DdM(17,je)),t.xp6(1),t.hij(" ",t.lcZ(13,15,"Show_All_Employees")," ")}}function EA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().editEmployee()}),t._UZ(1,"i",21),t.qZA()}}function OA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().editEmployee()}),t._UZ(1,"i",22),t.qZA()}}function kA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.employee?null:e.employee.employeeName," ")}}function jA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.altEmployee?null:e.altEmployee.employeeName," ")}}function MA(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.shift?null:e.shift.shiftCode," ")}}function RA(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.inputData.altShiftCode," ")}}function PA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterAttendance()}),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(1),t.AsE("",t.lcZ(2,2,"Update")," ",t.lcZ(3,4,"Attendance"),""))}function FA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",23),t.TgZ(1,"td"),t.YNc(2,PA,4,6,"button",24),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelAttendance()}),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._UZ(10,"i",27),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.inputData.isAbsent),t.xp6(3),t.AsE("",t.lcZ(6,4,"Cancel")," ",t.lcZ(7,6,"Attendance"),""),t.xp6(6),t.hij(" ",t.lcZ(12,8,"Close")," ")}}function IA(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",29),t._uU(2,"Attendance Already Posted, You Can't Update"),t.qZA(),t.qZA())}let Me=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u){super(c),this.translate=e,this.notifyService=o,this.utilService=n,this.apiService=s,this.dialogRef=r,this.authService=c,this.fb=p,this.dialog=u,this.editEmp=!0,this.shift={shiftCode:""},this.altShift={shiftCode:""},this.listOfShiftCodes=[],this.editInTime=0,this.editOutTime=0,this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeesForProjectSite=[],this.employeeNumber="",this.isDataLoading=!1,this.canShowAllEmployees=!1,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,ot.O)(this.employeeNumber),(0,it.b)(n.autoDelay()),(0,nt.x)(),(0,at.w)(d=>(""!==d.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(d||""))))}ngOnInit(){console.log(this.inputData),""==this.inputData.altEmployeeNumber?(this.inputData.altEmployeeNumber=this.inputData.employeeNumber,this.inputData.isDefaultEmployee=!0):this.inputData.isDefaultEmployee=!1,this.loadShiftCodes(),this.getEmployee(this.inputData.employeeNumber),""!=this.inputData.altEmployeeNumber&&this.getAltEmployee(this.inputData.altEmployeeNumber),this.getShift(this.inputData.shiftCode),""!=this.inputData.altShiftCode&&this.getAltShift(this.inputData.altShiftCode),this.setForm()}setForm(){this.form=this.fb.group({})}closeModel(){this.dialogRef.close()}submit(){}editEmployee(){this.editEmp=!this.editEmp}getEmployee(e){this.apiService.get("Employee/getEmployeeByEmployeeNumber/",e).subscribe(o=>{o&&(this.employee=o)})}getAltEmployee(e){this.apiService.get("Employee/getEmployeeByEmployeeNumber/",e).subscribe(o=>{o&&(this.altEmployee=o)})}getShift(e){""!=e&&this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e).subscribe(o=>{o&&(this.shift=o,this.inputData.id>0&&(this.shift.inTime=this.inputData.inTime.toString().substring(0,5),this.shift.outTime=this.inputData.outTime.toString().substring(0,5)))})}getAltShift(e){""!=e&&this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e).subscribe(o=>{o&&(this.altShift=o,this.altShift.isOff&&(this.altShift.shiftCode=""))})}changeTime(e,o){let n=Number(this.shift.inTime.split(":")[0]),s=Number(this.shift.outTime.split(":")[0]),r=Number(this.shift.inTime.split(":")[1]),c=Number(this.shift.outTime.split(":")[1]);"intime"==e?this.shift.inTime=this.minsToTimeString(60*n+this.editInTime+r):this.shift.outTime=this.minsToTimeString(60*s+c+this.editOutTime),this.editOutTime=0,this.editInTime=0}minsToTimeString(e){let o=e>0?Math.floor(e/60)%24:Math.floor((e+1440)/60)%24,n=e>0?Math.floor(e%60):e+60;return n>=60&&(o++,n-=60),this.padLeft(o.toString(),"0",2)+":"+this.padLeft(n.toString(),"0",2)}padLeft(e,o,n){return(String(o).repeat(n)+e).substr(-1*n,n)}onSelectShift(e){this.getAltShift(e.target.value),this.getShift(e.target.value)}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.inputData.projectCode}/${this.inputData.siteCode}`).subscribe(e=>{this.listOfShiftCodes=e})}enterAttendance(){if(this.inputData.altShiftCode=this.inputData.isDefShiftOff?this.altShift.shiftCode:"",this.inputData.isDefShiftOff||this.inputData.isDefaultEmployee?this.inputData.isDefShiftOff?(this.inputData.attendance="P",this.inputData.altEmployeeNumber=this.altEmployee.employeeNumber):this.inputData.altEmployeeNumber="":(this.inputData.attendance="A",this.inputData.altEmployeeNumber=this.altEmployee.employeeNumber),(this.inputData.altEmployeeNumber==this.inputData.employeeNumber||""==this.inputData.altEmployeeNumber)&&(this.inputData.isDefaultEmployee=!0),this.inputData.inTime=this.shift.inTime,this.inputData.outTime=this.shift.outTime,this.inputData.isDefShiftOff&&""!=this.inputData.altShiftCode||!this.inputData.isDefShiftOff&&this.inputData.altShiftCode!=this.inputData.shiftCode){let e=Number(this.inputData.inTime.substr(0,2)),o=Number(this.inputData.inTime.substr(3,2)),c=60*Number(this.inputData.outTime.substr(0,2))+Number(this.inputData.outTime.substr(3,2))-60*e-o;c<0&&(c+=1440),this.inputData.nwTime.totalMinutes+60*this.inputData.daywiseConsolidateData.tch+this.inputData.daywiseConsolidateData.tch_min-this.inputData.daywiseConsolidateData.mins-60*this.inputData.daywiseConsolidateData.hours<c?this.notifyService.showError(this.translate.instant("Daily_Shift_Hours_Exceeding")):this.apiService.post("EmployeesAttendance/enterEmployeeAttendance",this.inputData).subscribe(p=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData})},p=>{console.error(p),this.utilService.ShowApiErrorMessage(p)})}else this.notifyService.showError(this.translate.instant("Please")+" "+this.translate.instant("Select")+" "+this.translate.instant("Shift_Code"))}filterEmployeeNumbers(e){return this.canShowAllEmployees?this.apiService.getall(`Employee/getAutoSelectEmployeeList/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n})):this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.inputData.projectCode}/${this.inputData.siteCode}/?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}autoSelectionEmployeeNumber(e){this.inputData.employeeNumber!=e.option.value.text?(this.altEmployee.employeeNumber=e.option.value.text,this.altEmployee.employeeID=e.option.value.value,this.altEmployee.employeeName=e.option.value.textTwo,this.inputData.isDefaultEmployee=!1):(this.altEmployee.employeeNumber="",this.altEmployee.employeeName="",this.inputData.isDefaultEmployee=!0),this.empCodeControl.setValue(""),this.editEmp=!0}cancelAttendance(){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(o=>{o&&this.inputData.id>0&&this.apiService.get("EmployeesAttendance/CancelAttendance",this.inputData.id).subscribe(n=>{0==n.id?this.notifyService.showError(this.translate.instant("something went wrong")):-1==n.id?this.notifyService.showError(this.translate.instant("Attendance_Already_Posted")):-100==n.id?(this.inputData.primaryEmployee=n,this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,isRoasterRemoved:!0}),this.utilService.OkMessage()):-101==n.id?(this.inputData.primaryEmployee=n,this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,r:this.inputCellData.r,c:this.inputCellData.c,isNotPrimaryAtt:!0}),this.utilService.OkMessage()):(this.inputData.primaryEmployee=n,this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData}),this.utilService.OkMessage())})})}changeEmployeeFilter(){this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,ot.O)(this.employeeNumber),(0,it.b)(this.utilService.autoDelay()),(0,nt.x)(),(0,at.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(e||""))))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.sK),t.Y36(w.g),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so),t.Y36(v._),t.Y36(l.qu),t.Y36(T.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-update-manual-attendance-popup"]],features:[t.qOj],decls:53,vars:40,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"col-md-12","col-lg-12"],[2,"width","100%"],[2,"padding-right","5px","width","auto"],[4,"ngIf"],["class","clickaction clickicons",3,"click",4,"ngIf"],[2,"padding-right","5px"],["type","time","id","inTimeNew",3,"ngModel","ngModelOptions","ngModelChange"],["type","time","id","outTimeNew",3,"ngModel","ngModelOptions","ngModelChange"],[2,"padding-top","10px"],["style","text-align:center",4,"ngIf"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto_emp","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"value"],[1,"clickaction","clickicons",3,"click"],[1,"fas","fa-pencil-alt"],[1,"far","fa-times-circle"],[2,"text-align","center"],["type","button","class","btn waves-effect waves-light btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"icon-close"],["type","button",1,"btn","waves-effect","waves-light","btn-success",3,"click"],["width","100%",2,"color","red","text-align","center"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"table",4),t.TgZ(8,"tr"),t.TgZ(9,"td",5),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"td"),t.YNc(13,UA,2,1,"span",6),t.YNc(14,DA,2,1,"span",6),t.qZA(),t.YNc(15,NA,14,18,"td",6),t.TgZ(16,"td"),t.YNc(17,EA,2,0,"span",7),t.YNc(18,OA,2,0,"span",7),t.qZA(),t.qZA(),t.TgZ(19,"tr"),t._UZ(20,"td"),t.TgZ(21,"td",8),t.YNc(22,kA,2,1,"span",6),t.YNc(23,jA,2,1,"span",6),t.qZA(),t.qZA(),t.TgZ(24,"tr"),t.TgZ(25,"td",8),t._uU(26),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.qZA(),t.qZA(),t.TgZ(31,"tr"),t.TgZ(32,"td"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.YNc(35,MA,2,1,"td",6),t.YNc(36,RA,2,1,"td",6),t.qZA(),t.TgZ(37,"tr"),t.TgZ(38,"td",8),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"td"),t.TgZ(42,"input",9),t.NdJ("ngModelChange",function(s){return o.shift.inTime=s}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"tr"),t.TgZ(44,"td",8),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"td"),t.TgZ(48,"input",10),t.NdJ("ngModelChange",function(s){return o.shift.outTime=s}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",11),t.TgZ(50,"table",4),t.YNc(51,FA,13,10,"tr",12),t.YNc(52,IA,3,0,"tr",6),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,24,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.hij(" ",t.lcZ(11,26,"Employee")," "),t.xp6(3),t.Q6J("ngIf",o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.editEmp),t.xp6(2),t.Q6J("ngIf",o.editEmp&&o.inputData.isPrimarySite),t.xp6(1),t.Q6J("ngIf",!o.editEmp),t.xp6(4),t.Q6J("ngIf",o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.inputData.isDefaultEmployee),t.xp6(3),t.AsE("",t.lcZ(27,28,"Attendance")," ",t.lcZ(28,30,"Date"),""),t.xp6(4),t.Oqu(null==o.inputData?null:o.inputData.attnDate.toString().substring(0,10)),t.xp6(3),t.hij(" ",t.lcZ(34,32,"Shift")," "),t.xp6(2),t.Q6J("ngIf",!(null!=o.inputData&&o.inputData.isDefShiftOff)),t.xp6(1),t.Q6J("ngIf",null==o.inputData?null:o.inputData.isDefShiftOff),t.xp6(3),t.Oqu(t.lcZ(40,34,"IN_Time")),t.xp6(3),t.Q6J("ngModel",o.shift.inTime)("ngModelOptions",t.DdM(38,je)),t.xp6(3),t.Oqu(t.lcZ(46,36,"OUT_Time")),t.xp6(3),t.Q6J("ngModel",o.shift.outTime)("ngModelOptions",t.DdM(39,je)),t.xp6(3),t.Q6J("ngIf",!o.inputData.isPosted),t.xp6(1),t.Q6J("ngIf",o.inputData.isPosted))},directives:[l._Y,l.JL,l.sg,Z.O5,l.Fj,l.JJ,l.On,At.z,lt.ZL,l.oH,lt.XC,Z.sg,l.Wl,Ut.ey],pipes:[f.X$,Z.Ov],encapsulation:2}),i})(),Re=(()=>{class i extends y{constructor(e,o,n,s,r,c,p){super(r),this.apiService=e,this.notifyService=o,this.utilService=n,this.translate=s,this.authService=r,this.fb=c,this.dialogRef=p,this.curDate=Date.now,this.isLoading=!1}ngOnInit(){console.log(this.inputAttendanceData),this.setForm()}setForm(){this.form=this.fb.group({date:["",l.kI.required]})}submit(){}closeModel(){this.dialogRef.close()}postAttendance(){if(!this.isLoading&&this.form.valid){this.isLoading=!0;let e=new Date(this.form.controls.date.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.apiService.post("PostingMonthlyAttendance/postEmployeeAttendanceWithDate",{projectCode:this.projectCode,siteCode:this.siteCode,todate:e,fromdate:this.minPostDate}).subscribe(n=>{this.utilService.OkMessage(),this.isLoading=!1,this.dialogRef.close(!0)},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n),this.isLoading=!1})}else this.notifyService.showWarning(this.form.valid?this.translate.instant("Please_wait")+"...":this.translate.instant("Enter_Date")+"...")}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.s),t.Y36(w.g),t.Y36(b.t),t.Y36(f.sK),t.Y36(v._),t.Y36(l.qu),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-postattendancewithdate"]],features:[t.qOj],decls:34,vars:23,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-auto",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"col-md-12","col-lg-12"],[1,"row"],[1,"col-md-5","col-lg-5"],[1,"form-group"],[1,"input-group","mb-2"],[1,"mr-sm-2"],["formControlName","date",1,"form-control","datapickerinput",3,"matDatepicker","min","max","placeholder","click"],["matSuffix","",3,"for"],["data-date-format","yyyy/mm/dd"],["picker1",""],[3,"control"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",9),t.TgZ(13,"label",10),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._uU(16,"\xa0 "),t.TgZ(17,"input",11),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(21);return o.openDatePicker(r)}),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"mat-datepicker-toggle",12),t._UZ(20,"mat-datepicker",13,14),t.qZA(),t._UZ(22,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(23,"div",7),t.TgZ(24,"div",8),t.TgZ(25,"div",9),t.TgZ(26,"input",16),t.NdJ("click",function(){return o.postAttendance()}),t.ALo(27,"translate"),t.qZA(),t._uU(28," \xa0 "),t.TgZ(29,"input",16),t.NdJ("click",function(){return o.closeModel()}),t.ALo(30,"translate"),t.qZA(),t._uU(31," \xa0 "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",17),t._UZ(33,"spinner-loader",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(21);t.xp6(1),t.Oqu(t.lcZ(2,13,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(9),t.Oqu(t.lcZ(15,15,"To_Date")),t.xp6(3),t.hYB("placeholder","",t.lcZ(18,17,"Select")," ","To_Date",""),t.Q6J("matDatepicker",n)("min",o.minPostDate)("max",o.maxPostDate),t.xp6(2),t.Q6J("for",n),t.xp6(3),t.Q6J("control",o.form.controls.date),t.xp6(4),t.s9C("value",t.lcZ(27,19,"Post")),t.xp6(3),t.s9C("value",t.lcZ(30,21,"Cancel")),t.xp6(4),t.Q6J("isLoading",o.isLoading)}},directives:[l._Y,l.JL,l.sg,l.Fj,j.hl,l.JJ,l.u,j.nW,ft.R9,j.Mq,V.s,Zt.r],pipes:[f.X$],encapsulation:2}),i})();const ao=function(){return{standalone:!0}};let Pe=(()=>{class i extends y{constructor(e,o,n,s,r,c,p){super(r),this.apiService=e,this.notifyService=o,this.utilService=n,this.translate=s,this.authService=r,this.fb=c,this.dialogRef=p,this.curDate=Date.now,this.isLoading=!1,this.clearAttnFor="selectedDay"}ngOnInit(){console.log(this.clearAttnFor),this.setForm()}setForm(){this.form=this.fb.group({date:["",l.kI.required]})}submit(){}closeModel(){this.dialogRef.close()}claerAttendance(){if(!this.isLoading&&this.form.valid){this.isLoading=!0;let e=new Date(this.form.controls.date.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.apiService.post("EmployeesAttendance/clearMonthlyAttendanceWithDate",{projectCode:this.projectCode,siteCode:this.siteCode,fromdate:e,todate:"selectedDay"==this.clearAttnFor?e:this.maxDate}).subscribe(n=>{this.utilService.OkMessage(),this.isLoading=!1,this.dialogRef.close(!0)},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n),this.isLoading=!1})}else this.notifyService.showWarning(this.form.valid?this.translate.instant("Please_wait")+"...":this.translate.instant("Enter_Date")+"...")}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.s),t.Y36(w.g),t.Y36(b.t),t.Y36(f.sK),t.Y36(v._),t.Y36(l.qu),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-clearattendancewithdate"]],features:[t.qOj],decls:36,vars:28,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-auto",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row"],[1,"col-md-3","col-lg-3"],[1,"form-group"],[1,"input-group","mb-2"],["formControlName","date",1,"form-control","datapickerinput",3,"matDatepicker","min","max","placeholder","click"],["matSuffix","",3,"for"],["data-date-format","yyyy/mm/dd"],["picker1",""],[3,"control"],[1,"col-md-6","col-lg-6"],[1,"col-md-12","col-lg-12"],["type","radio","name","clearAttnFor",3,"value","ngModel","ngModelOptions","ngModelChange"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],[1,"col-md-1","col-lg-1","text-center"],[3,"isLoading"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"input",9),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(16);return o.openDatePicker(r)}),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"mat-datepicker-toggle",10),t._UZ(15,"mat-datepicker",11,12),t.qZA(),t._UZ(17,"validation-message",13),t.qZA(),t.qZA(),t.TgZ(18,"div",14),t.TgZ(19,"div",15),t.TgZ(20,"input",16),t.NdJ("ngModelChange",function(r){return o.clearAttnFor=r}),t.qZA(),t._uU(21,"\xa0 For Only Selected Day\xa0 "),t.qZA(),t.TgZ(22,"div",15),t.TgZ(23,"input",16),t.NdJ("ngModelChange",function(r){return o.clearAttnFor=r}),t.qZA(),t._uU(24,"\xa0Clear The Attendance Till End Of Pay Roll Date "),t.qZA(),t.qZA(),t.TgZ(25,"div",6),t.TgZ(26,"div",7),t.TgZ(27,"div",8),t.TgZ(28,"input",17),t.NdJ("click",function(){return o.claerAttendance()}),t.ALo(29,"translate"),t.qZA(),t._uU(30," \xa0 "),t.TgZ(31,"input",17),t.NdJ("click",function(){return o.closeModel()}),t.ALo(32,"translate"),t.qZA(),t._uU(33," \xa0 "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",18),t._UZ(35,"spinner-loader",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(16);t.xp6(1),t.Oqu(t.lcZ(2,18,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(7),t.hYB("placeholder","",t.lcZ(13,20,"Select")," ","From_Date",""),t.Q6J("matDatepicker",n)("min",o.minDate)("max",o.maxDate),t.xp6(2),t.Q6J("for",n),t.xp6(3),t.Q6J("control",o.form.controls.date),t.xp6(3),t.Q6J("value","selectedDay")("ngModel",o.clearAttnFor)("ngModelOptions",t.DdM(26,ao)),t.xp6(3),t.Q6J("value","tillDate")("ngModel",o.clearAttnFor)("ngModelOptions",t.DdM(27,ao)),t.xp6(5),t.s9C("value",t.lcZ(29,22,"Clear")),t.xp6(3),t.s9C("value",t.lcZ(32,24,"Cancel")),t.xp6(4),t.Q6J("isLoading",o.isLoading)}},directives:[l._Y,l.JL,l.sg,l.Fj,j.hl,l.JJ,l.u,j.nW,ft.R9,j.Mq,V.s,l._,l.On,Zt.r],pipes:[f.X$],encapsulation:2}),i})();function YA(i,a){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"(",o.isArab?e.siteArbName:e.siteName,")")}}function JA(i,a){if(1&i&&(t.TgZ(0,"span"),t._UZ(1,"auto-loader",37),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("isLoading",e.isLoading)}}function QA(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",34),t._uU(2),t.qZA(),t.TgZ(3,"td",34),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.TgZ(9,"td",34),t._uU(10),t.qZA(),t.TgZ(11,"td",34),t._uU(12),t.qZA(),t.TgZ(13,"td",34),t._uU(14),t.qZA(),t.TgZ(15,"td",34),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",n.isArab?n.getSkillset(e.skillsetCode).textTwo:n.getSkillset(e.skillsetCode).text," "),t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",e.qty*n.workingHoursInSite," "),t.xp6(2),t.hij(" ",(e.contractualShifts+e.offs)*n.workingHoursInSite," "),t.xp6(2),t.hij(" ",e.contractualShifts+e.offs," "),t.xp6(2),t.hij(" ",e.contractualShifts," "),t.xp6(2),t.hij(" ",e.offs," ")}}function BA(i,a){if(1&i&&(t.TgZ(0,"div",31),t.YNc(1,JA,2,1,"span",28),t.TgZ(2,"table",32),t.TgZ(3,"tr"),t.TgZ(4,"td",33),t._uU(5),t._UZ(6,"br"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"tr"),t.TgZ(9,"th",34),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",34),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",34),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",34),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",34),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th",34),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th",34),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th",34),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.YNc(33,QA,17,8,"tr",35),t.TgZ(34,"tr"),t.TgZ(35,"td",36),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"td",34),t._uU(39),t.qZA(),t.TgZ(40,"td",34),t._uU(41),t.qZA(),t.TgZ(42,"td",34),t._uU(43),t.qZA(),t.TgZ(44,"td",34),t._uU(45),t.qZA(),t.TgZ(46,"td",34),t._uU(47),t.qZA(),t.TgZ(48,"td",34),t._uU(49),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",0!=e.roasterReport.length),t.xp6(4),t.hij(" ",e.isArab?e.project.projectNameArb:e.project.projectNameEng," "),t.xp6(2),t.hij(" ",e.isArab?null==(o=e.getSiteData(e.siteCode))?null:o.siteArbName:null==(o=e.getSiteData(e.siteCode))?null:o.siteName," "),t.xp6(3),t.hij(" ",t.lcZ(11,19,"S.N")," "),t.xp6(3),t.hij(" ",t.lcZ(14,21,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(17,23,"Qty_Of_Manpower")," "),t.xp6(3),t.hij(" ",t.lcZ(20,25,"Daily_Hrs")," "),t.xp6(3),t.hij(" ",t.lcZ(23,27,"Monthly_Hrs")," "),t.xp6(3),t.hij(" ",t.lcZ(26,29,"Monthly_Shifts_Schedulled")," "),t.xp6(3),t.hij(" ",t.lcZ(29,31,"Monthly_Shifts_Assigned")," "),t.xp6(3),t.hij(" ",t.lcZ(32,33,"Offs")," "),t.xp6(2),t.Q6J("ngForOf",e.roasterReport),t.xp6(3),t.hij(" ",t.lcZ(37,35,"Total")," "),t.xp6(3),t.hij(" ",null==e.totRoastersReport?null:e.totRoastersReport.qty," "),t.xp6(2),t.hij(" ",(null==e.totRoastersReport?null:e.totRoastersReport.qty)*e.workingHoursInSite," "),t.xp6(2),t.hij(" ",((null==e.totRoastersReport?null:e.totRoastersReport.contractualShifts)+(null==e.totRoastersReport?null:e.totRoastersReport.offs))*e.workingHoursInSite," "),t.xp6(2),t.hij(" ",e.totRoastersReport.contractualShifts+e.totRoastersReport.offs," "),t.xp6(2),t.hij(" ",e.totRoastersReport.contractualShifts," "),t.xp6(2),t.hij(" ",e.totRoastersReport.offs," ")}}function HA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).confirmAutoAttendancePerDay(n)}),t._UZ(1,"i",66),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Auto_Attendance"))}}function $A(i,a){if(1&i&&(t.TgZ(0,"td",63),t.YNc(1,HA,2,1,"span",64),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e==o.activeColumn)}}function VA(i,a){if(1&i&&(t.TgZ(0,"th",67),t._uU(1),t.qZA()),2&i){const e=a.index;t.xp6(1),t.Oqu(e+1)}}function GA(i,a){if(1&i&&(t.TgZ(0,"th",67),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.dayText," ")}}function WA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);let n;t.xp6(1),t.hij(" ",o.isArab?null==(n=o.getDefShiftTypeName(e))?null:n.nameAr:null==(n=o.getDefShiftTypeName(e))?null:n.nameEn," ")}}function zA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,WA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function XA(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",71),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw().index;return t.oxw(2).manualAttendance(r,s)})("contextmenu",function(){const s=t.CHM(e).index,r=t.oxw().index;return t.oxw(2).onRightClick(r,s)}),t._uU(1),t.qZA()}if(2&i){const e=a.index,o=t.oxw().index,n=t.oxw(2);t.s9C("id",n.getCellBackGroud(o,e)),t.xp6(1),t.hij(" ",n.getAttendanceCellData(o,e)," ")}}function KA(i,a){if(1&i&&(t.TgZ(0,"span"),t.TgZ(1,"span",72),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(2),t.hij(" ",o.showTime(o.EmployeeWiseShiftCount(e).total,null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].totMins),""),t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].nwd," ")}}function tC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,KA,4,2,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function eC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",(null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].nwd)*o.workingHoursInSite," ")}}function oC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,eC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function iC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].off," ")}}function nC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,iC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function aC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].al_count," ")}}function sC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,aC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function rC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].el_count," ")}}function lC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,rC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function cC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].ul_count," ")}}function pC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,cC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function uC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].sl_count," ")}}function dC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,uC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function _C(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].stl_count," ")}}function mC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,_C,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function gC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].a," ")}}function hC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,gC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function ZC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].w_count," ")}}function fC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,ZC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function AC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].penalty," ")}}function CC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,AC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function TC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",o.showTime(null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].lateHrs,null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].lateMins)," ")}}function vC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,TC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function xC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",o.showTime(null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].overTime,null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].overTimeMins)," ")}}function qC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,xC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function bC(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",68),t._uU(2),t.qZA(),t.TgZ(3,"td",68),t._uU(4),t.qZA(),t.TgZ(5,"td",68),t._uU(6),t.qZA(),t.TgZ(7,"td",69),t.YNc(8,zA,2,1,"span",28),t.qZA(),t.YNc(9,XA,2,2,"td",70),t.TgZ(10,"td",57),t.YNc(11,tC,2,1,"span",28),t.qZA(),t.TgZ(12,"td",57),t.YNc(13,oC,2,1,"span",28),t.qZA(),t.TgZ(14,"td",57),t.YNc(15,nC,2,1,"span",28),t.qZA(),t.TgZ(16,"td",57),t.YNc(17,sC,2,1,"span",28),t.qZA(),t.TgZ(18,"td",57),t.YNc(19,lC,2,1,"span",28),t.qZA(),t.TgZ(20,"td",57),t.YNc(21,pC,2,1,"span",28),t.qZA(),t.TgZ(22,"td",57),t.YNc(23,dC,2,1,"span",28),t.qZA(),t.TgZ(24,"td",57),t.YNc(25,mC,2,1,"span",28),t.qZA(),t.TgZ(26,"td",57),t.YNc(27,hC,2,1,"span",28),t.qZA(),t.TgZ(28,"td",57),t.YNc(29,fC,2,1,"span",28),t.qZA(),t.TgZ(30,"td",57),t.YNc(31,CC,2,1,"span",28),t.qZA(),t.TgZ(32,"td",57),t.YNc(33,vC,2,1,"span",28),t.qZA(),t.TgZ(34,"td",57),t.YNc(35,qC,2,1,"span",28),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);let s,r;t.xp6(2),t.hij(" ",e.employeeNumber," "),t.xp6(2),t.hij(" ",n.isArab?null==(s=n.getEmployee(e.employeeNumber))?null:s.textTwo:null==(s=n.getEmployee(e.employeeNumber))?null:s.text," "),t.xp6(2),t.hij(" ",n.isArab?n.getSkillset(e.skillsetCode).textTwo:null==(r=n.getSkillset(e.skillsetCode))?null:r.text," "),t.xp6(1),t.s9C("id",n.getDefShiftBackGround(o)),t.xp6(1),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(1),t.Q6J("ngForOf",n.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length)}}function yC(i,a){1&i&&t._UZ(0,"td",73)}function SC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.nwd," ")}}function wC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,SC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function UC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",(null==(o=e.Totals())?null:o.nwd)*e.workingHoursInSite," ")}}function DC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,UC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function LC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.offs," ")}}function NC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,LC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function EC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.al_count," ")}}function OC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,EC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function kC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.el_count," ")}}function jC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,kC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function MC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.ul_count," ")}}function RC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,MC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function PC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.sl_count," ")}}function FC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,PC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function IC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.stl_count," ")}}function YC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,IC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function JC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.a," ")}}function QC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,JC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function BC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.w_count," ")}}function HC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,BC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function $C(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.penalty," ")}}function VC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,$C,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function GC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.lateHrs,null==(o=e.Totals())?null:o.lateMins)," ")}}function WC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,GC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function zC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.overTime,null==(o=e.Totals())?null:o.overTimeMins)," ")}}function XC(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,zC,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function KC(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.hij(" ",o.DayWiseShiftCount(e).tch," ")}}function tT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",(null==(o=e.Totals())?null:o.contractualShifts)*e.workingHoursInSite," ")}}function eT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,tT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function oT(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.daywiseConsolidateData[e]?null:o.daywiseConsolidateData[e].tcs," ")}}function iT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.contractualShifts," ")}}function nT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,iT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function aT(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);let n;t.xp6(1),t.hij(" ",o.showTime(null==(n=o.DayWiseShiftCount(e))?null:n.hours,null==(n=o.DayWiseShiftCount(e))?null:n.mins)," ")}}function sT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.total,null==(o=e.Totals())?null:o.totMins)," ")}}function rT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,sT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function lT(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.daywiseConsolidateData[e]?null:o.daywiseConsolidateData[e].taws," ")}}function cT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.actualShifts," ")}}function pT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,cT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function uT(i,a){if(1&i&&(t.TgZ(0,"td",62),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.daywiseConsolidateData[e]?null:o.daywiseConsolidateData[e].varInShift," ")}}function dT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.varInShifts," ")}}function _T(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,dT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function mT(i,a){if(1&i&&(t.TgZ(0,"div",31),t.TgZ(1,"table",38),t.TgZ(2,"tr"),t._UZ(3,"td",39),t.YNc(4,$A,2,1,"td",40),t.qZA(),t.TgZ(5,"tr"),t.TgZ(6,"th",41),t._uU(7),t.qZA(),t.YNc(8,VA,2,1,"th",42),t.TgZ(9,"th",43),t._uU(10," \u0639\u062f\u062f \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(11,"th",44),t._uU(12," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(13,"th",43),t._uU(14," \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0637\u0644\u0629 \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064a\u0629 "),t.qZA(),t.TgZ(15,"th",43),t._uU(16," \u0627\u062c\u0627\u0632\u0629 \u0633\u0646\u0648\u064a\u0629 "),t.qZA(),t.TgZ(17,"th",43),t._uU(18," \u0625\u062c\u0627\u0632\u0629 \u062e\u0627\u0635\u0629/\u0637\u0627\u0631\u0626\u0629 "),t.qZA(),t.TgZ(19,"th",43),t._uU(20," \u0627\u062c\u0627\u0632\u0629 \u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0647 "),t.qZA(),t.TgZ(21,"th",43),t._uU(22," \u0627\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629 "),t.qZA(),t.TgZ(23,"th",43),t._uU(24," \u0625\u062c\u0627\u0632\u0629 \u0627\u062e\u062a\u0628\u0627\u0631\u0627\u062a "),t.qZA(),t.TgZ(25,"th",43),t._uU(26," \u063a\u064a\u0627\u0628 "),t.qZA(),t.TgZ(27,"th",43),t._uU(28," \u0627\u0646\u0633\u062d\u0627\u0628 "),t.qZA(),t.TgZ(29,"th",45),t._uU(30," \u062c\u0632\u0627\u0621\u0627\u062a "),t.qZA(),t.TgZ(31,"th",45),t._uU(32," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u062a\u0627\u062e\u064a\u0631 "),t.qZA(),t.TgZ(33,"th",46),t._uU(34," \u0648\u0642\u062a \u0627\u0636\u0627\u0641\u0649 "),t.qZA(),t.qZA(),t.TgZ(35,"tr"),t.TgZ(36,"th",47),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th",47),t._uU(40),t.ALo(41,"translate"),t.ALo(42,"translate"),t.qZA(),t.YNc(43,GA,2,1,"th",42),t.TgZ(44,"th",43),t._uU(45," W D C "),t.qZA(),t.TgZ(46,"th",43),t._uU(47," Nor. Hrs "),t.qZA(),t.TgZ(48,"th",43),t._uU(49," OF "),t.qZA(),t.TgZ(50,"th",43),t._uU(51," AL "),t.qZA(),t.TgZ(52,"th",43),t._uU(53," EL "),t.qZA(),t.TgZ(54,"th",43),t._uU(55," UL "),t.qZA(),t.TgZ(56,"th",43),t._uU(57," SL "),t.qZA(),t.TgZ(58,"th",43),t._uU(59," STL "),t.qZA(),t.TgZ(60,"th",43),t._uU(61," A "),t.qZA(),t.TgZ(62,"th",43),t._uU(63," W "),t.qZA(),t.TgZ(64,"th",45),t._uU(65," Penalty "),t.qZA(),t.TgZ(66,"th",45),t._uU(67," Late Hours "),t.qZA(),t.TgZ(68,"th",46),t._uU(69," OT "),t.qZA(),t.qZA(),t.TgZ(70,"tbody",48),t.YNc(71,bC,36,19,"tr",35),t.TgZ(72,"tr"),t.TgZ(73,"td",49),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.YNc(76,yC,1,0,"td",50),t.TgZ(77,"td",51),t.YNc(78,wC,2,1,"span",28),t.qZA(),t.TgZ(79,"td",51),t.YNc(80,DC,2,1,"span",28),t.qZA(),t.TgZ(81,"td",51),t.YNc(82,NC,2,1,"span",28),t.qZA(),t.TgZ(83,"td",51),t.YNc(84,OC,2,1,"span",28),t.qZA(),t.TgZ(85,"td",51),t.YNc(86,jC,2,1,"span",28),t.qZA(),t.TgZ(87,"td",51),t.YNc(88,RC,2,1,"span",28),t.qZA(),t.TgZ(89,"td",51),t.YNc(90,FC,2,1,"span",28),t.qZA(),t.TgZ(91,"td",51),t.YNc(92,YC,2,1,"span",28),t.qZA(),t.TgZ(93,"td",51),t.YNc(94,QC,2,1,"span",28),t.qZA(),t.TgZ(95,"td",51),t.YNc(96,HC,2,1,"span",28),t.qZA(),t.TgZ(97,"td",51),t.YNc(98,VC,2,1,"span",28),t.qZA(),t.TgZ(99,"td",51),t.YNc(100,WC,2,1,"span",28),t.qZA(),t.TgZ(101,"td",51),t.YNc(102,XC,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(103,"tr"),t.TgZ(104,"td",52),t._uU(105),t.ALo(106,"translate"),t.qZA(),t.YNc(107,KC,2,1,"td",53),t.TgZ(108,"td",54),t.YNc(109,eT,2,1,"span",28),t.qZA(),t._UZ(110,"td",55),t._UZ(111,"td",55),t._UZ(112,"td",55),t._UZ(113,"td",55),t._UZ(114,"td",55),t._UZ(115,"td",55),t._UZ(116,"td",55),t._UZ(117,"td",55),t._UZ(118,"td",55),t._UZ(119,"td",55),t._UZ(120,"td",55),t._UZ(121,"td",55),t.qZA(),t.TgZ(122,"tr"),t.TgZ(123,"td",49),t._uU(124),t.ALo(125,"translate"),t.qZA(),t.YNc(126,oT,2,1,"td",56),t.TgZ(127,"td",57),t.YNc(128,nT,2,1,"span",28),t.qZA(),t._UZ(129,"td",55),t._UZ(130,"td",55),t._UZ(131,"td",55),t._UZ(132,"td",55),t._UZ(133,"td",55),t._UZ(134,"td",55),t._UZ(135,"td",55),t._UZ(136,"td",55),t._UZ(137,"td",55),t._UZ(138,"td",55),t._UZ(139,"td",55),t._UZ(140,"td",55),t.qZA(),t.TgZ(141,"tr"),t.TgZ(142,"td",58),t._uU(143),t.ALo(144,"translate"),t.qZA(),t.YNc(145,aT,2,1,"td",59),t.TgZ(146,"td",54),t.YNc(147,rT,2,1,"span",28),t.qZA(),t._UZ(148,"td",55),t._UZ(149,"td",55),t._UZ(150,"td",55),t._UZ(151,"td",55),t._UZ(152,"td",55),t._UZ(153,"td",55),t._UZ(154,"td",55),t._UZ(155,"td",55),t._UZ(156,"td",55),t._UZ(157,"td",55),t._UZ(158,"td",55),t._UZ(159,"td",55),t.qZA(),t.TgZ(160,"tr"),t.TgZ(161,"td",49),t._uU(162),t.ALo(163,"translate"),t.qZA(),t.YNc(164,lT,2,1,"td",56),t.TgZ(165,"td",57),t.YNc(166,pT,2,1,"span",28),t.qZA(),t._UZ(167,"td",55),t._UZ(168,"td",55),t._UZ(169,"td",55),t._UZ(170,"td",55),t._UZ(171,"td",55),t._UZ(172,"td",55),t._UZ(173,"td",55),t._UZ(174,"td",55),t._UZ(175,"td",55),t._UZ(176,"td",55),t._UZ(177,"td",55),t._UZ(178,"td",55),t.qZA(),t.TgZ(179,"tr"),t.TgZ(180,"td",60),t._uU(181),t.ALo(182,"translate"),t.qZA(),t.YNc(183,uT,2,1,"td",61),t.TgZ(184,"td",62),t.YNc(185,_T,2,1,"span",28),t.qZA(),t._UZ(186,"td",55),t._UZ(187,"td",55),t._UZ(188,"td",55),t._UZ(189,"td",55),t._UZ(190,"td",55),t._UZ(191,"td",55),t._UZ(192,"td",55),t._UZ(193,"td",55),t._UZ(194,"td",55),t._UZ(195,"td",55),t._UZ(196,"td",55),t._UZ(197,"td",55),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.listOfDays),t.xp6(3),t.hij(" ",e.selectedMonth,""),t.xp6(1),t.Q6J("ngForOf",e.listOfDays),t.xp6(29),t.hij(" ",t.lcZ(38,38,"Employee")," "),t.xp6(3),t.AsE(" ",t.lcZ(41,40,"Position")," & ",t.lcZ(42,42,"Default_Shift")," "),t.xp6(3),t.Q6J("ngForOf",e.listOfDays),t.xp6(28),t.Q6J("ngForOf",e.listOfRoasters),t.xp6(3),t.hij(" ",t.lcZ(75,44,"Total")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.hij(" ",t.lcZ(106,46,"Total_Contracted_Hours")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(15),t.hij(" ",t.lcZ(125,48,"Total_Contracted_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(15),t.hij(" ",t.lcZ(144,50,"Actual_Hours")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(15),t.hij(" ",t.lcZ(163,52,"Actual_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length),t.xp6(15),t.hij(" ",t.lcZ(182,54,"Variance_of_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length)}}function gT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.contractualShifts," ")}}function hT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,gT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function ZT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",(null==(o=e.Totals())?null:o.contractualShifts)*e.workingHoursInSite," ")}}function fT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,ZT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function AT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.convertTimeToShifts(null==(o=e.Totals())?null:o.tAWOt.hrs,null==(o=e.Totals())?null:o.tAWOt.mins,e.workingHoursInSite)," ")}}function CT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,AT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function TT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.tAWOt.hrs,null==(o=e.Totals())?null:o.tAWOt.mins)," ")}}function vT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,TT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function xT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.convertTimeToShifts(null==(o=e.Totals())?null:o.total,null==(o=e.Totals())?null:o.totMins,e.workingHoursInSite)," ")}}function qT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,xT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function bT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.total,null==(o=e.Totals())?null:o.totMins)," ")}}function yT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,bT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function ST(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.overTime,null==(o=e.Totals())?null:o.overTimeMins)," ")}}function wT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,ST,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function UT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.convertTimeToShifts(null==(o=e.Totals())||null==o.spl_ot?null:o.spl_ot.hrs,null==(o=e.Totals())||null==o.spl_ot?null:o.spl_ot.mins,e.workingHoursInSite)," ")}}function DT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,UT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function LT(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",82),t._uU(2),t.qZA(),t.TgZ(3,"td",83),t._uU(4),t.qZA(),t.TgZ(5,"td",82),t._uU(6," = "),t.qZA(),t.TgZ(7,"td",84),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);let s;t.xp6(2),t.hij(" ",e.shiftCode," "),t.xp6(1),t.s9C("id",n.getShiftColour(o)),t.xp6(1),t.AsE(" ",e.shiftName_EN,"/",e.shiftName_AR," "),t.xp6(3),t.s9C("id",n.getShiftColour(o)),t.xp6(1),t.hij(" ",n.isArab?null==(s=n.getShiftTypeNumber(o))?null:s.nameAr:null==(s=n.getShiftTypeNumber(o))?null:s.nameEn," ")}}function NT(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"div",74),t.TgZ(2,"div",75),t.TgZ(3,"div",76),t.TgZ(4,"table",77),t.TgZ(5,"tr"),t.TgZ(6,"td",78),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"td",79),t.YNc(10,hT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td",78),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"td",79),t.YNc(16,fT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(17,"tr"),t.TgZ(18,"td",78),t._uU(19),t.ALo(20,"translate"),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"td",79),t.YNc(23,CT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(24,"tr"),t.TgZ(25,"td",78),t._uU(26),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td",79),t.YNc(30,vT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(31,"tr"),t.TgZ(32,"td",78),t._uU(33),t.ALo(34,"translate"),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"td",79),t.YNc(37,qT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(38,"tr"),t.TgZ(39,"td",78),t._uU(40),t.ALo(41,"translate"),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"td",79),t.YNc(44,yT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(45,"tr"),t.TgZ(46,"td",78),t._uU(47),t.ALo(48,"translate"),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"td",79),t.YNc(51,wT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(52,"tr"),t.TgZ(53,"td",78),t._uU(54),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"td",79),t.YNc(58,DT,2,1,"span",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",80),t.TgZ(60,"table",81),t.YNc(61,LT,9,6,"tr",35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(7),t.hij(" ",t.lcZ(8,23,"Contracted_Shifts")," "),t.xp6(3),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.hij(" ",t.lcZ(14,25,"Contracted_Hours")," "),t.xp6(3),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(20,27,"Actual_Shifts"),"(",t.lcZ(21,29,"With_Overtime"),") "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(27,31,"Actual_Hours"),"(",t.lcZ(28,33,"With_Overtime"),") "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(34,35,"Actual_Shifts"),"(",t.lcZ(35,37,"Without_Overtime"),") "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(41,39,"Actual_Hours"),"(",t.lcZ(42,41,"Without_Overtime"),") "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(48,43,"Overtime")," ",t.lcZ(49,45,"Hours")," "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(55,47,"Overtime")," ",t.lcZ(56,49,"Shifts")," "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.Q6J("ngForOf",e.listOfShiftCodes2)}}function ET(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",91),t.TgZ(1,"div",89),t.TgZ(2,"input",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).exportexcel()}),t.ALo(3,"translate"),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.s9C("value",t.lcZ(3,1,"Download_Exel")))}function OT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",88),t.TgZ(1,"div",93),t.TgZ(2,"input",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).confirmAutoAttendanceForMonth()}),t.ALo(3,"translate"),t.qZA(),t.qZA(),t.TgZ(4,"div",93),t.TgZ(5,"input",94),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).confirmClearAttendance()}),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.s9C("value",t.lcZ(3,2,"Enter_Default_Attendance")),t.xp6(3),t.s9C("value",t.lcZ(6,4,"Clear_Attendance")))}function kT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",88),t.TgZ(1,"div",89),t.TgZ(2,"input",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).loadData()}),t.ALo(3,"translate"),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.s9C("value",t.lcZ(3,1,"Refresh")))}function jT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",88),t.TgZ(1,"div",89),t.TgZ(2,"input",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).confirmPostAttendance()}),t.ALo(3,"translate"),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.s9C("value",t.lcZ(3,1,"Post_Attendance")))}function MT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",85),t.YNc(1,ET,4,3,"div",86),t.YNc(2,OT,7,6,"div",87),t.YNc(3,kT,4,3,"div",87),t.YNc(4,jT,4,3,"div",87),t.TgZ(5,"div",88),t.TgZ(6,"div",89),t.TgZ(7,"input",90),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t.ALo(8,"translate"),t.qZA(),t._uU(9," \xa0 "),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=e.listOfRoasters.length),t.xp6(1),t.Q6J("ngIf",0!=e.listOfRoasters.length),t.xp6(1),t.Q6J("ngIf",0!=e.listOfRoasters.length),t.xp6(1),t.Q6J("ngIf",0!=e.updatedAttendance.length&&0!=e.listOfRoasters.length),t.xp6(3),t.s9C("value",t.lcZ(8,5,"Cancel"))}}let Ze=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(u),this.dialog=e,this.oprService=o,this.dialogRef=n,this.fb=s,this.http=r,this.router=c,this.apiService=p,this.authService=u,this.utilService=d,this.translate=_,this.notifyService=h,this.validationService=A,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfRoasters=[],this.listOfDays=[],this.sequence=1,this.editsequence=0,this.remarks="",this.noOfDays=0,this.saveEnable=!1,this.editEnable=!1,this.monthYear="",this.skillsetCode="",this.skillsetName="",this.shiftCodesForMonth=[],this.inActiveDays=0,this.siteCodeList=[],this.customerCode="",this.listOfShiftCodes=[],this.listOfShiftCodes2=[],this.siteCode="",this.month=0,this.year=0,this.shiftCode="",this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0,this.newTotalShifts=0,this.shiftsReport=[],this.roasterReport=[],this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeeNumber="",this.workingHoursInSite=0,this.autoAttendanceData=[],this.activeColumn=-1,this.updatedAttendance=[],this.updatedAttendance2=[],this.notPostedAtndncExist=!1,this.isLoading=!1,this.employeeConsolidateData=[],this.daywiseConsolidateData=[],this.colours=["bg_Shift0","bg_Shift1","bg_Shift2","bg_Shift3","bg_Shift4"],this.shiftTypeNames=[{number:0,nameEn:"-",nameAr:"-"},{number:1,nameEn:"Shift 1",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u0623\u0648\u0644\u0649"},{number:2,nameEn:"Shift 2",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0646\u064a\u0629"},{number:3,nameEn:"Shift 3",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"},{number:4,nameEn:"Shift 4",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"}],this.showMins=!0,this.totalData={total:0,offs:0,totMins:0,nwd:0,wd:0,wh:0,lateHrs:0,lateMins:0,overTime:0,overTimeMins:0,notAssigned:0,actualShifts:0,al_count:0,ul_count:0,el_count:0,sl_count:0,stl_count:0,w_count:0,penalty:0},this.totShiftReport={dailyShifts:0,dailyHrs:0,monthlyHrs:0,monthlyOffs:0,monthlyReplacements:0,monthlyShiftsSchedulled:0,monthlyShiftsAssigned:0},this.totRoastersReport={contractualShifts:0,offs:0,qty:0},this.inputArray=[],this.inputListForDay=[],this.isArab=!1,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,ot.O)(this.employeeNumber),(0,it.b)(d.autoDelay()),(0,nt.x)(),(0,at.w)(C=>(""!==C.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(C||""))))}filterEmployeeNumbers(e){return this.apiService.getall(`Employee/getAutoFillEmployeeList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode2/${this.project.projectCode}/${this.siteCode}`).subscribe(e=>{this.listOfShiftCodes2=e})}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.readonly="readonly",this.loadSiteCodes(this.project.customerCode),this.loadSkillsetSelectionList()}setForm(){var e,o;this.form=this.fb.group({startDate:[""],endDate:[""],customerCode:[this.project.customerCode],monthYear:[""],siteCode:[null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)?this.project.siteCode:""],projectCode:[this.project.projectCode],month:[0],year:[this.year],skillsetCode:[""],shiftCode:[""]}),null!=(null===(o=this.project)||void 0===o?void 0:o.siteCode)&&(this.form.controls.siteCode.disable({onlySelf:!0}),this.siteCode=this.project.siteCode,this.minDate=this.project.oldestRoasterStartDate,this.maxDate=this.project.endDate,this.form.controls.startDate.setValue(this.project.startDate.toString().substring(0,10)),this.form.controls.endDate.setValue(this.project.endDate.toString().substring(0,10)),this.onSelectSiteCode({target:{value:this.project.siteCode}}))}getMaxPostDate(){this.minPostDate=new Date(this.year,this.month-1,1);let e=new Date(this.year,this.month,1);e.setMinutes(e.getMinutes()-e.getTimezoneOffset());let o=new Date(e.getFullYear(),e.getMonth(),0,23,59,59,999);this.maxPostDate=o>this.maxDate?this.maxDate:o}submit(){}getSkillset(e){return this.skillsetSelectionList.find(o=>o.value==e)}loadSkillsetSelectionList(){this.apiService.getall("Skillset/getSelectSkillsetList").subscribe(e=>{this.skillsetSelectionList=e})}getEmployee(e){return this.employeeList.find(o=>o.value==e)}onSelectSiteCode(e){if(""!=e.target.value){let o=e.target.value;this.form.controls.monthYear.setValue(""),this.month=0,this.year=0,this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.project.projectCode}/${o}`).subscribe(n=>{var s;this.project=n,this.workingHoursInSite=null!==(s=n.siteWorkingHours)&&void 0!==s?s:0,this.loadEmployees();let r=new Date(Date.now());this.year=r.getFullYear(),this.form.value.siteCode=o,this.form.controls.siteCode.setValue(o),this.siteCode=o,this.loadData()})}else this.listOfRoasters=[]}loadData(){if(""!=this.project.customerCode&&""!=this.siteCode&&0!=this.month&&0!=this.year){let e=new Date(this.year,this.month-1,1),o=new Date(this.year,this.month,0);this.listOfDays=[],this.noOfDays=o.getDate()-e.getDate()+1,this.apiService.getall(`MonthlyRoaster/getMonthlyRoasterForSite/${this.project.customerCode}/${this.project.projectCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(n=>{this.listOfRoasters=n,0!=n.length?(0==this.listOfRoasters.length?this.notifyService.showError(this.translate.instant("Roaster_Not_Generated")):(this.isLoading=!0,this.getAllAttendance(),this.getActiveColumn()),this.sequence=this.listOfRoasters.length+1):(this.notifyService.showError(this.translate.instant("Roaster_Not_Generated")),this.isLoading=!1)}),this.loadWeekDays(),this.loadShiftCodes()}else this.listOfRoasters=[],this.listOfShiftCodes=[]}loadWeekDays(){this.form.controls.monthYear.setValue(new Date(this.year,this.month-1,1));for(var e=1;e<=this.noOfDays;e++){let o=new Date(this.year,this.month-1,e),s={dayText:o.toDateString().substring(0,1),dayNumber:e,dayFullName:o.toDateString()};this.listOfDays.push(s)}}loadSiteCodes(e){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.siteCodeList=o})}openDatePicker(e){e.open()}closeDatePicker(e,o){let s=Ae(e).format("YYYY-MM");this.selectedMonth=e.toString().substring(4,7)+"-"+e.toString().substring(11,15),this.month=parseInt(s.toString().substring(5,7)),this.year=Number(s.toString().substring(0,4)),this.getMaxPostDate(),""!=this.project.customerCode&&""!=this.siteCode&&(this.isLoading=!0,this.loadData(),this.RefreshOffs(),this.utilService.autoDelay()),o.close()}RefreshOffs(){this.apiService.post("OpUtils/RefreshOffs",{siteCode:this.project.siteCode,month:this.month,year:this.year}).subscribe(o=>{})}RoastersCount(){return this.listOfRoasters.length}getShiftInfo(e,o){var n;return`Shift Name: ${null===(n=this.listOfRoasters[e])||void 0===n?void 0:n.shiftCodesForMonth[o]}`}closeModel(){this.dialogRef.close()}groupBy(e,o){const n=new Map;return e.forEach(s=>{const r=o(s),c=n.get(r);c?c.push(s):n.set(r,[s])}),n}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList2").subscribe(e=>{this.employeeList=e})}openDialogWindow(e,o,n,s,r,c){if(!this.isLoading){let p=this.oprService.openAutoWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.inputData=o,p.componentInstance.inputCellData=e,p.afterClosed().subscribe(u=>{var d,_,h,A,C;if(1==(null==u?void 0:u.res)&&1==(null==u?void 0:u.isNotPrimaryAtt)){let S=u.c;this.apiService.getall(`MonthlyRoaster/getMonthlyRoasterForSite/${this.project.customerCode}/${this.project.projectCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(L=>{var U,M;this.listOfRoasters=L;for(let O=0;O<this.listOfRoasters.length;O++){let F=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(S+1).toString().padStart(2,"0");this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${null===(U=this.listOfRoasters[O])||void 0===U?void 0:U.employeeNumber}/${F}/${null===(M=this.listOfRoasters[O])||void 0===M?void 0:M.shiftCodesForMonth[S]}`).subscribe(P=>{this.attendanceData[O][S]=P})}})}else if(1==(null==u?void 0:u.res)&&1==(null==u?void 0:u.isRoasterRemoved))this.loadData();else if(1==(null==u?void 0:u.res)&&1==(null==u?void 0:u.isUpdatedShift)){let S=u.r,L=u.c,U=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(L+1).toString().padStart(2,"0");this.listOfRoasters[S].shiftCodesForMonth[L]=u.updatedShift,this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${null===(d=this.listOfRoasters[S])||void 0===d?void 0:d.employeeNumber}/${U}/${null===(_=this.listOfRoasters[S])||void 0===_?void 0:_.shiftCodesForMonth[L]}`).subscribe(M=>{this.attendanceData[S][L]=M})}else if(u&&1==u.res){let S=null===(h=u.cellData)||void 0===h?void 0:h.r,L=null===(A=u.cellData)||void 0===A?void 0:A.c,U=null===(C=u.cellData)||void 0===C?void 0:C.r;this.apiService.getall(`MonthlyRoaster/getMonthlyRoasterForSite/${this.project.customerCode}/${this.project.projectCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(M=>{var O,F,P,st,H,z,et,ht,ct,Y,R,$,St,qt;this.listOfRoasters=M,0==M.length&&(this.isLoading=!1);let Tt=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(L+1).toString().padStart(2,"0");this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${null===(O=this.listOfRoasters[S])||void 0===O?void 0:O.employeeNumber}/${Tt}/${null===(F=this.listOfRoasters[S])||void 0===F?void 0:F.shiftCodesForMonth[L]}`).subscribe(I=>{var J,yt,bt,wt,vt,Lt,G,K,tt,rt,_t,Qt,Bt;this.attendanceData[S][L]=I,I.isPosted||!(I.id>0)||I.employeeNumber!=I.altEmployeeNumber&&""!=I.altEmployeeNumber&&null!=I.altEmployeeNumber||"P"!=I.attendance&&"OT"!=I.attendance?""!=I.altEmployeeNumber&&I.id>0&&this.apiService.get("EmployeesAttendance/getAltAttendanceById",I.id).subscribe(Q=>{Q&&!Q.isPosted&&Q.id>0&&(Q.employeeNumber==Q.altEmployeeNumber||""==Q.altEmployeeNumber||null==Q.altEmployeeNumber)&&("P"==Q.attendance||"OT"==Q.attendance)&&(this.notPostedAtndncExist=!1,this.updatedAttendance.push(Q))}):(this.notPostedAtndncExist=!1,this.updatedAttendance.push(I));let Vt=-1;if(U=this.listOfRoasters.findIndex(Q=>Q.employeeNumber==u.outputData.altEmployeeNumber),S=this.listOfRoasters.findIndex(Q=>Q.employeeNumber==u.outputData.employeeNumber),null!=u.outputData.primaryEmployee&&(Vt=this.listOfRoasters.findIndex(Q=>Q.employeeNumber==u.outputData.primaryEmployee.employeeNumber)),this.listOfRoasters.length>(null===(J=u.cellData)||void 0===J?void 0:J.totRows)){this.attendanceData[U]=[];for(let Q=0;Q<this.noOfDays;Q++)this.attendanceData[U].push({id:-1});this.loadData()}else if(Vt>=0){let Q=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(L+1).toString().padStart(2,"0");this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${this.listOfRoasters[Vt].employeeNumber}/${Q}/${this.listOfRoasters[Vt].shiftCodesForMonth[L]}`).subscribe(Dt=>{this.attendanceData[Vt][L]=Dt})}let fe=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(L+1).toString().padStart(2,"0");this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${this.listOfRoasters[U].employeeNumber}/${fe}/${this.listOfRoasters[U].shiftCodesForMonth[L]}`).subscribe(Q=>{this.attendanceData[U][L]=Q}),this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${this.listOfRoasters[S].employeeNumber}/${fe}/${this.listOfRoasters[S].shiftCodesForMonth[L]}`).subscribe(Q=>{this.attendanceData[S][L]=Q});for(let Q=0;Q<this.attendanceData.length;Q++)for(let Dt=0;Dt<this.attendanceData[Q].length;Dt++){if(!(-1!=this.activeColumn||0!=this.attendanceData[Q][Dt].id||this.attendanceData[Q][Dt].isDefShiftOff||(null===(yt=this.attendanceData[Q][Dt])||void 0===yt?void 0:yt.isOnLeave)||(null===(bt=this.attendanceData[Q][Dt])||void 0===bt?void 0:bt.isWithDrawn)||(null===(wt=this.attendanceData[Q][Dt])||void 0===wt?void 0:wt.isTransfered)||(null===(vt=this.attendanceData[Q][Dt])||void 0===vt?void 0:vt.isResigned))){this.activeColumn=Dt;break}if(this.activeColumn>Dt&&0==this.attendanceData[Q][Dt].id&&!this.attendanceData[Q][Dt].isDefShiftOff&&!(null===(Lt=this.attendanceData[Q][Dt])||void 0===Lt?void 0:Lt.isOnLeave)&&!(null===(G=this.attendanceData[Q][Dt])||void 0===G?void 0:G.isWithDrawn)&&!(null===(K=this.attendanceData[Q][Dt])||void 0===K?void 0:K.isTransfered)&&!(null===(tt=this.attendanceData[Q][Dt])||void 0===tt?void 0:tt.isResigned)){this.activeColumn=Dt;break}}let Ue=-1;for(let Q=0;Q<this.attendanceData.length;Q++)0==this.attendanceData[Q][this.activeColumn].id&&!this.attendanceData[Q][this.activeColumn].isDefShiftOff&&!(null===(rt=this.attendanceData[Q][this.activeColumn])||void 0===rt?void 0:rt.isOnLeave)&&!(null===(_t=this.attendanceData[Q][this.activeColumn])||void 0===_t?void 0:_t.isWithDrawn)&&!(null===(Qt=this.attendanceData[Q][this.activeColumn])||void 0===Qt?void 0:Qt.isTransfered)&&!(null===(Bt=this.attendanceData[Q][this.activeColumn])||void 0===Bt?void 0:Bt.isResigned)&&(Ue=Q);-1==Ue&&this.activeColumn++});for(let I=0;I<this.attendanceData.length;I++)for(let J=0;J<this.attendanceData[I].length;J++){if(!(-1!=this.activeColumn||0!=this.attendanceData[I][J].id||this.attendanceData[I][J].isDefShiftOff||(null===(P=this.attendanceData[I][J])||void 0===P?void 0:P.isOnLeave)||(null===(st=this.attendanceData[I][J])||void 0===st?void 0:st.isWithDrawn)||(null===(H=this.attendanceData[I][J])||void 0===H?void 0:H.isTransfered)||(null===(z=this.attendanceData[I][J])||void 0===z?void 0:z.isResigned))){this.activeColumn=J;break}if(this.activeColumn>J&&0==this.attendanceData[I][J].id&&!this.attendanceData[I][J].isDefShiftOff&&!(null===(et=this.attendanceData[I][J])||void 0===et?void 0:et.isOnLeave)&&!(null===(ht=this.attendanceData[I][J])||void 0===ht?void 0:ht.isWithDrawn)&&!(null===(ct=this.attendanceData[I][J])||void 0===ct?void 0:ct.isTransfered)&&!(null===(Y=this.attendanceData[I][J])||void 0===Y?void 0:Y.isResigned)){this.activeColumn=J;break}}let Ct=-1;for(let I=0;I<this.attendanceData.length;I++)0==this.attendanceData[I][this.activeColumn].id&&!this.attendanceData[I][this.activeColumn].isDefShiftOff&&!(null===(R=this.attendanceData[I][L])||void 0===R?void 0:R.isOnLeave)&&!(null===($=this.attendanceData[I][L])||void 0===$?void 0:$.isWithDrawn)&&!(null===(St=this.attendanceData[I][L])||void 0===St?void 0:St.isTransfered)&&!(null===(qt=this.attendanceData[I][L])||void 0===qt?void 0:qt.isResigned)&&(Ct=I);-1==Ct&&this.activeColumn++})}"transResign"==(null==u?void 0:u.confirmType)&&this.loadData()})}}openPostAttendanceWindow(e,o,n,s,r){if(!this.isLoading){let c=this.oprService.openAutoWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.inputAttendanceData=e.slice(),c.componentInstance.maxPostDate=this.maxPostDate,c.componentInstance.minPostDate=this.minPostDate,c.componentInstance.projectCode=this.project.projectCode,c.componentInstance.siteCode=this.project.siteCode,c.afterClosed().subscribe(p=>{1==p.res?(this.notifyService.showSuccess(this.translate.instant("Success")),this.loadData()):this.loadData()})}}openClearAttendanceWindow(e,o,n,s,r){if(!this.isLoading){let c=this.oprService.openAutoWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.inputAttendanceData=e.slice(),c.componentInstance.maxDate=this.maxPostDate,c.componentInstance.minDate=this.minPostDate,c.componentInstance.projectCode=this.project.projectCode,c.componentInstance.siteCode=this.project.siteCode,c.afterClosed().subscribe(p=>{1==p.res?(this.notifyService.showSuccess(this.translate.instant("Success")),this.loadData()):this.loadData()})}}getAttendance(){var e,o,n;this.isLoading=!0,this.notPostedAtndncExist=!0,this.attendanceData=[],this.employeeConsolidateData=[],this.daywiseConsolidateData=[],this.updatedAttendance=[];for(let s=0;s<this.listOfRoasters.length;s++){this.attendanceData[s]=[],this.employeeConsolidateData.push({total:0,totMins:0,off:0,wd:0,a:0,nwd:0,wh:0,lateDays:0,lateHrs:0,lateMins:0,overTime:0,overTimeMins:0,notAssigned:0,actualShifts:0,contractualShifts:0,al_count:0,ul_count:0,el_count:0,sl_count:0,w_count:0,ot_count:0});for(let c=0;c<this.noOfDays;c++){this.daywiseConsolidateData.push({tch:0,tch_min:0,tcs:0,ot_count:0});let u=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(c+1).toString().padStart(2,"0");""!=(null===(e=this.listOfRoasters[s])||void 0===e?void 0:e.shiftCodesForMonth[c])&&this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${null===(o=this.listOfRoasters[s])||void 0===o?void 0:o.employeeNumber}/${u}/${null===(n=this.listOfRoasters[s])||void 0===n?void 0:n.shiftCodesForMonth[c]}`).subscribe(d=>{this.attendanceData[s][c]=d,d.isPosted||!(d.id>0)||d.employeeNumber!=d.altEmployeeNumber&&""!=d.altEmployeeNumber&&null!=d.altEmployeeNumber||"P"!=d.attendance&&"OT"!=d.attendance?""!=d.altEmployeeNumber&&d.id>0&&this.apiService.get("EmployeesAttendance/getAltAttendanceById",d.id).subscribe(_=>{_&&!_.isPosted&&(null==_?void 0:_.id)>0&&((null==_?void 0:_.employeeNumber)==(null==_?void 0:_.altEmployeeNumber)||""==(null==_?void 0:_.altEmployeeNumber)||null==(null==_?void 0:_.altEmployeeNumber))&&("P"==(null==_?void 0:_.attendance)||"OT"==_.attendance)&&(this.notPostedAtndncExist=!1,this.updatedAttendance.findIndex(h=>h.id==_.id)<0&&this.updatedAttendance.push(_))}):(this.notPostedAtndncExist=!1,this.updatedAttendance.push(d)),this.attendanceData.length==this.listOfRoasters.length&&0!=this.attendanceData.length&&this.attendanceData[this.listOfRoasters.length-1].length==this.noOfDays&&(this.getActiveColumn(),this.isLoading=!1)})}}}confirmPostAttendance(){0==this.updatedAttendance.length?this.notifyService.showInfo(this.translate.instant("No_Updates")):this.openPostAttendanceWindow(this.updatedAttendance.slice(),g.Oi.create,"Post_Attendance","Save",Re)}postAttendance(){this.isLoading||(this.isLoading=!0,this.apiService.post("PostingMonthlyAttendance/postEmployeeAttendance",this.updatedAttendance).subscribe(e=>{this.utilService.OkMessage(),this.isLoading=!1,this.getAllAttendance()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e),this.isLoading=!1}))}getCellBackGroud(e,o){var n,s,r,c,p,u,d,_,h,A,C,S,L,U;let M=this.listOfShiftCodes2.findIndex(st=>{var H;return st.shiftCode==(null===(H=this.listOfRoasters[e])||void 0===H?void 0:H.shiftCodesForMonth[o])}),O=this.listOfShiftCodes2.findIndex(st=>{var H;return st.shiftCode==(null===(H=this.listOfRoasters[e])||void 0===H?void 0:H.shiftCodesForMonth[o])&&st.isOff})>=0,F=new Date(this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(o+1).toString().padStart(2,"0")),P=new Date;return P>=F&&"x"!=(null===(n=this.listOfRoasters[e])||void 0===n?void 0:n.shiftCodesForMonth[o])&&this.activeColumn==o?null!=this.attendanceData[e][o]&&((null===(s=this.attendanceData[e][o])||void 0===s?void 0:s.isAbsent)||null!=(null===(r=this.attendanceData[e][o])||void 0===r?void 0:r.nwTime)&&0==(null===(c=this.attendanceData[e][o])||void 0===c?void 0:c.nwTime.hours)&&0==(null===(p=this.attendanceData[e][o])||void 0===p?void 0:p.nwTime.minutes)&&this.attendanceData[e][o].id>0)?"bg_red":-1==M||!this.attendanceData[e][o].isPosted||"P"!=this.attendanceData[e][o].attendance&&"OT"!=this.attendanceData[e][o].attendance?0==this.attendanceData[e][o].id?"bg_Active":"bg_white":"bg_Posted":P>=F&&"x"!=(null===(u=this.listOfRoasters[e])||void 0===u?void 0:u.shiftCodesForMonth[o])?-1==M||!(null===(d=this.attendanceData[e][o])||void 0===d?void 0:d.isPosted)||"P"!=(null===(_=this.attendanceData[e][o])||void 0===_?void 0:_.attendance)&&"OT"!=(null===(h=this.attendanceData[e][o])||void 0===h?void 0:h.attendance)?-1==M||O?O?"bg_offShift":"bg_white":(null===(A=this.attendanceData[e][o])||void 0===A?void 0:A.isAbsent)||null!=(null===(C=this.attendanceData[e][o])||void 0===C?void 0:C.nwTime)&&0==(null===(S=this.attendanceData[e][o])||void 0===S?void 0:S.nwTime.hours)&&0==(null===(L=this.attendanceData[e][o])||void 0===L?void 0:L.nwTime.minutes)&&this.attendanceData[e][o].id>0?"bg_red":"bg_white":"bg_Posted":"x"!=(null===(U=this.listOfRoasters[e])||void 0===U?void 0:U.shiftCodesForMonth[o])?"bg_gray":"bg_black"}getDefShiftBackGround(e){var o,n,s;let r=0;for(;r<this.noOfDays;){let c=this.listOfShiftCodes2.findIndex(p=>{var u;return p.shiftCode==(null===(u=this.listOfRoasters[e])||void 0===u?void 0:u.shiftCodesForMonth[r])&&p.isOff})>=0;if("x"!=(null===(o=this.listOfRoasters[e])||void 0===o?void 0:o.shiftCodesForMonth[r])&&""!=(null===(n=this.listOfRoasters[e])||void 0===n?void 0:n.shiftCodesForMonth[r])&&!c)break;r++}if(r<this.noOfDays){let c=this.listOfShiftCodes2.findIndex(p=>{var u;return p.shiftCode==(null===(u=this.listOfRoasters[e])||void 0===u?void 0:u.shiftCodesForMonth[r])});return(null===(s=this.attendanceData[e][r])||void 0===s?void 0:s.isPrimarySite)?this.getShiftColour(c):"bg_black"}return"bg_black"}getDefShiftTypeName(e){let n=this.getDefShiftCode(e),s=this.listOfShiftCodes2.findIndex(r=>r.shiftCode==n);return this.getShiftTypeNumber(s)}getDefShiftCode(e){var o,n,s;let r=0,c=!0;for(;c&&r<this.noOfDays;){let p=null===(o=this.listOfRoasters[e])||void 0===o?void 0:o.shiftCodesForMonth[r],u=this.listOfShiftCodes2.findIndex(_=>_.shiftCode==p&&_.isOff)>=0,d=this.listOfShiftCodes2.findIndex(_=>_.shiftCode==p)>=0;if(!u&&d){c=!1;break}r++}return r<this.noOfDays&&(null===(n=this.attendanceData[e][r])||void 0===n?void 0:n.isPrimarySite)?null===(s=this.listOfRoasters[e])||void 0===s?void 0:s.shiftCodesForMonth[r]:"-"}getShiftColour(e){return this.listOfShiftCodes2.findIndex(n=>n.shiftCode==this.listOfShiftCodes2[e].shiftCode&&n.isOff)>=0?"bg_offShift":this.colours[e]}manualAttendance(e,o){var n,s,r,c,p,u,d,_,h,A;let C=new Date(this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(o+1).toString().padStart(2,"0"));if(new Date<=C)this.notifyService.showError(this.translate.instant("Can_not_Enter_Attendance_For_Future_Date"));else if("x"==(null===(n=this.listOfRoasters[e])||void 0===n?void 0:n.shiftCodesForMonth[o]))if(new Date(this.listOfRoasters[e].monthStartDate)<=C&&new Date(this.listOfRoasters[e].monthEndDate)>=C){let L={projectCode:this.listOfRoasters[e].projectCode,siteCode:this.listOfRoasters[e].siteCode,employeeNumber:this.listOfRoasters[e].employeeNumber,date:this.year.toString()+"-"+this.month.toString().padStart(2,"0")+"-"+(o+1).toString().padStart(2,"0")};this.apiService.post("PvAllRequests/getRecentApprovedPvRequestData",L).subscribe(U=>{0==(null==U?void 0:U.reqId)||null==U?this.notifyService.showInfo("Employee Not Available"):1==(null==U?void 0:U.requestType)?this.openDialogManage(null==U?void 0:U.reqId,g.Oi.create,"Request_For_Add_Resource","View",Jt):2==(null==U?void 0:U.requestType)?this.openDialogManage(null==U?void 0:U.reqId,g.Oi.create,"Request_For_Remove_Resource","View",Rt):3==(null==U?void 0:U.requestType)?this.openDialogManage(null==U?void 0:U.reqId,g.Oi.create,"Request_For_Transfer_Employee","View",Pt):4==(null==U?void 0:U.requestType)?this.openDialogManage(null==U?void 0:U.reqId,g.Oi.create,"Request_For_Transfer_With_Replacement","View",Ft):5==(null==U?void 0:U.requestType)?this.openDialogManage(null==U?void 0:U.reqId,g.Oi.create,"Request_For_Swap_Employees","View",Kt):6==(null==U?void 0:U.requestType)&&this.openDialogManage(null==U?void 0:U.reqId,g.Oi.create,"Request_For_Replace_Resource","View",Mt)})}else this.notifyService.showError(this.translate.instant("Invalid_Date_Selection"));else if(""==(null===(s=this.listOfRoasters[e])||void 0===s?void 0:s.shiftCodesForMonth[o])||-2==this.attendanceData[e][o].id)this.notifyService.showError(this.translate.instant("Shifts_Not_Assigned"));else if(0!=this.attendanceData.length)if(this.attendanceData[e][o].id>=0){let L={r:e,c:o,totRows:this.listOfRoasters.length},U=this.listOfShiftCodes2.findIndex(O=>{var F;return O.shiftCode==(null===(F=this.listOfRoasters[e])||void 0===F?void 0:F.shiftCodesForMonth[o])&&O.isOff})>=0,M={id:this.attendanceData[e][o].id,projectCode:this.project.projectCode,siteCode:this.siteCode,attnDate:this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(o+1).toString().padStart(2,"0"),shiftCode:null===(r=this.listOfRoasters[e])||void 0===r?void 0:r.shiftCodesForMonth[o],employeeNumber:this.listOfRoasters[e].employeeNumber,employeeID:this.listOfRoasters[e].employeeID,isDefShiftOff:U,isActive:!0,inTime:null===(c=this.listOfShiftCodes2.find(O=>{var F;return O.shiftCode==(null===(F=this.listOfRoasters[e])||void 0===F?void 0:F.shiftCodesForMonth[o])}))||void 0===c?void 0:c.inTime,outTime:null===(p=this.listOfShiftCodes2.find(O=>{var F;return O.shiftCode==(null===(F=this.listOfRoasters[e])||void 0===F?void 0:F.shiftCodesForMonth[o])}))||void 0===p?void 0:p.outTime,isDefaultEmployee:!(null===(u=this.listOfShiftCodes2.find(O=>{var F;return O.shiftCode==(null===(F=this.listOfRoasters[e])||void 0===F?void 0:F.shiftCodesForMonth[o])}))||void 0===u?void 0:u.isOff),isPrimarySite:null===(d=this.listOfRoasters[e])||void 0===d?void 0:d.isPrimaryResource,isPosted:null===(_=this.attendanceData[e][o])||void 0===_?void 0:_.isPosted,altEmployeeNumber:this.listOfRoasters[e].employeeNumber,altShiftCode:null===(h=this.listOfRoasters[e])||void 0===h?void 0:h.shiftCodesForMonth[o],attendance:(null===(A=this.attendanceData[e][o-1])||void 0===A?void 0:A.id)>0?this.attendanceData[e][o-1].attendance:"P",refIdForAlt:0,leavesData:this.attendanceData[e][o].leavesData,transORresignData:this.attendanceData[e][o].transORresignData,isOnLeave:this.attendanceData[e][o].isOnLeave,isWithDrawn:this.attendanceData[e][o].isWithDrawn,isResigned:this.attendanceData[e][o].isResigned,isTransfered:this.attendanceData[e][o].isTransfered,daywiseConsolidateData:this.daywiseConsolidateData[o],roasterData:this.listOfRoasters[e],r:e,c:o,shiftCodesSelectionList:this.listOfShiftCodes2};this.openDialogWindow(L,M,g.Oi.create,"Manual_Attendance","Save",ke)}else 0==this.attendanceData[e][o-1].id&&this.notifyService.showError(this.translate.instant("Enter_Previous_Day_Attendance_First"))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{})}getActiveColumn(){var e,o,n,s,r,c,p,u,d,_,h,A;for(let C=0;C<this.attendanceData.length;C++)for(let S=0;S<this.attendanceData[C].length;S++){if(!(-1!=this.activeColumn||0!=(null===(e=this.attendanceData[C][S])||void 0===e?void 0:e.id)||this.attendanceData[C][S].isDefShiftOff||(null===(o=this.attendanceData[C][S])||void 0===o?void 0:o.isOnLeave)||(null===(n=this.attendanceData[C][S])||void 0===n?void 0:n.isWithDrawn)||(null===(s=this.attendanceData[C][S])||void 0===s?void 0:s.isTransfered)||(null===(r=this.attendanceData[C][S])||void 0===r?void 0:r.isResigned)||"x"==(null===(c=this.listOfRoasters[C])||void 0===c?void 0:c.shiftCodesForMonth[S]))){this.activeColumn=S;break}if(this.activeColumn>S&&0==(null===(p=this.attendanceData[C][S])||void 0===p?void 0:p.id)&&!this.attendanceData[C][S].isDefShiftOff&&!(null===(u=this.attendanceData[C][S])||void 0===u?void 0:u.isOnLeave)&&!(null===(d=this.attendanceData[C][S])||void 0===d?void 0:d.isWithDrawn)&&!(null===(_=this.attendanceData[C][S])||void 0===_?void 0:_.isTransfered)&&!(null===(h=this.attendanceData[C][S])||void 0===h?void 0:h.isResigned)&&"x"!=(null===(A=this.listOfRoasters[C])||void 0===A?void 0:A.shiftCodesForMonth[S])){this.activeColumn=S;break}}}updateManualAttendance(e,o){var n;if(this.listOfRoasters.length>0){let s=new Date(this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(o+1).toString().padStart(2,"0"));if(new Date<=s)this.notifyService.showError(this.translate.instant("Can_not_Enter_Attendance_For_Future_Date"));else if(this.attendanceData.length>0&&(null===(n=this.attendanceData[e][o])||void 0===n?void 0:n.id)>0){let c={r:e,c:o,totRows:this.listOfRoasters.length};this.attendanceData[e][o].daywiseConsolidateData=this.daywiseConsolidateData[o],this.openDialogWindow(c,this.attendanceData[e][o],g.Oi.create,"Update_Manual_Attendance","Save",Me)}}}onRightClick(e,o){return this.updateManualAttendance(e,o),!1}translateToolTip(e){return`${this.translate.instant(e)}`}confirmAutoAttendancePerDay(e){this.openConfirmationDialog(g.Oi.create,"Are_You_Sure?",xt,"general","AutoAttendancePerDay",e)}AutoAttendancePerDay(e){var o,n,s,r,c,p,u,d,_,h,A,C,S,L,U,M,O,F;let P=[];if(null==this.workingHoursInSite||this.workingHoursInSite<=0)return void this.notifyService.showInfo("No.Of_Working_Hours_For_Site_Not_Defined");let st=0;if(0!=this.listOfRoasters.length){let H=new Date(this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(e+1).toString().padStart(2,"0"));if(new Date>=H)for(let et=0;et<this.listOfRoasters.length;et++)if(0==this.attendanceData[et][e].id&&!this.attendanceData[et][e].isDefShiftOff&&!(null===(o=this.attendanceData[et][e])||void 0===o?void 0:o.isOnLeave)&&!(null===(n=this.attendanceData[et][e])||void 0===n?void 0:n.isWithDrawn)&&!(null===(s=this.attendanceData[et][e])||void 0===s?void 0:s.isTransfered)&&!(null===(r=this.attendanceData[et][e])||void 0===r?void 0:r.isResigned)&&this.listOfRoasters[et].isPrimaryResource){let ht={id:0,projectCode:this.project.projectCode,siteCode:this.siteCode,attnDate:this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(e+1).toString().padStart(2,"0"),shiftCode:null===(c=this.listOfRoasters[et])||void 0===c?void 0:c.shiftCodesForMonth[e],employeeNumber:this.listOfRoasters[et].employeeNumber,isDefShiftOff:!1,isActive:!0,inTime:null===(p=this.listOfShiftCodes2.find(Y=>{var R;return Y.shiftCode==(null===(R=this.listOfRoasters[et])||void 0===R?void 0:R.shiftCodesForMonth[e])}))||void 0===p?void 0:p.inTime,outTime:null===(u=this.listOfShiftCodes2.find(Y=>{var R;return Y.shiftCode==(null===(R=this.listOfRoasters[et])||void 0===R?void 0:R.shiftCodesForMonth[e])}))||void 0===u?void 0:u.outTime,workingTime:null===(d=this.listOfShiftCodes2.find(Y=>{var R;return Y.shiftCode==(null===(R=this.listOfRoasters[et])||void 0===R?void 0:R.shiftCodesForMonth[e])}))||void 0===d?void 0:d.workingTime,isDefaultEmployee:!0,isPrimarySite:null===(_=this.listOfRoasters[et])||void 0===_?void 0:_.isPrimaryResource,isPosted:!1,altEmployeeNumber:"",altShiftCode:"",attendance:"P",refIdForAlt:0,shiftNumber:1};st+=+ht.workingTime.substring(0,2),P.push(ht)}}if(P.length>0){let H=(null===(h=this.daywiseConsolidateData[e])||void 0===h?void 0:h.tch)-(null===(A=this.daywiseConsolidateData[e])||void 0===A?void 0:A.hours);H<st||st==H&&this.daywiseConsolidateData[e].mins>0?this.notifyService.showError(this.translate.instant("Daily_Shift_Hours_Exceeding")):(null===(C=this.daywiseConsolidateData[e])||void 0===C?void 0:C.varInShift)<P.length?this.notifyService.showError(this.translate.instant("Daily_Contract_Shifts_Exceeding")):this.apiService.post("EmployeesAttendance/enterAutoAttendance",P).subscribe(z=>{this.getSelectedColumnAttendance(e),this.utilService.OkMessage(),this.activeColumn++},z=>{console.error(z),this.utilService.ShowApiErrorMessage(z)})}else{let H=-1;for(;-1==H;){for(let z=0;z<this.attendanceData.length;z++)0==(null===(S=this.attendanceData[z][this.activeColumn])||void 0===S?void 0:S.id)&&!(null===(L=this.attendanceData[z][this.activeColumn])||void 0===L?void 0:L.isDefShiftOff)&&!(null===(U=this.attendanceData[z][this.activeColumn])||void 0===U?void 0:U.isOnLeave)&&!(null===(M=this.attendanceData[z][this.activeColumn])||void 0===M?void 0:M.isWithDrawn)&&!(null===(O=this.attendanceData[z][this.activeColumn])||void 0===O?void 0:O.isTransfered)&&!(null===(F=this.attendanceData[z][this.activeColumn])||void 0===F?void 0:F.isResigned)&&(H=z);if(-1==H&&this.activeColumn++,this.listOfDays.length<this.activeColumn){H=this.activeColumn;break}}this.getSelectedColumnAttendance(e)}}getSelectedColumnAttendance(e){var o,n;this.isLoading=!0,this.inputListForDay=[];for(let r=0;r<this.listOfRoasters.length;r++){let c=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(e+1).toString().padStart(2,"0"),p={projectCode:this.project.projectCode,siteCode:this.siteCode,employeeNumber:null===(o=this.listOfRoasters[r])||void 0===o?void 0:o.employeeNumber,attnDate:c,shiftCode:null===(n=this.listOfRoasters[r])||void 0===n?void 0:n.shiftCodesForMonth[e]};this.inputListForDay.push(p)}let s={inputList:this.inputListForDay.splice(0)};this.apiService.post("EmployeesAttendance/getAllEmployeeAttendance",s).subscribe(r=>{let c=r;for(let p=0;p<c.length;p++)this.attendanceData[p][e]=c[p];this.isLoading=!1}),this.getActiveColumn()}openConfirmationDialog(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,n);p.componentInstance.dbops=e,p.componentInstance.modalTitle=o,p.componentInstance.confirmType=s,p.componentInstance.noOfUpdates=this.updatedAttendance.length,p.afterClosed().subscribe(u=>{(u&&1==u||u.res)&&("AutoAttendanceForMonth"==r?this.AutoAttendanceForMonth():"AutoAttendancePerDay"==r?this.AutoAttendancePerDay(c):"postAttendance"==r&&this.postAttendance())})}confirmAutoAttendanceForMonth(){this.openConfirmationDialog(g.Oi.create,"Are_You_Sure?",xt,"general","AutoAttendanceForMonth",0)}AutoAttendanceForMonth(){var e,o,n,s,r,c,p,u,d,_,h,A;let C=[];for(let S=0;S<this.listOfRoasters.length;S++)for(let L=0;L<this.noOfDays;L++){let U=!1;for(let O=0;O<this.listOfRoasters.length;O++)if(this.attendanceData[O][L].id>0){U=!0;break}let M=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(L+1).toString().padStart(2,"0");if(0==this.attendanceData[S][L].id&&!this.attendanceData[S][L].isDefShiftOff&&!(null===(e=this.attendanceData[S][L])||void 0===e?void 0:e.isOnLeave)&&!(null===(o=this.attendanceData[S][L])||void 0===o?void 0:o.isWithDrawn)&&!(null===(n=this.attendanceData[S][L])||void 0===n?void 0:n.isTransfered)&&!(null===(s=this.attendanceData[S][L])||void 0===s?void 0:s.isResigned)&&this.listOfRoasters[S].isPrimaryResource&&!U){let O={id:0,projectCode:this.project.projectCode,siteCode:this.siteCode,attnDate:M,shiftCode:null===(r=this.listOfRoasters[S])||void 0===r?void 0:r.shiftCodesForMonth[L],employeeNumber:this.listOfRoasters[S].employeeNumber,isDefShiftOff:!1,isActive:!0,inTime:null===(c=this.listOfShiftCodes2.find(F=>{var P;return F.shiftCode==(null===(P=this.listOfRoasters[S])||void 0===P?void 0:P.shiftCodesForMonth[L])}))||void 0===c?void 0:c.inTime,outTime:null===(p=this.listOfShiftCodes2.find(F=>{var P;return F.shiftCode==(null===(P=this.listOfRoasters[S])||void 0===P?void 0:P.shiftCodesForMonth[L])}))||void 0===p?void 0:p.outTime,isDefaultEmployee:!0,isPrimarySite:null===(u=this.listOfRoasters[S])||void 0===u?void 0:u.isPrimaryResource,isPosted:!1,altEmployeeNumber:"",altShiftCode:"",attendance:"P",refIdForAlt:0,shiftNumber:1};C.push(O)}}if(C.length>0){let S=(null===(d=this.Totals())||void 0===d?void 0:d.wh)-(null===(_=this.Totals())||void 0===_?void 0:_.total);S<C.length*this.workingHoursInSite||C.length*this.workingHoursInSite==S&&(null===(h=this.Totals())||void 0===h?void 0:h.totMins)>0?this.notifyService.showError(this.translate.instant("Monthly_Shift_Hours_Exceeding")):(null===(A=this.Totals())||void 0===A?void 0:A.varInShift)<C.length?this.notifyService.showError(this.translate.instant("Monthly_Contract_Shifts_Exceeding")):(this.isLoading=!0,this.apiService.post("EmployeesAttendance/enterAutoAttendance",C).subscribe(L=>{this.utilService.OkMessage(),this.loadData()},L=>{console.error(L),this.utilService.ShowApiErrorMessage(L)}))}else{let S=-1;for(;-1!=S;){for(let L=0;L<this.attendanceData.length;L++)0==this.attendanceData[L][this.activeColumn].id&&(S=L);-1==S&&this.activeColumn++}this.notifyService.showError(this.translate.instant("Default_Attedance_Already_Marked")),this.isLoading=!1}}DayWiseShiftCount(e){var o,n,s,r,c,p,u,d,_;let h=0,A=0,C=0,S=0,L=0,U=0;for(let O=0;O<this.attendanceData.length;O++)h=null==(null===(o=this.attendanceData[O][e])||void 0===o?void 0:o.nwTime)?h:h+(null===(n=this.attendanceData[O][e])||void 0===n?void 0:n.nwTime.hours),A=null==(null===(s=this.attendanceData[O][e])||void 0===s?void 0:s.nwTime)?A:A+(null===(r=this.attendanceData[O][e])||void 0===r?void 0:r.nwTime.minutes),S=(null===(c=this.attendanceData[O][e])||void 0===c?void 0:c.isPrimarySite)&&"x"!=(null===(p=this.listOfRoasters[O])||void 0===p?void 0:p.shiftCodesForMonth[e])?S+1:S,C=S*this.workingHoursInSite,L=null==(null===(u=this.attendanceData[O][e])||void 0===u?void 0:u.nwTime)?L:L+(null===(d=this.attendanceData[O][e])||void 0===d?void 0:d.shiftsCount),U+=null===(_=this.attendanceData[O][e])||void 0===_?void 0:_.otCount;return h+=(A-A%60)/60,A%=60,this.daywiseConsolidateData[e].tch=C,this.daywiseConsolidateData[e].tcs=S,this.daywiseConsolidateData[e].taws=L,this.daywiseConsolidateData[e].varInShift=S-L,this.daywiseConsolidateData[e].hours=h,this.daywiseConsolidateData[e].mins=A,this.daywiseConsolidateData[e].ot_count=U,this.daywiseConsolidateData[e]}EmployeeWiseShiftCount(e){var o,n,s,r,c,p,u,d,_,h,A,C,S,L,U,M,O,F,P,st,H,z,et;let ht=0,ct=0,Y=0,R=0,$=0,St=0,qt=0,Tt=0,Ct=0,I=0,J=0,yt=0,bt=0,wt=0,vt=0,Lt=0,G=0,K=0,tt=0,rt=0;for(let _t=0;_t<this.attendanceData[e].length;_t++)ht+=null===(o=this.attendanceData[e][_t])||void 0===o?void 0:o.nwTime.hours,ct+=null===(n=this.attendanceData[e][_t])||void 0===n?void 0:n.nwTime.minutes,Y=(null===(s=this.attendanceData[e][_t])||void 0===s?void 0:s.isDefShiftOff)?Y+1:Y,R="A"!=(null===(r=this.attendanceData[e][_t])||void 0===r?void 0:r.attendance)&&"S"!=(null===(c=this.attendanceData[e][_t])||void 0===c?void 0:c.attendance)||(null===(p=this.attendanceData[e][_t])||void 0===p?void 0:p.isOnLeave)||(null===(u=this.attendanceData[e][_t])||void 0===u?void 0:u.isDefShiftOff)?R:R+1,$=(null===(d=this.attendanceData[e][_t])||void 0===d?void 0:d.isWorkedOnday)?$+1:$,St+=null===(_=this.attendanceData[e][_t])||void 0===_?void 0:_.lateDays,qt+=null===(h=this.attendanceData[e][_t])||void 0===h?void 0:h.lateHrs.hours,Tt+=null===(A=this.attendanceData[e][_t])||void 0===A?void 0:A.lateHrs.minutes,Ct+=null===(C=this.attendanceData[e][_t])||void 0===C?void 0:C.overTime.hours,I+=null===(S=this.attendanceData[e][_t])||void 0===S?void 0:S.overTime.minutes,J=(null===(L=this.attendanceData[e][_t])||void 0===L?void 0:L.isAbsent)?J+1:J,yt+=null===(U=this.attendanceData[e][_t])||void 0===U?void 0:U.shiftsCount,bt+=null===(M=this.attendanceData[e][_t])||void 0===M?void 0:M.contractualShifts,wt=(null===(O=this.attendanceData[e][_t])||void 0===O?void 0:O.leavesData.al)?wt+1:wt,vt=(null===(F=this.attendanceData[e][_t])||void 0===F?void 0:F.leavesData.ul)?vt+1:vt,Lt=(null===(P=this.attendanceData[e][_t])||void 0===P?void 0:P.leavesData.el)?Lt+1:Lt,G=(null===(st=this.attendanceData[e][_t])||void 0===st?void 0:st.leavesData.sl)?G+1:G,K=(null===(H=this.attendanceData[e][_t])||void 0===H?void 0:H.leavesData.stl)?K+1:K,tt=(null===(z=this.attendanceData[e][_t])||void 0===z?void 0:z.leavesData.w)?tt+1:tt,rt+=null===(et=this.attendanceData[e][_t])||void 0===et?void 0:et.otCount;return this.employeeConsolidateData[e].total=ht+(ct-ct%60)/60,this.employeeConsolidateData[e].totMins=ct%60,this.employeeConsolidateData[e].off=Y,this.employeeConsolidateData[e].wd=this.noOfDays,this.employeeConsolidateData[e].nwd=$,this.employeeConsolidateData[e].a=R,this.employeeConsolidateData[e].wh=this.noOfDays*this.workingHoursInSite,this.employeeConsolidateData[e].lateDays=St,this.employeeConsolidateData[e].lateHrs=qt+(Tt-Tt%60)/60,this.employeeConsolidateData[e].lateMins=Tt%60,this.employeeConsolidateData[e].overTime=Ct+(I-I%60)/60,this.employeeConsolidateData[e].overTimeMins=I%60,this.employeeConsolidateData[e].notAssigned=J,this.employeeConsolidateData[e].actualShifts=yt,this.employeeConsolidateData[e].contractualShifts=bt,this.employeeConsolidateData[e].al_count=wt,this.employeeConsolidateData[e].ul_count=vt,this.employeeConsolidateData[e].el_count=Lt,this.employeeConsolidateData[e].sl_count=G,this.employeeConsolidateData[e].stl_count=K,this.employeeConsolidateData[e].w_count=tt,this.employeeConsolidateData[e].penalty=2*R,this.employeeConsolidateData[e].ot_count=rt,this.employeeConsolidateData[e]}Totals(){var e,o,n,s,r,c,p,u,d,_,h,A,C,S,L,U,M,O,F,P,st,H,z,et,ht;let ct=0,Y=0,R=0,$=0,St=0,qt=0,Tt=0,Ct=0,I=0,J=0,yt=0,bt=0,wt=0,vt=0,Lt=0,G=0,K=0,tt=0,rt=0,_t=0,Qt=0,Bt=0;for(let gt=0;gt<this.attendanceData.length;gt++){let Qe=0;for(let De=0;null===(e=this.listOfRoasters[gt])||void 0===e?void 0:e.shiftCodesForMonth.length;De++)if(""!=(null===(o=this.listOfRoasters[gt])||void 0===o?void 0:o.shiftCodesForMonth[De])&&"x"!=(null===(n=this.listOfRoasters[gt])||void 0===n?void 0:n.shiftCodesForMonth[De])){Qe=De;break}St=null==this.attendanceData[gt][Qe]?St:St+(null===(s=this.employeeConsolidateData[gt])||void 0===s?void 0:s.wd),qt=null==this.attendanceData[gt][Qe]?qt:qt+(null===(r=this.employeeConsolidateData[gt])||void 0===r?void 0:r.wh),null==this.employeeConsolidateData[gt]||(ct+=null===(c=this.employeeConsolidateData[gt])||void 0===c?void 0:c.total,R+=null===(p=this.employeeConsolidateData[gt])||void 0===p?void 0:p.off,Y+=null===(u=this.employeeConsolidateData[gt])||void 0===u?void 0:u.totMins,$+=null===(d=this.employeeConsolidateData[gt])||void 0===d?void 0:d.nwd,Tt+=null===(_=this.employeeConsolidateData[gt])||void 0===_?void 0:_.lateHrs,Ct+=null===(h=this.employeeConsolidateData[gt])||void 0===h?void 0:h.lateMins,I+=null===(A=this.employeeConsolidateData[gt])||void 0===A?void 0:A.overTime,J+=null===(C=this.employeeConsolidateData[gt])||void 0===C?void 0:C.overTimeMins,yt+=null===(S=this.employeeConsolidateData[gt])||void 0===S?void 0:S.notAssigned,bt+=null===(L=this.employeeConsolidateData[gt])||void 0===L?void 0:L.actualShifts,vt+=null===(U=this.employeeConsolidateData[gt])||void 0===U?void 0:U.al_count,Lt+=null===(M=this.employeeConsolidateData[gt])||void 0===M?void 0:M.ul_count,G+=null===(O=this.employeeConsolidateData[gt])||void 0===O?void 0:O.el_count,K+=null===(F=this.employeeConsolidateData[gt])||void 0===F?void 0:F.sl_count,tt+=null===(P=this.employeeConsolidateData[gt])||void 0===P?void 0:P.stl_count,rt+=null===(st=this.employeeConsolidateData[gt])||void 0===st?void 0:st.w_count,_t+=null===(H=this.employeeConsolidateData[gt])||void 0===H?void 0:H.penalty,Bt+=null===(z=this.employeeConsolidateData[gt])||void 0===z?void 0:z.a,Qt+=null===(et=this.employeeConsolidateData[gt])||void 0===et?void 0:et.ot_count)}let Vt=this.diffTime(ct,Y,I+(J-J%60)/60,J%60).hrs,fe=this.diffTime(ct,Y,I+(J-J%60)/60,J%60).mins,Ue=this.sumTime(Vt,fe,Tt,Ct).hrs,Q=this.sumTime(Vt,fe,Tt,Ct).mins,Dt=this.multiplyTime(I+(J-J%60)/60,J%60,1.5),xo=this.multiplyTime(I+(J-J%60)/60,J%60,.5),X9=this.sumTime(ct+(Y-Y%60)/60,Y%60,xo.hrs,xo.mins);for(let gt=0;gt<this.daywiseConsolidateData.length;gt++)wt+=this.daywiseConsolidateData[gt].tcs;let K9={total:ct+(Y-Y%60)/60,offs:R,totMins:Y%60,nwd:$,wd:St,wh:qt,lateHrs:Tt+(Ct-Ct%60)/60,lateMins:Ct%60,overTime:I+(J-J%60)/60,overTimeMins:J%60,notAssigned:yt,actualShifts:bt,contractualShifts:wt,al_count:vt,ul_count:Lt,el_count:G,sl_count:K,stl_count:tt,w_count:rt,penalty:_t,a:Bt,varInShifts:wt-bt,ot_count:Qt,tawhWoOt:Ue,tawmWoOt:Q,diffHrs:this.diffTime(qt,0,ct+(Y-Y%60)/60,Y%60).hrs,diffMins:this.diffTime(qt,0,ct+(Y-Y%60)/60,Y%60).mins,spl_ot:Dt,tAWOt:X9};return this.attendanceData.length==this.listOfRoasters.length&&0!=this.listOfRoasters.length&&(null===(ht=this.attendanceData[this.attendanceData.length-1])||void 0===ht?void 0:ht.length)>=this.noOfDays-1&&(this.isDataLoading=!1),K9}showTime(e,o){return this.showMins?e.toString()+"."+o.toString():e.toString()}diffTime(e,o,n,s){return{hrs:o-s<0?e-n-1:e-n,mins:o-s<0?o-s+60:o-s}}sumTime(e,o,n,s){let r=e+n,c=o+s;return c>=60&&(r+=c%60,c%=60),{hrs:r,mins:c}}getSiteData(e){return this.siteCodeList.find(o=>o.siteCode==e)}getAttendanceCellData(e,o){var n,s,r,c,p,u,d,_,h,A,C,S,L,U,M,O,F,P,st,H,z,et,ht,ct,Y,R,$,St,qt,Tt,Ct,I,J,yt,bt,wt,vt;if((null===(n=this.attendanceData[e][o])||void 0===n?void 0:n.isOnLeave)&&!(null===(s=this.attendanceData[e][o])||void 0===s?void 0:s.isWithDrawn)){if(this.attendanceData[e][o].leavesData.al)return"AL";if(this.attendanceData[e][o].leavesData.ul)return"UL";if(this.attendanceData[e][o].leavesData.sl)return"SL";if(this.attendanceData[e][o].leavesData.el)return"EL";if(this.attendanceData[e][o].leavesData.stl)return"STL"}else{if((null===(r=this.attendanceData[e][o])||void 0===r?void 0:r.isOnLeave)&&!(null===(c=this.attendanceData[e][o])||void 0===c?void 0:c.isWithDrawn))return"W";if(null===(p=this.attendanceData[e][o])||void 0===p?void 0:p.isTransfered)return"TR";if(null===(u=this.attendanceData[e][o])||void 0===u?void 0:u.isResigned)return"R";if(-1==(null===(d=this.attendanceData[e][o])||void 0===d?void 0:d.id))return"";if(null===(_=this.attendanceData[e][o])||void 0===_?void 0:_.isAbsent)return"A";if((null===(h=this.attendanceData[e][o])||void 0===h?void 0:h.isOnLeave)||(null===(A=this.attendanceData[e][o])||void 0===A?void 0:A.isWithDrawn)){if(null===(vt=this.attendanceData[e][o])||void 0===vt?void 0:vt.isWithDrawn)return"W"}else{if(null===(C=this.attendanceData[e][o])||void 0===C?void 0:C.isWorkedOnday)return this.showTime(null===(S=this.attendanceData[e][o])||void 0===S?void 0:S.nwTime.hours,null===(L=this.attendanceData[e][o])||void 0===L?void 0:L.nwTime.minutes);if(0==(null===(U=this.attendanceData[e][o])||void 0===U?void 0:U.id)&&!(null===(M=this.attendanceData[e][o])||void 0===M?void 0:M.isDefShiftOff))return"-";if(0==(null===(O=this.attendanceData[e][o])||void 0===O?void 0:O.id)&&(null===(F=this.attendanceData[e][o])||void 0===F?void 0:F.isDefShiftOff)&&!(null===(P=this.attendanceData[e][o])||void 0===P?void 0:P.isWorkedOnday))return"OF";if((null===(st=this.attendanceData[e][o])||void 0===st?void 0:st.id)>0&&(null===(H=this.attendanceData[e][o])||void 0===H?void 0:H.isDefShiftOff)&&!(null===(z=this.attendanceData[e][o])||void 0===z?void 0:z.isWorkedOnday))return"O";if((null===(et=this.attendanceData[e][o])||void 0===et?void 0:et.id)>0&&(null===(ht=this.attendanceData[e][o])||void 0===ht?void 0:ht.isDefShiftOff)&&(null===(ct=this.attendanceData[e][o])||void 0===ct?void 0:ct.isWorkedOnday))return"OT";if((null===(Y=this.attendanceData[e][o])||void 0===Y?void 0:Y.id)>0&&(null===(R=this.attendanceData[e][o])||void 0===R?void 0:R.isDefShiftOff)&&(0!=(null===($=this.attendanceData[e][o])||void 0===$?void 0:$.nwTime.hours)||0!=(null===(St=this.attendanceData[e][o])||void 0===St?void 0:St.nwTime.minutes)))return(null===(qt=this.attendanceData[e][o])||void 0===qt?void 0:qt.nwTime.hours.toSting())+"."+(null===(Tt=this.attendanceData[e][o])||void 0===Tt?void 0:Tt.nwTime.minutes.toString());if((null===(Ct=this.attendanceData[e][o])||void 0===Ct?void 0:Ct.id)>0&&!(null===(I=this.attendanceData[e][o])||void 0===I?void 0:I.isDefShiftOff))return 0!=(null===(J=this.attendanceData[e][o])||void 0===J?void 0:J.nwTime.hours)||0!=(null===(yt=this.attendanceData[e][o])||void 0===yt?void 0:yt.nwTime.minutes)?(null===(bt=this.attendanceData[e][o])||void 0===bt?void 0:bt.nwTime.hours.toSting())+"."+(null===(wt=this.attendanceData[e][o])||void 0===wt?void 0:wt.nwTime.minutes.toString()):"A"}}return""}calculateStyles(e,o){return this.attendanceData[e][o].isDefShiftOff?"background-color: red":"background-color: blue"}multiplyTime(e,o,n){return{hrs:o*n>60?1.5*e+o*n/60:e*n,mins:o*n%60}}devideTime(e,o,n){return{hrs:(e-e%n)/n,mins:(e%n+o-(e%n+o)%n)/n}}convertTimeToShifts(e,o,n){return parseFloat(Number(((60*e*60+60*o)/(60*n*60)).toString()).toFixed(1))}getAllAttendance(){var e,o;this.isLoading=!0,this.notPostedAtndncExist=!0,this.attendanceData=[],this.employeeConsolidateData=[],this.daywiseConsolidateData=[],this.updatedAttendance=[];for(let n=0;n<this.listOfRoasters.length;n++){this.attendanceData[n]=[],this.employeeConsolidateData.push({total:0,totMins:0,off:0,wd:0,a:0,nwd:0,wh:0,lateDays:0,lateHrs:0,lateMins:0,overTime:0,overTimeMins:0,notAssigned:0,actualShifts:0,al_count:0,ul_count:0,el_count:0,sl_count:0,w_count:0,ot_count:0});for(let c=0;c<this.noOfDays;c++){this.daywiseConsolidateData.push({tch:0,tch_min:0,tcs:0,ot_count:0});let u=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(c+1).toString().padStart(2,"0"),d={projectCode:this.project.projectCode,siteCode:this.siteCode,employeeNumber:null===(e=this.listOfRoasters[n])||void 0===e?void 0:e.employeeNumber,attnDate:u,shiftCode:null===(o=this.listOfRoasters[n])||void 0===o?void 0:o.shiftCodesForMonth[c]};this.inputArray.push(d)}let r={inputList:this.inputArray.splice(0)};this.apiService.post("EmployeesAttendance/getAllEmployeeAttendance",r).subscribe(c=>{var p,u,d,_,h,A,C,S,L,U;let M=c,O=0;for(let F=0;F<this.noOfDays;F++)this.attendanceData[n][F]=M[O],(null===(p=M[O])||void 0===p?void 0:p.isPosted)||!((null===(u=M[O])||void 0===u?void 0:u.id)>0)||(null===(d=M[O])||void 0===d?void 0:d.employeeNumber)!=(null===(_=M[O])||void 0===_?void 0:_.altEmployeeNumber)&&""!=(null===(h=M[O])||void 0===h?void 0:h.altEmployeeNumber)&&null!=(null===(A=M[O])||void 0===A?void 0:A.altEmployeeNumber)||"P"!=(null===(C=M[O])||void 0===C?void 0:C.attendance)&&"OT"!=(null===(S=M[O])||void 0===S?void 0:S.attendance)?""!=(null===(L=M[O])||void 0===L?void 0:L.altEmployeeNumber)&&(null===(U=M[O])||void 0===U?void 0:U.id)>0&&this.apiService.get("EmployeesAttendance/getAltAttendanceById",M[O].id).subscribe(P=>{P&&!P.isPosted&&(null==P?void 0:P.id)>0&&((null==P?void 0:P.employeeNumber)==(null==P?void 0:P.altEmployeeNumber)||""==(null==P?void 0:P.altEmployeeNumber)||null==(null==P?void 0:P.altEmployeeNumber))&&("P"==(null==P?void 0:P.attendance)||"OT"==P.attendance)&&(this.notPostedAtndncExist=!1,this.updatedAttendance.findIndex(st=>st.id==P.id)<0&&this.updatedAttendance.push(P))}):(this.notPostedAtndncExist=!1,this.updatedAttendance.push(M[O])),(n==this.listOfRoasters.length-1||0==this.listOfRoasters.length)&&(this.getActiveColumn(),this.isLoading=!1),O++})}}getShiftTypeNumber(e){var o,n,s,r;if(-1==e)return{number:-1,nameEn:"-",nameAr:"-"};let c=0,p=this.listOfShiftCodes2.findIndex(_=>"O"==_.shiftCode)>=0,u=Number(null===(o=this.listOfShiftCodes2[e])||void 0===o?void 0:o.inTime.substring(0,2)),d=Number(null===(n=this.listOfShiftCodes2[e])||void 0===n?void 0:n.inTime.substring(3,2));for(let _=0;_<this.listOfShiftCodes2.length;_++){let h=Number(null===(s=this.listOfShiftCodes2[_])||void 0===s?void 0:s.inTime.substring(0,2)),A=Number(null===(r=this.listOfShiftCodes2[_])||void 0===r?void 0:r.inTime.substring(0,2));(u>h||u==h&&d>A)&&c++}return p?this.shiftTypeNames[c]:this.shiftTypeNames[c+1]}exportexcel(){let e=document.getElementById("excel_table"),o=document.getElementById("excel_table2"),n=document.getElementById("excel_table3"),s=document.getElementById("excel_table4");const r=mt.P6.table_to_sheet(e),c=mt.P6.table_to_sheet(o),p=mt.P6.table_to_sheet(n),u=mt.P6.table_to_sheet(s),d=mt.P6.book_new();mt.P6.book_append_sheet(d,r,"Sheet1"),mt.P6.book_append_sheet(d,c,"Sheet2"),mt.P6.book_append_sheet(d,p,"Sheet3"),mt.P6.book_append_sheet(d,u,"Sheet4"),mt.NC(d,"Attendance_"+this.project.projectCode+"_"+this.siteCode+"_"+this.month+"_"+this.year+".xlsx")}getRoasterReport(){if(this.roasterReport=[],this.totRoastersReport={contractualShifts:0,offs:0,qty:0},0!=this.listOfRoasters.length){let e=this.listOfRoasters.filter(o=>o.isPrimaryResource);return this.attendanceData.length>=e.length&&this.attendanceData[this.attendanceData.length-1].length==this.noOfDays&&e.forEach(o=>{let n=this.roasterReport.findIndex(p=>p.skillsetCode==o.skillsetCode),s=0,r=0;o.shiftCodesForMonth.forEach(p=>{let u=this.listOfShiftCodes2.findIndex(d=>d.shiftCode==p&&d.isOff)>=0;this.listOfShiftCodes2.findIndex(d=>"x"!=p&&d.shiftCode==p)>=0&&u?r++:this.listOfShiftCodes2.findIndex(d=>d.shiftCode==p)>=0&&!u&&"x"!=p&&""!=p&&s++});let c={skillsetCode:o.skillsetCode,contractualShifts:n>=0?this.roasterReport[n].contractualShifts+s:s,offs:n>=0?this.roasterReport[n].offs+r:r,qty:n>=0?this.roasterReport[n].qty+1:1};n>=0?this.roasterReport[n]=c:this.roasterReport.push(c),this.totRoastersReport.contractualShifts+=s,this.totRoastersReport.offs+=r,this.totRoastersReport.qty+=1}),!0}return!1}confirmClearAttendance(){0==this.updatedAttendance.length?this.notifyService.showInfo(this.translate.instant("No_Updates")):this.openClearAttendanceWindow(this.updatedAttendance.slice(),g.Oi.create,"Clear_Attendance","Save",Pe)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.uw),t.Y36(W),t.Y36(T.so),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-employee-attendance"]],features:[t.qOj],decls:75,vars:56,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","monthYear",1,"form-control","datapickerinput",3,"matDatepicker","min","max","placeholder","click"],["matSuffix","",3,"for"],["startView","year","data-date-format","mm/yyyy",3,"monthSelected"],["dp2",""],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["class","modal-footer",4,"ngIf"],[3,"value"],[1,"table-responsive"],["width","100%","id","excel_table"],["colspan","8","id","bg_white",2,"text-align","center"],[1,"baw"],[4,"ngFor","ngForOf"],["colspan","2",1,"baw"],[3,"isLoading"],["id","excel_table2",1,"sambaAttendanceTable","table-bordered","no-wrap"],["colspan","4","id","emptyCell"],["id","emptyCell",4,"ngFor","ngForOf"],["colspan","4",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","font-size:0.775rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight:600;padding: 2px",4,"ngFor","ngForOf"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","lightgreen"],["width","2%",2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","lightgreen"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","red"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","#c0d5fa"],["colspan","2",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","text-align","center"],["colspan","4",2,"text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: #e8eef3",4,"ngFor","ngForOf"],[2,"background-color","lightgray"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600","padding","2px"],["style","background-color:yellow",4,"ngFor","ngForOf"],[2,"background-color","yellow"],[2,"background-color","white"],["style","background-color:cornsilk",4,"ngFor","ngForOf"],[2,"background-color","cornsilk"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: yellow",4,"ngFor","ngForOf"],["colspan","4",2,"background-color","sandybrown","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: sandybrown",4,"ngFor","ngForOf"],[2,"background-color","sandybrown"],["id","emptyCell"],["class","clickaction clickicons","style","font-size:smaller",3,"matTooltip","click",4,"ngIf"],[1,"clickaction","clickicons",2,"font-size","smaller",3,"matTooltip","click"],[1,"fas","fa-sync-alt",2,"resize","both"],[2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],[2,"padding","3px","text-align","left"],[2,"padding","5px",3,"id"],["style","padding: 2px; text-align: center;",3,"id","click","contextmenu",4,"ngFor","ngForOf"],[2,"padding","2px","text-align","center",3,"id","click","contextmenu"],["hidden",""],[2,"background-color","#e8eef3"],[1,"col-md-12","col-lg-12",2,"padding","5px","align-items","center"],[1,"row","mt-1"],[1,"col-md-5","col-lg-5",2,"padding-right","5px"],["border","1","cellpadding","0","cellspacing","0","id","excel_table3",2,"width","100%","background-color","white"],[2,"width","75%","text-align","left","border","1px solid #878787","padding","2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","background-color","white"],[2,"border","1px solid #878787","padding","2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500","background-color","white"],[1,"col-md-4","col-lg-4",2,"padding-right","5px"],["border","1","cellpadding","0","cellspacing","0","id","excel_table4",2,"width","100%","background-color","white"],[2,"border","1px solid #878787","padding","2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","background-color","white"],[2,"border","1px solid #878787","padding","2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600",3,"id"],[2,"border","1px solid #878787","padding","2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600",3,"id"],[1,"modal-footer"],["class","row mt-12","hidden","",4,"ngIf"],["class","row mt-12",4,"ngIf"],[1,"row","mt-12"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["hidden","",1,"row","mt-12"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],[1,"col-md-6","col-lg-6","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-danger",3,"value","click"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"input",15),t.ALo(22,"translate"),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"label",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",13),t.TgZ(30,"div",14),t._UZ(31,"input",17),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(35,"div",11),t.TgZ(36,"div",13),t.TgZ(37,"label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",18),t.qZA(),t.qZA(),t.TgZ(41,"div",11),t.TgZ(42,"div",13),t.TgZ(43,"label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"input",19),t.qZA(),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"div",13),t.TgZ(49,"label",12),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"select",20),t.NdJ("change",function(r){return o.onSelectSiteCode(r)}),t.TgZ(53,"option",21),t._uU(54),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.YNc(57,YA,2,3,"option",22),t.qZA(),t._UZ(58,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(59,"div",11),t.TgZ(60,"div",13),t.TgZ(61,"label",12),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"div",13),t.TgZ(65,"div",14),t.TgZ(66,"input",23),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(70);return o.openDatePicker(r)}),t.ALo(67,"translate"),t.qZA(),t._UZ(68,"mat-datepicker-toggle",24),t.TgZ(69,"mat-datepicker",25,26),t.NdJ("monthSelected",function(r){t.CHM(n);const c=t.MAs(70);return o.closeDatePicker(r,c)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(71,BA,50,37,"div",27),t.YNc(72,mT,198,56,"div",27),t.YNc(73,NT,62,51,"div",28),t.YNc(74,MT,10,7,"div",29),t.qZA()}if(2&e){const n=t.MAs(70);t.xp6(1),t.Oqu(t.lcZ(2,28,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(12),t.Oqu(t.lcZ(18,30,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(22,32,"Please_Enter")," ",t.lcZ(23,34,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(28,36,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(32,38,"Please_Enter")," ",t.lcZ(33,40,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(39,42,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(45,44,"Project_End_Date")),t.xp6(6),t.Oqu(t.lcZ(51,46,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(55,48,"Select")," ",t.lcZ(56,50,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(63,52,"Time_Sheet_Month")),t.xp6(4),t.hYB("placeholder","",t.lcZ(67,54,"Select")," ","Year_Month",""),t.Q6J("matDatepicker",n)("min",o.minDate)("max",o.maxDate),t.xp6(2),t.Q6J("for",n),t.xp6(3),t.Q6J("ngIf",o.getRoasterReport()),t.xp6(1),t.Q6J("ngIf",0!=o.listOfRoasters.length),t.xp6(1),t.Q6J("ngIf",0!=o.listOfRoasters.length),t.xp6(1),t.Q6J("ngIf",!o.isLoading)}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg,j.hl,j.nW,ft.R9,j.Mq,Z.O5,At.z,ut.gM],pipes:[f.X$],styles:["#emptyCell[_ngcontent-%COMP%] {\n    background-color: white;\n    border: none;\n    outline: none;\n    font-size: small;\n  }\n\n  #bg_gray[_ngcontent-%COMP%] {\n    background-color: lightgray; \n  }\n\n  #bg_white[_ngcontent-%COMP%] {\n    background-color: white; \n  }\n\n  #bg_red[_ngcontent-%COMP%] {\n    background-color: red; \n  }\n\n  #bg_black[_ngcontent-%COMP%] {\n    background-color: #e8eef3; \n  }\n\n  #bg_Active[_ngcontent-%COMP%] {\n    background-color: orange; \n  }\n\n\n  #bg_Shift0[_ngcontent-%COMP%] {\n    background-color: #4cff00; \n  }\n\n  #bg_Shift1[_ngcontent-%COMP%] {\n    background-color: #b200ff; \n  }\n\n  #bg_Shift2[_ngcontent-%COMP%] {\n    background-color: #0094ff; \n  }\n\n\n  #bg_Shift3[_ngcontent-%COMP%] {\n    background-color: #ff006e; \n  }\n   #bg_Shift4[_ngcontent-%COMP%] {\n    background-color: lightgreen; \n  }\n\n  #bg_offShift[_ngcontent-%COMP%] {\n    background-color: yellow;\n  }\n  #bg_Posted[_ngcontent-%COMP%] {\n    background-color: #d2fa9c;\n  }\n\n\n\n\n\n\n\n\n  #attendTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: black;\n    border-width: 1px;\n    border-block-color: black;\n    border-block: solid;\n    border-block-width: 1px;\n    border-inline-color: aqua\n  }\n\n  table.sambaAttendanceTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: #e8eef3;\n    border-width: 1px;\n    border-block-color: #e8eef3;\n    border-block: solid;\n    border-block-width: 1px;\n    background-color: lightgray;\n    border-inline-color: #e8eef3;\n    border-inline-width: 1px;\n    border-top-width: 1px;\n    border-top-color: #e8eef3;\n    border-bottom-width: 1px;\n    border-bottom-color: #e8eef3;\n    padding: 1px,1px,1px,1px;\n    text-align: center;\n  }\n\n  table.sambaAttendanceTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: black;\n    border-width: 1px;\n    width: 100%\n  }\n\n  th.baw[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: black;\n    border-width: 1px;\n    border-block-color: black;\n    border-block: solid;\n    border-block-width: 1px;\n    background-color: lightgray;\n    border-inline-color: black;\n    border-inline-width: 1px;\n    border-top-width: 1px;\n    border-top-color: black;\n    border-bottom-width: 1px;\n    border-bottom-color: black;\n    padding: 1px,1px,1px,1px;\n    text-align: center;\n    font-size: 0.775rem !important;\n    color: #000000;\n    font-family: 'Poppins', sans-serif;\n    font-weight: 600;\n    padding: 2px\n  }\n\n  td.baw[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: black;\n    border-width: 1px;\n    border-block-color: black;\n    border-block: solid;\n    border-block-width: 1px;\n    background-color: white;\n    border-inline-color: black;\n    border-inline-width: 1px;\n    border-inline-width: 1px;\n    border-top-width: 1px;\n    border-top-color: black;\n    border-bottom-width: 1px;\n    border-bottom-color: black;\n    padding: 1px,1px,1px,1px;\n    text-align: center;\n    font-size: 0.675rem !important;\n    color: #000000;\n    font-family: 'Poppins', sans-serif;\n    font-weight: 500;\n    padding: 2px\n  }"]}),i})();function RT(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function PT(i,a){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function FT(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function IT(i,a){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function YT(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name")," "))}function JT(i,a){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng)}}function QT(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function BT(i,a){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function HT(i,a){1&i&&(t.TgZ(0,"th",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function $T(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().shiftPlan(n)}),t._UZ(1,"i",37),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Shift_Plan"))}}function VT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().skillsetPlan(n)}),t._UZ(1,"i",38),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("SkillSet_Plan"))}}function GT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().resourceCosting(n)}),t._UZ(2,"i",40),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().logisticsCosting(n)}),t._UZ(5,"i",41),t._uU(6,"\xa0"),t.qZA(),t.TgZ(7,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().materialCosting(n)}),t._UZ(8,"i",42),t._uU(9,"\xa0"),t.qZA(),t.TgZ(10,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().financialExpenseCosting(n)}),t._UZ(11,"i",43),t._uU(12,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Resource_Costing")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Logistics_Costing")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Material_Costing")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Financial_Expense_Costing"))}}function WT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().estimationReport(n)}),t._UZ(1,"i",44),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Estimation_Report"))}}function zT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().summaryReport(n)}),t._UZ(1,"i",45),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Summary_Report"))}}function XT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveEstimation(n)}),t._UZ(1,"i",46),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Estimation"))}}function KT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printEstimation(n)}),t._UZ(1,"i",47),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Print_Estimation"))}}function t3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().convertToProposal(n.projectCode)}),t._UZ(1,"i",48),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Convert_To_Proposal"))}}function e3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printProposal(n)}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Print_Proposal"))}}function o3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().convertToContract(n)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Convert_To_Contract"))}}function i3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().calendarDays(n)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Generate_Monthly_Roaster"))}}function n3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().assignEmployyesToProjectSite(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Assign_Employyes_To_ProjectSite"))}}function a3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().mappingEmpToResourceForProjectSite(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Mapping_Employees_To_Resource_For_ProjectSite"))}}function s3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().openMonthlyRoaster(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Lock_Shifts"))}}function r3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewContract(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Contract"))}}function l3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().employeeAttendance(n)}),t._UZ(1,"i",57),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Employee_Attendance"))}}function c3(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,GT,13,4,"span",35),t.YNc(2,WT,3,1,"span",34),t.YNc(3,zT,3,1,"span",34),t.YNc(4,XT,3,1,"span",34),t.YNc(5,KT,3,1,"span",34),t.YNc(6,t3,3,1,"span",34),t.YNc(7,e3,3,1,"span",39),t.YNc(8,o3,3,1,"span",34),t.YNc(9,i3,3,1,"span",34),t.YNc(10,n3,3,1,"span",34),t.YNc(11,a3,3,1,"span",34),t.YNc(12,s3,3,1,"span",34),t.YNc(13,r3,3,1,"span",34),t.YNc(14,l3,3,1,"span",34),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.isConvrtedToContract&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isApproved&&e.hasAuthority&&e.authorities.canApproveEstimation&&!e.approvedUser),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isApproved&&e.hasAuthority&&!e.isConvertedToProposal),t.xp6(1),t.Q6J("ngIf",e.isConvertedToProposal),t.xp6(1),t.Q6J("ngIf",e.isConvertedToProposal&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract)}}function p3(i,a){if(1&i&&(t.TgZ(0,"td",33),t.YNc(1,$T,3,1,"span",34),t.YNc(2,VT,3,1,"span",34),t.YNc(3,c3,15,14,"span",35),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.authorities.canModifyEstimation),t.xp6(1),t.Q6J("ngIf",e.authorities.canModifyEstimation&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isShiftsAssigned&&e.isSkillSetsMapped)}}function u3(i,a){1&i&&t._UZ(0,"tr",58)}function d3(i,a){1&i&&t._UZ(0,"tr",59)}const _3=function(){return{standalone:!0}};let m3=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=_,this.pageService=h,this.translate=A,this.displayedColumns=["customerCode","projectCode","Project_Name","Branch_Code","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.form=this.fb.group({}),this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.searchValue="",this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Project/getProjectsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.isArab=this.isArab,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}resourceCosting(e){this.openDialogManage(e,g.Oi.create,"Resource_Costing","Save",ie)}logisticsCosting(e){this.openDialogManage(e,g.Oi.create,"Logistics_Vehicle_Costing","Save",ae)}materialCosting(e){this.openDialogManage(e,g.Oi.create,"Material_Costing","Save",se)}financialExpenseCosting(e){this.openDialogManage(e,g.Oi.create,"Financial_Epense_Costing","Save",re)}estimationReport(e){this.openDialogManage(e,g.Oi.create,"Estimation_Cnsolidate_Report","Save",le)}summaryReport(e){this.openDialogManage(e,g.Oi.create,"Estimation_Summary_Report","Save",ce)}convertToContract(e){this.openFullWindow(e,g.Oi.create,"Creating_Contract","Save",z2)}printEstimation(e){this.openDialogManage(e,g.Oi.create,"Estimation_Cnsolidate_Report","Print",me)}assignEmployyesToProjectSite(e){this.openFullWindow(e,g.Oi.create,"Assigning_Employees_To_Site","Save",ge)}mappingEmpToResourceForProjectSite(e){this.openDialogManage(e,g.Oi.create,"Mapping_Employees_To_Resources_For_Site","Save",he)}printProposal(e){this.openDialogManage(e,g.Oi.create,"Project_Proposal","Print",_e)}shiftPlan(e){this.openDialogManage(e,g.Oi.create,"Shifts_Plan_For_Project","Save",pe)}skillsetPlan(e){this.openDialogManage(e,g.Oi.create,"Skillset_Plan_For_Project","Save",ue)}calendarDays(e){this.openFullWindow(e,g.Oi.create,"Calander_Days","Save",de)}viewContract(e){this.openFullWindow(e,g.Oi.create,"Project_Contract","View",y6)}employeeAttendance(e){this.openFullWindow(e,g.Oi.create,"Employee_Attendance","View",Ze)}submit(){}openMonthlyRoaster(e){this.openFullWindow(e,g.Oi.create,"Monthly_Roaster","Save",ne)}approveEstimation(e){this.openApprovalDialog(e.branchCode,e.projectCode,g.Oi.create,"Estimation_Approval","Save","EST",Wt)}convertToProposal(e){this.form.value.projectCode=e,this.apiService.post("ProjectBudgetCosting/convertProjectToProposal",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.ngOnInit()},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}translateToolTip(e){return`${this.translate.instant(e)}`}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(W),t.Y36(B.N),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-project-budget-costing"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:47,vars:22,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-4","col-lg-4"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","Project_Name"],["matColumnDef","Branch_Code"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-clock"],[1,"fas","fa-user-plus"],[3,"click",4,"ngIf"],[1,"icon-people"],[1,"fas","fa-bus"],[1,"fas","fa-fax"],[1,"fas","fa-sort-amount-up"],[1,"icon-eye"],[1,"fas","fa-list"],[1,"fas","fa-check-circle"],[1,"fas","fa-print"],[1,"fas","fa-share"],[3,"click"],[1,"fas","fa-print",3,"matTooltip"],[1,"far","fa-handshake"],[1,"fas","fa-calendar-plus"],[1,"fas","fa-tasks"],[1,"fas","fa-users"],[1,"fas","fa-lock"],[1,"fas","fa-download"],[1,"fas","fa-calendar-check"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",1),t.TgZ(21,"div",13),t.TgZ(22,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(24,"div",15),t.TgZ(25,"div",16),t.ynx(26),t.TgZ(27,"table",17),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(28,18),t.YNc(29,RT,3,3,"th",19),t.YNc(30,PT,2,1,"td",20),t.BQk(),t.ynx(31,21),t.YNc(32,FT,3,3,"th",19),t.YNc(33,IT,2,1,"td",20),t.BQk(),t.ynx(34,22),t.YNc(35,YT,3,3,"th",19),t.YNc(36,JT,2,1,"td",20),t.BQk(),t.ynx(37,23),t.YNc(38,QT,3,3,"th",19),t.YNc(39,BT,2,1,"td",20),t.BQk(),t.ynx(40,24),t.YNc(41,HT,3,3,"th",25),t.YNc(42,p3,4,3,"td",26),t.BQk(),t.YNc(43,u3,1,0,"tr",27),t.YNc(44,d3,1,0,"tr",28),t.qZA(),t.BQk(),t.qZA(),t.ynx(45),t.TgZ(46,"mat-paginator",29),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,13,"Projects")," "),t.xp6(6),t.hij(" ",t.lcZ(11,15,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,17,"Projects")),t.xp6(9),t.MGl("placeholder","",t.lcZ(23,19,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(21,_3)),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function g3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.titleOfServiceEng," ")}}const Ot=function(){return{standalone:!0}};function h3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",20),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.titleOfServiceEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.titleOfServiceEng)("ngModelOptions",t.DdM(8,Ot))}}function Z3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.titleOfServiceArb," ")}}function f3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",20),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.titleOfServiceArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.titleOfServiceArb)("ngModelOptions",t.DdM(8,Ot))}}function A3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.companyDetailsEng," ")}}function C3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",21),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.companyDetailsEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Compnay_Details"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.companyDetailsEng)("ngModelOptions",t.DdM(8,Ot))}}function T3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.companyDetailsArb," ")}}function v3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.companyDetailsArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Compnay_Details"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.companyDetailsArb)("ngModelOptions",t.DdM(8,Ot))}}function x3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.customerDetailsEng," ")}}function q3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.customerDetailsEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Customer_Details"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.customerDetailsEng)("ngModelOptions",t.DdM(8,Ot))}}function b3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.customerDetailsArb," ")}}function y3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.customerDetailsArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Customer_Details"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.customerDetailsArb)("ngModelOptions",t.DdM(8,Ot))}}function S3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.preambleEng," ")}}function w3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.preambleEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Preamble"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.preambleEng)("ngModelOptions",t.DdM(8,Ot))}}function U3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.preambleArb," ")}}function D3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.preambleArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Preamble"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.preambleArb)("ngModelOptions",t.DdM(8,Ot))}}function L3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.firstPartyEng," ")}}function N3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.firstPartyEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"First_Party"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.firstPartyEng)("ngModelOptions",t.DdM(8,Ot))}}function E3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.firstPartyArb," ")}}function O3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.firstPartyArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"First_Party"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.firstPartyArb)("ngModelOptions",t.DdM(8,Ot))}}function k3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.secondPartyEng," ")}}function j3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.secondPartyEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Second_Party"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.secondPartyEng)("ngModelOptions",t.DdM(8,Ot))}}function M3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.secondPartyArb," ")}}function R3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.secondPartyArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Second_Party"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.secondPartyArb)("ngModelOptions",t.DdM(8,Ot))}}function P3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseTitleEng," ")}}function F3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",33),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseTitleEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.clauseTitleEng)("ngModelOptions",t.DdM(8,Ot))}}function I3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseSubTitleEng," ")}}function Y3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",33),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseSubTitleEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Sub_Title"),""),t.Q6J("ngModel",e.clauseSubTitleEng)("ngModelOptions",t.DdM(8,Ot))}}function J3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseDescriptionEng," ")}}function Q3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",34),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseDescriptionEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Description"),""),t.Q6J("ngModel",e.clauseDescriptionEng)("ngModelOptions",t.DdM(8,Ot))}}function B3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).editClause(n)}),t._UZ(1,"i",13),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function H3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).editClause(n)}),t._UZ(1,"i",35),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Update"))}}function $3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).moveUpClause(n)}),t._UZ(1,"i",36),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Move_Up"))}}function V3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).moveDownClause(n)}),t._UZ(1,"i",37),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Move_Down"))}}function G3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).insertNewClause(n)}),t._UZ(1,"i",38),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Insert_New"))}}function W3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeClause(n)}),t._UZ(1,"i",39),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Remove"))}}function z3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseTitleArb," ")}}function X3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",33),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseTitleArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.clauseTitleArb)("ngModelOptions",t.DdM(8,Ot))}}function K3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseSubTitleArb," ")}}function tv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",33),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseSubTitleArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Sub_Title"),""),t.Q6J("ngModel",e.clauseSubTitleArb)("ngModelOptions",t.DdM(8,Ot))}}function ev(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseDescriptionArb," ")}}function ov(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",34),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseDescriptionArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Description"),""),t.Q6J("ngModel",e.clauseDescriptionArb)("ngModelOptions",t.DdM(8,Ot))}}function iv(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",28),t.YNc(3,P3,2,1,"span",10),t.YNc(4,F3,4,9,"span",10),t.qZA(),t.TgZ(5,"td",29),t.YNc(6,I3,2,1,"span",10),t.YNc(7,Y3,4,9,"span",10),t.qZA(),t.TgZ(8,"td",30),t.YNc(9,J3,2,1,"span",10),t.YNc(10,Q3,4,9,"span",10),t.qZA(),t.TgZ(11,"td",31),t.YNc(12,B3,3,1,"span",32),t.YNc(13,H3,3,1,"span",32),t.YNc(14,$3,3,1,"span",32),t.YNc(15,V3,3,1,"span",32),t.YNc(16,G3,3,1,"span",32),t.YNc(17,W3,3,1,"span",32),t.qZA(),t.qZA(),t.TgZ(18,"tr"),t.TgZ(19,"td",28),t.YNc(20,z3,2,1,"span",10),t.YNc(21,X3,4,9,"span",10),t.qZA(),t.TgZ(22,"td",29),t.YNc(23,K3,2,1,"span",10),t.YNc(24,tv,4,9,"span",10),t.qZA(),t.TgZ(25,"td",30),t.YNc(26,ev,2,1,"span",10),t.YNc(27,ov,4,9,"span",10),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.index,o=t.oxw(2);t.xp6(3),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(2),t.Q6J("ngIf",-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(1),t.Q6J("ngIf",e>0&&-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",e<(null==o.contractFormData?null:o.contractFormData.contractClauses.length)-1&&-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",-1==o.editClauseIndex||o.editClauseIndex==e),t.xp6(3),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e)}}function nv(i,a){if(1&i&&(t.TgZ(0,"div",5),t.TgZ(1,"div",6),t.TgZ(2,"table",7),t.TgZ(3,"tr"),t.TgZ(4,"th",23),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",24),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",25),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",26),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.YNc(16,iv,28,18,"ng-container",27),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,5,"Title")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"Sub_Title")," "),t.xp6(3),t.hij(" ",t.lcZ(12,9,"Description")," "),t.xp6(3),t.hij(" ",t.lcZ(15,11,"Action")," "),t.xp6(2),t.Q6J("ngForOf",null==e.contractFormData?null:e.contractFormData.contractClauses)}}let av=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.editHeadItemNumber=-1,this.editClauseIndex=-1}ngOnInit(){this.form=this.fb.group({}),console.log(this.contractFormData)}submit(){}closeModel(){this.dialogRef.close(!0)}translateToolTip(e){return`${this.translate.instant(e)}`}editClause(e){this.editClauseIndex==e?""!=this.contractFormData.contractClauses[e].clauseTitleEng&&""!=this.contractFormData.contractClauses[e].clauseTitleArb||""!=this.contractFormData.contractClauses[e].clauseSubTitleEng&&""!=this.contractFormData.contractClauses[e].clauseSubTitleArb||""!=this.contractFormData.contractClauses[e].clauseDescriptionEng&&""!=this.contractFormData.contractClauses[e].clauseDescriptionArb?this.editClauseIndex=-1:this.notifyService.showWarning(this.translate.instant("Empty_Clause")):-1==this.editClauseIndex&&(this.editClauseIndex=e)}moveUpClause(e){let o=this.contractFormData.contractClauses[e];this.contractFormData.contractClauses[e]=this.contractFormData.contractClauses[e-1],this.contractFormData.contractClauses[e-1]=o}moveDownClause(e){let o=this.contractFormData.contractClauses[e];this.contractFormData.contractClauses[e]=this.contractFormData.contractClauses[e+1],this.contractFormData.contractClauses[e+1]=o}saveContractForm(){for(let e=0;e<this.contractFormData.contractClauses.length;e++)this.contractFormData.contractClauses[e].serialNumber=e+1;this.apiService.post("contractForm",this.contractFormData).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}editHeadItem(e){this.editHeadItemNumber=this.editHeadItemNumber==e?-1:e}insertNewClause(e){this.contractFormData.contractClauses.splice(e+1,0,{clauseTitleEng:"",clauseTitleArb:"",clauseSubTitleEng:"",clauseSubTitleArb:"",clauseDescriptionEng:"",clauseDescriptionArb:"",id:0,serialNumber:0,contractFormId:this.contractFormData.contractFormHead.id}),this.editClauseIndex=e+1}removeClause(e){this.contractFormData.contractClauses.length>2&&this.contractFormData.contractClauses.splice(e,1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-contract-form"]],features:[t.qOj],decls:109,vars:62,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"scroll-sidebar"],[1,"outer"],[1,"col-md-12","col-lg-12"],["border","1","cellpadding","0","cellspacing","0",2,"width","100%","padding","10px"],[2,"width","6%","padding","10px"],[2,"width","45%","padding","10px","vertical-align","top"],[4,"ngIf"],[2,"width","4%","padding","10px"],[3,"matTooltip","click"],[1,"fas","fa-edit"],[2,"text-align","center","padding","10px"],["class","outer",4,"ngIf"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],["type","text",1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"height","max-content","max-height","stretch",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[2,"width","10%","padding","10px"],[2,"width","20%","padding","10px"],[2,"padding","10px"],[2,"padding","10px","width","auto"],[4,"ngFor","ngForOf"],[2,"width","10%","text-align","right","padding","10px","vertical-align","top"],[2,"width","20%","text-align","right","padding","10px","vertical-align","top"],[2,"text-align","justify","padding","10px","white-space","pre-wrap","vertical-align","top"],["rowspan","2",2,"padding","10px","vertical-align","central","width","7%"],[3,"matTooltip","click",4,"ngIf"],["type","text",1,"form-control",2,"text-align","right",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"text-align","right",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"fas","fa-save"],[1,"fas","fa-arrow-up"],[1,"fas","fa-arrow-down"],[1,"fas","fa-plus-circle"],[1,"fas","fa-minus-circle"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.saveContractForm()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"table",7),t.TgZ(11,"tr"),t.TgZ(12,"th",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"td",9),t.YNc(16,g3,2,1,"span",10),t.YNc(17,h3,4,9,"span",10),t.qZA(),t.TgZ(18,"td",9),t.YNc(19,Z3,2,1,"span",10),t.YNc(20,f3,4,9,"span",10),t.qZA(),t.TgZ(21,"td",11),t.TgZ(22,"span",12),t.NdJ("click",function(){return o.editHeadItem(1)}),t._UZ(23,"i",13),t._uU(24,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"th",8),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td",9),t.YNc(30,A3,2,1,"span",10),t.YNc(31,C3,4,9,"span",10),t.qZA(),t.TgZ(32,"td",9),t.YNc(33,T3,2,1,"span",10),t.YNc(34,v3,4,9,"span",10),t.qZA(),t.TgZ(35,"td",11),t.TgZ(36,"span",12),t.NdJ("click",function(){return o.editHeadItem(2)}),t._UZ(37,"i",13),t._uU(38,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"tr"),t.TgZ(40,"th",8),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"td",9),t.YNc(44,x3,2,1,"span",10),t.YNc(45,q3,4,9,"span",10),t.qZA(),t.TgZ(46,"td",9),t.YNc(47,b3,2,1,"span",10),t.YNc(48,y3,4,9,"span",10),t.qZA(),t.TgZ(49,"td",11),t.TgZ(50,"span",12),t.NdJ("click",function(){return o.editHeadItem(3)}),t._UZ(51,"i",13),t._uU(52,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"tr"),t.TgZ(54,"th",8),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"td",9),t.YNc(58,S3,2,1,"span",10),t.YNc(59,w3,4,9,"span",10),t.qZA(),t.TgZ(60,"td",9),t.YNc(61,U3,2,1,"span",10),t.YNc(62,D3,4,9,"span",10),t.qZA(),t.TgZ(63,"td",11),t.TgZ(64,"span",12),t.NdJ("click",function(){return o.editHeadItem(4)}),t._UZ(65,"i",13),t._uU(66,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"tr"),t.TgZ(68,"th",8),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"td",9),t.YNc(72,L3,2,1,"span",10),t.YNc(73,N3,4,9,"span",10),t.qZA(),t.TgZ(74,"td",9),t.YNc(75,E3,2,1,"span",10),t.YNc(76,O3,4,9,"span",10),t.qZA(),t.TgZ(77,"td",11),t.TgZ(78,"span",12),t.NdJ("click",function(){return o.editHeadItem(5)}),t._UZ(79,"i",13),t._uU(80,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(81,"tr"),t.TgZ(82,"th",8),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"td",9),t.YNc(86,k3,2,1,"span",10),t.YNc(87,j3,4,9,"span",10),t.qZA(),t.TgZ(88,"td",9),t.YNc(89,M3,2,1,"span",10),t.YNc(90,R3,4,9,"span",10),t.qZA(),t.TgZ(91,"td",11),t.TgZ(92,"span",12),t.NdJ("click",function(){return o.editHeadItem(6)}),t._UZ(93,"i",13),t._uU(94,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(95,"div",14),t._UZ(96,"br"),t.TgZ(97,"b"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t._UZ(100,"br"),t.qZA(),t.YNc(101,nv,17,13,"div",15),t.qZA(),t.TgZ(102,"div",16),t.TgZ(103,"div",17),t.TgZ(104,"input",18),t.NdJ("click",function(){return o.closeModel()}),t.ALo(105,"translate"),t.qZA(),t._uU(106," \xa0 "),t._UZ(107,"input",19),t.ALo(108,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,42,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(8),t.hij(" ",t.lcZ(14,44,"Title_Of_Service")," "),t.xp6(3),t.Q6J("ngIf",1!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",1==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",1!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",1==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(28,46,"Company_Details")," "),t.xp6(3),t.Q6J("ngIf",2!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",2==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",2!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",2==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(42,48,"Customer_Details")," "),t.xp6(3),t.Q6J("ngIf",3!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",3==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",3!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",3==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(56,50,"Preamble")," "),t.xp6(3),t.Q6J("ngIf",4!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",4==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",4!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",4==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(70,52,"First_Party")," "),t.xp6(3),t.Q6J("ngIf",5!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",5==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",5!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",5==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(84,54,"Second_Party")," "),t.xp6(3),t.Q6J("ngIf",6!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",6==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",6!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",6==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(6),t.Oqu(t.lcZ(99,56,"Contract_Clauses")),t.xp6(3),t.Q6J("ngIf",(null==o.contractFormData?null:o.contractFormData.contractClauses.length)>0),t.xp6(3),t.s9C("value",t.lcZ(105,58,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(108,60,"Save")))},directives:[l._Y,l.JL,l.sg,Z.O5,ut.gM,l.Fj,l.JJ,l.On,Z.sg],pipes:[f.X$],encapsulation:2}),i})();function sv(i,a){if(1&i&&(t.TgZ(0,"option",6),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.s9C("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text,"")}}function rv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"select",3),t.NdJ("change",function(n){return t.CHM(e),t.oxw(2).OnTemplateSelection(n)}),t.TgZ(2,"option",4),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,sv,2,2,"option",5),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(3),t.AsE("",t.lcZ(4,3,"Select")," ",t.lcZ(5,5,"SelectTemplate")," "),t.xp6(3),t.Q6J("ngForOf",e.templatesSelectionList)}}function lv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).createContractTemplate()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Create_Template")))}function cv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editContractTemplate()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit_Template")))}function pv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).saveContractForm()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Save_Addendum")))}function uv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).saveContractForm()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Save_Contract")))}function dv(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,pv,3,3,"button",1),t._uU(2," \xa0 "),t.YNc(3,uv,3,3,"button",1),t._uU(4," \xa0 "),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.project?null:e.project.isAdendum),t.xp6(2),t.Q6J("ngIf",!(null!=e.project&&e.project.isAdendum))}}function _v(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editContractForm()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit_Contract")))}function mv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).approveContract()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Approve_Contract")))}function gv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editProposalCosting()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit_Proposal_Costing")))}function hv(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,rv,7,7,"span",0),t.TgZ(2,"span"),t._UZ(3,"br"),t.qZA(),t.YNc(4,lv,5,3,"span",0),t.YNc(5,cv,5,3,"span",0),t.YNc(6,dv,5,2,"span",0),t.YNc(7,_v,5,3,"span",0),t.YNc(8,mv,5,3,"span",0),t.YNc(9,gv,5,3,"span",0),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=e.templatesSelectionList.length&&0==(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)),t.xp6(3),t.Q6J("ngIf",0==e.templatesSelectionList.length||0==(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)),t.xp6(1),t.Q6J("ngIf",null!=e.templateData),t.xp6(1),t.Q6J("ngIf",0==(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)&&null!=e.templateData),t.xp6(1),t.Q6J("ngIf",(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)>0),t.xp6(1),t.Q6J("ngIf",(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)>0),t.xp6(1),t.Q6J("ngIf",(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)>0||null!=e.templateData)}}function Zv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().printInvoice()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Print")))}function fv(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",25),t._uU(2),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA(),t.TgZ(5,"td",24),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",24),t._uU(9),t.ALo(10,"number"),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",e.itemEng," "),t.xp6(2),t.hij(" ",t.xi3(7,4,e.price,"3.2-5")," "),t.xp6(3),t.hij(" ",t.xi3(10,7,e.total,"3.2-5")," ")}}function Av(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",21),t.TgZ(3,"table",11),t.TgZ(4,"tr"),t.TgZ(5,"td",22),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"td",22),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td",22),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"td",22),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.YNc(17,fv,11,10,"tr",20),t.TgZ(18,"tr"),t.TgZ(19,"td",23),t._uU(20),t.qZA(),t.TgZ(21,"td",24),t._uU(22),t.ALo(23,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&i){const e=t.oxw(5);t.xp6(6),t.hij(" ",t.lcZ(7,7,"Qty")," "),t.xp6(3),t.hij(" ",t.lcZ(10,9,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(13,11,"Unit_Rate")," "),t.xp6(3),t.hij(" ",t.lcZ(16,13,"Total")," "),t.xp6(2),t.Q6J("ngForOf",e.proposalCosting),t.xp6(3),t.hij(" ","Grand_Total"," "),t.xp6(2),t.hij(" ",t.xi3(23,15,e.grandTotal,"3.2-5")," ")}}function Cv(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",27),t.TgZ(2,"b"),t.TgZ(3,"u"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td",27),t.TgZ(6,"b"),t.TgZ(7,"u"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.clauseTitleEng),t.xp6(4),t.hij(" ",e.clauseTitleArb,"")}}function Tv(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",28),t.TgZ(2,"b"),t.TgZ(3,"u"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td",29),t.TgZ(6,"b"),t.TgZ(7,"u"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",e.clauseSubTitleEng,""),t.xp6(4),t.Oqu(e.clauseSubTitleArb)}}function vv(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",30),t._uU(2),t.qZA(),t.TgZ(3,"td",30),t._uU(4),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.clauseDescriptionEng," "),t.xp6(2),t.hij(" ",e.clauseDescriptionArb," ")}}function xv(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Av,24,18,"ng-container",0),t.YNc(2,Cv,9,2,"tr",0),t.YNc(3,Tv,9,2,"tr",0),t.YNc(4,vv,5,2,"tr",0),t.BQk()),2&i){const e=a.$implicit,o=a.index;t.xp6(1),t.Q6J("ngIf",2==o),t.xp6(1),t.Q6J("ngIf",null!=e.clauseTitleEng),t.xp6(1),t.Q6J("ngIf",null!=e.clauseSubTitleEng),t.xp6(1),t.Q6J("ngIf",null!=e.clauseDescriptionEng)}}function qv(i,a){if(1&i&&(t.ynx(0),t.YNc(1,xv,5,4,"ng-container",20),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.contractFormData.contractClauses)}}function bv(i,a){if(1&i&&(t.TgZ(0,"div",9),t.TgZ(1,"div",10),t._UZ(2,"br"),t.TgZ(3,"table",11),t.TgZ(4,"tr"),t.TgZ(5,"td",12),t._uU(6),t.qZA(),t.TgZ(7,"td",13),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"tr"),t.TgZ(10,"td",14),t.TgZ(11,"b"),t.TgZ(12,"u"),t._uU(13,"Contract of providing Security Guarding Services"),t._UZ(14,"br"),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"td",14),t.TgZ(17,"b"),t.TgZ(18,"u"),t._uU(19," \u0639\u0642\u062f \u062a\u0642\u062f\u064a\u0645 \u062e\u062f\u0645\u0627\u062a \u062d\u0631\u0627\u0633\u0627\u062a \u0623\u0645\u0646\u064a\u0629"),t._UZ(20,"br"),t._uU(21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"tr"),t.TgZ(23,"td",15),t._uU(24),t.qZA(),t.TgZ(25,"td",15),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"tr"),t.TgZ(28,"td",16),t.TgZ(29,"u"),t._uU(30," (Referred to it from here on as first party)"),t.qZA(),t.qZA(),t.TgZ(31,"td",17),t.TgZ(32,"u"),t._uU(33,"(\u0648\u064a\u0634\u0627\u0631 \u0625\u0644\u064a\u0647\u0627 \u0641\u064a\u0645\u0627 \u0628\u0639\u062f \u0628\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u0623\u0648\u0644)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"tr"),t.TgZ(35,"td",15),t._uU(36),t.qZA(),t.TgZ(37,"td",15),t._uU(38),t.qZA(),t.qZA(),t.TgZ(39,"tr"),t.TgZ(40,"td",16),t.TgZ(41,"u"),t._uU(42," (Referred to it from here on as Second party)"),t.qZA(),t.qZA(),t.TgZ(43,"td",17),t.TgZ(44,"u"),t._uU(45,"( \u0648 \u064a\u0634\u0627\u0631 \u0625\u0644\u064a\u0647\u0627 \u0641\u064a\u0645\u0627 \u0628\u0639\u062f \u0628\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u062b\u0627\u0646\u064a)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"tr"),t.TgZ(47,"td",14),t.TgZ(48,"b"),t.TgZ(49,"u"),t._uU(50," Preamble"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"td",14),t.TgZ(52,"b"),t.TgZ(53,"u"),t._uU(54,"\u0627\u0644\u0628\u0646\u062f \u0627\u0644\u062a\u0645\u0647\u064a\u062f\u064a"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"tr"),t.TgZ(56,"td",15),t._uU(57),t.qZA(),t.TgZ(58,"td",15),t._uU(59),t.qZA(),t.qZA(),t.YNc(60,qv,2,1,"ng-container",0),t.TgZ(61,"tr"),t.TgZ(62,"td",16),t.TgZ(63,"b"),t._uU(64," First party:"),t.qZA(),t.qZA(),t.TgZ(65,"td",17),t.TgZ(66,"b"),t._uU(67," :\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u0623\u0648"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t.TgZ(69,"td",18),t._uU(70),t.qZA(),t.TgZ(71,"td",19),t._uU(72),t.qZA(),t.qZA(),t._UZ(73,"br"),t.TgZ(74,"tr"),t.TgZ(75,"td",16),t.TgZ(76,"b"),t._uU(77," Second party:"),t.qZA(),t.qZA(),t.TgZ(78,"td",17),t.TgZ(79,"b"),t._uU(80," :\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u062b\u0627\u0646\u064a"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(81,"tr"),t.TgZ(82,"td",18),t._uU(83),t.qZA(),t.TgZ(84,"td",19),t._uU(85),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.hij(" (Reference No.",e.referenceNumber,") "),t.xp6(2),t.hij(" (",e.referenceNumber,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639) "),t.xp6(7),t.hij("(",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.titleOfServiceEng,")"),t.xp6(6),t.hij("(",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.titleOfServiceArb,")"),t.xp6(3),t.hij(" ",e.TranslateTaggedDataEng(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.companyDetailsEng)," "),t.xp6(2),t.hij(" ",e.TranslateTaggedDataArb(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.companyDetailsArb)," "),t.xp6(10),t.hij(" ",e.TranslateTaggedDataEng(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.customerDetailsEng)," "),t.xp6(2),t.hij(" ",e.TranslateTaggedDataArb(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.customerDetailsArb)," "),t.xp6(19),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.preambleEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.preambleArb," "),t.xp6(1),t.Q6J("ngIf",(null==e.contractFormData?null:e.contractFormData.contractClauses.length)>0),t.xp6(10),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.firstPartyEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.firstPartyArb," "),t.xp6(11),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.secondPartyEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.secondPartyArb," ")}}function yv(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,bv,86,15,"div",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=(null==e.contractFormData?null:e.contractFormData.contractClauses.length)&&null!=e.contractFormData)}}let $t=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(p),this.oprService=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.dialog=c,this.authService=p,this.utilService=u,this.translate=d,this.notifyService=_,this.validationService=h,this.dialogRef=A,this.referenceNumber="000/0000",this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.type="",this.templatesSelectionList=[],this.isArabic=!1,this.date=new Date}ngOnInit(){this.loadData()}loadData(){this.templateData=null,this.isArabic=this.utilService.isArabic(),this.loadCustomerData(),this.loadProjectData(),this.loadSkillSetsList(),this.loadOperationsExpenseHeads(),this.loadMaterialEquipments(),this.loadLogisticsVehicles(),this.loadContractForm(),this.loadProposalCostingData(),this.loadContractTemplates()}loadContractForm(){var e,o;let n={projectCode:this.project.projectCode,siteCode:this.project.siteCode,customerCode:this.project.customerCode,isAdendum:null!==(o=null===(e=this.project)||void 0===e?void 0:e.isAdendum)&&void 0!==o&&o};this.apiService.post("ContractForm/getContractForm",n).subscribe(s=>{null!=s&&(this.contractFormData=s)})}loadContractTemplates(){this.apiService.getall(`ContractFormTemplates/getSelectionContractFormTemplates/${this.type}`).subscribe(e=>{null!=e&&(this.templatesSelectionList=e)})}OnTemplateSelection(e){if(""!=e.target.value){let o=Number(e.target.value);this.apiService.get("ContractFormTemplates/getContractFormTemplateById",o).subscribe(n=>{if(null!=n){this.templateData=n;for(let r=0;r<n.clauses.length;r++)n.clauses[r].id=0;this.contractFormData.contractClauses=n.clauses;let s=this.contractFormData.contractFormHead.id;this.contractFormData.contractFormHead=n.templateHead,this.contractFormData.contractFormHead.id=s}})}else this.templateData=null}submit(){}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}loadCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e&&(this.customerData=e,console.log(e),this.apiService.getall(`Company/getCompanyByCityCode/${e.custCityCode1}`).subscribe(o=>{null!=o&&(this.companyData=o,console.log(o))}),this.getCity(e.custCityCode1))})}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)})}loadProposalCostingData(){var e;let o={customerCode:this.project.customerCode,siteCode:this.project.siteCode,projectCode:this.project.projectCode,isAdendum:null===(e=this.project)||void 0===e?void 0:e.isAdendum};this.apiService.post("proposalCosting/getProposalCosting",o).subscribe(n=>{this.proposalCosting=n;for(let s=0;s<n.length;s++)this.grandTotal+=n[s].price*n[s].qty;this.getReferenceNumber()})}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o,console.log(o)})}printComponent(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=o.margin,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=o.margin,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit*o.qty),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite})}openDialogManage3(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.componentInstance.project=this.project,c.componentInstance.contractFormData=this.contractFormData,c.afterClosed().subscribe(p=>{p&&!0===p&&this.loadData()})}openDialogManage2(e,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,no);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.inputData=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.loadData()})}loadSkillSetsList(){this.apiService.getall("Skillset/getAllSkillsetList").subscribe(e=>{this.skillsetList=e})}getSkillset(e){return this.skillsetList.find(n=>n.skillSetCode==e)}loadOperationsExpenseHeads(){this.apiService.getall("OperationExpenseHead/getSelectOperationExpenseHeadList").subscribe(e=>{this.opeartionsExpenseHeadsList=e})}getopeartionsExpenseHead(e){return this.opeartionsExpenseHeadsList.find(n=>n.value==e)}loadMaterialEquipments(){this.apiService.getall("Materialequipment/getSelectMaterialequipmentList").subscribe(e=>{this.materialEquipmentList=e})}getMaterialEquipments(e){return this.materialEquipmentList.find(n=>n.value==e)}loadLogisticsVehicles(){this.apiService.getall("Logisticsandvehicle/getSelectLogisticsandvehicleList").subscribe(e=>{this.logisticsVehicleList=e})}getLogisticsVehicle(e){return this.logisticsVehicleList.find(n=>n.value==e)}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}closeModel(){this.dialogRef.close(!0)}createContractTemplate(){let e=this.utilService.openCrudDialog(this.dialog,te);e.componentInstance.modalTitle="Create Template",e.componentInstance.modalBtnTitle="Add",e.componentInstance.contractTemplateData=this.contractFormData,e.componentInstance.id=0,e.componentInstance.type=this.type,e.afterClosed().subscribe(o=>{o&&!0===o&&this.loadData()})}editContractTemplate(){let e=this.utilService.openCrudDialog(this.dialog,te);e.componentInstance.modalTitle="Update Template",e.componentInstance.modalBtnTitle="Update",e.componentInstance.contractTemplateData=this.templateData,e.componentInstance.id=this.templateData.templateId,e.componentInstance.type=this.type,e.afterClosed().subscribe(o=>{o&&!0===o&&this.loadData()})}editProposalCosting(){this.openDialogManage2({projectCode:this.project.projectCode,customerCode:this.project.customerCode,siteCode:null==this.project.siteCode?"":this.project.siteCode,proposalCosting:this.proposalCosting},g.Oi.create,"Edit_Proposal_Costing","Edit")}getReferenceNumber(){var e,o,n;(null===(e=this.proposalCosting)||void 0===e?void 0:e.length)>0&&(this.referenceNumber=this.project.projectCode+"/"+((null===(o=this.project)||void 0===o?void 0:o.isAdendum)?this.project.siteCode+"/":"")+(null===(n=this.proposalCosting[0])||void 0===n?void 0:n.projectBudgetEstimationId.toString()),0==this.proposalCosting[0].id&&this.editProposalCosting())}openConfirmationDialog(e,o,n,s){let r=this.oprService.confirmationDialog(this.dialog,n);r.componentInstance.dbops=e,r.componentInstance.modalTitle=o,r.afterClosed().subscribe(c=>{var p,u;this.contractFormData.contractFormHead.projectCode=this.project.projectCode,this.contractFormData.contractFormHead.customerCode=this.project.customerCode,this.contractFormData.contractFormHead.siteCode=(null===(p=this.project)||void 0===p?void 0:p.isAdendum)?this.project.siteCode:null,this.contractFormData.contractFormHead.isAdendum=null===(u=this.project)||void 0===u?void 0:u.isAdendum,(c&&1==c||c.res)&&("SaveContractForm"==s?this.apiService.post("contractForm",this.contractFormData).subscribe(d=>{d&&(this.utilService.OkMessage(),this.loadData())},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d)}):"ApproveContractForm"==s&&this.apiService.post("projectContracts/approveContractForm",{projectCode:this.project.projectCode,siteCode:this.project.isAdendum?this.project.siteCode:null,customerCode:this.project.customerCode,contractFormHeadId:this.contractFormData.contractFormHead.id}).subscribe(_=>{this.utilService.OkMessage(),this.loadData()},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_)}))})}saveContractForm(){null!=this.contractFormData?this.openConfirmationDialog(g.Oi.create,"Are_You_Sure?",xt,"SaveContractForm"):this.notifyService.showError(this.translate.instant("No Contract Data Found"))}editContractForm(){null!=this.contractFormData?this.openDialogManage3(this.contractFormData.contractFormHead.id,g.Oi.create,"Update_Contract_Form","Update",av):this.notifyService.showError(this.translate.instant("No Contract Data Found"))}approveContract(){null!=this.contractFormData?this.openConfirmationDialog(g.Oi.create,"Are_You_Sure?",xt,"ApproveContractForm"):this.notifyService.showError(this.translate.instant("No Contract Data Found"))}TranslateTaggedDataEng(e){var o,n,s,r,c,p,u,d;let _="Second: "+(null===(o=this.customerData)||void 0===o?void 0:o.custName)+" Commercial Register "+this.referenceNumber+", Whose address -"+this.customerData.custAddress1+","+(null===(n=this.city)||void 0===n?void 0:n.cityName)+", Kingdom of Saudi Arabia, Phone: "+(null===(s=this.customerData)||void 0===s?void 0:s.custPhone1)+", email:"+this.customerData.custEmail1+" represented in signing this contract by "+(null===(r=this.customerData)||void 0===r?void 0:r.custSalesRep)+".",h=e.replace(/<<customer>>/gi,_),A="Thanks God alone and then: On "+this.referenceNumber+" - Corresponding to "+this.translate.instant(this.date.toLocaleDateString())+" A.D. Agreement in city of "+(null===(c=this.city)||void 0===c?void 0:c.cityName)+" between both: First: "+(null===(p=this.companyData)||void 0===p?void 0:p.companyName)+", address: "+(null===(u=this.companyData)||void 0===u?void 0:u.companyAddress)+", Kingdom of Saudi Arabia, Phone: "+(null===(d=this.companyData)||void 0===d?void 0:d.phone)+"  represented in signing this contract by Mohammed Abdullah Al Mansaky as being COO STS Group.";return h.replace(/<<company>>/gi,A)}TranslateTaggedDataArb(e){var o,n,s,r,c,p,u;let d="\u062b\u0627\u0646\u064a\u0627: - \u0634\u0631\u0643\u0629 "+this.customerData.custArbName+" \u0633\u062c\u0644 \u062a\u062c\u0627\u0631\u064a "+this.referenceNumber+",\u0639\u0646\u0648\u0627\u0646\u0647\u0627"+this.customerData.custAddress1+","+(null===(o=this.city)||void 0===o?void 0:o.cityNameAr)+", \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629 \u060c \u0627\u0644\u0647\u0627\u062a\u0641  "+(null===(n=this.customerData)||void 0===n?void 0:n.custPhone1)+", \u0627\u064a\u0645\u064a\u0644"+this.customerData.custEmail1+" \u0648\u064a\u0645\u062b\u0644\u0647\u0627 \u0641\u064a \u0627\u0644\u062a\u0648\u0642\u064a\u0639 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0639\u0642\u062f \u0627\u0644\u0623\u0633\u062a\u0627\u0630 "+(null===(s=this.customerData)||void 0===s?void 0:s.custSalesRep)+".",_=e.replace(/<<customer>>/gi,d),h="\u0627\u0647\u0640 \u0627\u0644\u0645\u0648\u0627\u0641\u0642 \u0644\u062d\u0645\u062f \u0644\u0644\u0647 \u0648\u062d\u062f\u0647 \u0648\u0628\u0639\u062f: - \u0641\u064a \u064a\u0648\u0645"+this.referenceNumber+"\u0645 \u062a\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642"+this.translate.instant(this.date.toLocaleDateString())+" A.D. \u0627\u062a\u0641\u0627\u0642\u064a\u0629 \u0641\u064a \u0645\u062f\u064a\u0646\u0629 "+(null===(r=this.city)||void 0===r?void 0:r.cityName)+"\u0628\u064a\u0646 \u0627\u0644\u0627\u062b\u0646\u064a\u0646: \u0623\u0648\u0644\u0627:"+(null===(c=this.companyData)||void 0===c?void 0:c.companyName)+", \u0639\u0646\u0648\u0627\u0646: "+(null===(p=this.companyData)||void 0===p?void 0:p.companyAddress)+", \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629\u060c \u0647\u0627\u062a\u0641: "+(null===(u=this.companyData)||void 0===u?void 0:u.phone)+"  \u0645\u0645\u062b\u0644\u0629 \u0641\u064a \u062a\u0648\u0642\u064a\u0639 \u0647\u0630\u0627 \u0627\u0644\u0639\u0642\u062f \u0645\u0646 \u0642\u0628\u0644 Mohammed Abdullah Al Mansaky \u0643\u0645\u0627 \u064a\u062c\u0631\u064a  COO STS Group.";return _.replace(/<<company>>/gi,h)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(W),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(T.uw),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-contract-form"]],features:[t.qOj],decls:11,vars:3,consts:[[4,"ngIf"],[3,"click",4,"ngIf"],["type","button","aria-hidden","true",1,"",3,"click"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"click"],["class","container-fluid invoice-container print-container","style"," width:850px; padding-top:5px;","id","printcontainer",4,"ngIf"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],["id","ProposalPage1",2,"page-break-after","always"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","50%","font-style","italic","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","font-style","italic","text-align","right","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","text-align","center","padding","10px"],[2,"width","50%","text-align","justify","padding","10px","vertical-align","top"],[2,"width","50%","text-align","left","padding","10px"],[2,"width","50%","text-align","right","padding","10px"],[2,"width","50%","text-align","left","padding","10px","white-space","pre-wrap","vertical-align","top"],[2,"width","50%","text-align","right","padding","10px","white-space","pre-wrap","vertical-align","top"],[4,"ngFor","ngForOf"],["colspan","2"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","1px solid #878787","padding","5px","text-align","right","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","text-align","right","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","1px solid #878787","padding","5px","text-align","left","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","text-align","center","padding","10px","vertical-align","top"],[2,"width","50%","text-align","left","padding","10px","vertical-align","top"],[2,"width","50%","text-align","right","padding","10px","vertical-align","top"],[2,"width","50%","text-align","justify","padding","10px","white-space","pre-wrap","vertical-align","top"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,hv,10,7,"span",0),t.TgZ(2,"span"),t.YNc(3,Zv,3,3,"button",1),t._uU(4,"\xa0 "),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," Close"),t.qZA(),t.qZA(),t.qZA(),t._UZ(7,"br"),t._UZ(8,"br"),t._UZ(9,"br"),t.YNc(10,yv,2,1,"div",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",!(null!=o.contractFormData&&null!=o.contractFormData.contractFormHead&&o.contractFormData.contractFormHead.isApproved)),t.xp6(2),t.Q6J("ngIf",(null==o.contractFormData||null==o.contractFormData.contractFormHead?null:o.contractFormData.contractFormHead.id)>0||null!=o.templateData),t.xp6(7),t.Q6J("ngIf",(null==o.contractFormData||null==o.contractFormData.contractFormHead?null:o.contractFormData.contractFormHead.id)>0||null!=o.templateData))},directives:[Z.O5,l.YN,l.Kr,Z.sg],pipes:[f.X$,Z.JJ],encapsulation:2}),i})();function Sv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",57),t.TgZ(1,"a",58),t.NdJ("click",function(){return t.CHM(e),t.oxw().createNew()}),t._UZ(2,"i",59),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.hij("",t.lcZ(4,1,"New_Request")," "))}function wv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function Uv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Dv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Lv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Nv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Ev(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function Ov(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Request_Type")," "))}function kv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.AsE("",e.requestType,"",e.requestSubType,"")}}function jv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Request_Number")," "))}function Mv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.requestNumber)}}function Rv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Requested_By")," "))}function Pv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.requestedBy)}}function Fv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Requested_Date")," "))}function Iv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.requestedDate,"dd/MM/yyyy"))}}function Yv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Effective_Date")," "))}function Jv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.effectiveDate,"dd/MM/yyyy"))}}function Qv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function Bv(i,a){1&i&&(t.TgZ(0,"span",64),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Hv(i,a){1&i&&(t.TgZ(0,"span",65),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function $v(i,a){if(1&i&&(t.TgZ(0,"td",61),t.YNc(1,Bv,3,3,"span",62),t.YNc(2,Hv,3,3,"ng-template",null,63,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function Vv(i,a){1&i&&(t.TgZ(0,"th",66),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Gv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().edit(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Wv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().delete(n)}),t._UZ(1,"i",73),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function zv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveRequest(n)}),t._UZ(1,"i",74),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function Xv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.YNc(1,Gv,3,1,"span",69),t.YNc(2,Wv,3,1,"span",69),t.YNc(3,zv,3,1,"span",69),t.TgZ(4,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewRequest(n)}),t._UZ(5,"i",71),t._uU(6,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request"))}}function Kv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().edit(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function tx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().delete(n)}),t._UZ(1,"i",73),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function ex(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().approveRequest(n)}),t._UZ(1,"i",74),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function ox(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Kv,3,1,"span",69),t.YNc(2,tx,3,1,"span",69),t.YNc(3,ex,3,1,"span",69),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)&&!e.isMerged)}}function ix(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().mapEmpToRes(n)}),t._UZ(1,"i",75),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Mapp_Employee_To_Resource"))}}function nx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().mergeRequest(n.requestNumber)}),t._UZ(1,"i",76),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Merge_Resources"))}}function ax(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,ix,3,1,"span",69),t.YNc(2,nx,3,1,"span",69),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(e.canEditReq||e.isAdmin)&&e.isMappedResources)}}function sx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewRequest(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Request"))}}function rx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewMappings(n.requestNumber)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Resource_Mapping"))}}function lx(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,ox,4,3,"span",68),t.YNc(2,ax,3,2,"span",68),t.YNc(3,sx,3,1,"span",69),t.YNc(4,rx,3,1,"span",69),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isApproved&&!e.isMerged),t.xp6(1),t.Q6J("ngIf",!e.isMappedResources),t.xp6(1),t.Q6J("ngIf",e.isMappedResources)}}function cx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendumForm(n)}),t._UZ(1,"i",77),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Generate_Addendum"))}}function px(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",78),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function ux(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",79),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function dx(i,a){if(1&i&&(t.TgZ(0,"td",67),t.YNc(1,Xv,7,4,"span",68),t.YNc(2,lx,5,4,"span",68),t.YNc(3,cx,3,1,"span",69),t.YNc(4,px,3,1,"span",69),t.YNc(5,ux,3,1,"span",69),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","AddResource"!=e.requestType),t.xp6(1),t.Q6J("ngIf","AddResource"==e.requestType),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&e.fileUrl)}}function _x(i,a){1&i&&t._UZ(0,"tr",80)}function mx(i,a){1&i&&t._UZ(0,"tr",81)}const so=function(){return{standalone:!0}};let ro=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C,S){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=_,this.pageService=h,this.oprService=A,this.translate=C,this.dialogRef=S,this.displayedColumns=["customerCode","siteCode","projectCode","requestType","requestNumber","requestedBy","requestedDate","effectiveDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="requestedDate asc",this.isLoading=!1,this.isUpdating=!1,this.listType="",this.approvedStatus=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder,"","")}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder,this.approvedStatus,this.listType)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder,this.approvedStatus,this.listType)}loadList(e,o,n,s,r="",c){this.isLoading=!0,this.apiService.getPagination(`PvAllRequests/getPvAllRequestsPagedListByProjectSite/${this.project.projectCode}/${this.project.siteCode}`,this.utilService.getOprQueryString(e,o,n,s,this.approvedStatus,"",0,"",this.listType)).subscribe(p=>{this.isLoading=!1,this.totalItemsCount=0,this.data=new m.by(p.items),this.totalItemsCount=p.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount,this.isLoading=!1}),this.data.sort=this.sort},p=>{this.utilService.ShowApiErrorMessage(p),this.isLoading=!1})}applyFilter(e,o){(e||o)&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,"",this.listType))}openConfirmationDialogManage(e,o,n,s,r,c,p){let u=this.oprService.confirmationDialog(this.dialog,c);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.id=e,u.componentInstance.confirmType="general",u.afterClosed().subscribe(d=>{d?("SwapEmployees"==o?this.apiService.get("PvSwapEmployees/ApproveReqPvSwapEmployeesReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"RemoveResource"==o?this.apiService.get("PvRemoveResource/ApproveReqPvRemoveResourceReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"AddResource"==o?this.apiService.get("PvAddResource/ApproveReqPvAddResourceReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"TransferResource"==o?this.apiService.get("PvTransferResource/ApproveReqPvTransferResourceReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"TransferWithReplacement"==o?this.apiService.get("PvTransferWithReplacement/ApproveReqPvTransferWithReplacementReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"ReplaceResource"==o?this.apiService.get("PvReplaceResource/ApproveReqPvReplaceResourceReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}):"ProjectVariations"==o&&this.apiService.get("PvOpenCloseReq/ApproveReqPvOpenCloseReqById",e).subscribe(_=>{this.isUpdating=!1,_&&(this.utilService.OkMessage(),this.ngOnInit())},_=>{console.error(_),this.utilService.ShowApiErrorMessage(_),this.isUpdating=!1}),this.isUpdating=!1):this.isUpdating=!1})}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}createNewWindow(e,o,n,s,r,c){let p=this.utilService.openCrudDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.id=e,p.componentInstance.projectData=o,p.componentInstance.isFromProjectsAction=!0,p.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}openDialogManage2(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.requestData=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(null==e?void 0:e.requestNumber,null==e?void 0:e.requestType,g.Oi.update,"Conforming_Approve_Request","Approve",xt,"general"))}edit(e){let o=e.requestType,n=e.requestNumber;"SwapEmployees"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Swap_Employees","Update",Kt):"RemoveResource"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Remove_Resource","Update",Rt):"AddResource"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Adding_Resources","Update",Ht):"TransferResource"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Transfer_Resource","Update",Pt):"ReplaceResource"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Replace_Employee","Update",Mt):"TransferWithReplacement"==o?this.openDialogManage(n,g.Oi.update,"Updating_Request_For_Transfer_With_Replacement","Update",Ft):"ProjectVariations"==o&&this.apiService.get("PvOpenCloseReq/getPvOpenCloseReqById",n).subscribe(s=>{this.openDialogManage2(s,g.Oi.update,"Updating_Request_For_Open_Close","Update",kt)})}delete(e){let o=e.requestType,n=e.requestNumber;this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(r=>{r&&n>0&&("SwapEmployees"==o?this.apiService.delete("PvSwapEmployees",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"RemoveResource"==o?this.apiService.delete("PvRemoveResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"AddResource"==o?this.apiService.delete("PvAddResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"TransferResource"==o?this.apiService.delete("PvTransferResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"ReplaceResource"==o?this.apiService.delete("PvReplaceResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"TransferWithReplacement"==o?this.apiService.delete("PvTransferWithReplacement",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"ProjectVariations"==o&&this.apiService.delete("PvOpenCloseReq",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}))},r=>this.utilService.ShowApiErrorMessage(r))}viewRequest(e){let o=e.requestType;"SwapEmployees"==o?this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Swap_Employees","View",Xt):"RemoveResource"==o?this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Remove_Resource","View",Rt):"AddResource"==o?this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Add_Resource","View",Ht):"TransferResource"==o?this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Transfer_Employee","View",Pt):"ReplaceResource"==o?this.openDialogManage(e.requestNumber,g.Oi.create,"Replace_Resource_Request","View",Mt):"ProjectVariations"==o?this.apiService.get("PvOpenCloseReq/getPvOpenCloseReqById",e.requestNumber).subscribe(n=>{this.openDialogManage2(n,g.Oi.create,"Request_For_Open_Close_Project_Site","View",kt)}):"TransferWithReplacement"==o&&this.openDialogManage(e.requestNumber,g.Oi.create,"Request_For_Transfer_With_Replacement","View",Ft)}translateToolTip(e){return`${this.translate.instant(e)}`}mapEmpToRes(e){this.openDialogManage(e.requestNumber,g.Oi.create,"Employee_To_Resource_Mapping","Add",Jt)}viewMappings(e){this.openDialogManage(e,g.Oi.create,"Employee_Mapping_For_Add_Resources","View",Jt)}mergeRequest(e){this.openConfirmationDialogManage2(e,g.Oi.update,"Confirming_Merge_Request","Merge",xt,"general")}openConfirmationDialogManage2(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?"Confirming_Merge_Request"==n&&this.apiService.get("PvAddResource/mergePvAddResourceReqById",e).subscribe(d=>{d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d)}):this.notifyService.showError(this.translate.instant("Something_Went_Wrong"))})}closeModel(){this.dialogRef.close(!0)}createNew(){!this.isUpdating&&!this.isLoading&&("addResource"==this.listType?this.createNewWindow(0,this.project,g.Oi.create,"New_Request_For_Add_Resource","Add",Ht):"removeResource"==this.listType?this.createNewWindow(0,this.project,g.Oi.create,"New_Request_For_Remove_Resource","Add",Rt):"replaceResource"==this.listType?this.createNewWindow(0,this.project,g.Oi.create,"New_Request_For_Replace_Employees","Add",Mt):"swapEmployees"==this.listType?this.createNewWindow(0,this.project,g.Oi.create,"New_Request_For_Swap_Employees","Add",Xt):"transferWithReplacement"==this.listType?this.createNewWindow(0,this.project,g.Oi.create,"New_Request_For_Transfer_With_Replacement","Add",Ft):"transferResource"==this.listType&&this.createNewWindow(0,this.project,g.Oi.create,"New_Request_For_Transfer_Employee","Add",Pt))}refresh(){this.searchValue="",this.sortingOrder="requestedDate desc",this.approvedStatus="",this.listType="",this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadApprovals(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}viewAddendum(e){window.open(e.fileUrl)}uploadAdendum(e){let o=this.oprService.openAutoWidthDialog(this.dialog,oe);o.componentInstance.requestData=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewAddendumForm(e){let o=this.utilService.openCrudDialog(this.dialog,qe);o.componentInstance.pvRequest=e,o.componentInstance.type="AddResource"==e.requestType?"ForAddingResources":"RemoveResource"==e.requestType?"ForRemovingResources":"",o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-pv-requests-pagination-by-project-site"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:122,vars:67,consts:[[1,"modal-body"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-2"],[1,"mr-sm-2"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","change","ngModelChange"],["value",""],["value","addResource"],["value","removeResource"],["value","replaceResource"],["value","swapEmployees"],["value","transferResource"],["value","transferWithReplacement"],["value","projectVariations"],["value","approved"],["value","unapproved"],[1,"col-md-3"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[3,"click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-1"],[3,"isLoading"],["class","col-md-2 text-right",4,"ngIf"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","requestType"],["matColumnDef","requestNumber"],["matColumnDef","requestedBy"],["matColumnDef","requestedDate"],["matColumnDef","effectiveDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[1,"col-md-2","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-users"],[1,"fas","fa-redo"],[1,"far","fa-arrow-alt-circle-down"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"h3",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"nav",7),t.TgZ(11,"ol",8),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",9),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"li",10),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",3),t.TgZ(23,"div",12),t.TgZ(24,"div",13),t.TgZ(25,"div",14),t.TgZ(26,"div",3),t.TgZ(27,"div",15),t.TgZ(28,"label",16),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"select",17),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.listType=s}),t.TgZ(32,"option",18),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"option",19),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"option",20),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"option",21),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"option",22),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"option",23),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"option",24),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"option",25),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"div",15),t.TgZ(57,"label",16),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"select",17),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.approvedStatus=s}),t.TgZ(61,"option",18),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"option",26),t._uU(65,"Approved"),t.qZA(),t.TgZ(66,"option",27),t._uU(67,"UnApproved"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",28),t._UZ(69,"label",16),t.TgZ(70,"input",29),t.NdJ("ngModelChange",function(s){return o.searchValue=s}),t.ALo(71,"translate"),t.qZA(),t.qZA(),t.TgZ(72,"div",15),t.TgZ(73,"button",30),t.NdJ("click",function(){return o.applyFilter(o.searchValue,o.listType)}),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._uU(76," \xa0 "),t.TgZ(77,"a",31),t.NdJ("click",function(){return o.refresh()}),t._UZ(78,"i",32),t.qZA(),t._uU(79," \xa0 "),t.qZA(),t.TgZ(80,"div",33),t._UZ(81,"spinner-loader",34),t.qZA(),t.YNc(82,Sv,5,3,"div",35),t.qZA(),t.qZA(),t._UZ(83,"div",36),t.TgZ(84,"div",37),t.TgZ(85,"div",38),t.ynx(86),t.TgZ(87,"table",39),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(88,40),t.YNc(89,wv,3,3,"th",41),t.YNc(90,Uv,2,1,"td",42),t.BQk(),t.ynx(91,43),t.YNc(92,Dv,3,3,"th",41),t.YNc(93,Lv,2,1,"td",42),t.BQk(),t.ynx(94,44),t.YNc(95,Nv,3,3,"th",41),t.YNc(96,Ev,2,1,"td",42),t.BQk(),t.ynx(97,45),t.YNc(98,Ov,3,3,"th",41),t.YNc(99,kv,2,2,"td",42),t.BQk(),t.ynx(100,46),t.YNc(101,jv,3,3,"th",41),t.YNc(102,Mv,2,1,"td",42),t.BQk(),t.ynx(103,47),t.YNc(104,Rv,3,3,"th",41),t.YNc(105,Pv,2,1,"td",42),t.BQk(),t.ynx(106,48),t.YNc(107,Fv,3,3,"th",41),t.YNc(108,Iv,3,4,"td",42),t.BQk(),t.ynx(109,49),t.YNc(110,Yv,3,3,"th",41),t.YNc(111,Jv,3,4,"td",42),t.BQk(),t.ynx(112,50),t.YNc(113,Qv,3,3,"th",41),t.YNc(114,$v,4,2,"td",42),t.BQk(),t.ynx(115,51),t.YNc(116,Vv,3,3,"th",52),t.YNc(117,dx,6,5,"td",53),t.BQk(),t.YNc(118,_x,1,0,"tr",54),t.YNc(119,mx,1,0,"tr",55),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(120),t.TgZ(121,"mat-paginator",56),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,31,"Project_Management_Requests")," "),t.xp6(6),t.hij(" ",t.lcZ(14,33,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(17,35,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(20,37,"Requests")),t.xp6(10),t.Oqu(t.lcZ(30,39,"RequestType")),t.xp6(2),t.Q6J("ngModel",o.listType)("ngModelOptions",t.DdM(65,so)),t.xp6(2),t.Oqu(t.lcZ(34,41,"Select")),t.xp6(3),t.Oqu(t.lcZ(37,43,"AddResource")),t.xp6(3),t.Oqu(t.lcZ(40,45,"RemoveResource")),t.xp6(3),t.Oqu(t.lcZ(43,47,"ReplaceResource")),t.xp6(3),t.Oqu(t.lcZ(46,49,"SwapEmployees")),t.xp6(3),t.Oqu(t.lcZ(49,51,"TransferResource")),t.xp6(3),t.Oqu(t.lcZ(52,53,"TransferWithReplacement")),t.xp6(3),t.Oqu(t.lcZ(55,55,"ProjectVariations")),t.xp6(4),t.Oqu(t.lcZ(59,57,"Approval_Status")),t.xp6(2),t.Q6J("ngModel",o.approvedStatus)("ngModelOptions",t.DdM(66,so)),t.xp6(2),t.Oqu(t.lcZ(63,59,"Select")),t.xp6(8),t.MGl("placeholder","",t.lcZ(71,61,"Search"),"..."),t.Q6J("ngModel",o.searchValue),t.xp6(4),t.Oqu(t.lcZ(75,63,"Search")),t.xp6(7),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",""!=o.listType&&"projectVariations"!=o.listType),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.EJ,l.JJ,l.On,l.YN,l.Kr,l.Fj,Zt.r,Z.O5,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,ut.gM,m.XQ,m.Gk],pipes:[f.X$,Z.uU],encapsulation:2}),i})(),Fe=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d){super(p),this.translate=e,this.notifyService=o,this.utilService=n,this.dialog=s,this.apiService=r,this.dialogRef=c,this.authService=p,this.fb=u,this.oprService=d,this.confirmType="",this.leaveType="",this.remarks="",this.titleQuestion=this.translate.instant("Are_You_Sure?"),this.subTitleQuestion=""}ngOnInit(){this.setForm()}setForm(){this.form=this.fb.group({})}closeModel(e){"true"==e&&("transResign"==this.confirmType&&"TR"==this.leaveType&&""!=this.remarks||"transResign"==this.confirmType&&"R"==this.leaveType||"leave"==this.confirmType)?this.dialogRef.close({res:!0,remarks:this.remarks}):"true"==e&&"transResign"==this.confirmType&&"TR"==this.leaveType?this.notifyService.showError(this.translate.instant("Enter_Remarks")):this.dialogRef.close("true"==e&&"cancelLeave"==this.confirmType||"true"==e&&"postAttendance"==this.confirmType||"true"==e&&"general"==this.confirmType||"true"==e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.sK),t.Y36(w.g),t.Y36(b.t),t.Y36(T.uw),t.Y36(q.s),t.Y36(T.so),t.Y36(v._),t.Y36(l.qu),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-confirm-dialog-window-general"]],features:[t.qOj],decls:13,vars:13,consts:[["novalidate","",1,"mt-4",2,"text-align","center","color","red",3,"formGroup"],["role","alert",1,"alert","alert-danger"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-success","btn-midblock",3,"value","click"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-danger","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"input",2),t.NdJ("click",function(){return o.closeModel("true")}),t.ALo(8,"translate"),t.qZA(),t._uU(9," \xa0 "),t.TgZ(10,"input",3),t.NdJ("click",function(){return o.closeModel("false")}),t.ALo(11,"translate"),t.qZA(),t._uU(12," \xa0 "),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,5,o.titleQuestion)),t.xp6(2),t.hij("\xa0",t.lcZ(6,7,o.subTitleQuestion),"\xa0 "),t.xp6(2),t.s9C("value",t.lcZ(8,9,"Yes")),t.xp6(3),t.s9C("value",t.lcZ(11,11,"No")))},directives:[l._Y,l.JL,l.sg],pipes:[f.X$],encapsulation:2}),i})();function gx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",56),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).searchKey=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("ngModel",e.searchKey)}}function hx(i,a){if(1&i&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.s9C("value",e.shiftCode),t.xp6(1),t.AsE("",e.shiftCode,"-",o.isArabic?e.shiftNumberNameAR:e.shiftNumberNameEN,"")}}const lo=function(){return{standalone:!0}};function Zx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"select",57),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).searchKey=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.TgZ(1,"option",58),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.YNc(5,hx,2,3,"option",59),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("ngModel",e.searchKey)("ngModelOptions",t.DdM(9,lo)),t.xp6(2),t.AsE("",t.lcZ(3,5,"Select")," ",t.lcZ(4,7,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",e.listOfShiftCodes2)}}function fx(i,a){if(1&i){const e=t.EpF();t.ynx(0,32),t.TgZ(1,"div",33),t.TgZ(2,"div",34),t.TgZ(3,"div",35),t.TgZ(4,"h4",36),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"fieldset",37),t.TgZ(8,"label",38),t.TgZ(9,"input",39),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().reportType=n}),t.qZA(),t._uU(10,"\xa0 Attendance\xa0 "),t.TgZ(11,"input",40),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().reportType=n}),t.qZA(),t._uU(12,"\xa0TimeSheet "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",41),t.TgZ(14,"div",35),t.TgZ(15,"h4",36),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"fieldset",37),t.YNc(19,gx,1,1,"input",42),t.YNc(20,Zx,6,10,"select",43),t._uU(21," \xa0 "),t.TgZ(22,"label"),t.TgZ(23,"input",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().filterType=n})("click",function(){return t.CHM(e),t.oxw().searchKey=""}),t.qZA(),t._uU(24," \xa0Employee \xa0 "),t.TgZ(25,"input",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().filterType=n})("click",function(){return t.CHM(e),t.oxw().searchKey=""}),t.qZA(),t._uU(26," \xa0ShiftCode "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",45),t.TgZ(28,"div",46),t.TgZ(29,"span"),t.TgZ(30,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().postAttendance()}),t._UZ(31,"i",48),t.qZA(),t.TgZ(32,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().autoAttendance(-1)}),t._UZ(33,"i",49),t.qZA(),t.TgZ(34,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearAttendance()}),t._UZ(35,"i",50),t.qZA(),t.qZA(),t.TgZ(36,"span"),t.TgZ(37,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().reloadData()}),t._UZ(38,"i",51),t.qZA(),t.qZA(),t.TgZ(39,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._UZ(40,"i",52),t.qZA(),t.qZA(),t.TgZ(41,"div",53),t.TgZ(42,"div",54),t.TgZ(43,"fieldset",37),t.TgZ(44,"label"),t.TgZ(45,"input",55),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().highlightPostedAtt=n}),t.qZA(),t._uU(46),t.ALo(47,"translate"),t.TgZ(48,"input",55),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().highlightPendingAtt=n}),t.qZA(),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,20,"Report_Type")),t.xp6(4),t.Q6J("ngModel",e.reportType),t.xp6(2),t.Q6J("value","TimeSheet")("ngModel",e.reportType),t.xp6(5),t.Oqu(t.lcZ(17,22,"Search")),t.xp6(3),t.Q6J("ngIf","employee"==e.filterType),t.xp6(1),t.Q6J("ngIf","shiftCode"==e.filterType),t.xp6(3),t.Q6J("value","employee")("ngModel",e.filterType),t.xp6(2),t.Q6J("value","shiftCode")("ngModel",e.filterType),t.xp6(5),t.Q6J("matTooltip",e.translateToolTip("Post_Attendance")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Enter_Auto_Attendance")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Clear_Attendance")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Reload_Data")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Download")),t.xp6(6),t.Q6J("ngModel",e.highlightPostedAtt),t.xp6(1),t.hij("",t.lcZ(47,24,"Show_Posted_Attendance")," \xa0 "),t.xp6(2),t.Q6J("ngModel",e.highlightPendingAtt),t.xp6(1),t.hij("",t.lcZ(50,26,"Show_Pending_Attendance")," \xa0 ")}}function Ax(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",null==e.result?null:e.result.daysInMonth2),t.xp6(1),t.AsE("",null==e.result?null:e.result.month2Text,"-",null==e.result?null:e.result.year2Text,"")}}function Cx(i,a){if(1&i&&(t.TgZ(0,"span",71),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.getWeekDay(null==e?null:e.attnDate)," ")}}function Tx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",72),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).autoAttendance(n)}),t._UZ(1,"i",73),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Enter_Auto_Attendance"))}}function vx(i,a){if(1&i&&(t.TgZ(0,"th",68),t.YNc(1,Cx,2,1,"span",69),t.YNc(2,Tx,2,1,"span",70),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.s9C("id",n.getDayBackground(o)),t.Q6J("matTooltip",n.getDayTooltip(e)),t.xp6(1),t.Q6J("ngIf",n.activeColumn!=o&&(!(null!=e&&e.isHoliday)||n.activeColumn<o)),t.xp6(1),t.Q6J("ngIf",n.activeColumn==o||(null==e?null:e.isHoliday)&&n.activeColumn>o)}}function xx(i,a){1&i&&(t.ynx(0),t.TgZ(1,"th",74),t._uU(2," \u0639\u062f\u062f \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(3,"th",74),t._uU(4," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(5,"th",74),t._uU(6," \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0637\u0644\u0629 \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064a\u0629 "),t.qZA(),t.TgZ(7,"th",74),t._uU(8," \u0627\u062c\u0627\u0632\u0629 \u0633\u0646\u0648\u064a\u0629 "),t.qZA(),t.TgZ(9,"th",74),t._uU(10," \u0625\u062c\u0627\u0632\u0629 \u062e\u0627\u0635\u0629/\u0637\u0627\u0631\u0626\u0629 "),t.qZA(),t.TgZ(11,"th",74),t._uU(12," \u0627\u062c\u0627\u0632\u0629 \u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0647 "),t.qZA(),t.TgZ(13,"th",74),t._uU(14," \u0627\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629 "),t.qZA(),t.TgZ(15,"th",74),t._uU(16," \u0625\u062c\u0627\u0632\u0629 \u0627\u062e\u062a\u0628\u0627\u0631\u0627\u062a "),t.qZA(),t.TgZ(17,"th",74),t._uU(18," \u063a\u064a\u0627\u0628 "),t.qZA(),t.TgZ(19,"th",74),t._uU(20," \u0627\u0646\u0633\u062d\u0627\u0628 "),t.qZA(),t.TgZ(21,"th",75),t._uU(22," \u062c\u0632\u0627\u0621\u0627\u062a "),t.qZA(),t.TgZ(23,"th",75),t._uU(24," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u062a\u0627\u062e\u064a\u0631 "),t.qZA(),t.TgZ(25,"th",76),t._uU(26," \u0648\u0642\u062a \u0627\u0636\u0627\u0641\u0649 "),t.qZA(),t.BQk())}function qx(i,a){if(1&i&&(t.TgZ(0,"th",68),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.s9C("id",n.getDayBackground(o)),t.Q6J("matTooltip",n.getDayTooltip(e)),t.xp6(1),t.hij(" ",e.day," ")}}function bx(i,a){1&i&&(t.ynx(0),t.TgZ(1,"th",74),t._uU(2," W D C "),t.qZA(),t.TgZ(3,"th",74),t._uU(4," Nor. Hrs "),t.qZA(),t.TgZ(5,"th",74),t._uU(6," OF "),t.qZA(),t.TgZ(7,"th",74),t._uU(8," AL "),t.qZA(),t.TgZ(9,"th",74),t._uU(10," EL "),t.qZA(),t.TgZ(11,"th",74),t._uU(12," UL "),t.qZA(),t.TgZ(13,"th",74),t._uU(14," SL "),t.qZA(),t.TgZ(15,"th",74),t._uU(16," STL "),t.qZA(),t.TgZ(17,"th",74),t._uU(18," A "),t.qZA(),t.TgZ(19,"th",74),t._uU(20," W "),t.qZA(),t.TgZ(21,"th",75),t._uU(22," Penalty "),t.qZA(),t.TgZ(23,"th",75),t._uU(24," Late Hours "),t.qZA(),t.TgZ(25,"th",76),t._uU(26," OT "),t.qZA(),t.BQk())}function yx(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t._uU(2,"No Attendance Found"),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",(null==e.result||null==e.result.columns?null:e.result.columns.length)+4)}}function Sx(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," ")}}function wx(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," ")}}function Ux(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," ")}}function Dx(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," ")}}function Lx(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function Nx(i,a){if(1&i&&(t.TgZ(0,"td",84),t._uU(1),t.YNc(2,Lx,2,0,"span",85),t.TgZ(3,"span",86),t._UZ(4,"br"),t._uU(5),t.qZA(),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")")}}function Ex(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function Ox(i,a){if(1&i&&(t.TgZ(0,"td",84),t._uU(1),t.YNc(2,Ex,2,0,"span",88),t.TgZ(3,"span",86),t._UZ(4,"br"),t._uU(5),t.qZA(),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")")}}function kx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",89),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).singClick(r,s)})("contextmenu",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).onRightClick(r,s)}),t._uU(1),t.qZA()}if(2&i){const e=a.index,o=t.oxw(2).index,n=t.oxw(3);t.s9C("id",n.getCellBackGround(o,e)),t.Q6J("matTooltip",n.getToolTip(o,e)),t.xp6(1),t.hij(" ",n.getAttendanceFlag(o,e)," ")}}function jx(i,a){if(1&i&&(t.TgZ(0,"td",92),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"WDC")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].wdc," ")}}function Mx(i,a){if(1&i&&(t.TgZ(0,"td",92),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"WDC")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].wdc," ")}}function Rx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"No.Of.Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime)/60," ")}}function Px(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"No.Of.Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime)/60," ")}}function Fx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OF")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].contractualShiftTime)-(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime))/s.result.siteWorkingTime," ")}}function Ix(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OF")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].contractualShiftTime)-(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime))/s.result.siteWorkingTime," ")}}function Yx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"AL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].AL," ")}}function Jx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"AL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].AL," ")}}function Qx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"EL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].EL," ")}}function Bx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"EL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].EL," ")}}function Hx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"UL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].UL," ")}}function $x(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"UL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].UL," ")}}function Vx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"SL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].SL," ")}}function Gx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"SL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].SL," ")}}function Wx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"STL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].STL," ")}}function zx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"STL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].STL," ")}}function Xx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Ab")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab," ")}}function Kx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Ab")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab," ")}}function tq(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"W")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].W," ")}}function eq(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"W")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].W," ")}}function oq(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Penalty")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",2*(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab)," ")}}function iq(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Penalty")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",2*(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab)," ")}}function nq(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Late Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].lateHrs)," ")}}function aq(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Late Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].lateHrs)," ")}}function sq(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OT")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].OT)," ")}}function rq(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OT")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].OT)," ")}}function lq(i,a){if(1&i&&(t.ynx(0),t.YNc(1,jx,2,4,"td",90),t.YNc(2,Mx,2,4,"td",90),t.YNc(3,Rx,2,4,"td",91),t.YNc(4,Px,2,4,"td",91),t.YNc(5,Fx,2,4,"td",91),t.YNc(6,Ix,2,4,"td",91),t.YNc(7,Yx,2,4,"td",91),t.YNc(8,Jx,2,4,"td",91),t.YNc(9,Qx,2,4,"td",91),t.YNc(10,Bx,2,4,"td",91),t.YNc(11,Hx,2,4,"td",91),t.YNc(12,$x,2,4,"td",91),t.YNc(13,Vx,2,4,"td",91),t.YNc(14,Gx,2,4,"td",91),t.YNc(15,Wx,2,4,"td",91),t.YNc(16,zx,2,4,"td",91),t.YNc(17,Xx,2,4,"td",91),t.YNc(18,Kx,2,4,"td",91),t.YNc(19,tq,2,4,"td",91),t.YNc(20,eq,2,4,"td",91),t.YNc(21,oq,2,4,"td",91),t.YNc(22,iq,2,4,"td",91),t.YNc(23,nq,2,4,"td",91),t.YNc(24,aq,2,4,"td",91),t.YNc(25,sq,2,4,"td",91),t.YNc(26,rq,2,4,"td",91),t.BQk()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber))}}function cq(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Sx,2,3,"td",79),t.YNc(2,wx,2,3,"td",79),t.YNc(3,Ux,2,3,"td",80),t.YNc(4,Dx,2,3,"td",80),t.YNc(5,Nx,6,5,"td",81),t.YNc(6,Ox,6,5,"td",81),t.TgZ(7,"td",82),t._uU(8),t.qZA(),t.YNc(9,kx,2,3,"td",83),t.YNc(10,lq,27,26,"ng-container",63),t.BQk()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.s9C("id",s.getShiftBgColor(null==n?null:n.shiftCode)),t.xp6(1),t.hij(" ",s.getShiftNumberName(null==n?null:n.shiftCode)," "),t.xp6(1),t.Q6J("ngForOf",n.attendanceMatrix),t.xp6(1),t.Q6J("ngIf","TimeSheet"==s.reportType&&0!=(null==s.result?null:s.result.rows.length)&&!s.isLoading)}}function pq(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,cq,11,10,"ng-container",63),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.canShowRow(e))}}function uq(i,a){if(1&i&&(t.ynx(0),t.YNc(1,pq,2,1,"tr",78),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.result.rows)}}function dq(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function _q(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",89),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).singClick(r,s)})("contextmenu",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).onRightClick(r,s)}),t._uU(1),t.qZA()}if(2&i){const e=a.index,o=t.oxw(2).index,n=t.oxw(3);t.s9C("id",n.getCellBackGround(o,e)),t.Q6J("matTooltip",n.getToolTip(o,e)),t.xp6(1),t.hij(" ",n.getAttendanceFlag(o,e)," ")}}function mq(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td",92),t._uU(2),t.qZA(),t.TgZ(3,"td",93),t._uU(4),t.qZA(),t.TgZ(5,"td",93),t._uU(6),t.qZA(),t.TgZ(7,"td",93),t._uU(8),t.qZA(),t.TgZ(9,"td",93),t._uU(10),t.qZA(),t.TgZ(11,"td",93),t._uU(12),t.qZA(),t.TgZ(13,"td",93),t._uU(14),t.qZA(),t.TgZ(15,"td",93),t._uU(16),t.qZA(),t.TgZ(17,"td",93),t._uU(18),t.qZA(),t.TgZ(19,"td",93),t._uU(20),t.qZA(),t.TgZ(21,"td",93),t._uU(22),t.qZA(),t.TgZ(23,"td",93),t._uU(24),t.qZA(),t.TgZ(25,"td",93),t._uU(26),t.qZA(),t.BQk()),2&i){const e=t.oxw(2).index,o=t.oxw(3);t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"WDC")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].wdc," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"No.Of.Hrs")),t.xp6(1),t.hij(" ",(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].allottedShiftTime)/60," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"OF")),t.xp6(1),t.hij(" ",((null==o.result||null==o.result.rows[e]?null:o.result.rows[e].contractualShiftTime)-(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].allottedShiftTime))/o.result.siteWorkingTime," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"AL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].AL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"EL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].EL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"UL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].UL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"SL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].SL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"STL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].STL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Ab")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].Ab," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"W")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].W," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Penalty")),t.xp6(1),t.hij(" ",2*(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].Ab)," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Late Hrs")),t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].lateHrs)," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"OT")),t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].OT)," ")}}function gq(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td",82),t._uU(2),t.qZA(),t.TgZ(3,"td",82),t._uU(4),t.qZA(),t.TgZ(5,"td",84),t._uU(6),t.YNc(7,dq,2,0,"span",85),t.TgZ(8,"span",86),t._UZ(9,"br"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"td",82),t._uU(12),t.qZA(),t.YNc(13,_q,2,3,"td",83),t.YNc(14,mq,27,39,"ng-container",63),t.BQk()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," "),t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," "),t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")"),t.xp6(1),t.s9C("id",s.getShiftBgColor(null==n?null:n.shiftCode)),t.xp6(1),t.hij(" ",s.getShiftNumberName(null==n?null:n.shiftCode)," "),t.xp6(1),t.Q6J("ngForOf",n.attendanceMatrix),t.xp6(1),t.Q6J("ngIf","TimeSheet"==s.reportType&&0!=(null==s.result?null:s.result.rows.length)&&!s.isLoading)}}function hq(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,gq,15,12,"ng-container",63),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.canShowRow(e))}}function Zq(i,a){if(1&i&&(t.ynx(0),t.YNc(1,hq,2,1,"tr",78),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.result.rows)}}function fq(i,a){if(1&i&&(t.TgZ(0,"td",98),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime,"1.0-1")," ")}}function Aq(i,a){if(1&i&&(t.TgZ(0,"td",101),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function Cq(i,a){if(1&i&&(t.TgZ(0,"td",98),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)," ")}}function Tq(i,a){if(1&i&&(t.TgZ(0,"td",101),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function vq(i,a){if(1&i&&(t.TgZ(0,"td",106),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime)/((null==o.result?null:o.result.siteWorkingTime)/60)-(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function xq(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",94),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"td"),t.TgZ(6,"td",95),t._uU(7),t.qZA(),t.TgZ(8,"td",95),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",95),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",95),t._uU(15),t.qZA(),t.TgZ(16,"td",95),t._uU(17),t.qZA(),t.TgZ(18,"td",95),t._uU(19),t.qZA(),t.TgZ(20,"td",95),t._uU(21),t.qZA(),t.TgZ(22,"td",95),t._uU(23),t.qZA(),t.TgZ(24,"td",95),t._uU(25),t.qZA(),t.TgZ(26,"td",95),t._uU(27),t.qZA(),t.TgZ(28,"td",95),t._uU(29),t.qZA(),t.TgZ(30,"td",95),t._uU(31),t.ALo(32,"number"),t.qZA(),t.TgZ(33,"td",95),t._uU(34),t.ALo(35,"number"),t.qZA(),t.qZA(),t.TgZ(36,"tr"),t.TgZ(37,"td",96),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.YNc(40,fq,3,4,"td",97),t.TgZ(41,"td",98),t._uU(42),t.ALo(43,"number"),t.qZA(),t._UZ(44,"td",99),t._UZ(45,"td",99),t._UZ(46,"td",99),t._UZ(47,"td",99),t._UZ(48,"td",99),t._UZ(49,"td",99),t._UZ(50,"td",99),t._UZ(51,"td",99),t._UZ(52,"td",99),t._UZ(53,"td",99),t._UZ(54,"td",99),t._UZ(55,"td",99),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"td",94),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.YNc(60,Aq,3,4,"td",100),t.TgZ(61,"td",101),t._uU(62),t.ALo(63,"number"),t.qZA(),t._UZ(64,"td",99),t._UZ(65,"td",99),t._UZ(66,"td",99),t._UZ(67,"td",99),t._UZ(68,"td",99),t._UZ(69,"td",99),t._UZ(70,"td",99),t._UZ(71,"td",99),t._UZ(72,"td",99),t._UZ(73,"td",99),t._UZ(74,"td",99),t._UZ(75,"td",99),t.qZA(),t.TgZ(76,"tr"),t.TgZ(77,"td",102),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.YNc(80,Cq,2,1,"td",103),t.TgZ(81,"td",98),t._uU(82),t.qZA(),t._UZ(83,"td",99),t._UZ(84,"td",99),t._UZ(85,"td",99),t._UZ(86,"td",99),t._UZ(87,"td",99),t._UZ(88,"td",99),t._UZ(89,"td",99),t._UZ(90,"td",99),t._UZ(91,"td",99),t._UZ(92,"td",99),t._UZ(93,"td",99),t._UZ(94,"td",99),t.qZA(),t.TgZ(95,"tr"),t.TgZ(96,"td",94),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.YNc(99,Tq,3,4,"td",100),t.TgZ(100,"td",101),t._uU(101),t.ALo(102,"number"),t.qZA(),t._UZ(103,"td",99),t._UZ(104,"td",99),t._UZ(105,"td",99),t._UZ(106,"td",99),t._UZ(107,"td",99),t._UZ(108,"td",99),t._UZ(109,"td",99),t._UZ(110,"td",99),t._UZ(111,"td",99),t._UZ(112,"td",99),t._UZ(113,"td",99),t._UZ(114,"td",99),t.qZA(),t.TgZ(115,"tr"),t.TgZ(116,"td",104),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.YNc(119,vq,3,4,"td",105),t.TgZ(120,"td",106),t._uU(121),t.ALo(122,"number"),t.qZA(),t._UZ(123,"td",99),t._UZ(124,"td",99),t._UZ(125,"td",99),t._UZ(126,"td",99),t._UZ(127,"td",99),t._UZ(128,"td",99),t._UZ(129,"td",99),t._UZ(130,"td",99),t._UZ(131,"td",99),t._UZ(132,"td",99),t._UZ(133,"td",99),t._UZ(134,"td",99),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,30,"Total")," "),t.xp6(2),t.uIk("colspan",null==e.result?null:e.result.columns.length),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.wdc," "),t.xp6(2),t.hij(" ",t.xi3(10,32,(null==e.rowGrandTotal?null:e.rowGrandTotal.wdc)*(null==e.result?null:e.result.siteWorkingTime)/60,"1.0-1")," "),t.xp6(3),t.hij(" ",t.xi3(13,35,null==e.rowGrandTotal?null:e.rowGrandTotal.OF,"1.0-1")," "),t.xp6(3),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.AL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.EL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.UL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.SL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.STL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.Ab," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.W," "),t.xp6(2),t.hij(" ",2*(null==e.rowGrandTotal?null:e.rowGrandTotal.Ab)," "),t.xp6(2),t.hij(" ",t.xi3(32,38,null==e.rowGrandTotal?null:e.rowGrandTotal.lateHrs,"1.0-1")," "),t.xp6(3),t.hij(" ",t.xi3(35,41,null==e.rowGrandTotal?null:e.rowGrandTotal.OT,"1.0-1")," "),t.xp6(4),t.hij(" ",t.lcZ(39,44,"Total_Contracted_Hours")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(43,46,null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime,"1.0-1")," "),t.xp6(16),t.hij(" ",t.lcZ(59,49,"Total_Contracted_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(63,51,e.columnGrandTotal.contractualShiftTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(16),t.hij(" ",t.lcZ(79,54,"Actual_Hours")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",e.hrsToStrHrsMins(e.columnGrandTotal.attendedTime)," "),t.xp6(15),t.hij(" ",t.lcZ(98,56,"Actual_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(102,58,e.columnGrandTotal.attendedTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(16),t.hij(" ",t.lcZ(118,61,"Variance_of_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(122,63,(null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime)/((null==e.result?null:e.result.siteWorkingTime)/60)-(null==e.columnGrandTotal?null:e.columnGrandTotal.attendedTime)/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," ")}}function qq(i,a){if(1&i&&(t.TgZ(0,"table",61),t.TgZ(1,"tr"),t._UZ(2,"th",62),t.ynx(3),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.BQk(),t.YNc(6,Ax,3,3,"ng-container",63),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"th",64),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",65),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",64),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,vx,3,4,"th",66),t.YNc(18,xx,27,0,"ng-container",63),t.qZA(),t.TgZ(19,"tr"),t.YNc(20,qx,2,3,"th",66),t.YNc(21,bx,27,0,"ng-container",63),t.qZA(),t.TgZ(22,"tbody",67),t.YNc(23,yx,3,1,"tr",63),t.YNc(24,uq,2,1,"ng-container",63),t.YNc(25,Zq,2,1,"ng-container",63),t.YNc(26,xq,135,66,"ng-container",63),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.uIk("colspan",null==e.result?null:e.result.daysInMonth1),t.xp6(1),t.AsE("",null==e.result?null:e.result.month1Text,"-",null==e.result?null:e.result.year1Text,""),t.xp6(1),t.Q6J("ngIf",!(null!=e.result&&e.result.isSingleMonth)),t.xp6(3),t.hij(" ",t.lcZ(10,15,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(13,17,"Employee")," "),t.xp6(3),t.hij(" ",t.lcZ(16,19,"Shift")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading),t.xp6(2),t.Q6J("ngIf",0==(null==e.result?null:e.result.rows.length)),t.xp6(1),t.Q6J("ngIf",!e.isShiftFilterApplied()),t.xp6(1),t.Q6J("ngIf",e.isShiftFilterApplied()),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading)}}function bq(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",110),t._uU(4),t.qZA(),t.TgZ(5,"td",111),t._uU(6),t.qZA(),t.TgZ(7,"td",111),t._uU(8),t.qZA(),t.TgZ(9,"td",111),t._uU(10),t.qZA(),t.TgZ(11,"td",111),t._uU(12),t.qZA(),t.TgZ(13,"td",111),t._uU(14),t.qZA(),t.TgZ(15,"td",111),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(null==e?null:e.positionName),t.xp6(2),t.hij("",null==e?null:e.qty," "),t.xp6(2),t.hij("",null==e?null:e.dailyHrs," "),t.xp6(2),t.hij("",null==e?null:e.monthlyHrs," "),t.xp6(2),t.Oqu(null==e?null:e.monthlyShifts),t.xp6(2),t.hij("",(null==e?null:e.monthlyShifts)-(null==e?null:e.monthlyOffs)," "),t.xp6(2),t.Oqu(null==e?null:e.monthlyOffs)}}function yq(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td",114),t._uU(4),t.qZA(),t.TgZ(5,"th"),t._uU(6,"= "),t.qZA(),t.TgZ(7,"td",115),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.shiftCode),t.xp6(1),t.MGl("id","bgColorShift_",null==e?null:e.shiftNumber,""),t.xp6(1),t.hij("",o.isArabic?null==e?null:e.shiftName_AR:null==e?null:e.shiftName_EN," "),t.xp6(3),t.MGl("id","bgColorShift_",null==e?null:e.shiftNumber,""),t.xp6(1),t.hij("",o.isArabic?null==e?null:e.shiftNumberNameAR:null==e?null:e.shiftNumberNameEN," ")}}function Sq(i,a){if(1&i&&(t.TgZ(0,"div",107),t.TgZ(1,"div",108),t.TgZ(2,"div",35),t.TgZ(3,"table",109),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th",110),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",111),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",111),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th",111),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th",111),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th",111),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th",111),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.YNc(29,bq,17,8,"tr",78),t.TgZ(30,"tr"),t.TgZ(31,"th",111),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"th",111),t._uU(35),t.qZA(),t.TgZ(36,"th",111),t._uU(37),t.qZA(),t.TgZ(38,"th",111),t._uU(39),t.qZA(),t.TgZ(40,"th",111),t._uU(41),t.qZA(),t.TgZ(42,"th",111),t._uU(43),t.qZA(),t.TgZ(44,"th",111),t._uU(45),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",112),t.TgZ(47,"div",35),t.TgZ(48,"table",109),t.TgZ(49,"tr"),t.TgZ(50,"th",111),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"td"),t._uU(54),t.ALo(55,"number"),t.qZA(),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"th",111),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"td"),t._uU(61),t.ALo(62,"number"),t.qZA(),t.qZA(),t.TgZ(63,"tr"),t.TgZ(64,"th",111),t._uU(65),t.ALo(66,"translate"),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"td"),t._uU(69),t.ALo(70,"number"),t.qZA(),t.qZA(),t.TgZ(71,"tr"),t.TgZ(72,"th",111),t._uU(73),t.ALo(74,"translate"),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"td"),t._uU(77),t.ALo(78,"number"),t.qZA(),t.qZA(),t.TgZ(79,"tr"),t.TgZ(80,"th",111),t._uU(81),t.ALo(82,"translate"),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"td"),t._uU(85),t.ALo(86,"number"),t.qZA(),t.qZA(),t.TgZ(87,"tr"),t.TgZ(88,"th",111),t._uU(89),t.ALo(90,"translate"),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"td"),t._uU(93),t.ALo(94,"number"),t.qZA(),t.qZA(),t.TgZ(95,"tr"),t.TgZ(96,"th",111),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.TgZ(99,"td"),t._uU(100),t.ALo(101,"number"),t.qZA(),t.qZA(),t.TgZ(102,"tr"),t.TgZ(103,"th",111),t._uU(104),t.ALo(105,"translate"),t.qZA(),t.TgZ(106,"td"),t._uU(107),t.ALo(108,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(109,"div",113),t.TgZ(110,"div",35),t.TgZ(111,"table",109),t.YNc(112,yq,9,5,"tr",78),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,37,"S.No")),t.xp6(3),t.hij("",t.lcZ(10,39,"Position")," "),t.xp6(3),t.hij("",t.lcZ(13,41,"Qty")," "),t.xp6(3),t.hij("",t.lcZ(16,43,"Daily_Hrs")," "),t.xp6(3),t.hij("",t.lcZ(19,45,"Monthly_Hrs")," "),t.xp6(3),t.hij("",t.lcZ(22,47,"Scheduled_Shifts")," "),t.xp6(3),t.hij("",t.lcZ(25,49,"Assigned_Shifts")," "),t.xp6(3),t.hij("",t.lcZ(28,51,"OFFS")," "),t.xp6(2),t.Q6J("ngForOf",null==e.roasterReport?null:e.roasterReport.rowsByPositions),t.xp6(3),t.Oqu(t.lcZ(33,53,"Total")),t.xp6(3),t.hij("",null==e.roasterReport?null:e.roasterReport.qty," "),t.xp6(2),t.hij("",null==e.roasterReport?null:e.roasterReport.dailyHrs," "),t.xp6(2),t.hij("",null==e.roasterReport?null:e.roasterReport.monthlyHrs," "),t.xp6(2),t.Oqu(null==e.roasterReport?null:e.roasterReport.monthlyShifts),t.xp6(2),t.hij("",(null==e.roasterReport?null:e.roasterReport.monthlyShifts)-(null==e.roasterReport?null:e.roasterReport.monthlyOffs)," "),t.xp6(2),t.Oqu(null==e.roasterReport?null:e.roasterReport.monthlyOffs),t.xp6(6),t.Oqu(t.lcZ(52,55,"Contracted_Shifts")),t.xp6(3),t.hij(" ",t.xi3(55,57,e.columnGrandTotal.contractualShiftTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(59,60,"Contracted_Hours")),t.xp6(3),t.hij("",t.xi3(62,62,null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime,"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(66,65,"Actual_Shifts"),"(",t.lcZ(67,67,"With_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(70,69,(e.columnGrandTotal.attendedTime+(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)/2)/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(74,72,"Actual_Hours"),"(",t.lcZ(75,74,"With_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(78,76,e.columnGrandTotal.attendedTime+(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)/2,"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(82,79,"Actual_Shifts"),"(",t.lcZ(83,81,"Without_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(86,83,e.columnGrandTotal.attendedTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(90,86,"Actual_Hours"),"(",t.lcZ(91,88,"Without_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(94,90,e.columnGrandTotal.attendedTime,"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(98,93,"Overtime_Hours")),t.xp6(3),t.hij("",t.xi3(101,95,null==e.rowGrandTotal?null:e.rowGrandTotal.OT,"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(105,98,"Overtime_Shifts\t")),t.xp6(3),t.hij(" ",t.xi3(108,100,60*(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)*1.5/(null==e.result?null:e.result.siteWorkingTime),"1.0-1"),""),t.xp6(5),t.Q6J("ngForOf",e.listOfShiftCodes2)}}let wq=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(u),this.datePipe=e,this.dialog=o,this.oprService=n,this.fb=s,this.http=r,this.router=c,this.apiService=p,this.authService=u,this.utilService=d,this.translate=_,this.notifyService=h,this.validationService=A,this.dialogRef=C,this.result={rows:[],columns:[]},this.filteredRows=[],this.rows=[],this.isLoading=!1,this.isArabic=!1,this.employeesGroup=[],this.projectCode="",this.siteCode="",this.fromDate=new Date,this.toDate=new Date,this.minDate=new Date,this.maxDate=new Date,this.projectSelectionList=[],this.siteSelectionList=[],this.readonly=!1,this.isFromProjectSiteActions=!0,this.listOfShiftCodes2=[],this.reportType="TimeSheet",this.filterType="employee",this.highlightPostedAtt=!1,this.highlightPendingAtt=!1,this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1},this.columnGrandTotal={contractualShiftTime:0,attendedTime:0},this.rowGrandTotal={contractualShiftTime:0,wdc:10,AL:0,UL:0,SL:0,EL:0,STL:0,Ab:0,OT:0,lateHrs:0,W:0,OF:0},this.pageNumber=0,this.pageSize=1,this.totalRowsCount=0,this.totalEmployeesCount=0,this.tempAltEmployeeNumber="",this.filter={employeeNumber:"",shiftCode:""},this.searchKey="",this.dataProcessedTime=new Date,this.isDataProcessed=!1,this.time=0,this.waitingTime=60,this.activeColumn=-1,this.shiftTypeNames=[{number:0,nameEn:"OFF",nameAr:"\u0639\u0637\u0644\u0629ss"},{number:1,nameEn:"Shift 1",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u0623\u0648\u0644\u0649"},{number:2,nameEn:"Shift 2",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0646\u064a\u0629"},{number:3,nameEn:"Shift 3",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"},{number:4,nameEn:"Shift 4",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"}],this.roasterReport={rows:[]}}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.isFromProjectSiteActions&&this.setForm()}setForm(){this.form=this.fb.group({}),this.isFromProjectSiteActions&&(this.readonly=!0,this.getProjectData(),this.getSiteData(),this.loadShiftCodes())}submit(){}loadProjectSelectionList(){this.apiService.getall("project/getSelectProjectList2").subscribe(e=>{this.projectSelectionList=e})}loadSiteSelectionListForProject(){this.apiService.getall(`projectSites/getSelectProjectSitesListByProjectCode/${this.projectCode}`).subscribe(e=>{this.siteSelectionList=e})}getProjectData(){this.apiService.getall(`project/getProjectByProjectCode/${this.projectCode}`).subscribe(e=>{this.projectData=e})}getSiteData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.projectCode}/${this.siteCode}`).subscribe(e=>{this.siteData=e})}getReport(){if(this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1},this.fromDate.getDate()>28)this.notifyService.showInfo("Invalid Payroll Date: Select Date between 1-28");else{let o=new Date(this.fromDate);o.setMinutes(o.getMinutes()-o.getTimezoneOffset()),this.fromDate=o,this.getReports()}}getRoasterReport(e){this.apiService.post("Reports/getRoasterPayrollReport",e).subscribe(o=>{this.roasterReport=o})}calculateRowGrandTotal(){var e;this.rowGrandTotal={contractualShiftTime:0,wdc:0,AL:0,UL:0,SL:0,EL:0,STL:0,Ab:0,OT:0,lateHrs:0,W:0,OF:0};for(let o=0;o<(null===(e=this.result)||void 0===e?void 0:e.rows.length);o++)(0==o||this.result.rows[o].employeeNumber!=this.result.rows[o-1].employeeNumber)&&(this.rowGrandTotal.wdc+=this.result.rows[o].wdc,this.rowGrandTotal.contractualShiftTime+=this.result.rows[o].contractualShiftTime,this.rowGrandTotal.allottedShiftTime+=this.result.rows[o].allottedShiftTime,this.rowGrandTotal.AL+=this.result.rows[o].AL,this.rowGrandTotal.UL+=this.result.rows[o].UL,this.rowGrandTotal.SL+=this.result.rows[o].SL,this.rowGrandTotal.EL+=this.result.rows[o].EL,this.rowGrandTotal.STL+=this.result.rows[o].STL,this.rowGrandTotal.Ab+=this.result.rows[o].Ab,this.rowGrandTotal.OT+=this.result.rows[o].OT,this.rowGrandTotal.lateHrs+=this.result.rows[o].lateHrs,this.rowGrandTotal.W+=this.result.rows[o].W,this.rowGrandTotal.OF+=(this.result.rows[o].contractualShiftTime-this.result.rows[o].allottedShiftTime)/this.result.siteWorkingTime)}getReports(){if(""!=this.projectCode&&""!=this.siteCode){let e={projectCode:this.projectCode,siteCode:this.siteCode,payrollStartDate:this.fromDate,pageNumber:this.pageNumber,pageSize:this.pageSize,employeeNumber:""};this.isLoading=!0,this.apiService.post("Reports/getAttendancePayrollReport",e).subscribe(o=>{var n,s;this.result=o,(null===(n=null==o?void 0:o.rows)||void 0===n?void 0:n.length)>0?((null==o?void 0:o.isExistEmptyShifts)&&this.notifyService.showWarning("Incomplete_Shift_Locks"),this.fromDate=null==o?void 0:o.columns[0].attnDate,this.toDate=null==o?void 0:o.columns[(null===(s=null==o?void 0:o.columns)||void 0===s?void 0:s.length)-1].attnDate,this.totalEmployeesCount=o.totalEmployeesCount,this.loadRemainingData(e),this.getRoasterReport(e)):(this.notifyService.showInfo("No Roasters Found"),this.isLoading=!1)},o=>{this.isLoading=!1,this.notifyService.showError(o.error.message)})}}loadRemainingData(e){e.pageNumber++,e.pageNumber>Math.floor(this.totalEmployeesCount/this.pageSize)?(this.employeesGroup=[],this.isLoading=!1,this.generateReportAndCalculations(),this.startTimer(),this.RefreshOffs()):this.apiService.post("Reports/getAttendancePayrollReport",e).subscribe(o=>{this.result.rows=this.result.rows.concat(o.rows),this.loadRemainingData(e)})}filterRows(e){return e.filter(o=>o.employeeNumber)}generateReportAndCalculations(){this.employeesGroup=[],this.result.rows.sort((e,o)=>e.employeeNumber<o.employeeNumber?-1:1),this.result.rows.forEach(e=>{e.uniqueShiftsCount>0&&this.employeesGroup.indexOf(o=>o.employeeNumber==e.employeeNumber)<0&&this.employeesGroup.push({employeeNumber:e.employeeNumber})}),this.calculateColumnTotals(this.result),this.calculateRowTotals(this.result),this.updateActiveColumn(),this.calculateRowGrandTotal()}updateActiveColumn(){this.activeColumn=-1;for(let e=0;e<this.result.columns.length;e++)if(this.result.rows.findIndex(o=>o.attendanceMatrix[e].attndId>0)<0&&!this.result.columns[e].isHoliday&&this.result.rows.findIndex(o=>"O"!=o.shiftCode&&"-"==o.attendanceMatrix[e].attnFlag)>=0){this.activeColumn=e;break}}calculateRowTotals(e){var o,n,s,r,c,p,u,d,_,h,A,C,S,L,U,M,O,F,P,st,H,z,et,ht,ct;for(let Y=0;Y<(null==e?void 0:e.rows.length);Y++){let R=null==e?void 0:e.rows.filter(G=>G.employeeNumber==(null==e?void 0:e.rows[Y].employeeNumber)),$=0,St=0,qt=0,Tt=0,Ct=0,I=0,J=0,yt=0,bt=0,wt=0,vt=0,Lt=0;for(let G=0;G<R.length;G++)for(let K=0;K<(null==e?void 0:e.columns.length);K++)St+=R[G].attendanceMatrix[K].contractualShiftTime,qt+=R[G].attendanceMatrix[K].allottedShiftTime,R[G].attendanceMatrix[K].allottedShiftTime>0&&$++,1==(null===(o=R[G].attendanceMatrix[K])||void 0===o?void 0:o.isOnLeave)?"AL"==R[G].attendanceMatrix[K].attnFlag?Tt++:"UL"==R[G].attendanceMatrix[K].attnFlag?yt++:"CL"==R[G].attendanceMatrix[K].attnFlag?I++:"STL"==R[G].attendanceMatrix[K].attnFlag?J++:"EL"==R[G].attendanceMatrix[K].attnFlag?Ct++:"W"==R[G].attendanceMatrix[K].attnFlag&&wt++:"S"==(null===(n=R[G].attendanceMatrix[K])||void 0===n?void 0:n.attnFlag)||"A"==(null===(s=R[G].attendanceMatrix[K])||void 0===s?void 0:s.attnFlag)?bt++:(null===(r=R[G].attendanceMatrix[K])||void 0===r?void 0:r.refIdForAlt)>0?vt+=null!==(p=null===(c=R[G].attendanceMatrix[K])||void 0===c?void 0:c.attendedTime)&&void 0!==p?p:0:0==(null===(d=null===(u=R[G])||void 0===u?void 0:u.attendanceMatrix[K])||void 0===d?void 0:d.refIdForAlt)&&(null===(h=null===(_=R[G])||void 0===_?void 0:_.attendanceMatrix[K])||void 0===h?void 0:h.allottedShiftTime)<(null===(C=null===(A=R[G])||void 0===A?void 0:A.attendanceMatrix[K])||void 0===C?void 0:C.attendedTime)&&(vt+=(null===(L=null===(S=R[G])||void 0===S?void 0:S.attendanceMatrix[K])||void 0===L?void 0:L.attendedTime)-(null===(U=R[G].attendanceMatrix[K])||void 0===U?void 0:U.allottedShiftTime)),(null===(M=R[G].attendanceMatrix[K])||void 0===M?void 0:M.attndId)>0&&"S"!=(null===(O=R[G].attendanceMatrix[K])||void 0===O?void 0:O.attnFlag)&&"A"!=(null===(F=R[G].attendanceMatrix[K])||void 0===F?void 0:F.attnFlag)&&(null===(P=R[G].attendanceMatrix[K])||void 0===P?void 0:P.allottedShiftTime)>(null===(H=null===(st=R[G])||void 0===st?void 0:st.attendanceMatrix[K])||void 0===H?void 0:H.attendedTime)&&(Lt+=(null===(et=null===(z=R[G])||void 0===z?void 0:z.attendanceMatrix[K])||void 0===et?void 0:et.allottedShiftTime)-(null===(ct=null===(ht=R[G])||void 0===ht?void 0:ht.attendanceMatrix[K])||void 0===ct?void 0:ct.attendedTime));e.rows[Y].contractualShiftTime=St,e.rows[Y].wdc=$,e.rows[Y].allottedShiftTime=qt,e.rows[Y].AL=Tt,e.rows[Y].UL=yt,e.rows[Y].SL=I,e.rows[Y].EL=Ct,e.rows[Y].STL=J,e.rows[Y].Ab=bt,e.rows[Y].OT=vt/60,e.rows[Y].lateHrs=Lt/60,e.rows[Y].W=wt}}calculateColumnTotals(e){var o,n,s;this.columnGrandTotal.contractualShiftTime=0,this.columnGrandTotal.attendedTime=0;for(let r=0;r<(null==e?void 0:e.columns.length);r++){let c=0,p=0,u=0;for(let d=0;d<(null==e?void 0:e.rows.length);d++)c+=null===(o=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===o?void 0:o.allottedShiftTime,p+=null===(n=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===n?void 0:n.attendedTime,u+=null===(s=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===s?void 0:s.contractualShiftTime;e.columns[r].allottedShiftTime=c/60,e.columns[r].attendedTime=p/60,e.columns[r].contractualShiftTime=u/60,this.columnGrandTotal.contractualShiftTime+=e.columns[r].contractualShiftTime,this.columnGrandTotal.attendedTime+=e.columns[r].attendedTime}}getEmpRow(e){return this.employeesGroup.findIndex(o=>o.employeeNumber==this.result.rows[e].employeeNumber)}getEmpBackGround(e,o){return(this.getEmpRow(e)+o)%2==0?"bgColorEven":"bgColorOdd"}getCellBackGround(e,o){var n,s,r,c,p,u,d;if(this.activeColumn==o)return"bgColorActiveColumn";if(this.alternativeAttedanceMapping.r1==e&&this.alternativeAttedanceMapping.c==o)return"bgColorPrimaryAttnd";if(this.alternativeAttedanceMapping.r2==e&&this.alternativeAttedanceMapping.c==o)return"bgColorAltAttnd";{let _=this.getEmpRow(e);return(null===(n=this.result.rows[e].attendanceMatrix[o])||void 0===n?void 0:n.isPosted)&&this.highlightPostedAtt?"bgColorPosted":"A"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorAbsent":"OT"==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.rows[e].attendanceMatrix[o].refIdForAlt>0?"bgColorOT":(null===(s=this.result.rows[e].attendanceMatrix[o])||void 0===s?void 0:s.isTransfered)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorTransfer":(null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.isTerminated)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorTerminated":(null===(c=this.result.rows[e].attendanceMatrix[o])||void 0===c?void 0:c.isResigned)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorResign":(null===(p=this.result.rows[e].attendanceMatrix[o])||void 0===p?void 0:p.isOnLeave)&&0==this.result.rows[e].attendanceMatrix[o].altAttId?"bgColorLeave":"-"==(null===(u=this.result.rows[e].attendanceMatrix[o])||void 0===u?void 0:u.attnFlag)&&this.highlightPendingAtt&&!(null===(d=this.result.columns[o])||void 0===d?void 0:d.isHoliday)&&"O"!=this.result.rows[e].shiftCode?"bgColorAttendancePending":"S"==this.result.rows[e].attendanceMatrix[o].attnFlag||"O"==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.rows[e].attendanceMatrix[o].altAttId>0?"bgColorSwap":""==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.columns[o].isHoliday&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorNoShift":_%2==0?"bgColorEven":"bgColorOdd"}}openDatePicker(e){e.open()}closeModel(){this.dialogRef.close()}exportexcel(){let e=document.getElementById("excel_table");const o=mt.P6.table_to_sheet(e),n=mt.P6.book_new();mt.P6.book_append_sheet(n,o,"Sheet1"),mt.NC(n,this.reportType+"_"+this.projectCode+"_"+this.siteCode+".xlsx")}FindAlternativeAttedanceMapping(e,o){var n;this.alternativeAttedanceMapping={r1:-1,r2:-1,c:o};let s=null===(n=this.result.rows[e])||void 0===n?void 0:n.attendanceMatrix[o];if(s.attndId>0){if(s.altAttId>0){this.alternativeAttedanceMapping.r1=e;let r=this.result.rows.findIndex(c=>c.attendanceMatrix[o].attndId==s.altAttId);this.alternativeAttedanceMapping.r2=r}else if(s.refIdForAlt>0){let r=this.result.rows.findIndex(c=>c.attendanceMatrix[o].attndId==s.refIdForAlt);this.alternativeAttedanceMapping.r1=r,this.alternativeAttedanceMapping.r2=e}}else this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1}}getToolTip(e,o,n){var s,r,c=new Z.uU("en-US");let p=-1==o?"":c.transform(null===(s=this.result.columns[o])||void 0===s?void 0:s.attnDate,"dd/MM/yyyy"),u=this.isArabic?this.result.rows[e].employeeNameAr:this.result.rows[e].employeeName;return-1==o?`${n}  : \nEmployee Number : ${this.result.rows[e].employeeNumber}.\nEmployee Name : ${u}.\n`:`Employee Number : ${this.result.rows[e].employeeNumber}.\nEmployee Name : ${u}.\nShift : ${this.result.rows[e].shiftCode}.\nDate : ${p}.\nAttendance ID: ${null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.attndId}.\nAlternate AttID: ${this.result.rows[e].attendanceMatrix[o].altAttId}`}translateToolTip(e){return this.translate.instant(e)}openPrint(){const e=document.getElementById("excel_table"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode2/${this.projectCode}/${this.siteCode}`).subscribe(e=>{this.listOfShiftCodes2=e,this.listOfShiftCodes2.sort((n,s)=>"O"==n.shiftCode||n.inTime<s.inTime?-1:1);const o=this.listOfShiftCodes2.findIndex(n=>"O"==n.shiftCode)>=0;for(let n=0;n<this.listOfShiftCodes2.length;n++)this.listOfShiftCodes2[n].shiftNumberNameEN=o?this.shiftTypeNames[n].nameEn:this.shiftTypeNames[n+1].nameEn,this.listOfShiftCodes2[n].shiftNumberNameAR=o?this.shiftTypeNames[n].nameAr:this.shiftTypeNames[n+1].nameAr,this.listOfShiftCodes2[n].shiftNumber=o?n:n+1})}singClick(e,o){this.FindAlternativeAttedanceMapping(e,o),""!=this.result.rows[e].attendanceMatrix[o].attnFlag&&0==this.result.rows[e].attendanceMatrix[o].attndId&&this.manualAttendance(e,o)}onRightClick(e,o){return this.result.rows[e].attendanceMatrix[o].attndId>0&&0==this.result.rows[e].attendanceMatrix[o].refIdForAlt?this.updateManualAttendance(e,o):""==this.result.rows[e].attendanceMatrix[o].attnFlag&&this.openPvRequestWindow(e,o),!1}manualAttendance(e,o){var n;let s=this.getEmpRow(e),c=new Z.uU("en-US").transform(null===(n=this.result.columns[o])||void 0===n?void 0:n.attnDate,"yyyy-MM-dd");this.apiService.post("monthlyRoaster/getSingleRoasterForEmployee",{employeeNumber:this.employeesGroup[s].employeeNumber,projectCode:this.projectCode,siteCode:this.siteCode,date:this.result.columns[o].attnDate}).subscribe(u=>{this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.projectCode}/${this.siteCode}/${this.employeesGroup[s].employeeNumber}/${c}/${this.result.rows[e].shiftCode}`).subscribe(d=>{var _,h,A,C;let S={r:e,c:o,totRows:this.employeesGroup.length},U={id:d.id,projectCode:this.projectCode,siteCode:this.siteCode,attnDate:c,shiftCode:this.result.rows[e].shiftCode,employeeNumber:this.result.rows[e].employeeNumber,employeeID:null!==(_=null==d?void 0:d.employeeID)&&void 0!==_?_:0,isDefShiftOff:"O"==this.result.rows[e].shiftCode,isActive:!0,inTime:null===(h=this.listOfShiftCodes2.find(M=>M.shiftCode==this.result.rows[e].shiftCode))||void 0===h?void 0:h.inTime,outTime:null===(A=this.listOfShiftCodes2.find(M=>M.shiftCode==this.result.rows[e].shiftCode))||void 0===A?void 0:A.outTime,isDefaultEmployee:!(null===(C=this.listOfShiftCodes2.find(M=>M.shiftCode==this.result.rows[e].shiftCode))||void 0===C?void 0:C.isOff),isPrimarySite:!0,isPosted:null==d?void 0:d.isPosted,altEmployeeNumber:this.result.rows[e].employeeNumber,altShiftCode:this.result.rows[e].shiftCode,attendance:"P",refIdForAlt:0,leavesData:null==d?void 0:d.leavesData,transORresignData:null==d?void 0:d.transORresignData,isOnLeave:null==d?void 0:d.isOnLeave,isWithDrawn:null==d?void 0:d.isWithDrawn,isResigned:null==d?void 0:d.isResigned,isTransfered:null==d?void 0:d.isTransfered,isTerminated:null==d?void 0:d.isTerminated,daywiseConsolidateData:this.getDayWiseConsolidateData(e,o),roasterData:u,r:e,c:o,shiftCodesSelectionList:this.listOfShiftCodes2};this.openManualAttendanceDialogWindow(S,U,g.Oi.create,"Manual_Attendance","Save",ke)})})}openManualAttendanceDialogWindow(e,o,n,s,r,c){if(!this.isLoading){this.isLoading=!0;let p=this.oprService.openAutoWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.inputData=o,p.componentInstance.inputCellData=e,p.afterClosed().subscribe(u=>{this.isLoading=!1,(null==u?void 0:u.isUpdatedShift)?(o.altEmployeeNumber="",this.removeAndUpdateEmployeeRows(o)):1==(null==u?void 0:u.res)&&this.removeAndUpdateEmployeeRows(null==u?void 0:u.outputData)},u=>{this.isLoading=!1})}}removeAndUpdateEmployeeRows(e){this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1};let o=null==e?void 0:e.employeeNumber,n=null==e?void 0:e.altEmployeeNumber;""!=o&&(this.employeesGroup=this.employeesGroup.filter(s=>s.employeeNumber!=o),this.result.rows=this.result.rows.filter(s=>s.employeeNumber!=o),this.insertNewEmployee(o)),""!=n&&o!=n&&(this.employeesGroup=this.employeesGroup.filter(s=>s.employeeNumber!=n),this.result.rows=this.result.rows.filter(s=>s.employeeNumber!=n),this.insertNewEmployee(n))}insertNewEmployee(e){this.apiService.post("Reports/getAttendancePayrollReport",{projectCode:this.projectCode,siteCode:this.siteCode,payrollStartDate:this.fromDate,pageNumber:0,pageSize:1,employeeNumber:e}).subscribe(n=>{this.tempAltEmployeeNumber="",n.rows.length>0&&(this.result.rows=this.result.rows.concat(n.rows),this.generateReportAndCalculations())})}openUpdateAttendanceDialogWindow(e,o,n,s,r,c){if(!this.isLoading){this.isLoading=!0;let p=this.oprService.openAutoWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.inputData=o,p.componentInstance.inputCellData=e,p.afterClosed().subscribe(u=>{this.isLoading=!1,1==(null==u?void 0:u.res)&&((""!=this.tempAltEmployeeNumber&&""==u.outputData.altEmployeeNumber||""!=this.tempAltEmployeeNumber&&""==u.outputData.employeeNumber)&&(u.outputData.altEmployeeNumber=this.tempAltEmployeeNumber,this.tempAltEmployeeNumber=""),this.removeAndUpdateEmployeeRows(u.outputData))},u=>{this.isLoading=!1})}}minsToStrHrsMins(e){return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}hrsToStrHrsMins(e){let o=Math.floor(e);return`${o}:${Math.ceil(60*(e-o)).toString().padStart(2,"0")}`}updateManualAttendance(e,o){var n,s,r=new Z.uU("en-US");let c=this.getEmpRow(e),p=null===(n=this.result.columns[o])||void 0===n?void 0:n.attnDate,u=r.transform(null===(s=this.result.columns[o])||void 0===s?void 0:s.attnDate,"yyyy-MM-dd");if(new Date<=p)this.notifyService.showError(this.translate.instant("Can_not_Enter_Attendance_For_Future_Date"));else{let _={r:e,c:o,totRows:this.employeesGroup.length};this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.projectCode}/${this.siteCode}/${this.employeesGroup[c].employeeNumber}/${u}/${this.result.rows[e].shiftCode}`).subscribe(h=>{var A;this.tempAltEmployeeNumber=null!==(A=h.altEmployeeNumber)&&void 0!==A?A:"",h.daywiseConsolidateData=this.getDayWiseConsolidateData(e,o),this.openUpdateAttendanceDialogWindow(_,h,g.Oi.create,"Update_Manual_Attendance","Save",Me)})}}getDayWiseConsolidateData(e,o){var n,s,r,c,p,u,d,_,h,A,C;return{tch:null===(s=null===(n=this.result)||void 0===n?void 0:n.columns[o])||void 0===s?void 0:s.contractualShiftTime,tch_min:60*(null===(c=null===(r=this.result)||void 0===r?void 0:r.columns[o])||void 0===c?void 0:c.contractualShiftTime)%60,tcs:60*(null===(u=null===(p=this.result)||void 0===p?void 0:p.columns[o])||void 0===u?void 0:u.contractualShiftTime)/(null===(d=this.result)||void 0===d?void 0:d.siteWorkingTime),ot_count:0,mins:60*(null===(h=null===(_=this.result)||void 0===_?void 0:_.columns[o])||void 0===h?void 0:h.attendedTime)%60,hours:Math.floor(null===(C=null===(A=this.result)||void 0===A?void 0:A.columns[o])||void 0===C?void 0:C.attendedTime)}}isShiftFilterApplied(){return"shiftCode"==this.filterType&&""!=this.searchKey}applyFilter(){"employee"==this.filterType?(this.filter.employeeNumber=this.searchKey,this.filter.shiftCode=""):"shiftCode"==this.filterType&&(this.filter.shiftCode=this.searchKey,this.filter.employeeNumber="")}canShowRow(e){return""==this.searchKey||"shiftCode"==this.filterType&&(null==e?void 0:e.shiftCode)==this.searchKey||!("employee"!=this.filterType||!(null==e?void 0:e.employeeNumber.includes(this.searchKey))&&!(this.isArabic?null==e?void 0:e.employeeNameAr.includes(this.searchKey):null==e?void 0:e.employeeName.toLowerCase().includes(this.searchKey.toLowerCase())))}startTimer(){this.dataProcessedTime=new Date,this.interval=setInterval(()=>{let e=new Date,o=60*this.dataProcessedTime.getHours()*60+60*this.dataProcessedTime.getMinutes()+this.dataProcessedTime.getSeconds(),n=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds();this.time=n-o,this.time<this.waitingTime?this.isDataProcessed=!0:(this.isDataProcessed=!1,this.pauseTimer())},1e3)}pauseTimer(){clearInterval(this.interval)}reloadData(){this.getReports()}clearAttendance(){if(!this.isLoading){let e=this.oprService.openAutoWidthDialog(this.dialog,Pe);e.componentInstance.dbops=g.Oi.create,e.componentInstance.modalTitle="Clear_Attendance",e.componentInstance.modalBtnTitle="Save",e.componentInstance.projectCode=this.projectCode,e.componentInstance.siteCode=this.siteCode,e.componentInstance.maxDate=this.toDate,e.componentInstance.minDate=this.fromDate,e.afterClosed().subscribe(o=>{this.isLoading=!1,(1==o.res||o)&&this.getReports()})}}postAttendance(){if(!this.isLoading){let e=this.oprService.openAutoWidthDialog(this.dialog,Re);e.componentInstance.dbops=g.Oi.create,e.componentInstance.modalTitle="Post_Attendance",e.componentInstance.modalBtnTitle="Save",e.componentInstance.maxPostDate=this.toDate,e.componentInstance.minPostDate=this.fromDate,e.componentInstance.projectCode=this.projectCode,e.componentInstance.siteCode=this.siteCode,e.afterClosed().subscribe(o=>{this.isLoading=!1,1==o&&this.getReports()})}}autoAttendance(e){const o=this.oprService.openApprovalDialog(this.dialog,Fe);o.componentInstance.dbops=g.Oi.create,o.componentInstance.modalTitle="Auto_Attendance",o.componentInstance.confirmType="general",o.componentInstance.titleQuestion=this.translate.instant("Are_You_Sure?"),o.componentInstance.subTitleQuestion=this.translate.instant(-1==e?"Do_you_want_to_enter_default_attendance_for_whole_month?":"Do_you_want_to_enter_default_attendance_for_selected_day?"),o.afterClosed().subscribe(n=>{1==n&&(this.isLoading=!0,this.enterAutoAttendance(e))})}enterAutoAttendance(e){var o,n;let s=[],r=e,c=e;-1==e&&(r=0,c=this.result.columns.length-1);for(let p=r;p<=c;p++){let u=this.result.rows.findIndex(d=>d.attendanceMatrix[p].attndId>=0);if(!(this.result.columns[p].isHoliday&&r!=c||u))for(let d=0;d<this.result.rows.length;d++)!this.result.rows[d].attendanceMatrix[p].isResigned&&!this.result.rows[d].attendanceMatrix[p].isTransfered&&!this.result.rows[d].attendanceMatrix[p].isTerminated&&"-"==this.result.rows[d].attendanceMatrix[p].attnFlag&&"O"!=this.result.rows[d].shiftCode&&s.push({id:0,projectCode:this.projectCode,siteCode:this.siteCode,attnDate:this.result.columns[p].attnDate,shiftCode:this.result.rows[d].shiftCode,employeeNumber:this.result.rows[d].employeeNumber,isDefShiftOff:!1,isActive:!0,inTime:null===(o=this.listOfShiftCodes2.find(_=>_.shiftCode==this.result.rows[d].shiftCode))||void 0===o?void 0:o.inTime,outTime:null===(n=this.listOfShiftCodes2.find(_=>_.shiftCode==this.result.rows[d].shiftCode))||void 0===n?void 0:n.outTime,isDefaultEmployee:!0,isPrimarySite:!0,isPosted:!1,altEmployeeNumber:"",altShiftCode:"",attendance:"P",refIdForAlt:0,shiftNumber:1})}if(this.interval=setInterval(()=>{},1e3),0==s.length)return this.isLoading=!1,void this.notifyService.showWarning(this.translate.instant("No_Updations_Found"));this.apiService.post("EmployeesAttendance/enterAutoAttendance",s).subscribe(p=>{this.isLoading=!1,this.getReports()},p=>{var u;this.isLoading=!1,this.notifyService.showError(this.translate.instant(null===(u=null==p?void 0:p.error)||void 0===u?void 0:u.message))})}getAttendanceFlag(e,o){var n,s,r,c,p,u,d;let _=this.result.rows[e].attendanceMatrix[o].attnFlag;return(null===(n=this.result.rows[e].attendanceMatrix[o])||void 0===n?void 0:n.isTransfered)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?_="TR":(null===(s=this.result.rows[e].attendanceMatrix[o])||void 0===s?void 0:s.isResigned)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?_="R":(null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.isTerminated)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?_="X":"S"!=this.result.rows[e].attendanceMatrix[o].attnFlag||(null===(c=this.result.rows[e].attendanceMatrix[o])||void 0===c?void 0:c.isOnLeave)||"O"==this.result.rows[e].shiftCode?"O"==this.result.rows[e].shiftCode&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?_="O":(null===(p=this.result.columns[o])||void 0===p?void 0:p.isHoliday)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag&&(_="H"):_="A","TimeSheet"==this.reportType&&(null===(u=this.result.rows[e].attendanceMatrix[o])||void 0===u?void 0:u.attendedTime)>0&&(_=this.minsToStrHrsMins(null===(d=this.result.rows[e].attendanceMatrix[o])||void 0===d?void 0:d.attendedTime)),_}getDayBackground(e){var o;if(null===(o=this.result.columns[e])||void 0===o?void 0:o.isHoliday)return"bgColorDateHeaderHoliday"}getDayTooltip(e){return`${(null==e?void 0:e.isHoliday)?this.isArabic?e.holidayInf.calanderName_AR:e.holidayInf.calanderName_EN:""}`}getShiftBgColor(e){let o=this.listOfShiftCodes2.find(s=>s.shiftCode==e);return`bgColorShift_${null==o?0:o.shiftNumber}`}getShiftNumberName(e){let o=this.listOfShiftCodes2.find(n=>n.shiftCode==e);return null==o?"-":this.isArabic?o.shiftNumberNameAR:o.shiftNumberNameEN}getWeekDay(e){switch(new Date(e).getDay()){case 0:return"Su";case 1:return"M";case 2:return"T";case 3:return"W";case 4:return"Th";case 5:return"F";case 6:return"S";default:return""}}openPvRequestWindow(e,o){let n=this.datePipe.transform(this.result.columns[o].attnDate,"yyyy-MM-dd");this.apiService.post("PvAllRequests/getRecentApprovedPvRequestData",{projectCode:this.projectCode,siteCode:this.siteCode,employeeNumber:this.result.rows[e].employeeNumber,date:n}).subscribe(r=>0==(null==r?void 0:r.reqId)||null==r?(this.notifyService.showInfo("Employee Not Available"),!0):(1==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Add_Resource","View",Jt):2==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Remove_Resource","View",Rt):3==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Transfer_Employee","View",Pt):4==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Transfer_With_Replacement","View",Ft):5==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Swap_Employees","View",Kt):6==(null==r?void 0:r.requestType)&&this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Replace_Resource","View",Mt),!1))}openPvRequestDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{})}RefreshOffs(){var e,o,n,s,r;let p="01"==(null===(e=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===e?void 0:e.substr(8,2)),u={siteCode:this.siteCode,month:null===(o=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===o?void 0:o.substr(5,2),year:null===(n=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===n?void 0:n.substr(0,4)};if(this.apiService.post("OpUtils/RefreshOffs",u),!p){let d={siteCode:this.siteCode,month:null===(s=this.datePipe.transform(this.toDate,"yyyy-MM-dd"))||void 0===s?void 0:s.substr(5,2),year:null===(r=this.datePipe.transform(this.toDate,"yyyy-MM-dd"))||void 0===r?void 0:r.substr(0,4)};this.apiService.post("OpUtils/RefreshOffs",d)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(T.uw),t.Y36(W),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attendance-payroll-report"]],features:[t.qOj],decls:72,vars:75,consts:[["type","button",1,"btn","close",3,"click"],["id","header"],[1,"row"],[1,"col-md-9","col-lg-9"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0",2,"background","none"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-3","col-lg-3"],[1,"btn-list"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary",3,"click"],[1,"far","fa-calendar-alt"],["hidden","hidden",1,"btn-list",2,"background-color","royalblue","color","white"],["hidden","hidden",1,"form-control","datapickerinput",3,"ngModel","ngModelOptions","matDatepicker","placeholder","ngModelChange","click","dateChange"],["matSuffix","",3,"for","ngModel","dateChange","ngModelChange"],[3,"dateChange"],["picker",""],["style","text-align:center",4,"ngIf"],[2,"background-color","#f9fbfd",3,"isLoading"],["id","excel_table"],["id","ReportTable",1,"card"],[1,"table-responsive"],[1,"none-border",2,"width","100%"],[2,"background-color","white","text-align","center","border","none","padding","0px 0px 0px 0px"],["colspan","32",2,"background-color","white","text-align","center","border","none","padding","0px 0px 0px 0px"],[2,"font-size","large"],[2,"font-size","medium"],[2,"font-size","x-small"],[2,"font-size","small","font-style","italic"],["class","sambaAttendanceTable  table-bordered no-wrap",4,"ngIf"],["id","consolidateTables","class","row","style","padding:10px 10px 10px 10px; text-align:center",4,"ngIf"],[2,"text-align","center"],[1,"row",2,"text-align","center"],[1,"card","col-md-3","col-lg-3",2,"padding-right","5px"],[1,"card-body"],[1,"card-title"],[1,"radio"],["for","radio1"],["type","radio","name","reportType","value","Attendance",3,"ngModel","ngModelChange"],["type","radio","name","reportType",3,"value","ngModel","ngModelChange"],[1,"card","col-md-4","col-lg-4",2,"padding-right","5px"],["type","text","class","form-control btn","placeholder","Enter Key","style","width:48%;border:solid;border-color:lightgray;border-width:1px;text-align:start",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","form-control btn","style","width: 48%; border: solid; border-color: lightgray; border-width: 1px;",3,"ngModel","ngModelOptions","ngModelChange","change",4,"ngIf"],["type","radio","name","filterType",3,"value","ngModel","ngModelChange","click"],[1,"card","col-md-5","col-lg-5",2,"vertical-align","central"],[1,"card-body","btn-list",2,"text-align","center","padding","15px 15px 0px 0px"],[1,"btn","btn","waves-effect","waves-light","btn-outline-primary",2,"text-align","center","vertical-align","central",3,"matTooltip","click"],[1,"fas","fa-thumbs-up",2,"font-size","x-large"],[1,"fas","fa-fast-forward",2,"font-size","x-large"],[1,"fas","fa-eraser",2,"font-size","x-large"],[1,"fas","fa-history",2,"font-size","x-large"],[1,"fas","fa-arrow-alt-circle-down",2,"font-size","x-large"],[1,"col-md-12",2,"vertical-align","central"],[1,"btn-list",2,"align-content","center","vertical-align","central","padding","15px 20px 0px 0px"],["type","checkbox","name","highlightData",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter Key",1,"form-control","btn",2,"width","48%","border","solid","border-color","lightgray","border-width","1px","text-align","start",3,"ngModel","ngModelChange","change"],[1,"form-control","btn",2,"width","48%","border","solid","border-color","lightgray","border-width","1px",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"sambaAttendanceTable","table-bordered","no-wrap"],["colspan","4"],[4,"ngIf"],["rowspan","2",2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","text-align","center"],["rowspan","2","colspan","2",2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","text-align","center"],["style","font-size:0.775rem !important; font-family: 'Poppins', sans-serif;font-weight:600;padding: 2px;",3,"id","matTooltip",4,"ngFor","ngForOf"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","text-align","center"],[2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px",3,"id","matTooltip"],["style","color:white;font-size:x-small",4,"ngIf"],["class","clickaction clickicons","style","color:yellow;font-size:x-small",3,"matTooltip","click",4,"ngIf"],[2,"color","white","font-size","x-small"],[1,"clickaction","clickicons",2,"color","yellow","font-size","x-small",3,"matTooltip","click"],[1,"fas","fa-sync-alt",2,"font-size","small"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","lightgreen"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","red"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","#c0d5fa"],[2,"text-align","center","font-size","x-large"],[4,"ngFor","ngForOf"],["style","padding: 3px; text-align: center;",3,"id",4,"ngIf"],["style","padding: 3px; text-align: center",3,"id",4,"ngIf"],["style","padding: 3px; text-align: left",3,"id",4,"ngIf"],[2,"padding","3px","text-align","center",3,"id"],["style","text-align: center;",3,"id","matTooltip","click","contextmenu",4,"ngFor","ngForOf"],[2,"padding","3px","text-align","left",3,"id"],["class","fas fa-user","style","color:blue;background-color:yellow",4,"ngIf"],[2,"font-style","italic"],[1,"fas","fa-user",2,"color","blue","background-color","yellow"],["class","fas fa-user","style","color: blue; background-color: yellow",4,"ngIf"],[2,"text-align","center",3,"id","matTooltip","click","contextmenu"],["style","text-align: center",3,"id","matTooltip",4,"ngIf"],["style","padding: 3px; text-align: center",3,"id","matTooltip",4,"ngIf"],[2,"text-align","center",3,"id","matTooltip"],[2,"padding","3px","text-align","center",3,"id","matTooltip"],["colspan","4",2,"text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],[2,"background-color","#e8eef3","color","black"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600","padding","2px"],["style","background-color:yellow",4,"ngFor","ngForOf"],[2,"background-color","yellow"],[2,"background-color","white"],["style","background-color:cornsilk",4,"ngFor","ngForOf"],[2,"background-color","cornsilk"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: yellow",4,"ngFor","ngForOf"],["colspan","4",2,"background-color","sandybrown","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: sandybrown",4,"ngFor","ngForOf"],[2,"background-color","sandybrown"],["id","consolidateTables",1,"row",2,"padding","10px 10px 10px 10px","text-align","center"],["id","consolidateRoasterPlanTable",1,"card"],[1,"consolidateDataTable"],["colspan","2"],["colspan","3"],["id","consolidateTimeSheetTable",1,"card"],["id","consolidateShiftsPlanTable",1,"card"],["colspan","2",3,"id"],["colspan","3",3,"id"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1,"x"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"nav",5),t.TgZ(7,"ol",6),t.TgZ(8,"li",7),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"li",7),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"li",7),t._uU(15),t.qZA(),t.TgZ(16,"li",7),t._uU(17),t.qZA(),t.TgZ(18,"li",8),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"div",10),t.TgZ(23,"button",11),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(37);return o.openDatePicker(r)}),t._uU(24),t.ALo(25,"translate"),t.ALo(26,"translate"),t._UZ(27,"i",12),t.qZA(),t.TgZ(28,"div",13),t._uU(29),t.ALo(30,"translate"),t.ALo(31,"translate"),t.TgZ(32,"input",14),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(37);return o.openDatePicker(r)})("dateChange",function(){return o.getReport()}),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-datepicker-toggle",15),t.NdJ("dateChange",function(){return o.getReport()})("ngModelChange",function(r){return o.fromDate=r}),t.qZA(),t.TgZ(36,"mat-datepicker",16,17),t.NdJ("dateChange",function(){return o.getReport()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(38,fx,51,28,"ng-container",18),t._UZ(39,"auto-loader",19),t.TgZ(40,"div",20),t.TgZ(41,"div",21),t.TgZ(42,"div",22),t.TgZ(43,"table",23),t.TgZ(44,"tr",24),t.TgZ(45,"td",25),t.TgZ(46,"span",26),t._uU(47),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"tr",24),t.TgZ(49,"td",25),t.TgZ(50,"span",27),t._uU(51),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"tr",24),t.TgZ(53,"td",25),t.TgZ(54,"span",28),t._uU(55),t.ALo(56,"translate"),t.ALo(57,"translate"),t.ALo(58,"date"),t.ALo(59,"translate"),t.ALo(60,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"tr",24),t.TgZ(62,"td",25),t.TgZ(63,"span",29),t._uU(64),t.ALo(65,"translate"),t.ALo(66,"translate"),t.ALo(67,"date"),t.ALo(68,"translate"),t.ALo(69,"date"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(70,qq,27,21,"table",30),t.qZA(),t.qZA(),t.YNc(71,Sq,113,103,"div",31),t.qZA()}if(2&e){const n=t.MAs(37);t.xp6(9),t.hij(" ",t.lcZ(10,32,"Operations")," "),t.xp6(3),t.hij(" ",t.lcZ(13,34,"Projects")," "),t.xp6(3),t.hij(" ",o.siteCode," "),t.xp6(2),t.hij(" ",o.projectCode," "),t.xp6(2),t.hij(" ",t.lcZ(20,36,"Attendance")," "),t.xp6(5),t.AsE(" ",t.lcZ(25,38,"Select")," ",t.lcZ(26,40,"Payroll_Date")," "),t.xp6(5),t.AsE(" ",t.lcZ(30,42,"Select")," ",t.lcZ(31,44,"Payroll_Date")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(33,46,"Please_Enter")," ",t.lcZ(34,48,"Payroll_Start_Date"),""),t.Q6J("ngModel",o.fromDate)("ngModelOptions",t.DdM(74,lo))("matDatepicker",n),t.xp6(3),t.Q6J("for",n)("ngModel",o.fromDate),t.xp6(3),t.Q6J("ngIf",(null==o.result?null:o.result.isValidReq)&&0!=(null==o.result||null==o.result.rows?null:o.result.rows.length)&&!o.isLoading),t.xp6(1),t.Q6J("isLoading",o.isLoading),t.xp6(8),t.hij(" ",o.isArabic?null==o.projectData?null:o.projectData.projectNameArb:null==o.projectData?null:o.projectData.projectNameEng," "),t.xp6(4),t.hij(" ",o.isArabic?null==o.siteData?null:o.siteData.projectNameArb:null==o.siteData?null:o.siteData.projectNameEng," "),t.xp6(4),t.xDo(" ",t.lcZ(56,50,"Project_Duration")," \xa0:\xa0 ",t.lcZ(57,52,"From")," ",t.xi3(58,54,null==o.projectData?null:o.projectData.startDate,"dd/MM/yyyy"),"\xa0",t.lcZ(59,57,"To"),"\xa0",t.xi3(60,59,null==o.projectData?null:o.projectData.endDate,"dd/MM/yyyy")," "),t.xp6(9),t.xDo(" ",t.lcZ(65,62,"Attendance_Monthly_Report"),"\xa0 ",t.lcZ(66,64,"From")," ",t.xi3(67,66,o.fromDate,"dd/MM/yyyy"),"\xa0 ",t.lcZ(68,69,"To"),"\xa0 ",t.xi3(69,71,o.toDate,"dd/MM/yyyy")," "),t.xp6(6),t.Q6J("ngIf",0!=(null==o.result||null==o.result.columns?null:o.result.columns.length)),t.xp6(1),t.Q6J("ngIf",0!=(null==o.result?null:o.result.rows.length)&&!o.isLoading)}},directives:[l.Fj,j.hl,l.JJ,l.On,j.nW,ft.R9,j.Mq,Z.O5,At.z,l._,ut.gM,l.Wl,l.EJ,l.YN,l.Kr,Z.sg],pipes:[f.X$,Z.uU,Z.JJ],styles:["#attendTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    border-block-color: lightgray;\n    border-block: lightgray;\n    border-block-width: 1px;\n    border-inline-color: aqua\n  }\n\n\n  table.consolidateDataTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    color: black;\n    font-size: small;\n    padding: 5px 5px 5px 5px\n  }\n\n\n  table.sambaAttendanceTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    width: 100%\n  }\n\n\n    table.sambaAttendanceTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n      background-color: #fafafa;\n      border: solid;\n      border-color: lightgray;\n      border-width: 1px;\n      padding: 5px 15px 5px 15px\n    }\n\n    table.sambaAttendanceTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\n      background-color: #548087;\n      border: solid;\n      border-color: lightgray;\n      border-width: 1px;\n      color: white;\n      text-align: center;\n    }\n\n\n  #bgColorEven[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: white;\n  }\n\n  #bgColorOdd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: white;\n    \n  }\n\n  #bgColorAltAttnd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: maroon;\n    color: white;\n  }\n\n  #bgColorPrimaryAttnd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: blue;\n    color: white;\n  }\n\n  #bgColorAbsent[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white\n  }\n\n  #bgColorSwap[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellow;\n    color: red\n  }\n\n  #bgColorNoShift[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: #f3f3f3;\n    color: none\n  }\n\n  #bgColorLeave[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorTransfer[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorResign[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorTerminated[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorAttendancePending[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellowgreen; \n  }\n\n  #bgColorOT[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellow;\n    color: green;\n  }\n\n  #bgColorPosted[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: orange;\n    color: white;\n  }\n\n  #bgColorActiveColumn[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: aqua;\n    color: blue;\n  }\n\n  #bgColorDateHeaderHoliday[_ngcontent-%COMP%] {\n    background-color: lightgreen;\n    color: yellow;\n  }\n\n  #bgColorShift_0[_ngcontent-%COMP%] {\n    background-color: burlywood;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_1[_ngcontent-%COMP%] {\n    background-color: lightcoral;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_2[_ngcontent-%COMP%] {\n    background-color: mediumpurple;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_3[_ngcontent-%COMP%] {\n    background-color: cadetblue;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }"]}),i})();function Uq(i,a){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.Q6J("value",e.value),t.xp6(1),t.AsE(" ",o.isArabic?e.textTwo:e.text,"-",e.value," ")}}function Dq(i,a){if(1&i&&(t.TgZ(0,"span",37),t._UZ(1,"validation-message",27),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.customerCode)}}function Lq(i,a){1&i&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Nq(i,a){if(1&i&&(t.TgZ(0,"option",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Eq(i,a){if(1&i&&(t.TgZ(0,"span",37),t._UZ(1,"validation-message",27),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.projectCode)}}function Oq(i,a){1&i&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function kq(i,a){if(1&i&&(t.TgZ(0,"option",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function jq(i,a){if(1&i&&(t.TgZ(0,"span",37),t._UZ(1,"validation-message",27),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function Mq(i,a){1&i&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Rq(i,a){if(1&i&&(t.TgZ(0,"span",37),t._UZ(1,"validation-message",27),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.contactNumber)}}function Pq(i,a){1&i&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Fq(i,a){if(1&i&&(t.TgZ(0,"div",12),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"ng-select",39),t._UZ(6,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,3,"Visited_By")),t.xp6(2),t.Q6J("items",e.userSelectionList),t.xp6(1),t.Q6J("control",e.form.controls.visitedBy)}}function Iq(i,a){if(1&i&&(t.TgZ(0,"div",12),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",40),t.ALo(6,"translate"),t._UZ(7,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,3,"Visited_Time")),t.xp6(2),t.s9C("placeholder",t.lcZ(6,5,"Visited_Time")),t.xp6(2),t.Q6J("control",e.form.controls.visitedDateTime)}}function Yq(i,a){if(1&i&&(t.TgZ(0,"div",8),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"textarea",41),t.ALo(6,"translate"),t.ALo(7,"translate"),t._UZ(8,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"Supervisor_Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,6,"Please_Enter")," ",t.lcZ(7,8,"Supervisor_Remarks"),""),t.xp6(3),t.Q6J("control",e.form.controls.supervisorRemarks)}}function Jq(i,a){if(1&i&&(t.TgZ(0,"div",8),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"textarea",42),t.ALo(6,"translate"),t.ALo(7,"translate"),t._uU(8,"\n"),t.qZA(),t._UZ(9,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"Customer_Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,6,"Please_Enter")," ",t.lcZ(7,8,"Customer_Remarks"),""),t.xp6(4),t.Q6J("control",e.form.controls.customerRemarks)}}function Qq(i,a){if(1&i&&(t.TgZ(0,"div",8),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"textarea",43),t.ALo(6,"translate"),t.ALo(7,"translate"),t._uU(8,"                      "),t.qZA(),t._UZ(9,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"Action_Terms")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,6,"Please_Enter")," ",t.lcZ(7,8,"Action_Terms"),""),t.xp6(4),t.Q6J("control",e.form.controls.actionTerms)}}function Bq(i,a){if(1&i&&(t.TgZ(0,"div",8),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"textarea",44),t.ALo(6,"translate"),t.ALo(7,"translate"),t._UZ(8,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"Customer_Notes")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,6,"Please_Enter")," ",t.lcZ(7,8,"Customer_Notes"),""),t.xp6(3),t.Q6J("control",e.form.controls.customerNotes)}}function Hq(i,a){1&i&&(t._UZ(0,"input",45),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}function $q(i,a){1&i&&(t._UZ(0,"input",45),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Confirm"))}function Vq(i,a){1&i&&(t._UZ(0,"input",45),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Submit"))}function Gq(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"form",2,3),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().submit()}),t.TgZ(2,"h3"),t._uU(3),t.TgZ(4,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(5," \xd7"),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"div",8),t.TgZ(12,"div",10),t.TgZ(13,"div",11),t.TgZ(14,"div",12),t.TgZ(15,"label",13),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",14),t.TgZ(19,"div",15),t._UZ(20,"auto-loader",16),t._UZ(21,"input",17),t.ALo(22,"translate"),t.ALo(23,"translate"),t.TgZ(24,"mat-autocomplete",18,19),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().onSelectionCustomerCode(n,1)}),t.YNc(26,Uq,2,3,"mat-option",20),t.ALo(27,"async"),t.qZA(),t.qZA(),t.YNc(28,Dq,2,1,"span",21),t.YNc(29,Lq,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(30,"div",12),t.TgZ(31,"label",13),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"div",14),t.TgZ(35,"div",15),t.TgZ(36,"select",22),t.NdJ("change",function(){return t.CHM(e),t.oxw().onSelectionProjectCode()}),t.TgZ(37,"option",23),t._uU(38),t.ALo(39,"translate"),t.ALo(40,"translate"),t.qZA(),t.YNc(41,Nq,2,2,"option",24),t.qZA(),t.qZA(),t.YNc(42,Eq,2,1,"span",21),t.YNc(43,Oq,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(44,"div",12),t.TgZ(45,"label",13),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"div",14),t.TgZ(49,"div",15),t.TgZ(50,"select",25),t.NdJ("change",function(){return t.CHM(e),t.oxw().onSelectionSiteCode()}),t.TgZ(51,"option",23),t._uU(52),t.ALo(53,"translate"),t.ALo(54,"translate"),t.qZA(),t.YNc(55,kq,2,2,"option",24),t.qZA(),t.qZA(),t.YNc(56,jq,2,1,"span",21),t.YNc(57,Mq,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(58,"div",12),t.TgZ(59,"div",14),t.TgZ(60,"label"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"ng-select",26),t._UZ(64,"validation-message",27),t.qZA(),t.qZA(),t.TgZ(65,"div",12),t.TgZ(66,"div",14),t.TgZ(67,"label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t._UZ(70,"input",28),t.ALo(71,"translate"),t.ALo(72,"translate"),t.YNc(73,Rq,2,1,"span",21),t.YNc(74,Pq,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(75,"div",12),t.TgZ(76,"div",14),t.TgZ(77,"label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t._UZ(80,"input",29),t.ALo(81,"translate"),t._UZ(82,"validation-message",27),t.qZA(),t.qZA(),t.TgZ(83,"div",12),t.TgZ(84,"div",14),t.TgZ(85,"label"),t._uU(86),t.ALo(87,"translate"),t.qZA(),t._UZ(88,"ng-select",30),t._UZ(89,"validation-message",27),t.qZA(),t.qZA(),t.YNc(90,Fq,7,5,"div",31),t.YNc(91,Iq,8,7,"div",31),t.YNc(92,Yq,9,10,"div",32),t.YNc(93,Jq,10,10,"div",32),t.YNc(94,Qq,10,10,"div",32),t.YNc(95,Bq,9,10,"div",32),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"div",8),t.TgZ(97,"div",9),t.TgZ(98,"div",33),t.TgZ(99,"input",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t.ALo(100,"translate"),t.qZA(),t._uU(101," \xa0 "),t.YNc(102,Hq,2,3,"input",35),t.YNc(103,$q,2,3,"input",35),t.YNc(104,Vq,2,3,"input",35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(1),o=t.MAs(25),n=t.oxw();let s,r,c,p,u,d,_,h;t.Q6J("formGroup",n.form),t.xp6(3),t.hij(" ",n.modalTitle," "),t.xp6(13),t.Oqu(t.lcZ(17,47,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",n.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(22,49,"Please_Enter")," ",t.lcZ(23,51,"Customer_Code"),""),t.Q6J("formControl",n.custCodeControl)("matAutocomplete",o),t.xp6(5),t.Q6J("ngForOf",t.lcZ(27,53,n.filteredCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(s=n.form.get("customerCode"))&&s.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(r=n.form.get("customerCode"))?null:r.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(3),t.Oqu(t.lcZ(33,55,"Project")),t.xp6(6),t.AsE("",t.lcZ(39,57,"Select")," ",t.lcZ(40,59,"Project")," "),t.xp6(3),t.Q6J("ngForOf",n.projectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(c=n.form.get("projectCode"))&&c.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(p=n.form.get("projectCode"))?null:p.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(3),t.Oqu(t.lcZ(47,61,"Site")),t.xp6(6),t.AsE("",t.lcZ(53,63,"Select")," ",t.lcZ(54,65,"Site")," "),t.xp6(3),t.Q6J("ngForOf",n.siteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(u=n.form.get("siteCode"))&&u.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(d=n.form.get("siteCode"))?null:d.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(4),t.Oqu(t.lcZ(62,67,"Reason_Code")),t.xp6(2),t.Q6J("items",n.reasonCodeSelectionList),t.xp6(1),t.Q6J("control",n.form.controls.reasonCode),t.xp6(4),t.Oqu(t.lcZ(69,69,"Contact_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(71,71,"Please_Enter")," ",t.lcZ(72,73,"Contact_Number"),""),t.xp6(3),t.Q6J("ngIf",!(null!=(_=n.form.get("contactNumber"))&&_.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(h=n.form.get("contactNumber"))?null:h.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(4),t.Oqu(t.lcZ(79,75,"Schedule_Time")),t.xp6(2),t.s9C("placeholder",t.lcZ(81,77,"Schedule_Time")),t.xp6(2),t.Q6J("control",n.form.controls.scheduleDateTime),t.xp6(4),t.Oqu(t.lcZ(87,79,"Superivisor")),t.xp6(2),t.Q6J("items",n.userSelectionList),t.xp6(1),t.Q6J("control",n.form.controls.supervisorId),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(4),t.s9C("value",t.lcZ(100,81,"Cancel")),t.xp6(3),t.Q6J("ngIf","new"==n.action||"edit"==n.action),t.xp6(1),t.Q6J("ngIf","confirm"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action)}}function Wq(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div"),t.TgZ(2,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().print()}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5," \xa0 "),t.TgZ(6,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(7," Close"),t.qZA(),t.qZA(),t._UZ(8,"br"),t._UZ(9,"br"),t._UZ(10,"br"),t.TgZ(11,"div",48),t.TgZ(12,"div",49),t.ynx(13,50),t.TgZ(14,"table",51),t.TgZ(15,"tr"),t.TgZ(16,"td",52),t.TgZ(17,"h5",53),t.TgZ(18,"strong"),t._uU(19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"td",54),t._UZ(21,"img",55),t.qZA(),t.TgZ(22,"td",52),t.TgZ(23,"h5",56),t.TgZ(24,"strong"),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"table",57),t.TgZ(27,"tr",54),t.TgZ(28,"td",58),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"td",58),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"td",58),t._uU(35),t.ALo(36,"translate"),t.ALo(37,"date"),t.qZA(),t.TgZ(38,"td",58),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"table",57),t.TgZ(42,"tr",54),t.TgZ(43,"td",59),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"td",60),t._uU(47),t._UZ(48,"br"),t._uU(49),t.qZA(),t.TgZ(50,"td",59),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"td",61),t._uU(54),t._UZ(55,"br"),t._uU(56),t.qZA(),t.qZA(),t.TgZ(57,"tr",54),t.TgZ(58,"td",59),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"td",62),t._uU(62),t.qZA(),t.TgZ(63,"td",59),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"td",62),t._uU(67),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t.TgZ(69,"td",63),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"td",64),t._uU(73),t.ALo(74,"date"),t.qZA(),t.TgZ(75,"td",63),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"td",64),t._uU(79),t.qZA(),t.qZA(),t.qZA(),t.TgZ(80,"table",57),t.TgZ(81,"tr"),t.TgZ(82,"th",65),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.qZA(),t.TgZ(85,"tr"),t.TgZ(86,"td",66),t._uU(87),t.qZA(),t.qZA(),t.TgZ(88,"tr",67),t.TgZ(89,"th",65),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.TgZ(92,"tr"),t.TgZ(93,"td",68),t._uU(94),t.qZA(),t.qZA(),t.TgZ(95,"tr"),t.TgZ(96,"th",65),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.qZA(),t.TgZ(99,"tr"),t.TgZ(100,"td",68),t._uU(101),t.qZA(),t.qZA(),t.TgZ(102,"tr"),t.TgZ(103,"th",65),t._uU(104),t.ALo(105,"translate"),t.qZA(),t.qZA(),t.TgZ(106,"tr"),t.TgZ(107,"td",68),t._uU(108),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.ynx(109,69),t.TgZ(110,"table",57),t.TgZ(111,"tr",70),t.TgZ(112,"td",71),t._UZ(113,"br"),t.qZA(),t.qZA(),t.TgZ(114,"tr",72),t.TgZ(115,"td",73),t._UZ(116,"br"),t.qZA(),t.TgZ(117,"td",63),t._uU(118),t.ALo(119,"translate"),t.qZA(),t.TgZ(120,"td",73),t._UZ(121,"br"),t.qZA(),t.TgZ(122,"td",63),t._uU(123),t.ALo(124,"translate"),t.qZA(),t.TgZ(125,"td",73),t._UZ(126,"br"),t.qZA(),t.TgZ(127,"td",63),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.qZA(),t.TgZ(130,"tr",74),t.TgZ(131,"td",75),t._UZ(132,"br"),t._UZ(133,"br"),t._UZ(134,"br"),t.qZA(),t.TgZ(135,"td",75),t._uU(136),t.ALo(137,"translate"),t.qZA(),t.TgZ(138,"td",76),t._UZ(139,"br"),t.qZA(),t.TgZ(140,"td",75),t._uU(141),t.ALo(142,"translate"),t.qZA(),t.TgZ(143,"td",76),t._UZ(144,"br"),t.qZA(),t.TgZ(145,"td",75),t._uU(146),t.ALo(147,"translate"),t.qZA(),t.qZA(),t._UZ(148,"tr"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,40,"Print")),t.xp6(16),t.hij(" ",null==e.CompanyData?null:e.CompanyData.companyName," "),t.xp6(2),t.s9C("src",null==e.CompanyData?null:e.CompanyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",null==e.CompanyData?null:e.CompanyData.companyNameAr," "),t.xp6(4),t.AsE(" ",t.lcZ(30,42,"Ref.No"),":",e.resultData.id," "),t.xp6(3),t.AsE(" ",t.lcZ(33,44,"Reason_Code"),": ",e.isArabic?e.resultData.reasonCodeNameAr:null==e.resultData?null:e.resultData.reasonCodeNameEng," "),t.xp6(3),t.AsE(" ",t.lcZ(36,46,"Schedule_Date"),": ",t.xi3(37,48,null==e.resultData?null:e.resultData.scheduleDateTime,"dd/MM/YYYY")," "),t.xp6(4),t.AsE(" ",t.lcZ(40,51,"Supervisor"),": ",null==e.resultData?null:e.resultData.nameSupervisorId," "),t.xp6(5),t.Oqu(t.lcZ(45,53,"Customer_Name")),t.xp6(3),t.hij(" ",e.resultData.projectNameEng," "),t.xp6(2),t.hij(" ",e.resultData.projectNameAr," "),t.xp6(2),t.Oqu(t.lcZ(52,55,"Site_Name")),t.xp6(3),t.hij(" ",e.resultData.siteNameEng," "),t.xp6(2),t.hij(" ",e.resultData.siteNameAr," "),t.xp6(3),t.Oqu(t.lcZ(60,57,"Customer_Address")),t.xp6(3),t.Oqu(e.resultData.customerAddress),t.xp6(2),t.Oqu(t.lcZ(65,59,"Site_Address")),t.xp6(3),t.Oqu(e.resultData.siteAddress),t.xp6(3),t.Oqu(t.lcZ(71,61,"Visited_Date")),t.xp6(3),t.hij(" ",t.xi3(74,63,null==e.resultData?null:e.resultData.visitedDateTime,"dd/MM/YYYY")," "),t.xp6(3),t.Oqu(t.lcZ(77,66,"Visited_By")),t.xp6(3),t.hij(" ",null==e.resultData?null:e.resultData.nameVisitedBy," "),t.xp6(4),t.hij(" ",t.lcZ(84,68,"Supervisor_Remarks")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.supervisorRemarks," "),t.xp6(3),t.hij(" ",t.lcZ(91,70,"Customer_Remarks")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.customerRemarks," "),t.xp6(3),t.hij(" ",t.lcZ(98,72,"Customer_Notes")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.customerNotes," "),t.xp6(3),t.hij(" ",t.lcZ(105,74,"Action_Terms")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.actionTerms," "),t.xp6(10),t.Oqu(t.lcZ(119,76,"Operations_Supervisor")),t.xp6(5),t.Oqu(t.lcZ(124,78,"Operations_Manager")),t.xp6(5),t.Oqu(t.lcZ(129,80,"Regional_Manager")),t.xp6(8),t.Oqu(t.lcZ(137,82,"Signature")),t.xp6(5),t.Oqu(t.lcZ(142,84,"Signature")),t.xp6(5),t.Oqu(t.lcZ(147,86,"Signature"))}}let zq=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u){super(r),this.validationService=e,this.datepipe=o,this.translate=n,this.fb=s,this.authService=r,this.utilService=c,this.apiService=p,this.dialogRef=u,this.id=0,this.readonly="",this.siteCodeList=[],this.action="",this.empNumber="",this.isDataLoading=!1,this.custCodeControl=new l.NI("",l.kI.required),this.isArabic=!1,this.userSelectionList=[],this.reasonCodeSelectionList=[],this.isFromProjectsAction=!1,this.projectsList=[],this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(""),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(d=>(""!==d.trim()&&(this.isDataLoading=!0),this.filterCustCodes(d||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.LoadReasonCodeSelectionList(),this.LoadUserSelectionList(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}LoadReasonCodeSelectionList(){this.apiService.getall("ReasonCode/getSelectReasonCodeListForCustomerVisit").subscribe(e=>{null!=e&&(this.reasonCodeSelectionList=e,this.reasonCodeSelectionList.forEach(o=>{o.text=this.isArabic?o.textTwo+"-"+o.value:o.text+"-"+o.value}))})}LoadUserSelectionList(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{null!=e&&(this.userSelectionList=e)})}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],projectCode:["",l.kI.required],siteCode:["",l.kI.required],reasonCode:["",l.kI.required],contactNumber:["",l.kI.compose([l.kI.required,this.validationService.mobileValidator])],supervisorId:["",l.kI.required],scheduleDateTime:["",l.kI.required],isOpen:[!0],isClosed:[!1],isInprogress:[!1],id:[this.id]}),this.isFromProjectsAction&&(this.custCodeControl.setValue(this.projectData.customerCode),this.form.controls.siteCode.setValue(this.projectData.siteCode),this.form.controls.projectCode.setValue(this.projectData.projectCode),this.form.controls.customerCode.setValue(this.projectData.customerCode),this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.form.controls.projectCode.disable({onlySelf:!0}),this.form.controls.siteCode.disable({onlySelf:!0}),this.loadCustomerData(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode)),"visit"==this.action&&(this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.form.controls.projectCode.disable({onlySelf:!0}),this.form.controls.siteCode.disable({onlySelf:!0}),this.form.controls.reasonCode.disable({onlySelf:!0}),this.form.controls.contactNumber.disable({onlySelf:!0}),this.form.controls.supervisorId.disable({onlySelf:!0}),this.form.controls.scheduleDateTime.disable({onlySelf:!0}),this.form.addControl("supervisorRemarks",new l.NI("",l.kI.required)),this.form.addControl("customerRemarks",new l.NI("",l.kI.required)),this.form.addControl("actionTerms",new l.NI("",l.kI.required)),this.form.addControl("customerNotes",new l.NI("",l.kI.required)),this.form.addControl("visitedBy",new l.NI("",l.kI.required)),this.form.addControl("visitedDateTime",new l.NI("",l.kI.required)))}loadCustomerData(e){this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+e).subscribe(o=>{null!=o&&(this.CustomerData=o,this.form.controls.contactNumber.setValue(o.custMobile1),this.loadCompanyData(o))})}loadCompanyData(e){this.apiService.getall(`Company/getCompanyByCityCode/${e.custCityCode1}`).subscribe(o=>{null!=o&&(this.CompanyData=o)})}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){let r=this.custCodeControl.value;this.form.controls.customerCode.setValue(r),this.form.controls.contactNumber.setValue(s.custMobile1),this.loadProjectsList(r)}else this.form.controls.customerCode.setValue("");this.form.controls.projectCode.setValue(""),this.form.controls.siteCode.setValue(""),this.projectsList=[],this.siteCodeList=[]})}onSelectionProjectCode(){this.loadSiteCodes(this.form.controls.projectCode.value),""!=this.form.controls.projectCode.value&&(this.isDataLoading=!0,this.form.controls.siteCode.setValue("")),this.isDataLoading=!1}getProjectData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectData=e})}loadSiteCodes(e){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(o=>{this.siteCodeList=o,this.isDataLoading=!1})}loadProjectsList(e){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(o=>{this.projectsList=o,this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.apiService.get("CustomerVisitForm/getById",this.id).subscribe(e=>{null!=e&&(this.resultData=e,this.form.patchValue(e),this.custCodeControl.setValue(e.customerCode),this.form.controls.projectCode.setValue(e.projectCode),this.form.controls.customerCode.setValue(e.customerCode),this.form.controls.siteCode.setValue(e.siteCode),this.form.controls.contactNumber.setValue(e.contactNumber),this.form.controls.supervisorId.setValue(e.supervisorId.toString()),this.form.controls.visitedBy.setValue(null==e.visitedBy||0==e.visitedBy?"":e.visitedBy.toString()),this.getProjectData(),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){this.form.value.customerCode=this.custCodeControl.value,this.form.value.projectCode=this.form.controls.projectCode.value,this.form.value.siteCode=this.form.controls.siteCode.value,this.form.value.action=this.action,this.form.valid?this.apiService.post("CustomerVisitForm",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}onSelectionSiteCode(){""!=this.form.controls.siteCode.value&&this.getProjectData()}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}print(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(E.R),t.Y36(Z.uU),t.Y36(f.sK),t.Y36(l.qu),t.Y36(v._),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-customer-vist-form"]],features:[t.qOj],decls:2,vars:2,consts:[["novalidate","","class","mt-4",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","projectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["bindLabel","text","bindValue","value","formControlName","reasonCode",3,"items"],[3,"control"],["type","text","formControlName","contactNumber",1,"form-control",3,"placeholder"],["matInput","","type","datetime-local","formControlName","scheduleDateTime",1,"form-control","datapickerinput",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","supervisorId",3,"items"],["class","col-md-4 col-lg-4",4,"ngIf"],["class","col-md-12 col-lg-12",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"value"],["bindLabel","text","bindValue","value","formControlName","visitedBy",3,"items"],["matInput","","type","datetime-local","formControlName","visitedDateTime",1,"form-control","datapickerinput",3,"placeholder"],["type","text","formControlName","supervisorRemarks",1,"form-control",3,"placeholder"],["formControlName","customerRemarks",1,"form-control",3,"placeholder"],["type","text","formControlName","actionTerms",1,"form-control",3,"placeholder"],["formControlName","customerNotes",1,"form-control",3,"placeholder"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printableArea",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px","height","100%"],[2,"page-break-after","always","height","100vh"],["id","tableData"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","35%"],[2,"text-align","left"],[2,"text-align","center"],[1,"float-center",2,"width","200px","height","150px",3,"src"],[2,"text-align","right"],["border","1","cellpadding","5","cellspacing","0",2,"width","100%"],[2,"border","1px solid #878787","padding","5px","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","15%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","word-wrap","break-word"],["width","35%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["width","35%",2,"white-space","pre-wrap","border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["width","35%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400","white-space","pre-wrap"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["colspan","4",2,"border","none","padding","5px","text-align","left","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","4",2,"border","none","padding","5px","text-align","justify","white-space","pre-wrap","font-size","0.675rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","400"],[2,"border","1px"],["colspan","4",2,"border","none","padding","5px","text-align","justify","white-space","pre-wrap","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["id","footer"],[2,"background","#808080"],["colspan","6"],[2,"text-align","center","word-wrap","break-word"],["width","20%"],[2,"text-align","center","word-wrap","break-word","vertical-align","top"],["rowspan","2",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["rowspan","2"]],template:function(e,o){1&e&&(t.YNc(0,Gq,105,83,"form",0),t.YNc(1,Wq,149,88,"ng-container",1)),2&e&&(t.Q6J("ngIf","view"!=o.action),t.xp6(1),t.Q6J("ngIf","view"==o.action))},directives:[Z.O5,l._Y,l.JL,l.sg,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,l.EJ,l.u,l.YN,l.Kr,Et.w9,V.s,Ut.ey],pipes:[f.X$,Z.Ov,Z.uU],encapsulation:2}),i})();function Xq(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",54),t.TgZ(1,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA()}}function Kq(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Ref.No")," "))}function t4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.id)}}function e4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Schedule_Date")," "))}function o4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.scheduleDateTime,"dd/MM/YYYY"))}}function i4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function n4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function a4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function s4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function r4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function l4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function c4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function p4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCode)}}function u4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function d4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameEng)}}function _4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function m4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameAr)}}function g4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Supervisor")," "))}function h4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.nameSupervisorId)}}function Z4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Status")," "))}function f4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.status)}}function A4(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function C4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().createUpdate(n.id,"edit")}),t._UZ(1,"i",63),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function T4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().confirmVisit(n)}),t._UZ(1,"i",64),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Confirm"))}}function v4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().createUpdate(n.id,"visit")}),t._UZ(1,"i",65),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Fillup_Form"))}}function x4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",59),t.YNc(1,C4,3,1,"span",60),t.YNc(2,T4,3,1,"span",60),t.YNc(3,v4,3,1,"span",60),t.TgZ(4,"span",61),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().createUpdate(s.id,"view")}),t._UZ(5,"i",62),t._uU(6,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isOpen)&&e.canEdit),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isOpen)&&e.isCRM),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isInprogress)&&e.isCRM),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View"))}}function q4(i,a){1&i&&t._UZ(0,"tr",66)}function b4(i,a){1&i&&t._UZ(0,"tr",67)}const co=function(){return{standalone:!0}};let po=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C,S){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=_,this.pageService=h,this.oprService=A,this.translate=C,this.dialogRef=S,this.displayedColumns=["id","scheduleDateTime","customerCode","siteCode","projectCode","reasonCodeNameEng","reasonCodeNameAr","nameSupervisorId","status","Actions"],this.searchValue="",this.sortingOrder="id asc",this.isLoading=!1,this.isUpdating=!1,this.listType="",this.approvedStatus="",this.project={projectCode:"-NA-",siteCode:"-NA-"},this.isArabic=!1,this.reasonCodeSelectionList=[]}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.initialLoading()}initialLoading(){this.LoadReasonCodeSelectionList(),this.loadList(0,this.pageService.pageCount,"",this.sortingOrder,"","")}LoadReasonCodeSelectionList(){this.apiService.getall("ReasonCode/getSelectReasonCodeList").subscribe(e=>{null!=e&&(this.reasonCodeSelectionList=e,this.reasonCodeSelectionList.forEach(o=>{o.text=this.isArabic?o.textTwo+"-"+o.value:o.text+"-"+o.value}))})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder,this.approvedStatus,this.listType)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder,this.approvedStatus,this.listType)}loadList(e,o,n,s,r="",c){this.isLoading=!0,this.apiService.getPagination(`CustomerVisitForm/getCustomerVisitFormsPagedListByProjectSite/${this.project.projectCode}/${this.project.siteCode}`,this.utilService.getOprQueryString(e,o,n,s,this.approvedStatus,"",0,"",this.listType)).subscribe(p=>{this.isLoading=!1,this.totalItemsCount=0,this.data=new m.by(p.items),this.totalItemsCount=p.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount,this.isLoading=!1}),this.data.sort=this.sort},p=>{this.utilService.ShowApiErrorMessage(p),this.isLoading=!1})}applyFilter(e,o){(e||o)&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,"",this.listType))}translateToolTip(e){return`${this.translate.instant(e)}`}refresh(){this.searchValue="",this.sortingOrder="id desc",this.approvedStatus="",this.listType="",this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadApprovals(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}closeModel(){this.dialogRef.close(!0)}delete(e){let n=e.requestNumber;this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(r=>{r&&n>0&&this.apiService.delete("CustomerVisitFrom",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()})},r=>this.utilService.ShowApiErrorMessage(r))}createUpdate(e,o){let n=this.oprService.openAutoHeightWidthDialog(this.dialog,zq);n.componentInstance.dbops=g.Oi.create,n.componentInstance.modalTitle="Customer_Visit_Form",n.componentInstance.modalBtnTitle="createUpdate",n.componentInstance.id=e,n.componentInstance.action=o,"-NA-"!=this.project.projectCode&&(n.componentInstance.isFromProjectsAction=!0),n.componentInstance.projectData=this.project,n.afterClosed().subscribe(s=>{s&&!0===s&&this.initialLoading()})}confirmVisit(e){this.utilService.openDeleteConfirmDialog(this.dialog,xt).afterClosed().subscribe(n=>{n&&(e.action="confirm",e.modalTitle="modalTitle",e.modalBtnTitle="modalBtnTitle",this.apiService.post("CustomerVisitForm",e).subscribe(s=>{s&&(this.utilService.OkMessage(),this.initialLoading())},s=>{console.error(s),this.utilService.ShowApiErrorMessage(s)}))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-customer-visit-forms"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:105,vars:47,consts:[["class","modal-body",4,"ngIf"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-2"],[1,"mr-sm-2"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","change","ngModelChange"],["value",""],["value","open"],["value","closed"],["value","inProgress"],[1,"col-md-3"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[3,"click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-1"],[3,"isLoading"],[1,"col-md-2","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","scheduleDateTime"],["matColumnDef","customerCode"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","reasonCode"],["matColumnDef","reasonCodeNameEng"],["matColumnDef","reasonCodeNameAr"],["matColumnDef","nameSupervisorId"],["matColumnDef","status"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[1,"modal-body"],["type","button","aria-hidden","true",1,"close",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"fas","fa-check"],[1,"fas","fa-pencil-alt"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.YNc(0,Xq,3,0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h3",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"nav",6),t.TgZ(9,"ol",7),t.TgZ(10,"li",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"li",8),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"li",9),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"div",2),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",13),t.TgZ(24,"div",2),t.TgZ(25,"div",14),t.TgZ(26,"label",15),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"ng-select",16),t.NdJ("ngModelChange",function(s){return o.listType=s}),t.qZA(),t.qZA(),t.TgZ(30,"div",14),t.TgZ(31,"label",15),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"select",17),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.approvedStatus=s}),t.TgZ(35,"option",18),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"option",19),t._uU(39,"Open"),t.qZA(),t.TgZ(40,"option",20),t._uU(41,"Closed"),t.qZA(),t.TgZ(42,"option",21),t._uU(43,"Inprogress"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",22),t._UZ(45,"label",15),t.TgZ(46,"input",23),t.NdJ("ngModelChange",function(s){return o.searchValue=s}),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.TgZ(48,"div",14),t.TgZ(49,"button",24),t.NdJ("click",function(){return o.applyFilter(o.searchValue,o.listType)}),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._uU(52," \xa0 "),t.TgZ(53,"a",25),t.NdJ("click",function(){return o.refresh()}),t._UZ(54,"i",26),t.qZA(),t._uU(55," \xa0 "),t.qZA(),t.TgZ(56,"div",27),t._UZ(57,"spinner-loader",28),t.qZA(),t.TgZ(58,"div",29),t.TgZ(59,"a",30),t.NdJ("click",function(){return o.createUpdate(0,"new")}),t._UZ(60,"i",31),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(63,"div",32),t.TgZ(64,"div",33),t.TgZ(65,"div",34),t.ynx(66),t.TgZ(67,"table",35),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(68,36),t.YNc(69,Kq,3,3,"th",37),t.YNc(70,t4,2,1,"td",38),t.BQk(),t.ynx(71,39),t.YNc(72,e4,3,3,"th",37),t.YNc(73,o4,3,4,"td",38),t.BQk(),t.ynx(74,40),t.YNc(75,i4,3,3,"th",37),t.YNc(76,n4,2,1,"td",38),t.BQk(),t.ynx(77,41),t.YNc(78,a4,3,3,"th",37),t.YNc(79,s4,2,1,"td",38),t.BQk(),t.ynx(80,42),t.YNc(81,r4,3,3,"th",37),t.YNc(82,l4,2,1,"td",38),t.BQk(),t.ynx(83,43),t.YNc(84,c4,3,3,"th",37),t.YNc(85,p4,2,1,"td",38),t.BQk(),t.ynx(86,44),t.YNc(87,u4,3,3,"th",37),t.YNc(88,d4,2,1,"td",38),t.BQk(),t.ynx(89,45),t.YNc(90,_4,3,3,"th",37),t.YNc(91,m4,2,1,"td",38),t.BQk(),t.ynx(92,46),t.YNc(93,g4,3,3,"th",37),t.YNc(94,h4,2,1,"td",38),t.BQk(),t.ynx(95,47),t.YNc(96,Z4,3,3,"th",37),t.YNc(97,f4,2,1,"td",38),t.BQk(),t.ynx(98,48),t.YNc(99,A4,3,3,"th",49),t.YNc(100,x4,7,4,"td",50),t.BQk(),t.YNc(101,q4,1,0,"tr",51),t.YNc(102,b4,1,0,"tr",52),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(103),t.TgZ(104,"mat-paginator",53),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA()),2&e&&(t.Q6J("ngIf","-NA-"!=o.project.projectCode),t.xp6(5),t.hij(" ",t.lcZ(6,25,"Customer_Visit_Forms")," "),t.xp6(6),t.hij(" ",t.lcZ(12,27,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(15,29,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(18,31,"Customer_Visit_Forms")),t.xp6(10),t.Oqu(t.lcZ(28,33,"RequestType")),t.xp6(2),t.Q6J("items",o.reasonCodeSelectionList)("ngModel",o.listType)("ngModelOptions",t.DdM(45,co)),t.xp6(3),t.Oqu(t.lcZ(33,35,"Approval_Status")),t.xp6(2),t.Q6J("ngModel",o.approvedStatus)("ngModelOptions",t.DdM(46,co)),t.xp6(2),t.Oqu(t.lcZ(37,37,"Select")),t.xp6(10),t.MGl("placeholder","",t.lcZ(47,39,"Search"),"..."),t.Q6J("ngModel",o.searchValue),t.xp6(4),t.Oqu(t.lcZ(51,41,"Search")),t.xp6(7),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(62,43,"New_Request")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(34),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[Z.O5,Et.w9,l.JJ,l.On,l.EJ,l.YN,l.Kr,l.Fj,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,ut.gM,m.XQ,m.Gk],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function y4(i,a){if(1&i&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.Q6J("value",e.value),t.xp6(1),t.AsE(" ",o.isArabic?e.textTwo:e.text,"-",e.value," ")}}function S4(i,a){if(1&i&&(t.TgZ(0,"span",42),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.customerCode)}}function w4(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function U4(i,a){if(1&i&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function D4(i,a){if(1&i&&(t.TgZ(0,"span",42),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.projectCode)}}function L4(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function N4(i,a){if(1&i&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function E4(i,a){if(1&i&&(t.TgZ(0,"span",42),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function O4(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function k4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",44),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"input",45),t.NdJ("change",function(n){return t.CHM(e),t.oxw(2).onFileChanged(n,1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"Proof")))}function j4(i,a){if(1&i&&(t.TgZ(0,"div",12),t._UZ(1,"img",46),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.s9C("src",e.proofForComplaintUrl,t.LSH)}}function M4(i,a){if(1&i&&(t.TgZ(0,"div",26),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",47),t.ALo(6,"translate"),t._UZ(7,"validation-message",28),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,3,"Closing_Date")),t.xp6(2),t.s9C("placeholder",t.lcZ(6,5,"Closing_Date")),t.xp6(2),t.Q6J("control",e.form.controls.closingDate)}}function R4(i,a){if(1&i&&(t.TgZ(0,"div",48),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"textarea",49),t.ALo(6,"translate"),t.ALo(7,"translate"),t._UZ(8,"validation-message",28),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"Closing_Description")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,6,"Please_Enter")," ",t.lcZ(7,8,"Closing_Description"),""),t.xp6(3),t.Q6J("control",e.form.controls.actionDescription)}}function P4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",44),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"input",50),t.NdJ("change",function(n){return t.CHM(e),t.oxw(2).onFileChanged(n,2)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"Proof")))}function F4(i,a){1&i&&(t._UZ(0,"input",51),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}function I4(i,a){1&i&&(t._UZ(0,"input",51),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Confirm"))}function Y4(i,a){1&i&&(t._UZ(0,"input",51),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Close_Complaint"))}function J4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"form",2,3),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().submit()}),t.TgZ(2,"h3"),t._uU(3),t.TgZ(4,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(5," \xd7"),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"div",8),t.TgZ(12,"div",10),t.TgZ(13,"div",11),t.TgZ(14,"div",12),t.TgZ(15,"label",13),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",14),t.TgZ(19,"div",15),t._UZ(20,"auto-loader",16),t._UZ(21,"input",17),t.ALo(22,"translate"),t.ALo(23,"translate"),t.TgZ(24,"mat-autocomplete",18,19),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().onSelectionCustomerCode(n,1)}),t.YNc(26,y4,2,3,"mat-option",20),t.ALo(27,"async"),t.qZA(),t.qZA(),t.YNc(28,S4,2,1,"span",21),t.YNc(29,w4,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(30,"div",12),t.TgZ(31,"label",13),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"div",14),t.TgZ(35,"div",15),t.TgZ(36,"select",22),t.NdJ("change",function(){return t.CHM(e),t.oxw().onSelectionProjectCode()}),t.TgZ(37,"option",23),t._uU(38),t.ALo(39,"translate"),t.ALo(40,"translate"),t.qZA(),t.YNc(41,U4,2,2,"option",24),t.qZA(),t.qZA(),t.YNc(42,D4,2,1,"span",21),t.YNc(43,L4,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(44,"div",12),t.TgZ(45,"label",13),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"div",14),t.TgZ(49,"div",15),t.TgZ(50,"select",25),t.NdJ("change",function(){return t.CHM(e),t.oxw().onSelectionSiteCode()}),t.TgZ(51,"option",23),t._uU(52),t.ALo(53,"translate"),t.ALo(54,"translate"),t.qZA(),t.YNc(55,N4,2,2,"option",24),t.qZA(),t.qZA(),t.YNc(56,E4,2,1,"span",21),t.YNc(57,O4,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(58,"div",26),t.TgZ(59,"div",14),t.TgZ(60,"label"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"ng-select",27),t._UZ(64,"validation-message",28),t.qZA(),t.qZA(),t.TgZ(65,"div",26),t.TgZ(66,"div",14),t.TgZ(67,"label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t._UZ(70,"input",29),t.ALo(71,"translate"),t.ALo(72,"translate"),t._UZ(73,"validation-message",28),t.qZA(),t.qZA(),t.TgZ(74,"div",26),t.TgZ(75,"div",14),t.TgZ(76,"label"),t._uU(77),t.ALo(78,"translate"),t.qZA(),t._UZ(79,"input",30),t.ALo(80,"translate"),t._UZ(81,"validation-message",28),t.qZA(),t.qZA(),t.TgZ(82,"div",26),t.TgZ(83,"div",14),t.TgZ(84,"label"),t._uU(85),t.ALo(86,"translate"),t.qZA(),t._UZ(87,"ng-select",31),t._UZ(88,"validation-message",28),t.qZA(),t.qZA(),t.TgZ(89,"div",32),t.TgZ(90,"div",14),t.TgZ(91,"label"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t._UZ(94,"textarea",33),t.ALo(95,"translate"),t.ALo(96,"translate"),t._UZ(97,"validation-message",28),t.qZA(),t.qZA(),t.YNc(98,k4,7,3,"div",34),t.YNc(99,j4,2,1,"div",35),t.YNc(100,M4,8,7,"div",36),t.YNc(101,R4,9,10,"div",37),t.YNc(102,P4,7,3,"div",34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(103,"div",8),t.TgZ(104,"div",9),t.TgZ(105,"div",38),t.TgZ(106,"input",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t.ALo(107,"translate"),t.qZA(),t._uU(108," \xa0 "),t.YNc(109,F4,2,3,"input",40),t.YNc(110,I4,2,3,"input",40),t.YNc(111,Y4,2,3,"input",40),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(1),o=t.MAs(25),n=t.oxw();let s,r,c,p,u,d;t.Q6J("formGroup",n.form),t.xp6(3),t.hij(" ",n.modalTitle," "),t.xp6(13),t.Oqu(t.lcZ(17,49,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",n.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(22,51,"Please_Enter")," ",t.lcZ(23,53,"Customer_Code"),""),t.Q6J("formControl",n.custCodeControl)("matAutocomplete",o),t.xp6(5),t.Q6J("ngForOf",t.lcZ(27,55,n.filteredCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(s=n.form.get("customerCode"))&&s.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(r=n.form.get("customerCode"))?null:r.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(3),t.Oqu(t.lcZ(33,57,"Project")),t.xp6(6),t.AsE("",t.lcZ(39,59,"Select")," ",t.lcZ(40,61,"Project")," "),t.xp6(3),t.Q6J("ngForOf",n.projectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(c=n.form.get("projectCode"))&&c.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(p=n.form.get("projectCode"))?null:p.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(3),t.Oqu(t.lcZ(47,63,"Site")),t.xp6(6),t.AsE("",t.lcZ(53,65,"Select")," ",t.lcZ(54,67,"Site")," "),t.xp6(3),t.Q6J("ngForOf",n.siteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(u=n.form.get("siteCode"))&&u.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(d=n.form.get("siteCode"))?null:d.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(4),t.Oqu(t.lcZ(62,69,"Reason_Code")),t.xp6(2),t.Q6J("items",n.reasonCodeSelectionList),t.xp6(1),t.Q6J("control",n.form.controls.reasonCode),t.xp6(4),t.Oqu(t.lcZ(69,71,"Complaint_By")),t.xp6(2),t.hYB("placeholder","",t.lcZ(71,73,"Please_Enter")," ",t.lcZ(72,75,"Complaint_By"),""),t.xp6(3),t.Q6J("control",n.form.controls.complaintBy),t.xp6(4),t.Oqu(t.lcZ(78,77,"Complaint_Date")),t.xp6(2),t.s9C("placeholder",t.lcZ(80,79,"Complaint_Date")),t.xp6(2),t.Q6J("control",n.form.controls.complaintDate),t.xp6(4),t.Oqu(t.lcZ(86,81,"Booked_By")),t.xp6(2),t.Q6J("items",n.userSelectionList),t.xp6(1),t.Q6J("control",n.form.controls.bookedBy),t.xp6(4),t.Oqu(t.lcZ(93,83,"Complaint_Description")),t.xp6(2),t.hYB("placeholder","",t.lcZ(95,85,"Please_Enter")," ",t.lcZ(96,87,"Complaint_Description"),""),t.xp6(3),t.Q6J("control",n.form.controls.complaintDescription),t.xp6(1),t.Q6J("ngIf","new"==n.action||"edit"==n.action),t.xp6(1),t.Q6J("ngIf",n.proofForComplaintUrl&&("new"==n.action||"edit"==n.action||0==n.id)),t.xp6(1),t.Q6J("ngIf","closing"==n.action),t.xp6(1),t.Q6J("ngIf","closing"==n.action),t.xp6(1),t.Q6J("ngIf","closing"==n.action),t.xp6(4),t.s9C("value",t.lcZ(107,89,"Cancel")),t.xp6(3),t.Q6J("ngIf","new"==n.action||"edit"==n.action),t.xp6(1),t.Q6J("ngIf","startAction"==n.action),t.xp6(1),t.Q6J("ngIf","closing"==n.action)}}function Q4(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div"),t.TgZ(2,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().print()}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5," \xa0 "),t.TgZ(6,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(7," Close"),t.qZA(),t.qZA(),t._UZ(8,"br"),t._UZ(9,"br"),t._UZ(10,"br"),t.TgZ(11,"div",54),t.TgZ(12,"div",55),t.ynx(13,56),t.TgZ(14,"table",57),t.TgZ(15,"tr"),t.TgZ(16,"td",58),t.TgZ(17,"h5",59),t.TgZ(18,"strong"),t._uU(19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"td",60),t._UZ(21,"img",61),t.qZA(),t.TgZ(22,"td",58),t.TgZ(23,"h5",62),t.TgZ(24,"strong"),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"table",63),t.TgZ(27,"tr",60),t.TgZ(28,"td",64),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"td",64),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"td",65),t._uU(35),t.ALo(36,"translate"),t.ALo(37,"date"),t.qZA(),t.TgZ(38,"td",64),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.TgZ(41,"tr",60),t.TgZ(42,"td",65),t._uU(43),t.ALo(44,"translate"),t.ALo(45,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"table",63),t.TgZ(47,"tr",60),t.TgZ(48,"td",66),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"td",67),t._uU(52),t._UZ(53,"br"),t._uU(54),t.qZA(),t.TgZ(55,"td",66),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"td",68),t._uU(59),t._UZ(60,"br"),t._uU(61),t.qZA(),t.qZA(),t.TgZ(62,"tr",60),t.TgZ(63,"td",66),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"td",69),t._uU(67),t.qZA(),t.TgZ(68,"td",66),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"td",69),t._uU(72),t.qZA(),t.qZA(),t.TgZ(73,"tr",60),t.TgZ(74,"td",70),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"td",71),t._uU(78),t.qZA(),t.TgZ(79,"td",70),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"td",71),t._uU(83),t.qZA(),t.qZA(),t.TgZ(84,"tr"),t.TgZ(85,"td",70),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"td",71),t._uU(89),t.qZA(),t.TgZ(90,"td",70),t._uU(91),t.ALo(92,"translate"),t.qZA(),t.TgZ(93,"td",71),t._uU(94),t.qZA(),t.qZA(),t.qZA(),t.TgZ(95,"table",63),t.TgZ(96,"tr"),t.TgZ(97,"th",72),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.qZA(),t.TgZ(100,"tr"),t.TgZ(101,"td",73),t._uU(102),t.qZA(),t.qZA(),t.TgZ(103,"tr"),t.TgZ(104,"th",72),t._uU(105),t.ALo(106,"translate"),t.qZA(),t.qZA(),t.TgZ(107,"tr"),t.TgZ(108,"td",73),t._uU(109),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.ynx(110,74),t.TgZ(111,"table",63),t.TgZ(112,"tr",75),t.TgZ(113,"td",76),t._UZ(114,"br"),t.qZA(),t.qZA(),t.TgZ(115,"tr",77),t.TgZ(116,"td",78),t._UZ(117,"br"),t.qZA(),t.TgZ(118,"td",70),t._uU(119),t.ALo(120,"translate"),t.qZA(),t.TgZ(121,"td",78),t._UZ(122,"br"),t.qZA(),t.TgZ(123,"td",70),t._uU(124),t.ALo(125,"translate"),t.qZA(),t.TgZ(126,"td",78),t._UZ(127,"br"),t.qZA(),t.TgZ(128,"td",70),t._uU(129),t.ALo(130,"translate"),t.qZA(),t.qZA(),t.TgZ(131,"tr",79),t.TgZ(132,"td",80),t._UZ(133,"br"),t._UZ(134,"br"),t._UZ(135,"br"),t.qZA(),t.TgZ(136,"td",80),t._uU(137),t.ALo(138,"translate"),t.qZA(),t.TgZ(139,"td",81),t._UZ(140,"br"),t.qZA(),t.TgZ(141,"td",80),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"td",81),t._UZ(145,"br"),t.qZA(),t.TgZ(146,"td",80),t._uU(147),t.ALo(148,"translate"),t.qZA(),t.qZA(),t._UZ(149,"tr"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,42,"Print")),t.xp6(16),t.hij(" ",null==e.CompanyData?null:e.CompanyData.companyName," "),t.xp6(2),t.s9C("src",null==e.CompanyData?null:e.CompanyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",null==e.CompanyData?null:e.CompanyData.companyNameAr," "),t.xp6(4),t.AsE(" ",t.lcZ(30,44,"Ref.No"),":",e.resultData.id," "),t.xp6(3),t.AsE(" ",t.lcZ(33,46,"Reason_Code"),": ",e.isArabic?e.resultData.reasonCodeNameAr:null==e.resultData?null:e.resultData.reasonCodeNameEng," "),t.xp6(3),t.AsE(" ",t.lcZ(36,48,"Complaint_Date"),": ",t.xi3(37,50,null==e.resultData?null:e.resultData.complaintDate,"dd/MM/YYYY")," "),t.xp6(4),t.AsE(" ",t.lcZ(40,53,"Complaint_By"),": ",null==e.resultData?null:e.resultData.complaintBy," "),t.xp6(4),t.AsE(" ",t.lcZ(44,55,"Complaint_Closed_Date"),": ",t.xi3(45,57,null==e.resultData?null:e.resultData.closingDate,"dd/MM/YYYY")," "),t.xp6(6),t.Oqu(t.lcZ(50,60,"Customer_Name")),t.xp6(3),t.hij(" ",e.resultData.projectNameEng," "),t.xp6(2),t.hij(" ",e.resultData.projectNameAr," "),t.xp6(2),t.Oqu(t.lcZ(57,62,"Site_Name")),t.xp6(3),t.hij(" ",e.resultData.siteNameEng," "),t.xp6(2),t.hij(" ",e.resultData.siteNameAr," "),t.xp6(3),t.Oqu(t.lcZ(65,64,"Customer_Address")),t.xp6(3),t.Oqu(e.resultData.customerAddress),t.xp6(2),t.Oqu(t.lcZ(70,66,"Site_Address")),t.xp6(3),t.Oqu(e.resultData.siteAddress),t.xp6(3),t.Oqu(t.lcZ(76,68,"Complaint_Booked_By")),t.xp6(3),t.Oqu(null==e.resultData?null:e.resultData.nameBookedBy),t.xp6(2),t.Oqu(t.lcZ(81,70,"Evidence_Attached?")),t.xp6(3),t.Oqu(null==(null==e.resultData?null:e.resultData.proofForComplaint)?"no":"yes"),t.xp6(3),t.Oqu(t.lcZ(87,72,"Complaint_Closed_By")),t.xp6(3),t.Oqu(null==e.resultData?null:e.resultData.nameClosedBy),t.xp6(2),t.Oqu(t.lcZ(92,74,"Closing_Complaint_Document_Attached?")),t.xp6(3),t.Oqu(null!=e.resultData&&e.resultData.isClosed?null==(null==e.resultData?null:e.resultData.proofForAction)?"no":"yes":""),t.xp6(4),t.hij(" ",t.lcZ(99,76,"Complaint_Opening_Remarks")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.complaintDescription," "),t.xp6(3),t.hij(" ",t.lcZ(106,78,"Closing_Remarks")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.actionDescription," "),t.xp6(10),t.Oqu(t.lcZ(120,80,"Operations_Supervisor")),t.xp6(5),t.Oqu(t.lcZ(125,82,"Operations_Manager")),t.xp6(5),t.Oqu(t.lcZ(130,84,"Regional_Manager")),t.xp6(8),t.Oqu(t.lcZ(138,86,"Signature")),t.xp6(5),t.Oqu(t.lcZ(143,88,"Signature")),t.xp6(5),t.Oqu(t.lcZ(148,90,"Signature"))}}let B4=(()=>{class i extends y{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.id=0,this.readonly="",this.siteCodeList=[],this.action="",this.isDataLoading=!1,this.custCodeControl=new l.NI("",l.kI.required),this.isArabic=!1,this.userSelectionList=[],this.reasonCodeSelectionList=[],this.isFromProjectsAction=!1,this.projectsList=[],this.proofForComplaintUrl=null,this.proofForActionUrl=null,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(""),(0,it.b)(r.autoDelay()),(0,nt.x)(),(0,at.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterCustCodes(u||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.LoadReasonCodeSelectionList(),this.LoadUserSelectionList(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}LoadReasonCodeSelectionList(){this.apiService.getall("ReasonCode/getSelectReasonCodeListForCustomerComplaint").subscribe(e=>{null!=e&&(this.reasonCodeSelectionList=e,this.reasonCodeSelectionList.forEach(o=>{o.text=this.isArabic?o.textTwo+"-"+o.value:o.text+"-"+o.value}))})}LoadUserSelectionList(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{null!=e&&(this.userSelectionList=e)})}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],projectCode:["",l.kI.required],siteCode:["",l.kI.required],reasonCode:["",l.kI.required],complaintBy:["",l.kI.required],complaintDescription:["",l.kI.required],proofForComplaintFileName:[""],proofForComplaintIForm:[""],isActionRequired:[!1],complaintDate:["",l.kI.required],bookedBy:["",l.kI.required],proofForAction:[""],proofForComplaint:[""],branchCode:[""],isOpen:[!0],isClosed:[!1],isInprogress:[!1],id:[this.id]}),this.isFromProjectsAction&&(this.custCodeControl.setValue(this.projectData.customerCode),this.form.controls.siteCode.setValue(this.projectData.siteCode),this.form.controls.projectCode.setValue(this.projectData.projectCode),this.form.controls.customerCode.setValue(this.projectData.customerCode),this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.form.controls.projectCode.disable({onlySelf:!0}),this.form.controls.siteCode.disable({onlySelf:!0}),this.loadCustomerData(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode)),"closing"==this.action&&(this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.form.controls.projectCode.disable({onlySelf:!0}),this.form.controls.siteCode.disable({onlySelf:!0}),this.form.controls.reasonCode.disable({onlySelf:!0}),this.form.controls.complaintBy.disable({onlySelf:!0}),this.form.controls.complaintDescription.disable({onlySelf:!0}),this.form.controls.isActionRequired.disable({onlySelf:!0}),this.form.controls.complaintDate.disable({onlySelf:!0}),this.form.controls.bookedBy.disable({onlySelf:!0}),this.form.controls.proofForComplaintIForm.disable({onlySelf:!0}),this.form.addControl("closingDate",new l.NI("",l.kI.required)),this.form.addControl("actionDescription",new l.NI("",l.kI.required)),this.form.addControl("proofForActionIForm",new l.NI("")),this.form.addControl("proofForActionFileName",new l.NI("")))}loadCustomerData(e){this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+e).subscribe(o=>{null!=o&&(this.CustomerData=o,this.loadCompanyData(o))})}loadCompanyData(e){this.apiService.getall(`Company/getCompanyByCityCode/${e.custCityCode1}`).subscribe(o=>{null!=o&&(this.CompanyData=o)})}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){let r=this.custCodeControl.value;this.form.controls.customerCode.setValue(r),this.loadProjectsList(r)}else this.form.controls.customerCode.setValue("");this.form.controls.projectCode.setValue(""),this.form.controls.siteCode.setValue(""),this.projectsList=[],this.siteCodeList=[]})}onSelectionProjectCode(){this.loadSiteCodes(this.form.controls.projectCode.value),""!=this.form.controls.projectCode.value&&(this.isDataLoading=!0,this.form.controls.siteCode.setValue("")),this.isDataLoading=!1}getProjectData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectData=e})}loadSiteCodes(e){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(o=>{this.siteCodeList=o,this.isDataLoading=!1})}loadProjectsList(e){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(o=>{this.projectsList=o,this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.isFromProjectsAction&&(this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.form.controls.projectCode.disable({onlySelf:!0}),this.form.controls.siteCode.disable({onlySelf:!0}),this.custCodeControl.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode)),this.apiService.get("CustomerComplaints/getById",this.id).subscribe(e=>{null!=e&&(this.resultData=e,this.form.patchValue(e),this.proofForComplaintUrl=e.proofForComplaint,this.proofForActionUrl=e.proofForAction,this.loadCustomerData(e.customerCode),this.form.controls.projectCode.setValue(e.projectCode),this.form.controls.customerCode.setValue(e.customerCode),this.form.controls.siteCode.setValue(e.siteCode),this.form.controls.reasonCode.setValue(e.reasonCode),this.form.controls.bookedBy.setValue(e.bookedBy.toString()),this.proofForComplaintUrl=null==e?void 0:e.proofForComplaint,this.proofForActionUrl=null==e?void 0:e.proofForAction,this.getProjectData(),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){let e=new Date(this.form.controls.complaintDate.value);if(e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.complaintDate=e,this.form.valid){this.id>0&&(this.form.value.id=this.id);const o=new FormData;o.append("id",this.id.toString()),o.append("proofForComplaintFileName",this.authService.ApiEndPoint().replace("api","")+"ProofsForComplaints/"),o.append("proofForActionFileName",this.authService.ApiEndPoint().replace("api","")+"ProofsForActions/"),o.append("proofForComplaintIForm",this.form.controls.proofForComplaintIForm.value),o.append("isActionRequired",this.form.controls.isActionRequired.value),o.append("customerCode",this.form.controls.customerCode.value),o.append("projectCode",this.form.controls.projectCode.value),o.append("siteCode",this.form.controls.siteCode.value),o.append("reasonCode",this.form.controls.reasonCode.value),o.append("branchCode",this.form.controls.branchCode.value),o.append("complaintBy",this.form.controls.complaintBy.value),o.append("bookedBy",this.form.controls.bookedBy.value),o.append("action",this.action),o.append("complaintDate",this.form.controls.complaintDate.value),o.append("complaintDescription",this.form.controls.complaintDescription.value),"closing"==this.action&&(o.append("proofForActionIForm",this.form.controls.proofForActionIForm.value),o.append("actionDescription",this.form.controls.actionDescription.value),o.append("closingDate",this.form.controls.closingDate.value)),this.apiService.post("CustomerComplaints",o).subscribe(n=>{n&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}else this.utilService.FillUpFields()}onSelectionSiteCode(){""!=this.form.controls.siteCode.value&&this.getProjectData()}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}print(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}onFileChanged(e,o){let n=new FileReader;if(e.target.files&&e.target.files.length>0){let s=e.target.files[0];n.readAsDataURL(s),n.onload=()=>{1===o?(this.proofForComplaintUrl=n.result,this.form.patchValue({proofForComplaintIForm:s,proofForComplaintFileName:n.result})):2===o&&(this.proofForActionUrl=n.result,this.form.patchValue({proofForActionIForm:s,proofForActionFileName:n.result}))}}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(f.sK),t.Y36(l.qu),t.Y36(v._),t.Y36(b.t),t.Y36(q.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-customer-complaint"]],features:[t.qOj],decls:2,vars:2,consts:[["novalidate","","class","mt-4",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","projectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],[1,"col-md-3","col-lg-3"],["bindLabel","text","bindValue","value","formControlName","reasonCode",3,"items"],[3,"control"],["type","text","formControlName","complaintBy",1,"form-control",3,"placeholder"],["matInput","","type","datetime-local","formControlName","complaintDate",1,"form-control","datapickerinput",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","bookedBy",3,"items"],[1,"col-md-6","col-lg-6"],["type","text","formControlName","complaintDescription",1,"form-control",3,"placeholder"],["class","col-md-2 col-lg-2",4,"ngIf"],["class","col-md-4 col-lg-4",4,"ngIf"],["class","col-md-3 col-lg-3",4,"ngIf"],["class","col-md-7 col-lg-7",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"value"],[1,"col-md-2","col-lg-2"],["accept","image/*","type","file",2,"width","100%",3,"change"],["width","250","height","200",3,"src"],["matInput","","type","datetime-local","value","curDate","formControlName","closingDate",1,"form-control","datapickerinput",3,"placeholder"],[1,"col-md-7","col-lg-7"],["type","text","formControlName","actionDescription",1,"form-control",3,"placeholder"],["accept","image/*,.pdf","type","file",2,"width","100%",3,"change"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printableArea",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px","height","100%"],[2,"page-break-after","always","height","100vh"],["id","tableData"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","35%"],[2,"text-align","left"],[2,"text-align","center"],[1,"float-center",2,"width","200px","height","150px",3,"src"],[2,"text-align","right"],["border","1","cellpadding","5","cellspacing","0",2,"width","100%"],["rowspan","2",2,"border","1px solid #878787","padding","5px","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","15%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","word-wrap","break-word"],["width","35%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["width","35%",2,"white-space","pre-wrap","border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["width","35%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400","white-space","pre-wrap"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["colspan","4",2,"border","none","padding","5px","text-align","left","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","4",2,"border","none","padding","5px","text-align","justify","white-space","pre-wrap","font-size","0.675rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","400"],["id","footer"],[2,"background","#808080"],["colspan","6"],[2,"text-align","center","word-wrap","break-word"],["width","20%"],[2,"text-align","center","word-wrap","break-word","vertical-align","top"],["rowspan","2",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["rowspan","2"]],template:function(e,o){1&e&&(t.YNc(0,J4,112,91,"form",0),t.YNc(1,Q4,150,92,"ng-container",1)),2&e&&(t.Q6J("ngIf","view"!=o.action),t.xp6(1),t.Q6J("ngIf","view"==o.action))},directives:[Z.O5,l._Y,l.JL,l.sg,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,l.EJ,l.u,l.YN,l.Kr,Et.w9,V.s,Ut.ey],pipes:[f.X$,Z.Ov,Z.uU],encapsulation:2}),i})();function H4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.TgZ(1,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA()}}function $4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function V4(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function G4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function W4(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function z4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function X4(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function K4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function tb(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCode)}}function eb(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function ob(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameEng)}}function ib(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function nb(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameAr)}}function ab(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Status")," "))}function sb(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.status)}}function rb(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function lb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",58),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().createUpdate(n.id,"edit")}),t._UZ(1,"i",62),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function cb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",58),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().startAction(n)}),t._UZ(1,"i",63),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Start_Action"))}}function pb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",58),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().createUpdate(n.id,"closing")}),t._UZ(1,"i",64),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Close"))}}function ub(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().showImage(null==n?null:n.proofForComplaint)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"View_Complaint")))}function db(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t._uU(1," | "),t.TgZ(2,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().showImage(null==n?null:n.proofForAction)}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"View_Action")))}function _b(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",56),t.YNc(1,lb,3,1,"span",57),t.YNc(2,cb,3,1,"span",57),t.YNc(3,pb,3,1,"span",57),t.TgZ(4,"span",58),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().createUpdate(s.id,"view")}),t._UZ(5,"i",59),t._uU(6,"\xa0\xa0"),t.qZA(),t.TgZ(7,"span",60),t.YNc(8,ub,4,3,"span",61),t.YNc(9,db,5,3,"span",61),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isOpen)&&e.canEdit),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isOpen),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isInprogress),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View")),t.xp6(4),t.Q6J("ngIf",null!=(null==e?null:e.proofForComplaint)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isClosed)&&null!=(null==e?null:e.proofForAction))}}function mb(i,a){1&i&&t._UZ(0,"tr",66)}function gb(i,a){1&i&&t._UZ(0,"tr",67)}const uo=function(){return{standalone:!0}};let _o=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C,S){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=_,this.pageService=h,this.oprService=A,this.translate=C,this.dialogRef=S,this.displayedColumns=["customerCode","siteCode","projectCode","reasonCodeNameEng","reasonCodeNameAr","status","Actions"],this.searchValue="",this.sortingOrder="id asc",this.isLoading=!1,this.isUpdating=!1,this.listType="",this.approvedStatus="",this.project={projectCode:"-NA-",siteCode:"-NA-"},this.isArabic=!1,this.reasonCodeSelectionList=[]}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.initialLoading()}initialLoading(){this.LoadReasonCodeSelectionList(),this.loadList(0,this.pageService.pageCount,"",this.sortingOrder,"","")}LoadReasonCodeSelectionList(){this.apiService.getall("ReasonCode/getSelectReasonCodeListForCustomerComplaint").subscribe(e=>{null!=e&&(this.reasonCodeSelectionList=e,this.reasonCodeSelectionList.forEach(o=>{o.text=this.isArabic?o.textTwo+"-"+o.value:o.text+"-"+o.value}))})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadList(e,o,n,s,r="",c){this.isLoading=!0,this.apiService.getPagination(`CustomerComplaints/getCustomerComplaintsPagedListByProjectSite/${this.project.projectCode}/${this.project.siteCode}`,this.utilService.getOprQueryString(e,o,n,s,this.approvedStatus,"",0,"",this.listType)).subscribe(p=>{this.isLoading=!1,this.totalItemsCount=0,this.data=new m.by(p.items),this.totalItemsCount=p.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount,this.isLoading=!1}),this.data.sort=this.sort},p=>{this.utilService.ShowApiErrorMessage(p),this.isLoading=!1})}applyFilter(e,o){(e||o)&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,"",this.listType))}translateToolTip(e){return`${this.translate.instant(e)}`}refresh(){this.searchValue="",this.sortingOrder="id desc",this.approvedStatus="",this.listType="",this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadApprovals(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}closeModel(){this.dialogRef.close(!0)}delete(e){let n=e.requestNumber;this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(r=>{r&&n>0&&this.apiService.delete("CustomerComplaints",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()})},r=>this.utilService.ShowApiErrorMessage(r))}createUpdate(e,o){let n=this.oprService.openAutoHeightWidthDialog(this.dialog,B4);n.componentInstance.dbops=g.Oi.create,n.componentInstance.modalTitle="Customer_Complaint",n.componentInstance.modalBtnTitle="createUpdate",n.componentInstance.id=e,n.componentInstance.action=o,"-NA-"!=this.project.projectCode&&(n.componentInstance.isFromProjectsAction=!0),n.componentInstance.projectData=this.project,n.afterClosed().subscribe(s=>{s&&!0===s&&this.initialLoading()})}startAction(e){this.utilService.openDeleteConfirmDialog(this.dialog,xt).afterClosed().subscribe(n=>{n&&this.apiService.get("CustomerComplaints/StartAction/",e.id).subscribe(s=>{s&&(this.utilService.OkMessage(),this.initialLoading())},s=>{console.error(s),this.utilService.ShowApiErrorMessage(s)})})}showImage(e){window.open(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-customer-complaints"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:96,vars:47,consts:[["class","modal-body",4,"ngIf"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-2"],[1,"mr-sm-2"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","change","ngModelChange"],["value",""],["value","open"],["value","closed"],["value","inProgress"],[1,"col-md-3"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[3,"click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-1"],[3,"isLoading"],[1,"col-md-2","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","reasonCode"],["matColumnDef","reasonCodeNameEng"],["matColumnDef","reasonCodeNameAr"],["matColumnDef","status"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[1,"modal-body"],["type","button","aria-hidden","true",1,"close",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[2,"color","navy","font-style","italic"],[4,"ngIf"],[1,"fas","fa-edit"],[1,"fas","fa-check"],[1,"fas","fa-pencil-alt"],[2,"color","blue",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.YNc(0,H4,3,0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h3",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"nav",6),t.TgZ(9,"ol",7),t.TgZ(10,"li",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"li",8),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"li",9),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"div",2),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",13),t.TgZ(24,"div",2),t.TgZ(25,"div",14),t.TgZ(26,"label",15),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"ng-select",16),t.NdJ("ngModelChange",function(s){return o.listType=s}),t.qZA(),t.qZA(),t.TgZ(30,"div",14),t.TgZ(31,"label",15),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"select",17),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.approvedStatus=s}),t.TgZ(35,"option",18),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"option",19),t._uU(39,"Open"),t.qZA(),t.TgZ(40,"option",20),t._uU(41,"Closed"),t.qZA(),t.TgZ(42,"option",21),t._uU(43,"Inprogress"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",22),t._UZ(45,"label",15),t.TgZ(46,"input",23),t.NdJ("ngModelChange",function(s){return o.searchValue=s}),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.TgZ(48,"div",14),t.TgZ(49,"button",24),t.NdJ("click",function(){return o.applyFilter(o.searchValue,o.listType)}),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._uU(52," \xa0 "),t.TgZ(53,"a",25),t.NdJ("click",function(){return o.refresh()}),t._UZ(54,"i",26),t.qZA(),t._uU(55," \xa0 "),t.qZA(),t.TgZ(56,"div",27),t._UZ(57,"spinner-loader",28),t.qZA(),t.TgZ(58,"div",29),t.TgZ(59,"a",30),t.NdJ("click",function(){return o.createUpdate(0,"new")}),t._UZ(60,"i",31),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(63,"div",32),t.TgZ(64,"div",33),t.TgZ(65,"div",34),t.ynx(66),t.TgZ(67,"table",35),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(68,36),t.YNc(69,$4,3,3,"th",37),t.YNc(70,V4,2,1,"td",38),t.BQk(),t.ynx(71,39),t.YNc(72,G4,3,3,"th",37),t.YNc(73,W4,2,1,"td",38),t.BQk(),t.ynx(74,40),t.YNc(75,z4,3,3,"th",37),t.YNc(76,X4,2,1,"td",38),t.BQk(),t.ynx(77,41),t.YNc(78,K4,3,3,"th",37),t.YNc(79,tb,2,1,"td",38),t.BQk(),t.ynx(80,42),t.YNc(81,eb,3,3,"th",37),t.YNc(82,ob,2,1,"td",38),t.BQk(),t.ynx(83,43),t.YNc(84,ib,3,3,"th",37),t.YNc(85,nb,2,1,"td",38),t.BQk(),t.ynx(86,44),t.YNc(87,ab,3,3,"th",37),t.YNc(88,sb,2,1,"td",38),t.BQk(),t.ynx(89,45),t.YNc(90,rb,3,3,"th",46),t.YNc(91,_b,10,6,"td",47),t.BQk(),t.YNc(92,mb,1,0,"tr",48),t.YNc(93,gb,1,0,"tr",49),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(94),t.TgZ(95,"mat-paginator",50),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA()),2&e&&(t.Q6J("ngIf","-NA-"!=o.project.projectCode),t.xp6(5),t.hij(" ",t.lcZ(6,25,"Customer_Complaints")," "),t.xp6(6),t.hij(" ",t.lcZ(12,27,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(15,29,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(18,31,"Customer_Complaints")),t.xp6(10),t.Oqu(t.lcZ(28,33,"RequestType")),t.xp6(2),t.Q6J("items",o.reasonCodeSelectionList)("ngModel",o.listType)("ngModelOptions",t.DdM(45,uo)),t.xp6(3),t.Oqu(t.lcZ(33,35,"Approval_Status")),t.xp6(2),t.Q6J("ngModel",o.approvedStatus)("ngModelOptions",t.DdM(46,uo)),t.xp6(2),t.Oqu(t.lcZ(37,37,"Select")),t.xp6(10),t.MGl("placeholder","",t.lcZ(47,39,"Search"),"..."),t.Q6J("ngModel",o.searchValue),t.xp6(4),t.Oqu(t.lcZ(51,41,"Search")),t.xp6(7),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(62,43,"New_Request")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[Z.O5,Et.w9,l.JJ,l.On,l.EJ,l.YN,l.Kr,l.Fj,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function hb(i,a){1&i&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Zb(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.requestData.siteCode," ")}}function fb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploadFile()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Upload"))}let Se=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.filePath=""}ngOnInit(){null!=this.projectSite?(this.requestData=this.projectSite,this.filePath=this.authService.ApiEndPoint().replace("api","")+"Uploads/ContractForms/"):null!=this.project&&(this.requestData=this.project,this.requestData.siteCode="",this.filePath=this.authService.ApiEndPoint().replace("api","")+"Uploads/ContractForms/")}submit(){}closeModel(){this.dialogRef.close()}onFileChanged(e,o){let n=new FileReader;if(e.target.files&&e.target.files.length>0){let s=e.target.files[0];n.readAsDataURL(s),n.onload=()=>{1===o&&(this.requestData.fileIForm=s,this.requestData.fileName=n.result)}}}uploadFile(){var e;if(null!=this.requestData.fileIForm){const o=new FormData;o.append("id",this.requestData.id),o.append("fileIForm",this.requestData.fileIForm),o.append("fileName",this.filePath),o.append("isAdendum",null!==(e=this.requestData.isAdendum)&&void 0!==e&&e),this.apiService.post("projectSites/uploadContractForm",o).subscribe(n=>{n&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}else this.utilService.ShowApiErrorMessage(this.translate.instant("Select_File"))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-upload-file"]],features:[t.qOj],decls:36,vars:18,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"row",2,"text-align","center"],[1,"col-md-12","col-lg-12"],[1,"table","table-bordered","no-wrap"],[4,"ngIf"],[1,"col-md-8","col-lg-8"],[1,"form-group"],["accept",".pdf","type","file",3,"change"],[1,"col-md-4","col-lg-4","align-content-center"],["type","button","class","btn waves-effect waves- active btn-rounded   btn-primary btn-midblock",3,"value","click",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-","active","btn-rounded","btn-primary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"table",4),t.TgZ(9,"thead"),t.TgZ(10,"tr"),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,hb,3,3,"th",5),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"tbody"),t.TgZ(22,"tr"),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.YNc(27,Zb,2,1,"td",5),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",6),t.TgZ(31,"div",7),t.TgZ(32,"input",8),t.NdJ("change",function(s){return o.onFileChanged(s,1)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",9),t.YNc(34,fb,2,3,"input",10),t._uU(35," \xa0 "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,10,"Uploading_ContractForm")),t.xp6(11),t.hij(" ",t.lcZ(13,12,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(16,14,"Project_Code")," "),t.xp6(2),t.Q6J("ngIf",o.requestData.isAdendum),t.xp6(2),t.hij(" ",t.lcZ(20,16,"Request_Number")," "),t.xp6(5),t.hij(" ",o.requestData.customerCode," "),t.xp6(2),t.hij(" ",o.requestData.projectCode," "),t.xp6(1),t.Q6J("ngIf",o.requestData.isAdendum),t.xp6(2),t.hij(" ",o.requestData.id," "),t.xp6(5),t.Q6J("ngIf",null!=(null==o.requestData?null:o.requestData.fileIForm)))},directives:[Z.O5],pipes:[f.X$],encapsulation:2}),i})();function Ab(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function Cb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Tb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function vb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function xb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name")," "))}function qb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng)}}function bb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function yb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Sb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function wb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function Ub(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Start_Date")," "))}function Db(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.startDate,"longDate"))}}function Lb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"End_Date")," "))}function Nb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.endDate,"longDate"))}}function Eb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Addendum")," "))}function Ob(i,a){1&i&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function kb(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function jb(i,a){if(1&i&&(t.TgZ(0,"td",35),t.YNc(1,Ob,3,3,"span",36),t.YNc(2,kb,3,3,"ng-template",null,37,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isAdendum)("ngIfElse",o)}}function Mb(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Rb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().shiftPlan(n)}),t._UZ(1,"i",47),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Shift_Plan"))}}function Pb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().skillsetPlan(n)}),t._UZ(1,"i",48),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("SkillSet_Plan"))}}function Fb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().resourceCosting(n)}),t._UZ(2,"i",49),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().logisticsCosting(n)}),t._UZ(5,"i",50),t._uU(6,"\xa0"),t.qZA(),t.TgZ(7,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().materialCosting(n)}),t._UZ(8,"i",51),t._uU(9,"\xa0"),t.qZA(),t.TgZ(10,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().financialExpenseCosting(n)}),t._UZ(11,"i",52),t._uU(12,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(4).$implicit,o=t.oxw();t.xp6(1),t.Tol(o.getResourceColor(e)),t.Q6J("matTooltip",o.translateToolTip("Resource_Costing")),t.xp6(3),t.Tol(o.getLogisticsColor(e)),t.Q6J("matTooltip",o.translateToolTip("Logistics_Costing")),t.xp6(3),t.Tol(o.getMaterialColor(e)),t.Q6J("matTooltip",o.translateToolTip("Material_Costing")),t.xp6(3),t.Tol(o.getFinanceExpenceColor(e)),t.Q6J("matTooltip",o.translateToolTip("Financial_Expense_Costing"))}}function Ib(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().enableEditCostingButton(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(5);t.Q6J("matTooltip",e.translateToolTip("Edit_Costing"))}}function Yb(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Fb,13,16,"span",42),t.YNc(2,Ib,3,1,"span",45),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isEstimationForProjectApproved&&!e.isAdendum)}}function Jb(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Yb,3,2,"span",42),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",!e.isConvertedToProposal&&e.authorities.canModifyEstimation)}}function Qb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().calendarDays(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Generate_Monthly_Roaster"))}}function Bb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().assignEmployyesToProjectSite(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Assign_Employyes_To_ProjectSite"))}}function Hb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().mappingEmpToResourceForProjectSite(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Mapping_Employees_To_Resource_For_ProjectSite"))}}function $b(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().openMonthlyRoaster(n)}),t._UZ(1,"i",57),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Lock_Shifts"))}}function Vb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().employeeAttendance(n)}),t._UZ(1,"i",58),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Employee_Attendance"))}}function Gb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().employeePayrollAttendance(n)}),t._UZ(1,"i",59),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Employee_Attendance_Payroll"))}}function Wb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewCustomerVisitForms(n)}),t._UZ(1,"i",60),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Customer_Visit_Forms"))}}function zb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewCustomerComplaints(n)}),t._UZ(1,"i",61),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Customer_Complaints"))}}function Xb(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Rb,3,1,"span",45),t.YNc(2,Pb,3,1,"span",45),t.YNc(3,Jb,2,1,"span",42),t.YNc(4,Qb,3,1,"span",45),t.YNc(5,Bb,3,1,"span",45),t.YNc(6,Hb,3,1,"span",45),t.YNc(7,$b,3,1,"span",45),t.YNc(8,Vb,3,1,"span",45),t.YNc(9,Gb,3,1,"span",45),t.YNc(10,Wb,3,1,"span",45),t.YNc(11,zb,3,1,"span",45),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.authorities.canModifyEstimation),t.xp6(1),t.Q6J("ngIf",e.isShiftsAssigned&&(e.authorities.canModifyEstimation||e.isAdmin)&&!e.isResourcesAssigned&&(!e.isEstimationForProjectApproved||!e.isEstimationCompleted&&e.isAdendum)),t.xp6(1),t.Q6J("ngIf",e.isShiftsAssigned&&e.isSkillSetsMapped),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract)}}function Kb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ReopenProject(n)}),t._UZ(1,"i",68),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Reopen_Project_Site"),""))}function ty(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(1,"i",68),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Extend_Project_Site"),""))}function ey(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().RevokeSuspension(n)}),t._UZ(1,"i",68),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Revoke_Suspension"),""))}function oy(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Kb,4,3,"a",66),t.YNc(2,ty,4,3,"a",66),t.YNc(3,ey,4,3,"a",66),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",null==e?null:e.isClosed),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isClosed||null!=e&&e.isInProgress||null!=e&&e.isSuspended)),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isSuspended)}}function iy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewRequests(n)}),t._UZ(2,"i",68),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().CloseProject(n)}),t._UZ(6,"i",68),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().SuspendProject(n)}),t._UZ(10,"i",68),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(14,"i",68),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,4,"View_Requests"),""),t.xp6(4),t.hij(" ",t.lcZ(8,6,"Close_Project_Site"),""),t.xp6(4),t.hij(" ",t.lcZ(12,8,"Suspend_Project_Site"),""),t.xp6(4),t.hij(" ",t.lcZ(16,10,"Extend_Project_Site"),""))}function ny(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(1,"i",68),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Extend_Project_Site"),""))}function ay(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ReopenProject(n)}),t._UZ(2,"i",68),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,ny,4,3,"a",66),t.qZA()}if(2&i){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,2,"Reopen_Project_Site"),""),t.xp6(2),t.Q6J("ngIf",null==e?null:e.canExtendProject)}}function sy(i,a){if(1&i&&(t.TgZ(0,"span",62),t.TgZ(1,"a",63),t._UZ(2,"i",64),t.qZA(),t.TgZ(3,"span",65),t.YNc(4,oy,4,3,"span",42),t.YNc(5,iy,17,12,"span",42),t.YNc(6,ay,6,4,"span",42),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("matTooltip",o.translateToolTip("Project_Site_Variance")),t.xp6(4),t.Q6J("ngIf",null==e?null:e.isInActive),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInActive)&&(null==e?null:e.isInProgress)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInProgress)&&!(null!=e&&e.isInActive)&&e.isConvrtedToContract)}}function ry(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().enableEditCostingButton(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit_Costing"))}}function ly(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().estimationReport(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Estimation_Report"))}}function cy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().summaryReport(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Summary_Report"))}}function py(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveEstimation(n)}),t._UZ(1,"i",73),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Estimation"))}}function uy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printEstimation(n)}),t._UZ(1,"i",74),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Print_Estimation"))}}function dy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",75),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printProposal(n)}),t._UZ(1,"i",76),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Print_Proposal"))}}function _y(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().convertToContract(n)}),t._UZ(1,"i",77),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Merge_To_Contract"))}}function my(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().uploadFile(n)}),t._UZ(1,"i",78),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function gy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewContract(n)}),t._UZ(1,"i",79),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Addendum"))}}function hy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewUploadedFile(n)}),t._UZ(1,"i",79),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Download_File"))}}function Zy(i,a){if(1&i&&(t.TgZ(0,"span",69),t.YNc(1,ry,3,1,"a",45),t.YNc(2,ly,3,1,"a",45),t.YNc(3,cy,3,1,"a",45),t.YNc(4,py,3,1,"a",45),t.YNc(5,uy,3,1,"a",45),t.YNc(6,dy,3,1,"a",70),t.YNc(7,_y,3,1,"a",45),t.YNc(8,my,3,1,"a",45),t.YNc(9,gy,3,1,"a",45),t.YNc(10,hy,3,1,"a",45),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!(null!=e&&e.isApproved)),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isApproved&&e.hasAuthority&&e.authorities.canApproveEstimation&&!e.approvedUser),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isApproved&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isApproved&&!e.fileUrl&&(e.canApprove||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract&&!e.fileUrl),t.xp6(1),t.Q6J("ngIf",e.fileUrl)}}function fy(i,a){if(1&i&&(t.TgZ(0,"td",41),t.YNc(1,Xb,12,11,"span",42),t.YNc(2,sy,7,4,"span",43),t.YNc(3,Zy,11,10,"span",44),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInActive)&&(null==e?null:e.isInProgress)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isAdendum)}}function Ay(i,a){1&i&&t._UZ(0,"tr",80)}function Cy(i,a){1&i&&t._UZ(0,"tr",81)}let Ty=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=_,this.pageService=h,this.translate=A,this.dialogRef=C,this.displayedColumns=["customerCode","projectCode","Project_Name","SiteCode","Branch_Code","startDate","endDate","isAdendum","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.form=this.fb.group({}),this.searchValue=this.project.projectCode,this.initialLoading()}refresh(){this.searchValue=this.project.projectCode,this.initialLoading()}initialLoading(){this.searchValue=this.project.projectCode,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.project.projectCode,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ProjectSites/getProjectSitesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.isArab=this.isArab,c.componentInstance.type="ForAddingSite",c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.oprService.openAutoHeightWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.requestData=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openPaginationWindow(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialog(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,n);p.componentInstance.dbops=e,p.componentInstance.modalTitle=o,p.componentInstance.confirmType=s,p.afterClosed().subscribe(u=>{(u&&1==u||u.res)&&this.apiService.post("ProjectBudgetCosting/skippEstimation",this.project).subscribe(d=>{this.utilService.OkMessage(),this.ngOnInit()},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d)})})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}resourceCosting(e){this.openDialogManage(e,g.Oi.create,"Resource_Costing","Save",ie)}logisticsCosting(e){this.openDialogManage(e,g.Oi.create,"Logistics_Vehicle_Costing","Save",ae)}materialCosting(e){this.openDialogManage(e,g.Oi.create,"Material_Costing","Save",se)}financialExpenseCosting(e){this.openDialogManage(e,g.Oi.create,"Financial_Epense_Costing","Save",re)}estimationReport(e){this.openDialogManage(e,g.Oi.create,"Estimation_Cnsolidate_Report","Save",le)}summaryReport(e){this.openDialogManage(e,g.Oi.create,"Estimation_Summary_Report","Save",ce)}convertToContract(e){this.openFullWindow(e,g.Oi.create,"Creating_Contract","Save",$t)}printEstimation(e){this.openDialogManage(e,g.Oi.create,"Estimation_Cnsolidate_Report","Print",me)}assignEmployyesToProjectSite(e){this.openFullWindow(e,g.Oi.create,"Assigning_Employees_To_Site","Save",ge)}mappingEmpToResourceForProjectSite(e){this.openDialogManage(e,g.Oi.create,"Mapping_Employees_To_Resources_For_Site","Save",he)}printProposal(e){this.openDialogManage(e,g.Oi.create,"Project_Proposal","Print",_e)}shiftPlan(e){this.openDialogManage(e,g.Oi.create,"Shifts_Plan_For_Project","Save",pe)}skillsetPlan(e){this.openDialogManage(e,g.Oi.create,"Skillset_Plan_For_Project","Save",ue)}calendarDays(e){this.openFullWindow(e,g.Oi.create,"Calander_Days","Save",de)}viewContract(e){this.openFullWindow(e,g.Oi.create,"Adendum_Contract","View",$t)}employeeAttendance(e){this.openFullWindow(e,g.Oi.create,"Employee_Attendance","View",Ze)}submit(){}openMonthlyRoaster(e){this.openFullWindow(e,g.Oi.create,"Monthly_Roaster","Save",ne)}approveEstimation(e){this.openApprovalDialog(e.branchCode,e.projectCode+"/"+e.siteCode,g.Oi.create,"Estimation_Approval","Save","ADNDM",Wt)}enableEditCostingButton(e){e.isEstimationCompleted=!1}convertToProposal(e){this.apiService.post("ProjectBudgetCosting/convertProjectSiteToProposal",e).subscribe(o=>{this.utilService.OkMessage(),this.ngOnInit()},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}translateToolTip(e){return`${this.translate.instant(e)}`}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}closeModel(){this.dialogRef.close(!0)}skippEstimation(e){this.project=e,console.log(e),this.openConfirmationDialog(g.Oi.create,"Are_You_Sure?",xt,"general","Skipp_Estimation",0)}CloseProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!0,e.id=0,this.openDialogManage(e,g.Oi.create,"Close_Project_Site","Save",kt)}CancelProject(){}SuspendProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!0,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.Oi.create,"Suspend_Project_Site","Save",kt)}ExtendProject(e){e.isExtendProjReq=!0,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.Oi.create,"Extend_Project_Site","Save",kt)}ReopenProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!0,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.Oi.create,"Reopen_Project_Site","Save",kt)}RevokeSuspension(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!0,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.Oi.create,"Revoke_Suspension","Save",kt)}ViewRequests(e){this.openPaginationWindow(e,g.Oi.create,"","",ro)}ViewCustomerVisitForms(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,po);o.componentInstance.dbops=g.Oi.create,o.componentInstance.modalTitle="",o.componentInstance.modalBtnTitle="",o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}ViewCustomerComplaints(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,_o);o.componentInstance.dbops=g.Oi.create,o.componentInstance.modalTitle="",o.componentInstance.modalBtnTitle="",o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}employeePayrollAttendance(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,wq);o.componentInstance.projectCode=e.projectCode,o.componentInstance.siteCode=e.siteCode,o.componentInstance.isFromProjectSiteActions=!0,o.afterClosed().subscribe(n=>{})}uploadFile(e){let o=this.oprService.openAutoWidthDialog(this.dialog,Se);o.componentInstance.projectSite=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewUploadedFile(e){window.open(e.fileUrl)}getResourceColor(e){return e.isResourcesAssigned?"GreenText":"RedText"}getLogisticsColor(e){return e.isLogisticsAssigned?"GreenText":"RedText"}getMaterialColor(e){return e.isMaterialAssigned?"GreenText":"RedText"}getFinanceExpenceColor(e){return e.isExpenceOverheadsAssigned?"GreenText":"RedText"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(W),t.Y36(B.N),t.Y36(f.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-project-sites"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:59,vars:16,consts:[[1,"modal-body"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","Project_Name"],["matColumnDef","SiteCode"],["matColumnDef","Branch_Code"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","isAdendum"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[4,"ngIf"],[3,"matTooltip",4,"ngIf"],["style","padding-left:5px",4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-clock"],[1,"fas","fa-user-plus"],[1,"icon-people"],[1,"fas","fa-bus"],[1,"fas","fa-fax"],[1,"fas","fa-sort-amount-up"],[1,"far","fa-edit"],[1,"fas","fa-calendar-plus"],[1,"fas","fa-tasks"],[1,"fas","fa-users"],[1,"fas","fa-lock"],[1,"fas","fa-calendar-check"],[1,"fab","fa-wpforms"],[1,"fas","fa-motorcycle"],[1,"fas","fa-phone-square"],[3,"matTooltip"],["id","navbarDropdown","role","list","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"fas","fa-sun"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],["class","dropdown-item tableicons",3,"click",4,"ngIf"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],[2,"padding-left","5px"],[3,"click",4,"ngIf"],[1,"icon-eye"],[1,"fas","fa-list"],[1,"fas","fa-check-circle"],[1,"fas","fa-print"],[3,"click"],[1,"fas","fa-print",3,"matTooltip"],[1,"far","fa-handshake"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"h3",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"nav",7),t.TgZ(11,"ol",8),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",10),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",11),t.TgZ(19,"div",3),t.TgZ(20,"div",12),t.TgZ(21,"div",13),t.TgZ(22,"div",14),t._UZ(23,"div",3),t._UZ(24,"div",15),t.TgZ(25,"div",16),t.ynx(26),t.TgZ(27,"table",17),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(28,18),t.YNc(29,Ab,3,3,"th",19),t.YNc(30,Cb,2,1,"td",20),t.BQk(),t.ynx(31,21),t.YNc(32,Tb,3,3,"th",19),t.YNc(33,vb,2,1,"td",20),t.BQk(),t.ynx(34,22),t.YNc(35,xb,3,3,"th",19),t.YNc(36,qb,2,1,"td",20),t.BQk(),t.ynx(37,23),t.YNc(38,bb,3,3,"th",19),t.YNc(39,yb,2,1,"td",20),t.BQk(),t.ynx(40,24),t.YNc(41,Sb,3,3,"th",19),t.YNc(42,wb,2,1,"td",20),t.BQk(),t.ynx(43,25),t.YNc(44,Ub,3,3,"th",19),t.YNc(45,Db,3,4,"td",20),t.BQk(),t.ynx(46,26),t.YNc(47,Lb,3,3,"th",19),t.YNc(48,Nb,3,4,"td",20),t.BQk(),t.ynx(49,27),t.YNc(50,Eb,3,3,"th",19),t.YNc(51,jb,4,2,"td",20),t.BQk(),t.ynx(52,28),t.YNc(53,Mb,3,3,"th",29),t.YNc(54,fy,4,3,"td",30),t.BQk(),t.YNc(55,Ay,1,0,"tr",31),t.YNc(56,Cy,1,0,"tr",32),t.qZA(),t.BQk(),t.qZA(),t.ynx(57),t.TgZ(58,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,10,o.modalTitle)," "),t.xp6(6),t.hij(" ",t.lcZ(14,12,o.project.projectCode)," "),t.xp6(3),t.Oqu(t.lcZ(17,14,"Sites")),t.xp6(11),t.Q6J("dataSource",o.data),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$,Z.uU],styles:["span.RedText[_ngcontent-%COMP%] {\n    color: red;\n\n  }\n  span.GreenText[_ngcontent-%COMP%] {\n    color: lawngreen;\n     }\n  span.BlueText[_ngcontent-%COMP%] {\n    color: blue;\n     }"]}),i})();function vy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateReport()}),t._uU(1," Generate Report "),t.qZA()}}function xy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",54),t._uU(2," print "),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._uU(5,"ExportExcel"),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("useExistingCss",!0))}function qy(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function by(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function yy(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Sy(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function wy(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name")," "))}function Uy(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng)}}function Dy(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Start_Date")," "))}function Ly(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.startDate,"longDate"))}}function Ny(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"End_Date")," "))}function Ey(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.endDate,"longDate"))}}function Oy(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function ky(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function jy(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function My(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().estimationReport(n)}),t._UZ(1,"i",63),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Estimation_Report"))}}function Ry(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().summaryReport(n)}),t._UZ(1,"i",64),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Summary_Report"))}}function Py(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveEstimation(n)}),t._UZ(1,"i",65),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Estimation"))}}function Fy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().printEstimation(n)}),t._UZ(1,"i",66),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Print_Estimation"))}}function Iy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().printProposal(n)}),t._UZ(1,"i",68),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Print_Proposal"))}}function Yy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().convertToContract(n)}),t._UZ(1,"i",69),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Convert_To_Contract"))}}function Jy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadFile(n)}),t._UZ(1,"i",70),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function Qy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewContract(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_Contract"))}}function By(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewUploadedFile(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Download_File"))}}function Hy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",58),t.YNc(1,My,3,1,"span",59),t.YNc(2,Ry,3,1,"span",59),t.YNc(3,Py,3,1,"span",59),t.YNc(4,Fy,3,1,"span",59),t.YNc(5,Iy,3,1,"span",60),t.YNc(6,Yy,3,1,"span",59),t.YNc(7,Jy,3,1,"a",59),t.YNc(8,Qy,3,1,"a",59),t.YNc(9,By,3,1,"a",59),t.TgZ(10,"span",61),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewProjectSites(s)}),t._UZ(11,"i",62),t._uU(12,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isApproved&&(e.hasAuthority&&e.authorities.canApproveEstimation||e.isAdmin)&&!e.approvedUser),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",!e.isConvrtedToContract&&e.isEstimationCompleted&&e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract&&e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isConvertedToProposal&&e.isApproved&&!e.fileUrl&&(e.canApprove||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract&&!e.fileUrl),t.xp6(1),t.Q6J("ngIf",e.fileUrl),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Sites"))}}function $y(i,a){1&i&&t._UZ(0,"tr",72)}function Vy(i,a){1&i&&t._UZ(0,"tr",73)}function Gy(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.ALo(6,"date"),t.ALo(7,"translate"),t.ALo(8,"date"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.xDo(" ",t.lcZ(4,5,"Start_Date")," ",t.lcZ(5,7,"Between")," ",t.xi3(6,9,null==e.filter?null:e.filter.startDateFrom,"longDate")," ",t.lcZ(7,12,"And")," ",t.xi3(8,14,null==e.filter?null:e.filter.startDateTo,"longDate")," ")}}function Wy(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.ALo(6,"date"),t.ALo(7,"translate"),t.ALo(8,"date"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.xDo(" ",t.lcZ(4,5,"End_Date")," ",t.lcZ(5,7,"Between")," ",t.xi3(6,9,null==e.filter?null:e.filter.endDateFrom,"longDate")," ",t.lcZ(7,12,"And")," ",t.xi3(8,14,null==e.filter?null:e.filter.endDateTo,"longDate")," ")}}function zy(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.customerCode),t.xp6(2),t.Oqu(e.projectCode),t.xp6(2),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng),t.xp6(2),t.Oqu(t.xi3(9,6,e.startDate,"longDate")),t.xp6(3),t.Oqu(t.xi3(12,9,e.endDate,"longDate")),t.xp6(3),t.Oqu(e.branchCode)}}function Xy(i,a){if(1&i&&(t.TgZ(0,"div",74),t.TgZ(1,"div",75),t.TgZ(2,"table",76),t.TgZ(3,"tr"),t.TgZ(4,"td",77),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.YNc(14,Gy,9,17,"tr",31),t.TgZ(15,"tr"),t.TgZ(16,"td",77),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.YNc(19,Wy,9,17,"tr",31),t.qZA(),t._UZ(20,"br"),t.qZA(),t.TgZ(21,"table",78),t.TgZ(22,"tr"),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.YNc(41,zy,15,12,"tr",79),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,16,"Report_On_Projects")),t.xp6(4),t.AsE("",t.lcZ(10,18,"Customer_Code"),":",null==e.filter.customerCode||""==e.filter.customerCode?"All":e.filter.customerCode,""),t.xp6(3),t.AsE("",t.lcZ(13,20,"Branch_Code"),":",null==e.filter.branchCode||""==e.filter.branchCode?"All":e.filter.branchCode,""),t.xp6(2),t.Q6J("ngIf",e.filter.startDateFrom&&e.filter.startDateTo),t.xp6(3),t.AsE("",t.lcZ(18,22,"Search_Key"),":",e.searchValue,""),t.xp6(2),t.Q6J("ngIf",e.filter.endDateFrom&&e.filter.endDateTo),t.xp6(5),t.hij(" ",t.lcZ(25,24,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(28,26,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(31,28,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(37,32,"End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(40,34,"Branch_Code")," "),t.xp6(2),t.Q6J("ngForOf",e.reportData)}}const Ky=function(){return{standalone:!0}};let tS=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=_,this.pageService=h,this.translate=A,this.displayedColumns=["customerCode","projectCode","Project_Name","branchCode","startDate","endDate","Actions"],this.reportData=[],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.customerSelectionList=[],this.citySelectionList=[],this.isArab=!1,this.filter={customerCode:"",branchCode:""},this.filterDates={startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null}}ngOnInit(){this.isArab=this.utilService.isArabic(),this.form=this.fb.group({}),this.initialLoading()}openDatePicker(e){e.open()}refresh(){this.reportData=[],this.resetFilter()}resetFilter(){this.filter={customerCode:"",branchCode:"",startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null},this.filterDates={startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null},this.applyFilter("")}clearReport(){this.reportData=[]}initialLoading(){this.searchValue="",this.loadCitiesList(),this.loadCustomersList(),this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}loadCitiesList(){this.apiService.getall("Branch/getBranchSelectListForUser").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArab?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}onSortOrder(e){this.reportData=[],"Project_Name"==e.active&&(e.active=this.isArab?"projectNameArb":"projectNameEng"),this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}generateReport(){this.reportData=[];for(let e=0;e<=Math.floor(this.totalItemsCount/100);e++){let o={pageIndex:e,pageSize:100,previousPageIndex:0==e?0:e-1,length:0};this.loadListReport(o.pageIndex,o.pageSize,this.searchValue,this.sortingOrder)}}setFilterDates(){if(null!=this.filterDates.startDateFrom){let e=new Date(this.filterDates.startDateFrom);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.startDateFrom=e}if(null!=this.filterDates.startDateTo){let e=new Date(this.filterDates.startDateTo);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.startDateTo=e}if(null!=this.filterDates.endDateFrom){let e=new Date(this.filterDates.endDateFrom);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.endDateFrom=e}if(null!=this.filterDates.endDateTo){let e=new Date(this.filterDates.endDateTo);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.endDateTo=e}}loadList(e,o,n,s){this.isLoading=!0,this.setFilterDates(),this.oprService.getPaginationWithFilter("Project/getProjectsPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}loadListReport(e,o,n,s){this.isLoading=!0,this.setFilterDates(),this.oprService.getPaginationWithFilter("Project/getProjectsPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.isLoading=!1,this.reportData=0==this.reportData.length?r.items:this.reportData.concat(r.items)},r=>this.utilService.ShowApiErrorMessage(r))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.type="ForProject",c.componentInstance.isArab=this.isArab,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.oprService.openAutoHeightWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openDialogManage2(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}resourceCosting(e){this.openDialogManage(e,g.Oi.create,"Resource_Costing","Save",ie)}logisticsCosting(e){this.openDialogManage(e,g.Oi.create,"Logistics_Vehicle_Costing","Save",ae)}materialCosting(e){this.openDialogManage(e,g.Oi.create,"Material_Costing","Save",se)}financialExpenseCosting(e){this.openDialogManage(e,g.Oi.create,"Financial_Epense_Costing","Save",re)}estimationReport(e){this.openDialogManage(e,g.Oi.create,"Estimation_Cnsolidate_Report","Save",le)}summaryReport(e){this.openDialogManage(e,g.Oi.create,"Estimation_Summary_Report","Save",ce)}convertToContract(e){this.openFullWindow(e,g.Oi.create,"Creating_Contract","Save",$t)}printEstimation(e){this.openDialogManage(e,g.Oi.create,"Estimation_Cnsolidate_Report","Print",me)}assignEmployyesToProjectSite(e){this.openFullWindow(e,g.Oi.create,"Assigning_Employees_To_Site","Save",ge)}mappingEmpToResourceForProjectSite(e){this.openDialogManage(e,g.Oi.create,"Mapping_Employees_To_Resources_For_Site","Save",he)}printProposal(e){this.openDialogManage2(e,g.Oi.create,"Project_Proposal","Print",_e)}shiftPlan(e){this.openDialogManage(e,g.Oi.create,"Shifts_Plan_For_Project","Save",pe)}skillsetPlan(e){this.openDialogManage(e,g.Oi.create,"Skillset_Plan_For_Project","Save",ue)}calendarDays(e){this.openFullWindow(e,g.Oi.create,"Calander_Days","Save",de)}viewContract(e){this.openFullWindow(e,g.Oi.create,"Creating_Contract","View",$t)}employeeAttendance(e){this.openFullWindow(e,g.Oi.create,"Employee_Attendance","View",Ze)}submit(){}openMonthlyRoaster(e){this.openFullWindow(e,g.Oi.create,"Monthly_Roaster","Save",ne)}approveEstimation(e){this.openApprovalDialog(e.branchCode,e.projectCode,g.Oi.create,"Estimation_Approval","Save","EST",Wt)}convertToProposal(e){this.apiService.post("ProjectBudgetCosting/convertProjectToProposal",e).subscribe(o=>{this.utilService.OkMessage(),this.ngOnInit()},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}translateToolTip(e){return`${this.translate.instant(e)}`}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.reportData=[]}viewProjectSites(e){this.openDialogManage(e,g.Oi.create,"List_Of_Sites_In_Project","Pagination",Ty)}uploadFile(e){let o=this.oprService.openAutoWidthDialog(this.dialog,Se);o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewUploadedFile(e){window.open(e.fileUrl)}exportexcel(){let e=document.getElementById("printcontainer");const o=mt.P6.table_to_sheet(e),n=mt.P6.book_new();mt.P6.book_append_sheet(n,o,"Sheet1"),mt.NC(n,"projectsReport.xlsx")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(W),t.Y36(B.N),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-project"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:130,vars:66,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"outer"],[1,"col-md-4","col-lg-4"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-8","col-lg-8"],[1,"col-md-6","col-lg-6"],[1,"form-group",2,"text-align","center"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click","dateChange"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["picker3",""],["picker4",""],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-6","col-lg-6",2,"align-content","flex-start"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary","icon-refresh",3,"click"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","Project_Name"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","branchCode"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["id","printcontainer","hidden","",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["printTitle","ProjectsReport","printSectionId","printcontainer","ngxPrint","",1,"btn","btn-primary",3,"useExistingCss"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"click",4,"ngIf"],[3,"matTooltip","click"],[1,"icon-eye"],[1,"fas","fa-sticky-note"],[1,"fas","fa-list"],[1,"fas","fa-check-circle"],[1,"fas","fa-print"],[3,"click"],[1,"fas","fa-print",3,"matTooltip"],[1,"far","fa-handshake"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""],["id","printcontainer","hidden",""],["width","100%"],["id","attndTable"],["colspan","2"],["id","attndTable","width","100%"],[4,"ngFor","ngForOf"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",1),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t.TgZ(24,"label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"ng-select",16),t.NdJ("ngModelChange",function(r){return o.filter.branchCode=r})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",17),t.TgZ(29,"div",15),t.TgZ(30,"label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"ng-select",16),t.NdJ("ngModelChange",function(r){return o.filter.customerCode=r})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",18),t.TgZ(35,"div",1),t.TgZ(36,"div",10),t.TgZ(37,"div",19),t.TgZ(38,"label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",18),t.TgZ(42,"div",15),t.TgZ(43,"div",15),t.TgZ(44,"div",20),t.TgZ(45,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.startDateFrom=r})("click",function(){t.CHM(n);const r=t.MAs(50);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",22),t._UZ(48,"mat-datepicker-toggle",23),t._UZ(49,"mat-datepicker",null,24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",18),t.TgZ(52,"div",15),t.TgZ(53,"div",15),t.TgZ(54,"div",20),t.TgZ(55,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.startDateTo=r})("click",function(){t.CHM(n);const r=t.MAs(60);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",22),t._UZ(58,"mat-datepicker-toggle",23),t._UZ(59,"mat-datepicker",null,25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"div",18),t.TgZ(62,"div",1),t.TgZ(63,"div",10),t.TgZ(64,"div",19),t.TgZ(65,"label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",18),t.TgZ(69,"div",15),t.TgZ(70,"div",15),t.TgZ(71,"div",20),t.TgZ(72,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.endDateFrom=r})("click",function(){t.CHM(n);const r=t.MAs(77);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"div",22),t._UZ(75,"mat-datepicker-toggle",23),t._UZ(76,"mat-datepicker",null,26),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(78,"div",18),t.TgZ(79,"div",15),t.TgZ(80,"div",15),t.TgZ(81,"div",20),t.TgZ(82,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.endDateTo=r})("click",function(){t.CHM(n);const r=t.MAs(87);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"div",22),t._UZ(85,"mat-datepicker-toggle",23),t._UZ(86,"mat-datepicker",null,27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"div",1),t.TgZ(89,"div",14),t.TgZ(90,"input",28),t.NdJ("ngModelChange",function(r){return o.searchValue=r})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.TgZ(92,"div",29),t.YNc(93,vy,2,0,"button",30),t.YNc(94,xy,6,1,"span",31),t.TgZ(95,"span"),t._uU(96," \xa0 "),t.TgZ(97,"button",32),t.NdJ("click",function(){return o.refresh()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",33),t._UZ(99,"spinner-loader",34),t.qZA(),t.qZA(),t._UZ(100,"div",35),t.TgZ(101,"div",36),t.ynx(102),t.TgZ(103,"table",37),t.NdJ("matSortChange",function(r){return o.onSortOrder(r)}),t.ynx(104,38),t.YNc(105,qy,3,3,"th",39),t.YNc(106,by,2,1,"td",40),t.BQk(),t.ynx(107,41),t.YNc(108,yy,3,3,"th",39),t.YNc(109,Sy,2,1,"td",40),t.BQk(),t.ynx(110,42),t.YNc(111,wy,3,3,"th",39),t.YNc(112,Uy,2,1,"td",40),t.BQk(),t.ynx(113,43),t.YNc(114,Dy,3,3,"th",39),t.YNc(115,Ly,3,4,"td",40),t.BQk(),t.ynx(116,44),t.YNc(117,Ny,3,3,"th",39),t.YNc(118,Ey,3,4,"td",40),t.BQk(),t.ynx(119,45),t.YNc(120,Oy,3,3,"th",39),t.YNc(121,ky,2,1,"td",40),t.BQk(),t.ynx(122,46),t.YNc(123,jy,3,3,"th",47),t.YNc(124,Hy,13,10,"td",48),t.BQk(),t.YNc(125,$y,1,0,"tr",49),t.YNc(126,Vy,1,0,"tr",50),t.qZA(),t.BQk(),t.qZA(),t.ynx(127),t.TgZ(128,"mat-paginator",51),t.NdJ("page",function(r){return o.onPageSwitch(r)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(129,Xy,42,36,"div",52)}if(2&e){const n=t.MAs(50),s=t.MAs(60),r=t.MAs(77),c=t.MAs(87);t.xp6(4),t.hij(" ",t.lcZ(5,41,"Projects")," "),t.xp6(6),t.hij(" ",t.lcZ(11,43,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,45,"Projects")),t.xp6(12),t.Oqu(t.lcZ(26,47,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.filter.branchCode),t.xp6(4),t.Oqu(t.lcZ(32,49,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.filter.customerCode),t.xp6(6),t.Oqu(t.lcZ(40,51,"Start_Date")),t.xp6(6),t.s9C("placeholder",t.lcZ(46,53,"From_Date")),t.Q6J("ngModel",o.filterDates.startDateFrom)("matDatepicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(7),t.MGl("placeholder"," ",t.lcZ(56,55,"To_Date"),""),t.Q6J("ngModel",o.filterDates.startDateTo)("matDatepicker",s),t.xp6(3),t.Q6J("for",s),t.xp6(8),t.Oqu(t.lcZ(67,57,"End_Date")),t.xp6(6),t.s9C("placeholder",t.lcZ(73,59,"From_Date")),t.Q6J("ngModel",o.filterDates.endDateFrom)("matDatepicker",r),t.xp6(3),t.Q6J("for",r),t.xp6(7),t.MGl("placeholder"," ",t.lcZ(83,61,"To_Date"),""),t.Q6J("ngModel",o.filterDates.endDateTo)("matDatepicker",c),t.xp6(3),t.Q6J("for",c),t.xp6(5),t.MGl("placeholder","",t.lcZ(91,63,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(65,Ky)),t.xp6(3),t.Q6J("ngIf",0==o.reportData.length),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0),t.xp6(5),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0)}},directives:[Et.w9,l.JJ,l.On,l.Fj,j.hl,j.nW,ft.R9,j.Mq,Z.O5,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,ut.gM,m.XQ,m.Gk,Z.sg],pipes:[f.X$,Z.uU],styles:["#attndTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n    border: solid;\n    border-width: 1px;\n    padding: 5px 5px 5px 5px;\n    text-align: center;\n  }\n\n  #attndTable[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n\n  #printcontainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100%;\n    padding: 10px 10px 10px 10px;\n  }"]}),i})();function eS(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",56),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).searchKey=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("ngModel",e.searchKey)}}function oS(i,a){if(1&i&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.s9C("value",e.shiftCode),t.xp6(1),t.AsE("",e.shiftCode,"-",o.isArabic?e.shiftNumberNameAR:e.shiftNumberNameEN,"")}}const mo=function(){return{standalone:!0}};function iS(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"select",57),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).searchKey=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.TgZ(1,"option",58),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.YNc(5,oS,2,3,"option",59),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("ngModel",e.searchKey)("ngModelOptions",t.DdM(9,mo)),t.xp6(2),t.AsE("",t.lcZ(3,5,"Select")," ",t.lcZ(4,7,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",e.listOfShiftCodes2)}}function nS(i,a){if(1&i){const e=t.EpF();t.ynx(0,32),t.TgZ(1,"div",33),t.TgZ(2,"div",34),t.TgZ(3,"div",35),t.TgZ(4,"h4",36),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"fieldset",37),t.TgZ(8,"label",38),t.TgZ(9,"input",39),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().reportType=n}),t.qZA(),t._uU(10,"\xa0 Attendance\xa0 "),t.TgZ(11,"input",40),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().reportType=n}),t.qZA(),t._uU(12,"\xa0TimeSheet "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",41),t.TgZ(14,"div",35),t.TgZ(15,"h4",36),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"fieldset",37),t.YNc(19,eS,1,1,"input",42),t.YNc(20,iS,6,10,"select",43),t._uU(21," \xa0 "),t.TgZ(22,"label"),t.TgZ(23,"input",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().filterType=n})("click",function(){return t.CHM(e),t.oxw().searchKey=""}),t.qZA(),t._uU(24," \xa0Employee \xa0 "),t.TgZ(25,"input",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().filterType=n})("click",function(){return t.CHM(e),t.oxw().searchKey=""}),t.qZA(),t._uU(26," \xa0ShiftCode "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",45),t.TgZ(28,"div",46),t.TgZ(29,"span"),t.TgZ(30,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().postAttendance()}),t._UZ(31,"i",48),t.qZA(),t.TgZ(32,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().autoAttendance(-1)}),t._UZ(33,"i",49),t.qZA(),t.TgZ(34,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearAttendance()}),t._UZ(35,"i",50),t.qZA(),t.qZA(),t.TgZ(36,"span"),t.TgZ(37,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().reloadData()}),t._UZ(38,"i",51),t.qZA(),t.qZA(),t.TgZ(39,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._UZ(40,"i",52),t.qZA(),t.qZA(),t.TgZ(41,"div",53),t.TgZ(42,"div",54),t.TgZ(43,"fieldset",37),t.TgZ(44,"label"),t.TgZ(45,"input",55),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().highlightPostedAtt=n}),t.qZA(),t._uU(46),t.ALo(47,"translate"),t.TgZ(48,"input",55),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().highlightPendingAtt=n}),t.qZA(),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,20,"Report_Type")),t.xp6(4),t.Q6J("ngModel",e.reportType),t.xp6(2),t.Q6J("value","TimeSheet")("ngModel",e.reportType),t.xp6(5),t.Oqu(t.lcZ(17,22,"Search")),t.xp6(3),t.Q6J("ngIf","employee"==e.filterType),t.xp6(1),t.Q6J("ngIf","shiftCode"==e.filterType),t.xp6(3),t.Q6J("value","employee")("ngModel",e.filterType),t.xp6(2),t.Q6J("value","shiftCode")("ngModel",e.filterType),t.xp6(5),t.Q6J("matTooltip",e.translateToolTip("Post_Attendance")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Enter_Auto_Attendance")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Clear_Attendance")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Reload_Data")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Download")),t.xp6(6),t.Q6J("ngModel",e.highlightPostedAtt),t.xp6(1),t.hij("",t.lcZ(47,24,"Show_Posted_Attendance")," \xa0 "),t.xp6(2),t.Q6J("ngModel",e.highlightPendingAtt),t.xp6(1),t.hij("",t.lcZ(50,26,"Show_Pending_Attendance")," \xa0 ")}}function aS(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",null==e.result?null:e.result.daysInMonth2),t.xp6(1),t.AsE("",null==e.result?null:e.result.month2Text,"-",null==e.result?null:e.result.year2Text,"")}}function sS(i,a){if(1&i&&(t.TgZ(0,"span",71),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.getWeekDay(null==e?null:e.attnDate)," ")}}function rS(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",72),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).autoAttendance(n)}),t._UZ(1,"i",73),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Enter_Auto_Attendance"))}}function lS(i,a){if(1&i&&(t.TgZ(0,"th",68),t.YNc(1,sS,2,1,"span",69),t.YNc(2,rS,2,1,"span",70),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.s9C("id",n.getDayBackground(o)),t.Q6J("matTooltip",n.getDayTooltip(e)),t.xp6(1),t.Q6J("ngIf",n.activeColumn!=o&&(!(null!=e&&e.isHoliday)||n.activeColumn<o)),t.xp6(1),t.Q6J("ngIf",n.activeColumn==o||(null==e?null:e.isHoliday)&&n.activeColumn>o)}}function cS(i,a){1&i&&(t.ynx(0),t.TgZ(1,"th",74),t._uU(2," \u0627\u064a\u0627\u0645 \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628 "),t.qZA(),t.TgZ(3,"th",74),t._uU(4," \u0627\u064a\u0627\u0645 \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(5,"th",74),t._uU(6," \u0633\u0627\u0639\u0627\u062a\xa0\u0627\u0644\u0639\u0645\u0644\xa0\u0627\u0644\u0645\u0637\u0644\u0648\u0628 "),t.qZA(),t.TgZ(7,"th",74),t._uU(8," \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(9,"th",74),t._uU(10," \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0637\u0644\u0629 \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064a\u0629 "),t.qZA(),t.TgZ(11,"th",74),t._uU(12," \u0627\u062c\u0627\u0632\u0629 \u0633\u0646\u0648\u064a\u0629 "),t.qZA(),t.TgZ(13,"th",74),t._uU(14," \u0625\u062c\u0627\u0632\u0629 \u062e\u0627\u0635\u0629/\u0637\u0627\u0631\u0626\u0629 "),t.qZA(),t.TgZ(15,"th",74),t._uU(16," \u0627\u062c\u0627\u0632\u0629 \u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0647 "),t.qZA(),t.TgZ(17,"th",74),t._uU(18," \u0627\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629 "),t.qZA(),t.TgZ(19,"th",74),t._uU(20," \u0625\u062c\u0627\u0632\u0629 \u0627\u062e\u062a\u0628\u0627\u0631\u0627\u062a "),t.qZA(),t.TgZ(21,"th",74),t._uU(22," \u063a\u064a\u0627\u0628 "),t.qZA(),t.TgZ(23,"th",74),t._uU(24," \u0627\u0646\u0633\u062d\u0627\u0628 "),t.qZA(),t.TgZ(25,"th",75),t._uU(26," \u062c\u0632\u0627\u0621\u0627\u062a "),t.qZA(),t.TgZ(27,"th",75),t._uU(28," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u062a\u0627\u062e\u064a\u0631 "),t.qZA(),t.TgZ(29,"th",76),t._uU(30," \u0648\u0642\u062a \u0627\u0636\u0627\u0641\u0649 "),t.qZA(),t.BQk())}function pS(i,a){if(1&i&&(t.TgZ(0,"th",68),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.s9C("id",n.getDayBackground(o)),t.Q6J("matTooltip",n.getDayTooltip(e)),t.xp6(1),t.hij(" ",e.day," ")}}function uS(i,a){1&i&&(t.ynx(0),t.TgZ(1,"th",74),t._uU(2," Required Working Days "),t.qZA(),t.TgZ(3,"th",74),t._uU(4," Actual Working Days "),t.qZA(),t.TgZ(5,"th",74),t._uU(6," Required Working Hours "),t.qZA(),t.TgZ(7,"th",74),t._uU(8," Actual Working Hours "),t.qZA(),t.TgZ(9,"th",74),t._uU(10," OF "),t.qZA(),t.TgZ(11,"th",74),t._uU(12," AL "),t.qZA(),t.TgZ(13,"th",74),t._uU(14," EL "),t.qZA(),t.TgZ(15,"th",74),t._uU(16," UL "),t.qZA(),t.TgZ(17,"th",74),t._uU(18," SL "),t.qZA(),t.TgZ(19,"th",74),t._uU(20," STL "),t.qZA(),t.TgZ(21,"th",74),t._uU(22," A "),t.qZA(),t.TgZ(23,"th",74),t._uU(24," W "),t.qZA(),t.TgZ(25,"th",75),t._uU(26," Penalty "),t.qZA(),t.TgZ(27,"th",75),t._uU(28," Late Hours "),t.qZA(),t.TgZ(29,"th",76),t._uU(30," OT "),t.qZA(),t.BQk())}function dS(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t._uU(2,"No Attendance Found"),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",(null==e.result||null==e.result.columns?null:e.result.columns.length)+4)}}function _S(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," ")}}function mS(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," ")}}function gS(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," ")}}function hS(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," ")}}function ZS(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function fS(i,a){if(1&i&&(t.TgZ(0,"td",84),t._uU(1),t.YNc(2,ZS,2,0,"span",85),t.TgZ(3,"span",86),t._UZ(4,"br"),t._uU(5),t.qZA(),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")")}}function AS(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function CS(i,a){if(1&i&&(t.TgZ(0,"td",84),t._uU(1),t.YNc(2,AS,2,0,"span",88),t.TgZ(3,"span",86),t._UZ(4,"br"),t._uU(5),t.qZA(),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")")}}function TS(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",89),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).singClick(r,s)})("contextmenu",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).onRightClick(r,s)}),t._uU(1),t.qZA()}if(2&i){const e=a.index,o=t.oxw(2).index,n=t.oxw(3);t.s9C("id",n.getCellBackGround(o,e)),t.Q6J("matTooltip",n.getToolTip(o,e)),t.xp6(1),t.hij(" ",n.getAttendanceFlag(o,e)," ")}}function vS(i,a){if(1&i&&(t.TgZ(0,"td",92),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"WDC")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",t.xi3(2,4,null==s.result||null==s.result.rows[o]?null:s.result.rows[o].wdc,"1.0-1")," ")}}function xS(i,a){if(1&i&&(t.TgZ(0,"td",92),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"WDC")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",t.xi3(2,4,null==s.result||null==s.result.rows[o]?null:s.result.rows[o].wdc,"1.0-1")," ")}}function qS(i,a){if(1&i&&(t.TgZ(0,"td",92),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"WDC")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",t.xi3(2,4,(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].attendedShiftsTime)/(null==s.result?null:s.result.siteWorkingTime),"1.0-1")," ")}}function bS(i,a){if(1&i&&(t.TgZ(0,"td",92),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"WDC")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",t.xi3(2,4,(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].attendedShiftsTime)/(null==s.result?null:s.result.siteWorkingTime),"1.0-1")," ")}}function yS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"No.Of.Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime)/60)," ")}}function SS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"No.Of.Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime)/60)," ")}}function wS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"No.Of.Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].attendedShiftsTime)/60)," ")}}function US(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"No.Of.Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].attendedShiftsTime)/60)," ")}}function DS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OF")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",t.xi3(2,4,((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].contractualShiftTime)-(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime))/s.result.siteWorkingTime,"1.0-1")," ")}}function LS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OF")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",t.xi3(2,4,((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].contractualShiftTime)-(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime))/s.result.siteWorkingTime,"1.0-1")," ")}}function NS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"AL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].AL," ")}}function ES(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"AL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].AL," ")}}function OS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"EL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].EL," ")}}function kS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"EL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].EL," ")}}function jS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"UL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].UL," ")}}function MS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"UL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].UL," ")}}function RS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"SL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].SL," ")}}function PS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"SL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].SL," ")}}function FS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"STL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].STL," ")}}function IS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"STL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].STL," ")}}function YS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Ab")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab," ")}}function JS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Ab")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab," ")}}function QS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"W")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].W," ")}}function BS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"W")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].W," ")}}function HS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Penalty")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",2*(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab)," ")}}function $S(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Penalty")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",2*(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab)," ")}}function VS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Late Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].lateHrs)," ")}}function GS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Late Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].lateHrs)," ")}}function WS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OT")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].OT)," ")}}function zS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OT")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].OT)," ")}}function XS(i,a){if(1&i&&(t.ynx(0),t.YNc(1,vS,3,7,"td",90),t.YNc(2,xS,3,7,"td",90),t.YNc(3,qS,3,7,"td",90),t.YNc(4,bS,3,7,"td",90),t.YNc(5,yS,2,4,"td",91),t.YNc(6,SS,2,4,"td",91),t.YNc(7,wS,2,4,"td",91),t.YNc(8,US,2,4,"td",91),t.YNc(9,DS,3,7,"td",91),t.YNc(10,LS,3,7,"td",91),t.YNc(11,NS,2,4,"td",91),t.YNc(12,ES,2,4,"td",91),t.YNc(13,OS,2,4,"td",91),t.YNc(14,kS,2,4,"td",91),t.YNc(15,jS,2,4,"td",91),t.YNc(16,MS,2,4,"td",91),t.YNc(17,RS,2,4,"td",91),t.YNc(18,PS,2,4,"td",91),t.YNc(19,FS,2,4,"td",91),t.YNc(20,IS,2,4,"td",91),t.YNc(21,YS,2,4,"td",91),t.YNc(22,JS,2,4,"td",91),t.YNc(23,QS,2,4,"td",91),t.YNc(24,BS,2,4,"td",91),t.YNc(25,HS,2,4,"td",91),t.YNc(26,$S,2,4,"td",91),t.YNc(27,VS,2,4,"td",91),t.YNc(28,GS,2,4,"td",91),t.YNc(29,WS,2,4,"td",91),t.YNc(30,zS,2,4,"td",91),t.BQk()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber))}}function KS(i,a){if(1&i&&(t.ynx(0),t.YNc(1,_S,2,3,"td",79),t.YNc(2,mS,2,3,"td",79),t.YNc(3,gS,2,3,"td",80),t.YNc(4,hS,2,3,"td",80),t.YNc(5,fS,6,5,"td",81),t.YNc(6,CS,6,5,"td",81),t.TgZ(7,"td",82),t._uU(8),t.qZA(),t.YNc(9,TS,2,3,"td",83),t.YNc(10,XS,31,30,"ng-container",63),t.BQk()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.s9C("id",s.getShiftBgColor(null==n?null:n.shiftCode)),t.xp6(1),t.hij(" ",s.getShiftNumberName(null==n?null:n.shiftCode)," "),t.xp6(1),t.Q6J("ngForOf",n.attendanceMatrix),t.xp6(1),t.Q6J("ngIf","TimeSheet"==s.reportType&&0!=(null==s.result?null:s.result.rows.length)&&!s.isLoading)}}function t5(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,KS,11,10,"ng-container",63),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.canShowRow(e))}}function e5(i,a){if(1&i&&(t.ynx(0),t.YNc(1,t5,2,1,"tr",78),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.result.rows)}}function o5(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function i5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",89),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).singClick(r,s)})("contextmenu",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).onRightClick(r,s)}),t._uU(1),t.qZA()}if(2&i){const e=a.index,o=t.oxw(2).index,n=t.oxw(3);t.s9C("id",n.getCellBackGround(o,e)),t.Q6J("matTooltip",n.getToolTip(o,e)),t.xp6(1),t.hij(" ",n.getAttendanceFlag(o,e)," ")}}function n5(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td",92),t._uU(2),t.ALo(3,"number"),t.qZA(),t.TgZ(4,"td",92),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td",93),t._uU(8),t.qZA(),t.TgZ(9,"td",93),t._uU(10),t.qZA(),t.TgZ(11,"td",93),t._uU(12),t.qZA(),t.TgZ(13,"td",93),t._uU(14),t.qZA(),t.TgZ(15,"td",93),t._uU(16),t.qZA(),t.TgZ(17,"td",93),t._uU(18),t.qZA(),t.TgZ(19,"td",93),t._uU(20),t.qZA(),t.TgZ(21,"td",93),t._uU(22),t.qZA(),t.TgZ(23,"td",93),t._uU(24),t.qZA(),t.TgZ(25,"td",93),t._uU(26),t.qZA(),t.TgZ(27,"td",93),t._uU(28),t.qZA(),t.TgZ(29,"td",93),t._uU(30),t.qZA(),t.TgZ(31,"td",93),t._uU(32),t.qZA(),t.BQk()),2&i){const e=t.oxw(2).index,o=t.oxw(3);t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"WDC")),t.xp6(1),t.hij(" ",t.xi3(3,45,null==o.result||null==o.result.rows[e]?null:o.result.rows[e].wdc,"1.0-1")," "),t.xp6(2),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"WDC")),t.xp6(1),t.hij(" ",t.xi3(6,48,(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].attendedShiftsTime)/(null==o.result?null:o.result.siteWorkingTime),"1.0-1")," "),t.xp6(2),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"No.Of.Hrs")),t.xp6(1),t.hij(" ",o.hrsToStrHrsMins((null==o.result||null==o.result.rows[e]?null:o.result.rows[e].allottedShiftTime)/60)," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"No.Of.Hrs")),t.xp6(1),t.hij(" ",o.hrsToStrHrsMins((null==o.result||null==o.result.rows[e]?null:o.result.rows[e].attendedShiftsTime)/60)," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"OF")),t.xp6(1),t.hij(" ",((null==o.result||null==o.result.rows[e]?null:o.result.rows[e].contractualShiftTime)-(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].allottedShiftTime))/o.result.siteWorkingTime," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"AL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].AL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"EL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].EL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"UL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].UL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"SL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].SL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"STL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].STL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Ab")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].Ab," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"W")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].W," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Penalty")),t.xp6(1),t.hij(" ",2*(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].Ab)," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Late Hrs")),t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].lateHrs)," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"OT")),t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].OT)," ")}}function a5(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td",82),t._uU(2),t.qZA(),t.TgZ(3,"td",82),t._uU(4),t.qZA(),t.TgZ(5,"td",84),t._uU(6),t.YNc(7,o5,2,0,"span",85),t.TgZ(8,"span",86),t._UZ(9,"br"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"td",82),t._uU(12),t.qZA(),t.YNc(13,i5,2,3,"td",83),t.YNc(14,n5,33,51,"ng-container",63),t.BQk()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," "),t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," "),t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")"),t.xp6(1),t.s9C("id",s.getShiftBgColor(null==n?null:n.shiftCode)),t.xp6(1),t.hij(" ",s.getShiftNumberName(null==n?null:n.shiftCode)," "),t.xp6(1),t.Q6J("ngForOf",n.attendanceMatrix),t.xp6(1),t.Q6J("ngIf","TimeSheet"==s.reportType&&0!=(null==s.result?null:s.result.rows.length)&&!s.isLoading)}}function s5(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,a5,15,12,"ng-container",63),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.canShowRow(e))}}function r5(i,a){if(1&i&&(t.ynx(0),t.YNc(1,s5,2,1,"tr",78),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.result.rows)}}function l5(i,a){if(1&i&&(t.TgZ(0,"td",98),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime,"1.0-1")," ")}}function c5(i,a){if(1&i&&(t.TgZ(0,"td",101),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function p5(i,a){if(1&i&&(t.TgZ(0,"td",98),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)," ")}}function u5(i,a){if(1&i&&(t.TgZ(0,"td",101),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function d5(i,a){if(1&i&&(t.TgZ(0,"td",106),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime)/((null==o.result?null:o.result.siteWorkingTime)/60)-(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function _5(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",94),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"td"),t.TgZ(6,"td",95),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td",95),t._uU(10),t.ALo(11,"number"),t.qZA(),t.TgZ(12,"td",95),t._uU(13),t.qZA(),t.TgZ(14,"td",95),t._uU(15),t.qZA(),t.TgZ(16,"td",95),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"td",95),t._uU(20),t.qZA(),t.TgZ(21,"td",95),t._uU(22),t.qZA(),t.TgZ(23,"td",95),t._uU(24),t.qZA(),t.TgZ(25,"td",95),t._uU(26),t.qZA(),t.TgZ(27,"td",95),t._uU(28),t.qZA(),t.TgZ(29,"td",95),t._uU(30),t.qZA(),t.TgZ(31,"td",95),t._uU(32),t.qZA(),t.TgZ(33,"td",95),t._uU(34),t.qZA(),t.TgZ(35,"td",95),t._uU(36),t.ALo(37,"number"),t.qZA(),t.TgZ(38,"td",95),t._uU(39),t.ALo(40,"number"),t.qZA(),t.qZA(),t.TgZ(41,"tr"),t.TgZ(42,"td",96),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.YNc(45,l5,3,4,"td",97),t.TgZ(46,"td",98),t._uU(47),t.ALo(48,"number"),t.qZA(),t._UZ(49,"td",99),t._UZ(50,"td",99),t._UZ(51,"td",99),t._UZ(52,"td",99),t._UZ(53,"td",99),t._UZ(54,"td",99),t._UZ(55,"td",99),t._UZ(56,"td",99),t._UZ(57,"td",99),t._UZ(58,"td",99),t._UZ(59,"td",99),t._UZ(60,"td",99),t._UZ(61,"td",99),t._UZ(62,"td",99),t.qZA(),t.TgZ(63,"tr"),t.TgZ(64,"td",94),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.YNc(67,c5,3,4,"td",100),t.TgZ(68,"td",101),t._uU(69),t.ALo(70,"number"),t.qZA(),t._UZ(71,"td",99),t._UZ(72,"td",99),t._UZ(73,"td",99),t._UZ(74,"td",99),t._UZ(75,"td",99),t._UZ(76,"td",99),t._UZ(77,"td",99),t._UZ(78,"td",99),t._UZ(79,"td",99),t._UZ(80,"td",99),t._UZ(81,"td",99),t._UZ(82,"td",99),t._UZ(83,"td",99),t._UZ(84,"td",99),t.qZA(),t.TgZ(85,"tr"),t.TgZ(86,"td",102),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.YNc(89,p5,2,1,"td",103),t.TgZ(90,"td",98),t._uU(91),t.qZA(),t._UZ(92,"td",99),t._UZ(93,"td",99),t._UZ(94,"td",99),t._UZ(95,"td",99),t._UZ(96,"td",99),t._UZ(97,"td",99),t._UZ(98,"td",99),t._UZ(99,"td",99),t._UZ(100,"td",99),t._UZ(101,"td",99),t._UZ(102,"td",99),t._UZ(103,"td",99),t._UZ(104,"td",99),t._UZ(105,"td",99),t.qZA(),t.TgZ(106,"tr"),t.TgZ(107,"td",94),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.YNc(110,u5,3,4,"td",100),t.TgZ(111,"td",101),t._uU(112),t.ALo(113,"number"),t.qZA(),t._UZ(114,"td",99),t._UZ(115,"td",99),t._UZ(116,"td",99),t._UZ(117,"td",99),t._UZ(118,"td",99),t._UZ(119,"td",99),t._UZ(120,"td",99),t._UZ(121,"td",99),t._UZ(122,"td",99),t._UZ(123,"td",99),t._UZ(124,"td",99),t._UZ(125,"td",99),t._UZ(126,"td",99),t._UZ(127,"td",99),t.qZA(),t.TgZ(128,"tr"),t.TgZ(129,"td",104),t._uU(130),t.ALo(131,"translate"),t.qZA(),t.YNc(132,d5,3,4,"td",105),t.TgZ(133,"td",106),t._uU(134),t.ALo(135,"number"),t.qZA(),t._UZ(136,"td",99),t._UZ(137,"td",99),t._UZ(138,"td",99),t._UZ(139,"td",99),t._UZ(140,"td",99),t._UZ(141,"td",99),t._UZ(142,"td",99),t._UZ(143,"td",99),t._UZ(144,"td",99),t._UZ(145,"td",99),t._UZ(146,"td",99),t._UZ(147,"td",99),t._UZ(148,"td",99),t._UZ(149,"td",99),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,32,"Total")," "),t.xp6(2),t.uIk("colspan",null==e.result?null:e.result.columns.length),t.xp6(2),t.hij(" ",t.xi3(8,34,null==e.rowGrandTotal?null:e.rowGrandTotal.wdc,"1.0-1")," "),t.xp6(3),t.hij(" ",t.xi3(11,37,(null==e.rowGrandTotal?null:e.rowGrandTotal.attendedShiftsTime)/(null==e.result?null:e.result.siteWorkingTime),"1.0")," "),t.xp6(3),t.hij(" ",e.hrsToStrHrsMins((null==e.rowGrandTotal?null:e.rowGrandTotal.wdc)*(null==e.result?null:e.result.siteWorkingTime)/60)," "),t.xp6(2),t.hij(" ",e.hrsToStrHrsMins((null==e.rowGrandTotal?null:e.rowGrandTotal.attendedShiftsTime)/60)," "),t.xp6(2),t.hij(" ",t.xi3(18,40,null==e.rowGrandTotal?null:e.rowGrandTotal.OF,"1.0-1")," "),t.xp6(3),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.AL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.EL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.UL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.SL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.STL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.Ab," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.W," "),t.xp6(2),t.hij(" ",2*(null==e.rowGrandTotal?null:e.rowGrandTotal.Ab)," "),t.xp6(2),t.hij(" ",t.xi3(37,43,null==e.rowGrandTotal?null:e.rowGrandTotal.lateHrs,"1.0-1")," "),t.xp6(3),t.hij(" ",t.xi3(40,46,null==e.rowGrandTotal?null:e.rowGrandTotal.OT,"1.0-1")," "),t.xp6(4),t.hij(" ",t.lcZ(44,49,"Total_Contracted_Hours")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(48,51,null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime,"1.0-1")," "),t.xp6(18),t.hij(" ",t.lcZ(66,54,"Total_Contracted_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(70,56,e.columnGrandTotal.contractualShiftTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(18),t.hij(" ",t.lcZ(88,59,"Actual_Hours")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",e.hrsToStrHrsMins(e.columnGrandTotal.attendedTime)," "),t.xp6(17),t.hij(" ",t.lcZ(109,61,"Actual_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(113,63,e.columnGrandTotal.attendedTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(18),t.hij(" ",t.lcZ(131,66,"Variance_of_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(135,68,(null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime)/((null==e.result?null:e.result.siteWorkingTime)/60)-(null==e.columnGrandTotal?null:e.columnGrandTotal.attendedTime)/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," ")}}function m5(i,a){if(1&i&&(t.TgZ(0,"table",61),t.TgZ(1,"tr"),t._UZ(2,"th",62),t.ynx(3),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.BQk(),t.YNc(6,aS,3,3,"ng-container",63),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"th",64),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",65),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",64),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,lS,3,4,"th",66),t.YNc(18,cS,31,0,"ng-container",63),t.qZA(),t.TgZ(19,"tr"),t.YNc(20,pS,2,3,"th",66),t.YNc(21,uS,31,0,"ng-container",63),t.qZA(),t.TgZ(22,"tbody",67),t.YNc(23,dS,3,1,"tr",63),t.YNc(24,e5,2,1,"ng-container",63),t.YNc(25,r5,2,1,"ng-container",63),t.YNc(26,_5,150,71,"ng-container",63),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.uIk("colspan",null==e.result?null:e.result.daysInMonth1),t.xp6(1),t.AsE("",null==e.result?null:e.result.month1Text,"-",null==e.result?null:e.result.year1Text,""),t.xp6(1),t.Q6J("ngIf",!(null!=e.result&&e.result.isSingleMonth)),t.xp6(3),t.hij(" ",t.lcZ(10,15,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(13,17,"Employee")," "),t.xp6(3),t.hij(" ",t.lcZ(16,19,"Shift")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading),t.xp6(2),t.Q6J("ngIf",0==(null==e.result?null:e.result.rows.length)),t.xp6(1),t.Q6J("ngIf",!e.isShiftFilterApplied()),t.xp6(1),t.Q6J("ngIf",e.isShiftFilterApplied()),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading)}}function g5(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",110),t._uU(4),t.qZA(),t.TgZ(5,"td",111),t._uU(6),t.qZA(),t.TgZ(7,"td",111),t._uU(8),t.qZA(),t.TgZ(9,"td",111),t._uU(10),t.qZA(),t.TgZ(11,"td",111),t._uU(12),t.qZA(),t.TgZ(13,"td",111),t._uU(14),t.qZA(),t.TgZ(15,"td",111),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(null==e?null:e.positionName),t.xp6(2),t.hij("",null==e?null:e.qty," "),t.xp6(2),t.hij("",null==e?null:e.dailyHrs," "),t.xp6(2),t.hij("",null==e?null:e.monthlyHrs," "),t.xp6(2),t.Oqu(null==e?null:e.monthlyShifts),t.xp6(2),t.hij("",(null==e?null:e.monthlyShifts)-(null==e?null:e.monthlyOffs)," "),t.xp6(2),t.Oqu(null==e?null:e.monthlyOffs)}}function h5(i,a){1&i&&(t.TgZ(0,"tr",115),t.TgZ(1,"td",116),t._uU(2,"*Incomplete_Shift_Locks"),t.qZA(),t.qZA())}function Z5(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td",117),t._uU(4),t.qZA(),t.TgZ(5,"th"),t._uU(6,"= "),t.qZA(),t.TgZ(7,"td",118),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.shiftCode),t.xp6(1),t.MGl("id","bgColorShift_",null==e?null:e.shiftNumber,""),t.xp6(1),t.hij("",o.isArabic?null==e?null:e.shiftName_AR:null==e?null:e.shiftName_EN," "),t.xp6(3),t.MGl("id","bgColorShift_",null==e?null:e.shiftNumber,""),t.xp6(1),t.hij("",o.isArabic?null==e?null:e.shiftNumberNameAR:null==e?null:e.shiftNumberNameEN," ")}}function f5(i,a){if(1&i&&(t.TgZ(0,"div",107),t.TgZ(1,"div",108),t.TgZ(2,"div",35),t.TgZ(3,"table",109),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th",110),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",111),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",111),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th",111),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th",111),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th",111),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th",111),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.YNc(29,g5,17,8,"tr",78),t.TgZ(30,"tr"),t.TgZ(31,"th",111),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"th",111),t._uU(35),t.qZA(),t.TgZ(36,"th",111),t._uU(37),t.qZA(),t.TgZ(38,"th",111),t._uU(39),t.qZA(),t.TgZ(40,"th",111),t._uU(41),t.qZA(),t.TgZ(42,"th",111),t._uU(43),t.qZA(),t.TgZ(44,"th",111),t._uU(45),t.qZA(),t.qZA(),t.YNc(46,h5,3,0,"tr",112),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",113),t.TgZ(48,"div",35),t.TgZ(49,"table",109),t.TgZ(50,"tr"),t.TgZ(51,"th",111),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"td"),t._uU(55),t.ALo(56,"number"),t.qZA(),t.qZA(),t.TgZ(57,"tr"),t.TgZ(58,"th",111),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"td"),t._uU(62),t.ALo(63,"number"),t.qZA(),t.qZA(),t.TgZ(64,"tr"),t.TgZ(65,"th",111),t._uU(66),t.ALo(67,"translate"),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"td"),t._uU(70),t.ALo(71,"number"),t.qZA(),t.qZA(),t.TgZ(72,"tr"),t.TgZ(73,"th",111),t._uU(74),t.ALo(75,"translate"),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"td"),t._uU(78),t.ALo(79,"number"),t.qZA(),t.qZA(),t.TgZ(80,"tr"),t.TgZ(81,"th",111),t._uU(82),t.ALo(83,"translate"),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"td"),t._uU(86),t.ALo(87,"number"),t.qZA(),t.qZA(),t.TgZ(88,"tr"),t.TgZ(89,"th",111),t._uU(90),t.ALo(91,"translate"),t.ALo(92,"translate"),t.qZA(),t.TgZ(93,"td"),t._uU(94),t.ALo(95,"number"),t.qZA(),t.qZA(),t.TgZ(96,"tr"),t.TgZ(97,"th",111),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"td"),t._uU(101),t.ALo(102,"number"),t.qZA(),t.qZA(),t.TgZ(103,"tr"),t.TgZ(104,"th",111),t._uU(105),t.ALo(106,"translate"),t.qZA(),t.TgZ(107,"td"),t._uU(108),t.ALo(109,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(110,"div",114),t.TgZ(111,"div",35),t.TgZ(112,"table",109),t.YNc(113,Z5,9,5,"tr",78),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,38,"S.No")),t.xp6(3),t.hij("",t.lcZ(10,40,"Position")," "),t.xp6(3),t.hij("",t.lcZ(13,42,"Qty")," "),t.xp6(3),t.hij("",t.lcZ(16,44,"Daily_Hrs")," "),t.xp6(3),t.hij("",t.lcZ(19,46,"Monthly_Hrs")," "),t.xp6(3),t.hij("",t.lcZ(22,48,"Scheduled_Shifts")," "),t.xp6(3),t.hij("",t.lcZ(25,50,"Assigned_Shifts")," "),t.xp6(3),t.hij("",t.lcZ(28,52,"OFFS")," "),t.xp6(2),t.Q6J("ngForOf",null==e.roasterReport?null:e.roasterReport.rowsByPositions),t.xp6(3),t.Oqu(t.lcZ(33,54,"Total")),t.xp6(3),t.hij("",null==e.roasterReport?null:e.roasterReport.qty," "),t.xp6(2),t.hij("",null==e.roasterReport?null:e.roasterReport.dailyHrs," "),t.xp6(2),t.hij("",null==e.roasterReport?null:e.roasterReport.monthlyHrs," "),t.xp6(2),t.Oqu(null==e.roasterReport?null:e.roasterReport.monthlyShifts),t.xp6(2),t.hij("",(null==e.roasterReport?null:e.roasterReport.monthlyShifts)-(null==e.roasterReport?null:e.roasterReport.monthlyOffs)," "),t.xp6(2),t.Oqu(null==e.roasterReport?null:e.roasterReport.monthlyOffs),t.xp6(1),t.Q6J("ngIf",null==e.result?null:e.result.isExistEmptyShifts),t.xp6(6),t.Oqu(t.lcZ(53,56,"Contracted_Shifts")),t.xp6(3),t.hij(" ",t.xi3(56,58,e.columnGrandTotal.contractualShiftTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(60,61,"Contracted_Hours")),t.xp6(3),t.hij("",t.xi3(63,63,null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime,"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(67,66,"Actual_Shifts"),"(",t.lcZ(68,68,"With_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(71,70,(e.columnGrandTotal.attendedTime+(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)/2)/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(75,73,"Actual_Hours"),"(",t.lcZ(76,75,"With_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(79,77,e.columnGrandTotal.attendedTime+(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)/2,"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(83,80,"Actual_Shifts"),"(",t.lcZ(84,82,"Without_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(87,84,e.columnGrandTotal.attendedTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(91,87,"Actual_Hours"),"(",t.lcZ(92,89,"Without_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(95,91,e.columnGrandTotal.attendedTime,"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(99,94,"Overtime_Hours")),t.xp6(3),t.hij("",t.xi3(102,96,null==e.rowGrandTotal?null:e.rowGrandTotal.OT,"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(106,99,"Overtime_Shifts\t")),t.xp6(3),t.hij(" ",t.xi3(109,101,60*(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)*1.5/(null==e.result?null:e.result.siteWorkingTime),"1.0-1"),""),t.xp6(5),t.Q6J("ngForOf",e.listOfShiftCodes2)}}let A5=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(u),this.datePipe=e,this.dialog=o,this.oprService=n,this.fb=s,this.http=r,this.router=c,this.apiService=p,this.authService=u,this.utilService=d,this.translate=_,this.notifyService=h,this.validationService=A,this.dialogRef=C,this.result={rows:[],columns:[]},this.filteredRows=[],this.rows=[],this.isLoading=!1,this.isArabic=!1,this.employeesGroup=[],this.projectCode="",this.siteCode="",this.fromDate=new Date,this.toDate=new Date,this.minDate=new Date,this.maxDate=new Date,this.projectSelectionList=[],this.siteSelectionList=[],this.readonly=!1,this.isFromProjectSiteActions=!0,this.listOfShiftCodes2=[],this.reportType="TimeSheet",this.filterType="employee",this.highlightPostedAtt=!1,this.highlightPendingAtt=!1,this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1},this.columnGrandTotal={contractualShiftTime:0,attendedTime:0},this.rowGrandTotal={contractualShiftTime:0,wdc:10,AL:0,UL:0,SL:0,EL:0,STL:0,Ab:0,OT:0,lateHrs:0,W:0,OF:0},this.pageNumber=0,this.pageSize=1,this.totalRowsCount=0,this.totalEmployeesCount=0,this.tempAltEmployeeNumber="",this.filter={employeeNumber:"",shiftCode:""},this.searchKey="",this.dataProcessedTime=new Date,this.isDataProcessed=!1,this.time=0,this.waitingTime=60,this.activeColumn=-1,this.shiftTypeNames=[{number:0,nameEn:"OFF",nameAr:"\u0639\u0637\u0644\u0629ss"},{number:1,nameEn:"Shift 1",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u0623\u0648\u0644\u0649"},{number:2,nameEn:"Shift 2",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0646\u064a\u0629"},{number:3,nameEn:"Shift 3",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"},{number:4,nameEn:"Shift 4",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"}],this.roasterReport={rows:[]}}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.isFromProjectSiteActions&&(this.maxDate=this.inputData.oldestRoasterStartDate,this.setForm())}setForm(){this.isFromProjectSiteActions&&(this.readonly=!0,this.getProjectData(),this.getSiteData(),this.loadShiftCodes())}submit(){}loadProjectSelectionList(){this.apiService.getall("project/getSelectProjectList2").subscribe(e=>{this.projectSelectionList=e})}loadSiteSelectionListForProject(){this.apiService.getall(`projectSites/getSelectProjectSitesListByProjectCode/${this.projectCode}`).subscribe(e=>{this.siteSelectionList=e})}getProjectData(){this.apiService.getall(`project/getProjectByProjectCode/${this.projectCode}`).subscribe(e=>{this.projectData=e})}getSiteData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.projectCode}/${this.siteCode}`).subscribe(e=>{this.siteData=e})}getReport(){if(this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1},this.fromDate.getDate()>28)this.notifyService.showInfo("Invalid Payroll Date: Select Date between 1-28");else{let o=new Date(this.fromDate);o.setMinutes(o.getMinutes()-o.getTimezoneOffset()),this.fromDate=o,this.getReports()}}getRoasterReport(e){this.apiService.post("Reports/getRoasterPayrollReport",e).subscribe(o=>{this.roasterReport=o})}calculateRowGrandTotal(){var e;this.rowGrandTotal={contractualShiftTime:0,wdc:0,AL:0,UL:0,SL:0,EL:0,STL:0,Ab:0,OT:0,lateHrs:0,W:0,OF:0,attendedShiftsTime:0};for(let o=0;o<(null===(e=this.result)||void 0===e?void 0:e.rows.length);o++)(0==o||this.result.rows[o].employeeNumber!=this.result.rows[o-1].employeeNumber)&&(this.rowGrandTotal.wdc+=this.result.rows[o].wdc,this.rowGrandTotal.attendedShiftsTime+=this.result.rows[o].attendedShiftsTime,this.rowGrandTotal.contractualShiftTime+=this.result.rows[o].contractualShiftTime,this.rowGrandTotal.allottedShiftTime+=this.result.rows[o].allottedShiftTime,this.rowGrandTotal.AL+=this.result.rows[o].AL,this.rowGrandTotal.UL+=this.result.rows[o].UL,this.rowGrandTotal.SL+=this.result.rows[o].SL,this.rowGrandTotal.EL+=this.result.rows[o].EL,this.rowGrandTotal.STL+=this.result.rows[o].STL,this.rowGrandTotal.Ab+=this.result.rows[o].Ab,this.rowGrandTotal.OT+=this.result.rows[o].OT,this.rowGrandTotal.lateHrs+=this.result.rows[o].lateHrs,this.rowGrandTotal.W+=this.result.rows[o].W,this.rowGrandTotal.OF+=(this.result.rows[o].contractualShiftTime-this.result.rows[o].allottedShiftTime)/this.result.siteWorkingTime)}getReports(){if(""!=this.projectCode&&""!=this.siteCode){let e={projectCode:this.projectCode,siteCode:this.siteCode,payrollStartDate:this.fromDate,pageNumber:this.pageNumber,pageSize:this.pageSize,employeeNumber:""};this.isLoading=!0,this.apiService.post("Reports/getAttendancePayrollReport",e).subscribe(o=>{var n,s;this.result=o,(null===(n=null==o?void 0:o.rows)||void 0===n?void 0:n.length)>0?((null==o?void 0:o.isExistEmptyShifts)&&this.notifyService.showWarning("Incomplete_Shift_Locks"),this.fromDate=null==o?void 0:o.columns[0].attnDate,this.toDate=null==o?void 0:o.columns[(null===(s=null==o?void 0:o.columns)||void 0===s?void 0:s.length)-1].attnDate,this.totalEmployeesCount=o.totalEmployeesCount,this.loadRemainingData(e),this.getRoasterReport(e),this.RefreshOffs()):(this.notifyService.showInfo("No Roasters Found"),this.isLoading=!1)},o=>{this.isLoading=!1,this.notifyService.showError(o.error.message)})}}loadRemainingData(e){e.pageNumber++,e.pageNumber>Math.floor(this.totalEmployeesCount/this.pageSize)?(this.employeesGroup=[],this.isLoading=!1,this.generateReportAndCalculations(),this.startTimer()):this.apiService.post("Reports/getAttendancePayrollReport",e).subscribe(o=>{this.result.rows=this.result.rows.concat(o.rows),this.loadRemainingData(e)})}filterRows(e){return e.filter(o=>o.employeeNumber)}generateReportAndCalculations(){this.employeesGroup=[],this.result.rows.sort((e,o)=>e.employeeNumber<o.employeeNumber?-1:1),this.result.rows.forEach(e=>{e.uniqueShiftsCount>0&&this.employeesGroup.indexOf(o=>o.employeeNumber==e.employeeNumber)<0&&this.employeesGroup.push({employeeNumber:e.employeeNumber})}),this.calculateColumnTotals(this.result),this.calculateRowTotals(this.result),this.updateActiveColumn(),this.calculateRowGrandTotal()}updateActiveColumn(){this.activeColumn=-1;for(let e=0;e<this.result.columns.length;e++)if(this.result.rows.findIndex(o=>o.attendanceMatrix[e].attndId>0)<0&&!this.result.columns[e].isHoliday&&this.result.rows.findIndex(o=>"O"!=o.shiftCode&&"-"==o.attendanceMatrix[e].attnFlag)>=0){this.activeColumn=e;break}}calculateRowTotals(e){var o,n,s,r,c,p,u,d,_,h,A,C,S,L,U,M,O,F,P,st,H,z,et,ht,ct,Y;for(let R=0;R<(null==e?void 0:e.rows.length);R++){let $=null==e?void 0:e.rows.filter(tt=>tt.employeeNumber==(null==e?void 0:e.rows[R].employeeNumber)),St=0,qt=0,Tt=0,Ct=0,I=0,J=0,yt=0,bt=0,wt=0,vt=0,Lt=0,G=0,K=0;for(let tt=0;tt<$.length;tt++)for(let rt=0;rt<(null==e?void 0:e.columns.length);rt++)qt+=$[tt].attendanceMatrix[rt].contractualShiftTime,Tt+=$[tt].attendanceMatrix[rt].allottedShiftTime,Ct+=null===(o=$[tt].attendanceMatrix[rt])||void 0===o?void 0:o.attendedTime,$[tt].attendanceMatrix[rt].allottedShiftTime>0&&St++,1==(null===(n=$[tt].attendanceMatrix[rt])||void 0===n?void 0:n.isOnLeave)?"AL"==$[tt].attendanceMatrix[rt].attnFlag?I++:"UL"==$[tt].attendanceMatrix[rt].attnFlag?wt++:"CL"==$[tt].attendanceMatrix[rt].attnFlag?yt++:"STL"==$[tt].attendanceMatrix[rt].attnFlag?bt++:"EL"==$[tt].attendanceMatrix[rt].attnFlag?J++:"W"==$[tt].attendanceMatrix[rt].attnFlag&&Lt++:"S"==(null===(s=$[tt].attendanceMatrix[rt])||void 0===s?void 0:s.attnFlag)||"A"==(null===(r=$[tt].attendanceMatrix[rt])||void 0===r?void 0:r.attnFlag)?vt++:(null===(c=$[tt].attendanceMatrix[rt])||void 0===c?void 0:c.refIdForAlt)>0?G+=null!==(u=null===(p=$[tt].attendanceMatrix[rt])||void 0===p?void 0:p.attendedTime)&&void 0!==u?u:0:0==(null===(_=null===(d=$[tt])||void 0===d?void 0:d.attendanceMatrix[rt])||void 0===_?void 0:_.refIdForAlt)&&(null===(A=null===(h=$[tt])||void 0===h?void 0:h.attendanceMatrix[rt])||void 0===A?void 0:A.allottedShiftTime)<(null===(S=null===(C=$[tt])||void 0===C?void 0:C.attendanceMatrix[rt])||void 0===S?void 0:S.attendedTime)&&(G+=(null===(U=null===(L=$[tt])||void 0===L?void 0:L.attendanceMatrix[rt])||void 0===U?void 0:U.attendedTime)-(null===(M=$[tt].attendanceMatrix[rt])||void 0===M?void 0:M.allottedShiftTime)),(null===(O=$[tt].attendanceMatrix[rt])||void 0===O?void 0:O.attndId)>0&&"S"!=(null===(F=$[tt].attendanceMatrix[rt])||void 0===F?void 0:F.attnFlag)&&"A"!=(null===(P=$[tt].attendanceMatrix[rt])||void 0===P?void 0:P.attnFlag)&&(null===(st=$[tt].attendanceMatrix[rt])||void 0===st?void 0:st.allottedShiftTime)>(null===(z=null===(H=$[tt])||void 0===H?void 0:H.attendanceMatrix[rt])||void 0===z?void 0:z.attendedTime)&&(K+=(null===(ht=null===(et=$[tt])||void 0===et?void 0:et.attendanceMatrix[rt])||void 0===ht?void 0:ht.allottedShiftTime)-(null===(Y=null===(ct=$[tt])||void 0===ct?void 0:ct.attendanceMatrix[rt])||void 0===Y?void 0:Y.attendedTime));e.rows[R].contractualShiftTime=qt,e.rows[R].wdc=St,e.rows[R].allottedShiftTime=Tt,e.rows[R].attendedShiftsTime=Ct,e.rows[R].AL=I,e.rows[R].UL=wt,e.rows[R].SL=yt,e.rows[R].EL=J,e.rows[R].STL=bt,e.rows[R].Ab=vt,e.rows[R].OT=G/60,e.rows[R].lateHrs=K/60,e.rows[R].W=Lt}}calculateColumnTotals(e){var o,n,s;this.columnGrandTotal.contractualShiftTime=0,this.columnGrandTotal.attendedTime=0;for(let r=0;r<(null==e?void 0:e.columns.length);r++){let c=0,p=0,u=0;for(let d=0;d<(null==e?void 0:e.rows.length);d++)c+=null===(o=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===o?void 0:o.allottedShiftTime,p+=null===(n=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===n?void 0:n.attendedTime,u+=null===(s=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===s?void 0:s.contractualShiftTime;e.columns[r].allottedShiftTime=c/60,e.columns[r].attendedTime=p/60,e.columns[r].contractualShiftTime=u/60,this.columnGrandTotal.contractualShiftTime+=e.columns[r].contractualShiftTime,this.columnGrandTotal.attendedTime+=e.columns[r].attendedTime}}getEmpRow(e){return this.employeesGroup.findIndex(o=>o.employeeNumber==this.result.rows[e].employeeNumber)}getEmpBackGround(e,o){return(this.getEmpRow(e)+o)%2==0?"bgColorEven":"bgColorOdd"}getCellBackGround(e,o){var n,s,r,c,p,u,d;if(this.activeColumn==o)return"bgColorActiveColumn";if(this.alternativeAttedanceMapping.r1==e&&this.alternativeAttedanceMapping.c==o)return"bgColorPrimaryAttnd";if(this.alternativeAttedanceMapping.r2==e&&this.alternativeAttedanceMapping.c==o)return"bgColorAltAttnd";{let _=this.getEmpRow(e);return(null===(n=this.result.rows[e].attendanceMatrix[o])||void 0===n?void 0:n.isPosted)&&this.highlightPostedAtt?"bgColorPosted":"A"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorAbsent":"OT"==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.rows[e].attendanceMatrix[o].refIdForAlt>0?"bgColorOT":(null===(s=this.result.rows[e].attendanceMatrix[o])||void 0===s?void 0:s.isTransfered)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorTransfer":(null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.isTerminated)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorTerminated":(null===(c=this.result.rows[e].attendanceMatrix[o])||void 0===c?void 0:c.isResigned)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorResign":(null===(p=this.result.rows[e].attendanceMatrix[o])||void 0===p?void 0:p.isOnLeave)&&0==this.result.rows[e].attendanceMatrix[o].altAttId?"bgColorLeave":"-"==(null===(u=this.result.rows[e].attendanceMatrix[o])||void 0===u?void 0:u.attnFlag)&&this.highlightPendingAtt&&!(null===(d=this.result.columns[o])||void 0===d?void 0:d.isHoliday)&&"O"!=this.result.rows[e].shiftCode?"bgColorAttendancePending":"S"==this.result.rows[e].attendanceMatrix[o].attnFlag||"O"==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.rows[e].attendanceMatrix[o].altAttId>0?"bgColorSwap":""==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.columns[o].isHoliday&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorNoShift":_%2==0?"bgColorEven":"bgColorOdd"}}openDatePicker(e){e.open()}closeModel(){this.dialogRef.close()}exportexcel(){let e=document.getElementById("excel_table");const o=mt.P6.table_to_sheet(e),n=mt.P6.book_new();mt.P6.book_append_sheet(n,o,"Sheet1"),mt.NC(n,this.reportType+"_"+this.projectCode+"_"+this.siteCode+".xlsx")}FindAlternativeAttedanceMapping(e,o){var n;this.alternativeAttedanceMapping={r1:-1,r2:-1,c:o};let s=null===(n=this.result.rows[e])||void 0===n?void 0:n.attendanceMatrix[o];if(s.attndId>0){if(s.altAttId>0){this.alternativeAttedanceMapping.r1=e;let r=this.result.rows.findIndex(c=>c.attendanceMatrix[o].attndId==s.altAttId);this.alternativeAttedanceMapping.r2=r}else if(s.refIdForAlt>0){let r=this.result.rows.findIndex(c=>c.attendanceMatrix[o].attndId==s.refIdForAlt);this.alternativeAttedanceMapping.r1=r,this.alternativeAttedanceMapping.r2=e}}else this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1}}getToolTip(e,o,n){var s,r,c=new Z.uU("en-US");let p=-1==o?"":c.transform(null===(s=this.result.columns[o])||void 0===s?void 0:s.attnDate,"dd/MM/yyyy"),u=this.isArabic?this.result.rows[e].employeeNameAr:this.result.rows[e].employeeName;return-1==o?`${n}  : \nEmployee Number : ${this.result.rows[e].employeeNumber}.\nEmployee Name : ${u}.\n`:`Employee Number : ${this.result.rows[e].employeeNumber}.\nEmployee Name : ${u}.\nShift : ${this.result.rows[e].shiftCode}.\nDate : ${p}.\nAttendance ID: ${null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.attndId}.\nAlternate AttID: ${this.result.rows[e].attendanceMatrix[o].altAttId}`}translateToolTip(e){return this.translate.instant(e)}openPrint(){const e=document.getElementById("excel_table"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode2/${this.projectCode}/${this.siteCode}`).subscribe(e=>{this.listOfShiftCodes2=e,this.listOfShiftCodes2.sort((n,s)=>"O"==n.shiftCode||n.inTime<s.inTime?-1:1);const o=this.listOfShiftCodes2.findIndex(n=>"O"==n.shiftCode)>=0;for(let n=0;n<this.listOfShiftCodes2.length;n++)this.listOfShiftCodes2[n].shiftNumberNameEN=o?this.shiftTypeNames[n].nameEn:this.shiftTypeNames[n+1].nameEn,this.listOfShiftCodes2[n].shiftNumberNameAR=o?this.shiftTypeNames[n].nameAr:this.shiftTypeNames[n+1].nameAr,this.listOfShiftCodes2[n].shiftNumber=o?n:n+1})}singClick(e,o){this.FindAlternativeAttedanceMapping(e,o),""!=this.result.rows[e].attendanceMatrix[o].attnFlag&&0==this.result.rows[e].attendanceMatrix[o].attndId&&this.manualAttendance(e,o)}onRightClick(e,o){return this.result.rows[e].attendanceMatrix[o].attndId>0&&0==this.result.rows[e].attendanceMatrix[o].refIdForAlt?this.updateManualAttendance(e,o):""==this.result.rows[e].attendanceMatrix[o].attnFlag&&this.openPvRequestWindow(e,o),!1}manualAttendance(e,o){var n;let s=this.getEmpRow(e),c=new Z.uU("en-US").transform(null===(n=this.result.columns[o])||void 0===n?void 0:n.attnDate,"yyyy-MM-dd");this.apiService.post("monthlyRoaster/getSingleRoasterForEmployee",{employeeNumber:this.employeesGroup[s].employeeNumber,projectCode:this.projectCode,siteCode:this.siteCode,date:this.result.columns[o].attnDate}).subscribe(u=>{this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.projectCode}/${this.siteCode}/${this.employeesGroup[s].employeeNumber}/${c}/${this.result.rows[e].shiftCode}`).subscribe(d=>{var _,h,A,C;let S={r:e,c:o,totRows:this.employeesGroup.length},U={id:d.id,projectCode:this.projectCode,siteCode:this.siteCode,attnDate:c,shiftCode:this.result.rows[e].shiftCode,employeeNumber:this.result.rows[e].employeeNumber,employeeID:null!==(_=null==d?void 0:d.employeeID)&&void 0!==_?_:0,isDefShiftOff:"O"==this.result.rows[e].shiftCode,isActive:!0,inTime:null===(h=this.listOfShiftCodes2.find(M=>M.shiftCode==this.result.rows[e].shiftCode))||void 0===h?void 0:h.inTime,outTime:null===(A=this.listOfShiftCodes2.find(M=>M.shiftCode==this.result.rows[e].shiftCode))||void 0===A?void 0:A.outTime,isDefaultEmployee:!(null===(C=this.listOfShiftCodes2.find(M=>M.shiftCode==this.result.rows[e].shiftCode))||void 0===C?void 0:C.isOff),isPrimarySite:!0,isPosted:null==d?void 0:d.isPosted,altEmployeeNumber:this.result.rows[e].employeeNumber,altShiftCode:this.result.rows[e].shiftCode,attendance:"P",refIdForAlt:0,leavesData:null==d?void 0:d.leavesData,transORresignData:null==d?void 0:d.transORresignData,isOnLeave:null==d?void 0:d.isOnLeave,isWithDrawn:null==d?void 0:d.isWithDrawn,isResigned:null==d?void 0:d.isResigned,isTransfered:null==d?void 0:d.isTransfered,isTerminated:null==d?void 0:d.isTerminated,daywiseConsolidateData:this.getDayWiseConsolidateData(e,o),roasterData:u,r:e,c:o,shiftCodesSelectionList:this.listOfShiftCodes2};this.openManualAttendanceDialogWindow(S,U,g.Oi.create,"Manual_Attendance","Save",ke)})})}openManualAttendanceDialogWindow(e,o,n,s,r,c){if(!this.isLoading){this.isLoading=!0;let p=this.oprService.openAutoWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.inputData=o,p.componentInstance.inputCellData=e,p.afterClosed().subscribe(u=>{this.isLoading=!1,(null==u?void 0:u.isUpdatedShift)?(o.altEmployeeNumber="",this.removeAndUpdateEmployeeRows(o)):1==(null==u?void 0:u.res)&&this.removeAndUpdateEmployeeRows(null==u?void 0:u.outputData)},u=>{this.isLoading=!1})}}removeAndUpdateEmployeeRows(e){this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1};let o=null==e?void 0:e.employeeNumber,n=null==e?void 0:e.altEmployeeNumber;""!=o&&(this.employeesGroup=this.employeesGroup.filter(s=>s.employeeNumber!=o),this.result.rows=this.result.rows.filter(s=>s.employeeNumber!=o),this.insertNewEmployee(o)),""!=n&&o!=n&&(this.employeesGroup=this.employeesGroup.filter(s=>s.employeeNumber!=n),this.result.rows=this.result.rows.filter(s=>s.employeeNumber!=n),this.insertNewEmployee(n))}insertNewEmployee(e){this.apiService.post("Reports/getAttendancePayrollReport",{projectCode:this.projectCode,siteCode:this.siteCode,payrollStartDate:this.fromDate,pageNumber:0,pageSize:1,employeeNumber:e}).subscribe(n=>{this.tempAltEmployeeNumber="",n.rows.length>0&&(this.result.rows=this.result.rows.concat(n.rows),this.generateReportAndCalculations())})}openUpdateAttendanceDialogWindow(e,o,n,s,r,c){if(!this.isLoading){this.isLoading=!0;let p=this.oprService.openAutoWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.inputData=o,p.componentInstance.inputCellData=e,p.afterClosed().subscribe(u=>{this.isLoading=!1,1==(null==u?void 0:u.res)&&((""!=this.tempAltEmployeeNumber&&""==u.outputData.altEmployeeNumber||""!=this.tempAltEmployeeNumber&&""==u.outputData.employeeNumber)&&(u.outputData.altEmployeeNumber=this.tempAltEmployeeNumber,this.tempAltEmployeeNumber=""),this.removeAndUpdateEmployeeRows(u.outputData))},u=>{this.isLoading=!1})}}minsToStrHrsMins(e){return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}hrsToStrHrsMins(e){let o=Math.round(e);return`${o}:${Math.round(60*(e-o)).toString().padStart(2,"0")}`}updateManualAttendance(e,o){var n,s,r=new Z.uU("en-US");let c=this.getEmpRow(e),p=null===(n=this.result.columns[o])||void 0===n?void 0:n.attnDate,u=r.transform(null===(s=this.result.columns[o])||void 0===s?void 0:s.attnDate,"yyyy-MM-dd");if(new Date<=p)this.notifyService.showError(this.translate.instant("Can_not_Enter_Attendance_For_Future_Date"));else{let _={r:e,c:o,totRows:this.employeesGroup.length};this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.projectCode}/${this.siteCode}/${this.employeesGroup[c].employeeNumber}/${u}/${this.result.rows[e].shiftCode}`).subscribe(h=>{var A;this.tempAltEmployeeNumber=null!==(A=h.altEmployeeNumber)&&void 0!==A?A:"",h.daywiseConsolidateData=this.getDayWiseConsolidateData(e,o),this.openUpdateAttendanceDialogWindow(_,h,g.Oi.create,"Update_Manual_Attendance","Save",Me)})}}getDayWiseConsolidateData(e,o){var n,s,r,c,p,u,d,_,h,A,C;return{tch:null===(s=null===(n=this.result)||void 0===n?void 0:n.columns[o])||void 0===s?void 0:s.contractualShiftTime,tch_min:60*(null===(c=null===(r=this.result)||void 0===r?void 0:r.columns[o])||void 0===c?void 0:c.contractualShiftTime)%60,tcs:60*(null===(u=null===(p=this.result)||void 0===p?void 0:p.columns[o])||void 0===u?void 0:u.contractualShiftTime)/(null===(d=this.result)||void 0===d?void 0:d.siteWorkingTime),ot_count:0,mins:60*(null===(h=null===(_=this.result)||void 0===_?void 0:_.columns[o])||void 0===h?void 0:h.attendedTime)%60,hours:Math.floor(null===(C=null===(A=this.result)||void 0===A?void 0:A.columns[o])||void 0===C?void 0:C.attendedTime)}}isShiftFilterApplied(){return"shiftCode"==this.filterType&&""!=this.searchKey}applyFilter(){"employee"==this.filterType?(this.filter.employeeNumber=this.searchKey,this.filter.shiftCode=""):"shiftCode"==this.filterType&&(this.filter.shiftCode=this.searchKey,this.filter.employeeNumber="")}canShowRow(e){return""==this.searchKey||"shiftCode"==this.filterType&&(null==e?void 0:e.shiftCode)==this.searchKey||!("employee"!=this.filterType||!(null==e?void 0:e.employeeNumber.includes(this.searchKey))&&!(this.isArabic?null==e?void 0:e.employeeNameAr.includes(this.searchKey):null==e?void 0:e.employeeName.toLowerCase().includes(this.searchKey.toLowerCase())))}startTimer(){this.dataProcessedTime=new Date,this.interval=setInterval(()=>{let e=new Date,o=60*this.dataProcessedTime.getHours()*60+60*this.dataProcessedTime.getMinutes()+this.dataProcessedTime.getSeconds(),n=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds();this.time=n-o,this.time<this.waitingTime?this.isDataProcessed=!0:(this.isDataProcessed=!1,this.pauseTimer())},1e3)}pauseTimer(){clearInterval(this.interval)}reloadData(){this.getReports()}clearAttendance(){if(!this.isLoading){let e=this.oprService.openAutoWidthDialog(this.dialog,Pe);e.componentInstance.dbops=g.Oi.create,e.componentInstance.modalTitle="Clear_Attendance",e.componentInstance.modalBtnTitle="Save",e.componentInstance.projectCode=this.projectCode,e.componentInstance.siteCode=this.siteCode,e.componentInstance.maxDate=this.toDate,e.componentInstance.minDate=this.fromDate,e.afterClosed().subscribe(o=>{this.isLoading=!1,(1==o.res||o)&&this.getReports()})}}postAttendance(){if(!this.isLoading){let e=this.oprService.openAutoWidthDialog(this.dialog,Re);e.componentInstance.dbops=g.Oi.create,e.componentInstance.modalTitle="Post_Attendance",e.componentInstance.modalBtnTitle="Save",e.componentInstance.maxPostDate=this.toDate,e.componentInstance.minPostDate=this.fromDate,e.componentInstance.projectCode=this.projectCode,e.componentInstance.siteCode=this.siteCode,e.afterClosed().subscribe(o=>{this.isLoading=!1,1==o&&this.getReports()})}}autoAttendance(e){const o=this.oprService.openApprovalDialog(this.dialog,Fe);o.componentInstance.dbops=g.Oi.create,o.componentInstance.modalTitle="Auto_Attendance",o.componentInstance.confirmType="general",o.componentInstance.titleQuestion=this.translate.instant("Are_You_Sure?"),o.componentInstance.subTitleQuestion=this.translate.instant(-1==e?"Do_you_want_to_enter_default_attendance_for_whole_month?":"Do_you_want_to_enter_default_attendance_for_selected_day?"),o.afterClosed().subscribe(n=>{1==n&&(this.isLoading=!0,this.enterAutoAttendance(e))})}enterAutoAttendance(e){var o,n;let s=[],r=e,c=e;-1==e&&(r=0,c=this.result.columns.length-1);for(let p=r;p<=c;p++){let u=this.result.rows.findIndex(d=>d.attendanceMatrix[p].attndId>=0);if(!(this.result.columns[p].isHoliday&&r!=c||u))for(let d=0;d<this.result.rows.length;d++)!this.result.rows[d].attendanceMatrix[p].isResigned&&!this.result.rows[d].attendanceMatrix[p].isTransfered&&!this.result.rows[d].attendanceMatrix[p].isTerminated&&"-"==this.result.rows[d].attendanceMatrix[p].attnFlag&&"O"!=this.result.rows[d].shiftCode&&s.push({id:0,projectCode:this.projectCode,siteCode:this.siteCode,attnDate:this.result.columns[p].attnDate,shiftCode:this.result.rows[d].shiftCode,employeeNumber:this.result.rows[d].employeeNumber,isDefShiftOff:!1,isActive:!0,inTime:null===(o=this.listOfShiftCodes2.find(_=>_.shiftCode==this.result.rows[d].shiftCode))||void 0===o?void 0:o.inTime,outTime:null===(n=this.listOfShiftCodes2.find(_=>_.shiftCode==this.result.rows[d].shiftCode))||void 0===n?void 0:n.outTime,isDefaultEmployee:!0,isPrimarySite:!0,isPosted:!1,altEmployeeNumber:"",altShiftCode:"",attendance:"P",refIdForAlt:0,shiftNumber:1})}if(this.interval=setInterval(()=>{},1e3),0==s.length)return this.isLoading=!1,void this.notifyService.showWarning(this.translate.instant("No_Updations_Found"));this.apiService.post("EmployeesAttendance/enterAutoAttendance",s).subscribe(p=>{this.isLoading=!1,this.getReports()},p=>{var u;this.isLoading=!1,this.notifyService.showError(this.translate.instant(null===(u=null==p?void 0:p.error)||void 0===u?void 0:u.message))})}getAttendanceFlag(e,o){var n,s,r,c,p,u,d;let _=this.result.rows[e].attendanceMatrix[o].attnFlag;return(null===(n=this.result.rows[e].attendanceMatrix[o])||void 0===n?void 0:n.isTransfered)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?_="TR":(null===(s=this.result.rows[e].attendanceMatrix[o])||void 0===s?void 0:s.isResigned)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?_="R":(null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.isTerminated)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?_="X":"S"!=this.result.rows[e].attendanceMatrix[o].attnFlag||(null===(c=this.result.rows[e].attendanceMatrix[o])||void 0===c?void 0:c.isOnLeave)||"O"==this.result.rows[e].shiftCode?"O"==this.result.rows[e].shiftCode&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?_="O":(null===(p=this.result.columns[o])||void 0===p?void 0:p.isHoliday)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag&&(_="H"):_="A","TimeSheet"==this.reportType&&(null===(u=this.result.rows[e].attendanceMatrix[o])||void 0===u?void 0:u.attendedTime)>0&&(_=this.minsToStrHrsMins(null===(d=this.result.rows[e].attendanceMatrix[o])||void 0===d?void 0:d.attendedTime)),_}getDayBackground(e){var o;if(null===(o=this.result.columns[e])||void 0===o?void 0:o.isHoliday)return"bgColorDateHeaderHoliday"}getDayTooltip(e){return`${(null==e?void 0:e.isHoliday)?this.isArabic?e.holidayInf.calanderName_AR:e.holidayInf.calanderName_EN:""}`}getShiftBgColor(e){let o=this.listOfShiftCodes2.find(s=>s.shiftCode==e);return`bgColorShift_${null==o?0:o.shiftNumber}`}getShiftNumberName(e){let o=this.listOfShiftCodes2.find(n=>n.shiftCode==e);return null==o?"-":this.isArabic?o.shiftNumberNameAR:o.shiftNumberNameEN}getWeekDay(e){switch(new Date(e).getDay()){case 0:return"Su";case 1:return"M";case 2:return"T";case 3:return"W";case 4:return"Th";case 5:return"F";case 6:return"S";default:return""}}openPvRequestWindow(e,o){let n=this.datePipe.transform(this.result.columns[o].attnDate,"yyyy-MM-dd");this.apiService.post("PvAllRequests/getRecentApprovedPvRequestData",{projectCode:this.projectCode,siteCode:this.siteCode,employeeNumber:this.result.rows[e].employeeNumber,date:n}).subscribe(r=>0==(null==r?void 0:r.reqId)||null==r?(this.notifyService.showInfo("Employee Not Available"),!0):(1==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Add_Resource","View",Jt):2==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Remove_Resource","View",Rt):3==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Transfer_Employee","View",Pt):4==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Transfer_With_Replacement","View",Ft):5==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Swap_Employees","View",Kt):6==(null==r?void 0:r.requestType)&&this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.Oi.create,"Request_For_Replace_Resource","View",Mt),!1))}openPvRequestDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{})}RefreshOffs(){var e,o,n,s,r;let p="01"==(null===(e=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===e?void 0:e.substr(8,2)),u={siteCode:this.siteCode,month:null===(o=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===o?void 0:o.substr(5,2),year:null===(n=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===n?void 0:n.substr(0,4)};if(this.apiService.post("OpUtils/RefreshOffs",u).subscribe(d=>{}),!p){let d={siteCode:this.siteCode,month:null===(s=this.datePipe.transform(this.toDate,"yyyy-MM-dd"))||void 0===s?void 0:s.substr(5,2),year:null===(r=this.datePipe.transform(this.toDate,"yyyy-MM-dd"))||void 0===r?void 0:r.substr(0,4)};this.apiService.post("OpUtils/RefreshOffs",d).subscribe(_=>{})}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uU),t.Y36(T.uw),t.Y36(W),t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attendance-payroll-report2"]],features:[t.qOj],decls:72,vars:76,consts:[["type","button",1,"btn","close",3,"click"],["id","header"],[1,"row"],[1,"col-md-9","col-lg-9"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0",2,"background","none"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-3","col-lg-3"],[1,"btn-list"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary",3,"click"],[1,"far","fa-calendar-alt"],["hidden","hidden",1,"btn-list",2,"background-color","royalblue","color","white"],["hidden","hidden",1,"form-control","datapickerinput",3,"max","ngModel","ngModelOptions","matDatepicker","placeholder","ngModelChange","click","dateChange"],["matSuffix","",3,"for","ngModel","dateChange","ngModelChange"],[3,"dateChange"],["picker",""],["style","text-align:center",4,"ngIf"],[2,"background-color","#f9fbfd",3,"isLoading"],["id","excel_table"],["id","ReportTable",1,"card"],[1,"table-responsive"],[1,"none-border",2,"width","100%"],[2,"background-color","white","text-align","center","border","none","padding","0px 0px 0px 0px"],["colspan","32",2,"background-color","white","text-align","center","border","none","padding","0px 0px 0px 0px"],[2,"font-size","large"],[2,"font-size","medium"],[2,"font-size","x-small"],[2,"font-size","small","font-style","italic"],["class","sambaAttendanceTable  table-bordered no-wrap",4,"ngIf"],["id","consolidateTables","class","row","style","padding:10px 10px 10px 10px; text-align:center",4,"ngIf"],[2,"text-align","center"],[1,"row",2,"text-align","center"],[1,"card","col-md-3","col-lg-3",2,"padding-right","5px"],[1,"card-body"],[1,"card-title"],[1,"radio"],["for","radio1"],["type","radio","name","reportType","value","Attendance",3,"ngModel","ngModelChange"],["type","radio","name","reportType",3,"value","ngModel","ngModelChange"],[1,"card","col-md-4","col-lg-4",2,"padding-right","5px"],["type","text","class","form-control btn","placeholder","Enter Key","style","width:48%;border:solid;border-color:lightgray;border-width:1px;text-align:start",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","form-control btn","style","width: 48%; border: solid; border-color: lightgray; border-width: 1px;",3,"ngModel","ngModelOptions","ngModelChange","change",4,"ngIf"],["type","radio","name","filterType",3,"value","ngModel","ngModelChange","click"],[1,"card","col-md-5","col-lg-5",2,"vertical-align","central"],[1,"card-body","btn-list",2,"text-align","center","padding","15px 15px 0px 0px"],[1,"btn","btn","waves-effect","waves-light","btn-outline-primary",2,"text-align","center","vertical-align","central",3,"matTooltip","click"],[1,"fas","fa-thumbs-up",2,"font-size","x-large"],[1,"fas","fa-fast-forward",2,"font-size","x-large"],[1,"fas","fa-eraser",2,"font-size","x-large"],[1,"fas","fa-history",2,"font-size","x-large"],[1,"fas","fa-arrow-alt-circle-down",2,"font-size","x-large"],[1,"col-md-12",2,"vertical-align","central"],[1,"btn-list",2,"align-content","center","vertical-align","central","padding","15px 20px 0px 0px"],["type","checkbox","name","highlightData",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter Key",1,"form-control","btn",2,"width","48%","border","solid","border-color","lightgray","border-width","1px","text-align","start",3,"ngModel","ngModelChange","change"],[1,"form-control","btn",2,"width","48%","border","solid","border-color","lightgray","border-width","1px",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"sambaAttendanceTable","table-bordered","no-wrap"],["colspan","4"],[4,"ngIf"],["rowspan","2",2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","text-align","center"],["rowspan","2","colspan","2",2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","text-align","center"],["style","font-size:0.775rem !important; font-family: 'Poppins', sans-serif;font-weight:600;padding: 2px;",3,"id","matTooltip",4,"ngFor","ngForOf"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","text-align","center"],[2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px",3,"id","matTooltip"],["style","color:white;font-size:x-small",4,"ngIf"],["class","clickaction clickicons","style","color:yellow;font-size:x-small",3,"matTooltip","click",4,"ngIf"],[2,"color","white","font-size","x-small"],[1,"clickaction","clickicons",2,"color","yellow","font-size","x-small",3,"matTooltip","click"],[1,"fas","fa-sync-alt",2,"font-size","small"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","lightgreen"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","red"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","#c0d5fa"],[2,"text-align","center","font-size","x-large"],[4,"ngFor","ngForOf"],["style","padding: 3px; text-align: center;",3,"id",4,"ngIf"],["style","padding: 3px; text-align: center",3,"id",4,"ngIf"],["style","padding: 3px; text-align: left",3,"id",4,"ngIf"],[2,"padding","3px","text-align","center",3,"id"],["style","text-align: center;",3,"id","matTooltip","click","contextmenu",4,"ngFor","ngForOf"],[2,"padding","3px","text-align","left",3,"id"],["class","fas fa-user","style","color:blue;background-color:yellow",4,"ngIf"],[2,"font-style","italic"],[1,"fas","fa-user",2,"color","blue","background-color","yellow"],["class","fas fa-user","style","color: blue; background-color: yellow",4,"ngIf"],[2,"text-align","center",3,"id","matTooltip","click","contextmenu"],["style","text-align: center",3,"id","matTooltip",4,"ngIf"],["style","padding: 3px; text-align: center",3,"id","matTooltip",4,"ngIf"],[2,"text-align","center",3,"id","matTooltip"],[2,"padding","3px","text-align","center",3,"id","matTooltip"],["colspan","4",2,"text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],[2,"background-color","#e8eef3","color","black"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600","padding","2px"],["style","background-color:yellow",4,"ngFor","ngForOf"],[2,"background-color","yellow"],[2,"background-color","white"],["style","background-color:cornsilk",4,"ngFor","ngForOf"],[2,"background-color","cornsilk"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: yellow",4,"ngFor","ngForOf"],["colspan","4",2,"background-color","sandybrown","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: sandybrown",4,"ngFor","ngForOf"],[2,"background-color","sandybrown"],["id","consolidateTables",1,"row",2,"padding","10px 10px 10px 10px","text-align","center"],["id","consolidateRoasterPlanTable",1,"card"],[1,"consolidateDataTable"],["colspan","2"],["colspan","3"],["class","none-border","style","background-color:white;color:red",4,"ngIf"],["id","consolidateTimeSheetTable",1,"card"],["id","consolidateShiftsPlanTable",1,"card"],[1,"none-border",2,"background-color","white","color","red"],["colspan","21","width","100%",1,"none-border",2,"background-color","white","color","red"],["colspan","2",3,"id"],["colspan","3",3,"id"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1,"x"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"nav",5),t.TgZ(7,"ol",6),t.TgZ(8,"li",7),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"li",7),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"li",7),t._uU(15),t.qZA(),t.TgZ(16,"li",7),t._uU(17),t.qZA(),t.TgZ(18,"li",8),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"div",10),t.TgZ(23,"button",11),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(37);return o.openDatePicker(r)}),t._uU(24),t.ALo(25,"translate"),t.ALo(26,"translate"),t._UZ(27,"i",12),t.qZA(),t.TgZ(28,"div",13),t._uU(29),t.ALo(30,"translate"),t.ALo(31,"translate"),t.TgZ(32,"input",14),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(37);return o.openDatePicker(r)})("dateChange",function(){return o.getReport()}),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-datepicker-toggle",15),t.NdJ("dateChange",function(){return o.getReport()})("ngModelChange",function(r){return o.fromDate=r}),t.qZA(),t.TgZ(36,"mat-datepicker",16,17),t.NdJ("dateChange",function(){return o.getReport()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(38,nS,51,28,"ng-container",18),t._UZ(39,"auto-loader",19),t.TgZ(40,"div",20),t.TgZ(41,"div",21),t.TgZ(42,"div",22),t.TgZ(43,"table",23),t.TgZ(44,"tr",24),t.TgZ(45,"td",25),t.TgZ(46,"span",26),t._uU(47),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"tr",24),t.TgZ(49,"td",25),t.TgZ(50,"span",27),t._uU(51),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"tr",24),t.TgZ(53,"td",25),t.TgZ(54,"span",28),t._uU(55),t.ALo(56,"translate"),t.ALo(57,"translate"),t.ALo(58,"date"),t.ALo(59,"translate"),t.ALo(60,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"tr",24),t.TgZ(62,"td",25),t.TgZ(63,"span",29),t._uU(64),t.ALo(65,"translate"),t.ALo(66,"translate"),t.ALo(67,"date"),t.ALo(68,"translate"),t.ALo(69,"date"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(70,m5,27,21,"table",30),t.qZA(),t.qZA(),t.YNc(71,f5,114,104,"div",31),t.qZA()}if(2&e){const n=t.MAs(37);t.xp6(9),t.hij(" ",t.lcZ(10,33,"Operations")," "),t.xp6(3),t.hij(" ",t.lcZ(13,35,"Projects")," "),t.xp6(3),t.hij(" ",o.siteCode," "),t.xp6(2),t.hij(" ",o.projectCode," "),t.xp6(2),t.hij(" ",t.lcZ(20,37,"Attendance")," "),t.xp6(5),t.AsE(" ",t.lcZ(25,39,"Select")," ",t.lcZ(26,41,"Payroll_Date")," "),t.xp6(5),t.AsE(" ",t.lcZ(30,43,"Select")," ",t.lcZ(31,45,"Payroll_Date")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(33,47,"Please_Enter")," ",t.lcZ(34,49,"Payroll_Start_Date"),""),t.Q6J("max",o.maxDate)("ngModel",o.fromDate)("ngModelOptions",t.DdM(75,mo))("matDatepicker",n),t.xp6(3),t.Q6J("for",n)("ngModel",o.fromDate),t.xp6(3),t.Q6J("ngIf",(null==o.result?null:o.result.isValidReq)&&0!=(null==o.result||null==o.result.rows?null:o.result.rows.length)&&!o.isLoading),t.xp6(1),t.Q6J("isLoading",o.isLoading),t.xp6(8),t.hij(" ",o.isArabic?null==o.projectData?null:o.projectData.projectNameArb:null==o.projectData?null:o.projectData.projectNameEng," "),t.xp6(4),t.hij(" ",o.isArabic?null==o.siteData?null:o.siteData.projectNameArb:null==o.siteData?null:o.siteData.projectNameEng," "),t.xp6(4),t.xDo(" ",t.lcZ(56,51,"Project_Duration")," \xa0:\xa0 ",t.lcZ(57,53,"From")," ",t.xi3(58,55,null==o.projectData?null:o.projectData.startDate,"dd/MM/yyyy"),"\xa0",t.lcZ(59,58,"To"),"\xa0",t.xi3(60,60,null==o.projectData?null:o.projectData.endDate,"dd/MM/yyyy")," "),t.xp6(9),t.xDo(" ",t.lcZ(65,63,"Attendance_Monthly_Report"),"\xa0 ",t.lcZ(66,65,"From")," ",t.xi3(67,67,o.fromDate,"dd/MM/yyyy"),"\xa0 ",t.lcZ(68,70,"To"),"\xa0 ",t.xi3(69,72,o.toDate,"dd/MM/yyyy")," "),t.xp6(6),t.Q6J("ngIf",0!=(null==o.result||null==o.result.columns?null:o.result.columns.length)),t.xp6(1),t.Q6J("ngIf",0!=(null==o.result?null:o.result.rows.length)&&!o.isLoading)}},directives:[l.Fj,j.hl,l.JJ,l.On,j.nW,ft.R9,j.Mq,Z.O5,At.z,l._,ut.gM,l.Wl,l.EJ,l.YN,l.Kr,Z.sg],pipes:[f.X$,Z.uU,Z.JJ],styles:["#attendTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    border-block-color: lightgray;\n    border-block: lightgray;\n    border-block-width: 1px;\n    border-inline-color: aqua\n  }\n\n\n  table.consolidateDataTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    color: black;\n    font-size: small;\n    padding: 5px 5px 5px 5px\n  }\n\n\n  table.sambaAttendanceTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    width: 100%\n  }\n\n\n    table.sambaAttendanceTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n      background-color: #fafafa;\n      border: solid;\n      border-color: lightgray;\n      border-width: 1px;\n      padding: 5px 15px 5px 15px\n    }\n\n    table.sambaAttendanceTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\n      background-color: #548087;\n      border: solid;\n      border-color: lightgray;\n      border-width: 1px;\n      color: white;\n      text-align: center;\n    }\n\n\n  #bgColorEven[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: white;\n  }\n\n  #bgColorOdd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: white;\n    \n  }\n\n  #bgColorAltAttnd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: maroon;\n    color: white;\n  }\n\n  #bgColorPrimaryAttnd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: blue;\n    color: white;\n  }\n\n  #bgColorAbsent[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white\n  }\n\n  #bgColorSwap[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellow;\n    color: red\n  }\n\n  #bgColorNoShift[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: #f3f3f3;\n    color: none\n  }\n\n  #bgColorLeave[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorTransfer[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorResign[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorTerminated[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorAttendancePending[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellowgreen; \n  }\n\n  #bgColorOT[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellow;\n    color: green;\n  }\n\n  #bgColorPosted[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: orange;\n    color: white;\n  }\n\n  #bgColorActiveColumn[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: aqua;\n    color: blue;\n  }\n\n  #bgColorDateHeaderHoliday[_ngcontent-%COMP%] {\n    background-color: lightgreen;\n    color: yellow;\n  }\n\n  #bgColorShift_0[_ngcontent-%COMP%] {\n    background-color: burlywood;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_1[_ngcontent-%COMP%] {\n    background-color: lightcoral;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_2[_ngcontent-%COMP%] {\n    background-color: mediumpurple;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_3[_ngcontent-%COMP%] {\n    background-color: cadetblue;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }"]}),i})();function C5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function T5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function v5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function x5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function q5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name")," "))}function b5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng)}}function y5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function S5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function w5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function U5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function D5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Start_Date")," "))}function L5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.startDate,"longDate"))}}function N5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"End_Date")," "))}function E5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.endDate,"longDate"))}}function O5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Addendum")," "))}function k5(i,a){1&i&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function j5(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function M5(i,a){if(1&i&&(t.TgZ(0,"td",35),t.YNc(1,k5,3,3,"span",36),t.YNc(2,j5,3,3,"ng-template",null,37,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isAdendum)("ngIfElse",o)}}function R5(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function P5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().shiftPlan(n)}),t._UZ(1,"i",47),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Shift_Plan"))}}function F5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().skillsetPlan(n)}),t._UZ(1,"i",48),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("SkillSet_Plan"))}}function I5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().resourceCosting(n)}),t._UZ(2,"i",49),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().logisticsCosting(n)}),t._UZ(5,"i",50),t._uU(6,"\xa0"),t.qZA(),t.TgZ(7,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().materialCosting(n)}),t._UZ(8,"i",51),t._uU(9,"\xa0"),t.qZA(),t.TgZ(10,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().financialExpenseCosting(n)}),t._UZ(11,"i",52),t._uU(12,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(4).$implicit,o=t.oxw();t.xp6(1),t.Tol(o.getResourceColor(e)),t.Q6J("matTooltip",o.translateToolTip("Resource_Costing")),t.xp6(3),t.Tol(o.getLogisticsColor(e)),t.Q6J("matTooltip",o.translateToolTip("Logistics_Costing")),t.xp6(3),t.Tol(o.getMaterialColor(e)),t.Q6J("matTooltip",o.translateToolTip("Material_Costing")),t.xp6(3),t.Tol(o.getFinanceExpenceColor(e)),t.Q6J("matTooltip",o.translateToolTip("Financial_Expense_Costing"))}}function Y5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().enableEditCostingButton(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(5);t.Q6J("matTooltip",e.translateToolTip("Edit_Costing"))}}function J5(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,I5,13,16,"span",42),t.YNc(2,Y5,3,1,"span",45),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isEstimationForProjectApproved&&!e.isAdendum)}}function Q5(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,J5,3,2,"span",42),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",!e.isConvertedToProposal&&e.authorities.canModifyEstimation)}}function B5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().calendarDays(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Generate_Monthly_Roaster"))}}function H5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().assignEmployyesToProjectSite(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Assign_Employyes_To_ProjectSite"))}}function $5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().mappingEmpToResourceForProjectSite(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Mapping_Employees_To_Resource_For_ProjectSite"))}}function V5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().openMonthlyRoaster(n)}),t._UZ(1,"i",57),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Lock_Shifts"))}}function G5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().employeePayrollAttendance(n)}),t._UZ(1,"i",58),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Employee_Attendance"))}}function W5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewCustomerVisitForms(n)}),t._UZ(1,"i",59),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Customer_Visit_Forms"))}}function z5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewCustomerComplaints(n)}),t._UZ(1,"i",60),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Customer_Complaints"))}}function X5(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,P5,3,1,"span",45),t.YNc(2,F5,3,1,"span",45),t.YNc(3,Q5,2,1,"span",42),t.YNc(4,B5,3,1,"span",45),t.YNc(5,H5,3,1,"span",45),t.YNc(6,$5,3,1,"span",45),t.YNc(7,V5,3,1,"span",45),t.YNc(8,G5,3,1,"span",45),t.YNc(9,W5,3,1,"span",45),t.YNc(10,z5,3,1,"span",45),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.authorities.canModifyEstimation),t.xp6(1),t.Q6J("ngIf",e.isShiftsAssigned&&(e.authorities.canModifyEstimation||e.isAdmin)&&!e.isResourcesAssigned&&(!e.isEstimationForProjectApproved||!e.isEstimationCompleted&&e.isAdendum)),t.xp6(1),t.Q6J("ngIf",e.isShiftsAssigned&&e.isSkillSetsMapped),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract)}}function K5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ReopenProject(n)}),t._UZ(1,"i",67),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Reopen_Project_Site"),""))}function tw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(1,"i",67),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Extend_Project_Site"),""))}function ew(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().RevokeSuspension(n)}),t._UZ(1,"i",67),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Revoke_Suspension"),""))}function ow(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,K5,4,3,"a",65),t.YNc(2,tw,4,3,"a",65),t.YNc(3,ew,4,3,"a",65),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",null==e?null:e.isClosed),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isClosed||null!=e&&e.isInProgress||null!=e&&e.isSuspended)),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isSuspended)}}function iw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewRequests(n)}),t._UZ(2,"i",67),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().CloseProject(n)}),t._UZ(6,"i",67),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().SuspendProject(n)}),t._UZ(10,"i",67),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(14,"i",67),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,4,"View_Requests"),""),t.xp6(4),t.hij(" ",t.lcZ(8,6,"Close_Project_Site"),""),t.xp6(4),t.hij(" ",t.lcZ(12,8,"Suspend_Project_Site"),""),t.xp6(4),t.hij(" ",t.lcZ(16,10,"Extend_Project_Site"),""))}function nw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(1,"i",67),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Extend_Project_Site"),""))}function aw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ReopenProject(n)}),t._UZ(2,"i",67),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,nw,4,3,"a",65),t.qZA()}if(2&i){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,2,"Reopen_Project_Site"),""),t.xp6(2),t.Q6J("ngIf",null==e?null:e.canExtendProject)}}function sw(i,a){if(1&i&&(t.TgZ(0,"span",61),t.TgZ(1,"a",62),t._UZ(2,"i",63),t.qZA(),t.TgZ(3,"span",64),t.YNc(4,ow,4,3,"span",42),t.YNc(5,iw,17,12,"span",42),t.YNc(6,aw,6,4,"span",42),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("matTooltip",o.translateToolTip("Project_Site_Variance")),t.xp6(4),t.Q6J("ngIf",null==e?null:e.isInActive),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInActive)&&(null==e?null:e.isInProgress)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInProgress)&&!(null!=e&&e.isInActive)&&e.isConvrtedToContract)}}function rw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().enableEditCostingButton(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit_Costing"))}}function lw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().estimationReport(n)}),t._UZ(1,"i",70),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Estimation_Report"))}}function cw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().summaryReport(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Summary_Report"))}}function pw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveEstimation(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Estimation"))}}function uw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printEstimation(n)}),t._UZ(1,"i",73),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Print_Estimation"))}}function dw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",74),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printProposal(n)}),t._UZ(1,"i",75),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Print_Proposal"))}}function _w(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().convertToContract(n)}),t._UZ(1,"i",76),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Merge_To_Contract"))}}function mw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().uploadFile(n)}),t._UZ(1,"i",77),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function gw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewContract(n)}),t._UZ(1,"i",78),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Addendum"))}}function hw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewUploadedFile(n)}),t._UZ(1,"i",78),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Download_File"))}}function Zw(i,a){if(1&i&&(t.TgZ(0,"span",68),t.YNc(1,rw,3,1,"a",45),t.YNc(2,lw,3,1,"a",45),t.YNc(3,cw,3,1,"a",45),t.YNc(4,pw,3,1,"a",45),t.YNc(5,uw,3,1,"a",45),t.YNc(6,dw,3,1,"a",69),t.YNc(7,_w,3,1,"a",45),t.YNc(8,mw,3,1,"a",45),t.YNc(9,gw,3,1,"a",45),t.YNc(10,hw,3,1,"a",45),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!(null!=e&&e.isApproved)),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isApproved&&e.hasAuthority&&e.authorities.canApproveEstimation&&!e.approvedUser),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isApproved&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isApproved&&!e.fileUrl&&(e.canApprove||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract&&!e.fileUrl),t.xp6(1),t.Q6J("ngIf",e.fileUrl)}}function fw(i,a){if(1&i&&(t.TgZ(0,"td",41),t.YNc(1,X5,11,10,"span",42),t.YNc(2,sw,7,4,"span",43),t.YNc(3,Zw,11,10,"span",44),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInActive)&&(null==e?null:e.isInProgress)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isAdendum)}}function Aw(i,a){1&i&&t._UZ(0,"tr",79)}function Cw(i,a){1&i&&t._UZ(0,"tr",80)}let Tw=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=_,this.pageService=h,this.translate=A,this.dialogRef=C,this.displayedColumns=["customerCode","projectCode","Project_Name","SiteCode","Branch_Code","startDate","endDate","isAdendum","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.form=this.fb.group({}),this.searchValue=this.project.projectCode,this.initialLoading()}refresh(){this.searchValue=this.project.projectCode,this.initialLoading()}initialLoading(){this.searchValue=this.project.projectCode,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.project.projectCode,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ProjectSites/getProjectSitesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.isArab=this.isArab,c.componentInstance.type="ForAddingSite",c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.oprService.openAutoHeightWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.requestData=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openPaginationWindow(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialog(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,n);p.componentInstance.dbops=e,p.componentInstance.modalTitle=o,p.componentInstance.confirmType=s,p.afterClosed().subscribe(u=>{(u&&1==u||u.res)&&this.apiService.post("ProjectBudgetCosting/skippEstimation",this.project).subscribe(d=>{this.utilService.OkMessage(),this.ngOnInit()},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d)})})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}resourceCosting(e){this.openDialogManage(e,g.Oi.create,"Resource_Costing","Save",ie)}logisticsCosting(e){this.openDialogManage(e,g.Oi.create,"Logistics_Vehicle_Costing","Save",ae)}materialCosting(e){this.openDialogManage(e,g.Oi.create,"Material_Costing","Save",se)}financialExpenseCosting(e){this.openDialogManage(e,g.Oi.create,"Financial_Epense_Costing","Save",re)}estimationReport(e){this.openDialogManage(e,g.Oi.create,"Estimation_Cnsolidate_Report","Save",le)}summaryReport(e){this.openDialogManage(e,g.Oi.create,"Estimation_Summary_Report","Save",ce)}convertToContract(e){this.openFullWindow(e,g.Oi.create,"Creating_Contract","Save",$t)}printEstimation(e){this.openDialogManage(e,g.Oi.create,"Estimation_Cnsolidate_Report","Print",me)}assignEmployyesToProjectSite(e){this.openFullWindow(e,g.Oi.create,"Assigning_Employees_To_Site","Save",ge)}mappingEmpToResourceForProjectSite(e){this.openDialogManage(e,g.Oi.create,"Mapping_Employees_To_Resources_For_Site","Save",he)}printProposal(e){this.openDialogManage(e,g.Oi.create,"Project_Proposal","Print",_e)}shiftPlan(e){this.openDialogManage(e,g.Oi.create,"Shifts_Plan_For_Project","Save",pe)}skillsetPlan(e){this.openDialogManage(e,g.Oi.create,"Skillset_Plan_For_Project","Save",ue)}calendarDays(e){this.openFullWindow(e,g.Oi.create,"Calander_Days","Save",de)}viewContract(e){this.openFullWindow(e,g.Oi.create,"Adendum_Contract","View",$t)}employeeAttendance(e){this.openFullWindow(e,g.Oi.create,"Employee_Attendance","View",Ze)}submit(){}openMonthlyRoaster(e){this.openFullWindow(e,g.Oi.create,"Monthly_Roaster","Save",ne)}approveEstimation(e){this.openApprovalDialog(e.branchCode,e.projectCode+"/"+e.siteCode,g.Oi.create,"Estimation_Approval","Save","ADNDM",Wt)}enableEditCostingButton(e){e.isEstimationCompleted=!1}convertToProposal(e){this.apiService.post("ProjectBudgetCosting/convertProjectSiteToProposal",e).subscribe(o=>{this.utilService.OkMessage(),this.ngOnInit()},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}translateToolTip(e){return`${this.translate.instant(e)}`}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}closeModel(){this.dialogRef.close(!0)}skippEstimation(e){this.project=e,console.log(e),this.openConfirmationDialog(g.Oi.create,"Are_You_Sure?",xt,"general","Skipp_Estimation",0)}CloseProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!0,e.id=0,this.openDialogManage(e,g.Oi.create,"Close_Project_Site","Save",kt)}CancelProject(){}SuspendProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!0,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.Oi.create,"Suspend_Project_Site","Save",kt)}ExtendProject(e){e.isExtendProjReq=!0,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.Oi.create,"Extend_Project_Site","Save",kt)}ReopenProject(e){let o=this.oprService.confirmationDialog(this.dialog,Fe);o.componentInstance.titleQuestion="Are_You_Sure?",o.componentInstance.subTitleQuestion="Reopen_Project_Cant_Revertable...",o.afterClosed().subscribe(n=>{1==n&&(e.isExtendProjReq=!1,e.isReOpenReq=!0,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.Oi.create,"Reopen_Project_Site","Save",kt))},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}RevokeSuspension(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!0,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.Oi.create,"Revoke_Suspension","Save",kt)}ViewRequests(e){this.openPaginationWindow(e,g.Oi.create,"","",ro)}ViewCustomerVisitForms(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,po);o.componentInstance.dbops=g.Oi.create,o.componentInstance.modalTitle="",o.componentInstance.modalBtnTitle="",o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}ViewCustomerComplaints(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,_o);o.componentInstance.dbops=g.Oi.create,o.componentInstance.modalTitle="",o.componentInstance.modalBtnTitle="",o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}employeePayrollAttendance(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,A5);o.componentInstance.projectCode=e.projectCode,o.componentInstance.siteCode=e.siteCode,o.componentInstance.isFromProjectSiteActions=!0,o.componentInstance.inputData=e,o.afterClosed().subscribe(n=>{})}uploadFile(e){let o=this.oprService.openAutoWidthDialog(this.dialog,Se);o.componentInstance.projectSite=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewUploadedFile(e){window.open(e.fileUrl)}getResourceColor(e){return e.isResourcesAssigned?"GreenText":"RedText"}getLogisticsColor(e){return e.isLogisticsAssigned?"GreenText":"RedText"}getMaterialColor(e){return e.isMaterialAssigned?"GreenText":"RedText"}getFinanceExpenceColor(e){return e.isExpenceOverheadsAssigned?"GreenText":"RedText"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(W),t.Y36(B.N),t.Y36(f.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-project-sites2"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:59,vars:16,consts:[[1,"modal-body"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","Project_Name"],["matColumnDef","SiteCode"],["matColumnDef","Branch_Code"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","isAdendum"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[4,"ngIf"],[3,"matTooltip",4,"ngIf"],["style","padding-left:5px",4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-clock"],[1,"fas","fa-user-plus"],[1,"icon-people"],[1,"fas","fa-bus"],[1,"fas","fa-fax"],[1,"fas","fa-sort-amount-up"],[1,"far","fa-edit"],[1,"fas","fa-calendar-plus"],[1,"fas","fa-tasks"],[1,"fas","fa-users"],[1,"fas","fa-lock"],[1,"fas","fa-calendar-check"],[1,"fas","fa-motorcycle"],[1,"fas","fa-phone-square"],[3,"matTooltip"],["id","navbarDropdown","role","list","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"fas","fa-sun"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],["class","dropdown-item tableicons",3,"click",4,"ngIf"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],[2,"padding-left","5px"],[3,"click",4,"ngIf"],[1,"icon-eye"],[1,"fas","fa-list"],[1,"fas","fa-check-circle"],[1,"fas","fa-print"],[3,"click"],[1,"fas","fa-print",3,"matTooltip"],[1,"far","fa-handshake"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"h3",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"nav",7),t.TgZ(11,"ol",8),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",10),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",11),t.TgZ(19,"div",3),t.TgZ(20,"div",12),t.TgZ(21,"div",13),t.TgZ(22,"div",14),t._UZ(23,"div",3),t._UZ(24,"div",15),t.TgZ(25,"div",16),t.ynx(26),t.TgZ(27,"table",17),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(28,18),t.YNc(29,C5,3,3,"th",19),t.YNc(30,T5,2,1,"td",20),t.BQk(),t.ynx(31,21),t.YNc(32,v5,3,3,"th",19),t.YNc(33,x5,2,1,"td",20),t.BQk(),t.ynx(34,22),t.YNc(35,q5,3,3,"th",19),t.YNc(36,b5,2,1,"td",20),t.BQk(),t.ynx(37,23),t.YNc(38,y5,3,3,"th",19),t.YNc(39,S5,2,1,"td",20),t.BQk(),t.ynx(40,24),t.YNc(41,w5,3,3,"th",19),t.YNc(42,U5,2,1,"td",20),t.BQk(),t.ynx(43,25),t.YNc(44,D5,3,3,"th",19),t.YNc(45,L5,3,4,"td",20),t.BQk(),t.ynx(46,26),t.YNc(47,N5,3,3,"th",19),t.YNc(48,E5,3,4,"td",20),t.BQk(),t.ynx(49,27),t.YNc(50,O5,3,3,"th",19),t.YNc(51,M5,4,2,"td",20),t.BQk(),t.ynx(52,28),t.YNc(53,R5,3,3,"th",29),t.YNc(54,fw,4,3,"td",30),t.BQk(),t.YNc(55,Aw,1,0,"tr",31),t.YNc(56,Cw,1,0,"tr",32),t.qZA(),t.BQk(),t.qZA(),t.ynx(57),t.TgZ(58,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,10,o.modalTitle)," "),t.xp6(6),t.hij(" ",t.lcZ(14,12,o.project.projectCode)," "),t.xp6(3),t.Oqu(t.lcZ(17,14,"Sites")),t.xp6(11),t.Q6J("dataSource",o.data),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$,Z.uU],styles:["span.RedText[_ngcontent-%COMP%] {\n    color: red;\n\n  }\n  span.GreenText[_ngcontent-%COMP%] {\n    color: lawngreen;\n     }\n  span.BlueText[_ngcontent-%COMP%] {\n    color: blue;\n     }"]}),i})();function vw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateReport()}),t._uU(1," Generate Report "),t.qZA()}}function xw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",54),t._uU(2," print "),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._uU(5,"ExportExcel"),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("useExistingCss",!0))}function qw(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function bw(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function yw(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Sw(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function ww(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name")," "))}function Uw(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng)}}function Dw(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Start_Date")," "))}function Lw(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.startDate,"longDate"))}}function Nw(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"End_Date")," "))}function Ew(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.endDate,"longDate"))}}function Ow(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function kw(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function jw(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Mw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().estimationReport(n)}),t._UZ(1,"i",63),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Estimation_Report"))}}function Rw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().summaryReport(n)}),t._UZ(1,"i",64),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Summary_Report"))}}function Pw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveEstimation(n)}),t._UZ(1,"i",65),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Estimation"))}}function Fw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().printEstimation(n)}),t._UZ(1,"i",66),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Print_Estimation"))}}function Iw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().printProposal(n)}),t._UZ(1,"i",68),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Print_Proposal"))}}function Yw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().convertToContract(n)}),t._UZ(1,"i",69),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Convert_To_Contract"))}}function Jw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadFile(n)}),t._UZ(1,"i",70),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function Qw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewContract(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_Contract"))}}function Bw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewUploadedFile(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Download_File"))}}function Hw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",58),t.YNc(1,Mw,3,1,"span",59),t.YNc(2,Rw,3,1,"span",59),t.YNc(3,Pw,3,1,"span",59),t.YNc(4,Fw,3,1,"span",59),t.YNc(5,Iw,3,1,"span",60),t.YNc(6,Yw,3,1,"span",59),t.YNc(7,Jw,3,1,"a",59),t.YNc(8,Qw,3,1,"a",59),t.YNc(9,Bw,3,1,"a",59),t.TgZ(10,"span",61),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewProjectSites(s)}),t._UZ(11,"i",62),t._uU(12,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isApproved&&(e.hasAuthority&&e.authorities.canApproveEstimation||e.isAdmin)&&!e.approvedUser),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",!e.isConvrtedToContract&&e.isEstimationCompleted&&e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract&&e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isConvertedToProposal&&e.isApproved&&!e.fileUrl&&(e.canApprove||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract&&!e.fileUrl),t.xp6(1),t.Q6J("ngIf",e.fileUrl),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Sites"))}}function $w(i,a){1&i&&t._UZ(0,"tr",72)}function Vw(i,a){1&i&&t._UZ(0,"tr",73)}function Gw(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.ALo(6,"date"),t.ALo(7,"translate"),t.ALo(8,"date"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.xDo(" ",t.lcZ(4,5,"Start_Date")," ",t.lcZ(5,7,"Between")," ",t.xi3(6,9,null==e.filter?null:e.filter.startDateFrom,"longDate")," ",t.lcZ(7,12,"And")," ",t.xi3(8,14,null==e.filter?null:e.filter.startDateTo,"longDate")," ")}}function Ww(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.ALo(6,"date"),t.ALo(7,"translate"),t.ALo(8,"date"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.xDo(" ",t.lcZ(4,5,"End_Date")," ",t.lcZ(5,7,"Between")," ",t.xi3(6,9,null==e.filter?null:e.filter.endDateFrom,"longDate")," ",t.lcZ(7,12,"And")," ",t.xi3(8,14,null==e.filter?null:e.filter.endDateTo,"longDate")," ")}}function zw(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.customerCode),t.xp6(2),t.Oqu(e.projectCode),t.xp6(2),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng),t.xp6(2),t.Oqu(t.xi3(9,6,e.startDate,"longDate")),t.xp6(3),t.Oqu(t.xi3(12,9,e.endDate,"longDate")),t.xp6(3),t.Oqu(e.branchCode)}}function Xw(i,a){if(1&i&&(t.TgZ(0,"div",74),t.TgZ(1,"div",75),t.TgZ(2,"table",76),t.TgZ(3,"tr"),t.TgZ(4,"td",77),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.YNc(14,Gw,9,17,"tr",31),t.TgZ(15,"tr"),t.TgZ(16,"td",77),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.YNc(19,Ww,9,17,"tr",31),t.qZA(),t._UZ(20,"br"),t.qZA(),t.TgZ(21,"table",78),t.TgZ(22,"tr"),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.YNc(41,zw,15,12,"tr",79),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,16,"Report_On_Projects")),t.xp6(4),t.AsE("",t.lcZ(10,18,"Customer_Code"),":",null==e.filter.customerCode||""==e.filter.customerCode?"All":e.filter.customerCode,""),t.xp6(3),t.AsE("",t.lcZ(13,20,"Branch_Code"),":",null==e.filter.branchCode||""==e.filter.branchCode?"All":e.filter.branchCode,""),t.xp6(2),t.Q6J("ngIf",e.filter.startDateFrom&&e.filter.startDateTo),t.xp6(3),t.AsE("",t.lcZ(18,22,"Search_Key"),":",e.searchValue,""),t.xp6(2),t.Q6J("ngIf",e.filter.endDateFrom&&e.filter.endDateTo),t.xp6(5),t.hij(" ",t.lcZ(25,24,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(28,26,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(31,28,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(37,32,"End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(40,34,"Branch_Code")," "),t.xp6(2),t.Q6J("ngForOf",e.reportData)}}const Kw=function(){return{standalone:!0}};let tU=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=_,this.pageService=h,this.translate=A,this.displayedColumns=["customerCode","projectCode","Project_Name","branchCode","startDate","endDate","Actions"],this.reportData=[],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.customerSelectionList=[],this.citySelectionList=[],this.isArab=!1,this.filter={customerCode:"",branchCode:""},this.filterDates={startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null}}ngOnInit(){this.isArab=this.utilService.isArabic(),this.form=this.fb.group({}),this.initialLoading()}openDatePicker(e){e.open()}refresh(){this.reportData=[],this.resetFilter()}resetFilter(){this.filter={customerCode:"",branchCode:"",startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null},this.filterDates={startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null},this.applyFilter("")}clearReport(){this.reportData=[]}initialLoading(){this.searchValue="",this.loadCitiesList(),this.loadCustomersList(),this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}loadCitiesList(){this.apiService.getall("Branch/getBranchSelectListForUser").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArab?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}onSortOrder(e){this.reportData=[],"Project_Name"==e.active&&(e.active=this.isArab?"projectNameArb":"projectNameEng"),this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}generateReport(){this.reportData=[];for(let e=0;e<=Math.floor(this.totalItemsCount/100);e++){let o={pageIndex:e,pageSize:100,previousPageIndex:0==e?0:e-1,length:0};this.loadListReport(o.pageIndex,o.pageSize,this.searchValue,this.sortingOrder)}}setFilterDates(){if(null!=this.filterDates.startDateFrom){let e=new Date(this.filterDates.startDateFrom);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.startDateFrom=e}if(null!=this.filterDates.startDateTo){let e=new Date(this.filterDates.startDateTo);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.startDateTo=e}if(null!=this.filterDates.endDateFrom){let e=new Date(this.filterDates.endDateFrom);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.endDateFrom=e}if(null!=this.filterDates.endDateTo){let e=new Date(this.filterDates.endDateTo);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.endDateTo=e}}loadList(e,o,n,s){this.isLoading=!0,this.setFilterDates(),this.oprService.getPaginationWithFilter("Project/getProjectsPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}loadListReport(e,o,n,s){this.isLoading=!0,this.setFilterDates(),this.oprService.getPaginationWithFilter("Project/getProjectsPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.isLoading=!1,this.reportData=0==this.reportData.length?r.items:this.reportData.concat(r.items)},r=>this.utilService.ShowApiErrorMessage(r))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.type="ForProject",c.componentInstance.isArab=this.isArab,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.oprService.openAutoHeightWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openDialogManage2(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}resourceCosting(e){this.openDialogManage(e,g.Oi.create,"Resource_Costing","Save",ie)}logisticsCosting(e){this.openDialogManage(e,g.Oi.create,"Logistics_Vehicle_Costing","Save",ae)}materialCosting(e){this.openDialogManage(e,g.Oi.create,"Material_Costing","Save",se)}financialExpenseCosting(e){this.openDialogManage(e,g.Oi.create,"Financial_Epense_Costing","Save",re)}estimationReport(e){this.openDialogManage(e,g.Oi.create,"Estimation_Cnsolidate_Report","Save",le)}summaryReport(e){this.openDialogManage(e,g.Oi.create,"Estimation_Summary_Report","Save",ce)}convertToContract(e){this.openFullWindow(e,g.Oi.create,"Creating_Contract","Save",$t)}printEstimation(e){this.openDialogManage(e,g.Oi.create,"Estimation_Cnsolidate_Report","Print",me)}assignEmployyesToProjectSite(e){this.openFullWindow(e,g.Oi.create,"Assigning_Employees_To_Site","Save",ge)}mappingEmpToResourceForProjectSite(e){this.openDialogManage(e,g.Oi.create,"Mapping_Employees_To_Resources_For_Site","Save",he)}printProposal(e){this.openDialogManage2(e,g.Oi.create,"Project_Proposal","Print",_e)}shiftPlan(e){this.openDialogManage(e,g.Oi.create,"Shifts_Plan_For_Project","Save",pe)}skillsetPlan(e){this.openDialogManage(e,g.Oi.create,"Skillset_Plan_For_Project","Save",ue)}calendarDays(e){this.openFullWindow(e,g.Oi.create,"Calander_Days","Save",de)}viewContract(e){this.openFullWindow(e,g.Oi.create,"Creating_Contract","View",$t)}employeeAttendance(e){this.openFullWindow(e,g.Oi.create,"Employee_Attendance","View",Ze)}submit(){}openMonthlyRoaster(e){this.openFullWindow(e,g.Oi.create,"Monthly_Roaster","Save",ne)}approveEstimation(e){this.openApprovalDialog(e.branchCode,e.projectCode,g.Oi.create,"Estimation_Approval","Save","EST",Wt)}convertToProposal(e){this.apiService.post("ProjectBudgetCosting/convertProjectToProposal",e).subscribe(o=>{this.utilService.OkMessage(),this.ngOnInit()},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}translateToolTip(e){return`${this.translate.instant(e)}`}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.reportData=[]}viewProjectSites(e){this.openDialogManage(e,g.Oi.create,"List_Of_Sites_In_Project","Pagination",Tw)}uploadFile(e){let o=this.oprService.openAutoWidthDialog(this.dialog,Se);o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewUploadedFile(e){window.open(e.fileUrl)}exportexcel(){let e=document.getElementById("printcontainer");const o=mt.P6.table_to_sheet(e),n=mt.P6.book_new();mt.P6.book_append_sheet(n,o,"Sheet1"),mt.NC(n,"projectsReport.xlsx")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(W),t.Y36(B.N),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-project2"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:130,vars:66,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"outer"],[1,"col-md-4","col-lg-4"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-8","col-lg-8"],[1,"col-md-6","col-lg-6"],[1,"form-group",2,"text-align","center"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click","dateChange"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["picker3",""],["picker4",""],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-6","col-lg-6",2,"align-content","flex-start"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary","icon-refresh",3,"click"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","Project_Name"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","branchCode"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["id","printcontainer","hidden","",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["printTitle","ProjectsReport","printSectionId","printcontainer","ngxPrint","",1,"btn","btn-primary",3,"useExistingCss"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"click",4,"ngIf"],[3,"matTooltip","click"],[1,"icon-eye"],[1,"fas","fa-sticky-note"],[1,"fas","fa-list"],[1,"fas","fa-check-circle"],[1,"fas","fa-print"],[3,"click"],[1,"fas","fa-print",3,"matTooltip"],[1,"far","fa-handshake"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""],["id","printcontainer","hidden",""],["width","100%"],["id","attndTable"],["colspan","2"],["id","attndTable","width","100%"],[4,"ngFor","ngForOf"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",1),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t.TgZ(24,"label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"ng-select",16),t.NdJ("ngModelChange",function(r){return o.filter.branchCode=r})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",17),t.TgZ(29,"div",15),t.TgZ(30,"label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"ng-select",16),t.NdJ("ngModelChange",function(r){return o.filter.customerCode=r})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",18),t.TgZ(35,"div",1),t.TgZ(36,"div",10),t.TgZ(37,"div",19),t.TgZ(38,"label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",18),t.TgZ(42,"div",15),t.TgZ(43,"div",15),t.TgZ(44,"div",20),t.TgZ(45,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.startDateFrom=r})("click",function(){t.CHM(n);const r=t.MAs(50);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",22),t._UZ(48,"mat-datepicker-toggle",23),t._UZ(49,"mat-datepicker",null,24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",18),t.TgZ(52,"div",15),t.TgZ(53,"div",15),t.TgZ(54,"div",20),t.TgZ(55,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.startDateTo=r})("click",function(){t.CHM(n);const r=t.MAs(60);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",22),t._UZ(58,"mat-datepicker-toggle",23),t._UZ(59,"mat-datepicker",null,25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"div",18),t.TgZ(62,"div",1),t.TgZ(63,"div",10),t.TgZ(64,"div",19),t.TgZ(65,"label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",18),t.TgZ(69,"div",15),t.TgZ(70,"div",15),t.TgZ(71,"div",20),t.TgZ(72,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.endDateFrom=r})("click",function(){t.CHM(n);const r=t.MAs(77);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"div",22),t._UZ(75,"mat-datepicker-toggle",23),t._UZ(76,"mat-datepicker",null,26),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(78,"div",18),t.TgZ(79,"div",15),t.TgZ(80,"div",15),t.TgZ(81,"div",20),t.TgZ(82,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.endDateTo=r})("click",function(){t.CHM(n);const r=t.MAs(87);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"div",22),t._UZ(85,"mat-datepicker-toggle",23),t._UZ(86,"mat-datepicker",null,27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"div",1),t.TgZ(89,"div",14),t.TgZ(90,"input",28),t.NdJ("ngModelChange",function(r){return o.searchValue=r})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.TgZ(92,"div",29),t.YNc(93,vw,2,0,"button",30),t.YNc(94,xw,6,1,"span",31),t.TgZ(95,"span"),t._uU(96," \xa0 "),t.TgZ(97,"button",32),t.NdJ("click",function(){return o.refresh()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",33),t._UZ(99,"spinner-loader",34),t.qZA(),t.qZA(),t._UZ(100,"div",35),t.TgZ(101,"div",36),t.ynx(102),t.TgZ(103,"table",37),t.NdJ("matSortChange",function(r){return o.onSortOrder(r)}),t.ynx(104,38),t.YNc(105,qw,3,3,"th",39),t.YNc(106,bw,2,1,"td",40),t.BQk(),t.ynx(107,41),t.YNc(108,yw,3,3,"th",39),t.YNc(109,Sw,2,1,"td",40),t.BQk(),t.ynx(110,42),t.YNc(111,ww,3,3,"th",39),t.YNc(112,Uw,2,1,"td",40),t.BQk(),t.ynx(113,43),t.YNc(114,Dw,3,3,"th",39),t.YNc(115,Lw,3,4,"td",40),t.BQk(),t.ynx(116,44),t.YNc(117,Nw,3,3,"th",39),t.YNc(118,Ew,3,4,"td",40),t.BQk(),t.ynx(119,45),t.YNc(120,Ow,3,3,"th",39),t.YNc(121,kw,2,1,"td",40),t.BQk(),t.ynx(122,46),t.YNc(123,jw,3,3,"th",47),t.YNc(124,Hw,13,10,"td",48),t.BQk(),t.YNc(125,$w,1,0,"tr",49),t.YNc(126,Vw,1,0,"tr",50),t.qZA(),t.BQk(),t.qZA(),t.ynx(127),t.TgZ(128,"mat-paginator",51),t.NdJ("page",function(r){return o.onPageSwitch(r)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(129,Xw,42,36,"div",52)}if(2&e){const n=t.MAs(50),s=t.MAs(60),r=t.MAs(77),c=t.MAs(87);t.xp6(4),t.hij(" ",t.lcZ(5,41,"Projects")," "),t.xp6(6),t.hij(" ",t.lcZ(11,43,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,45,"Projects")),t.xp6(12),t.Oqu(t.lcZ(26,47,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.filter.branchCode),t.xp6(4),t.Oqu(t.lcZ(32,49,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.filter.customerCode),t.xp6(6),t.Oqu(t.lcZ(40,51,"Start_Date")),t.xp6(6),t.s9C("placeholder",t.lcZ(46,53,"From_Date")),t.Q6J("ngModel",o.filterDates.startDateFrom)("matDatepicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(7),t.MGl("placeholder"," ",t.lcZ(56,55,"To_Date"),""),t.Q6J("ngModel",o.filterDates.startDateTo)("matDatepicker",s),t.xp6(3),t.Q6J("for",s),t.xp6(8),t.Oqu(t.lcZ(67,57,"End_Date")),t.xp6(6),t.s9C("placeholder",t.lcZ(73,59,"From_Date")),t.Q6J("ngModel",o.filterDates.endDateFrom)("matDatepicker",r),t.xp6(3),t.Q6J("for",r),t.xp6(7),t.MGl("placeholder"," ",t.lcZ(83,61,"To_Date"),""),t.Q6J("ngModel",o.filterDates.endDateTo)("matDatepicker",c),t.xp6(3),t.Q6J("for",c),t.xp6(5),t.MGl("placeholder","",t.lcZ(91,63,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(65,Kw)),t.xp6(3),t.Q6J("ngIf",0==o.reportData.length),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0),t.xp6(5),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0)}},directives:[Et.w9,l.JJ,l.On,l.Fj,j.hl,j.nW,ft.R9,j.Mq,Z.O5,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,ut.gM,m.XQ,m.Gk,Z.sg],pipes:[f.X$,Z.uU],styles:["#attndTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n    border: solid;\n    border-width: 1px;\n    padding: 5px 5px 5px 5px;\n    text-align: center;\n  }\n\n  #attndTable[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n\n  #printcontainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100%;\n    padding: 10px 10px 10px 10px;\n  }"]}),i})(),eU=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({reasonCode:["REASXXXXXX"],reasonCodeNameEng:["",l.kI.required],reasonCodeNameArb:["",l.kI.required],descriptionEng:["",l.kI.required],descriptionArb:["",l.kI.required],isActive:[!0],isForCustomerVisit:[!1],isForCustomerComplaint:[!1]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("ReasonCode",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0),this.reset())},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("ReasonCode/getReasonCodeById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}reset(){this.form.controls.reasonCode.setValue(""),this.form.controls.reasonCodeNameEng.setValue(""),this.form.controls.reasonCodeNameArb.setValue(""),this.form.controls.descriptionEng.setValue(""),this.form.controls.descriptionArb.setValue(""),this.form.controls.isActive.setValue(!0),this.form.controls.isForCustomerVisit.setValue(!1),this.form.controls.isForCustomerComplaint.setValue(!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-reasoncode"]],features:[t.qOj],decls:80,vars:69,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","reasonCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","reasonCodeNameEng",1,"form-control",3,"placeholder"],["type","text","formControlName","reasonCodeNameArb",1,"form-control",3,"placeholder"],["type","text","formControlName","descriptionEng",1,"form-control",3,"placeholder"],["type","text","formControlName","descriptionArb",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],["color","primary","formControlName","isActive"],["color","primary","formControlName","isForCustomerVisit"],["color","primary","formControlName","isForCustomerComplaint"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"input",10),t.ALo(40,"translate"),t.ALo(41,"translate"),t._UZ(42,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(43,"div",4),t.TgZ(44,"div",5),t.TgZ(45,"label"),t._uU(46),t.ALo(47,"translate"),t.qZA(),t._UZ(48,"input",11),t.ALo(49,"translate"),t.ALo(50,"translate"),t._UZ(51,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(52,"div",12),t.TgZ(53,"div",5),t.TgZ(54,"label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"br"),t._UZ(58,"mat-slide-toggle",13),t.qZA(),t.qZA(),t.TgZ(59,"div",12),t.TgZ(60,"div",5),t.TgZ(61,"label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._UZ(64,"br"),t._UZ(65,"mat-slide-toggle",14),t.qZA(),t.qZA(),t.TgZ(66,"div",12),t.TgZ(67,"div",5),t.TgZ(68,"label"),t._uU(69),t.ALo(70,"translate"),t.qZA(),t._UZ(71,"br"),t._UZ(72,"mat-slide-toggle",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",16),t.TgZ(74,"div",17),t.TgZ(75,"input",18),t.NdJ("click",function(){return o.closeModel()}),t.ALo(76,"translate"),t.qZA(),t._uU(77," \xa0 "),t._UZ(78,"input",19),t.ALo(79,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,27,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,29,"ReasonCode")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,31,"Please_Enter")," ",t.lcZ(14,33,"ReasonCode"),""),t.xp6(3),t.Q6J("control",o.form.controls.reasonCode),t.xp6(4),t.Oqu(t.lcZ(20,35,"ReasonCode_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,37,"Please_Enter")," ",t.lcZ(23,39,"ReasonCode_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.reasonCodeNameEng),t.xp6(4),t.Oqu(t.lcZ(29,41,"ReasonCode_Name_Arab")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,43,"Please_Enter")," ",t.lcZ(32,45,"ReasonCode_Name_Arab"),""),t.xp6(3),t.Q6J("control",o.form.controls.reasonCodeNameArb),t.xp6(4),t.Oqu(t.lcZ(38,47,"Description_Eng")),t.xp6(2),t.hYB("placeholder","",t.lcZ(40,49,"Please_Enter")," ",t.lcZ(41,51,"Description_Eng"),""),t.xp6(3),t.Q6J("control",o.form.controls.descriptionEng),t.xp6(4),t.Oqu(t.lcZ(47,53,"Description_Arb")),t.xp6(2),t.hYB("placeholder","",t.lcZ(49,55,"Please_Enter")," ",t.lcZ(50,57,"Description_Arb"),""),t.xp6(3),t.Q6J("control",o.form.controls.descriptionArb),t.xp6(4),t.Oqu(t.lcZ(56,59,"Is_Active")),t.xp6(7),t.Oqu(t.lcZ(63,61,"IsForCustomerVisit")),t.xp6(7),t.Oqu(t.lcZ(70,63,"IsForCustomerComplaint")),t.xp6(6),t.s9C("value",t.lcZ(76,65,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(79,67,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,jt.Rr],pipes:[f.X$],encapsulation:2}),i})();function oU(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ReasonCode_Code")," "))}function iU(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCode)}}function nU(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ReasonCode_Name_English")," "))}function aU(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameEng)}}function sU(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ReasonCode_Name_Arab")," "))}function rU(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameArb)}}function lU(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Description_Eng")," "))}function cU(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.descriptionEng)}}function pU(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Description_Arb")," "))}function uU(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.descriptionArb)}}function dU(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function _U(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function mU(i,a){1&i&&(t.TgZ(0,"span",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function gU(i,a){if(1&i&&(t.TgZ(0,"td",37),t.YNc(1,_U,3,3,"span",38),t.YNc(2,mU,3,3,"ng-template",null,39,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function hU(i,a){1&i&&(t.TgZ(0,"th",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function ZU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",37),t.TgZ(1,"span",43),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",44),t._uU(3,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function fU(i,a){1&i&&t._UZ(0,"tr",45)}function AU(i,a){1&i&&t._UZ(0,"tr",46)}const CU=function(){return{standalone:!0}};let TU=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.translate=A,this.displayedColumns=["reasonCode","reasonCodeNameEng","reasonCodeNameArb","descriptionEng","descriptionArb","isActive","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ReasonCode/getReasonCodesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,eU);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_ReasonCode","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_ReasonCode","Update")}translateToolTip(e){return`${this.translate.instant(e)}`}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-reasoncodes"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:66,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addreasonCodes","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","reasonCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","reasonCodeNameEng"],["matColumnDef","reasonCodeNameArb"],["matColumnDef","descriptionEng"],["matColumnDef","descriptionArb"],["matColumnDef","isActive"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[3,"matTooltip","click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,oU,3,3,"th",24),t.YNc(43,iU,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,nU,3,3,"th",24),t.YNc(46,aU,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,sU,3,3,"th",24),t.YNc(49,rU,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,lU,3,3,"th",24),t.YNc(52,cU,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,pU,3,3,"th",24),t.YNc(55,uU,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,dU,3,3,"th",24),t.YNc(58,gU,4,2,"td",25),t.BQk(),t.ynx(59,31),t.YNc(60,hU,3,3,"th",32),t.YNc(61,ZU,4,1,"td",25),t.BQk(),t.YNc(62,fU,1,0,"tr",33),t.YNc(63,AU,1,0,"tr",34),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.ynx(64),t.TgZ(65,"mat-paginator",35),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"ReasonCodes")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"ReasonCodes")),t.xp6(10),t.hij("",t.lcZ(27,24,"ReasonCode_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,CU)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_ReasonCode")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function vU(i,a){1&i&&(t.TgZ(0,"button",21),t.ALo(1,"translate"),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i&&(t.MGl("printTitle"," ",t.lcZ(1,3,"Attedance_Status_Report"),""),t.Q6J("useExistingCss",!0),t.xp6(2),t.hij(" ",t.lcZ(3,5,"Print")," "))}function xU(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.uIk("colspan",null==e.result?null:e.result.daysInMonth2),t.xp6(1),t.AsE("",null==e.result?null:e.result.month2Text,"-",null==e.result?null:e.result.year2Text,"")}}function qU(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.day," ")}}function bU(i,a){if(1&i&&(t.TgZ(0,"td",38),t.TgZ(1,"span",39),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw().index,s=t.oxw(3);t.s9C("id",s.getBgColor(e)),t.xp6(1),t.Q6J("matTooltip",s.getToolTip(n,o)),t.xp6(1),t.hij(" ",s.getStatusFlag(e)," ")}}function yU(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.YNc(11,bU,3,3,"td",37),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",e.branchCode," "),t.xp6(2),t.hij(" ",e.customerCode," "),t.xp6(2),t.hij(" ",e.projectCode," "),t.xp6(2),t.hij(" ",e.siteCode," "),t.xp6(1),t.Q6J("ngForOf",e.attendanceStatusMatrix)}}function SU(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"table",34),t.TgZ(2,"tr"),t._UZ(3,"th",35),t.ynx(4),t.TgZ(5,"th"),t._uU(6),t.qZA(),t.BQk(),t.YNc(7,xU,3,3,"ng-container",33),t.qZA(),t.TgZ(8,"tr"),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,qU,2,1,"th",36),t.qZA(),t.YNc(25,yU,12,6,"tr",36),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(5),t.uIk("colspan",null==e.result?null:e.result.daysInMonth1),t.xp6(1),t.AsE("",null==e.result?null:e.result.month1Text,"-",null==e.result?null:e.result.year1Text,""),t.xp6(1),t.Q6J("ngIf",!(null!=e.result&&e.result.isSingleMonth)),t.xp6(3),t.hij(" ",t.lcZ(11,11,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(14,13,"Branch_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(17,15,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(20,17,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(23,19,"Site_Code")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(1),t.Q6J("ngForOf",null==e.result?null:e.result.rows)}}function wU(i,a){if(1&i&&(t.TgZ(0,"div",22),t.TgZ(1,"div",23),t.TgZ(2,"table",24),t.TgZ(3,"tr"),t.TgZ(4,"td",25),t.TgZ(5,"h5",26),t.TgZ(6,"strong"),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"td",27),t._UZ(9,"img",28),t.qZA(),t.TgZ(10,"td",25),t.TgZ(11,"h5",29),t.TgZ(12,"strong"),t._uU(13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td"),t.TgZ(16,"div",30),t._uU(17),t._UZ(18,"br"),t._uU(19),t._UZ(20,"br"),t._uU(21),t.ALo(22,"translate"),t._UZ(23,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"tr",31),t.TgZ(25,"td",32),t._uU(26),t.ALo(27,"date"),t.ALo(28,"date"),t.ALo(29,"translate"),t.ALo(30,"translate"),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(32,SU,26,21,"div",33),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(7),t.hij(" ",e.company.companyName," "),t.xp6(2),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.company.companyNameAr," "),t.xp6(4),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(22,16,"Tel_Phone")," : ",e.company.phone," "),t.xp6(5),t.Ywz(" The Statement of Attedance_Status_Report for Date Range: ",t.xi3(27,18,e.fromDate,"dd/MM/yyyy")," to ",t.xi3(28,21,e.toDate,"dd/MM/yyyy")," \xa0 ",t.lcZ(29,24,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," \xa0",t.lcZ(30,26,"Branch_Code"),": ",null!=e.cityCode&&""!=e.cityCode?e.cityCode:"all"," \xa0",t.lcZ(31,28,"Status_Code"),": ",null!=e.statusCode&&""!=e.statusCode?e.statusCode:"all"," "),t.xp6(6),t.Q6J("ngIf",0!=(null==e.result||null==e.result.columns?null:e.result.columns.length))}}let UU=(()=>{class i extends y{constructor(e,o,n,s,r,c,p){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.translate=c,this.datepipe=p,this.List=[],this.isLoading=!1,this.projectSitesList=[],this.customersList=[],this.options=[],this.customerSelectionList=[{text:"54500025",value:"54500025"}],this.customerCode="",this.statusSelectionList=[{text:"Attendance_Drafted",value:"Attendance_Drafted"},{text:"Attendance_Not_Drafted",value:"Attendance_Not_Drafted"},{text:"Attendance_Posted",value:"Attendance_Posted"},{text:"Attendance_Not_Posted",value:"Attendance_Not_Posted"}],this.statusCode="",this.serviceSelectionList=[],this.serviceCode="",this.citySelectionList=[],this.cityCode="",this.curDate=new Date,this.isArabic=!1,this.totalItemsCount=0,this.pageSize=10,this.pageNumber=0}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}setForm(){this.customerCode=this.serviceCode=this.cityCode=this.statusCode="",this.projectSitesList=[],this.customersList=[],this.date="",this.InputQuery={date:"",customerCode:"",statusCode:"",cityCode:"",serviceCode:""},this.result.columns=null}search(){if(this.projectSitesList=[],this.customersList=[],this.date){let e=new Date(this.date);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.InputQuery={payrollStartDate:e,customerCode:this.customerCode,attendanceStatus:this.statusCode,cityCode:this.cityCode,branchCode:this.cityCode,pageNumber:this.pageNumber,pageSize:this.pageSize},this.isLoading=!0,this.apiService.post("Reports/getAttendanceStatusPayrollReport",this.InputQuery).subscribe(o=>{null!=o?(this.result=o,this.company=o.company,this.totalItemsCount=o.totalItemsCount,this.loadCompleteReport(this.InputQuery)):this.isLoading=!1})}else this.notifyService.showError("Select Dates")}loadCompleteReport(e){this.InputQuery.pageNumber++,e.pageNumber>Math.floor(this.totalItemsCount/this.pageSize)?this.isLoading=!1:this.apiService.post("Reports/getAttendanceStatusPayrollReport",this.InputQuery).subscribe(o=>{this.result.rows=this.result.rows.concat(o.rows),this.loadCompleteReport(e)})}openPrint(){if(this.result.rows.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}getProjectsOfCustomer(e){return this.projectSitesList.filter(o=>o.customerCode==e)}getTotal(e){let o={inProgress:0,closed:0,completed:0,suspended:0,inActive:0,total:0};return this.projectSitesList.forEach(n=>{n.customerCode==e&&("Closed"==n.status?(o.inActive++,o.closed++):"InProgress"==n.status?o.inProgress++:"Suspended"==n.status?(o.inActive++,o.suspended++):"Completed"==n.status?(o.completed++,o.inActive++):"InActive"==n.status&&o.inActive++,o.total++)}),o}clearProjectsData(){this.customersList=[],this.projectSitesList=[],this.customersList=[],this.result=null,this.company=null}getBgColor(e){return e.isAttnPosted?"bgGreen":e.isAttnDrafted?"bgOrange":"bgRed"}getStatusFlag(e){return e.isAttnPosted?"P":e.isAttnDrafted?"D":"N"}getToolTip(e,o){return`${this.datepipe.transform(this.result.columns[o].attnDate,"dd-MM-yyyy")}`}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(l.qu),t.Y36(w.g),t.Y36(f.sK),t.Y36(Z.uU))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attendance-status-report"]],features:[t.qOj],decls:53,vars:33,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],["class","btn btn-primary","printSectionId","printcontainer","ngxPrint","","data-toggle","modal",3,"useExistingCss","printTitle",4,"ngIf"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],["printSectionId","printcontainer","ngxPrint","","data-toggle","modal",1,"btn","btn-primary",3,"useExistingCss","printTitle"],[1,"table-responsive"],["id","printcontainer"],["cellpadding","10","cellspacing","5","width","100%",2,"padding-bottom","5px","background-color","white"],[2,"width","35%"],[2,"text-align","left"],[2,"text-align","center"],[1,"float-center",2,"width","200px","height","150px",3,"src"],[2,"text-align","right"],[1,"font-weight-medium"],["width","100%"],["colspan","3","width","100%",2,"text-align","center"],[4,"ngIf"],["id","attndTable"],["colspan","5"],[4,"ngFor","ngForOf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[3,"matTooltip"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.cityCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.customerCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",10),t.NdJ("ngModelChange",function(r){return o.statusCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",6),t.TgZ(28,"div",7),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",7),t.TgZ(33,"div",11),t.TgZ(34,"input",12),t.NdJ("ngModelChange",function(r){return o.date=r})("click",function(){t.CHM(n);const r=t.MAs(40);return o.openDatePicker(r)}),t.ALo(35,"translate"),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"div",13),t._UZ(38,"mat-datepicker-toggle",14),t._UZ(39,"mat-datepicker",null,15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",9),t.TgZ(42,"div",7),t._UZ(43,"br"),t.TgZ(44,"button",16),t.NdJ("click",function(){return o.search()}),t._uU(45,"Search"),t.qZA(),t._uU(46," \xa0 "),t.TgZ(47,"button",16),t.NdJ("click",function(){return o.setForm()}),t._UZ(48,"i",17),t.qZA(),t._uU(49," \xa0 "),t.YNc(50,vU,4,7,"button",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(51,"spinner-loader",19),t.YNc(52,wU,33,30,"div",20),t.qZA()}if(2&e){const n=t.MAs(40);t.xp6(4),t.hij(" ",t.lcZ(5,19,"Attedance_Status_Report")," "),t.xp6(8),t.Oqu(t.lcZ(13,21,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,23,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,25,"Status_Code")),t.xp6(2),t.Q6J("items",o.statusSelectionList)("ngModel",o.statusCode),t.xp6(4),t.Oqu(t.lcZ(31,27,"Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(35,29,"Please_Enter")," ",t.lcZ(36,31,"Date"),""),t.Q6J("ngModel",o.date)("matDatepicker",n),t.xp6(4),t.Q6J("for",n),t.xp6(12),t.Q6J("ngIf",null==o.result?null:o.result.columns),t.xp6(1),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",null==o.result?null:o.result.columns)}},directives:[Et.w9,l.JJ,l.On,l.Fj,j.hl,j.nW,ft.R9,j.Mq,Z.O5,Zt.r,Z.sg,ut.gM],pipes:[f.X$,Z.uU],styles:["#attndTable[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n   padding :10px 10px 10px 10px;\n  }\n  #attndTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n\n    border: solid;\n    border-width: 1px;\n    border-color: black;\n    padding: 5px 5px 5px 5px;\n    text-align: center;\n    background-color: white;\n  }\n\n  #bgOrange[_ngcontent-%COMP%] {\n    color: #ffd800;\n  }\n\n  #bgGreen[_ngcontent-%COMP%] {\n    color: #4cff00;\n  }\n\n  #bgRed[_ngcontent-%COMP%] {\n    color: red;\n  }\n\n  @media print {\n    *[_ngcontent-%COMP%] {\n      color: black;\n      background: white;\n    }\n\n    \n  }"]}),i})();function DU(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1," Loading Data "),t.qZA())}function LU(i,a){1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",35),t._uU(3," No Data Found "),t.qZA(),t.qZA(),t.BQk())}function NU(i,a){1&i&&(t.TgZ(0,"tr",26),t.TgZ(1,"th",27),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",27),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",27),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,3,"Skillset_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(6,5,"Skillset_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"Qty")," "))}function EU(i,a){if(1&i&&(t.TgZ(0,"tr",26),t.TgZ(1,"td",28),t._uU(2),t.qZA(),t.TgZ(3,"td",28),t._uU(4),t.qZA(),t.TgZ(5,"td",28),t._uU(6),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(5);t.xp6(2),t.hij(" ",null==e?null:e.skillSetCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.nameInArabic:null==e?null:e.nameInEnglish," "),t.xp6(2),t.hij(" ",null==e?null:e.quantity," ")}}function OU(i,a){if(1&i&&(t.TgZ(0,"table",25),t.YNc(1,LU,4,0,"ng-container",30),t.YNc(2,NU,10,9,"tr",32),t.YNc(3,EU,7,3,"tr",33),t.TgZ(4,"tr"),t.TgZ(5,"th",34),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"td",28),t._uU(9),t.qZA(),t.qZA(),t._UZ(10,"tbody"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.skillsetsList.length)),t.xp6(1),t.Q6J("ngIf",0!=(null==e?null:e.skillsetsList.length)),t.xp6(1),t.Q6J("ngForOf",null==e?null:e.skillsetsList),t.xp6(3),t.hij(" ",t.lcZ(7,5,"Total"),"\n"),t.xp6(3),t.hij(" ",null==e?null:e.totalSkillSetsQuantity," ")}}function kU(i,a){if(1&i&&(t.ynx(0,24),t.TgZ(1,"table",25),t.TgZ(2,"tr",26),t.TgZ(3,"th",27),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",27),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",27),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",27),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",27),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",27),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",27),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.TgZ(24,"tr",26),t.TgZ(25,"td",28),t._uU(26),t.qZA(),t.TgZ(27,"td",28),t._uU(28),t.qZA(),t.TgZ(29,"td",28),t._uU(30),t.qZA(),t.TgZ(31,"td",28),t._uU(32),t.qZA(),t.TgZ(33,"td",28),t._uU(34),t.ALo(35,"date"),t.qZA(),t.TgZ(36,"td",28),t._uU(37),t.ALo(38,"date"),t.qZA(),t.TgZ(39,"td",28),t._uU(40),t.qZA(),t.qZA(),t.qZA(),t.ynx(41,24),t.YNc(42,DU,2,0,"span",30),t.YNc(43,OU,11,7,"table",31),t.BQk(),t.BQk()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(4),t.hij(" ",t.lcZ(5,16,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(8,18,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(11,20,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(14,22,"Site_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(17,24,"Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(20,26,"End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(23,28,"Status")," "),t.xp6(4),t.hij(" ",null==e?null:e.projectCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.projectNameArb:null==e?null:e.projectNameEng," "),t.xp6(2),t.hij(" ",null==e?null:e.siteCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.siteNameArb:null==e?null:e.siteNameEng," "),t.xp6(2),t.hij(" ",t.xi3(35,30,null==e?null:e.startDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",t.xi3(38,33,null==e?null:e.endDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",null==e?null:e.status," "),t.xp6(2),t.Q6J("ngIf",null==(null==e?null:e.skillsetsList)),t.xp6(1),t.Q6J("ngIf",null!=(null==e?null:e.skillsetsList))}}function jU(i,a){if(1&i&&(t.TgZ(0,"div",24),t.ynx(1,24),t.TgZ(2,"table",25),t.TgZ(3,"tr",26),t.TgZ(4,"th",27),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"td",28),t._uU(8),t.qZA(),t.TgZ(9,"th",27),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"td",28),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"th",27),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"td",29),t._uU(19),t.qZA(),t.qZA(),t._UZ(20,"tbody"),t.qZA(),t.BQk(),t.YNc(21,kU,44,36,"ng-container",23),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,7,"Customer_Code")," "),t.xp6(3),t.hij(" ",e.custCode," "),t.xp6(2),t.hij(" ",t.lcZ(11,9,"Customer_Name")," "),t.xp6(3),t.hij(" ",o.isArabic?e.custArbName:e.custName," "),t.xp6(3),t.hij(" ",t.lcZ(17,11,"Customer_Address")," "),t.xp6(3),t.hij(" ",e.custAddress1," "),t.xp6(2),t.Q6J("ngForOf",o.getProjectsOfCustomer(e.custCode))}}function MU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"div",17),t.TgZ(7,"table",18),t.TgZ(8,"tr"),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td",19),t._UZ(13,"img",20),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td"),t.TgZ(16,"div",21),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"td",19),t._uU(27),t.ALo(28,"translate"),t.ALo(29,"translate"),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",22),t.YNc(32,jU,22,13,"div",23),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,14,"Print")," "),t.xp6(8),t.hij(" ",e.company.companyName,""),t.xp6(3),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,16,"Tel_Phone")," : ",e.company.phone," "),t.xp6(5),t.gL8(" The Statement of Projects Sites ",t.lcZ(28,18,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," \xa0",t.lcZ(29,20,"Branch_Code"),": ",null!=e.cityCode&&""!=e.customerCode?e.cityCode:"all"," \xa0",t.lcZ(30,22,"Site_Code"),": ",null!=e.siteCode&&""!=e.siteCode?e.siteCode:"all"," "),t.xp6(5),t.Q6J("ngForOf",e.customersList)}}let RU=(()=>{class i extends y{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.projectSitesList=[],this.customersList=[],this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[],this.siteSelectionList=[],this.customerCode="",this.citySelectionList=[],this.cityCode="",this.siteCode="",this.curDate=new Date,this.isArabic=!1}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList(),this.loadSiteSelectionList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadProjectSites(){this.apiService.getall("ProjectSites/getSelectProjectSitesList").subscribe(e=>{this.projectSitesList=e,this.projectSitesList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}onSelectCustomer(){this.clearProjectsData(),this.siteCode="",this.loadSiteSelectionList()}loadSiteSelectionList(){""!=this.customerCode&&null!=this.customerCode?this.apiService.getall("ProjectSites/getSelectProjectSitesListByCustomerCode/"+this.customerCode).subscribe(e=>{this.siteSelectionList=e,this.siteSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})}):this.apiService.getall("ProjectSites/getSelectProjectSitesList").subscribe(e=>{this.siteSelectionList=e,this.siteSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.customerCode=this.cityCode,this.projectSitesList=[],this.customersList=[],this.InputQuery={customerCode:"",siteCode:"",cityCode:""}}search(){this.projectSitesList=[],this.customersList=[],this.InputQuery={customerCode:null==this.customerCode?"":this.customerCode,cityCode:null==this.cityCode?"":this.cityCode,siteCode:null==this.siteCode?"":this.siteCode},this.isLoading=!0,this.apiService.post("Reports/getSkillsetsOnProjectsReports",this.InputQuery).subscribe(e=>{var o;if(null!=e)if(this.projectSitesList=e.projectSites,this.customersList=e.customers,this.company=e.company,0==(null===(o=this.projectSitesList)||void 0===o?void 0:o.length))this.isLoading=!1;else for(let n=0;n<this.projectSitesList.length;n+=50){let s=[];for(let r=n;r<n+50&&r<this.projectSitesList.length;r++)s.push(this.projectSitesList[r]);this.apiService.post("Reports/getSkillsetsOnProjectsReportsByProjectSites",s).subscribe(r=>{let c=r;for(let p=0;p<c.length;p++)this.projectSitesList[n+p]=c[p],n+p>=this.projectSitesList.length-1&&(this.isLoading=!1)})}else this.isLoading=!1})}openPrint(){if(console.log(this.projectSitesList),this.projectSitesList.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}getProjectsOfCustomer(e){return this.projectSitesList.filter(o=>o.customerCode==e)}clearProjectsData(){this.customersList=[],this.projectSitesList=[],this.customersList=[],this.company=null,this.loadSiteSelectionList()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-count-of-skillsets"]],features:[t.qOj],decls:37,vars:20,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],[1,"col-md-4","col-lg-4"],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["id","printcontainer",1,"outer"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","center"],[2,"width","200px","height","150px",3,"src"],[1,"font-weight-medium"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],["style","padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],[2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","background","#efefef"],[2,"text-align","left"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["colspan","3",2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],[4,"ngIf"],["style","width: 100%; background: #efefef;","border","0","cellpadding","0","cellspacing","0","width","100%",4,"ngIf"],["style","text-align:left",4,"ngIf"],["style","text-align:left",4,"ngFor","ngForOf"],["colspan","2",2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"text-align","center","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.cityCode=s})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.customerCode=s})("change",function(){return o.onSelectCustomer()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",10),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.siteCode=s})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",9),t.TgZ(28,"div",7),t._UZ(29,"br"),t.TgZ(30,"button",11),t.NdJ("click",function(){return o.search()}),t._uU(31,"Search"),t.qZA(),t._uU(32," \xa0 "),t.TgZ(33,"button",11),t.NdJ("click",function(){return o.setForm()}),t._UZ(34,"i",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(35,"spinner-loader",13),t.YNc(36,MU,33,24,"div",14),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,12,"Skillsets_Count_On_Project")," "),t.xp6(8),t.Oqu(t.lcZ(13,14,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,16,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,18,"Site_Code")),t.xp6(2),t.Q6J("items",o.siteSelectionList)("ngModel",o.siteCode),t.xp6(9),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company))},directives:[Et.w9,l.JJ,l.On,Zt.r,Z.O5,Z.sg],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function PU(i,a){if(1&i&&(t.TgZ(0,"tr",30),t.TgZ(1,"td",34),t._uU(2),t.qZA(),t.TgZ(3,"td",34),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.TgZ(9,"td",34),t._uU(10),t.qZA(),t.TgZ(11,"td",34),t._uU(12),t.qZA(),t.TgZ(13,"td",34),t._uU(14),t.qZA(),t.TgZ(15,"td",34),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);let n,s,r,c,p,u;t.xp6(2),t.hij(" ",e.custCode," "),t.xp6(2),t.hij(" ",o.isArabic?e.custArbName:e.custName," "),t.xp6(2),t.hij(" ",null==(n=o.getTotal(e.custCode))?null:n.inActive," "),t.xp6(2),t.hij(" ",null==(s=o.getTotal(e.custCode))?null:s.closed," "),t.xp6(2),t.hij(" ",null==(r=o.getTotal(e.custCode))?null:r.inProgress," "),t.xp6(2),t.hij(" ",null==(c=o.getTotal(e.custCode))?null:c.suspended," "),t.xp6(2),t.hij(" ",null==(p=o.getTotal(e.custCode))?null:p.completed," "),t.xp6(2),t.hij(" ",null==(u=o.getTotal(e.custCode))?null:u.total," ")}}function FU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"div",24),t.TgZ(7,"table",25),t.TgZ(8,"tr"),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td",26),t._UZ(13,"img",27),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td"),t.TgZ(16,"div",28),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"td",26),t._uU(27),t.ALo(28,"date"),t.ALo(29,"date"),t.ALo(30,"translate"),t.ALo(31,"translate"),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",29),t.ynx(35,30),t.TgZ(36,"table",31),t.TgZ(37,"tr"),t.TgZ(38,"th",32),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th",32),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th",32),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th",32),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"th",32),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"th",32),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"th",32),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"th",32),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.qZA(),t.YNc(62,PU,17,8,"tr",33),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,26,"Print")," "),t.xp6(8),t.hij(" ",e.company.companyName,""),t.xp6(3),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,28,"Tel_Phone")," : ",e.company.phone," "),t.xp6(5),t.qoO([" The Statement of Projects Sites for Date Range: ",t.xi3(28,30,e.fromDate,"dd/MM/yyyy")," to ",t.xi3(29,33,e.toDate,"dd/MM/yyyy")," \xa0 ",t.lcZ(30,36,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," \xa0",t.lcZ(31,38,"Branch_Code"),": ",null!=e.cityCode&&""!=e.cityCode?e.cityCode:"all"," \xa0",t.lcZ(32,40,"Service_Code"),": ",null!=e.serviceCode&&""!=e.serviceCode?e.serviceCode:"all"," \xa0",t.lcZ(33,42,"Status_Code"),": ",null!=e.statusCode&&""!=e.statusCode?e.statusCode:"all"," "]),t.xp6(12),t.hij(" ",t.lcZ(40,44,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(43,46,"Customer_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(46,48,"InActive")," "),t.xp6(3),t.hij(" ",t.lcZ(49,50,"Closed")," "),t.xp6(3),t.hij(" ",t.lcZ(52,52,"InProgress")," "),t.xp6(3),t.hij(" ",t.lcZ(55,54,"Suspended")," "),t.xp6(3),t.hij(" ",t.lcZ(58,56,"Completed")," "),t.xp6(3),t.hij(" ",t.lcZ(61,58,"Total")," "),t.xp6(2),t.Q6J("ngForOf",e.customersList)}}let IU=(()=>{class i extends y{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.projectSitesList=[],this.customersList=[],this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[{text:"54500025",value:"54500025"}],this.customerCode="",this.statusSelectionList=[{text:"InProgress",value:"InProgress"},{text:"Closed",value:"Closed"},{text:"Suspended",value:"Suspended"},{text:"InActive",value:"InActive"},{text:"Completed",value:"Completed"}],this.statusCode="",this.serviceSelectionList=[],this.serviceCode="",this.citySelectionList=[],this.cityCode="",this.curDate=new Date,this.isArabic=!1}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList(),this.loadServiceCodesList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadServiceCodesList(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceSelectionList=e,this.serviceSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.customerCode=this.serviceCode=this.cityCode=this.statusCode="",this.projectSitesList=[],this.customersList=[],this.InputQuery={fromDate:this.fromDate,todate:this.toDate,customerCode:"",statusCode:"",cityCode:"",serviceCode:""}}search(){this.projectSitesList=[],this.customersList=[];let e=new Date(this.fromDate);e.setMinutes(e.getMinutes()-e.getTimezoneOffset());let o=new Date(this.toDate);o.setMinutes(e.getMinutes()-o.getTimezoneOffset()),this.InputQuery={fromDate:e,todate:o,customerCode:null==this.customerCode?"":this.customerCode,statusCode:null==this.statusCode?"":this.statusCode,cityCode:null==this.cityCode?"":this.cityCode,serviceCode:null==this.serviceCode?"":this.serviceCode},this.fromDate&&this.toDate?(this.isLoading=!0,this.apiService.post("Reports/getProjectsCountMatrixReports",this.InputQuery).subscribe(n=>{if(null!=n)if(this.projectSitesList=n.projectSites,this.customersList=n.customers,this.company=n.company,this.projectSitesList.length>0)for(let s=0;s<this.projectSitesList.length;s+=50){let r=[];for(let c=s;c<s+50&&c<this.projectSitesList.length;c++)r.push(this.projectSitesList[c]);this.apiService.post("Reports/getProjectsCountReportByProjectSites",r).subscribe(c=>{let p=c;for(let u=0;u<p.length;u++)this.projectSitesList[s+u]=p[u],s+u>=this.projectSitesList.length-1&&(this.isLoading=!1)})}else this.isLoading=!1;else this.isLoading=!1})):this.notifyService.showError("Select Dates")}openPrint(){if(this.projectSitesList.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}getProjectsOfCustomer(e){return this.projectSitesList.filter(o=>o.customerCode==e)}getTotal(e){let o={inProgress:0,closed:0,completed:0,suspended:0,inActive:0,total:0};return this.projectSitesList.forEach(n=>{n.customerCode==e&&("Closed"==n.status?(o.inActive++,o.closed++):"InProgress"==n.status?o.inProgress++:"Suspended"==n.status?(o.inActive++,o.suspended++):"Completed"==n.status?(o.completed++,o.inActive++):"InActive"==n.status&&o.inActive++,o.total++)}),o}clearProjectsData(){this.customersList=[],this.projectSitesList=[],this.customersList=[],this.company=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-projects-count-matrix"]],features:[t.qOj],decls:71,vars:49,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-3","col-lg-3"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["id","printcontainer",1,"outer"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","center"],[2,"width","200px","height","150px",3,"src"],[1,"font-weight-medium"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],[2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","background","#efefef"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["style","padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.cityCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.customerCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.serviceCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",6),t.TgZ(28,"div",7),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ng-select",10),t.NdJ("ngModelChange",function(r){return o.statusCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"div",7),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div",7),t.TgZ(39,"div",12),t.TgZ(40,"input",13),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(46);return o.openDatePicker(r)}),t.ALo(41,"translate"),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"div",14),t._UZ(44,"mat-datepicker-toggle",15),t._UZ(45,"mat-datepicker",null,16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"div",7),t.TgZ(49,"label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"div",7),t.TgZ(53,"div",12),t.TgZ(54,"input",13),t.NdJ("ngModelChange",function(r){return o.toDate=r})("click",function(){t.CHM(n);const r=t.MAs(60);return o.openDatePicker(r)}),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",14),t._UZ(58,"mat-datepicker-toggle",15),t._UZ(59,"mat-datepicker",null,17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"div",9),t.TgZ(62,"div",7),t._UZ(63,"br"),t.TgZ(64,"button",18),t.NdJ("click",function(){return o.search()}),t._uU(65,"Search"),t.qZA(),t._uU(66," \xa0 "),t.TgZ(67,"button",18),t.NdJ("click",function(){return o.setForm()}),t._UZ(68,"i",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(69,"spinner-loader",20),t.YNc(70,FU,63,60,"div",21),t.qZA()}if(2&e){const n=t.MAs(46),s=t.MAs(60);t.xp6(4),t.hij(" ",t.lcZ(5,27,"Project_Count_Matrix")," "),t.xp6(8),t.Oqu(t.lcZ(13,29,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,31,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,33,"Service_Code")),t.xp6(2),t.Q6J("items",o.serviceSelectionList)("ngModel",o.serviceCode),t.xp6(4),t.Oqu(t.lcZ(31,35,"Status_Code")),t.xp6(2),t.Q6J("items",o.statusSelectionList)("ngModel",o.statusCode),t.xp6(4),t.Oqu(t.lcZ(37,37,"From_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(41,39,"Please_Enter")," ",t.lcZ(42,41,"From_Date"),""),t.Q6J("ngModel",o.fromDate)("matDatepicker",n),t.xp6(4),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(51,43,"To_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(55,45,"Please_Enter")," ",t.lcZ(56,47,"To_Date"),""),t.Q6J("ngModel",o.toDate)("matDatepicker",s),t.xp6(4),t.Q6J("for",s),t.xp6(11),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company)}},directives:[Et.w9,l.JJ,l.On,l.Fj,j.hl,j.nW,ft.R9,j.Mq,Zt.r,Z.O5,Z.sg],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function YU(i,a){if(1&i&&(t.TgZ(0,"tr",33),t.TgZ(1,"td",35),t._uU(2),t.qZA(),t.TgZ(3,"td",35),t._uU(4),t.qZA(),t.TgZ(5,"td",35),t._uU(6),t.qZA(),t.TgZ(7,"td",35),t._uU(8),t.qZA(),t.TgZ(9,"td",35),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",35),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"td",35),t._uU(16),t.qZA(),t.TgZ(17,"td",41),t._uU(18),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(2),t.hij(" ",null==e?null:e.projectCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.projectNameArb:null==e?null:e.projectNameEng," "),t.xp6(2),t.hij(" ",null==e?null:e.siteCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.siteNameArb:null==e?null:e.siteNameEng," "),t.xp6(2),t.hij(" ",t.xi3(11,8,null==e?null:e.startDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",t.xi3(14,11,null==e?null:e.endDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",null==e?null:e.status," "),t.xp6(2),t.hij(" ",null==e?null:e.estimationCost," ")}}function JU(i,a){if(1&i&&(t.TgZ(0,"div",31),t.ynx(1,31),t.TgZ(2,"table",32),t.TgZ(3,"tr",33),t.TgZ(4,"th",34),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"td",35),t._uU(8),t.qZA(),t.TgZ(9,"th",34),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"td",35),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"th",34),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"td",36),t._uU(19),t.qZA(),t.qZA(),t._UZ(20,"tbody"),t.qZA(),t.BQk(),t.ynx(21,31),t.TgZ(22,"table",37),t.TgZ(23,"tr",33),t.TgZ(24,"th",34),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th",34),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th",34),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th",34),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"th",34),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th",34),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"th",34),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"th",34),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.YNc(48,YU,19,14,"tr",38),t.TgZ(49,"tr",39),t.TgZ(50,"td",40),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"td",34),t._uU(54),t.qZA(),t.qZA(),t._UZ(55,"tbody"),t.qZA(),t.BQk(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);let n;t.xp6(5),t.hij(" ",t.lcZ(6,17,"Customer_Code")," "),t.xp6(3),t.hij(" ",e.custCode," "),t.xp6(2),t.hij(" ",t.lcZ(11,19,"Customer_Name")," "),t.xp6(3),t.hij(" ",o.isArabic?e.custArbName:e.custName," "),t.xp6(3),t.hij(" ",t.lcZ(17,21,"Customer_Address")," "),t.xp6(3),t.hij(" ",e.custAddress1," "),t.xp6(6),t.hij(" ",t.lcZ(26,23,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(29,25,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(32,27,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(35,29,"Site_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(38,31,"Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(41,33,"End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(44,35,"Status")," "),t.xp6(3),t.hij(" ",t.lcZ(47,37,"Estimation_Cost")," "),t.xp6(2),t.Q6J("ngForOf",o.getProjectsOfCustomer(e.custCode)),t.xp6(3),t.hij(" ",t.lcZ(52,39,"Total")," "),t.xp6(3),t.hij(" ",null==(n=o.getTotal(e.custCode))?null:n.estimationCost," ")}}function QU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"div",24),t.TgZ(7,"table",25),t.TgZ(8,"tr"),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td",26),t._UZ(13,"img",27),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td"),t.TgZ(16,"div",28),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"td",26),t._uU(27),t.ALo(28,"date"),t.ALo(29,"date"),t.ALo(30,"translate"),t.ALo(31,"translate"),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",29),t.YNc(35,JU,56,41,"div",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,18,"Print")," "),t.xp6(8),t.hij(" ",e.company.companyName,""),t.xp6(3),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,20,"Tel_Phone")," : ",e.company.phone," "),t.xp6(5),t.qoO([" The Statement of Projects Sites for Date Range: ",t.xi3(28,22,e.fromDate,"dd/MM/yyyy")," to ",t.xi3(29,25,e.toDate,"dd/MM/yyyy")," \xa0 ",t.lcZ(30,28,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," \xa0",t.lcZ(31,30,"Branch_Code"),": ",null!=e.cityCode&&""!=e.customerCode?e.cityCode:"all"," \xa0",t.lcZ(32,32,"Service_Code"),": ",null!=e.serviceCode&&""!=e.serviceCode?e.serviceCode:"all"," \xa0",t.lcZ(33,34,"Status_Code"),": ",null!=e.statusCode&&""!=e.statusCode?e.statusCode:"all"," "]),t.xp6(8),t.Q6J("ngForOf",e.customersList)}}let BU=(()=>{class i extends y{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.projectSitesList=[],this.customersList=[],this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[{text:"54500025",value:"54500025"}],this.customerCode="",this.statusSelectionList=[{text:"InProgress",value:"InProgress"},{text:"Closed",value:"Closed"},{text:"Suspended",value:"Suspended"},{text:"InActive",value:"InActive"},{text:"Completed",value:"Completed"}],this.statusCode="",this.serviceSelectionList=[],this.serviceCode="",this.citySelectionList=[],this.cityCode="",this.curDate=new Date,this.isArabic=!1}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList(),this.loadServiceCodesList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadServiceCodesList(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceSelectionList=e,this.serviceSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.customerCode=this.serviceCode=this.cityCode=this.statusCode="",this.projectSitesList=[],this.customersList=[],this.InputQuery={fromDate:this.fromDate,todate:this.toDate,customerCode:"",statusCode:"",cityCode:"",serviceCode:""}}search(){this.projectSitesList=[],this.customersList=[];let e=new Date(this.fromDate);e.setMinutes(e.getMinutes()-e.getTimezoneOffset());let o=new Date(this.toDate);o.setMinutes(e.getMinutes()-o.getTimezoneOffset()),this.InputQuery={fromDate:e,todate:o,customerCode:null==this.customerCode?"":this.customerCode,statusCode:null==this.statusCode?"":this.statusCode,cityCode:null==this.cityCode?"":this.cityCode,serviceCode:null==this.serviceCode?"":this.serviceCode},this.fromDate&&this.toDate?(this.isLoading=!0,this.apiService.post("Reports/getProjectSitesReports",this.InputQuery).subscribe(n=>{if(null!=n)if(this.projectSitesList=n.projectSites,this.customersList=n.customers,this.company=n.company,this.projectSitesList.length>0){console.log(n);for(let s=0;s<this.projectSitesList.length;s+=50){let r=[];for(let c=s;c<s+50&&c<this.projectSitesList.length;c++)r.push(this.projectSitesList[c]);this.apiService.post("Reports/getReportByProjectSites",r).subscribe(c=>{let p=c;for(let u=0;u<p.length;u++)this.projectSitesList[s+u]=p[u],s+u==this.projectSitesList.length-1&&(this.isLoading=!1);this.isLoading=!1})}}else this.isLoading=!1;else this.isLoading=!1})):this.notifyService.showError("Select Dates")}openPrint(){if(this.projectSitesList.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}getProjectsOfCustomer(e){return this.projectSitesList.filter(o=>o.customerCode==e)}getTotal(e){let o={estimationCost:0};return this.projectSitesList.forEach(n=>{n.customerCode==e&&(o.estimationCost+=n.estimationCost)}),o}clearProjectsData(){this.customersList=[],this.projectSitesList=[],this.customersList=[],this.company=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-projects-sites-reports"]],features:[t.qOj],decls:71,vars:49,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-3","col-lg-3"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["id","printcontainer",1,"outer"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","center"],[2,"width","200px","height","150px",3,"src"],[1,"font-weight-medium"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],["style","padding-bottom: 5px; padding-top: 5px;",4,"ngFor","ngForOf"],[2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%","background","#efefef"],[2,"text-align","left"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["colspan","3",2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","background","#efefef"],["style","text-align:left",4,"ngFor","ngForOf"],[2,"text-align","right"],["colspan","7",2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"text-align","right","border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.cityCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.customerCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.serviceCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",6),t.TgZ(28,"div",7),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ng-select",10),t.NdJ("ngModelChange",function(r){return o.statusCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"div",7),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div",7),t.TgZ(39,"div",12),t.TgZ(40,"input",13),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(46);return o.openDatePicker(r)}),t.ALo(41,"translate"),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"div",14),t._UZ(44,"mat-datepicker-toggle",15),t._UZ(45,"mat-datepicker",null,16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"div",7),t.TgZ(49,"label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"div",7),t.TgZ(53,"div",12),t.TgZ(54,"input",13),t.NdJ("ngModelChange",function(r){return o.toDate=r})("click",function(){t.CHM(n);const r=t.MAs(60);return o.openDatePicker(r)}),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",14),t._UZ(58,"mat-datepicker-toggle",15),t._UZ(59,"mat-datepicker",null,17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"div",9),t.TgZ(62,"div",7),t._UZ(63,"br"),t.TgZ(64,"button",18),t.NdJ("click",function(){return o.search()}),t._uU(65,"Search"),t.qZA(),t._uU(66," \xa0 "),t.TgZ(67,"button",18),t.NdJ("click",function(){return o.setForm()}),t._UZ(68,"i",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(69,"spinner-loader",20),t.YNc(70,QU,36,36,"div",21),t.qZA()}if(2&e){const n=t.MAs(46),s=t.MAs(60);t.xp6(4),t.hij(" ",t.lcZ(5,27,"Project_Sites_Reports")," "),t.xp6(8),t.Oqu(t.lcZ(13,29,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,31,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,33,"Service_Code")),t.xp6(2),t.Q6J("items",o.serviceSelectionList)("ngModel",o.serviceCode),t.xp6(4),t.Oqu(t.lcZ(31,35,"Status_Code")),t.xp6(2),t.Q6J("items",o.statusSelectionList)("ngModel",o.statusCode),t.xp6(4),t.Oqu(t.lcZ(37,37,"From_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(41,39,"Please_Enter")," ",t.lcZ(42,41,"From_Date"),""),t.Q6J("ngModel",o.fromDate)("matDatepicker",n),t.xp6(4),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(51,43,"To_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(55,45,"Please_Enter")," ",t.lcZ(56,47,"To_Date"),""),t.Q6J("ngModel",o.toDate)("matDatepicker",s),t.xp6(4),t.Q6J("for",s),t.xp6(11),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company)}},directives:[Et.w9,l.JJ,l.On,l.Fj,j.hl,j.nW,ft.R9,j.Mq,Zt.r,Z.O5,Z.sg],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function HU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Print")," "))}function $U(i,a){if(1&i&&(t.TgZ(0,"tr",43),t.TgZ(1,"td",44),t._uU(2),t.qZA(),t.TgZ(3,"td",45),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.TgZ(7,"td",45),t._uU(8),t.qZA(),t.TgZ(9,"td",45),t._uU(10),t._UZ(11,"br"),t._uU(12),t.qZA(),t.TgZ(13,"td",45),t._uU(14),t.qZA(),t.TgZ(15,"td",45),t._uU(16),t.qZA(),t.TgZ(17,"td",45),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td",45),t._uU(21),t.qZA(),t.TgZ(22,"td",45),t._uU(23),t.qZA(),t.TgZ(24,"td",45),t._uU(25),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",e.customerCode,""),t.xp6(2),t.hij(" ",n.isArabic?e.customerNameArb:e.customerNameEng," "),t.xp6(2),t.hij(" ",e.customerAddress," "),t.xp6(2),t.hij(" ",e.siteCode,""),t.xp6(2),t.hij(" ",n.isArabic?e.siteNameArb:e.siteNameEng," "),t.xp6(2),t.hij(" ",e.siteAddress," "),t.xp6(2),t.hij(" ",n.isArabic?e.easonCodeNameArb:e.reasonCodeNameEng," "),t.xp6(2),t.hij(" ",t.xi3(19,12,e.complaintDate,"dd/MM/YYY")," "),t.xp6(3),t.hij(" ",e.complaintBy," "),t.xp6(2),t.hij(" ",e.nameBookedBy," "),t.xp6(2),t.hij(" ",e.status," ")}}function VU(i,a){if(1&i&&(t.TgZ(0,"div",24),t._UZ(1,"br"),t._UZ(2,"br"),t.TgZ(3,"div",25),t.TgZ(4,"div",26),t.ynx(5,27),t.TgZ(6,"table",28),t.TgZ(7,"tr"),t.TgZ(8,"td",29),t._uU(9),t.qZA(),t.TgZ(10,"td",30),t._UZ(11,"img",31),t.qZA(),t.TgZ(12,"td",32),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td",33),t.TgZ(16,"div",34),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.TgZ(25,"table",35),t.TgZ(26,"tr"),t.TgZ(27,"th",36),t._uU(28),t.ALo(29,"date"),t.ALo(30,"date"),t.qZA(),t.qZA(),t.TgZ(31,"tr"),t.TgZ(32,"td",37),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"td",37),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"td",37),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"td",37),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"td",37),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",26),t.ynx(48,27),t.TgZ(49,"table",38),t.TgZ(50,"tr",39),t.TgZ(51,"th",40),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"th",41),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"th",41),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"th",40),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"th",40),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"th",40),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"th",40),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"th",40),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.qZA(),t.YNc(75,$U,26,15,"tr",42),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(9),t.hij(" ",e.company.companyName,""),t.xp6(2),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(2),t.hij(" ",e.company.companyNameAr,""),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,28,"Tel_Phone")," : ",e.company.phone," "),t.xp6(6),t.AsE(" The Statement of Customer Complaints for Date Range: ",t.xi3(29,30,e.fromDate,"dd/MM/yyyy")," to ",t.xi3(30,33,e.toDate,"dd/MM/yyyy")," "),t.xp6(5),t.AsE(" ",t.lcZ(34,36,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(37,38,"Branch_Code"),": ",null!=e.cityCode&&""!=e.cityCode?e.cityCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(40,40,"Reason_Code"),": ",null!=e.reasonCode&&""!=e.reasonCode?e.isArabic?e.result.nameArbReasonCode:e.result.nameEngReasonCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(43,42,"Status_Code"),": ",null!=e.statusCode&&""!=e.statusCode?e.statusCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(46,44,"Booked_By"),": ",null!=e.bookedBy&&""!=e.bookedBy?null==e.result?null:e.result.nameBookedBy:"all"," "),t.xp6(7),t.hij(" ",t.lcZ(53,46,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(56,48,"Customer")," "),t.xp6(3),t.hij(" ",t.lcZ(59,50,"Site")," "),t.xp6(3),t.hij(" ",t.lcZ(62,52,"Reason_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(65,54,"Complaint_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(68,56,"Complaint_By")," "),t.xp6(3),t.hij(" ",t.lcZ(71,58,"Booked_By")," "),t.xp6(3),t.hij(" ",t.lcZ(74,60,"Status")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.complaints)}}let GU=(()=>{class i extends y{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[],this.customerCode="",this.statusSelectionList=[{text:"Inprogress",value:"Inprogress"},{text:"Closed",value:"Closed"},{text:"Open",value:"Open"}],this.statusCode="",this.reasonCode="",this.projectCode="",this.reasonCodesSelectionList=[],this.usersSelectionList=[],this.citySelectionList=[],this.cityCode="",this.curDate=new Date,this.isArabic=!1,this.bookedBy=""}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList(),this.loadReasonCodesList(),this.loadUsersList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadReasonCodesList(){this.apiService.getall("ReasonCode/getSelectReasonCodeListForCustomerComplaint").subscribe(e=>{this.reasonCodesSelectionList=e,this.reasonCodesSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadUsersList(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{this.usersSelectionList=e,this.usersSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.InputQuery={fromDate:this.fromDate,todate:this.toDate,customerCode:"",reasonCode:"",branchCode:"",projectCode:"",bookedBy:""}}search(){let e=new Date(this.fromDate);e.setMinutes(e.getMinutes()-e.getTimezoneOffset());let o=new Date(this.toDate);o.setMinutes(e.getMinutes()-o.getTimezoneOffset()),this.InputQuery={fromDate:e,todate:o,customerCode:null==this.customerCode?"":this.customerCode,statusCode:null==this.statusCode?"":this.statusCode,reasonCode:null==this.reasonCode?"":this.reasonCode,projectCode:null==this.projectCode?"":this.projectCode,branchCode:null==this.cityCode?"":this.cityCode,bookedBy:null==this.bookedBy?"":this.bookedBy},this.fromDate&&this.toDate?(this.isLoading=!0,this.apiService.post("Reports/getCustomerComplaintsReport",this.InputQuery).subscribe(n=>{this.result=n,this.company=n.company,this.isLoading=!1})):this.notifyService.showError("Select Dates")}openPrint(){if(this.result.complaints.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}clearResultData(){this.company=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-report-customercomplaints"]],features:[t.qOj],decls:79,vars:55,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["data-date-format","YYYY-MM-DD",1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],["picker2",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","data-toggle","modal",3,"click",4,"ngIf"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],[1,"table-responsive"],["id","printcontainer",1,"outer"],[1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],[2,"padding-bottom","5px","padding-top","5px"],["cellpadding","0","cellspacing","0","width","100%",2,"background-color","#ffffff","padding-bottom","5px"],["width","25%",2,"text-align","left","border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","50%",2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","center"],[2,"width","200px","height","150px",3,"src"],["width","25%",2,"text-align","right","border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","left"],[1,"font-weight-medium"],[2,"background","#ffffff","border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400","width","100%"],["colspan","5",2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","center"],[2,"border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"background","#ffffff"],[2,"text-align","center"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","2",2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["style","text-align: center; padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],[2,"text-align","center","padding-bottom","5px","padding-top","5px"],[2,"text-align","center","border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.cityCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.customerCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.reasonCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",6),t.TgZ(28,"div",7),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.bookedBy=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",6),t.TgZ(34,"div",7),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"ng-select",10),t.NdJ("ngModelChange",function(r){return o.statusCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",6),t.TgZ(40,"div",7),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"div",7),t.TgZ(45,"div",11),t.TgZ(46,"input",12),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(52);return o.openDatePicker(r)}),t.ALo(47,"translate"),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",13),t._UZ(50,"mat-datepicker-toggle",14),t._UZ(51,"mat-datepicker",null,15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"div",6),t.TgZ(54,"div",7),t.TgZ(55,"label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"div",7),t.TgZ(59,"div",11),t.TgZ(60,"input",16),t.NdJ("ngModelChange",function(r){return o.toDate=r})("click",function(){t.CHM(n);const r=t.MAs(66);return o.openDatePicker(r)}),t.ALo(61,"translate"),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"div",13),t._UZ(64,"mat-datepicker-toggle",14),t._UZ(65,"mat-datepicker",null,17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"div",9),t.TgZ(68,"div",7),t._UZ(69,"br"),t.TgZ(70,"button",18),t.NdJ("click",function(){return o.search()}),t._uU(71,"Search"),t.qZA(),t._uU(72," \xa0 "),t.TgZ(73,"button",18),t.NdJ("click",function(){return o.setForm()}),t._UZ(74,"i",19),t.qZA(),t._uU(75," \xa0 "),t.YNc(76,HU,3,3,"button",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(77,"spinner-loader",21),t.YNc(78,VU,76,62,"div",22),t.qZA()}if(2&e){const n=t.MAs(52),s=t.MAs(66);t.xp6(4),t.hij(" ",t.lcZ(5,31,"Customer_Complaints")," "),t.xp6(8),t.Oqu(t.lcZ(13,33,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,35,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,37,"Reason_Code")),t.xp6(2),t.Q6J("items",o.reasonCodesSelectionList)("ngModel",o.reasonCode),t.xp6(4),t.Oqu(t.lcZ(31,39,"Booked_By")),t.xp6(2),t.Q6J("items",o.usersSelectionList)("ngModel",o.bookedBy),t.xp6(4),t.Oqu(t.lcZ(37,41,"Status_Code")),t.xp6(2),t.Q6J("items",o.statusSelectionList)("ngModel",o.statusCode),t.xp6(4),t.Oqu(t.lcZ(43,43,"From_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(47,45,"Please_Enter")," ",t.lcZ(48,47,"From_Date"),""),t.Q6J("ngModel",o.fromDate)("matDatepicker",n),t.xp6(4),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(57,49,"To_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(61,51,"Please_Enter")," ",t.lcZ(62,53,"To_Date"),""),t.Q6J("ngModel",o.toDate)("matDatepicker",s),t.xp6(4),t.Q6J("for",s),t.xp6(12),t.Q6J("ngIf",o.company),t.xp6(1),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company)}},directives:[Et.w9,l.JJ,l.On,l.Fj,j.hl,j.nW,ft.R9,j.Mq,Z.O5,Zt.r,Z.sg],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function WU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Print")," "))}function zU(i,a){if(1&i&&(t.TgZ(0,"tr",44),t.TgZ(1,"td",45),t._uU(2),t.qZA(),t.TgZ(3,"td",46),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.TgZ(7,"td",46),t._uU(8),t.qZA(),t.TgZ(9,"td",46),t._uU(10),t._UZ(11,"br"),t._uU(12),t.qZA(),t.TgZ(13,"td",46),t._uU(14),t.qZA(),t.TgZ(15,"td",46),t._uU(16),t.qZA(),t.TgZ(17,"td",46),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td",46),t._uU(21),t.qZA(),t.TgZ(22,"td",46),t._uU(23),t.qZA(),t.TgZ(24,"td",46),t._uU(25),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",e.customerCode,""),t.xp6(2),t.hij(" ",n.isArabic?e.customerNameArb:e.customerNameEng," "),t.xp6(2),t.hij(" ",e.customerAddress," "),t.xp6(2),t.hij(" ",e.siteCode,""),t.xp6(2),t.hij(" ",n.isArabic?e.siteNameArb:e.siteNameEng," "),t.xp6(2),t.hij(" ",e.siteAddress," "),t.xp6(2),t.hij(" ",n.isArabic?e.easonCodeNameArb:e.reasonCodeNameEng," "),t.xp6(2),t.hij(" ",t.xi3(19,12,e.scheduleDateTime,"dd/MM/YYY HH:mm")," "),t.xp6(3),t.hij(" ",e.nameSupervisorId," "),t.xp6(2),t.hij(" ",e.isClosed?e.nameVisitedBy:""," "),t.xp6(2),t.hij(" ",e.status," ")}}function XU(i,a){if(1&i&&(t.TgZ(0,"div",25),t._UZ(1,"br"),t._UZ(2,"br"),t.TgZ(3,"div",26),t.TgZ(4,"div",27),t.ynx(5,28),t.TgZ(6,"table",29),t.TgZ(7,"tr"),t.TgZ(8,"td",30),t._uU(9),t.qZA(),t.TgZ(10,"td",31),t._UZ(11,"img",32),t.qZA(),t.TgZ(12,"td",33),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td",34),t.TgZ(16,"div",35),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.TgZ(25,"table",36),t.TgZ(26,"tr"),t.TgZ(27,"th",37),t._uU(28),t.ALo(29,"date"),t.ALo(30,"date"),t.qZA(),t.qZA(),t.TgZ(31,"tr"),t.TgZ(32,"td",38),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"td",38),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"td",38),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"td",38),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"td",38),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"td",38),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",27),t.ynx(51,28),t.TgZ(52,"table",39),t.TgZ(53,"tr",40),t.TgZ(54,"th",41),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"th",42),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"th",42),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"th",41),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"th",41),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"th",41),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"th",41),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"th",41),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.qZA(),t.YNc(78,zU,26,15,"tr",43),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(9),t.hij(" ",e.company.companyName,""),t.xp6(2),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(2),t.hij(" ",e.company.companyNameAr,""),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,30,"Tel_Phone")," : ",e.company.phone," "),t.xp6(6),t.AsE(" The Statement of Customer Visits for Date Range: ",t.xi3(29,32,e.fromDate,"dd/MM/yyyy")," to ",t.xi3(30,35,e.toDate,"dd/MM/yyyy")," "),t.xp6(5),t.AsE(" ",t.lcZ(34,38,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(37,40,"Branch_Code"),": ",null!=e.cityCode&&""!=e.cityCode?e.cityCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(40,42,"Reason_Code"),": ",null!=e.reasonCode&&""!=e.reasonCode?e.isArabic?e.result.nameArbReasonCode:e.result.nameEngReasonCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(43,44,"Status_Code"),": ",null!=e.statusCode&&""!=e.statusCode?e.statusCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(46,46,"Supervisor"),": ",null!=e.supervisorId&&""!=e.supervisorId?null==e.result?null:e.result.nameSupervisor:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(49,48,"Visited_By"),": ",null!=e.visitedBy&&""!=e.visitedBy?null==e.result?null:e.result.nameVisitedBy:"all"," "),t.xp6(7),t.hij(" ",t.lcZ(56,50,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(59,52,"Customer")," "),t.xp6(3),t.hij(" ",t.lcZ(62,54,"Site")," "),t.xp6(3),t.hij(" ",t.lcZ(65,56,"Reason_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(68,58,"Schedule_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(71,60,"Supervisor")," "),t.xp6(3),t.hij(" ",t.lcZ(74,62,"Visited_By")," "),t.xp6(3),t.hij(" ",t.lcZ(77,64,"Status")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.visits)}}let KU=(()=>{class i extends y{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[],this.customerCode="",this.statusSelectionList=[{text:"Inprogress",value:"Inprogress"},{text:"Closed",value:"Closed"},{text:"Open",value:"Open"}],this.statusCode="",this.reasonCode="",this.projectCode="",this.reasonCodesSelectionList=[],this.usersSelectionList=[],this.citySelectionList=[],this.cityCode="",this.curDate=new Date,this.isArabic=!1,this.supervisorId="",this.visitedBy=""}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList(),this.loadReasonCodesList(),this.loadUsersList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadReasonCodesList(){this.apiService.getall("ReasonCode/getSelectReasonCodeListForCustomerComplaint").subscribe(e=>{this.reasonCodesSelectionList=e,this.reasonCodesSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadUsersList(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{this.usersSelectionList=e,this.usersSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.InputQuery={fromDate:this.fromDate,todate:this.toDate,customerCode:"",reasonCode:"",branchCode:"",projectCode:"",supervisorId:"",visitedBy:""}}search(){let e=new Date(this.fromDate);e.setMinutes(e.getMinutes()-e.getTimezoneOffset());let o=new Date(this.toDate);o.setMinutes(e.getMinutes()-o.getTimezoneOffset()),this.InputQuery={fromDate:e,todate:o,customerCode:null==this.customerCode?"":this.customerCode,statusCode:null==this.statusCode?"":this.statusCode,reasonCode:null==this.reasonCode?"":this.reasonCode,projectCode:null==this.projectCode?"":this.projectCode,branchCode:null==this.cityCode?"":this.cityCode,visitedBy:null==this.visitedBy?"":this.visitedBy,supervisorId:null==this.supervisorId?"":this.supervisorId},this.fromDate&&this.toDate?(this.isLoading=!0,this.apiService.post("Reports/getCustomerVisitsReport",this.InputQuery).subscribe(n=>{this.result=n,this.company=n.company,this.isLoading=!1})):this.notifyService.showError("Select Dates")}openPrint(){if(this.result.visits.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}clearResultData(){this.company=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-report-customervisits"]],features:[t.qOj],decls:85,vars:60,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],[1,"col-md-4","col-lg-4"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["data-date-format","YYYY-MM-DD",1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],["picker2",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","data-toggle","modal",3,"click",4,"ngIf"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],[1,"table-responsive"],["id","printcontainer",1,"outer"],[1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],[2,"padding-bottom","5px","padding-top","5px"],["cellpadding","0","cellspacing","0","width","100%",2,"background-color","#ffffff","padding-bottom","5px"],["width","25%",2,"text-align","left","border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","50%",2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","center"],[2,"width","200px","height","150px",3,"src"],["width","25%",2,"text-align","right","border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","left"],[1,"font-weight-medium"],[2,"background","#ffffff","border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400","width","100%"],["colspan","6",2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","center"],[2,"border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"background","#ffffff"],[2,"text-align","center"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","2",2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["style","text-align: center; padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],[2,"text-align","center","padding-bottom","5px","padding-top","5px"],[2,"text-align","center","border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.cityCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.customerCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.reasonCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",10),t.TgZ(28,"div",7),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.visitedBy=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",10),t.TgZ(34,"div",7),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.supervisorId=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",10),t.TgZ(40,"div",7),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"ng-select",11),t.NdJ("ngModelChange",function(r){return o.statusCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",6),t.TgZ(46,"div",7),t.TgZ(47,"label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"div",7),t.TgZ(51,"div",12),t.TgZ(52,"input",13),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(58);return o.openDatePicker(r)}),t.ALo(53,"translate"),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"div",14),t._UZ(56,"mat-datepicker-toggle",15),t._UZ(57,"mat-datepicker",null,16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",6),t.TgZ(60,"div",7),t.TgZ(61,"label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"div",7),t.TgZ(65,"div",12),t.TgZ(66,"input",17),t.NdJ("ngModelChange",function(r){return o.toDate=r})("click",function(){t.CHM(n);const r=t.MAs(72);return o.openDatePicker(r)}),t.ALo(67,"translate"),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"div",14),t._UZ(70,"mat-datepicker-toggle",15),t._UZ(71,"mat-datepicker",null,18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",9),t.TgZ(74,"div",7),t._UZ(75,"br"),t.TgZ(76,"button",19),t.NdJ("click",function(){return o.search()}),t._uU(77,"Search"),t.qZA(),t._uU(78," \xa0 "),t.TgZ(79,"button",19),t.NdJ("click",function(){return o.setForm()}),t._UZ(80,"i",20),t.qZA(),t._uU(81," \xa0 "),t.YNc(82,WU,3,3,"button",21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(83,"spinner-loader",22),t.YNc(84,XU,79,66,"div",23),t.qZA()}if(2&e){const n=t.MAs(58),s=t.MAs(72);t.xp6(4),t.hij(" ",t.lcZ(5,34,"Customer_Complaints")," "),t.xp6(8),t.Oqu(t.lcZ(13,36,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,38,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,40,"Reason_Code")),t.xp6(2),t.Q6J("items",o.reasonCodesSelectionList)("ngModel",o.reasonCode),t.xp6(4),t.Oqu(t.lcZ(31,42,"Visited_By")),t.xp6(2),t.Q6J("items",o.usersSelectionList)("ngModel",o.visitedBy),t.xp6(4),t.Oqu(t.lcZ(37,44,"Supervisor")),t.xp6(2),t.Q6J("items",o.usersSelectionList)("ngModel",o.supervisorId),t.xp6(4),t.Oqu(t.lcZ(43,46,"Status_Code")),t.xp6(2),t.Q6J("items",o.statusSelectionList)("ngModel",o.statusCode),t.xp6(4),t.Oqu(t.lcZ(49,48,"From_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(53,50,"Please_Enter")," ",t.lcZ(54,52,"From_Date"),""),t.Q6J("ngModel",o.fromDate)("matDatepicker",n),t.xp6(4),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(63,54,"To_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(67,56,"Please_Enter")," ",t.lcZ(68,58,"To_Date"),""),t.Q6J("ngModel",o.toDate)("matDatepicker",s),t.xp6(4),t.Q6J("for",s),t.xp6(12),t.Q6J("ngIf",o.company),t.xp6(1),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company)}},directives:[Et.w9,l.JJ,l.On,l.Fj,j.hl,j.nW,ft.R9,j.Mq,Z.O5,Zt.r,Z.sg],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function t7(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1," Loading Data "),t.qZA())}function e7(i,a){1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",34),t._uU(3," No Attendance Found "),t.qZA(),t.qZA(),t.BQk())}function o7(i,a){1&i&&(t.TgZ(0,"tr",26),t.TgZ(1,"th",27),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",27),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",27),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,3,"Employee_Number")," "),t.xp6(3),t.hij(" ",t.lcZ(6,5,"Employee_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"Last_Attended_Date")," "))}function i7(i,a){if(1&i&&(t.TgZ(0,"tr",26),t.TgZ(1,"td",28),t._uU(2),t.qZA(),t.TgZ(3,"td",28),t._uU(4),t.qZA(),t.TgZ(5,"td",28),t._uU(6),t.ALo(7,"date"),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",null==e?null:e.employeeNumber," "),t.xp6(2),t.hij(" ",null==e?null:e.employeeName," "),t.xp6(2),t.hij(" ",t.xi3(7,3,null==e?null:e.lastAttendedDay,"dd/MM/YYYY")," ")}}function n7(i,a){if(1&i&&(t.TgZ(0,"table",25),t.YNc(1,e7,4,0,"ng-container",30),t.YNc(2,o7,10,9,"tr",32),t.YNc(3,i7,8,6,"tr",33),t._UZ(4,"tbody"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.resourcesList.length)),t.xp6(1),t.Q6J("ngIf",0!=(null==e?null:e.resourcesList.length)),t.xp6(1),t.Q6J("ngForOf",null==e?null:e.resourcesList)}}function a7(i,a){if(1&i&&(t.ynx(0,24),t.TgZ(1,"table",25),t.TgZ(2,"tr",26),t.TgZ(3,"th",27),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",27),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",27),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",27),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",27),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",27),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",27),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.TgZ(24,"tr",26),t.TgZ(25,"td",28),t._uU(26),t.qZA(),t.TgZ(27,"td",28),t._uU(28),t.qZA(),t.TgZ(29,"td",28),t._uU(30),t.qZA(),t.TgZ(31,"td",28),t._uU(32),t.qZA(),t.TgZ(33,"td",28),t._uU(34),t.ALo(35,"date"),t.qZA(),t.TgZ(36,"td",28),t._uU(37),t.ALo(38,"date"),t.qZA(),t.TgZ(39,"td",28),t._uU(40),t.qZA(),t.qZA(),t.qZA(),t.ynx(41,24),t.YNc(42,t7,2,0,"span",30),t.YNc(43,n7,5,3,"table",31),t.BQk(),t.BQk()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(4),t.hij(" ",t.lcZ(5,16,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(8,18,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(11,20,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(14,22,"Site_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(17,24,"Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(20,26,"End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(23,28,"Status")," "),t.xp6(4),t.hij(" ",null==e?null:e.projectCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.projectNameArb:null==e?null:e.projectNameEng," "),t.xp6(2),t.hij(" ",null==e?null:e.siteCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.siteNameArb:null==e?null:e.siteNameEng," "),t.xp6(2),t.hij(" ",t.xi3(35,30,null==e?null:e.startDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",t.xi3(38,33,null==e?null:e.endDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",null==e?null:e.status," "),t.xp6(2),t.Q6J("ngIf",null==(null==e?null:e.resourcesList)),t.xp6(1),t.Q6J("ngIf",null!=(null==e?null:e.resourcesList))}}function s7(i,a){if(1&i&&(t.TgZ(0,"div",24),t.ynx(1,24),t.TgZ(2,"table",25),t.TgZ(3,"tr",26),t.TgZ(4,"th",27),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"td",28),t._uU(8),t.qZA(),t.TgZ(9,"th",27),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"td",28),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"th",27),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"td",29),t._uU(19),t.qZA(),t.qZA(),t._UZ(20,"tbody"),t.qZA(),t.BQk(),t.YNc(21,a7,44,36,"ng-container",23),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,7,"Customer_Code")," "),t.xp6(3),t.hij(" ",e.custCode," "),t.xp6(2),t.hij(" ",t.lcZ(11,9,"Customer_Name")," "),t.xp6(3),t.hij(" ",o.isArabic?e.custArbName:e.custName," "),t.xp6(3),t.hij(" ",t.lcZ(17,11,"Customer_Address")," "),t.xp6(3),t.hij(" ",e.custAddress1," "),t.xp6(2),t.Q6J("ngForOf",o.getProjectsOfCustomer(e.custCode))}}function r7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"div",17),t.TgZ(7,"table",18),t.TgZ(8,"tr"),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td",19),t._UZ(13,"img",20),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td"),t.TgZ(16,"div",21),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"td",19),t._uU(27),t.ALo(28,"translate"),t.ALo(29,"translate"),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",22),t.YNc(32,s7,22,13,"div",23),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,14,"Print")," "),t.xp6(8),t.hij(" ",e.company.companyName,""),t.xp6(3),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,16,"Tel_Phone")," : ",e.company.phone," "),t.xp6(5),t.gL8(" The Statement of Projects Sites for ",t.lcZ(28,18,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," \xa0",t.lcZ(29,20,"Branch_Code"),": ",null!=e.cityCode&&""!=e.cityCode?e.cityCode:"all"," \xa0",t.lcZ(30,22,"Site_Code"),": ",null!=e.siteCode&&""!=e.siteCode?e.siteCode:"all"," "),t.xp6(5),t.Q6J("ngForOf",e.customersList)}}let l7=(()=>{class i extends y{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.projectSitesList=[],this.customersList=[],this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[],this.siteSelectionList=[],this.customerCode="",this.citySelectionList=[],this.cityCode="",this.siteCode="",this.curDate=new Date,this.isArabic=!1}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadProjectSites(){this.apiService.getall("ProjectSites/getSelectProjectSitesList").subscribe(e=>{this.projectSitesList=e,this.projectSitesList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}onSelectCustomer(){this.clearProjectsData(),this.siteCode="",""!=this.customerCode&&this.apiService.getall("ProjectSites/getSelectProjectSitesListByCustomerCode/"+this.customerCode).subscribe(e=>{this.siteSelectionList=e,this.siteSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.customerCode=this.cityCode,this.projectSitesList=[],this.customersList=[],this.InputQuery={customerCode:"",siteCode:"",cityCode:""}}search(){this.projectSitesList=[],this.customersList=[],this.InputQuery={customerCode:null==this.customerCode?"":this.customerCode,cityCode:null==this.cityCode?"":this.cityCode,siteCode:null==this.siteCode?"":this.siteCode},this.isLoading=!0,this.apiService.post("Reports/getResourcesOnProjectsReports",this.InputQuery).subscribe(e=>{if(null!=e)if(this.projectSitesList=e.projectSites,this.customersList=e.customers,this.company=e.company,this.projectSitesList.length>0)for(let o=0;o<this.projectSitesList.length;o+=50){let n=[];for(let s=o;s<o+50&&s<this.projectSitesList.length;s++)n.push(this.projectSitesList[s]);this.apiService.post("Reports/getResourcesOnProjectsReportsByProjectSites",n).subscribe(s=>{let r=s;for(let c=0;c<r.length;c++)this.projectSitesList[o+c]=r[c],o+c==this.projectSitesList.length-1&&(this.isLoading=!1)})}else this.isLoading=!1;else this.isLoading=!1})}openPrint(){if(console.log(this.projectSitesList),this.projectSitesList.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}getProjectsOfCustomer(e){return this.projectSitesList.filter(o=>o.customerCode==e)}clearProjectsData(){this.customersList=[],this.projectSitesList=[],this.customersList=[],this.company=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-resources-on-project"]],features:[t.qOj],decls:37,vars:20,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],[1,"col-md-4","col-lg-4"],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["id","printcontainer",1,"outer"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","center"],[2,"width","200px","height","150px",3,"src"],[1,"font-weight-medium"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],["style","padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],[2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","background","#efefef"],[2,"text-align","left"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["colspan","3",2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],[4,"ngIf"],["style","width: 100%; background: #efefef","border","0","cellpadding","0","cellspacing","0","width","100%",4,"ngIf"],["style","text-align:left",4,"ngIf"],["style","text-align:left",4,"ngFor","ngForOf"],["colspan","3",2,"text-align","center","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.cityCode=s})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.customerCode=s})("change",function(){return o.onSelectCustomer()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",10),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.siteCode=s})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",9),t.TgZ(28,"div",7),t._UZ(29,"br"),t.TgZ(30,"button",11),t.NdJ("click",function(){return o.search()}),t._uU(31,"Search"),t.qZA(),t._uU(32," \xa0 "),t.TgZ(33,"button",11),t.NdJ("click",function(){return o.setForm()}),t._UZ(34,"i",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(35,"spinner-loader",13),t.YNc(36,r7,33,24,"div",14),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,12,"Resources_On_Project")," "),t.xp6(8),t.Oqu(t.lcZ(13,14,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,16,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,18,"Site_Code")),t.xp6(2),t.Q6J("items",o.siteSelectionList)("ngModel",o.siteCode),t.xp6(9),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company))},directives:[Et.w9,l.JJ,l.On,Zt.r,Z.O5,Z.sg],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function c7(i,a){if(1&i&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.text,"-",e.textTwo,"")}}let go=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.readonly="",this.id=0,this.surveyFormCode="",this.surveyFormCodeList=[],this.isDataLoading=!1}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.loadSurveyFormCodes(),this.form=this.fb.group({surveyFormCode:["",l.kI.required],serviceCode:["",l.kI.required],serviceNameEng:["",l.kI.required],serviceNameArb:["",l.kI.required],isActive:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Services",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Services/getServiceById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}loadSurveyFormCodes(){this.apiService.getall("SurveyFormHeader/getSelectSurveyFormList").subscribe(e=>{this.surveyFormCodeList=e})}reset(){this.form.controls.serviceCode.setValue(""),this.form.controls.serviceNameEng.setValue(""),this.form.controls.serviceNameArb.setValue(""),this.form.controls.surveyFormCode.setValue(""),this.form.controls.isActive.setValue(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-service-code"]],features:[t.qOj],decls:60,vars:55,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","serviceCode",1,"form-control",3,"placeholder","readonly"],[3,"control"],["type","text","formControlName","serviceNameEng",1,"form-control",3,"placeholder"],["type","text","formControlName","serviceNameArb",1,"form-control",3,"placeholder"],["formControlName","surveyFormCode",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],["color","primary","formControlName","isActive"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"select",10),t.TgZ(40,"option",11),t._uU(41),t.ALo(42,"translate"),t.ALo(43,"translate"),t.qZA(),t.YNc(44,c7,2,3,"option",12),t.qZA(),t._UZ(45,"validation-message",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",4),t.TgZ(47,"div",5),t.TgZ(48,"label"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t._UZ(51,"br"),t._UZ(52,"mat-slide-toggle",13),t.qZA(),t.qZA(),t.TgZ(53,"div",14),t.TgZ(54,"div",15),t.TgZ(55,"input",16),t.NdJ("click",function(){return o.closeModel()}),t.ALo(56,"translate"),t.qZA(),t._uU(57," \xa0 "),t._UZ(58,"input",17),t.ALo(59,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,23,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,25,"Service_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,27,"Please_Enter")," ",t.lcZ(14,29,"Service_Code"),""),t.s9C("readonly",o.readonly),t.xp6(3),t.Q6J("control",o.form.controls.serviceCode),t.xp6(4),t.Oqu(t.lcZ(20,31,"Service_Name_Eng")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,33,"Please_Enter")," ",t.lcZ(23,35,"Service_Name_Eng"),""),t.xp6(3),t.Q6J("control",o.form.controls.serviceNameEng),t.xp6(4),t.Oqu(t.lcZ(29,37,"Service_Name_Arb")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,39,"Please_Enter")," ",t.lcZ(32,41,"Service_Name_Arb"),""),t.xp6(3),t.Q6J("control",o.form.controls.serviceNameArb),t.xp6(4),t.Oqu(t.lcZ(38,43,"Form_Code")),t.xp6(4),t.AsE("",t.lcZ(42,45,"Select")," ",t.lcZ(43,47,"Form_Code"),""),t.xp6(3),t.Q6J("ngForOf",o.surveyFormCodeList),t.xp6(1),t.Q6J("control",o.form.controls.surveyFormCode),t.xp6(4),t.Oqu(t.lcZ(50,49,"Is_Active")),t.xp6(6),t.s9C("value",t.lcZ(56,51,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(59,53,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg,jt.Rr],pipes:[f.X$],encapsulation:2}),i})();function p7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Code")," "))}function u7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceCode)}}function d7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Name_Eng")," "))}function _7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceNameEng)}}function m7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Name_Arb")," "))}function g7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceNameArb)}}function h7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function Z7(i,a){1&i&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function f7(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function A7(i,a){if(1&i&&(t.TgZ(0,"td",35),t.YNc(1,Z7,3,3,"span",36),t.YNc(2,f7,3,3,"ng-template",null,37,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function C7(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function T7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",35),t.TgZ(1,"a",41),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",42),t.qZA(),t.qZA()}}function v7(i,a){1&i&&t._UZ(0,"tr",43)}function x7(i,a){1&i&&t._UZ(0,"tr",44)}const q7=function(){return{standalone:!0}};let b7=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.displayedColumns=["serviceCode","serviceNameEng","serviceNameArb","isActive","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadServices(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadServices(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Services/getServicesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,go);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Service","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Service","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Services",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-service-code"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:60,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addServiceUnitMap","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","serviceCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","serviceNameEng"],["matColumnDef","serviceNameArb"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,p7,3,3,"th",24),t.YNc(43,u7,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,d7,3,3,"th",24),t.YNc(46,_7,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,m7,3,3,"th",24),t.YNc(49,g7,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,h7,3,3,"th",24),t.YNc(52,A7,4,2,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,C7,3,3,"th",30),t.YNc(55,T7,3,0,"td",25),t.BQk(),t.YNc(56,v7,1,0,"tr",31),t.YNc(57,x7,1,0,"tr",32),t.qZA(),t.ynx(58),t.TgZ(59,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Service_Code")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Service_Code")),t.xp6(10),t.hij("",t.lcZ(27,24,"Service_Code_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,q7)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Services")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();const Ie=function(){return{standalone:!0}};function y7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"div",5),t.TgZ(2,"div",22),t.TgZ(3,"input",23),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.startDate=n})("click",function(){t.CHM(e);const n=t.MAs(9);return t.oxw(3).openDatePicker(n)}),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",24),t._UZ(7,"mat-datepicker-toggle",25),t._UZ(8,"mat-datepicker",null,26),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(9),o=t.oxw().$implicit;t.xp6(3),t.hYB("placeholder","",t.lcZ(4,6,"Please_Enter")," ",t.lcZ(5,8,"Project_Start_Date"),""),t.Q6J("ngModel",o.startDate)("ngModelOptions",t.DdM(10,Ie))("matDatepicker",e),t.xp6(4),t.Q6J("for",e)}}function S7(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.startDate,"dd/MM/YYYY")," ")}}function w7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"div",5),t.TgZ(2,"div",22),t.TgZ(3,"input",23),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.endDate=n})("click",function(){t.CHM(e);const n=t.MAs(9);return t.oxw(3).openDatePicker(n)}),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",24),t._UZ(7,"mat-datepicker-toggle",25),t._UZ(8,"mat-datepicker",null,27),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(9),o=t.oxw().$implicit;t.xp6(3),t.hYB("placeholder","",t.lcZ(4,6,"Please_Enter")," ",t.lcZ(5,8,"Project_End_Date"),""),t.Q6J("ngModel",o.endDate)("ngModelOptions",t.DdM(10,Ie))("matDatepicker",e),t.xp6(4),t.Q6J("for",e)}}function U7(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.endDate,"dd/MM/YYYY")," ")}}function D7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"div",5),t.TgZ(2,"div",22),t.TgZ(3,"input",28),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.siteWorkingHours=n})("change",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).changeWorkingHours(n)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngModel",e.siteWorkingHours)("ngModelOptions",t.DdM(2,Ie))}}function L7(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.siteWorkingHours," ")}}function N7(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,y7,10,11,"td",21),t.YNc(4,S7,3,4,"td",21),t.YNc(5,w7,10,11,"td",21),t.YNc(6,U7,3,4,"td",21),t.YNc(7,D7,4,3,"td",21),t.YNc(8,L7,2,1,"td",21),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.siteCode," "),t.xp6(1),t.Q6J("ngIf",0==e.id),t.xp6(1),t.Q6J("ngIf",0!=e.id),t.xp6(1),t.Q6J("ngIf",0==e.id),t.xp6(1),t.Q6J("ngIf",0!=e.id),t.xp6(1),t.Q6J("ngIf",0==e.id),t.xp6(1),t.Q6J("ngIf",0!=e.id)}}function E7(i,a){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"table",19),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(16,N7,9,7,"tr",20),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,5,"Site")),t.xp6(3),t.Oqu(t.lcZ(9,7,"Start_Date")),t.xp6(3),t.Oqu(t.lcZ(12,9,"End_Date")),t.xp6(3),t.Oqu(t.lcZ(15,11,"Working_Hours")),t.xp6(2),t.Q6J("ngForOf",e.projectSites)}}function O7(i,a){1&i&&(t._UZ(0,"input",29),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let ho=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.readonly="",this.enquiries=[],this.sitesForEnquiry=[],this.projectSites=[]}ngOnInit(){this.setForm()}closeModel(){this.dialogRef.close()}setForm(){console.log(this.enquiryHead),this.form=this.fb.group({projectCode:[this.enquiryHead.enquiryNumber],customerCode:[this.enquiryHead.customerCode],branchCode:[this.enquiryHead.branchCode],projectNameEng:[""],projectNameArb:[""],enquiryNumber:[this.enquiryHead.enquiryNumber],startDate:["",l.kI.required],endDate:["",l.kI.required]}),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+this.enquiryHead.customerCode).subscribe(e=>{null!=e?(this.customerData=e,this.form.controls.projectNameEng.setValue(e.custName),this.form.controls.projectNameArb.setValue(e.custArbName)):console.log("Error in getCustomerByCustomerCode Method"),this.getEnquiriesForEnquiry(this.enquiryHead.enquiryNumber)})}submit(){this.projectSites.length>0?(this.projectSites.forEach(o=>{let n=new Date(o.startDate),s=new Date(o.endDate);n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),s.setMinutes(s.getMinutes()-s.getTimezoneOffset()),o.startDate=n,o.endDate=s,o.projectNameEng=this.form.controls.projectNameEng.value,o.projectNameArb=this.form.controls.projectNameArb.value}),this.apiService.post("ProjectSites/ConvertEnquiryToProjectSites",{projectSites:this.projectSites}).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})):(this.notifyService.showError(this.translate.instant("no enquiries found")),this.dialogRef.close(!0))}openDatePicker(e){e.open()}getEnquiriesForEnquiry(e){this.projectSites=[],this.apiService.getall(`ServiceEnquiries/getSevriceEnquiriesByEnquiryNumber/${e}`).subscribe(o=>{this.enquiries=o;let n=[];for(let s=0;s<this.enquiries.length;s++)n.findIndex(r=>r.siteCode==this.enquiries[s].siteCode)<0&&this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${e}/${this.enquiries[s].siteCode}`).subscribe(r=>{this.projectSites.push(0==r.id?{id:0,projectCode:this.enquiryHead.enquiryNumber,customerCode:this.enquiryHead.customerCode,branchCode:this.enquiryHead.branchCode,projectNameEng:this.form.controls.projectNameEng.value,projectNameArb:this.form.controls.projectNameArb.value,enquiryNumber:[this.enquiryHead.enquiryNumber],startDate:"",endDate:"",siteCode:this.enquiries[s].siteCode}:r)},r=>{}),n.push(this.enquiries[s])})}canSave(){return!(this.projectSites.findIndex(e=>""==e.startDate||""==e.endDate||(null==e?void 0:e.siteWorkingHours)<=0||null==(null==e?void 0:e.siteWorkingHours))>=0)}changeWorkingHours(e){this.projectSites[e].siteWorkingHours<0?this.projectSites[e].siteWorkingHours=0:this.projectSites[e].siteWorkingHours>24&&(this.projectSites[e].siteWorkingHours=24)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-convert-to-project"]],features:[t.qOj],decls:56,vars:56,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","branchCode","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],[1,"col-md-4","col-lg-4"],["type","text","formControlName","projectNameEng",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectNameArb",1,"form-control",3,"placeholder"],["class","table-responsive",4,"ngIf"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"ngModel","ngModelOptions","matDatepicker","placeholder","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["type","number",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"div",5),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",7),t.ALo(21,"translate"),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.TgZ(23,"div",4),t.TgZ(24,"div",5),t.TgZ(25,"label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",8),t.ALo(29,"translate"),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",9),t.TgZ(32,"div",5),t.TgZ(33,"label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",10),t.ALo(37,"translate"),t.ALo(38,"translate"),t._UZ(39,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(40,"div",9),t.TgZ(41,"div",5),t.TgZ(42,"label"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"input",12),t.ALo(46,"translate"),t.ALo(47,"translate"),t._UZ(48,"validation-message",11),t.qZA(),t.qZA(),t.qZA(),t.YNc(49,E7,17,13,"div",13),t.TgZ(50,"div",14),t.TgZ(51,"div",15),t.TgZ(52,"input",16),t.NdJ("click",function(){return o.closeModel()}),t.ALo(53,"translate"),t.qZA(),t._uU(54," \xa0 "),t.YNc(55,O7,2,3,"input",17),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,22,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,24,"Customer_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,26,"Please_Enter")," ",t.lcZ(14,28,"Customer_Code"),""),t.xp6(6),t.Oqu(t.lcZ(19,30,"Branch_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(21,32,"Please_Enter")," ",t.lcZ(22,34,"Branch_Code"),""),t.xp6(6),t.Oqu(t.lcZ(27,36,"Project_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(29,38,"Please_Enter")," ",t.lcZ(30,40,"Project_Code"),""),t.xp6(6),t.Oqu(t.lcZ(35,42,"Project_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(37,44,"Please_Enter")," ",t.lcZ(38,46,"Project_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectNameEng),t.xp6(4),t.Oqu(t.lcZ(44,48,"Project_Name_Arab")),t.xp6(2),t.hYB("placeholder","",t.lcZ(46,50,"Please_Enter")," ",t.lcZ(47,52,"Project_Name_Arab"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectNameArb),t.xp6(1),t.Q6J("ngIf",o.projectSites.length>0),t.xp6(3),t.s9C("value",t.lcZ(53,54,"Cancel")),t.xp6(3),t.Q6J("ngIf",o.canSave()))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,Z.O5,Z.sg,j.hl,l.On,j.nW,ft.R9,j.Mq,l.wV],pipes:[f.X$,Z.uU],encapsulation:2}),i})(),k7=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_}ngOnInit(){this.setForm()}setForm(){this.form=this.fb.group({})}closeModel(){this.dialogRef.close()}submit(){this.form.value.statusEnquiry="Approved",this.form.value.enquiryID=this.enquiry.enquiryID,this.apiService.post("ServiceEnquiries/changeEnquiryStatus",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.ngOnInit()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}),this.closeModel()}rejectEnquiry(){this.form.value.statusEnquiry="Cancelled",this.form.value.enquiryID=this.enquiry.enquiryID,this.apiService.post("ServiceEnquiries/changeEnquiryStatus",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.ngOnInit()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}),this.closeModel()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-approval-service-enquiry"]],features:[t.qOj],decls:12,vars:10,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"input",3),t.ALo(4,"translate"),t._uU(5," \xa0 "),t.TgZ(6,"input",4),t.NdJ("click",function(){return o.rejectEnquiry()}),t.ALo(7,"translate"),t.qZA(),t._uU(8," \xa0 "),t.TgZ(9,"input",4),t.NdJ("click",function(){return o.closeModel()}),t.ALo(10,"translate"),t.qZA(),t._uU(11," \xa0 "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.s9C("value",t.lcZ(4,4,"Approve")),t.xp6(3),t.s9C("value",t.lcZ(7,6,"Reject")),t.xp6(3),t.s9C("value",t.lcZ(10,8,"Cancel")))},directives:[l._Y,l.JL,l.sg],pipes:[f.X$],encapsulation:2}),i})();function j7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site")," "))}function M7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.siteNameAr:e.siteNameEn)}}function R7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service")," "))}function P7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.serviceNameAr:e.serviceNameEn)}}function F7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Code")," "))}function I7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitCode)}}function Y7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Price_Per_Unit")," "))}function J7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.pricePerUnit)}}function Q7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Quantity")," "))}function B7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceQuantity)}}function H7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Quantity")," "))}function $7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitQuantity)}}function V7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Estimated_Price")," "))}function G7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.estimatedPrice)}}function W7(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function z7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().addSuveyorToEnquiry(n.enquiryID)}),t._UZ(1,"i",40),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Assign_Surveyor"))}}function X7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().printSurveyForm(n.enquiryID)}),t._UZ(1,"i",41),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Print_Survey_Form"))}}function K7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().editableSurveyForm(n.enquiryID)}),t._UZ(1,"i",42),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Edit_Survey"))}}function tD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveSurvey(n)}),t._UZ(1,"i",43),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Approve_Survey"))}}function eD(i,a){if(1&i&&(t.TgZ(0,"td",37),t.YNc(1,z7,3,1,"span",38),t.YNc(2,X7,3,1,"span",38),t.YNc(3,K7,3,1,"span",38),t.YNc(4,tD,3,1,"span",38),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isAssignedSurveyor&&(e.authorities.canAddSurveyorToEnquiry||e.isAdmin)&&e.isEnqApproved),t.xp6(1),t.Q6J("ngIf",e.isSurveyCompleted),t.xp6(1),t.Q6J("ngIf",e.isAssignedSurveyor&&!e.isSurveyCompleted&&(e.canEditSurveyForm||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isSurveyCompleted&&!e.isSurveyApproved&&(!e.approvedUser&&e.authorities.canApproveSurvey||e.isAdmin))}}function oD(i,a){1&i&&t._UZ(0,"tr",44)}function iD(i,a){1&i&&t._UZ(0,"tr",45)}let Zo=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C,S){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.route=h,this.oprService=A,this.translate=C,this.dialogRef=S,this.displayedColumns=["site","service","unitCode","pricePerUnit","serviceQuantity","unitQuantity","estimatedPrice","Actions"],this.searchValue="",this.sortingOrder="enquiryID desc",this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.initialLoading()}refresh(){this.setForm(),this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.getEnquiryHead()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ServiceEnquiries/getSevriceEnquiriesByEnquiryNumberPagedList",this.utilService.getQueryString(e,o,this.enquiryNumber,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,console.log(this.data),setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.componentInstance.branchCode=this.branchCode,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openDialogManage2(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.inputData=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}addSuveyorToEnquiry(e){this.openDialogManage(e,g.Oi.create,"Adding_Surveyor_To_Enquiry","Save",ve)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceEnquiries",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}setForm(){this.form=this.fb.group({enquiryID:[0],statusEnquiry:[""]})}cahngeEnquiryStatus(e,o){this.form.value.enquiryID=e,this.form.value.statusEnquiry=o,this.apiService.post("ServiceEnquiries/changeEnquiryStatus",this.form.value).subscribe(n=>{this.utilService.OkMessage(),this.ngOnInit()},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}ApprovalDialog(e,o){let n=this.oprService.openApprovalDialog(this.dialog,o);n.componentInstance.enquiry=e,n.afterClosed().subscribe(s=>{this.ngOnInit()})}approvalAuth(e){this.ApprovalDialog(e,k7)}approveSurvey(e){let n=e.enquiryID.toString();this.openApprovalDialog(this.branchCode,n,g.Oi.create,"Survey_Approval","Save","SUR",Wt)}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}getEnquiryHead(){this.apiService.getall(`ServiceEnquiryHeader/getEnquiryFormHeaderByEnquiryNumber/${this.enquiryNumber}`).subscribe(e=>{this.branchCode=e.branchCode})}printSurveyForm(e){this.openDialogManage2({enquiryID:e,enquiryNumber:this.enquiryNumber},g.Oi.create,"","Print",Ee)}editableSurveyForm(e){this.openDialogManage2({enquiryID:e,enquiryNumber:this.enquiryNumber},g.Oi.create,"","Print",Le)}closeModel(){this.dialogRef.close(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(D.gz),t.Y36(W),t.Y36(f.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-enquiries-by-enquiry-number"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:67,vars:26,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","site"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","service"],["matColumnDef","unitCode"],["matColumnDef","pricePerUnit"],["matColumnDef","serviceQuantity"],["matColumnDef","unitQuantity"],["matColumnDef","estimatedPrice"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"icon-user"],[1,"icon-printer"],[1,"fas","fa-edit"],[1,"icon-like"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"h3",5),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",6),t.TgZ(12,"nav",7),t.TgZ(13,"ol",8),t.TgZ(14,"li",9),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"li",9),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"li",9),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"li",10),t._uU(24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"div",3),t.TgZ(27,"div",12),t.TgZ(28,"div",13),t.TgZ(29,"div",14),t.TgZ(30,"div",3),t.TgZ(31,"div",12),t.TgZ(32,"h4",15),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(35,"div",16),t.TgZ(36,"div",17),t.ynx(37),t.TgZ(38,"table",18),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(39,19),t.YNc(40,j7,3,3,"th",20),t.YNc(41,M7,2,1,"td",21),t.BQk(),t.ynx(42,22),t.YNc(43,R7,3,3,"th",20),t.YNc(44,P7,2,1,"td",21),t.BQk(),t.ynx(45,23),t.YNc(46,F7,3,3,"th",20),t.YNc(47,I7,2,1,"td",21),t.BQk(),t.ynx(48,24),t.YNc(49,Y7,3,3,"th",20),t.YNc(50,J7,2,1,"td",21),t.BQk(),t.ynx(51,25),t.YNc(52,Q7,3,3,"th",20),t.YNc(53,B7,2,1,"td",21),t.BQk(),t.ynx(54,26),t.YNc(55,H7,3,3,"th",20),t.YNc(56,$7,2,1,"td",21),t.BQk(),t.ynx(57,27),t.YNc(58,V7,3,3,"th",20),t.YNc(59,G7,2,1,"td",21),t.BQk(),t.ynx(60,28),t.YNc(61,W7,3,3,"th",29),t.YNc(62,eD,5,4,"td",30),t.BQk(),t.YNc(63,oD,1,0,"tr",31),t.YNc(64,iD,1,0,"tr",32),t.qZA(),t.BQk(),t.qZA(),t.ynx(65),t.TgZ(66,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,14,o.modalTitle)),t.xp6(8),t.hij(" ",t.lcZ(10,16,"Services_Enquiry")," "),t.xp6(6),t.hij(" ",t.lcZ(16,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(19,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(22,22,"Services_Enquiry")),t.xp6(3),t.Oqu(o.enquiryNumber),t.xp6(9),t.hij("",t.lcZ(34,24,"Services_Enquiry_List")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function nD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enquiry_Number")," "))}function aD(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.enquiryNumber)}}function sD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enquiry_Date")," "))}function rD(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.dateOfEnquiry,"longDate"))}}function lD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Est_Close_Date")," "))}function cD(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.estimateClosingDate,"longDate"))}}function pD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Customer")," ",t.lcZ(3,4,"Name")," "))}function uD(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.customerNameAr:e.customerNameEn)}}function dD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Branch")," ",t.lcZ(3,4,"Code")," "))}function _D(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function mD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Branch")," ",t.lcZ(3,4,"Name")," "))}function gD(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchNameEn)}}function hD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Total_Estimated_Price")," "))}function ZD(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.totalEstPrice)}}function fD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function AD(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function CD(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function TD(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,AD,3,3,"span",40),t.YNc(2,CD,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function vD(i,a){1&i&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function xD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().convertToProject(n)}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Convert_To_Project"))}}function qD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().skippSurvey(n)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Skipp_Survey"))}}function bD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().editEnquiry(n)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Edit_Enquiry"))}}function yD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().addEnquiry(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Add_Enquiry_For_New_Site"))}}function SD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveEnquiry(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Approve_Enquiry"))}}function wD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",45),t.TgZ(1,"span",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewEnquiries(s)}),t._UZ(2,"i",47),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"span",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().printEnquiryForm(s.enquiryNumber)}),t._UZ(5,"i",48),t._uU(6,"\xa0"),t.qZA(),t.YNc(7,xD,3,1,"span",49),t.YNc(8,qD,3,1,"span",49),t.YNc(9,bD,3,1,"span",49),t.YNc(10,yD,3,1,"span",49),t.YNc(11,SD,3,1,"span",49),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("matTooltip",o.translate.instant("View_Enquiry")),t.xp6(3),t.Q6J("matTooltip",o.translate.instant("Print_Enquiry_Form")),t.xp6(3),t.Q6J("ngIf",!e.isConvertedToProject&&e.isApproved&&(e.authorities.canConvertEnqToProject||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!e.isConvertedToProject&&!e.isEnqApproved&&e.isApproved&&(e.authorities.canConvertEnqToProject||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!e.isConvertedToProject&&!e.isEnqApproved&&(e.authorities.canEditEnquiry||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isConvertedToProject&&e.isProjectConvertedToContract&&(e.authorities.canEditEnquiry||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!e.isEnqApproved&&(!e.approvedUser&&e.authorities.canApproveEnquiry||e.isAdmin))}}function UD(i,a){1&i&&t._UZ(0,"tr",55)}function DD(i,a){1&i&&t._UZ(0,"tr",56)}const LD=function(){return{standalone:!0}};let ND=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.translate=A,this.displayedColumns=["enquiryNumber","dateOfEnquiry","estimateClosingDate","customerName","branchCode","branchName","totalEstPrice","isActive","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ServiceEnquiryHeader/getSevriceEnquiryHeaderPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openEditWindow(e,o,n,s,r,c){let p=this.oprService.fullWindow(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.enquiryHead=o,p.componentInstance.isAdendum=e,p.afterClosed().subscribe(u=>{u&&!0===u&&this.ngOnInit()})}openEnquiriesWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.enquiryNumber=e.enquiryNumber,c.componentInstance.branchCode=e.branchCode,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openConvertDialog(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.enquiryHead=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(){this.openFullWindow(0,g.Oi.create,"Adding_New_Service_Enquiry_Form","Add",It)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceEnquiryHeader",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}changeEnquiryFormStatus(e,o){this.apiService.post("serviceEnquiryForm/changeEnquiryFormStatus?enquiryNumber="+e+"&enquiryStatus="+o,null).subscribe(n=>{this.utilService.OkMessage(),this.ngOnInit()},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}viewEnquiries(e){this.openEnquiriesWindow(e,g.Oi.create,"","",Zo)}printEnquiryForm(e){this.openEnquiriesWindow(e,g.Oi.create,"","",to)}convertToProject(e){this.openConvertDialog(e,g.Oi.create,"Converting_To_Project","Update",ho)}approveEnquiry(e){let n=e.enquiryNumber.toString()+(null==(null==e?void 0:e.version)?"":"/"+(null==e?void 0:e.version));this.openApprovalDialog(null==e?void 0:e.branchCode,n,g.Oi.create,"Enquiry_Approval","Save","ENQ",Wt)}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}translateToolTip(e){return`${this.translate.instant(e)}`}createExistingProject(){this.openFullWindow(0,g.Oi.create,"Adding_New_Service_Enquiry_Form_For_Existing_Project","Add",ze)}editEnquiry(e){let o=this.oprService.fullWindow(this.dialog,It);o.componentInstance.dbops=g.Oi.update,o.componentInstance.modalTitle="Update_Service_Enquiry_Form",o.componentInstance.modalBtnTitle="Update",o.componentInstance.enquiryHead=e,o.componentInstance.isAdendum=!1,o.afterClosed().subscribe(n=>{n&&!0===n&&this.ngOnInit()})}addEnquiry(e){let o=this.oprService.fullWindow(this.dialog,It);o.componentInstance.dbops=g.Oi.update,o.componentInstance.modalTitle="Add_Enquiry_For_New_Site",o.componentInstance.modalBtnTitle="Update",o.componentInstance.enquiryHead=e,o.componentInstance.isAdendum=!0,o.componentInstance.isOldEnquiryForm=!0,o.afterClosed().subscribe(n=>{n&&!0===n&&this.ngOnInit()})}skippSurvey(e){this.openConvertDialog(e,g.Oi.create,"Converting_To_Project","Update",ho)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-service-enquiry-forms"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:71,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-4","col-lg-4"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-8","col-lg-8","text-right"],["data-toggle","modal","data-target","#addEnquiries","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","enquiryNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dateOfEnquiry"],["matColumnDef","estimateClosingDate"],["matColumnDef","customerName"],["matColumnDef","branchCode"],["matColumnDef","branchName"],["matColumnDef","totalEstPrice"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction"],[3,"matTooltip","click"],[1,"icon-eye"],[1,"icon-printer"],[3,"matTooltip","click",4,"ngIf"],[1,"fas","fa-sign-in-alt"],[1,"fas","fa-angle-double-right"],[1,"fas","fa-edit"],[1,"fas","fa-plus"],[1,"icon-like"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.ynx(38),t.TgZ(39,"table",21),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(40,22),t.YNc(41,nD,3,3,"th",23),t.YNc(42,aD,2,1,"td",24),t.BQk(),t.ynx(43,25),t.YNc(44,sD,3,3,"th",23),t.YNc(45,rD,3,4,"td",24),t.BQk(),t.ynx(46,26),t.YNc(47,lD,3,3,"th",23),t.YNc(48,cD,3,4,"td",24),t.BQk(),t.ynx(49,27),t.YNc(50,pD,4,6,"th",23),t.YNc(51,uD,2,1,"td",24),t.BQk(),t.ynx(52,28),t.YNc(53,dD,4,6,"th",23),t.YNc(54,_D,2,1,"td",24),t.BQk(),t.ynx(55,29),t.YNc(56,mD,4,6,"th",23),t.YNc(57,gD,2,1,"td",24),t.BQk(),t.ynx(58,30),t.YNc(59,hD,3,3,"th",23),t.YNc(60,ZD,2,1,"td",24),t.BQk(),t.ynx(61,31),t.YNc(62,fD,3,3,"th",23),t.YNc(63,TD,4,2,"td",24),t.BQk(),t.ynx(64,32),t.YNc(65,vD,3,3,"th",33),t.YNc(66,wD,12,7,"td",34),t.BQk(),t.YNc(67,UD,1,0,"tr",35),t.YNc(68,DD,1,0,"tr",36),t.qZA(),t.BQk(),t.qZA(),t.ynx(69),t.TgZ(70,"mat-paginator",37),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Services_Enquiry_Forms")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Services_Enquiry_Forms")),t.xp6(10),t.hij("",t.lcZ(27,24,"Services_Enquiry_Forms_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,LD)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Services_Enquiry")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,ut.gM,m.XQ,m.Gk],pipes:[f.X$,Z.uU],encapsulation:2}),i})();function ED(i,a){if(1&i&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.text,"-",e.textTwo,"")}}function OD(i,a){if(1&i&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.text,"-",e.textTwo,"")}}let fo=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.readonly="",this.id=0,this.serviceCodeList=[],this.unitCodeList=[],this.isDataLoading=!1}ngOnInit(){this.setForm(),this.loadUnitCodes(),this.loadServiceCodes(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({serviceCode:["",l.kI.required],unitCode:["",l.kI.required],pricePerUnit:[,l.kI.required],isActive:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("ServiceUnitMap",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("ServiceUnitMap/getServiceUnitMapById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}loadServiceCodes(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceCodeList=e})}loadUnitCodes(){this.apiService.getall("Units/getSelectUnitList").subscribe(e=>{this.unitCodeList=e})}reset(){this.form.controls.serviceCode.setValue(""),this.form.controls.unitCode.setValue(""),this.form.controls.pricePerUnit.setValue(""),this.form.controls.isActive.setValue(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-serviceunitmapp"]],features:[t.qOj],decls:54,vars:45,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["formControlName","serviceCode",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","unitCode",1,"custom-select","mr-sm-2"],["type","number","step","1.00","formControlName","pricePerUnit",1,"form-control",3,"placeholder"],["color","primary","formControlName","isActive"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"select",6),t.TgZ(13,"option",7),t._uU(14),t.ALo(15,"translate"),t.ALo(16,"translate"),t.qZA(),t.YNc(17,ED,2,3,"option",8),t.qZA(),t._UZ(18,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(19,"div",4),t.TgZ(20,"div",5),t.TgZ(21,"label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"select",10),t.TgZ(25,"option",7),t._uU(26),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.YNc(29,OD,2,3,"option",8),t.qZA(),t._UZ(30,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(31,"div",4),t.TgZ(32,"div",5),t.TgZ(33,"label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",11),t.ALo(37,"translate"),t.ALo(38,"translate"),t._UZ(39,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(40,"div",4),t.TgZ(41,"div",5),t.TgZ(42,"label"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"br"),t._UZ(46,"mat-slide-toggle",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",13),t.TgZ(48,"div",14),t.TgZ(49,"input",15),t.NdJ("click",function(){return o.closeModel()}),t.ALo(50,"translate"),t.qZA(),t._uU(51," \xa0 "),t._UZ(52,"input",16),t.ALo(53,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,19,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,21,"Service_Code")),t.xp6(4),t.AsE("",t.lcZ(15,23,"Select")," ",t.lcZ(16,25,"Service_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.serviceCodeList),t.xp6(1),t.Q6J("control",o.form.controls.serviceCode),t.xp6(4),t.Oqu(t.lcZ(23,27,"Unit_Code")),t.xp6(4),t.AsE("",t.lcZ(27,29,"Select")," ",t.lcZ(28,31,"Unit_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.unitCodeList),t.xp6(1),t.Q6J("control",o.form.controls.unitCode),t.xp6(4),t.Oqu(t.lcZ(35,33,"Amount")),t.xp6(2),t.hYB("placeholder","",t.lcZ(37,35,"Please_Enter")," ",t.lcZ(38,37,"Amount"),""),t.xp6(3),t.Q6J("control",o.form.controls.pricePerUnit),t.xp6(4),t.Oqu(t.lcZ(44,39,"Is_Active")),t.xp6(6),t.s9C("value",t.lcZ(50,41,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(53,43,"Save")))},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,l.YN,l.Kr,Z.sg,V.s,l.wV,l.Fj,jt.Rr],pipes:[f.X$],encapsulation:2}),i})(),Ao=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.readonly="",this.isDataLoading=!1}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({unitCode:["",l.kI.required],unitNameEng:["",l.kI.required],unitNameArb:["",l.kI.required],isActive:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Units",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Units/getUnitById",this.id).subscribe(e=>{e&&this.form.patchValue(e)})}reset(){this.form.controls.unitCode.setValue(""),this.form.controls.unitNameEng.setValue(""),this.form.controls.unitNameArb.setValue(""),this.form.controls.isActive.setValue(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-unit-code-for-services"]],features:[t.qOj],decls:48,vars:44,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","unitCode",1,"form-control",3,"placeholder","readonly"],[3,"control"],["type","text","formControlName","unitNameEng",1,"form-control",3,"placeholder"],["type","text","formControlName","unitNameArb",1,"form-control",3,"placeholder"],["color","primary","formControlName","isActive"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"br"),t._UZ(40,"mat-slide-toggle",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",11),t.TgZ(42,"div",12),t.TgZ(43,"input",13),t.NdJ("click",function(){return o.closeModel()}),t.ALo(44,"translate"),t.qZA(),t._uU(45," \xa0 "),t._UZ(46,"input",14),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,18,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,20,"Unit_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,22,"Please_Enter")," ",t.lcZ(14,24,"Unit_Code"),""),t.s9C("readonly",o.readonly),t.xp6(3),t.Q6J("control",o.form.controls.unitCode),t.xp6(4),t.Oqu(t.lcZ(20,26,"Unit_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,28,"Please_Enter")," ",t.lcZ(23,30,"Unit_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.unitNameEng),t.xp6(4),t.Oqu(t.lcZ(29,32,"Unit_Name_Arab")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,34,"Please_Enter")," ",t.lcZ(32,36,"Unit_Name_Arab"),""),t.xp6(3),t.Q6J("control",o.form.controls.unitNameArb),t.xp6(4),t.Oqu(t.lcZ(38,38,"Is_Active")),t.xp6(6),t.s9C("value",t.lcZ(44,40,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(47,42,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,jt.Rr],pipes:[f.X$],encapsulation:2}),i})();function kD(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Code")," "))}function jD(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceCode)}}function MD(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Code")," "))}function RD(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitCode)}}function PD(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Amount")," "))}function FD(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.pricePerUnit)}}function ID(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function YD(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function JD(i,a){1&i&&(t.TgZ(0,"span",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function QD(i,a){if(1&i&&(t.TgZ(0,"td",37),t.YNc(1,YD,3,3,"span",38),t.YNc(2,JD,3,3,"ng-template",null,39,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function BD(i,a){1&i&&(t.TgZ(0,"th",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function HD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",37),t.TgZ(1,"a",43),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",44),t.qZA(),t.qZA()}}function $D(i,a){1&i&&t._UZ(0,"tr",45)}function VD(i,a){1&i&&t._UZ(0,"tr",46)}const GD=function(){return{standalone:!0}};let WD=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.displayedColumns=["serviceCode","unitCode","pricePerUnit","isActive","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadServiceUnitMappings(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadServiceUnitMappings(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadServiceUnitMappings(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadServiceUnitMappings(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ServiceUnitMap/getServiceUnitMapPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadServiceUnitMappings(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}createUnits(){this.openDialogManage(0,g.Oi.create,"Adding_New_Unit","Add",Ao)}createService(){this.openDialogManage(0,g.Oi.create,"Adding_New_Service","Add",go)}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Service_Unit_Mapping","Add",fo)}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Service_Unit_Mapping","Update",fo)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceUnitMap",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-service-unit-mappings"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:70,vars:37,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-4","col-lg-4"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-8","col-lg-8","text-right"],["data-toggle","modal","data-target","#addServiceUnitMap","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],["data-toggle","modal","data-target","#AddNewUnit","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],["data-toggle","modal","data-target","#AddNewService","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","serviceCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","unitCode"],["matColumnDef","pricePerUnit"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._uU(36," \xa0\xa0 "),t.TgZ(37,"a",19),t.NdJ("click",function(){return o.createUnits()}),t._UZ(38,"i",18),t._uU(39),t.ALo(40,"translate"),t.qZA(),t._uU(41," \xa0\xa0 "),t.TgZ(42,"a",20),t.NdJ("click",function(){return o.createService()}),t._UZ(43,"i",18),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(46,"div",21),t.TgZ(47,"div",22),t.TgZ(48,"div",23),t.ynx(49),t.TgZ(50,"table",24),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(51,25),t.YNc(52,kD,3,3,"th",26),t.YNc(53,jD,2,1,"td",27),t.BQk(),t.ynx(54,28),t.YNc(55,MD,3,3,"th",26),t.YNc(56,RD,2,1,"td",27),t.BQk(),t.ynx(57,29),t.YNc(58,PD,3,3,"th",26),t.YNc(59,FD,2,1,"td",27),t.BQk(),t.ynx(60,30),t.YNc(61,ID,3,3,"th",26),t.YNc(62,QD,4,2,"td",27),t.BQk(),t.ynx(63,31),t.YNc(64,BD,3,3,"th",32),t.YNc(65,HD,3,0,"td",27),t.BQk(),t.YNc(66,$D,1,0,"tr",33),t.YNc(67,VD,1,0,"tr",34),t.qZA(),t.ynx(68),t.TgZ(69,"mat-paginator",35),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,18,"Service_Units_Mapping")," "),t.xp6(6),t.hij(" ",t.lcZ(11,20,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,22,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,24,"Service_Code")),t.xp6(10),t.hij("",t.lcZ(27,26,"Service_Unit_Mapping_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,28,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(36,GD)),t.xp6(5),t.hij("",t.lcZ(35,30,"Add_New_Service_Unit_Map")," "),t.xp6(5),t.hij("",t.lcZ(40,32,"Add_New_Unit")," "),t.xp6(5),t.hij("",t.lcZ(45,34,"Add_New_Service")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function zD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enquiry_ID")," "))}function XD(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.enquiryID)}}function KD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function tL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function eL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Code")," "))}function oL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceCode)}}function iL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Code")," "))}function nL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitCode)}}function aL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Price_Per_Unit")," "))}function sL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.pricePerUnit)}}function rL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Quantity")," "))}function lL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceQuantity)}}function cL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Estimated_Price")," "))}function pL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.estimatedPrice)}}function uL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Status")," "))}function dL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.statusEnquiry)}}function _L(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function mL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().cahngeEnquiryStatus(n.enquiryID,"Approved")}),t._UZ(1,"i",48),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Approve_Survey")," "))}function gL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().addSuveyorToEnquiry(n.enquiryID)}),t._UZ(1,"i",49),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Assign_to_surveyor")," "))}function hL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().cahngeEnquiryStatus(n.enquiryID,"Open")}),t._UZ(1,"i",50),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Reopen_Enquiry")," "))}function ZL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approvalAuth(n)}),t._UZ(1,"i",51),t.qZA()}}const Ye=function(i){return{enquiryID:i}};function fL(i,a){if(1&i&&(t.TgZ(0,"a",52),t._UZ(1,"i",53),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ye,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"Fill_Survey_Form")," ")}}function AL(i,a){if(1&i&&(t.TgZ(0,"a",52),t._UZ(1,"i",53),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ye,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"Edit_Survey_Form")," ")}}function CL(i,a){if(1&i&&(t.TgZ(0,"a",52),t._UZ(1,"i",54),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ye,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"View_Survey_Form")," ")}}function TL(i,a){if(1&i&&(t.TgZ(0,"td",39),t.TgZ(1,"div",41),t.TgZ(2,"a",42),t._UZ(3,"i",43),t.qZA(),t.TgZ(4,"div",44),t.TgZ(5,"a",42),t._UZ(6,"i",43),t.qZA(),t.TgZ(7,"div",44),t.YNc(8,mL,4,3,"a",45),t.YNc(9,gL,4,3,"a",45),t.YNc(10,hL,4,3,"a",45),t.YNc(11,ZL,2,0,"a",45),t.YNc(12,fL,4,6,"a",46),t.YNc(13,AL,4,6,"a",46),t.YNc(14,CL,4,6,"a",46),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(8),t.Q6J("ngIf","Survey_Completed"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Open"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Cancelled"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Survey_Completed"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Assigned_Surveyor"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Survey_In_Progress"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Survey_Completed"==e.statusEnquiry)}}function vL(i,a){1&i&&t._UZ(0,"tr",55)}function xL(i,a){1&i&&t._UZ(0,"tr",56)}const qL=function(){return{standalone:!0}};let bL=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.displayedColumns=["enquiryID","siteCode","serviceCode","unitCode","pricePerUnit","serviceQuantity","estimatedPrice","statusEnquiry","Actions"],this.searchValue="",this.sortingOrder="enquiryID desc",this.isLoading=!1}ngOnInit(){this.setForm(),this.initialLoading()}setForm(){this.form=this.fb.group({enquiryID:[0],statusEnquiry:[""]})}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ServiceEnquiries/getSevriceEnquiriesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),console.log(this.data),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Enquiry","Add",It)}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Enquiry","Update",It)}addSuveyorToEnquiry(e){this.openDialogManage(e,g.Oi.create,"Adding_Surveyor_To_Enquiry","Save",ve)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceEnquiries",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}cahngeEnquiryStatus(e,o){this.form.value.enquiryID=e,this.form.value.statusEnquiry=o,this.apiService.post("ServiceEnquiries/changeEnquiryStatus",this.form.value).subscribe(n=>{this.utilService.OkMessage(),this.ngOnInit()},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}ApprovalDialog(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.enquiryHead=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}approvalAuth(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-services-enquiry"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:72,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addEnquiries","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","enquiryID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","serviceCode"],["matColumnDef","unitCode"],["matColumnDef","pricePerUnit"],["matColumnDef","serviceQuantity"],["matColumnDef","estimatedPrice"],["matColumnDef","statusEnquiry"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],["class","dropdown-item tableicons",3,"click",4,"ngIf"],["class","dropdown-item tableicons","routerLink","EditableSurveyForm",3,"queryParams",4,"ngIf"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-like"],[1,"icon-user"],[1,"icon-trash"],[1,"icon-arrow-up"],["routerLink","EditableSurveyForm",1,"dropdown-item","tableicons",3,"queryParams"],[1,"icon-pencil"],[1,"icon-eye"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,zD,3,3,"th",24),t.YNc(43,XD,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,KD,3,3,"th",24),t.YNc(46,tL,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,eL,3,3,"th",24),t.YNc(49,oL,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,iL,3,3,"th",24),t.YNc(52,nL,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,aL,3,3,"th",24),t.YNc(55,sL,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,rL,3,3,"th",24),t.YNc(58,lL,2,1,"td",25),t.BQk(),t.ynx(59,31),t.YNc(60,cL,3,3,"th",24),t.YNc(61,pL,2,1,"td",25),t.BQk(),t.ynx(62,32),t.YNc(63,uL,3,3,"th",24),t.YNc(64,dL,2,1,"td",25),t.BQk(),t.ynx(65,33),t.YNc(66,_L,3,3,"th",34),t.YNc(67,TL,15,7,"td",25),t.BQk(),t.YNc(68,vL,1,0,"tr",35),t.YNc(69,xL,1,0,"tr",36),t.qZA(),t.ynx(70),t.TgZ(71,"mat-paginator",37),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Services_Enquiry")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Services_Enquiry")),t.xp6(10),t.hij("",t.lcZ(27,24,"Services_Enquiry_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,qL)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Services_Enquiry")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,D.yS,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})(),yL=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.shiftId=0,this.isDataLoading=!1,this.readonly="",this.isOff=!1}ngOnInit(){this.setForm(),this.id>0&&(this.shiftId=this.id,this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({shiftId:[0],shiftCode:["",l.kI.required],shiftName_EN:["",l.kI.required],shiftName_AR:["",l.kI.required],inTime:["",l.kI.required],outTime:["",l.kI.required],breakTime:["",l.kI.required],inGrace:[""],outGrace:[""],workingTime:[""],netWorkingTime:[""],isOff:[!1]})}submit(){console.log(this.form.value),this.form.valid||this.form.controls.isOff.value&&""!=this.form.controls.shiftCode.value&&""!=this.form.controls.shiftName_EN.value&&""!=this.form.controls.shiftName_AR.value?(this.id>0&&(this.form.value.id=this.id),this.form.value.shiftId=this.id,this.apiService.post("ShiftMaster",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("ShiftMaster/getShiftMasterById",this.shiftId).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({shiftId:0}),this.form.patchValue({id:0}))})}reset(){this.form.controls.shiftCode.setValue(""),this.form.controls.shiftName_EN.setValue(""),this.form.controls.shiftName_AR.setValue(""),this.form.controls.inTime.setValue(""),this.form.controls.outTime.setValue(""),this.form.controls.breakTime.setValue(""),this.form.controls.inGrace.setValue(""),this.form.controls.outGrace.setValue(""),this.form.controls.workingTime.setValue(""),this.form.controls.netWorkingTime.setValue(""),this.form.controls.isOff.setValue(!1)}setDisable(){this.form.controls.isOff.value?(this.form.controls.inTime.disable({onlySelf:!0}),this.form.controls.outTime.disable({onlySelf:!0}),this.form.controls.breakTime.disable({onlySelf:!0}),this.form.controls.inGrace.disable({onlySelf:!0}),this.form.controls.outGrace.disable({onlySelf:!0}),this.form.controls.workingTime.disable({onlySelf:!0}),this.form.controls.netWorkingTime.disable({onlySelf:!0}),this.form.value.inTime="00:00",this.form.value.outTime="00:00",this.form.value.breakTime=0,this.form.value.inGrace=0,this.form.value.outGrace=0,this.form.value.workingTime="",this.form.value.netWorkingTime=""):(this.form.controls.inTime.enable({onlySelf:!0}),this.form.controls.outTime.enable({onlySelf:!0}),this.form.controls.breakTime.enable({onlySelf:!0}),this.form.controls.inGrace.enable({onlySelf:!0}),this.form.controls.outGrace.enable({onlySelf:!0}),this.form.controls.workingTime.enable({onlySelf:!0}),this.form.controls.netWorkingTime.enable({onlySelf:!0}))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-shift"]],features:[t.qOj],decls:93,vars:94,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["type","text","formControlName","shiftCode",1,"form-control",3,"placeholder","readonly"],[3,"control"],[1,"col-md-4","col-lg-4"],["type","text","formControlName","shiftName_EN",1,"form-control",3,"placeholder"],["type","text","formControlName","shiftName_AR",1,"form-control",3,"placeholder"],["color","primary","formControlName","isOff",3,"change"],[1,"col-md-6","col-lg-6"],["type","time","formControlName","inTime",1,"form-control",3,"placeholder"],["type","time","formControlName","outTime",1,"form-control",3,"placeholder"],["type","number","min","15","max","60","step","15","formControlName","breakTime",1,"form-control",3,"placeholder"],["type","number","min","0","max","60","step","5","formControlName","inGrace",1,"form-control",3,"placeholder"],["type","number","min","0","max","60","step","5","formControlName","outGrace",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",8),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",9),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",8),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",10),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"br"),t.TgZ(40,"mat-slide-toggle",11),t.NdJ("change",function(){return o.setDisable()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",12),t.TgZ(42,"div",5),t.TgZ(43,"label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"input",13),t.ALo(47,"translate"),t.ALo(48,"translate"),t._UZ(49,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(50,"div",12),t.TgZ(51,"div",5),t.TgZ(52,"label"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"input",14),t.ALo(56,"translate"),t.ALo(57,"translate"),t._UZ(58,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(59,"div",12),t.TgZ(60,"div",5),t.TgZ(61,"label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._UZ(64,"input",15),t.ALo(65,"translate"),t.ALo(66,"translate"),t._UZ(67,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(68,"div",12),t.TgZ(69,"div",5),t.TgZ(70,"label"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t._UZ(73,"input",16),t.ALo(74,"translate"),t.ALo(75,"translate"),t._UZ(76,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(77,"div",12),t.TgZ(78,"div",5),t.TgZ(79,"label"),t._uU(80),t.ALo(81,"translate"),t.qZA(),t._UZ(82,"input",17),t.ALo(83,"translate"),t.ALo(84,"translate"),t._UZ(85,"validation-message",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(86,"div",18),t.TgZ(87,"div",19),t.TgZ(88,"input",20),t.NdJ("click",function(){return o.closeModel()}),t.ALo(89,"translate"),t.qZA(),t._uU(90," \xa0 "),t._UZ(91,"input",21),t.ALo(92,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,38,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,40,"Shift_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,42,"Enter")," ",t.lcZ(14,44,"Shift_Code"),""),t.s9C("readonly",o.readonly),t.xp6(3),t.Q6J("control",o.form.controls.shiftCode),t.xp6(4),t.Oqu(t.lcZ(20,46,"Shift_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,48,"Please_Enter")," ",t.lcZ(23,50,"Shift_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.shiftName_EN),t.xp6(4),t.Oqu(t.lcZ(29,52,"Shift_Name_Arab")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,54,"Please_Enter")," ",t.lcZ(32,56,"Shift_Name_Arab"),""),t.xp6(3),t.Q6J("control",o.form.controls.shiftName_AR),t.xp6(4),t.Oqu(t.lcZ(38,58,"Is_Off")),t.xp6(7),t.Oqu(t.lcZ(45,60,"In_Time")),t.xp6(2),t.hYB("placeholder","",t.lcZ(47,62,"Please_Enter")," ",t.lcZ(48,64,"In_Time"),""),t.xp6(3),t.Q6J("control",o.form.controls.inTime),t.xp6(4),t.Oqu(t.lcZ(54,66,"Out_Time")),t.xp6(2),t.hYB("placeholder","",t.lcZ(56,68,"Please_Enter")," ",t.lcZ(57,70,"Out_Time"),""),t.xp6(3),t.Q6J("control",o.form.controls.outTime),t.xp6(4),t.Oqu(t.lcZ(63,72,"Break_Time")),t.xp6(2),t.hYB("placeholder","",t.lcZ(65,74,"Please_Enter")," ",t.lcZ(66,76,"Break_Time"),""),t.xp6(3),t.Q6J("control",o.form.controls.breakTime),t.xp6(4),t.Oqu(t.lcZ(72,78,"In_Grace_Time")),t.xp6(2),t.hYB("placeholder","",t.lcZ(74,80,"Please_Enter")," ",t.lcZ(75,82,"In_Grace_Time"),""),t.xp6(3),t.Q6J("control",o.form.controls.inGrace),t.xp6(4),t.Oqu(t.lcZ(81,84,"Out_Grace_Time")),t.xp6(2),t.hYB("placeholder","",t.lcZ(83,86,"Please_Enter")," ",t.lcZ(84,88,"Out_Grace_Time"),""),t.xp6(3),t.Q6J("control",o.form.controls.outGrace),t.xp6(3),t.s9C("value",t.lcZ(89,90,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(92,92,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,jt.Rr,l.qQ,l.Fd,l.wV],pipes:[f.X$],encapsulation:2}),i})();function SL(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Shift_Code")," "))}function wL(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.shiftCode)}}function UL(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Shift_Name_English")," "))}function DL(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.shiftName_EN)}}function LL(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Shift_Name_Arab")," "))}function NL(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.shiftName_AR)}}function EL(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"In_Time")," "))}function OL(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.inTime))}}function kL(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Out_Time")," "))}function jL(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.outTime))}}function ML(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Break_Time")," "))}function RL(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.breakTime))}}function PL(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"In_Grace_Time")," "))}function FL(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.inGrace))}}function IL(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Out_Grace_Time")," "))}function YL(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.outGrace))}}function JL(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Working_Time")," "))}function QL(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.workingTime))}}function BL(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Net_Working_Time")," "))}function HL(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.netWorkingTime))}}function $L(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Off")," "))}function VL(i,a){1&i&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function GL(i,a){1&i&&(t.TgZ(0,"span",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function WL(i,a){if(1&i&&(t.TgZ(0,"td",42),t.YNc(1,VL,3,3,"span",43),t.YNc(2,GL,3,3,"ng-template",null,44,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isOff)("ngIfElse",o)}}function zL(i,a){1&i&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function XL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",42),t.TgZ(1,"div",48),t.TgZ(2,"a",49),t._UZ(3,"i",50),t.qZA(),t.TgZ(4,"div",51),t.TgZ(5,"a",52),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.shiftId)}),t._UZ(6,"i",53),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",52),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().delete(s.shiftId)}),t._UZ(10,"i",54),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.Oqu(t.lcZ(8,2,"Edit_Shift")),t.xp6(4),t.Oqu(t.lcZ(12,4,"Delete_Shift")))}function KL(i,a){1&i&&t._UZ(0,"tr",55)}function tN(i,a){1&i&&t._UZ(0,"tr",56)}const eN=function(){return{standalone:!0}};let oN=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.displayedColumns=["shiftCode","shiftName_EN","shiftName_AR","inTime","outTime","breakTime","inGrace","outGrace","workingTime","netWorkingTime","isOff","Actions"],this.searchValue="",this.sortingOrder="shiftId desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ShiftMaster/getShiftMastersPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,yL);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Shift","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Shift","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ShiftMaster",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}timeToHH_MM(e){return e.substring(0,5)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-shift-master"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:81,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addShift","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","shiftCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","shiftName_EN"],["matColumnDef","shiftName_AR"],["matColumnDef","inTime"],["matColumnDef","outTime"],["matColumnDef","breakTime"],["matColumnDef","inGrace"],["matColumnDef","outGrace"],["matColumnDef","workingTime"],["matColumnDef","netWorkingTime"],["matColumnDef","isOff"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],[1,"icon-trash"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,SL,3,3,"th",24),t.YNc(43,wL,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,UL,3,3,"th",24),t.YNc(46,DL,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,LL,3,3,"th",24),t.YNc(49,NL,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,EL,3,3,"th",24),t.YNc(52,OL,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,kL,3,3,"th",24),t.YNc(55,jL,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,ML,3,3,"th",24),t.YNc(58,RL,2,1,"td",25),t.BQk(),t.ynx(59,31),t.YNc(60,PL,3,3,"th",24),t.YNc(61,FL,2,1,"td",25),t.BQk(),t.ynx(62,32),t.YNc(63,IL,3,3,"th",24),t.YNc(64,YL,2,1,"td",25),t.BQk(),t.ynx(65,33),t.YNc(66,JL,3,3,"th",24),t.YNc(67,QL,2,1,"td",25),t.BQk(),t.ynx(68,34),t.YNc(69,BL,3,3,"th",24),t.YNc(70,HL,2,1,"td",25),t.BQk(),t.ynx(71,35),t.YNc(72,$L,3,3,"th",24),t.YNc(73,WL,4,2,"td",25),t.BQk(),t.ynx(74,36),t.YNc(75,zL,3,3,"th",37),t.YNc(76,XL,13,6,"td",25),t.BQk(),t.YNc(77,KL,1,0,"tr",38),t.YNc(78,tN,1,0,"tr",39),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.ynx(79),t.TgZ(80,"mat-paginator",40),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Employee_Shifts")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Shifts")),t.xp6(10),t.hij("",t.lcZ(27,24,"Employee_Shift_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,eN)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Shift")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(37),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function iN(i,a){if(1&i&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.value," ")}}function nN(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function aN(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function sN(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t.TgZ(8,"i",34),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeElement(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.shiftCode),t.xp6(2),t.Oqu(e.shiftName_EN),t.xp6(2),t.Oqu(e.shiftName_AR)}}const Je=function(){return{standalone:!0}};let rN=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfShifts=[],this.sequence=1,this.editsequence=0,this.remarks="",this.shiftCode="",this.shiftName_EN="",this.shiftName_AR="",this.custCodeControl=new l.NI("",l.kI.required),this.siteCodeList=[],this.customerCode="",this.listOfShiftCodes=[],this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,ot.O)(this.customerCode),(0,it.b)(c.autoDelay()),(0,nt.x)(),(0,at.w)(_=>(""!==_.trim()&&(this.isDataLoading=!0),this.filterCustCodes(_||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,pt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadShiftCodes(){this.apiService.getall("ShiftMaster/getSelectShiftMasterList").subscribe(e=>{this.listOfShiftCodes=e})}ngOnInit(){this.setForm(),this.readonly="readonly"}setForm(){this.form=this.fb.group({shiftCode:[""],customerCode:["",l.kI.required],siteCode:[""]}),this.setToDefault()}submit(){this.form.valid&&this.listOfShifts.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.shiftsList=this.listOfShifts,this.apiService.post("ShiftMaster/CreateUpdateShiftsToSiteMaps",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}),window.history.back()):this.utilService.FillUpFields()}addShift(){if(""!=this.shiftCode){let e={sequence:this.getSequence(),shiftCode:this.shiftCode,shiftName_AR:this.shiftName_AR,shiftName_EN:this.shiftName_EN};this.listOfShifts.find(o=>o.shiftCode==this.shiftCode)||this.listOfShifts.push(e)}this.setToDefault()}removeElement(e){this.listOfShifts.splice(e,1),this.downSequence()}setToDefault(){this.shiftCode="",this.shiftName_AR="",this.shiftName_EN=""}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.shiftName_AR.setValue(""),this.form.controls.shiftName_EN.setValue(""),this.form.controls.shiftCode.setValue("")}goBack(){window.history.back()}getShiftDetails(e){this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e.target.value).subscribe(n=>{this.shiftName_AR=n.shiftName_AR,this.shiftName_EN=n.shiftName_EN})}onSelectionCustomerCode(e,o){let n="";this.form.controls.siteCode.setValue(""),n="change"==o?e.target.value:e.option.value,this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){this.form.patchValue({customerCode:s.custCode});let r=this.custCodeControl.value;this.form.value.customerCode=r,this.loadSiteCodes(r)}else this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""),this.siteCodeList=[];this.listOfShiftCodes=[],this.listOfShifts=[]})}onSelectSiteCode(e){let o="";o=e.target.value,this.form.value.siteCode=o,this.apiService.getall(`ShiftMaster/getShiftsToSiteBySiteCode/${o}`).subscribe(n=>{this.listOfShifts=n,this.sequence=this.listOfShifts.length+1}),this.loadShiftCodes()}loadSiteCodes(e){this.apiService.getall(`CustomerSite/getSelectSiteListByCustCode/${e}`).subscribe(o=>{this.siteCodeList=o})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-shifts-to-site-map"]],features:[t.qOj],decls:92,vars:75,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete","change"],[3,"optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-center"],[1,"fas","fa-plus-circle",3,"click"],["colspan","10"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[1,"fas","fa-minus-circle",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._UZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",4),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"label",10),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t._UZ(16,"auto-loader",13),t.TgZ(17,"input",14),t.NdJ("change",function(s){return o.onSelectionCustomerCode(s,"change")}),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(s){return o.onSelectionCustomerCode(s,"select")}),t.YNc(22,iN,2,2,"mat-option",17),t.ALo(23,"async"),t.qZA(),t.qZA(),t._UZ(24,"validation-message",18),t.qZA(),t.qZA(),t.TgZ(25,"div",9),t.TgZ(26,"div",11),t.TgZ(27,"label",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(31,"option",20),t._uU(32),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.YNc(35,nN,2,2,"option",17),t.qZA(),t._UZ(36,"validation-message",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",21),t.TgZ(38,"table",22),t.TgZ(39,"thead"),t.TgZ(40,"tr"),t.TgZ(41,"th"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._UZ(50,"th"),t.qZA(),t.qZA(),t.TgZ(51,"tbody"),t.TgZ(52,"tr"),t.TgZ(53,"td"),t.TgZ(54,"select",23),t.NdJ("ngModelChange",function(s){return o.shiftCode=s})("change",function(s){return o.getShiftDetails(s)}),t.TgZ(55,"option",20),t._uU(56),t.ALo(57,"translate"),t.ALo(58,"translate"),t.qZA(),t.YNc(59,aN,2,2,"option",17),t.qZA(),t.qZA(),t.TgZ(60,"td"),t.TgZ(61,"input",24),t.NdJ("ngModelChange",function(s){return o.shiftName_EN=s}),t.ALo(62,"translate"),t.qZA(),t.qZA(),t.TgZ(63,"td"),t.TgZ(64,"input",24),t.NdJ("ngModelChange",function(s){return o.shiftName_AR=s}),t.ALo(65,"translate"),t.qZA(),t.qZA(),t.TgZ(66,"td",25),t.TgZ(67,"i",26),t.NdJ("click",function(){return o.addShift()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t._UZ(69,"td",27),t.qZA(),t.TgZ(70,"thead"),t.TgZ(71,"tr"),t.TgZ(72,"th"),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"th"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"th"),t._uU(79),t.ALo(80,"translate"),t.qZA(),t._UZ(81,"th"),t.qZA(),t.qZA(),t.TgZ(82,"tbody"),t.YNc(83,sN,9,3,"tr",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(84,"div",29),t.TgZ(85,"div",6),t.TgZ(86,"div",30),t.TgZ(87,"input",31),t.NdJ("click",function(){return o.goBack()}),t.ALo(88,"translate"),t.qZA(),t._uU(89," \xa0 "),t._UZ(90,"input",32),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(21);t.Q6J("formGroup",o.form),t.xp6(12),t.Oqu(t.lcZ(13,34,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(18,36,"Please_Enter")," ",t.lcZ(19,38,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(23,40,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(4),t.Oqu(t.lcZ(29,42,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(33,44,"Select")," ",t.lcZ(34,46,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(6),t.Oqu(t.lcZ(43,48,"Shift_Code")),t.xp6(3),t.Oqu(t.lcZ(46,50,"Shift_Name_English")),t.xp6(3),t.Oqu(t.lcZ(49,52,"Shift_Name_Arab")),t.xp6(6),t.Q6J("ngModel",o.shiftCode)("ngModelOptions",t.DdM(72,Je)),t.xp6(2),t.AsE("",t.lcZ(57,54,"Select")," ",t.lcZ(58,56,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.listOfShiftCodes),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(62,58,"Shift_Name_English"),""),t.Q6J("ngModel",o.shiftName_EN)("ngModelOptions",t.DdM(73,Je)),t.xp6(3),t.MGl("placeholder","  ",t.lcZ(65,60,"Shift_Name_Arab"),""),t.Q6J("ngModel",o.shiftName_AR)("ngModelOptions",t.DdM(74,Je)),t.xp6(9),t.Oqu(t.lcZ(74,62,"Shift_Code")),t.xp6(3),t.Oqu(t.lcZ(77,64,"Shift_Name_English")),t.xp6(3),t.Oqu(t.lcZ(80,66,"Shift_Name_Arab")),t.xp6(4),t.Q6J("ngForOf",o.listOfShifts),t.xp6(4),t.s9C("value",t.lcZ(88,68,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(91,70,"Save"))}},directives:[l._Y,l.JL,l.sg,At.z,l.Fj,lt.ZL,l.JJ,l.oH,lt.XC,Z.sg,V.s,l.EJ,l.u,l.YN,l.Kr,l.On,Ut.ey],pipes:[f.X$,Z.Ov],encapsulation:2}),i})(),lN=(()=>{class i extends y{constructor(e,o,n,s,r,c,p){super(n),this.dialogRef=e,this.notifyService=o,this.authService=n,this.fb=s,this.apiService=r,this.utilService=c,this.opservice=p,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({skillSetCode:["SSTXXXXXX"],skillType:["",l.kI.required],nameInEnglish:["",l.kI.required],nameInArabic:["",l.kI.required],detailsOfSkillSet:["",l.kI.required],skillSetType:["",l.kI.required],prioryImportanceScale:["",l.kI.required],minBufferResource:["",l.kI.required],monthlyCtc:["",l.kI.required],costToCompanyDay:["",l.kI.required],monthlyOverheadCost:["",l.kI.required],monthlyOtherOverHeads:["",l.kI.required],totalSkillsetCost:["",l.kI.required],totalSkillsetCostDay:["",l.kI.required],servicePriceToCompany:["",l.kI.required],minMarginRequired:["",l.kI.required],overrideMarginIfRequired:[!1],isActive:[!0],responsibilitiesRoles:["",l.kI.required],isExist:[!1]},{validators:[xe.isCodeExist("skillSetCode","isExist")]})}get f(){return this.form.controls}closeModel(){this.dialogRef.close()}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Skillset",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Skillset/getSkillsetById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}reset(){this.form.controls.skillSetCode.setValue(""),this.form.controls.skillType.setValue(""),this.form.controls.nameInEnglish.setValue(""),this.form.controls.detailsOfSkillSet.setValue(""),this.form.controls.skillSetType.setValue(""),this.form.controls.prioryImportanceScale.setValue(""),this.form.controls.minBufferResource.setValue(""),this.form.controls.monthlyCtc.setValue(""),this.form.controls.costToCompanyDay.setValue(""),this.form.controls.monthlyOverheadCost.setValue(""),this.form.controls.monthlyOtherOverHeads.setValue(""),this.form.controls.totalSkillsetCost.setValue(""),this.form.controls.totalSkillsetCostDay.setValue(""),this.form.controls.servicePriceToCompany.setValue(""),this.form.controls.minMarginRequired.setValue(""),this.form.controls.overrideMarginIfRequired.setValue(""),this.form.controls.overrideMarginIfRequired.setValue(!1),this.form.controls.isActive.setValue(!0),this.form.controls.responsibilitiesRoles.setValue("")}verifyCode(e){let o=e.target.value.toUpperCase();""!=o&&this.opservice.verifyCode("Skillset/isExistCode/"+o).subscribe(n=>{this.form.controls.isExist.setValue(n),this.form.controls.skillSetCode.setValue(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(w.g),t.Y36(v._),t.Y36(l.qu),t.Y36(q.s),t.Y36(b.t),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-skillset"]],features:[t.qOj],decls:198,vars:185,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","skillSetCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","skillType",1,"form-control"],["value",""],[3,"control"],["type","text","formControlName","nameInEnglish",1,"form-control",3,"placeholder"],["type","text","formControlName","nameInArabic",1,"form-control",3,"placeholder"],["type","text","formControlName","detailsOfSkillSet",1,"form-control",3,"placeholder"],["formControlName","skillSetType",1,"form-control"],["formControlName","prioryImportanceScale",1,"form-control"],["type","number","formControlName","minBufferResource",1,"form-control",3,"placeholder"],["type","number","formControlName","monthlyCtc",1,"form-control",3,"placeholder"],["type","number","formControlName","costToCompanyDay",1,"form-control",3,"placeholder"],["type","number","formControlName","monthlyOverheadCost",1,"form-control",3,"placeholder"],["type","number","formControlName","monthlyOtherOverHeads",1,"form-control",3,"placeholder"],["type","number","formControlName","totalSkillsetCost",1,"form-control",3,"placeholder"],["type","number","formControlName","totalSkillsetCostDay",1,"form-control",3,"placeholder"],["type","number","formControlName","servicePriceToCompany",1,"form-control",3,"placeholder"],["type","number","formControlName","minMarginRequired",1,"form-control",3,"placeholder"],["color","primary","formControlName","overrideMarginIfRequired"],["color","primary","formControlName","isActive"],["formControlName","responsibilitiesRoles",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"div",5),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"select",7),t.TgZ(21,"option",8),t._uU(22),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"option"),t._uU(26,"In-house"),t.qZA(),t.TgZ(27,"option"),t._uU(28,"Contract"),t.qZA(),t.qZA(),t._UZ(29,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(30,"div",4),t.TgZ(31,"div",5),t.TgZ(32,"label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",10),t.ALo(36,"translate"),t.ALo(37,"translate"),t._UZ(38,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(39,"div",4),t.TgZ(40,"div",5),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",11),t.ALo(45,"translate"),t.ALo(46,"translate"),t._UZ(47,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(48,"div",4),t.TgZ(49,"div",5),t.TgZ(50,"label"),t._uU(51),t.ALo(52,"translate"),t.qZA(),t._UZ(53,"input",12),t.ALo(54,"translate"),t.ALo(55,"translate"),t._UZ(56,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(57,"div",4),t.TgZ(58,"div",5),t.TgZ(59,"label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"select",13),t.TgZ(63,"option",8),t._uU(64),t.ALo(65,"translate"),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"option"),t._uU(68,"Technical"),t.qZA(),t.TgZ(69,"option"),t._uU(70,"Non-Technical"),t.qZA(),t.qZA(),t._UZ(71,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(72,"div",4),t.TgZ(73,"div",5),t.TgZ(74,"label"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"select",14),t.TgZ(78,"option",8),t._uU(79),t.ALo(80,"translate"),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"option"),t._uU(83,"1"),t.qZA(),t.TgZ(84,"option"),t._uU(85,"2"),t.qZA(),t.qZA(),t._UZ(86,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(87,"div",4),t.TgZ(88,"div",5),t.TgZ(89,"label"),t._uU(90),t.ALo(91,"translate"),t.qZA(),t._UZ(92,"input",15),t.ALo(93,"translate"),t.ALo(94,"translate"),t._UZ(95,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(96,"div",4),t.TgZ(97,"div",5),t.TgZ(98,"label"),t._uU(99),t.ALo(100,"translate"),t.qZA(),t._UZ(101,"input",16),t.ALo(102,"translate"),t.ALo(103,"translate"),t._UZ(104,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(105,"div",4),t.TgZ(106,"div",5),t.TgZ(107,"label"),t._uU(108),t.ALo(109,"translate"),t.qZA(),t._UZ(110,"input",17),t.ALo(111,"translate"),t.ALo(112,"translate"),t._UZ(113,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(114,"div",4),t.TgZ(115,"div",5),t.TgZ(116,"label"),t._uU(117),t.ALo(118,"translate"),t.qZA(),t._UZ(119,"input",18),t.ALo(120,"translate"),t.ALo(121,"translate"),t._UZ(122,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(123,"div",4),t.TgZ(124,"div",5),t.TgZ(125,"label"),t._uU(126),t.ALo(127,"translate"),t.qZA(),t._UZ(128,"input",19),t.ALo(129,"translate"),t.ALo(130,"translate"),t._UZ(131,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(132,"div",4),t.TgZ(133,"div",5),t.TgZ(134,"label"),t._uU(135),t.ALo(136,"translate"),t.qZA(),t._UZ(137,"input",20),t.ALo(138,"translate"),t.ALo(139,"translate"),t._UZ(140,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(141,"div",4),t.TgZ(142,"div",5),t.TgZ(143,"label"),t._uU(144),t.ALo(145,"translate"),t.qZA(),t._UZ(146,"input",21),t.ALo(147,"translate"),t.ALo(148,"translate"),t._UZ(149,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(150,"div",4),t.TgZ(151,"div",5),t.TgZ(152,"label"),t._uU(153),t.ALo(154,"translate"),t.qZA(),t._UZ(155,"input",22),t.ALo(156,"translate"),t.ALo(157,"translate"),t._UZ(158,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(159,"div",4),t.TgZ(160,"div",5),t.TgZ(161,"label"),t._uU(162),t.ALo(163,"translate"),t.qZA(),t._UZ(164,"input",23),t.ALo(165,"translate"),t.ALo(166,"translate"),t._UZ(167,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(168,"div",4),t.TgZ(169,"div",5),t.TgZ(170,"label"),t._uU(171),t.ALo(172,"translate"),t.qZA(),t._UZ(173,"br"),t._UZ(174,"mat-slide-toggle",24),t.qZA(),t.qZA(),t.TgZ(175,"div",4),t.TgZ(176,"div",5),t.TgZ(177,"label"),t._uU(178),t.ALo(179,"translate"),t.qZA(),t._UZ(180,"br"),t._UZ(181,"mat-slide-toggle",25),t.qZA(),t.qZA(),t.TgZ(182,"div",4),t.TgZ(183,"div",5),t.TgZ(184,"label"),t._uU(185),t.ALo(186,"translate"),t.qZA(),t._UZ(187,"textarea",26),t.ALo(188,"translate"),t.ALo(189,"translate"),t._UZ(190,"validation-message",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(191,"div",27),t.TgZ(192,"div",28),t.TgZ(193,"input",29),t.NdJ("click",function(){return o.closeModel()}),t.ALo(194,"translate"),t.qZA(),t._uU(195," \xa0 "),t._UZ(196,"input",30),t.ALo(197,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,73,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,75,"Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,77,"Please_Enter")," ",t.lcZ(14,79,"Code"),""),t.xp6(6),t.Oqu(t.lcZ(19,81,"Skill_Type")),t.xp6(4),t.AsE("",t.lcZ(23,83,"Select")," ",t.lcZ(24,85,"Skill_Type")," "),t.xp6(7),t.Q6J("control",o.form.controls.skillType),t.xp6(4),t.Oqu(t.lcZ(34,87,"Name_In_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(36,89,"Please_Enter")," ",t.lcZ(37,91,"Name_In_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.nameInEnglish),t.xp6(4),t.Oqu(t.lcZ(43,93,"Name_In_Arabic")),t.xp6(2),t.hYB("placeholder","",t.lcZ(45,95,"Please_Enter")," ",t.lcZ(46,97,"Name_In_Arabic"),""),t.xp6(3),t.Q6J("control",o.form.controls.nameInArabic),t.xp6(4),t.Oqu(t.lcZ(52,99,"Details_of_Skill_Set")),t.xp6(2),t.hYB("placeholder","",t.lcZ(54,101,"Please_Enter")," ",t.lcZ(55,103,"Details_of_Skill_Set"),""),t.xp6(3),t.Q6J("control",o.form.controls.detailsOfSkillSet),t.xp6(4),t.Oqu(t.lcZ(61,105,"Skill_Set_Type")),t.xp6(4),t.AsE("",t.lcZ(65,107,"Select")," ",t.lcZ(66,109,"Skill_Set_Type")," "),t.xp6(7),t.Q6J("control",o.form.controls.skillSetType),t.xp6(4),t.Oqu(t.lcZ(76,111,"Priory_Importance_Scale")),t.xp6(4),t.AsE("",t.lcZ(80,113,"Select")," ",t.lcZ(81,115,"Priory_Importance_Scale")," "),t.xp6(7),t.Q6J("control",o.form.controls.prioryImportanceScale),t.xp6(4),t.Oqu(t.lcZ(91,117,"Min_Buffer_Resource")),t.xp6(2),t.hYB("placeholder","",t.lcZ(93,119,"Please_Enter")," ",t.lcZ(94,121,"Min_Buffer_Resource"),""),t.xp6(3),t.Q6J("control",o.form.controls.minBufferResource),t.xp6(4),t.Oqu(t.lcZ(100,123,"Monthly_CTC")),t.xp6(2),t.hYB("placeholder","",t.lcZ(102,125,"Please_Enter")," ",t.lcZ(103,127,"Monthly_CTC"),""),t.xp6(3),t.Q6J("control",o.form.controls.monthlyCtc),t.xp6(4),t.Oqu(t.lcZ(109,129,"Cost_To_Company_Day")),t.xp6(2),t.hYB("placeholder","",t.lcZ(111,131,"Please_Enter")," ",t.lcZ(112,133,"Cost_To_Company_Day"),""),t.xp6(3),t.Q6J("control",o.form.controls.costToCompanyDay),t.xp6(4),t.Oqu(t.lcZ(118,135,"Monthly_Overhead_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(120,137,"Please_Enter")," ",t.lcZ(121,139,"Monthly_Overhead_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.monthlyOverheadCost),t.xp6(4),t.Oqu(t.lcZ(127,141,"Monthly_Other_Over_Heads")),t.xp6(2),t.hYB("placeholder","",t.lcZ(129,143,"Please_Enter")," ",t.lcZ(130,145,"Monthly_Other_Over_Heads"),""),t.xp6(3),t.Q6J("control",o.form.controls.monthlyOtherOverHeads),t.xp6(4),t.Oqu(t.lcZ(136,147,"Total_Skillset_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(138,149,"Please_Enter")," ",t.lcZ(139,151,"Total_Skillset_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.totalSkillsetCost),t.xp6(4),t.Oqu(t.lcZ(145,153,"Total_Skillset_Cost_Day")),t.xp6(2),t.hYB("placeholder","",t.lcZ(147,155,"Please_Enter")," ",t.lcZ(148,157,"Total_Skillset_Cost_Day"),""),t.xp6(3),t.Q6J("control",o.form.controls.totalSkillsetCostDay),t.xp6(4),t.Oqu(t.lcZ(154,159,"Service_Price_To_Company")),t.xp6(2),t.hYB("placeholder","",t.lcZ(156,161,"Please_Enter")," ",t.lcZ(157,163,"Service_Price_To_Company"),""),t.xp6(3),t.Q6J("control",o.form.controls.servicePriceToCompany),t.xp6(4),t.Oqu(t.lcZ(163,165,"Min_Margin_Required")),t.xp6(2),t.hYB("placeholder","",t.lcZ(165,167,"Please_Enter")," ",t.lcZ(166,169,"Min_Margin_Required"),""),t.xp6(3),t.Q6J("control",o.form.controls.minMarginRequired),t.xp6(4),t.Oqu(t.lcZ(172,171,"Override_Margin_if_Required")),t.xp6(7),t.Oqu(t.lcZ(179,173,"Is_Active")),t.xp6(7),t.Oqu(t.lcZ(186,175,"Responsibilities_Roles")),t.xp6(2),t.hYB("placeholder","",t.lcZ(188,177,"Please_Enter")," ",t.lcZ(189,179,"Responsibilities_Roles"),""),t.xp6(3),t.Q6J("control",o.form.controls.responsibilitiesRoles),t.xp6(3),t.s9C("value",t.lcZ(194,181,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(197,183,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,V.s,l.wV,jt.Rr],pipes:[f.X$],encapsulation:2}),i})();function cN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Skill_Set")," "))}function pN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.skillSetCode)}}function uN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name_In_English")," "))}function dN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.nameInEnglish)}}function _N(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name_In_Arabic")," "))}function mN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.nameInArabic)}}function gN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Skill_Set_Cost")," "))}function hN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.totalSkillsetCost)}}function ZN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Margin")," "))}function fN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.minMarginRequired)}}function AN(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function CN(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"a",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",39),t.qZA(),t.qZA()}}function TN(i,a){1&i&&t._UZ(0,"tr",40)}function vN(i,a){1&i&&t._UZ(0,"tr",41)}const xN=function(){return{standalone:!0}};let qN=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.notifyService=p,this.validationService=u,this.pageService=d,this.dialog=_,this.displayedColumns=["skillSetCode","nameInEnglish","nameInArabic","totalSkillsetCost","minMarginRequired","Actions"],this.searchValue="",this.isLoading=!1,this.sortingOrder="id desc"}ngOnInit(){this.initialLoading()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}setForm(){this.form=this.fb.group({})}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Skillset/getSkillsetsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,lN);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Skillset","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Skillset","Update")}refresh(){this.searchValue="",this.initialLoading()}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Skillset",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(w.g),t.Y36(E.R),t.Y36(B.N),t.Y36(T.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-skillset"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addskillset","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","skillSetCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nameInEnglish"],["matColumnDef","nameInArabic"],["matColumnDef","totalSkillsetCost"],["matColumnDef","minMarginRequired"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,cN,3,3,"th",24),t.YNc(43,pN,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,uN,3,3,"th",24),t.YNc(46,dN,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,_N,3,3,"th",24),t.YNc(49,mN,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,gN,3,3,"th",24),t.YNc(52,hN,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,ZN,3,3,"th",24),t.YNc(55,fN,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,AN,3,3,"th",31),t.YNc(58,CN,3,0,"td",25),t.BQk(),t.YNc(59,TN,1,0,"tr",32),t.YNc(60,vN,1,0,"tr",33),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Skill_Set")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Skill_Set")),t.xp6(10),t.hij("",t.lcZ(27,24,"Skill_Set_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,xN)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Skill_Set")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function bN(i,a){if(1&i&&(t.TgZ(0,"span",27),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.elementType)}}function yN(i,a){1&i&&(t.TgZ(0,"span",27),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function SN(i,a){if(1&i&&(t.TgZ(0,"span",27),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.elementEngName)}}function wN(i,a){1&i&&(t.TgZ(0,"span",27),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function UN(i,a){if(1&i&&(t.TgZ(0,"span",27),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.elementArbName)}}function DN(i,a){1&i&&(t.TgZ(0,"span",27),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function LN(i,a){1&i&&(t.TgZ(0,"div",5),t.TgZ(1,"div",6),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",29),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"List_Value_String")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,5,"Please_Enter")," ",t.lcZ(7,7,"List_Value_String"),""))}function NN(i,a){1&i&&(t.TgZ(0,"div",30),t.TgZ(1,"div",6),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",31),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"Min_Value")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,5,"Please_Enter")," ",t.lcZ(7,7,"Min_Value"),""))}function EN(i,a){1&i&&(t.TgZ(0,"div",30),t.TgZ(1,"div",6),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",32),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"Max_Value")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,5,"Please_Enter")," ",t.lcZ(7,7,"Max_Value"),""))}let ON=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.listVisible=!1,this.minmaxVisible=!1,this.readonly="",this.isDataLoading=!1}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly"),console.log("Before"),console.log(this.form)}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({formElementCode:["SFEXXXX"],elementEngName:["",l.kI.required],elementArbName:["",l.kI.required],elementType:["",l.kI.required],listValueString:[""],minValue:[""],maxValue:[""],isActive:[!0]})}submit(){console.log("After"),console.log(this.form),this.form.valid?(this.id>0&&(this.form.value.id=this.id),""==this.form.value.minValue&&(this.form.value.minValue=0),""==this.form.value.maxValue&&(this.form.value.maxValue=0),this.apiService.post("surveyFormElement",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("surveyFormElement/getSurveyFormElementById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),"List"==e.elementType?(this.listVisible=!0,this.minmaxVisible=!1):"Scale"==e.elementType?(this.minmaxVisible=!0,this.listVisible=!1):(this.listVisible=!1,this.minmaxVisible=!1))})}reset(){this.form.controls.formElementCode.setValue(""),this.form.controls.elementEngName.setValue(""),this.form.controls.elementArbName.setValue(""),this.form.controls.elementType.setValue(""),this.form.controls.listValueString.setValue(""),this.form.controls.minValue.setValue(0),this.form.controls.maxValue.setValue(0)}elementTypeChanged(e){const o=e.target.value;"List"==o?(this.listVisible=!0,this.minmaxVisible=!1):"Scale"==o?(this.minmaxVisible=!0,this.listVisible=!1):(this.listVisible=!1,this.minmaxVisible=!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-survey-form-elements"]],features:[t.qOj],decls:79,vars:70,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","formElementCode","readonly","",1,"form-control",3,"placeholder"],[1,"form-group","mb-4"],["for","eletype",1,"mr-sm-2"],["formControlName","elementType","value","option.value",1,"custom-select","mr-sm-2",3,"change"],["selected",""],["value","Absolute"],["value","Boolean"],["value","List"],["value","Scale"],["value","Percentage"],["style","color:red",4,"ngIf"],["type","text","formControlName","elementEngName",1,"form-control",3,"placeholder"],["type","text","formControlName","elementArbName",1,"form-control",3,"placeholder"],["class","col-md-6 col-lg-6",4,"ngIf"],["class","col-md-3 col-lg-3",4,"ngIf"],["color","primary","formControlName","isActive"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[2,"color","red"],[3,"control"],["type","text","formControlName","listValueString",1,"form-control",3,"placeholder"],[1,"col-md-3","col-lg-3"],["type","number","formControlName","minValue",1,"form-control",3,"placeholder"],["type","number","formControlName","maxValue",1,"form-control",3,"placeholder"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",7),t.ALo(14,"translate"),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.TgZ(16,"div",5),t.TgZ(17,"div",8),t.TgZ(18,"label",9),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"select",10),t.NdJ("change",function(s){return o.elementTypeChanged(s)}),t.TgZ(22,"option",11),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"option",12),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"option",13),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"option",14),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"option",15),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"option",16),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.YNc(40,bN,2,1,"span",17),t.YNc(41,yN,3,3,"span",17),t.qZA(),t.qZA(),t.TgZ(42,"div",5),t.TgZ(43,"div",6),t.TgZ(44,"label"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"input",18),t.ALo(48,"translate"),t.ALo(49,"translate"),t.YNc(50,SN,2,1,"span",17),t.YNc(51,wN,3,3,"span",17),t.qZA(),t.qZA(),t.TgZ(52,"div",5),t.TgZ(53,"div",6),t.TgZ(54,"label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"input",19),t.ALo(58,"translate"),t.ALo(59,"translate"),t.YNc(60,UN,2,1,"span",17),t.YNc(61,DN,3,3,"span",17),t.qZA(),t.qZA(),t.YNc(62,LN,8,9,"div",20),t.YNc(63,NN,8,9,"div",21),t.YNc(64,EN,8,9,"div",21),t.qZA(),t.TgZ(65,"div",5),t.TgZ(66,"div",6),t.TgZ(67,"label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t._UZ(70,"br"),t._UZ(71,"mat-slide-toggle",22),t.qZA(),t.qZA(),t.TgZ(72,"div",23),t.TgZ(73,"div",24),t.TgZ(74,"input",25),t.NdJ("click",function(){return o.closeModel()}),t.ALo(75,"translate"),t.qZA(),t._uU(76," \xa0 "),t._UZ(77,"input",26),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(6);let s,r,c,p,u,d;t.xp6(1),t.Oqu(t.lcZ(2,30,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(6),t.Oqu(t.lcZ(12,32,"Element_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(14,34,"Please_Enter")," ",t.lcZ(15,36,"Element_Code"),""),t.xp6(6),t.Oqu(t.lcZ(20,38,"Element_Type")),t.xp6(4),t.Oqu(t.lcZ(24,40,"Choose_Element_Type")),t.xp6(3),t.Oqu(t.lcZ(27,42,"Absolute")),t.xp6(3),t.Oqu(t.lcZ(30,44,"Boolean")),t.xp6(3),t.Oqu(t.lcZ(33,46,"List")),t.xp6(3),t.Oqu(t.lcZ(36,48,"Scale")),t.xp6(3),t.Oqu(t.lcZ(39,50,"Percentage")),t.xp6(2),t.Q6J("ngIf",!(null!=(s=o.form.get("elementType"))&&s.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(r=o.form.get("elementType"))?null:r.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.Oqu(t.lcZ(46,52,"Element_English_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(48,54,"Please_Enter")," ",t.lcZ(49,56,"Element_English_Name"),""),t.xp6(3),t.Q6J("ngIf",!(null!=(c=o.form.get("elementEngName"))&&c.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(p=o.form.get("elementEngName"))?null:p.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.Oqu(t.lcZ(56,58,"Element_Arabic_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(58,60,"Please_Enter")," ",t.lcZ(59,62,"Element_Arabic_Name"),""),t.xp6(3),t.Q6J("ngIf",!(null!=(u=o.form.get("elementArbName"))&&u.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(d=o.form.get("elementArbName"))?null:d.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(1),t.Q6J("ngIf",o.listVisible),t.xp6(1),t.Q6J("ngIf",o.minmaxVisible),t.xp6(1),t.Q6J("ngIf",o.minmaxVisible),t.xp6(4),t.Oqu(t.lcZ(69,64,"Is_Active")),t.xp6(6),t.s9C("value",t.lcZ(75,66,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(78,68,"Save"))}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,Z.O5,jt.Rr,V.s,l.wV],pipes:[f.X$],encapsulation:2}),i})();function kN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Element_Code")," "))}function jN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.formElementCode)}}function MN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Element_English_Name")," "))}function RN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.elementEngName)}}function PN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Element_Arab_Name")," "))}function FN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.elementArbName)}}function IN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Element_Type")," "))}function YN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.elementType)}}function JN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function QN(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function BN(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function HN(i,a){if(1&i&&(t.TgZ(0,"td",36),t.YNc(1,QN,3,3,"span",37),t.YNc(2,BN,3,3,"ng-template",null,38,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function $N(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function VN(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"a",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",43),t.qZA(),t.qZA()}}function GN(i,a){1&i&&t._UZ(0,"tr",44)}function WN(i,a){1&i&&t._UZ(0,"tr",45)}const zN=function(){return{standalone:!0}};let XN=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.displayedColumns=["formElementCode","elementEngName","elementArbName","elementType","isActive","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadUnits(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadUnits(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("surveyFormElement/getSurveyFormElementsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,ON);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Form_Element","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Form_Element","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("SurveyFormElement",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-survey-form-elements"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addsurveyelements","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","formElementCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","elementEngName"],["matColumnDef","elementArbName"],["matColumnDef","elementType"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,kN,3,3,"th",24),t.YNc(43,jN,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,MN,3,3,"th",24),t.YNc(46,RN,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,PN,3,3,"th",24),t.YNc(49,FN,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,IN,3,3,"th",24),t.YNc(52,YN,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,JN,3,3,"th",24),t.YNc(55,HN,4,2,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,$N,3,3,"th",31),t.YNc(58,VN,3,0,"td",25),t.BQk(),t.YNc(59,GN,1,0,"tr",32),t.YNc(60,WN,1,0,"tr",33),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Survey_Form_Elements")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operations_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Survey_Form_Elements")),t.xp6(10),t.hij("",t.lcZ(27,24,"Survey_Form_elements_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,zN)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_Survey_Form_Element")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function KN(i,a){if(1&i&&(t.TgZ(0,"option",15),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}let t8=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.serviceCodeList=[],this.surveyFormCode=""}ngOnInit(){this.setForm(),this.getFormCode(),this.loadServices()}closeModel(){this.dialogRef.close()}submit(){this.form.valid?this.apiService.post("Services/AttachSurveyFormToService",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}setForm(){this.form=this.fb.group({serviceCode:[""],surveyFormCode:[""]})}loadServices(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceCodeList=e})}getFormCode(){this.apiService.getall("SurveyForm/getSurveyFormHeadById/"+this.id).subscribe(e=>{this.surveyFormCode=e.surveyFormCode,this.form.controls.surveyFormCode.setValue(e.surveyFormCode)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attach-survey-form-to-service"]],features:[t.qOj],decls:34,vars:30,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","surveyFormCode","readonly","readonly",1,"form-control",3,"placeholder"],[3,"control"],["formControlName","serviceCode",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","customrow"],[1,"col-lg-12","col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"select",8),t.TgZ(22,"option",9),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA(),t.YNc(26,KN,2,2,"option",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",11),t.TgZ(28,"div",12),t.TgZ(29,"input",13),t.NdJ("click",function(){return o.closeModel()}),t.ALo(30,"translate"),t.qZA(),t._uU(31," \xa0\xa0 "),t._UZ(32,"input",14),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,12,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,14,"Form_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,16,"Please_Enter")," ",t.lcZ(14,18,"Form_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyFormCode),t.xp6(4),t.Oqu(t.lcZ(20,20,"Service_Code")),t.xp6(4),t.AsE("",t.lcZ(24,22,"Select")," ",t.lcZ(25,24,"Service_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.serviceCodeList),t.xp6(3),t.s9C("value",t.lcZ(30,26,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(33,28,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg],pipes:[f.X$],encapsulation:2}),i})();function e8(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.text,"-",e.textTwo,"")}}function o8(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t.TgZ(10,"i",34),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeElement(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.formElementCode),t.xp6(2),t.Oqu(e.elementEngName),t.xp6(2),t.Oqu(e.elementArbName),t.xp6(2),t.Oqu(e.elementType)}}const we=function(){return{standalone:!0}};let Co=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.readonly="",this.elementCodeList=[],this.isDataLoading=!1,this.listOfElements=[],this.sequence=1,this.editsequence=0,this.remarks="",this.formElementCode="",this.elementEngName="",this.elementArbName="",this.elementType=""}loadElementCodes(){this.apiService.getall("SurveyFormElement/getSelectSurveyFormElementList").subscribe(e=>{this.elementCodeList=e})}ngOnInit(){this.setForm(),this.loadElementCodes(),this.readonly="readonly"}setForm(){this.form=this.fb.group({surveyFormCode:[""],surveyFormNameArb:["",l.kI.required],surveyFormNameEng:["",l.kI.required],remarks:[""],formElementCode:[""]}),this.setToDefault()}submit(){this.form.valid&&this.listOfElements.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.elementsList=this.listOfElements,this.apiService.post("SurveyForm",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}addElement(){""!=this.formElementCode&&this.listOfElements.push({sequence:this.getSequence(),formElementCode:this.formElementCode,elementArbName:this.elementArbName,elementEngName:this.elementEngName,elementType:this.elementType}),this.setToDefault()}removeElement(e){this.listOfElements.splice(e,1),this.downSequence()}setToDefault(){this.formElementCode="",this.elementArbName="",this.elementEngName="",this.elementType=""}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.surveyFormCode.setValue(""),this.form.controls.surveyFormNameArb.setValue(""),this.form.controls.surveyFormNameEng.setValue(""),this.form.controls.remarks.setValue(""),this.form.controls.formElementCode.setValue("")}closeModel(){this.dialogRef.close()}getElementDetails(e){this.apiService.getall("SurveyFormElement/getSurveyFormElementBySurveyFormElementCode/"+e.target.value).subscribe(n=>{this.elementArbName=n.elementArbName,this.elementEngName=n.elementEngName,this.elementType=n.elementType})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-survey-form"]],features:[t.qOj],decls:114,vars:99,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],[1,"mr-sm-2"],["type","text","formControlName","surveyFormCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","surveyFormNameArb",1,"form-control",3,"placeholder"],["type","text","formControlName","surveyFormNameEng",1,"form-control",3,"placeholder"],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-center"],[1,"fas","fa-plus-circle",3,"click"],["colspan","10"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[1,"fas","fa-minus-circle",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"div",12),t.TgZ(17,"label",13),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",14),t.ALo(21,"translate"),t.ALo(22,"translate"),t._UZ(23,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(24,"div",11),t.TgZ(25,"div",12),t.TgZ(26,"label",13),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"input",16),t.ALo(30,"translate"),t._UZ(31,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(32,"div",11),t.TgZ(33,"div",12),t.TgZ(34,"label",13),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",17),t.ALo(38,"translate"),t.ALo(39,"translate"),t._UZ(40,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(41,"div",6),t.TgZ(42,"div",12),t.TgZ(43,"label",13),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"textarea",18),t.ALo(47,"translate"),t.ALo(48,"translate"),t._uU(49,'                        <validation-message [control]="form.controls.remarks"></validation-message>\n'),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",19),t.TgZ(51,"table",20),t.TgZ(52,"thead"),t.TgZ(53,"tr"),t.TgZ(54,"th"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"th"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"th"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"th"),t._uU(64),t.ALo(65,"translate"),t.qZA(),t._UZ(66,"th"),t.qZA(),t.qZA(),t.TgZ(67,"tbody"),t.TgZ(68,"tr"),t.TgZ(69,"td"),t.TgZ(70,"select",21),t.NdJ("ngModelChange",function(s){return o.formElementCode=s})("change",function(s){return o.getElementDetails(s)}),t.TgZ(71,"option",22),t._uU(72),t.ALo(73,"translate"),t.ALo(74,"translate"),t.qZA(),t.YNc(75,e8,2,3,"option",23),t.qZA(),t.qZA(),t.TgZ(76,"td"),t.TgZ(77,"input",24),t.NdJ("ngModelChange",function(s){return o.elementEngName=s}),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.TgZ(79,"td"),t.TgZ(80,"input",24),t.NdJ("ngModelChange",function(s){return o.elementArbName=s}),t.ALo(81,"translate"),t.qZA(),t.qZA(),t.TgZ(82,"td"),t.TgZ(83,"input",24),t.NdJ("ngModelChange",function(s){return o.elementType=s}),t.ALo(84,"translate"),t.qZA(),t.qZA(),t.TgZ(85,"td",25),t.TgZ(86,"i",26),t.NdJ("click",function(){return o.addElement()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(87,"tr"),t._UZ(88,"td",27),t.qZA(),t.TgZ(89,"thead"),t.TgZ(90,"tr"),t.TgZ(91,"th"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.TgZ(94,"th"),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"th"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"th"),t._uU(101),t.ALo(102,"translate"),t.qZA(),t._UZ(103,"th"),t.qZA(),t.qZA(),t.TgZ(104,"tbody"),t.YNc(105,o8,11,4,"tr",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(106,"div",29),t.TgZ(107,"div",8),t.TgZ(108,"div",30),t.TgZ(109,"input",31),t.NdJ("click",function(){return o.closeModel()}),t.ALo(110,"translate"),t.qZA(),t._uU(111," \xa0 "),t._UZ(112,"input",32),t.ALo(113,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,41,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(13),t.Oqu(t.lcZ(19,43,"Survey_Form_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(21,45,"Please_Enter")," ",t.lcZ(22,47,"Survey_Form_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyFormCode),t.xp6(4),t.Oqu(t.lcZ(28,49,"Form_English_Name")),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(30,51,"Form_English_Name"),""),t.xp6(2),t.Q6J("control",o.form.controls.surveyFormNameArb),t.xp6(4),t.Oqu(t.lcZ(36,53,"Form_Arabic_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(38,55,"Please_Enter")," ",t.lcZ(39,57,"Form_Arabic_Name"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyFormNameEng),t.xp6(4),t.Oqu(t.lcZ(45,59,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(47,61,"Please_Select")," ",t.lcZ(48,63,"Remarks"),""),t.xp6(9),t.Oqu(t.lcZ(56,65,"Element_Code")),t.xp6(3),t.Oqu(t.lcZ(59,67,"Element_English_Name")),t.xp6(3),t.Oqu(t.lcZ(62,69,"Element_Arab_Name")),t.xp6(3),t.Oqu(t.lcZ(65,71,"Element_Type")),t.xp6(6),t.Q6J("ngModel",o.formElementCode)("ngModelOptions",t.DdM(95,we)),t.xp6(2),t.AsE("",t.lcZ(73,73,"Select")," ",t.lcZ(74,75,"Element_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.elementCodeList),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(78,77,"Element_English_Name"),""),t.Q6J("ngModel",o.elementEngName)("ngModelOptions",t.DdM(96,we)),t.xp6(3),t.MGl("placeholder","  ",t.lcZ(81,79,"Element_Arab_Name"),""),t.Q6J("ngModel",o.elementArbName)("ngModelOptions",t.DdM(97,we)),t.xp6(3),t.MGl("placeholder","   ",t.lcZ(84,81,"Element_Type"),""),t.Q6J("ngModel",o.elementType)("ngModelOptions",t.DdM(98,we)),t.xp6(9),t.Oqu(t.lcZ(93,83,"Element_Code")),t.xp6(3),t.Oqu(t.lcZ(96,85,"Element_English_Name")),t.xp6(3),t.Oqu(t.lcZ(99,87,"Element_Arab_Name")),t.xp6(3),t.Oqu(t.lcZ(102,89,"Element_Type")),t.xp6(4),t.Q6J("ngForOf",o.listOfElements),t.xp6(4),t.s9C("value",t.lcZ(110,91,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(113,93,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.On,l.YN,l.Kr,Z.sg],pipes:[f.X$],encapsulation:2}),i})();function i8(i,a){1&i&&(t.TgZ(0,"td",19),t._uU(1,"______________"),t.qZA())}function n8(i,a){1&i&&(t.TgZ(0,"td",16),t.TgZ(1,"div",20),t._UZ(2,"input",21),t._uU(3,"\xa0\xa0 "),t.TgZ(4,"label",22),t._uU(5,"Yes"),t.qZA(),t.qZA(),t.TgZ(6,"div",20),t._UZ(7,"input",23),t._uU(8,"\xa0\xa0 "),t.TgZ(9,"label",24),t._uU(10,"No"),t.qZA(),t.qZA(),t.qZA())}function a8(i,a){if(1&i&&(t.TgZ(0,"div",20),t._UZ(1,"input",26),t._uU(2,"\xa0\xa0 "),t.TgZ(3,"label",27),t._uU(4),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(1),t.MGl("id","listdata-",o,""),t.s9C("value",e),t.xp6(2),t.MGl("for","listdata-",o,""),t.xp6(1),t.Oqu(e)}}function s8(i,a){if(1&i&&(t.TgZ(0,"td",19),t.YNc(1,a8,5,4,"div",25),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.listValueString.split(","))}}function r8(i,a){1&i&&t._UZ(0,"td",19)}function l8(i,a){1&i&&t._UZ(0,"td",19)}function c8(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",16),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.YNc(7,i8,2,0,"td",17),t.YNc(8,n8,11,0,"td",18),t.YNc(9,s8,2,1,"td",17),t.YNc(10,r8,1,0,"td",17),t.YNc(11,l8,1,0,"td",17),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.elementEngName),t.xp6(2),t.Oqu(e.elementArbName),t.xp6(1),t.Q6J("ngIf","Absolute"==e.elementType),t.xp6(1),t.Q6J("ngIf","Boolean"==e.elementType),t.xp6(1),t.Q6J("ngIf","List"==e.elementType),t.xp6(1),t.Q6J("ngIf","Scale"==e.elementType),t.xp6(1),t.Q6J("ngIf","Percentage"==e.elementType)}}let To=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h,A,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.route=h,this.oprService=A,this.dialogRef=C,this.isLoading=!1,this.surveyFormElements=[],this.elementOptions=[]}ngOnInit(){this.loadData()}loadData(){this.isLoading=!0,this.apiService.get("SurveyForm/getSurveyFormTemplateById",this.id).subscribe(e=>{this.surveyFormHeader=e.head,this.surveyFormElements=e.elementsList,this.isLoading=!1},e=>this.utilService.ShowApiErrorMessage(e)),localStorage.setItem("surveyFormTemplateId",this.id)}printComponent(e){let o=document.getElementById(e);const n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}goBack(){window.history.back()}printSurveyForm(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(D.gz),t.Y36(W),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-survey-form-template"]],features:[t.qOj],decls:80,vars:45,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"font-size","1rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","20%","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["rowspan","2",2,"width","20%","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","400"],[2,"padding-bottom","5px","padding-top","5px"],[2,"width","3%","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","70%","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600"],[4,"ngFor","ngForOf"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["style","border:1px solid #878787;padding:5px;",4,"ngIf"],["style"," border:1px solid #878787;padding:5px;font-size:0.775rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight: 400;",4,"ngIf"],[2,"border","1px solid #878787","padding","5px"],[1,"radio"],["id","rdoption-1","name","rdoption","type","radio","value","1"],["for","rdoption-1",1,"radio-label"],["id","rdoption-2","name","rdoption","type","radio","value","0"],["for","rdoption-2",1,"radio-label"],["class","radio",4,"ngFor","ngForOf"],["name","listdata","type","radio",3,"id","value"],[1,"radio-label",3,"for"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printSurveyForm()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"h4",4),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"h4",5),t._uU(14),t.qZA(),t.TgZ(15,"table",6),t.TgZ(16,"tr"),t.TgZ(17,"th",7),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"td",8),t.TgZ(21,"th",7),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"td",8),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"th",7),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"td",8),t.TgZ(30,"th",7),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"td",8),t.qZA(),t.TgZ(34,"tr"),t.TgZ(35,"th",9),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"td",8),t.TgZ(39,"th",7),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"td",8),t.qZA(),t.TgZ(43,"tr"),t._UZ(44,"td",8),t.TgZ(45,"th",7),t._uU(46),t.ALo(47,"translate"),t.qZA(),t._UZ(48,"td",8),t.qZA(),t.TgZ(49,"tr"),t.TgZ(50,"th",9),t._uU(51),t.ALo(52,"translate"),t.qZA(),t._UZ(53,"td",8),t.TgZ(54,"th",7),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"td",8),t.qZA(),t.TgZ(58,"tr"),t._UZ(59,"td",8),t.TgZ(60,"th",7),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"td",8),t.qZA(),t.TgZ(64,"tr"),t.TgZ(65,"th",7),t._uU(66),t.ALo(67,"translate"),t.qZA(),t._UZ(68,"td",10),t.qZA(),t.qZA(),t.TgZ(69,"div",11),t.TgZ(70,"table",6),t.TgZ(71,"tr"),t.TgZ(72,"th",12),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"th",13),t._uU(76),t.ALo(77,"translate"),t.qZA(),t._UZ(78,"th",14),t.qZA(),t.YNc(79,c8,12,8,"tr",15),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(11),t.hij(" ",t.lcZ(12,17,"Survey_Form"),": "),t.xp6(3),t.AsE(" ",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameArb,"(",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameEng,") "),t.xp6(4),t.Oqu(t.lcZ(19,19,"Enquiry_ID")),t.xp6(4),t.Oqu(t.lcZ(23,21,"Enquiry_Number")),t.xp6(5),t.Oqu(t.lcZ(28,23,"Service_Code")),t.xp6(4),t.Oqu(t.lcZ(32,25,"Customer")),t.xp6(5),t.Oqu(t.lcZ(37,27,"Service_Name")),t.xp6(4),t.Oqu(t.lcZ(41,29,"Name")),t.xp6(6),t.Oqu(t.lcZ(47,31,"Mobile")),t.xp6(5),t.Oqu(t.lcZ(52,33,"Site_Name")),t.xp6(4),t.Oqu(t.lcZ(56,35,"Address")),t.xp6(6),t.Oqu(t.lcZ(62,37,"City")),t.xp6(5),t.Oqu(t.lcZ(67,39,"Geo_Location")),t.xp6(7),t.hij(" ",t.lcZ(74,41,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(77,43,"Form_Attribute")," "),t.xp6(3),t.Q6J("ngForOf",o.surveyFormElements))},directives:[Z.sg,Z.O5],pipes:[f.X$],encapsulation:2}),i})();function p8(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Form_Code")," "))}function u8(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyFormCode)}}function d8(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Form_English_Name")," "))}function _8(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyFormNameEng)}}function m8(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Form_Arab_Name")," "))}function g8(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyFormNameArb)}}function h8(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Remarks")," "))}function Z8(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.remarks)}}function f8(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function A8(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",35),t.TgZ(1,"div",37),t.TgZ(2,"a",38),t._UZ(3,"i",39),t.qZA(),t.TgZ(4,"div",40),t.TgZ(5,"a",41),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().ViewSurveyFormTemplate(s.id)}),t._UZ(6,"i",42),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"View_Survey_Form_Template")," "))}function C8(i,a){1&i&&t._UZ(0,"tr",43)}function T8(i,a){1&i&&t._UZ(0,"tr",44)}const v8=function(){return{standalone:!0}};let x8=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.displayedColumns=["surveyFormCode","surveyFormNameArb","surveyFormNameEng","remarks","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("SurveyFormHeader/getSurveyFormHeaderPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Survey_Form_Template","Add",Co)}AttachToService(e){this.openDialogManage(e,g.Oi.create,"Attach_Survey_Form_To_Service","Attach",t8)}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Survey_Form_Template","Update",Co)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("SurveyFormHeader",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}ViewSurveyFormTemplate(e){this.openDialogManage(e,g.Oi.create,"","",To)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-survey-form"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:60,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addEnquiries","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","surveyFormCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","surveyFormNameEng"],["matColumnDef","surveyFormNameArb"],["matColumnDef","remarks"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-eye"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,p8,3,3,"th",24),t.YNc(43,u8,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,d8,3,3,"th",24),t.YNc(46,_8,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,m8,3,3,"th",24),t.YNc(49,g8,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,h8,3,3,"th",24),t.YNc(52,Z8,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,f8,3,3,"th",30),t.YNc(55,A8,9,3,"td",25),t.BQk(),t.YNc(56,C8,1,0,"tr",31),t.YNc(57,T8,1,0,"tr",32),t.qZA(),t.ynx(58),t.TgZ(59,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Survey_Form_Templates")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Survey_Form_Templates")),t.xp6(10),t.hij("",t.lcZ(27,24,"Survey_Form_Templates")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,v8)),t.xp6(5),t.hij("",t.lcZ(35,28,"Create_New_Survey_Form_Template")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();function q8(i,a){if(1&i&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}function b8(i,a){if(1&i&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}let y8=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=_,this.id=0,this.branchCodeList=[],this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.loadUsers(),this.setForm(),this.loadBranchCodes(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({surveyorCode:["SRYRXXXXXX"],surveyorNameEng:["",l.kI.required],surveyorNameArb:["",l.kI.required],branch:["",l.kI.required],userId:["",l.kI.required],isActive:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Surveyors",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0),this.reset())},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Surveyors/getSurveyorById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}loadBranchCodes(){this.apiService.getall("Branch/getSelectBranchCodeList").subscribe(e=>{this.branchCodeList=e})}loadUsers(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{this.userList=e})}reset(){this.form.controls.surveyorCode.setValue(""),this.form.controls.surveyorNameEng.setValue(""),this.form.controls.surveyorNameArb.setValue(""),this.form.controls.branch.setValue(""),this.form.controls.user.setValue(""),this.form.controls.isActive.setValue(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(b.t),t.Y36(f.sK),t.Y36(w.g),t.Y36(E.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-surveyor"]],features:[t.qOj],decls:73,vars:62,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","surveyorCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","surveyorNameEng",1,"form-control",3,"placeholder"],["type","text","formControlName","surveyorNameArb",1,"form-control",3,"placeholder"],["formControlName","branch",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","userId",1,"custom-select","mr-sm-2"],["color","primary","formControlName","isActive"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"br"),t.TgZ(40,"select",10),t.TgZ(41,"option",11),t._uU(42),t.ALo(43,"translate"),t.ALo(44,"translate"),t.qZA(),t.YNc(45,q8,2,3,"option",12),t.qZA(),t._UZ(46,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(47,"div",4),t.TgZ(48,"div",5),t.TgZ(49,"label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._UZ(52,"br"),t.TgZ(53,"select",13),t.TgZ(54,"option",11),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.YNc(57,b8,2,3,"option",12),t.qZA(),t._UZ(58,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(59,"div",4),t.TgZ(60,"div",5),t.TgZ(61,"label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._UZ(64,"br"),t._UZ(65,"mat-slide-toggle",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(66,"div",15),t.TgZ(67,"div",16),t.TgZ(68,"input",17),t.NdJ("click",function(){return o.closeModel()}),t.ALo(69,"translate"),t.qZA(),t._uU(70," \xa0 "),t._UZ(71,"input",18),t.ALo(72,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,26,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,28,"Surveyor_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,30,"Please_Enter")," ",t.lcZ(14,32,"Surveyor_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyorCode),t.xp6(4),t.Oqu(t.lcZ(20,34,"Surveyor_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,36,"Please_Enter")," ",t.lcZ(23,38,"Surveyor_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyorNameEng),t.xp6(4),t.Oqu(t.lcZ(29,40,"Surveyor_Name_Arab")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,42,"Please_Enter")," ",t.lcZ(32,44,"Surveyor_Name_Arab"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyorNameArb),t.xp6(4),t.Oqu(t.lcZ(38,46,"Branch")),t.xp6(5),t.AsE("",t.lcZ(43,48,"Select")," ",t.lcZ(44,50,"Branch")," "),t.xp6(3),t.Q6J("ngForOf",o.branchCodeList),t.xp6(1),t.Q6J("control",o.form.controls.branch),t.xp6(4),t.Oqu(t.lcZ(51,52,"User")),t.xp6(5),t.Oqu(t.lcZ(56,54,"Select_User")),t.xp6(2),t.Q6J("ngForOf",o.userList),t.xp6(1),t.Q6J("control",o.form.controls.userId),t.xp6(4),t.Oqu(t.lcZ(63,56,"Is_Active")),t.xp6(6),t.s9C("value",t.lcZ(69,58,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(72,60,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,V.s,l.EJ,l.YN,l.Kr,Z.sg,jt.Rr],pipes:[f.X$],encapsulation:2}),i})();function S8(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Surveyor_Code")," "))}function w8(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyorCode)}}function U8(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Surveyor_Name_English")," "))}function D8(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyorNameEng)}}function L8(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Surveyor_Name_Arab")," "))}function N8(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyorNameArb)}}function E8(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function O8(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function k8(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function j8(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,O8,3,3,"span",40),t.YNc(2,k8,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function M8(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"User_Name")," "))}function R8(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.userName)}}function P8(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch")," "))}function F8(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branch)}}function I8(i,a){1&i&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Y8(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",39),t.TgZ(1,"div",45),t.TgZ(2,"a",46),t._UZ(3,"i",47),t.qZA(),t.TgZ(4,"div",48),t.TgZ(5,"a",49),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(6,"i",50),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"Edit_Surveyor")))}function J8(i,a){1&i&&t._UZ(0,"tr",51)}function Q8(i,a){1&i&&t._UZ(0,"tr",52)}const B8=function(){return{standalone:!0}};let H8=(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_,h){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.oprService=h,this.displayedColumns=["surveyorCode","surveyorNameEng","surveyorNameArb","userName","branch","isActive","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Surveyors/getSurveyorsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,y8);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Surveyor","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Surveyor","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Surveyors",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}viewEnquiries(e){this.oprService.SurveyorCode=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N),t.Y36(W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-surveyor"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:68,vars:32,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-1","col-lg-1","text-center"],[3,"isLoading"],[1,"col-md-6","col-lg-6","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","surveyorCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","surveyorNameEng"],["matColumnDef","surveyorNameArb"],["matColumnDef","isActive"],["matColumnDef","branch"],["matColumnDef","userName"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t._UZ(32,"spinner-loader",17),t.qZA(),t.TgZ(33,"div",18),t.TgZ(34,"a",19),t.NdJ("click",function(){return o.create()}),t._UZ(35,"i",20),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(38,"div",21),t.TgZ(39,"div",22),t.TgZ(40,"div",23),t.ynx(41),t.TgZ(42,"table",24),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(43,25),t.YNc(44,S8,3,3,"th",26),t.YNc(45,w8,2,1,"td",27),t.BQk(),t.ynx(46,28),t.YNc(47,U8,3,3,"th",26),t.YNc(48,D8,2,1,"td",27),t.BQk(),t.ynx(49,29),t.YNc(50,L8,3,3,"th",26),t.YNc(51,N8,2,1,"td",27),t.BQk(),t.ynx(52,30),t.YNc(53,E8,3,3,"th",26),t.YNc(54,j8,4,2,"td",27),t.BQk(),t.ynx(55,31),t.YNc(56,M8,3,3,"th",26),t.YNc(57,R8,2,1,"td",27),t.BQk(),t.ynx(58,32),t.YNc(59,P8,3,3,"th",26),t.YNc(60,F8,2,1,"td",27),t.BQk(),t.ynx(61,33),t.YNc(62,I8,3,3,"th",34),t.YNc(63,Y8,9,3,"td",27),t.BQk(),t.YNc(64,J8,1,0,"tr",35),t.YNc(65,Q8,1,0,"tr",36),t.qZA(),t.ynx(66),t.TgZ(67,"mat-paginator",37),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,17,"Surveyors")," "),t.xp6(6),t.hij(" ",t.lcZ(11,19,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,21,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,23,"Surveyors")),t.xp6(10),t.hij("",t.lcZ(27,25,"Surveyor_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,27,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(31,B8)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(37,29,"Add_New_Surveyor")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})();var $8=X(5862),V8=X(2115);const G8=["chart"],W8=["calendar"];function z8(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div"),t.TgZ(6,"div",5),t.TgZ(7,"h2",6),t._uU(8,"236"),t.qZA(),t.TgZ(9,"span",7),t._uU(10,"+18.33%"),t.qZA(),t.qZA(),t.TgZ(11,"h6",8),t._uU(12,"New Clients"),t.qZA(),t.qZA(),t.TgZ(13,"div",9),t.TgZ(14,"span",10),t._UZ(15,"i",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",2),t.TgZ(17,"div",3),t.TgZ(18,"div",4),t.TgZ(19,"div"),t.TgZ(20,"h2",12),t.TgZ(21,"sup",13),t._uU(22,"$"),t.qZA(),t._uU(23,"18,306 "),t.qZA(),t.TgZ(24,"h6",8),t._uU(25," Earnings of Month "),t.qZA(),t.qZA(),t.TgZ(26,"div",9),t.TgZ(27,"span",10),t._UZ(28,"i",14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",2),t.TgZ(30,"div",3),t.TgZ(31,"div",4),t.TgZ(32,"div"),t.TgZ(33,"div",5),t.TgZ(34,"h2",6),t._uU(35,"1538"),t.qZA(),t.TgZ(36,"span",15),t._uU(37,"-18.33%"),t.qZA(),t.qZA(),t.TgZ(38,"h6",8),t._uU(39,"New Projects"),t.qZA(),t.qZA(),t.TgZ(40,"div",9),t.TgZ(41,"span",10),t._UZ(42,"i",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",17),t.TgZ(44,"div",3),t.TgZ(45,"div",4),t.TgZ(46,"div"),t.TgZ(47,"h2",18),t.NdJ("dblclick",function(){return t.CHM(e),t.oxw().changeDashboardSubtype()}),t._uU(48,"864"),t.qZA(),t.TgZ(49,"h6",8),t._uU(50,"Projects"),t.qZA(),t.qZA(),t.TgZ(51,"div",9),t.TgZ(52,"span",10),t._UZ(53,"i",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(54,"div",20),t.TgZ(55,"div",21),t.TgZ(56,"div",17),t.TgZ(57,"div",3),t.TgZ(58,"h4",22),t._uU(59,"Total Sales"),t.qZA(),t._UZ(60,"div",23),t.TgZ(61,"ul",24),t.TgZ(62,"li"),t._UZ(63,"i",25),t.TgZ(64,"span",26),t._uU(65,"Direct Sales"),t.qZA(),t.TgZ(66,"span",27),t._uU(67,"$2346"),t.qZA(),t.qZA(),t.TgZ(68,"li",28),t._UZ(69,"i",29),t.TgZ(70,"span",26),t._uU(71,"Referral Sales"),t.qZA(),t.TgZ(72,"span",27),t._uU(73,"$2108"),t.qZA(),t.qZA(),t.TgZ(74,"li",28),t._UZ(75,"i",30),t.TgZ(76,"span",26),t._uU(77,"Affiliate Sales"),t.qZA(),t.TgZ(78,"span",27),t._uU(79,"$1204"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(80,"div",21),t.TgZ(81,"div",17),t.TgZ(82,"div",3),t.TgZ(83,"h4",22),t._uU(84,"Net Income"),t.qZA(),t._UZ(85,"div",31),t.TgZ(86,"ul",32),t.TgZ(87,"li",33),t._uU(88,"Sales for this month"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(89,"div",21),t.TgZ(90,"div",17),t.TgZ(91,"div",3),t.TgZ(92,"h4",34),t._uU(93,"Earning by Location"),t.qZA(),t.TgZ(94,"div",35),t._UZ(95,"div",36),t.qZA(),t.TgZ(96,"div",37),t.TgZ(97,"div",38),t.TgZ(98,"span",39),t._uU(99,"India"),t.qZA(),t.qZA(),t.TgZ(100,"div",40),t.TgZ(101,"div",41),t._UZ(102,"div",42),t.qZA(),t.qZA(),t.TgZ(103,"div",43),t.TgZ(104,"span",44),t._uU(105,"28%"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(106,"div",45),t.TgZ(107,"div",38),t.TgZ(108,"span",39),t._uU(109,"UK"),t.qZA(),t.qZA(),t.TgZ(110,"div",40),t.TgZ(111,"div",41),t._UZ(112,"div",46),t.qZA(),t.qZA(),t.TgZ(113,"div",43),t.TgZ(114,"span",44),t._uU(115,"21%"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(116,"div",45),t.TgZ(117,"div",38),t.TgZ(118,"span",39),t._uU(119,"USA"),t.qZA(),t.qZA(),t.TgZ(120,"div",40),t.TgZ(121,"div",41),t._UZ(122,"div",47),t.qZA(),t.qZA(),t.TgZ(123,"div",43),t.TgZ(124,"span",44),t._uU(125,"18%"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(126,"div",48),t.TgZ(127,"div",38),t.TgZ(128,"span",39),t._uU(129,"China"),t.qZA(),t.qZA(),t.TgZ(130,"div",40),t.TgZ(131,"div",41),t._UZ(132,"div",49),t.qZA(),t.qZA(),t.TgZ(133,"div",43),t.TgZ(134,"span",44),t._uU(135,"12%"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(136,"div",20),t.TgZ(137,"div",50),t.TgZ(138,"div",17),t.TgZ(139,"div",3),t.TgZ(140,"div",51),t.TgZ(141,"h4",52),t._uU(142,"Earning Statistics"),t.qZA(),t.TgZ(143,"div",53),t.TgZ(144,"div",54),t.TgZ(145,"button",55),t._UZ(146,"i",56),t.qZA(),t.TgZ(147,"div",57),t.TgZ(148,"a",58),t._uU(149,"Insert"),t.qZA(),t.TgZ(150,"a",58),t._uU(151,"Update"),t.qZA(),t.TgZ(152,"a",58),t._uU(153,"Delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(154,"div",59),t._UZ(155,"div",60),t.qZA(),t.TgZ(156,"ul",61),t.TgZ(157,"li",33),t._uU(158,"Earnings for this month"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(159,"div",62),t.TgZ(160,"div",17),t.TgZ(161,"div",3),t.TgZ(162,"h4",22),t._uU(163,"Recent Activity"),t.qZA(),t.TgZ(164,"div",63),t.TgZ(165,"div",64),t.TgZ(166,"div"),t.TgZ(167,"a",65),t._UZ(168,"i",66),t.qZA(),t.qZA(),t.TgZ(169,"div",67),t.TgZ(170,"h5",68),t._uU(171,"New Product Sold!"),t.qZA(),t.TgZ(172,"p",69),t._uU(173," John Musa just purchased "),t._UZ(174,"br"),t._uU(175," Cannon 5M Camera. "),t.qZA(),t.TgZ(176,"span",70),t._uU(177,"10 Minutes Ago"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(178,"div",64),t.TgZ(179,"div"),t.TgZ(180,"a",71),t._UZ(181,"i",72),t.qZA(),t.qZA(),t.TgZ(182,"div",67),t.TgZ(183,"h5",68),t._uU(184,"New Support Ticket"),t.qZA(),t.TgZ(185,"p",69),t._uU(186," Richardson just create support "),t._UZ(187,"br"),t._uU(188," ticket "),t.qZA(),t.TgZ(189,"span",70),t._uU(190,"25 Minutes Ago"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(191,"div",73),t.TgZ(192,"div"),t.TgZ(193,"a",74),t._UZ(194,"i",75),t.qZA(),t.qZA(),t.TgZ(195,"div",67),t.TgZ(196,"h5",68),t._uU(197," Notification Pending Order! "),t.qZA(),t.TgZ(198,"p",69),t._uU(199,"One Pending order from Ryne "),t._UZ(200,"br"),t._uU(201," Doe"),t.qZA(),t.TgZ(202,"span",76),t._uU(203," 2 Hours Ago "),t.qZA(),t.TgZ(204,"a",77),t._uU(205,"Load More"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(206,"div",20),t.TgZ(207,"div",78),t.TgZ(208,"div",17),t.TgZ(209,"div",3),t.TgZ(210,"div",79),t.TgZ(211,"h4",22),t._uU(212,"Top Leaders"),t.qZA(),t.TgZ(213,"div",53),t.TgZ(214,"div",54),t.TgZ(215,"button",55),t._UZ(216,"i",56),t.qZA(),t.TgZ(217,"div",57),t.TgZ(218,"a",58),t._uU(219,"Insert"),t.qZA(),t.TgZ(220,"a",58),t._uU(221,"Update"),t.qZA(),t.TgZ(222,"a",58),t._uU(223,"Delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(224,"div",80),t.TgZ(225,"table",81),t.TgZ(226,"thead"),t.TgZ(227,"tr",82),t.TgZ(228,"th",83),t._uU(229," Team Lead "),t.qZA(),t.TgZ(230,"th",84),t._uU(231," Project "),t.qZA(),t.TgZ(232,"th",83),t._uU(233,"Team"),t.qZA(),t.TgZ(234,"th",85),t._uU(235," Status "),t.qZA(),t.TgZ(236,"th",85),t._uU(237," Weeks "),t.qZA(),t.TgZ(238,"th",83),t._uU(239,"Budget"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(240,"tbody"),t.TgZ(241,"tr"),t.TgZ(242,"td",86),t.TgZ(243,"div",87),t.TgZ(244,"div",88),t._UZ(245,"img",89),t.qZA(),t.TgZ(246,"div",90),t.TgZ(247,"h5",91),t._uU(248," Hanna Gover "),t.qZA(),t.TgZ(249,"span",39),t._uU(250,"hgover@gmail.com"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(251,"td",92),t._uU(252,"Elite Admin"),t.qZA(),t.TgZ(253,"td",86),t.TgZ(254,"div",93),t.TgZ(255,"a",94),t._uU(256,"DS"),t.qZA(),t.TgZ(257,"a",95),t._uU(258,"SS"),t.qZA(),t.TgZ(259,"a",96),t._uU(260,"RP"),t.qZA(),t.TgZ(261,"a",97),t._uU(262,"+"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(263,"td",98),t._UZ(264,"i",99),t.qZA(),t.TgZ(265,"td",100),t._uU(266," 35 "),t.qZA(),t.TgZ(267,"td",101),t._uU(268," $96K "),t.qZA(),t.qZA(),t.TgZ(269,"tr"),t.TgZ(270,"td",102),t.TgZ(271,"div",87),t.TgZ(272,"div",88),t._UZ(273,"img",103),t.qZA(),t.TgZ(274,"div",90),t.TgZ(275,"h5",91),t._uU(276," Daniel Kristeen "),t.qZA(),t.TgZ(277,"span",39),t._uU(278,"Kristeen@gmail.com"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(279,"td",104),t._uU(280,"Real Homes WP Theme"),t.qZA(),t.TgZ(281,"td",102),t.TgZ(282,"div",93),t.TgZ(283,"a",94),t._uU(284,"DS"),t.qZA(),t.TgZ(285,"a",95),t._uU(286,"SS"),t.qZA(),t.TgZ(287,"a",97),t._uU(288,"+"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(289,"td",105),t._UZ(290,"i",106),t.qZA(),t.TgZ(291,"td",107),t._uU(292,"32"),t.qZA(),t.TgZ(293,"td",108),t._uU(294,"$85K"),t.qZA(),t.qZA(),t.TgZ(295,"tr"),t.TgZ(296,"td",102),t.TgZ(297,"div",87),t.TgZ(298,"div",88),t._UZ(299,"img",109),t.qZA(),t.TgZ(300,"div",90),t.TgZ(301,"h5",91),t._uU(302," Julian Josephs "),t.qZA(),t.TgZ(303,"span",39),t._uU(304,"Josephs@gmail.com"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(305,"td",104),t._uU(306,"MedicalPro WP Theme"),t.qZA(),t.TgZ(307,"td",102),t.TgZ(308,"div",93),t.TgZ(309,"a",94),t._uU(310,"DS"),t.qZA(),t.TgZ(311,"a",95),t._uU(312,"SS"),t.qZA(),t.TgZ(313,"a",96),t._uU(314,"RP"),t.qZA(),t.TgZ(315,"a",97),t._uU(316,"+"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(317,"td",105),t._UZ(318,"i",110),t.qZA(),t.TgZ(319,"td",107),t._uU(320,"29"),t.qZA(),t.TgZ(321,"td",108),t._uU(322,"$81K"),t.qZA(),t.qZA(),t.TgZ(323,"tr"),t.TgZ(324,"td",102),t.TgZ(325,"div",87),t.TgZ(326,"div",88),t._UZ(327,"img",111),t.qZA(),t.TgZ(328,"div",90),t.TgZ(329,"h5",91),t._uU(330," Jan Petrovic "),t.qZA(),t.TgZ(331,"span",39),t._uU(332,"hgover@gmail.com"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(333,"td",104),t._uU(334,"Hosting Press HTML"),t.qZA(),t.TgZ(335,"td",102),t.TgZ(336,"div",93),t.TgZ(337,"a",94),t._uU(338,"DS"),t.qZA(),t.TgZ(339,"a",112),t._uU(340,"+"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(341,"td",105),t._UZ(342,"i",113),t.qZA(),t.TgZ(343,"td",107),t._uU(344,"23"),t.qZA(),t.TgZ(345,"td",108),t._uU(346,"$80K"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function X8(i,a){if(1&i&&(t.TgZ(0,"div",20),t.TgZ(1,"div",131),t.TgZ(2,"div",17),t.TgZ(3,"div",3),t.TgZ(4,"h4",22),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",132),t.TgZ(8,"div",133),t._UZ(9,"apx-chart",134),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",131),t.TgZ(11,"div",17),t.TgZ(12,"div",3),t.TgZ(13,"h4",22),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"div",132),t.TgZ(17,"div",133),t._UZ(18,"apx-chart",134),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",131),t.TgZ(20,"div",17),t.TgZ(21,"div",3),t.TgZ(22,"h4",22),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",132),t.TgZ(26,"div",133),t._UZ(27,"apx-chart",134),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,15,"Attandance_Today")),t.xp6(4),t.Q6J("series",e.chartOptions1.series)("chart",e.chartOptions1.chart)("labels",e.chartOptions1.labels)("responsive",e.chartOptions1.responsive),t.xp6(5),t.Oqu(t.lcZ(15,17,"Attandance_This_Month")),t.xp6(4),t.Q6J("series",e.chartOptions2.series)("chart",e.chartOptions2.chart)("labels",e.chartOptions2.labels)("responsive",e.chartOptions2.responsive),t.xp6(5),t.Oqu(t.lcZ(24,19,"Attandance_This_Year")),t.xp6(4),t.Q6J("series",e.chartOptions3.series)("chart",e.chartOptions3.chart)("labels",e.chartOptions3.labels)("responsive",e.chartOptions3.responsive)}}function K8(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",86),t.TgZ(2,"div",87),t.TgZ(3,"div",90),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td",92),t._uU(6),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(4),t.Oqu(o.isArab?e.eventName2:e.eventName),t.xp6(2),t.Oqu(e.dateTime)}}function tE(i,a){if(1&i&&(t.TgZ(0,"div",20),t.TgZ(1,"div",78),t.TgZ(2,"div",17),t.TgZ(3,"div",3),t.TgZ(4,"div",79),t.TgZ(5,"h4",22),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"div",80),t.TgZ(9,"table",81),t.TgZ(10,"thead"),t.TgZ(11,"tr",82),t.TgZ(12,"th",83),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",84),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"tbody"),t.YNc(19,K8,7,2,"tr",135),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,4,"Upcoming_Events")),t.xp6(7),t.hij(" ",t.lcZ(14,6,"Event_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(17,8,"Event_Date")," "),t.xp6(3),t.Q6J("ngForOf",e.dashboardEvents)}}function eE(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",115),t.TgZ(2,"mat-calendar",136,137),t.NdJ("selectedChange",function(n){return t.CHM(e),t.oxw(2).selectedDate=n}),t.qZA(),t.qZA(),t.TgZ(4,"div",138),t.TgZ(5,"span",139),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"span",140),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"span",141),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("dateClass",e.dateClass())("selected",e.selectedDate)("minDate",e.minDate)("maxDate",e.maxDate),t.xp6(4),t.Oqu(t.lcZ(7,7,"Weekend")),t.xp6(3),t.Oqu(t.lcZ(10,9,"Holiday")),t.xp6(3),t.Oqu(t.lcZ(13,11,"Event"))}}function oE(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",86),t.TgZ(2,"div",87),t.TgZ(3,"div",90),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td",92),t._uU(6),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(4),t.hij(" ",o.isArab?e.studentName2:e.studentName," "),t.xp6(2),t.Oqu(o.isArab?e.grade2:e.grade)}}function iE(i,a){if(1&i&&(t.TgZ(0,"div",20),t.TgZ(1,"div",115),t.TgZ(2,"div",17),t.TgZ(3,"div",3),t.TgZ(4,"div",79),t.TgZ(5,"h4",22),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"div",80),t.TgZ(9,"table",142),t.TgZ(10,"thead"),t.TgZ(11,"tr",82),t.TgZ(12,"th",83),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",84),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"tbody"),t.YNc(19,oE,7,2,"tr",135),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,4,"Top_Students")),t.xp6(7),t.hij(" ",t.lcZ(14,6,"Student_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(17,8,"Grade")," "),t.xp6(3),t.Q6J("ngForOf",e.dashboardStudents)}}function nE(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"div",20),t.TgZ(2,"div",114),t.TgZ(3,"div",20),t.TgZ(4,"div",115),t.TgZ(5,"div",116),t.TgZ(6,"div",117),t.TgZ(7,"div",118),t.TgZ(8,"div",119),t._UZ(9,"div",120),t.TgZ(10,"div",121),t.TgZ(11,"h5",122),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"h3",123),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",117),t.TgZ(17,"div",124),t.TgZ(18,"div",119),t._UZ(19,"div",120),t.TgZ(20,"div",121),t.TgZ(21,"h5",122),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"h3",123),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",117),t.TgZ(27,"div",125),t.TgZ(28,"div",119),t._UZ(29,"div",120),t.TgZ(30,"div",121),t.TgZ(31,"h5",122),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"h3",123),t._uU(35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",117),t.TgZ(37,"div",126),t.TgZ(38,"div",119),t._UZ(39,"div",120),t.TgZ(40,"div",121),t.TgZ(41,"h5",122),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"h3",123),t._uU(45),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",117),t.TgZ(47,"div",127),t.TgZ(48,"div",119),t._UZ(49,"div",120),t.TgZ(50,"div",121),t.TgZ(51,"h5",122),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"h3",123),t._uU(55),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"div",117),t.TgZ(57,"div",128),t.TgZ(58,"div",119),t._UZ(59,"div",120),t.TgZ(60,"div",121),t.TgZ(61,"h5",122),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"h3",123),t._uU(65),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(66,X8,28,21,"div",129),t.YNc(67,tE,20,10,"div",129),t.qZA(),t.TgZ(68,"div",130),t.YNc(69,eE,14,13,"div",129),t.YNc(70,iE,20,10,"div",129),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(12),t.Oqu(t.lcZ(13,16,"Total_Students")),t.xp6(3),t.hij(" ",e.totalStudents," "),t.xp6(7),t.Oqu(t.lcZ(23,18,"Student_On_Leave")),t.xp6(3),t.hij(" ",e.studentsOnLeave," "),t.xp6(7),t.Oqu(t.lcZ(33,20,"Fee_Due_Students")),t.xp6(3),t.hij(" ",e.feeDueStudents," "),t.xp6(7),t.Oqu(t.lcZ(43,22,"Total_Teachers")),t.xp6(3),t.Oqu(e.totalTeachers),t.xp6(7),t.Oqu(t.lcZ(53,24,"New_Registrations")),t.xp6(3),t.Oqu(e.newRegistrations),t.xp6(7),t.Oqu(t.lcZ(63,26,"Fee_Due_Total")),t.xp6(3),t.hij(" ",e.feeDueTotal," "),t.xp6(1),t.Q6J("ngIf",e.isShowDonut),t.xp6(1),t.Q6J("ngIf",e.dashboardEvents.length>0),t.xp6(2),t.Q6J("ngIf",e.isShowCalandar),t.xp6(1),t.Q6J("ngIf",e.dashboardStudents.length>0)}}function aE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project")," "))}function sE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.projectCode)}}function rE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project")," "))}function lE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.projectName)}}function cE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function pE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.siteCode)}}function uE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site")," "))}function dE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.siteName)}}function _E(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Shift")," "))}function mE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.shiftCode)}}function gE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name")," "))}function hE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.employeeName)}}function ZE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ID")," "))}function fE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.employeeNumber)}}function AE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Punch In")," "))}function CE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Oqu(o.convertStringToTime(null==e||null==e.inTime?null:e.inTime.substring(0,5)))}}function TE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Punch Out")," "))}function vE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Oqu(o.convertStringToTime(null==e||null==e.outTime?null:e.outTime.substring(0,5)))}}function xE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Arrive")," "))}function qE(i,a){1&i&&t._UZ(0,"img",209)}function bE(i,a){1&i&&t._UZ(0,"img",210)}function yE(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,qE,1,0,"img",207),t.YNc(2,bE,1,0,"ng-template",null,208,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isLate)&&(null==e?null:e.isReported))("ngIfElse",o)}}function SE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Late")," "))}function wE(i,a){1&i&&t._UZ(0,"img",212)}function UE(i,a){1&i&&t._UZ(0,"img",213)}function DE(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,wE,1,0,"img",211),t.YNc(2,UE,1,0,"ng-template",null,208,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isLate)&&(null==e?null:e.isReported))("ngIfElse",o)}}function LE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Current_Geofense")," "))}function NE(i,a){1&i&&t._UZ(0,"img",212)}function EE(i,a){1&i&&t._UZ(0,"img",213)}function OE(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,NE,1,0,"img",211),t.YNc(2,EE,1,0,"ng-template",null,208,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isGeofenseOut)&&(null==e?null:e.isReported))("ngIfElse",o)}}function kE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Out_Of_Geofense")," "))}function jE(i,a){if(1&i&&(t.TgZ(0,"td"),t.TgZ(1,"span",214),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(null==e?null:e.geofenseOutCount)}}function ME(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Overtime")," "))}function RE(i,a){1&i&&t._UZ(0,"img",212)}function PE(i,a){1&i&&t._UZ(0,"img",213)}function FE(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,RE,1,0,"img",211),t.YNc(2,PE,1,0,"ng-template",null,208,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf","OT"==(null==e?null:e.attendance))("ngIfElse",o)}}function IE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Break")," "))}function YE(i,a){1&i&&t._UZ(0,"img",212)}function JE(i,a){1&i&&t._UZ(0,"img",213)}function QE(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,YE,1,0,"img",211),t.YNc(2,JE,1,0,"ng-template",null,208,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",null==e?null:e.isOnBreak)("ngIfElse",o)}}function BE(i,a){1&i&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function HE(i,a){if(1&i&&(t.TgZ(0,"td",215),t.TgZ(1,"span",216),t._UZ(2,"img",217),t.qZA(),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Message"))}}function $E(i,a){1&i&&t._UZ(0,"tr",218)}function VE(i,a){1&i&&t._UZ(0,"tr",219)}function GE(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",143),t._uU(2," \xa0 "),t.TgZ(3,"div",144),t.TgZ(4,"div",145),t.TgZ(5,"div",146),t.TgZ(6,"div",130),t.TgZ(7,"img",147),t.NdJ("dblclick",function(){return t.CHM(e),t.oxw(2).changeDashboardSubtype()}),t.qZA(),t.qZA(),t.TgZ(8,"div",148),t.TgZ(9,"div",149),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"b",150),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"div",151),t._UZ(15,"apx-chart",152),t.qZA(),t.TgZ(16,"div",153),t.TgZ(17,"div",154),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",155),t._UZ(21,"img",156),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._uU(22," \xa0 "),t._UZ(23,"div",157),t._uU(24," \xa0 "),t.TgZ(25,"div",144),t.TgZ(26,"div",145),t.TgZ(27,"div",146),t.TgZ(28,"div",130),t.TgZ(29,"img",158),t.NdJ("dblclick",function(){return t.CHM(e),t.oxw(2).chageDate()}),t.qZA(),t.qZA(),t.TgZ(30,"div",148),t.TgZ(31,"div",149),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"b",150),t._uU(35),t.qZA(),t.qZA(),t.TgZ(36,"div",151),t._UZ(37,"apx-chart",152),t.qZA(),t.TgZ(38,"div",153),t.TgZ(39,"div",154),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",155),t._UZ(43,"img",156),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._uU(44," \xa0 "),t._UZ(45,"div",157),t._uU(46," \xa0 "),t.TgZ(47,"div",159),t.TgZ(48,"div",145),t.TgZ(49,"div",146),t.TgZ(50,"div",130),t._UZ(51,"img",160),t.qZA(),t.TgZ(52,"div",148),t.TgZ(53,"div",149),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"b",150),t._uU(57),t.qZA(),t.qZA(),t.TgZ(58,"div",151),t._UZ(59,"apx-chart",152),t.qZA(),t.TgZ(60,"div",153),t.TgZ(61,"div",154),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"div",155),t._UZ(65,"img",156),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._uU(66," \xa0 "),t._UZ(67,"div",157),t._uU(68," \xa0 "),t.TgZ(69,"div",159),t.TgZ(70,"div",145),t.TgZ(71,"div",146),t.TgZ(72,"div",130),t._UZ(73,"img",161),t.qZA(),t.TgZ(74,"div",148),t.TgZ(75,"div",149),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"b",150),t._uU(79),t.qZA(),t.qZA(),t.TgZ(80,"div",151),t._UZ(81,"apx-chart",152),t.qZA(),t.TgZ(82,"div",153),t.TgZ(83,"div",154),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"div",155),t._UZ(87,"img",156),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"div",162),t.TgZ(89,"div",163),t.TgZ(90,"div",3),t.TgZ(91,"h4",22),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.TgZ(94,"div",132),t.TgZ(95,"div",133),t._UZ(96,"apx-chart",134),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(97,"div",164),t.TgZ(98,"div",165),t.TgZ(99,"div",166),t.TgZ(100,"div",167),t._uU(101," \xa0 "),t._UZ(102,"i",168),t._uU(103," \xa0 "),t.TgZ(104,"ng-select",169),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).input.branchCode=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA(),t._uU(105," \xa0 "),t._UZ(106,"i",170),t._uU(107," \xa0 "),t.TgZ(108,"ng-select",171),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).input.projectCode=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA(),t._uU(109," \xa0 "),t._UZ(110,"i",172),t._uU(111," \xa0 "),t.TgZ(112,"ng-select",173),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).input.siteCode=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA(),t._uU(113," \xa0 \xa0 "),t._UZ(114,"i",174),t._uU(115," \xa0 "),t.TgZ(116,"ng-select",175),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).input.employeeNumber=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA(),t._uU(117," \xa0 "),t.TgZ(118,"select"),t.TgZ(119,"option",176),t._uU(120,"Daily Records"),t.qZA(),t.TgZ(121,"option",177),t._uU(122,"Jeddah"),t.qZA(),t.TgZ(123,"option",178),t._uU(124,"Riyadh"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(125,"div",164),t.TgZ(126,"div",167),t._uU(127," \xa0 "),t._UZ(128,"i",179),t.TgZ(129,"ng-select",180),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).selectedfilterOptions=n})("change",function(){return t.CHM(e),t.oxw(2).onChangeFilterItem()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(130,"div",181),t.TgZ(131,"table",182),t.NdJ("matSortChange",function(n){return t.CHM(e),t.oxw(2).onSortOrder(n)}),t.ynx(132,183),t.YNc(133,aE,3,3,"th",184),t.YNc(134,sE,2,1,"td",185),t.BQk(),t.ynx(135,186),t.YNc(136,rE,3,3,"th",184),t.YNc(137,lE,2,1,"td",185),t.BQk(),t.ynx(138,187),t.YNc(139,cE,3,3,"th",184),t.YNc(140,pE,2,1,"td",185),t.BQk(),t.ynx(141,188),t.YNc(142,uE,3,3,"th",184),t.YNc(143,dE,2,1,"td",185),t.BQk(),t.ynx(144,189),t.YNc(145,_E,3,3,"th",184),t.YNc(146,mE,2,1,"td",185),t.BQk(),t.ynx(147,190),t.YNc(148,gE,3,3,"th",184),t.YNc(149,hE,2,1,"td",185),t.BQk(),t.ynx(150,191),t.YNc(151,ZE,3,3,"th",184),t.YNc(152,fE,2,1,"td",185),t.BQk(),t.ynx(153,192),t.YNc(154,AE,3,3,"th",184),t.YNc(155,CE,2,1,"td",185),t.BQk(),t.ynx(156,193),t.YNc(157,TE,3,3,"th",184),t.YNc(158,vE,2,1,"td",185),t.BQk(),t.ynx(159,194),t.YNc(160,xE,3,3,"th",184),t.YNc(161,yE,4,2,"td",185),t.BQk(),t.ynx(162,195),t.YNc(163,SE,3,3,"th",184),t.YNc(164,DE,4,2,"td",185),t.BQk(),t.ynx(165,196),t.YNc(166,LE,3,3,"th",184),t.YNc(167,OE,4,2,"td",185),t.BQk(),t.ynx(168,197),t.YNc(169,kE,3,3,"th",184),t.YNc(170,jE,3,1,"td",185),t.BQk(),t.ynx(171,198),t.YNc(172,ME,3,3,"th",184),t.YNc(173,FE,4,2,"td",185),t.BQk(),t.ynx(174,199),t.YNc(175,IE,3,3,"th",184),t.YNc(176,QE,4,2,"td",185),t.BQk(),t.ynx(177,200),t.YNc(178,BE,3,3,"th",201),t.YNc(179,HE,3,1,"td",202),t.BQk(),t.YNc(180,$E,1,0,"tr",203),t.YNc(181,VE,1,0,"tr",204),t.qZA(),t.TgZ(182,"mat-paginator",205),t.NdJ("page",function(n){return t.CHM(e),t.oxw(2).onPageSwitch(n)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(10),t.Oqu(t.lcZ(11,51,"Security_Guards")),t.xp6(3),t.Oqu(null==e.oprDashboard?null:e.oprDashboard.totalEmpCount),t.xp6(2),t.Q6J("series",e.radialChartOptions1.series)("chart",e.radialChartOptions1.chart)("plotOptions",e.radialChartOptions1.plotOptions)("labels",e.radialChartOptions1.labels),t.xp6(3),t.Oqu(t.lcZ(19,53,"See_All")),t.xp6(14),t.Oqu(t.lcZ(33,55,"Arrived_On_Duty")),t.xp6(3),t.Oqu((null==e.oprDashboard?null:e.oprDashboard.reportedEmpCount)-(null==e.oprDashboard?null:e.oprDashboard.lateArrivalsCount)),t.xp6(2),t.Q6J("series",e.radialChartOptions2.series)("chart",e.radialChartOptions2.chart)("plotOptions",e.radialChartOptions2.plotOptions)("labels",e.radialChartOptions2.labels),t.xp6(3),t.Oqu(t.lcZ(41,57,"See_All")),t.xp6(14),t.Oqu(t.lcZ(55,59,"Late_To_Duty")),t.xp6(3),t.Oqu(null==e.oprDashboard?null:e.oprDashboard.lateArrivalsCount),t.xp6(2),t.Q6J("series",e.radialChartOptions3.series)("chart",e.radialChartOptions3.chart)("plotOptions",e.radialChartOptions3.plotOptions)("labels",e.radialChartOptions3.labels),t.xp6(3),t.Oqu(t.lcZ(63,61,"See_All")),t.xp6(14),t.Oqu(t.lcZ(77,63,"Not_In_Duty")),t.xp6(3),t.Oqu(null==e.oprDashboard?null:e.oprDashboard.notReportedEmpCount),t.xp6(2),t.Q6J("series",e.radialChartOptions4.series)("chart",e.radialChartOptions4.chart)("plotOptions",e.radialChartOptions4.plotOptions)("labels",e.radialChartOptions4.labels),t.xp6(3),t.Oqu(t.lcZ(85,65,"See_All")),t.xp6(8),t.Oqu(t.lcZ(93,67,"Attandance_Today")),t.xp6(4),t.Q6J("series",e.chartOptions1.series)("chart",e.chartOptions1.chart)("labels",e.chartOptions1.labels)("responsive",e.chartOptions1.responsive),t.xp6(8),t.Q6J("items",e.citySelectionList)("ngModel",e.input.branchCode),t.xp6(4),t.Q6J("items",e.projectsSelectionList)("ngModel",e.input.projectCode),t.xp6(4),t.Q6J("items",e.sitesSelectionList)("ngModel",e.input.siteCode),t.xp6(4),t.Q6J("items",e.employeesSelectionList)("ngModel",e.input.employeeNumber),t.xp6(13),t.Q6J("items",null==e.input?null:e.input.filterOptions)("multiple",!0)("ngModel",e.selectedfilterOptions),t.xp6(2),t.Q6J("dataSource",e.attendanceData),t.xp6(49),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("length",e.totalItemsCount)("pageSize",e.pageSize)("pageSizeOptions",e.pageService.selectItemsPerPage)}}function WE(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",164),t.TgZ(1,"div",167),t._uU(2," \xa0 "),t._UZ(3,"i",179),t.TgZ(4,"ng-select",180),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(3).selectedfilterOptions=n})("change",function(){return t.CHM(e),t.oxw(3).onChangeFilterItem()}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(4),t.Q6J("items",null==e.input?null:e.input.filterOptions)("multiple",!0)("ngModel",e.selectedfilterOptions)}}function zE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project")," "))}function XE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.projectName)}}function KE(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site")," "))}function t9(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.siteName)}}function e9(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Shift")," "))}function o9(i,a){if(1&i&&(t.TgZ(0,"td",229),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.AsE(" ",o.convertStringToTime(null==e?null:e.shiftInTime)," to ",o.convertStringToTime(null==e?null:e.shiftOutTime)," ")}}function i9(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Total_Contracted")," "))}function n9(i,a){if(1&i&&(t.TgZ(0,"td"),t.TgZ(1,"span",230),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(null==e?null:e.totalContracted)}}function a9(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Staff_Present")," "))}function s9(i,a){if(1&i&&(t.TgZ(0,"td"),t.TgZ(1,"span",231),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",null==e?null:e.staffPresent," ")}}function r9(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Late_Staff")," "))}function l9(i,a){if(1&i&&(t.TgZ(0,"td"),t.TgZ(1,"span",232),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",null==e?null:e.lateStaff," ")}}function c9(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Shortage")," "))}function p9(i,a){if(1&i&&(t.TgZ(0,"td"),t.TgZ(1,"span",233),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",null==e?null:e.shortage," ")}}function u9(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Support_Gaurds")," "))}function d9(i,a){if(1&i&&(t.TgZ(0,"td"),t.TgZ(1,"span",234),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",null==e?null:e.supportGaurds," ")}}function _9(i,a){1&i&&(t.TgZ(0,"th",206),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Status")," "))}function m9(i,a){1&i&&t._UZ(0,"img",212)}function g9(i,a){1&i&&t._UZ(0,"img",213)}function h9(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,m9,1,0,"img",211),t.YNc(2,g9,1,0,"ng-template",null,208,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",null==e?null:e.projectStatus)("ngIfElse",o)}}function Z9(i,a){1&i&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function f9(i,a){1&i&&(t.TgZ(0,"td",215),t._UZ(1,"i",235),t.qZA())}function A9(i,a){1&i&&t._UZ(0,"tr",218)}function C9(i,a){1&i&&t._UZ(0,"tr",219)}function T9(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",143),t._uU(2," \xa0 "),t.TgZ(3,"div",144),t.TgZ(4,"div",145),t.TgZ(5,"div",146),t.TgZ(6,"div",130),t.TgZ(7,"img",147),t.NdJ("dblclick",function(){return t.CHM(e),t.oxw(2).changeDashboardSubtype()}),t.qZA(),t.qZA(),t.TgZ(8,"div",148),t.TgZ(9,"div",149),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"b",150),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"div",151),t._UZ(15,"apx-chart",152),t.qZA(),t.TgZ(16,"div",153),t.TgZ(17,"div",154),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",155),t._UZ(21,"img",156),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._uU(22," \xa0 "),t._UZ(23,"div",157),t._uU(24," \xa0 "),t.TgZ(25,"div",144),t.TgZ(26,"div",145),t.TgZ(27,"div",146),t.TgZ(28,"div",130),t.TgZ(29,"img",158),t.NdJ("dblclick",function(){return t.CHM(e),t.oxw(2).chageDate()}),t.qZA(),t.qZA(),t.TgZ(30,"div",148),t.TgZ(31,"div",149),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"b",150),t._uU(35),t.qZA(),t.qZA(),t.TgZ(36,"div",151),t._UZ(37,"apx-chart",152),t.qZA(),t.TgZ(38,"div",153),t.TgZ(39,"div",154),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",155),t._UZ(43,"img",156),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._uU(44," \xa0 "),t._UZ(45,"div",157),t._uU(46," \xa0 "),t.TgZ(47,"div",159),t.TgZ(48,"div",145),t.TgZ(49,"div",146),t.TgZ(50,"div",130),t._UZ(51,"img",160),t.qZA(),t.TgZ(52,"div",148),t.TgZ(53,"div",149),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"b",150),t._uU(57),t.qZA(),t.qZA(),t.TgZ(58,"div",151),t._UZ(59,"apx-chart",152),t.qZA(),t.TgZ(60,"div",153),t.TgZ(61,"div",154),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"div",155),t._UZ(65,"img",156),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._uU(66," \xa0 "),t._UZ(67,"div",157),t._uU(68," \xa0 "),t.TgZ(69,"div",159),t.TgZ(70,"div",145),t.TgZ(71,"div",146),t.TgZ(72,"div",130),t._UZ(73,"img",161),t.qZA(),t.TgZ(74,"div",148),t.TgZ(75,"div",149),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"b",150),t._uU(79),t.qZA(),t.qZA(),t.TgZ(80,"div",151),t._UZ(81,"apx-chart",152),t.qZA(),t.TgZ(82,"div",153),t.TgZ(83,"div",154),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"div",155),t._UZ(87,"img",156),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"div",164),t.TgZ(89,"div",165),t.TgZ(90,"div",166),t.TgZ(91,"div",167),t._UZ(92,"i",168),t._uU(93," \xa0 "),t.TgZ(94,"ng-select",169),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).input.branchCode=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA(),t._uU(95," \xa0 "),t._UZ(96,"i",170),t._uU(97," \xa0 "),t.TgZ(98,"ng-select",171),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).input.projectCode=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA(),t._uU(99," \xa0 "),t._UZ(100,"i",172),t._uU(101," \xa0 "),t.TgZ(102,"ng-select",173),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).input.siteCode=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA(),t._uU(103," \xa0 \xa0 "),t.TgZ(104,"select"),t.TgZ(105,"option",176),t._uU(106,"Daily Records"),t.qZA(),t.TgZ(107,"option",177),t._uU(108,"Jeddah"),t.qZA(),t.TgZ(109,"option",178),t._uU(110,"Riyadh"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(111,WE,5,3,"div",220),t.TgZ(112,"div",181),t.TgZ(113,"table",221),t.NdJ("matSortChange",function(n){return t.CHM(e),t.oxw(2).onSortOrder(n)}),t.ynx(114,186),t.YNc(115,zE,3,3,"th",184),t.YNc(116,XE,2,1,"td",185),t.BQk(),t.ynx(117,188),t.YNc(118,KE,3,3,"th",184),t.YNc(119,t9,2,1,"td",185),t.BQk(),t.ynx(120,189),t.YNc(121,e9,3,3,"th",184),t.YNc(122,o9,2,2,"td",222),t.BQk(),t.ynx(123,223),t.YNc(124,i9,3,3,"th",184),t.YNc(125,n9,3,1,"td",185),t.BQk(),t.ynx(126,224),t.YNc(127,a9,3,3,"th",184),t.YNc(128,s9,3,1,"td",185),t.BQk(),t.ynx(129,225),t.YNc(130,r9,3,3,"th",184),t.YNc(131,l9,3,1,"td",185),t.BQk(),t.ynx(132,226),t.YNc(133,c9,3,3,"th",184),t.YNc(134,p9,3,1,"td",185),t.BQk(),t.ynx(135,227),t.YNc(136,u9,3,3,"th",184),t.YNc(137,d9,3,1,"td",185),t.BQk(),t.ynx(138,228),t.YNc(139,_9,3,3,"th",184),t.YNc(140,h9,4,2,"td",185),t.BQk(),t.ynx(141,200),t.YNc(142,Z9,3,3,"th",201),t.YNc(143,f9,2,0,"td",202),t.BQk(),t.YNc(144,A9,1,0,"tr",203),t.YNc(145,C9,1,0,"tr",204),t.qZA(),t.TgZ(146,"mat-paginator",205),t.NdJ("page",function(n){return t.CHM(e),t.oxw(2).onPageSwitch(n)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(10),t.Oqu(t.lcZ(11,42,"Total_Contracted")),t.xp6(3),t.Oqu(null==e.oprDashboard?null:e.oprDashboard.totalContracted),t.xp6(2),t.Q6J("series",e.radialChartOptions1.series)("chart",e.radialChartOptions1.chart)("plotOptions",e.radialChartOptions1.plotOptions)("labels",e.radialChartOptions1.labels),t.xp6(3),t.Oqu(t.lcZ(19,44,"See_All")),t.xp6(14),t.Oqu(t.lcZ(33,46,"Staff_Present")),t.xp6(3),t.hij(" ",null==e.oprDashboard?null:e.oprDashboard.staffPresent,""),t.xp6(2),t.Q6J("series",e.radialChartOptions2.series)("chart",e.radialChartOptions2.chart)("plotOptions",e.radialChartOptions2.plotOptions)("labels",e.radialChartOptions2.labels),t.xp6(3),t.Oqu(t.lcZ(41,48,"See_All")),t.xp6(14),t.Oqu(t.lcZ(55,50,"Late_Staff")),t.xp6(3),t.Oqu(null==e.oprDashboard?null:e.oprDashboard.lateStaff),t.xp6(2),t.Q6J("series",e.radialChartOptions3.series)("chart",e.radialChartOptions3.chart)("plotOptions",e.radialChartOptions3.plotOptions)("labels",e.radialChartOptions3.labels),t.xp6(3),t.Oqu(t.lcZ(63,52,"See_All")),t.xp6(14),t.Oqu(t.lcZ(77,54,"Shortage")),t.xp6(3),t.hij(" ",null==e.oprDashboard?null:e.oprDashboard.shortage,""),t.xp6(2),t.Q6J("series",e.radialChartOptions4.series)("chart",e.radialChartOptions4.chart)("plotOptions",e.radialChartOptions4.plotOptions)("labels",e.radialChartOptions4.labels),t.xp6(3),t.Oqu(t.lcZ(85,56,"See_All")),t.xp6(10),t.Q6J("items",e.citySelectionList)("ngModel",e.input.branchCode),t.xp6(4),t.Q6J("items",e.projectsSelectionList)("ngModel",e.input.projectCode),t.xp6(4),t.Q6J("items",e.sitesSelectionList)("ngModel",e.input.siteCode),t.xp6(9),t.Q6J("ngIf",(null==e.input||null==e.input.filterOptions?null:e.input.filterOptions.length)>0),t.xp6(2),t.Q6J("dataSource",e.attendanceData),t.xp6(31),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("length",e.totalItemsCount)("pageSize",e.pageSize)("pageSizeOptions",e.pageService.selectItemsPerPage)}}function v9(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,GE,183,69,"div",0),t.YNc(2,T9,147,58,"div",129),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf","operations"==e.input.dashBoardSubType),t.xp6(1),t.Q6J("ngIf","management"==e.input.dashBoardSubType)}}function x9(i,a){if(1&i&&(t.TgZ(0,"div",131),t.TgZ(1,"div",260),t.TgZ(2,"div",261),t._UZ(3,"img",262),t.TgZ(4,"div",263),t.TgZ(5,"div",149),t._uU(6),t.qZA(),t.TgZ(7,"b",150),t._uU(8),t.qZA(),t.qZA(),t._UZ(9,"img",264),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[0].department),t.xp6(2),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[0].totalTickets)}}function q9(i,a){if(1&i&&(t.TgZ(0,"div",131),t.TgZ(1,"div",260),t.TgZ(2,"div",261),t._UZ(3,"img",265),t.TgZ(4,"div",263),t.TgZ(5,"div",149),t._uU(6),t.qZA(),t.TgZ(7,"b",150),t._uU(8),t.qZA(),t.qZA(),t._UZ(9,"img",266),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[1].department),t.xp6(2),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[1].totalTickets)}}function b9(i,a){if(1&i&&(t.TgZ(0,"div",131),t.TgZ(1,"div",260),t.TgZ(2,"div",261),t._UZ(3,"img",267),t.TgZ(4,"div",263),t.TgZ(5,"div",149),t._uU(6),t.qZA(),t.TgZ(7,"b",150),t._uU(8),t.qZA(),t.qZA(),t._UZ(9,"img",268),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[2].department),t.xp6(2),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[2].totalTickets)}}function y9(i,a){if(1&i&&(t.TgZ(0,"div",131),t.TgZ(1,"div",260),t.TgZ(2,"div",261),t._UZ(3,"img",279),t.TgZ(4,"div",263),t.TgZ(5,"div",149),t._uU(6),t.qZA(),t.TgZ(7,"b",150),t._uU(8),t.qZA(),t.qZA(),t._UZ(9,"img",280),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[3].department),t.xp6(2),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[3].totalTickets)}}function S9(i,a){if(1&i&&(t.TgZ(0,"div",131),t.TgZ(1,"div",260),t.TgZ(2,"div",261),t._UZ(3,"img",281),t.TgZ(4,"div",263),t.TgZ(5,"div",149),t._uU(6),t.qZA(),t.TgZ(7,"b",150),t._uU(8),t.qZA(),t.qZA(),t._UZ(9,"img",282),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[4].department),t.xp6(2),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[4].totalTickets)}}function w9(i,a){if(1&i&&(t.TgZ(0,"div",131),t.TgZ(1,"div",260),t.TgZ(2,"div",261),t._UZ(3,"img",283),t.TgZ(4,"div",263),t.TgZ(5,"div",149),t._uU(6),t.qZA(),t.TgZ(7,"b",150),t._uU(8),t.qZA(),t.qZA(),t._UZ(9,"img",280),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[5].department),t.xp6(2),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.depWiseData[5].totalTickets)}}function U9(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"th",276),t._uU(2),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.departmentNameEng," ")}}function D9(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.count," ")}}function L9(i,a){if(1&i&&(t.TgZ(0,"tr"),t.ynx(1),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.BQk(),t.YNc(4,D9,3,1,"ng-container",135),t.qZA()),2&i){const e=a.$implicit;t.xp6(3),t.Oqu(e.statusStr),t.xp6(1),t.Q6J("ngForOf",e.depsDataList)}}function N9(i,a){if(1&i&&(t.TgZ(0,"tr"),t.ynx(1),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.BQk(),t.qZA()),2&i){const e=a.$implicit;t.xp6(3),t.Oqu(e.projectNameEng),t.xp6(2),t.Oqu(t.xi3(6,5,e.date,"dd/MM/YYYY")),t.xp6(3),t.Oqu(e.ticketNumber),t.xp6(2),t.Oqu(e.maintananceType),t.xp6(2),t.Oqu(e.statusStr)}}function E9(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"json"),t.TgZ(3,"div",236),t.TgZ(4,"div",237),t.TgZ(5,"div",238),t.TgZ(6,"div",239),t.TgZ(7,"div",240),t._uU(8,"Corrective maintenance"),t.qZA(),t._UZ(9,"img",241),t.qZA(),t.TgZ(10,"div",3),t.TgZ(11,"div",242),t.TgZ(12,"div",243),t.TgZ(13,"div",3),t.TgZ(14,"div",244),t.TgZ(15,"div",245),t._UZ(16,"img",246),t.TgZ(17,"div",247),t.TgZ(18,"div",248),t._uU(19,"Total tickets"),t.qZA(),t.TgZ(20,"b",249),t._uU(21),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",9),t.TgZ(23,"span",10),t._UZ(24,"i",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",243),t.TgZ(26,"div",3),t.TgZ(27,"div",244),t.TgZ(28,"div",245),t._UZ(29,"img",250),t.TgZ(30,"div",247),t.TgZ(31,"div",248),t._uU(32,"Closed tickets"),t.qZA(),t.TgZ(33,"b",249),t._uU(34),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",9),t.TgZ(36,"span",10),t._UZ(37,"i",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",243),t.TgZ(39,"div",3),t.TgZ(40,"div",244),t.TgZ(41,"div",245),t._UZ(42,"img",251),t.TgZ(43,"div",247),t.TgZ(44,"div",248),t._uU(45,"Pending tickets"),t.qZA(),t.TgZ(46,"b",249),t._uU(47),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",9),t.TgZ(49,"span",10),t._UZ(50,"i",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",252),t._uU(52,"Discipline Wise"),t.qZA(),t.TgZ(53,"div",253),t.YNc(54,x9,10,2,"div",254),t.YNc(55,q9,10,2,"div",254),t.YNc(56,b9,10,2,"div",254),t.qZA(),t._UZ(57,"br"),t._UZ(58,"br"),t.TgZ(59,"div",242),t.YNc(60,y9,10,2,"div",254),t.YNc(61,S9,10,2,"div",254),t.YNc(62,w9,10,2,"div",254),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"div",255),t.TgZ(64,"div",256),t.TgZ(65,"div",3),t.TgZ(66,"div",4),t.TgZ(67,"div",257),t.TgZ(68,"b",150),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"div",133),t._UZ(72,"apx-chart",258),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",256),t.TgZ(74,"div",3),t.TgZ(75,"div",4),t.TgZ(76,"div",257),t.TgZ(77,"b",150),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"div",133),t._UZ(81,"apx-chart",258),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(82,"div",236),t.TgZ(83,"div",237),t.TgZ(84,"div",259),t.TgZ(85,"div",3),t.TgZ(86,"div",252),t._uU(87,"Monthly Activities"),t.qZA(),t.TgZ(88,"div",1),t.TgZ(89,"div",131),t.TgZ(90,"div",260),t.TgZ(91,"div",261),t._UZ(92,"img",262),t.TgZ(93,"div",263),t.TgZ(94,"div",149),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"b",150),t._uU(98),t.qZA(),t.qZA(),t._UZ(99,"img",264),t.qZA(),t.qZA(),t.qZA(),t.TgZ(100,"div",131),t.TgZ(101,"div",260),t.TgZ(102,"div",261),t._UZ(103,"img",265),t.TgZ(104,"div",263),t.TgZ(105,"div",149),t._uU(106),t.ALo(107,"translate"),t.qZA(),t.TgZ(108,"b",150),t._uU(109),t.qZA(),t.qZA(),t._UZ(110,"img",266),t.qZA(),t.qZA(),t.qZA(),t.TgZ(111,"div",131),t.TgZ(112,"div",260),t.TgZ(113,"div",261),t._UZ(114,"img",267),t.TgZ(115,"div",263),t.TgZ(116,"div",149),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.TgZ(119,"b",150),t._uU(120),t.qZA(),t.qZA(),t._UZ(121,"img",268),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(122,"div",255),t.TgZ(123,"b",150),t._uU(124),t.ALo(125,"translate"),t.qZA(),t.TgZ(126,"div",269),t.TgZ(127,"div",3),t.TgZ(128,"div",4),t.TgZ(129,"div",257),t.TgZ(130,"div",133),t._UZ(131,"apx-chart",270),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(132,"div",271),t.TgZ(133,"div",20),t.TgZ(134,"div",272),t.TgZ(135,"div",273),t.TgZ(136,"div",3),t.TgZ(137,"div",274),t._uU(138,"Work status"),t.qZA(),t.ynx(139),t.TgZ(140,"table",275),t.TgZ(141,"thead"),t.TgZ(142,"tr"),t.ynx(143),t.TgZ(144,"th",276),t.TgZ(145,"label",277),t._uU(146),t.ALo(147,"translate"),t.qZA(),t.qZA(),t.BQk(),t.YNc(148,U9,3,1,"ng-container",135),t.qZA(),t.qZA(),t.TgZ(149,"tbody"),t.YNc(150,L9,5,2,"tr",135),t.qZA(),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(151,"div",271),t.TgZ(152,"div",20),t.TgZ(153,"div",272),t.TgZ(154,"div",273),t.TgZ(155,"div",3),t.TgZ(156,"div",278),t._uU(157,"Recent Requests"),t.qZA(),t.ynx(158),t.TgZ(159,"table",275),t.TgZ(160,"thead"),t.TgZ(161,"tr"),t.ynx(162),t.TgZ(163,"th",276),t._uU(164),t.ALo(165,"translate"),t.qZA(),t.TgZ(166,"th",276),t._uU(167),t.ALo(168,"translate"),t.qZA(),t.TgZ(169,"th",276),t._uU(170),t.ALo(171,"translate"),t.qZA(),t.TgZ(172,"th",276),t._uU(173),t.ALo(174,"translate"),t.qZA(),t.TgZ(175,"th",276),t._uU(176),t.ALo(177,"translate"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.TgZ(178,"tbody"),t.YNc(179,N9,13,8,"tr",135),t.qZA(),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,48,e.profmDashboard)," "),t.xp6(20),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.totalTickets),t.xp6(13),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.closedTickets),t.xp6(13),t.Oqu(null==e.profmDashboard?null:e.profmDashboard.pendingTickets),t.xp6(7),t.Q6J("ngIf",(null==e.profmDashboard||null==e.profmDashboard.depWiseData?null:e.profmDashboard.depWiseData.length)>0),t.xp6(1),t.Q6J("ngIf",(null==e.profmDashboard||null==e.profmDashboard.depWiseData?null:e.profmDashboard.depWiseData.length)>1),t.xp6(1),t.Q6J("ngIf",(null==e.profmDashboard||null==e.profmDashboard.depWiseData?null:e.profmDashboard.depWiseData.length)>2),t.xp6(4),t.Q6J("ngIf",(null==e.profmDashboard||null==e.profmDashboard.depWiseData?null:e.profmDashboard.depWiseData.length)>3),t.xp6(1),t.Q6J("ngIf",(null==e.profmDashboard||null==e.profmDashboard.depWiseData?null:e.profmDashboard.depWiseData.length)>4),t.xp6(1),t.Q6J("ngIf",(null==e.profmDashboard||null==e.profmDashboard.depWiseData?null:e.profmDashboard.depWiseData.length)>5),t.xp6(7),t.hij("",t.lcZ(70,50,"Overall_Performance")," "),t.xp6(3),t.Q6J("series",e.semiRadialChartOptions1.series)("chart",e.semiRadialChartOptions1.chart)("plotOptions",e.semiRadialChartOptions1.plotOptions)("labels",e.semiRadialChartOptions1.labels)("fill",e.semiRadialChartOptions1.fill),t.xp6(6),t.hij("",t.lcZ(79,52,"Monthly_Performance")," "),t.xp6(3),t.Q6J("series",e.semiRadialChartOptions2.series)("chart",e.semiRadialChartOptions2.chart)("plotOptions",e.semiRadialChartOptions2.plotOptions)("labels",e.semiRadialChartOptions2.labels)("fill",e.semiRadialChartOptions2.fill),t.xp6(14),t.Oqu(t.lcZ(96,54,"Total_Tickets")),t.xp6(3),t.Oqu(null==e.profmDashboard||null==e.profmDashboard.last30DaysData?null:e.profmDashboard.last30DaysData.totalTickets),t.xp6(8),t.Oqu(t.lcZ(107,56,"Closed_Tickets")),t.xp6(3),t.Oqu(null==e.profmDashboard||null==e.profmDashboard.last30DaysData?null:e.profmDashboard.last30DaysData.closedTickets),t.xp6(8),t.Oqu(t.lcZ(118,58,"Pending_Tickets")),t.xp6(3),t.Oqu(null==e.profmDashboard||null==e.profmDashboard.last30DaysData?null:e.profmDashboard.last30DaysData.pendingTickets),t.xp6(4),t.hij("",t.lcZ(125,60,"Monthly_Status")," "),t.xp6(7),t.Q6J("series",e.monthlyChartOptions.series)("chart",e.monthlyChartOptions.chart)("dataLabels",e.monthlyChartOptions.dataLabels)("plotOptions",e.monthlyChartOptions.plotOptions)("yaxis",e.monthlyChartOptions.yaxis)("legend",e.monthlyChartOptions.legend)("fill",e.monthlyChartOptions.fill)("stroke",e.monthlyChartOptions.stroke)("tooltip",e.monthlyChartOptions.tooltip)("xaxis",e.monthlyChartOptions.xaxis),t.xp6(15),t.hij(" ",t.lcZ(147,62,"Status"),""),t.xp6(2),t.Q6J("ngForOf",e.profmDashboard.depAndStatusWiseData[0].depsDataList),t.xp6(2),t.Q6J("ngForOf",e.profmDashboard.depAndStatusWiseData),t.xp6(14),t.hij(" ",t.lcZ(165,64,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(168,66,"Date_Of_Request")," "),t.xp6(3),t.hij(" ",t.lcZ(171,68,"Order_Of_Request")," "),t.xp6(3),t.hij(" ",t.lcZ(174,70,"Maintainence_Type")," "),t.xp6(3),t.hij(" ",t.lcZ(177,72,"Status")," "),t.xp6(3),t.Q6J("ngForOf",e.profmDashboard.recentTickets)}}let vo=(()=>{class i{constructor(e,o,n,s,r,c,p,u){this.authService=e,this.http=o,this.apiService=n,this.utilService=s,this.oprService=r,this.notifyService=c,this.pageService=p,this.translate=u,this.isArab=!1,this.dashBoardType="",this.displayedColumns=[],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.id=0,this.branchCodeList=[],this.isShowDiv=!1,this.examHeaderID=0,this.branchCode="",this.datesWeekends=[],this.datesHolidays=[],this.datesEvents=[],this.allDatesData=[],this.dashboardEvents=[],this.totalStudents=0,this.studentsOnLeave=0,this.feeDueStudents=0,this.totalTeachers=0,this.newRegistrations=0,this.feeDueTotal=0,this.todayAttData=[],this.monthAttData=[],this.yearAttData=[],this.dashboardStudents=[],this.isShowDonut=!1,this.isShowCalandar=!1,this.isLoadSchoolDashBoard=!1,this.oprDashboard={notReportedEmpCount:1,totalEmpCount:1,reportedEmpCount:1,lateArrivalsCount:0},this.oprChartData1=[],this.oprChartData2=[],this.oprChartData3=[],this.oprChartData4=[],this.oprChartData5=[],this.pageNumber=0,this.pageSize=10,this.selectedfilterOptions=[],this.input={date:null,pageNumber:0,pageSize:10,branchCode:null,siteCode:null,projectCode:null,employeeNumber:null,filterOptions:null,dashBoardSubType:"operations"},this.citySelectionList=[],this.projectsSelectionList=[],this.sitesSelectionList=[],this.employeesSelectionList=[],this.semiRadialChartOptions1={series:[76],chart:{type:"radialBar",offsetY:-20,height:300},plotOptions:{radialBar:{startAngle:-90,endAngle:90,track:{background:"#e7e7e7",strokeWidth:"97%",margin:5,dropShadow:{enabled:!0,top:2,left:0,opacity:.31,blur:2}},dataLabels:{name:{show:!1},value:{offsetY:-2,fontSize:"22px"}}}},fill:{type:"gradient",gradient:{shade:"light",shadeIntensity:.4,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,53,91]}},labels:["Average Results"]},this.semiRadialChartOptions2={series:[76],chart:{type:"radialBar",offsetY:-20,height:300},plotOptions:{radialBar:{startAngle:-90,endAngle:90,track:{background:"#e7e7e7",strokeWidth:"97%",margin:5,dropShadow:{enabled:!0,top:2,left:0,opacity:.31,blur:2}},dataLabels:{name:{show:!1},value:{offsetY:-2,fontSize:"22px"}}}},fill:{type:"gradient",gradient:{shade:"light",shadeIntensity:.4,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,53,91]}},labels:["Average Results"]},this.monthlyChartOptions={series:[{name:"Net Profit",data:[44,55,57,56,61,58]}],chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:["Feb","Mar","Apr","May","Jun","Jul"]},yaxis:{title:{text:"tickets"}},fill:{opacity:1},tooltip:{y:{formatter:function(d){return d+" tickets"}}}}}ngOnInit(){let e=0;this.isArab=this.utilService.isArabic(),""==this.dashBoardType&&(this.dashBoardType=$8.r),"school"==this.dashBoardType?this.apiService.getSchoolUrl("Branch/GetBranchDashBoard").subscribe(o=>{if(o){this.dashboardEvents=o.dashboardEvents,this.dashboardStudents=o.dashboardStudents,this.totalStudents=o.totalStudents,this.studentsOnLeave=o.studentsOnLeave,this.feeDueStudents=o.feeDueStudents,this.totalTeachers=o.totalTeachers,this.newRegistrations=o.newRegistrations,this.feeDueTotal=o.feeDueTotal;var n=o.chartAttandanceData,s=n.find(p=>1==p.typeID);this.todayAttData.push(0==s.totalStudents?1:s.totalStudents),this.todayAttData.push(0==s.presentStudents?1:s.presentStudents),this.todayAttData.push(0==s.absentStudents?1:s.absentStudents);var r=n.find(p=>2==p.typeID);this.monthAttData.push(0==r.totalStudents?1:r.totalStudents),this.monthAttData.push(0==r.presentStudents?1:r.presentStudents),this.monthAttData.push(0==r.absentStudents?1:r.absentStudents);var c=n.find(p=>3==p.typeID);this.yearAttData.push(0==c.totalStudents?1:c.totalStudents),this.yearAttData.push(0==c.presentStudents?1:c.presentStudents),this.yearAttData.push(0==c.absentStudents?1:c.absentStudents),this.chartOptions1={series:this.todayAttData,chart:{type:"donut",height:150,width:280},labels:["Total Students","Present Students","Absent Students"],responsive:[{breakpoint:480,options:{chart:{width:500},legend:{position:"bottom"}}}]},this.chartOptions2={series:this.monthAttData,chart:{type:"donut",height:150,width:280},labels:["Total Students","Present Students","Absent Students"],responsive:[{breakpoint:480,options:{chart:{width:500},legend:{position:"bottom"}}}]},this.chartOptions3={series:this.yearAttData,chart:{type:"donut",height:150,width:280},labels:["Total Students","Present Students","Absent Students"],responsive:[{breakpoint:480,options:{chart:{width:500},legend:{position:"bottom"}}}]},this.isShowDonut=!0,null!=o.branchCode&&""!=o.branchCode&&this.apiService.getSchoolUrl(`Branch/GetBranchEventsHolidaysData/${o.branchCode}`).subscribe(p=>{if(p){this.minDate=this.utilService.selectedDate(p.startDate),this.maxDate=this.utilService.selectedDate(p.endDate);for(var u=0;u<p.eventsHolidaysDataList.length;u++)1===p.eventsHolidaysDataList[u].eventType?this.datesWeekends.push(p.eventsHolidaysDataList[u].eventDate):2===p.eventsHolidaysDataList[u].eventType?(this.datesHolidays.push(p.eventsHolidaysDataList[u].eventDate),p.eventsHolidaysDataList[u].eventDate=this.utilService.selectedDate(p.eventsHolidaysDataList[u].eventDate),this.allDatesData.push(p.eventsHolidaysDataList[u])):3===p.eventsHolidaysDataList[u].eventType&&(this.datesEvents.push(p.eventsHolidaysDataList[u].eventDate),p.eventsHolidaysDataList[u].eventDate=this.utilService.selectedDate(p.eventsHolidaysDataList[u].eventDate),this.allDatesData.push(p.eventsHolidaysDataList[u]));this.isShowDiv=!0,this.isShowCalandar=!0}},p=>{this.utilService.ShowApiErrorMessage(p)})}},o=>{this.utilService.ShowApiErrorMessage(o)}):"opr"==this.dashBoardType?(this.loadCitiesList(),this.isArab=this.utilService.isArabic(),"operations"==this.input.dashBoardSubType?(this.displayedColumns=["projectName","siteName","employeeNumber","employeeName","shiftCode","inTime","outTime","arrive","late","isGeofenseOut","geofenseOutCount","overtime","isOnBreak","Actions"],this.interval=setInterval(()=>{e++,1==e?this.loadFilterOptions():2==e&&this.loadInitialData()},e>2?0:1e3)):"management"==this.input.dashBoardSubType&&(this.displayedColumns=["projectName","siteName","shiftCode","totalContracted","staffPresent","lateStaff","shortage","supportGaurds","projectStatus","Actions"],this.loadInitialData())):"profm"==this.dashBoardType&&this.loadProfmDashBoardData()}dateClass(){return e=>{var o=this.datesWeekends.map(n=>new Date(n)).some(n=>n.getDate()===e.getDate()&&n.getMonth()===e.getMonth()&&n.getFullYear()===e.getFullYear());return o?o?"special-date":"":(o=this.datesHolidays.map(n=>new Date(n)).some(n=>n.getDate()===e.getDate()&&n.getMonth()===e.getMonth()&&n.getFullYear()===e.getFullYear()))?o?"special-holiday-date":"":(o=this.datesEvents.map(n=>new Date(n)).some(n=>n.getDate()===e.getDate()&&n.getMonth()===e.getMonth()&&n.getFullYear()===e.getFullYear()))?"special-event-date":""}}loadInitialData(){this.totalItemsCount=0,this.loadList(0)}resetFilter(){this.totalItemsCount=0,this.oprDashboard=null,this.input.branchCode=null,this.input.siteCode=null,this.input.projectCode=null,this.input.employeeNumber=null,this.input.pageNumber=0,this.input.pageSize=10,this.loadList(0)}loadList(e){this.isLoading=!0,this.pageService.change({pageIndex:e,pageSize:this.pageSize,previousPageIndex:e-1,length:this.totalItemsCount}),this.input.pageNumber=e,this.apiService.postOprUrl("OperationsDashboard/getOpeartionsDashboardByFilter",this.input).subscribe(o=>{o&&(this.oprDashboard=o,this.oprDashboard.todayAttData=[],this.oprDashboard.todayAttData.push(o.totalEmpCount),this.oprDashboard.todayAttData.push(o.reportedEmpCount),this.oprDashboard.todayAttData.push(o.lateArrivalsCount),this.oprDashboard.todayAttData.push(o.notReportedEmpCount),this.oprDashboard.todayAttData.push(o.shiftsNotAssignedCount),this.oprDashboard.todayAttData.push(o.leavesCount),this.totalItemsCount=o.totalItemsCount,this.projectsSelectionList=o.projectsSelectionList,this.sitesSelectionList=o.sitesSelectionList,"operations"==this.input.dashBoardSubType?(this.attendanceData=new m.by(o.employeeAttendance),this.employeesSelectionList=o.employeesSelectionList,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.chartOptions1={series:this.oprDashboard.todayAttData,chart:{type:"donut",height:150,width:280},labels:["Total Employees","Reported Employees","Late Arrivals Count","Not Reported Employees","Shifts Not Assigned","Employees On Leave"],responsive:[{breakpoint:480,options:{chart:{width:500},legend:{position:"bottom"}}}]},this.radialChartOptions1={series:[100],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{fontWeight:"bold",offsetY:-10}}}},labels:[""]},this.radialChartOptions2={series:[Math.round(o.reportedEmpCount/o.totalEmpCount*100)],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{offsetY:-10,fontWeight:"bold"}}}},labels:[""]},this.radialChartOptions3={series:[Math.round(o.lateArrivalsCount/o.totalEmpCount*100)],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{offsetY:-10,fontWeight:"bold"}}}},labels:[""]},this.radialChartOptions4={series:[Math.round(o.notReportedEmpCount/o.totalEmpCount*100)],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{offsetY:-10,fontWeight:"bold"}}}},labels:[""]}):"management"==this.input.dashBoardSubType&&(this.attendanceData=new m.by(o.rows),this.radialChartOptions1={series:[100],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{offsetY:-10,fontWeight:"bold"}}}},labels:[""]},this.radialChartOptions2={series:[Math.round(o.staffPresent/o.totalContracted*100)],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{offsetY:-10,fontWeight:"bold"}}}},labels:[""]},this.radialChartOptions3={series:[Math.round(o.lateStaff/o.totalContracted*100)],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{offsetY:-10,fontWeight:"bold"}}}},labels:[""]},this.radialChartOptions4={series:[Math.round(o.shortage/o.totalContracted*100)],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{offsetY:-10,fontWeight:"bold"}}}},labels:[""]},setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount})))})}onSortOrder(e){this.pageService.change({pageSize:this.pageSize,pageIndex:0,previousPageIndex:-1,length:0}),this.sortingOrder=e.active+" "+e.direction,this.input.sortingOrder=this.sortingOrder,this.loadList(0)}onPageSwitch(e){this.pageService.change(e),this.pageSize=e.pageSize,this.input.pageSize=e.pageSize,this.loadList(e.pageIndex)}applyFilter(){this.loadList(0)}translateToolTip(e){return`${this.translate.instant(e)}`}loadCitiesList(){this.apiService.getOprUrl("Branch/getBranchSelectListForUser").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}updateFilterOptions(e){this.input.filterOptions[e].isSelected=!this.input.filterOptions[e].isSelected,this.pageService.change({pageSize:this.pageSize,pageIndex:0,previousPageIndex:-1,length:0}),this.loadList(0)}loadFilterOptions(){this.apiService.getOprUrl(`OperationsDashboard/getFilterOptions/${this.input.dashBoardSubType}`).subscribe(o=>{this.input.filterOptions=o})}enterAutoAttendance(){this.isLoading=!0;let e=this.oprDashboard.employeeAttendance;e.filter(o=>0==o.isReported),e.length>0?this.apiService.postOprUrl("EmployeesAttendance/EnterAutoAttendanceForAllProjectSites",e).subscribe(o=>{o&&(this.utilService.OkMessage(),this.loadInitialData())},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)}):this.notifyService.showWarning("No_Updates_Found")}convertStringToTime(e){if(null==e||""==e)return"";{let o=+e.split(":",2)[0],n=+e.split(":",2)[1];return 0==o?"12:"+String(n).padStart(2,"0")+"AM":o>=12?String(o-12).padStart(2,"0")+":"+String(n).padStart(2,"0")+"PM":String(o).padStart(2,"0")+":"+String(n).padStart(2,"0")+"AM"}}onChangeFilterItem(){this.input.filterOptions.forEach(e=>{e.isSelected=!1}),this.selectedfilterOptions.forEach(e=>{let o=this.input.filterOptions.findIndex(n=>n.key==e.key);o>=0&&(this.input.filterOptions[o].isSelected=!0)}),this.applyFilter()}changeDashboardSubtype(){var e,o;this.resetInitialData(),"opr"==this.dashBoardType?"operations"==(null===(e=this.input)||void 0===e?void 0:e.dashBoardSubType)?this.input.dashBoardSubType="management":"management"==(null===(o=this.input)||void 0===o?void 0:o.dashBoardSubType)&&(this.input.dashBoardSubType="operations"):(this.dashBoardType="opr",this.input.dashBoardSubType="operations"),this.ngOnInit()}chageDate(){this.input.date=null==this.input.date?new Date("2022-11-01"):null,this.ngOnInit()}resetInitialData(){this.oprDashboard={notReportedEmpCount:1,totalEmpCount:1,reportedEmpCount:1,lateArrivalsCount:0},this.oprChartData1=[],this.oprChartData2=[],this.oprChartData3=[],this.oprChartData4=[],this.oprChartData5=[],this.pageNumber=0,this.pageSize=10,this.selectedfilterOptions=[],this.input.pageNumber=0,this.input.pageSize=10,this.input.branchCode=null,this.input.siteCode=null,this.input.projectCode=null,this.input.employeeNumber=null,this.input.filterOptions=null,this.citySelectionList=[],this.projectsSelectionList=[],this.sitesSelectionList=[],this.employeesSelectionList=[]}loadProfmDashBoardData(){this.http.get("http://localhost:13428/api/FomWebDashboard/getWebDashboardData").subscribe(e=>{var o,n;this.profmDashboard=e,this.profmDashboard.totalData=[],this.profmDashboard.totalData.push(e.totalTickets),this.profmDashboard.totalData.push(e.closedTickets),this.profmDashboard.totalData.push(e.pendingTickets),this.monthlyChartOptions={series:[{name:"Tickets",data:e.monthlyTotalTickets}],chart:{type:"bar",height:150},plotOptions:{bar:{horizontal:!1,columnWidth:"55%"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:e.monthsNames},yaxis:{title:{text:"tickets"}},fill:{opacity:1},tooltip:{y:{formatter:function(s){return s+" tickets"}}}},this.radialChartOptions1={series:[100],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{offsetY:-10,fontWeight:"bold"}}}},labels:[""]},this.radialChartOptions2={series:[Math.round(e.closedTickets/e.totalTickets*100)],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{offsetY:-10,fontWeight:"bold"}}}},labels:[""]},this.radialChartOptions3={series:[Math.round(e.pendingTickets/e.totalTickets*100)],chart:{height:120,type:"radialBar"},plotOptions:{radialBar:{hollow:{size:"50%"},dataLabels:{name:{fontSize:"0px"},value:{offsetY:-10,fontWeight:"bold"}}}},labels:[""]},this.semiRadialChartOptions1.series=[Math.round(e.closedTickets/e.totalTickets*100)],this.semiRadialChartOptions2.series=[Math.round((null===(o=e.last30DaysData)||void 0===o?void 0:o.closedTickets)/(null===(n=e.last30DaysData)||void 0===n?void 0:n.totalTickets)*100)]})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(v._),t.Y36(N.eN),t.Y36(q.s),t.Y36(b.t),t.Y36(W),t.Y36(w.g),t.Y36(B.N),t.Y36(f.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-test-example"]],viewQuery:function(e,o){if(1&e&&(t.Gf(G8,5),t.Gf(W8,5),t.Gf(k.NW,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.chart=n.first),t.iGM(n=t.CRH())&&(o.calendar=n.first),t.iGM(n=t.CRH())&&(o.paginator=n.first)}},decls:4,vars:4,consts:[[4,"ngIf"],[1,"card-group"],[1,"card","border-right"],[1,"card-body"],[1,"d-flex","d-lg-flex","d-md-block","align-items-center"],[1,"d-inline-flex","align-items-center"],[1,"text-dark","mb-1","font-weight-medium"],[1,"badge","bg-primary","font-12","text-white","font-weight-medium","badge-pill","ml-2","d-lg-block","d-md-none"],[1,"text-muted","font-weight-normal","mb-0","w-100","text-truncate"],[1,"ml-auto","mt-md-3","mt-lg-0"],[1,"opacity-7","text-muted"],["data-feather","user-plus"],[1,"text-dark","mb-1","w-100","text-truncate","font-weight-medium"],[1,"set-doller"],["data-feather","dollar-sign"],[1,"badge","bg-danger","font-12","text-white","font-weight-medium","badge-pill","ml-2","d-md-none","d-lg-block"],["data-feather","file-plus"],[1,"card"],[1,"text-dark","mb-1","font-weight-medium",3,"dblclick"],["data-feather","globe"],[1,"row"],[1,"col-lg-4","col-md-12"],[1,"card-title"],["id","campaign-v2",1,"mt-2",2,"height","283px","width","100%"],[1,"list-style-none","mb-0"],[1,"fas","fa-circle","text-primary","font-10","mr-2"],[1,"text-muted"],[1,"text-dark","float-right","font-weight-medium"],[1,"mt-3"],[1,"fas","fa-circle","text-danger","font-10","mr-2"],[1,"fas","fa-circle","text-cyan","font-10","mr-2"],[1,"net-income","mt-4","position-relative",2,"height","294px"],[1,"list-inline","text-center","mt-5","mb-2"],[1,"list-inline-item","text-muted","font-italic"],[1,"card-title","mb-4"],[1,"",2,"height","180px"],["id","visitbylocate",2,"height","100%"],[1,"row","mb-3","align-items-center","mt-1","mt-5"],[1,"col-4","text-right"],[1,"text-muted","font-14"],[1,"col-5"],[1,"progress",2,"height","5px"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary",2,"width","100%"],[1,"col-3","text-right"],[1,"mb-0","font-14","text-dark","font-weight-medium"],[1,"row","mb-3","align-items-center"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger",2,"width","74%"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-cyan",2,"width","60%"],[1,"row","align-items-center"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",2,"width","50%"],[1,"col-md-6","col-lg-8"],[1,"d-flex","align-items-start"],[1,"card-title","mb-0"],[1,"ml-auto"],[1,"dropdown","sub-dropdown"],["type","button","id","dd1","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-link","text-muted","dropdown-toggle"],["data-feather","more-vertical"],["aria-labelledby","dd1",1,"dropdown-menu","dropdown-menu-right"],["href","#",1,"dropdown-item"],[1,"pl-4","mb-5"],[1,"stats","ct-charts","position-relative",2,"height","315px"],[1,"list-inline","text-center","mt-4","mb-0"],[1,"col-md-6","col-lg-4"],[1,"mt-4","activity"],[1,"d-flex","align-items-start","border-left-line","pb-3"],["href","javascript:void(0)",1,"btn","btn-info","btn-circle","mb-2","btn-item"],["data-feather","shopping-cart"],[1,"ml-3","mt-2"],[1,"text-dark","font-weight-medium","mb-2"],[1,"font-14","mb-2","text-muted"],[1,"font-weight-light","font-14","text-muted"],["href","javascript:void(0)",1,"btn","btn-danger","btn-circle","mb-2","btn-item"],["data-feather","message-square"],[1,"d-flex","align-items-start","border-left-line"],["href","javascript:void(0)",1,"btn","btn-cyan","btn-circle","mb-2","btn-item"],["data-feather","bell"],[1,"font-weight-light","font-14","mb-1","d-block","text-muted"],["href","javascript:void(0)",1,"font-14","border-bottom","pb-1","border-info"],[1,"col-12"],[1,"d-flex","align-items-center","mb-4"],[1,"table-responsive"],[1,"table","no-wrap","v-middle","mb-0"],[1,"border-0"],[1,"border-0","font-14","font-weight-medium","text-muted"],[1,"border-0","font-14","font-weight-medium","text-muted","px-2"],[1,"border-0","font-14","font-weight-medium","text-muted","text-center"],[1,"border-top-0","px-2","py-4"],[1,"d-flex","no-block","align-items-center"],[1,"mr-3"],["src","assets/images/users/widget-table-pic1.jpg","alt","user","width","45","height","45",1,"rounded-circle"],[1,""],[1,"text-dark","mb-0","font-16","font-weight-medium"],[1,"border-top-0","text-muted","px-2","py-4","font-14"],[1,"popover-icon"],["href","javascript:void(0)",1,"btn","btn-primary","rounded-circle","btn-circle","font-12"],["href","javascript:void(0)",1,"btn","btn-danger","rounded-circle","btn-circle","font-12","popover-item"],["href","javascript:void(0)",1,"btn","btn-cyan","rounded-circle","btn-circle","font-12","popover-item"],["href","javascript:void(0)",1,"btn","btn-success","text-white","rounded-circle","btn-circle","font-20"],[1,"border-top-0","text-center","px-2","py-4"],["data-toggle","tooltip","data-placement","top","title","In Testing",1,"fa","fa-circle","text-primary","font-12"],[1,"border-top-0","text-center","font-weight-medium","text-muted","px-2","py-4"],[1,"font-weight-medium","text-dark","border-top-0","px-2","py-4"],[1,"px-2","py-4"],["src","assets/images/users/widget-table-pic2.jpg","alt","user","width","45","height","45",1,"rounded-circle"],[1,"text-muted","px-2","py-4","font-14"],[1,"text-center","px-2","py-4"],["data-toggle","tooltip","data-placement","top","title","Done",1,"fa","fa-circle","text-success","font-12"],[1,"text-center","text-muted","font-weight-medium","px-2","py-4"],[1,"font-weight-medium","text-dark","px-2","py-4"],["src","assets/images/users/widget-table-pic3.jpg","alt","user","width","45","height","45",1,"rounded-circle"],["data-toggle","tooltip","data-placement","top","title","Done",1,"fa","fa-circle","text-primary","font-12"],["src","assets/images/users/widget-table-pic4.jpg","alt","user","width","45","height","45",1,"rounded-circle"],["href","javascript:void(0)",1,"btn","btn-success","text-white","font-20","rounded-circle","btn-circle"],["data-toggle","tooltip","data-placement","top","title","In Progress",1,"fa","fa-circle","text-danger","font-12"],[1,"col-md-9"],[1,"col-md-12"],[1,"flex","flex-wrap"],[1,"w-full","md:w-1/2","xl:w-1/3","p-6"],[1,"bg-gradient-to-b","from-green-200","to-green-100","border-b-4","border-green-600","rounded-lg","shadow-xl","p-5"],[1,"flex","flex-row","items-center"],[1,"flex-shrink","pr-4"],[1,"flex-1","text-right","md:text-center"],[1,"font-bold","uppercase","text-gray-600"],[1,"font-bold","text-3xl"],[1,"bg-gradient-to-b","from-pink-200","to-pink-100","border-b-4","border-pink-500","rounded-lg","shadow-xl","p-5"],[1,"bg-gradient-to-b","from-yellow-200","to-yellow-100","border-b-4","border-yellow-600","rounded-lg","shadow-xl","p-5"],[1,"bg-gradient-to-b","from-blue-200","to-blue-100","border-b-4","border-blue-500","rounded-lg","shadow-xl","p-5"],[1,"bg-gradient-to-b","from-indigo-200","to-indigo-100","border-b-4","border-indigo-500","rounded-lg","shadow-xl","p-5"],[1,"bg-gradient-to-b","from-red-200","to-red-100","border-b-4","border-red-500","rounded-lg","shadow-xl","p-5"],["class","row",4,"ngIf"],[1,"col-md-3"],[1,"col-md-4"],[1,"chart-wrap"],["id","chart"],[3,"series","chart","labels","responsive"],[4,"ngFor","ngForOf"],[3,"dateClass","selected","minDate","maxDate","selectedChange"],["calendar",""],[1,"col-md-12","col-lg-12",2,"padding","8%"],[2,"background-color","#fee2e2","color","#000","padding","5%"],[2,"background-color","#a7f3d0","color","#000","padding","5%"],[2,"background-color","#fde68a","color","#000","padding","5%"],[1,"table","no-wrap","v-middle","mb-0",2,"overflow","hidden"],[1,"col-md-12","col-lg-12","table-responsive",2,"display","flex","flex-grow","1","padding","0px 10px 10px 0px"],["id","headCard",1,"col-md-1","col-lg-4",2,"max-width","28%","padding","0px 10px 0px 10px"],[1,"row","card"],[1,"row","card-body"],["alt","","src","../../assets/dashboard/dashboard_images/group-94.svg",1,"frame-child37",3,"dblclick"],[1,"col-md-5",2,"flex","0 0 auto","max-width","40%","padding","0px 0px 0px 0px"],[1,"security-guards"],[1,"b11"],[1,"col-md-4",2,"flex","0 0 auto","max-width","30%","padding","0px 0px 0px 0px"],[2,"padding","0 0 0 0",3,"series","chart","plotOptions","labels"],[1,"row","col-md-12",2,"padding-left","35px"],[2,"width","90%","color","black"],[2,"width","10%","text-align","right","vertical-align","bottom"],["alt","","src","../../assets/dashboard/dashboard_images/vector5.svg",1,"vector-icon28"],[1,"emptyDiv"],["alt","","src","../../assets/dashboard/dashboard_images/group-95.svg",1,"frame-child37",3,"dblclick"],["id","headCard",1,"col-md-1","col-lg-3",2,"max-width","28%","padding","0px 10px 0px 10px"],["alt","","src","../../assets/dashboard/dashboard_images/group-96.svg",1,"frame-child37"],["alt","","src","../../assets/dashboard/dashboard_images/group-97.svg",1,"frame-child37"],["hidden","",1,"col-md-3"],[1,"card","w-full","h-full"],[1,"col-md-12",2,"padding","0px 0px 10px 0px"],[1,"dashboard-child"],[1,"frame-parent19"],[1,"svgexport-17-23-1-group"],[1,"fas","fa-map-marker-alt",2,"color","royalblue"],["placeholder","City","bindLabel","lable","bindValue","value",2,"width","140px",3,"items","ngModel","ngModelChange","change"],[1,"fas","fa-industry",2,"color","royalblue"],["placeholder","Project","bindLabel","textTwo","bindValue","value",2,"width","240px",3,"items","ngModel","ngModelChange","change"],[1,"fas","fa-building",2,"color","royalblue"],["placeholder","Site","bindLabel","textTwo","bindValue","value",2,"width","240px",3,"items","ngModel","ngModelChange","change"],[1,"fas","fa-user",2,"color","royalblue"],["placeholder","Employee","bindLabel","textTwo","bindValue","value",2,"width","240px",3,"items","ngModel","ngModelChange","change"],["value",""],["value","Jeddah"],["value","Riyadh"],[1,"fas","fa-filter",2,"color","royalblue"],["bindLabel","key","placeholder","FILTER","appendTo","body",1,"col-md-12",2,"max-width","100%","margin-left","0px",3,"items","multiple","ngModel","ngModelChange","change"],[1,"col-lg-12",2,"padding","0px 0px 0px 0px"],["id","AttendanceData","mat-table","","matSort","","border","1",1,"table-responsive",3,"dataSource","matSortChange"],["matColumnDef","projectCode"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","projectName"],["matColumnDef","siteCode"],["matColumnDef","siteName"],["matColumnDef","shiftCode"],["matColumnDef","employeeName"],["matColumnDef","employeeNumber"],["matColumnDef","inTime"],["matColumnDef","outTime"],["matColumnDef","arrive"],["matColumnDef","late"],["matColumnDef","isGeofenseOut"],["matColumnDef","geofenseOutCount"],["matColumnDef","overtime"],["matColumnDef","isOnBreak"],["matColumnDef","Actions","stickyEnd",""],[4,"matHeaderCellDef"],["class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-sort-header",""],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-33-41.svg",4,"ngIf","ngIfElse"],["inActive",""],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-33-41.svg"],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-31-21.svg"],["class","svgexport-17-33-41","alt","","src","../../assets/dashboard/dashboard_images/svgexport17-33-41.svg",4,"ngIf","ngIfElse"],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-33-41.svg",1,"svgexport-17-33-41"],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-31-21.svg",1,"svgexport-17-31-21"],[1,"btn-circle","border-2",2,"padding","2px 5px 2px 5px","border-color","red"],[1,"clickaction","clickicons"],[3,"matTooltip"],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-30-11.svg",1,"svgexport-17-30-11"],["mat-header-row",""],["mat-row",""],["class","col-md-12","style","padding:0px 0px 10px 0px",4,"ngIf"],["mat-table","","matSort","","border","1",1,"table-responsive",3,"dataSource","matSortChange"],["style","word-break:break-word",4,"matCellDef"],["matColumnDef","totalContracted"],["matColumnDef","staffPresent"],["matColumnDef","lateStaff"],["matColumnDef","shortage"],["matColumnDef","supportGaurds"],["matColumnDef","projectStatus"],[2,"word-break","break-word"],[1,"btn-circle","border-2",2,"padding","5px 5px 5px 5px","border-color","royalblue","width","fit-content"],[1,"btn-circle","border-2",2,"padding","5px 5px 5px 5px","border-color","green","width","fit-content"],[1,"btn-circle","border-2",2,"padding","5px 5px 5px 5px","border-color","red","width","fit-content"],[1,"btn-circle","border-2",2,"padding","5px 5px 5px 5px","border-color","blue","width","fit-content"],[1,"btn-circle","border-2",2,"padding","5px 5px 5px 5px","border-color","orange","width","fit-content"],[1,"fas","fa-info-circle",2,"color","cornflowerblue"],[1,"row",2,"width","122%"],[1,"col-md-8","col-lg-8"],[1,"card",2,"border","1px solid #c7d0de","border-radius","17px"],[1,"corrective-maintenance-parent"],[1,"corrective-maintenance"],["alt","","src","../../assets/images/corrective_maintainence.svg",1,"svgexport-17-24-1"],[1,"card-group",2,"margin-bottom","19px"],[1,"card",2,"width","500px","display","table","padding","1%","margin","1%","border-radius","19px"],[1,"d-flex","d-lg-flex","d-md-block"],[1,"group-parent"],["alt","","src","../../assets/images/Frame1.svg",1,"frame-child"],[1,"total-tickets-parent"],[1,"total-tickets"],[1,"b"],["alt","","src","../../assets/images/Frame2.svg",1,"frame-child"],["alt","","src","../../assets/images/Frame3.svg",1,"frame-child"],[1,"discipline-wise"],[1,"card-group",2,"margin-bottom","-36px"],["class","col-md-4",4,"ngIf"],[1,"col-md-4","col-lg-4"],[1,"card",2,"width","50%","min-height","45%","border-radius","19px","border","1px solid #c7d0de"],[2,"vertical-align","middle"],[3,"series","chart","plotOptions","labels","fill"],[1,"card",2,"width","100%","min-height","45%","border-radius","19px","border","1px solid #c7d0de"],[1,"frame-parent15"],[1,"group-parent5"],["alt","","src","../../assets/images/Frame4.svg",1,"frame-child37"],[1,"security-guards-parent"],["alt","","src","../../assets/images/Frame10.svg",1,"frame-icon3"],["alt","","src","../../assets/images/Frame5.svg",1,"frame-child37"],["alt","","src","../../assets/images/Frame10.svg",1,"frame-icon"],["alt","","src","../../assets/images/Frame6.svg",1,"frame-child37"],["alt","","src","../../assets/images/Frame10.svg",1,"frame-icon4"],[1,"card",2,"width","50%","min-height","87%","border-radius","19px","border","1px solid #c7d0de"],[3,"series","chart","dataLabels","plotOptions","yaxis","legend","fill","stroke","tooltip","xaxis"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card",2,"border-radius","19px","border","1px solid #c7d0de"],[1,"work-status"],[1,"table"],[2,"color","black"],["for","e1"],[1,"recent-requests"],["alt","","src","../../assets/images/Frame7.svg",1,"frame-child37"],["alt","","src","../../assets/images/Frame10.svg",1,"frame-icon1"],["alt","","src","../../assets/images/Frame8.svg",1,"frame-child37"],["alt","","src","../../assets/images/Frame10.svg",1,"frame-icon2"],["alt","","src","../../assets/images/Frame9.svg",1,"frame-child37"]],template:function(e,o){1&e&&(t.YNc(0,z8,347,0,"div",0),t.YNc(1,nE,71,28,"div",0),t.YNc(2,v9,3,2,"div",0),t.YNc(3,E9,180,74,"div",0)),2&e&&(t.Q6J("ngIf","default"==o.dashBoardType),t.xp6(1),t.Q6J("ngIf","school"==o.dashBoardType),t.xp6(1),t.Q6J("ngIf","opr"==o.dashBoardType&&null!=o.attendanceData),t.xp6(1),t.Q6J("ngIf","profm"==o.dashBoardType))},directives:[Z.O5,V8.x,Z.sg,j._H,Et.w9,l.JJ,l.On,l.YN,l.Kr,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,x.nU,ut.gM,m.XQ,m.Gk],pipes:[f.X$,Z.Ts,Z.uU],styles:[".card.border-right[_ngcontent-%COMP%] {\n      width: 500px;\n      display: table;\n      padding: 3%;\n      margin: 2%;\n    }\n\n    .card-body[_ngcontent-%COMP%] {\n      flex: 1 1 auto;\n      padding: 10px;\n    }","table.AttendanceData[_ngcontent-%COMP%]   ng-container[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n      border: solid;\n      border-color: lightgray;\n      background-color: royalblue;\n      border-width: 1px;\n      color: white;\n      text-align: center;\n      font-family: Rubik;\n      font-size: larger;\n      padding: 5px 5px 5px 5px;\n    }\n\n    table.AttendanceData[_ngcontent-%COMP%]   ng-container[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n      align-content: center;\n      background-color: white;\n      border: solid;\n      border-color: lightgray;\n      border-width: 1px;\n      color: black;\n      text-align: center;\n      font-family: Rubik;\n    }\n\n      td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n        display: block;\n        margin-left: auto;\n        margin-right: auto;\n      }\n\n    .card.border-right[_ngcontent-%COMP%] {\n      width: 500px;\n      display: table;\n      padding: 3%;\n      margin: 2%;\n    }\n\n    .card-body[_ngcontent-%COMP%] {\n      flex: 1 1 auto;\n      padding: 10px;\n    }\n\n    .card[_ngcontent-%COMP%] {\n      box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.08);\n    }\n\n    table.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n      font-size: smaller;\n      text-align: center;\n    }\n\n    .emptyDiv[_ngcontent-%COMP%] {\n      padding: 5px 5px 5px 5px;\n      width: 25px;\n    }\n\n    div.security-guards[_ngcontent-%COMP%] {\n      color: black;\n      font-weight: 800;\n    }\n\n    b.b11[_ngcontent-%COMP%] {\n      color: black;\n      font-weight: 800;\n    }"]}),i})();function O9(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Code")," "))}function k9(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitCode)}}function j9(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Name_English")," "))}function M9(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitNameEng)}}function R9(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Name_Arab")," "))}function P9(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitNameArb)}}function F9(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Customer_Active")," "))}function I9(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function Y9(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function J9(i,a){if(1&i&&(t.TgZ(0,"td",36),t.YNc(1,I9,3,3,"span",37),t.YNc(2,Y9,3,3,"ng-template",null,38,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function Q9(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function B9(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"a",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",43),t.qZA(),t.qZA()}}function H9(i,a){1&i&&t._UZ(0,"tr",44)}function $9(i,a){1&i&&t._UZ(0,"tr",45)}const V9=function(){return{standalone:!0}},G9=[{path:"opCustomer",component:qc},{path:"customerSites",component:Ra},{path:"customerSites/viewSites",component:Xe},{path:"serviceCode",component:b7},{path:"servicesEnquiry",component:bL},{path:"surveyForm",component:x8},{path:"surveyForm/ViewSurveyFormTemplate",component:To},{path:"surveyFormElements",component:XN},{path:"surveyor",component:H8},{path:"unitCodeForServices",component:(()=>{class i extends y{constructor(e,o,n,s,r,c,p,u,d,_){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=_,this.displayedColumns=["unitCode","unitNameEng","unitNameArb","isActive","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadUnits(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadUnits(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("units/getUnitsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new m.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,Ao);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.Oi.create,"Adding_New_Unit","Add")}edit(e){this.openDialogManage(e,g.Oi.update,"Updating_Unit","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,dt.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Units",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(N.eN),t.Y36(D.F0),t.Y36(q.s),t.Y36(v._),t.Y36(w.g),t.Y36(b.t),t.Y36(E.R),t.Y36(T.uw),t.Y36(B.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-unit-code-for-services"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k.NW,7),t.Gf(x.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:62,vars:32,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#createnewbranch","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[3,"isLoading"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","unitCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","unitNameEng"],["matColumnDef","unitNameArb"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",20),t._UZ(39,"spinner-loader",21),t.TgZ(40,"div",22),t.ynx(41),t.TgZ(42,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(43,24),t.YNc(44,O9,3,3,"th",25),t.YNc(45,k9,2,1,"td",26),t.BQk(),t.ynx(46,27),t.YNc(47,j9,3,3,"th",25),t.YNc(48,M9,2,1,"td",26),t.BQk(),t.ynx(49,28),t.YNc(50,R9,3,3,"th",25),t.YNc(51,P9,2,1,"td",26),t.BQk(),t.ynx(52,29),t.YNc(53,F9,3,3,"th",25),t.YNc(54,J9,4,2,"td",26),t.BQk(),t.ynx(55,30),t.YNc(56,Q9,3,3,"th",31),t.YNc(57,B9,3,0,"td",26),t.BQk(),t.YNc(58,H9,1,0,"tr",32),t.YNc(59,$9,1,0,"tr",33),t.qZA(),t.ynx(60),t.TgZ(61,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,17,"Unit_Code_For_Services")," "),t.xp6(6),t.hij(" ",t.lcZ(11,19,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,21,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,23,"Unit_Code_For_Services")),t.xp6(10),t.hij("",t.lcZ(27,25,"Unit_Code_For_Services_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,27,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(31,V9)),t.xp6(5),t.hij("",t.lcZ(35,29,"Add_New_Unit")," "),t.xp6(5),t.Q6J("isLoading",o.isLoading),t.xp6(3),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,Zt.r,m.BZ,x.YE,m.w1,m.fO,m.Dz,m.as,m.nj,k.NW,m.ge,x.nU,m.ev,Z.O5,m.XQ,m.Gk],pipes:[f.X$],encapsulation:2}),i})()},{path:"serviceUnitMappings",component:WD},{path:"serviceEnquiryForms",component:ND},{path:"serviceEnquiryForms/viewEnquiries",component:Zo},{path:"serviceEnquiryForms/viewEnquiries/PrintSurveyForm",component:Ee},{path:"serviceEnquiryForms/viewEnquiries/EditableSurveyForm",component:Le},{path:"serviceEnquiryForms/printEnquiryForm",component:to},{path:"surveyor/viewEnquiriesBySurveyorCode",component:ur},{path:"surveyor/viewEnquiriesBySurveyorCode/PrintSurveyForm",component:Ee},{path:"surveyor/viewEnquiriesBySurveyorCode/EditableSurveyForm",component:Le},{path:"employee",component:Ds},{path:"employeePrimarySiteLogs",component:Cs},{path:"projects",component:tS},{path:"projects2",component:tU},{path:"shiftMaster",component:oN},{path:"payrollGroup",component:Op},{path:"shiftToSiteMap",component:rN},{path:"monthlyRoaster",component:wl},{path:"attendance",component:Uo},{path:"skillset",component:qN},{path:"materialequipment",component:_l},{path:"operationexpensehead",component:Jc},{path:"logisticsandvehicle",component:Wr},{path:"projectBudgetCosting",component:m3},{path:"authorities",component:Hi},{path:"test",component:vo},{path:"oprDashBoard",component:Qc},{path:"existingProjects",component:Ur},{path:"addResourceRequests",component:fd},{path:"transferEmployeeRequests",component:eZ},{path:"removeResourceRequests",component:z1},{path:"replaceEmployeeRequests",component:qh},{path:"pvOpenCloseRequests",component:b1},{path:"reportsProjectSitesList",component:BU},{path:"reportsProjectsCountMatrix",component:IU},{path:"reportsResourcesOnProject",component:l7},{path:"reportsCountOfSkillsets",component:RU},{path:"reportsAttendanceStatus",component:UU},{path:"reportCustomerComplaints",component:GU},{path:"reportCustomerVisits",component:KU},{path:"requests",component:o1},{path:"contractFormTemplates",component:ra},{path:"contractFormTemplateElements",component:cn},{path:"tranferWithReplacementReqs",component:OZ},{path:"swapEmployeesReqs",component:Kt},{path:"reasonCodes",component:TU},{path:"test",component:vo}];let W9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[D.Bz.forChild(G9)],D.Bz]}),i})(),z9=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[Z.uU],imports:[[W9,qo.m],Z.ez]}),i})()}}]);